var tQ=Object.defineProperty;var sX=w=>{throw TypeError(w)};var nQ=(w,f,p)=>f in w?tQ(w,f,{enumerable:!0,configurable:!0,writable:!0,value:p}):w[f]=p;var Ko=(w,f,p)=>nQ(w,typeof f!="symbol"?f+"":f,p),Zq=(w,f,p)=>f.has(w)||sX("Cannot "+p);var Nt=(w,f,p)=>(Zq(w,f,"read from private field"),p?p.call(w):f.get(w)),cs=(w,f,p)=>f.has(w)?sX("Cannot add the same private member more than once"):f instanceof WeakSet?f.add(w):f.set(w,p),ga=(w,f,p,C)=>(Zq(w,f,"write to private field"),C?C.call(w,p):f.set(w,p),p),Kn=(w,f,p)=>(Zq(w,f,"access private method"),p);import{c as z6,g as IM}from"./assets/_commonjsHelpers-Cpj98o6Y.js";function oQ(w,f,p){const C=[];return w.forEach(O=>typeof O!="string"?C.push(O):f[Symbol.split](O).forEach(($,P,W)=>{$!==""&&C.push($),P<W.length-1&&C.push(p)})),C}/**
 * Takes a string with placeholder variables like `%{smart_count} file selected`
 * and replaces it with values from options `{smart_count: 5}`
 *
 * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
 * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
 *
 * @param phrase that needs interpolation, with placeholders
 * @param options with values that will be used to replace placeholders
 */function rX(w,f){const p=/\$/g,C="$$$$";let O=[w];if(f==null)return O;for(const $ of Object.keys(f))if($!=="_"){let P=f[$];typeof P=="string"&&(P=p[Symbol.replace](P,C)),O=oQ(O,new RegExp(`%\\{${$}\\}`,"g"),P)}return O}const sQ=w=>{throw new Error(`missing string: ${w}`)};var DM,RM,dK;class WX{constructor(f,{onMissingKey:p=sQ}={}){cs(this,RM);Ko(this,"locale");cs(this,DM);this.locale={strings:{},pluralize(C){return C===1?0:1}},Array.isArray(f)?f.forEach(Kn(this,RM,dK),this):Kn(this,RM,dK).call(this,f),ga(this,DM,p)}translate(f,p){return this.translateArray(f,p).join("")}translateArray(f,p){let C=this.locale.strings[f];if(C==null&&(Nt(this,DM).call(this,f),C=f),typeof C=="object"){if(p&&typeof p.smart_count<"u"){const $=this.locale.pluralize(p.smart_count);return rX(C[$],p)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof C!="string")throw new Error("string was not a string");return rX(C,p)}}DM=new WeakMap,RM=new WeakSet,dK=function(f){if(!(f!=null&&f.strings))return;const p=this.locale;Object.assign(this.locale,{strings:{...p.strings,...f.strings},pluralize:f.pluralize||p.pluralize})};class rQ{constructor(f,p){Ko(this,"uppy");Ko(this,"opts");Ko(this,"id");Ko(this,"defaultLocale");Ko(this,"i18n");Ko(this,"i18nArray");Ko(this,"type");Ko(this,"VERSION");this.uppy=f,this.opts=p??{}}getPluginState(){const{plugins:f}=this.uppy.getState();return(f==null?void 0:f[this.id])||{}}setPluginState(f){const{plugins:p}=this.uppy.getState();this.uppy.setState({plugins:{...p,[this.id]:{...p[this.id],...f}}})}setOptions(f){this.opts={...this.opts,...f},this.setPluginState(void 0),this.i18nInit()}i18nInit(){const f=new WX([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=f.translate.bind(f),this.i18nArray=f.translateArray.bind(f),this.setPluginState(void 0)}addTarget(f){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(f){}afterUpdate(){}}function jq(w){return w<10?`0${w}`:w.toString()}function e8(){const w=new Date,f=jq(w.getHours()),p=jq(w.getMinutes()),C=jq(w.getSeconds());return`${f}:${p}:${C}`}const aQ={debug:()=>{},warn:()=>{},error:(...w)=>console.error(`[Uppy] [${e8()}]`,...w)},iQ={debug:(...w)=>console.debug(`[Uppy] [${e8()}]`,...w),warn:(...w)=>console.warn(`[Uppy] [${e8()}]`,...w),error:(...w)=>console.error(`[Uppy] [${e8()}]`,...w)},cQ="4.3.2",lQ={version:cQ};var Dk,b8,jX;class ZX{constructor(){cs(this,b8);Ko(this,"state",{});cs(this,Dk,new Set)}getState(){return this.state}setState(f){const p={...this.state},C={...this.state,...f};this.state=C,Kn(this,b8,jX).call(this,p,C,f)}subscribe(f){return Nt(this,Dk).add(f),()=>{Nt(this,Dk).delete(f)}}}Dk=new WeakMap,b8=new WeakSet,jX=function(...f){Nt(this,Dk).forEach(p=>{p(...f)})},Ko(ZX,"VERSION",lQ.version);function GX(w){const f=w.lastIndexOf(".");return f===-1||f===w.length-1?{name:w,extension:void 0}:{name:w.slice(0,f),extension:w.slice(f+1)}}const aX={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",msg:"application/vnd.ms-outlook",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function qX(w){var p;if(w.type)return w.type;const f=w.name?(p=GX(w.name).extension)==null?void 0:p.toLowerCase():null;return f&&f in aX?aX[f]:"application/octet-stream"}function uQ(w){return w.charCodeAt(0).toString(32)}function iX(w){let f="";return w.replace(/[^A-Z0-9]/gi,p=>(f+=`-${uQ(p)}`,"/"))+f}function dQ(w,f){let p=f||"uppy";return typeof w.name=="string"&&(p+=`-${iX(w.name.toLowerCase())}`),w.type!==void 0&&(p+=`-${w.type}`),w.meta&&typeof w.meta.relativePath=="string"&&(p+=`-${iX(w.meta.relativePath.toLowerCase())}`),w.data.size!==void 0&&(p+=`-${w.data.size}`),w.data.lastModified!==void 0&&(p+=`-${w.data.lastModified}`),p}function mQ(w){return!w.isRemote||!w.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(w.remote.provider)}function fQ(w,f){if(mQ(w))return w.id;const p=qX(w);return dQ({...w,type:p},f)}function gQ(w){var f=typeof w;return w!=null&&(f=="object"||f=="function")}var kK=gQ,hQ=typeof z6=="object"&&z6&&z6.Object===Object&&z6,pQ=hQ,bQ=pQ,vQ=typeof self=="object"&&self&&self.Object===Object&&self,yQ=bQ||vQ||Function("return this")(),KX=yQ,wQ=KX,CQ=function(){return wQ.Date.now()},SQ=CQ,xQ=/\s/;function EQ(w){for(var f=w.length;f--&&xQ.test(w.charAt(f)););return f}var TQ=EQ,_Q=TQ,kQ=/^\s+/;function OQ(w){return w&&w.slice(0,_Q(w)+1).replace(kQ,"")}var AQ=OQ,DQ=KX,RQ=DQ.Symbol,YX=RQ,cX=YX,XX=Object.prototype,MQ=XX.hasOwnProperty,NQ=XX.toString,bM=cX?cX.toStringTag:void 0;function PQ(w){var f=MQ.call(w,bM),p=w[bM];try{w[bM]=void 0;var C=!0}catch{}var O=NQ.call(w);return C&&(f?w[bM]=p:delete w[bM]),O}var BQ=PQ,$Q=Object.prototype,IQ=$Q.toString;function FQ(w){return IQ.call(w)}var LQ=FQ,lX=YX,HQ=BQ,zQ=LQ,VQ="[object Null]",UQ="[object Undefined]",uX=lX?lX.toStringTag:void 0;function WQ(w){return w==null?w===void 0?UQ:VQ:uX&&uX in Object(w)?HQ(w):zQ(w)}var ZQ=WQ;function jQ(w){return w!=null&&typeof w=="object"}var GQ=jQ,qQ=ZQ,KQ=GQ,YQ="[object Symbol]";function XQ(w){return typeof w=="symbol"||KQ(w)&&qQ(w)==YQ}var JQ=XQ,QQ=AQ,dX=kK,eee=JQ,mX=NaN,tee=/^[-+]0x[0-9a-f]+$/i,nee=/^0b[01]+$/i,oee=/^0o[0-7]+$/i,see=parseInt;function ree(w){if(typeof w=="number")return w;if(eee(w))return mX;if(dX(w)){var f=typeof w.valueOf=="function"?w.valueOf():w;w=dX(f)?f+"":f}if(typeof w!="string")return w===0?w:+w;w=QQ(w);var p=nee.test(w);return p||oee.test(w)?see(w.slice(2),p?2:8):tee.test(w)?mX:+w}var aee=ree,iee=kK,Gq=SQ,fX=aee,cee="Expected a function",lee=Math.max,uee=Math.min;function dee(w,f,p){var C,O,$,P,W,J,re=0,me=!1,pe=!1,Oe=!0;if(typeof w!="function")throw new TypeError(cee);f=fX(f)||0,iee(p)&&(me=!!p.leading,pe="maxWait"in p,$=pe?lee(fX(p.maxWait)||0,f):$,Oe="trailing"in p?!!p.trailing:Oe);function je(At){var ae=C,yt=O;return C=O=void 0,re=At,P=w.apply(yt,ae),P}function De(At){return re=At,W=setTimeout(en,f),me?je(At):P}function Je(At){var ae=At-J,yt=At-re,Dt=f-ae;return pe?uee(Dt,$-yt):Dt}function Ye(At){var ae=At-J,yt=At-re;return J===void 0||ae>=f||ae<0||pe&&yt>=$}function en(){var At=Gq();if(Ye(At))return ze(At);W=setTimeout(en,Je(At))}function ze(At){return W=void 0,Oe&&C?je(At):(C=O=void 0,P)}function ee(){W!==void 0&&clearTimeout(W),re=0,C=J=O=W=void 0}function qe(){return W===void 0?P:ze(Gq())}function Sn(){var At=Gq(),ae=Ye(At);if(C=arguments,O=this,J=At,ae){if(W===void 0)return De(J);if(pe)return clearTimeout(W),W=setTimeout(en,f),je(J)}return W===void 0&&(W=setTimeout(en,f)),P}return Sn.cancel=ee,Sn.flush=qe,Sn}var mee=dee,fee=mee,gee=kK,hee="Expected a function";function pee(w,f,p){var C=!0,O=!0;if(typeof w!="function")throw new TypeError(hee);return gee(p)&&(C="leading"in p?!!p.leading:C,O="trailing"in p?!!p.trailing:O),fee(w,f,{leading:C,maxWait:f,trailing:O})}var bee=pee;const vee=IM(bee);var yee=function(){var f={},p=f._fns={};f.emit=function(P,W,J,re,me,pe,Oe){var je=C(P);je.length&&O(P,je,[W,J,re,me,pe,Oe])},f.on=function(P,W){p[P]||(p[P]=[]),p[P].push(W)},f.once=function(P,W){function J(){W.apply(this,arguments),f.off(P,J)}this.on(P,J)},f.off=function(P,W){var J=[];if(P&&W){var re=this._fns[P],me=0,pe=re?re.length:0;for(me;me<pe;me++)re[me]!==W&&J.push(re[me])}J.length?this._fns[P]=J:delete this._fns[P]};function C($){var P=p[$]?p[$]:[],W=$.indexOf(":"),J=W===-1?[$]:[$.substring(0,W),$.substring(W+1)],re=Object.keys(p),me=0,pe=re.length;for(me;me<pe;me++){var Oe=re[me];if(Oe==="*"&&(P=P.concat(p[Oe])),J.length===2&&J[0]===Oe){P=P.concat(p[Oe]);break}}return P}function O($,P,W){var J=0,re=P.length;for(J;J<re&&P[J];J++)P[J].event=$,P[J].apply(P[J],W)}return f};const wee=IM(yee);let Cee="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",See=(w=21)=>{let f="",p=w|0;for(;p--;)f+=Cee[Math.random()*64|0];return f};const xee="4.5.3",Eee={version:xee};function Tee(w,f){return f.name?f.name:w.split("/")[0]==="image"?`${w.split("/")[0]}.${w.split("/")[1]}`:"noname"}const _ee={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",logIn:"Log in",pickFiles:"Pick files",pickPhotos:"Pick photos",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed",pleaseWait:"Please wait"}};var kee=function(f){if(typeof f!="number"||Number.isNaN(f))throw new TypeError(`Expected a number, got ${typeof f}`);const p=f<0;let C=Math.abs(f);if(p&&(C=-C),C===0)return"0 B";const O=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],$=Math.min(Math.floor(Math.log(C)/Math.log(1024)),O.length-1),P=Number(C/1024**$),W=O[$];return`${P>=10||P%1===0?Math.round(P):P.toFixed(1)} ${W}`};const V6=IM(kee);function JX(w,f){this.text=w=w||"",this.hasWild=~w.indexOf("*"),this.separator=f,this.parts=w.split(f)}JX.prototype.match=function(w){var f=!0,p=this.parts,C,O=p.length,$;if(typeof w=="string"||w instanceof String)if(!this.hasWild&&this.text!=w)f=!1;else{for($=(w||"").split(this.separator),C=0;f&&C<O;C++)p[C]!=="*"&&(C<$.length?f=p[C]===$[C]:f=!1);f=f&&$}else if(typeof w.splice=="function")for(f=[],C=w.length;C--;)this.match(w[C])&&(f[f.length]=w[C]);else if(typeof w=="object"){f={};for(var P in w)this.match(P)&&(f[P]=w[P])}return f};var Oee=function(w,f,p){var C=new JX(w,p||/[\/\.]/);return typeof f<"u"?C.match(f):C},Aee=Oee,Dee=/[\/\+\.]/,Ree=function(w,f){function p(C){var O=Aee(C,w,Dee);return O&&O.length>=2}return f?p(f.split(";")[0]):p};const Mee=IM(Ree),Nee={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]};class Mg extends Error{constructor(p,C){super(p);Ko(this,"isUserFacing");Ko(this,"file");Ko(this,"isRestriction",!0);this.isUserFacing=(C==null?void 0:C.isUserFacing)??!0,C!=null&&C.file&&(this.file=C.file)}}class Pee{constructor(f,p){Ko(this,"getI18n");Ko(this,"getOpts");this.getI18n=p,this.getOpts=()=>{var O;const C=f();if(((O=C.restrictions)==null?void 0:O.allowedFileTypes)!=null&&!Array.isArray(C.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return C}}validateAggregateRestrictions(f,p){const{maxTotalFileSize:C,maxNumberOfFiles:O}=this.getOpts().restrictions;if(O&&f.filter(P=>!P.isGhost).length+p.length>O)throw new Mg(`${this.getI18n()("youCanOnlyUploadX",{smart_count:O})}`);if(C){const $=[...f,...p].reduce((P,W)=>P+(W.size??0),0);if($>C)throw new Mg(this.getI18n()("aggregateExceedsSize",{sizeAllowed:V6(C),size:V6($)}))}}validateSingleFile(f){const{maxFileSize:p,minFileSize:C,allowedFileTypes:O}=this.getOpts().restrictions;if(O&&!O.some(P=>P.includes("/")?f.type?Mee(f.type.replace(/;.*?$/,""),P):!1:P[0]==="."&&f.extension?f.extension.toLowerCase()===P.slice(1).toLowerCase():!1)){const P=O.join(", ");throw new Mg(this.getI18n()("youCanOnlyUploadFileTypes",{types:P}),{file:f})}if(p&&f.size!=null&&f.size>p)throw new Mg(this.getI18n()("exceedsSize",{size:V6(p),file:f.name??this.getI18n()("unnamed")}),{file:f});if(C&&f.size!=null&&f.size<C)throw new Mg(this.getI18n()("inferiorSize",{size:V6(C)}),{file:f})}validate(f,p){p.forEach(C=>{this.validateSingleFile(C)}),this.validateAggregateRestrictions(f,p)}validateMinNumberOfFiles(f){const{minNumberOfFiles:p}=this.getOpts().restrictions;if(p&&Object.keys(f).length<p)throw new Mg(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:p}))}getMissingRequiredMetaFields(f){const p=new Mg(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:f.name??this.getI18n()("unnamed")})),{requiredMetaFields:C}=this.getOpts().restrictions,O=[];for(const $ of C)(!Object.hasOwn(f.meta,$)||f.meta[$]==="")&&O.push($);return{missingFields:O,error:p}}}function Bee(w){if(w==null&&typeof navigator<"u"&&(w=navigator.userAgent),!w)return!0;const f=/Edge\/(\d+\.\d+)/.exec(w);if(!f)return!0;const C=f[1].split(".",2),O=parseInt(C[0],10),$=parseInt(C[1],10);return O<15||O===15&&$<15063||O>18||O===18&&$>=18218}const U6={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null};var Dg,Rg,MM,E2,Rk,Mk,T2,jn,S2,mK,QX,fK,eJ,gK,hK,pK,bK,v8,vK,_2,tJ,nJ,Fy,NM,vM,oJ,t8,yM;const y8=class y8{constructor(f){cs(this,jn);cs(this,Dg,Object.create(null));cs(this,Rg);cs(this,MM);cs(this,E2,wee());cs(this,Rk,new Set);cs(this,Mk,new Set);cs(this,T2,new Set);Ko(this,"defaultLocale");Ko(this,"locale");Ko(this,"opts");Ko(this,"store");Ko(this,"i18n");Ko(this,"i18nArray");Ko(this,"scheduledAutoProceed",null);Ko(this,"wasOffline",!1);cs(this,v8,(f,p)=>{const C=f?this.getFile(f.id):void 0;if(f==null||!C){this.log(`Not setting progress for a file that has been removed: ${f==null?void 0:f.id}`);return}if(C.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${f.id}`);return}const O={bytesTotal:p.bytesTotal,percentage:p.bytesTotal!=null&&Number.isFinite(p.bytesTotal)&&p.bytesTotal>0?Math.round(p.bytesUploaded/p.bytesTotal*100):void 0};C.progress.uploadStarted!=null?this.setFileState(f.id,{progress:{...C.progress,...O,bytesUploaded:p.bytesUploaded}}):this.setFileState(f.id,{progress:{...C.progress,...O}}),Nt(this,_2).call(this)});cs(this,_2,vee(()=>Kn(this,jn,vK).call(this),500,{leading:!0,trailing:!0}));cs(this,Fy,this.updateOnlineStatus.bind(this));cs(this,NM,new Map);this.defaultLocale=_ee;const p={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:Nee,meta:{},onBeforeFileAdded:(O,$)=>!Object.hasOwn($,O.id),onBeforeUpload:O=>O,store:new ZX,logger:aQ,infoTimeout:5e3},C={...p,...f};this.opts={...C,restrictions:{...p.restrictions,...f==null?void 0:f.restrictions}},f!=null&&f.logger&&f.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):f!=null&&f.debug&&(this.opts.logger=iQ),this.log(`Using Core v${y8.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({...U6,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:Bee(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),ga(this,Rg,new Pee(()=>this.opts,()=>this.i18n)),ga(this,MM,this.store.subscribe((O,$,P)=>{this.emit("state-update",O,$,P),this.updateAll($)})),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),Kn(this,jn,nJ).call(this)}emit(f,...p){Nt(this,E2).emit(f,...p)}on(f,p){return Nt(this,E2).on(f,p),this}once(f,p){return Nt(this,E2).once(f,p),this}off(f,p){return Nt(this,E2).off(f,p),this}updateAll(f){this.iteratePlugins(p=>{p.update(f)})}setState(f){this.store.setState(f)}getState(){return this.store.getState()}patchFilesState(f){const p=this.getState().files;this.setState({files:{...p,...Object.fromEntries(Object.entries(f).map(([C,O])=>[C,{...p[C],...O}]))}})}setFileState(f,p){if(!this.getState().files[f])throw new Error(`Can’t set state for ${f} (the file could have been removed)`);this.patchFilesState({[f]:p})}i18nInit(){const f=C=>this.log(`Missing i18n string: ${C}`,"error"),p=new WX([this.defaultLocale,this.opts.locale],{onMissingKey:f});this.i18n=p.translate.bind(p),this.i18nArray=p.translateArray.bind(p),this.locale=p.locale}setOptions(f){this.opts={...this.opts,...f,restrictions:{...this.opts.restrictions,...f==null?void 0:f.restrictions}},f.meta&&this.setMeta(f.meta),this.i18nInit(),f.locale&&this.iteratePlugins(p=>{p.setOptions(f)}),this.setState(void 0)}resetProgress(){const f={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},p={...this.getState().files},C=Object.create(null);Object.keys(p).forEach(O=>{C[O]={...p[O],progress:{...p[O].progress,...f},tus:void 0,transloadit:void 0}}),this.setState({files:C,...U6})}clear(){const{capabilities:f,currentUploads:p}=this.getState();if(Object.keys(p).length>0&&!f.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({...U6,files:{}})}addPreProcessor(f){Nt(this,Rk).add(f)}removePreProcessor(f){return Nt(this,Rk).delete(f)}addPostProcessor(f){Nt(this,T2).add(f)}removePostProcessor(f){return Nt(this,T2).delete(f)}addUploader(f){Nt(this,Mk).add(f)}removeUploader(f){return Nt(this,Mk).delete(f)}setMeta(f){const p={...this.getState().meta,...f},C={...this.getState().files};Object.keys(C).forEach(O=>{C[O]={...C[O],meta:{...C[O].meta,...f}}}),this.log("Adding metadata:"),this.log(f),this.setState({meta:p,files:C})}setFileMeta(f,p){const C={...this.getState().files};if(!C[f]){this.log(`Was trying to set metadata for a file that has been removed: ${f}`);return}const O={...C[f].meta,...p};C[f]={...C[f],meta:O},this.setState({files:C})}getFile(f){return this.getState().files[f]}getFiles(){const{files:f}=this.getState();return Object.values(f)}getFilesByIds(f){return f.map(p=>this.getFile(p))}getObjectOfFilesPerState(){const{files:f,totalProgress:p,error:C}=this.getState(),O=Object.values(f),$=[],P=[],W=[],J=[],re=[],me=[],pe=[],Oe=[],je=[];for(const De of O){const{progress:Je}=De;!Je.uploadComplete&&Je.uploadStarted&&($.push(De),De.isPaused||Oe.push(De)),Je.uploadStarted||P.push(De),(Je.uploadStarted||Je.preprocess||Je.postprocess)&&W.push(De),Je.uploadStarted&&J.push(De),De.isPaused&&re.push(De),Je.uploadComplete&&me.push(De),De.error&&pe.push(De),(Je.preprocess||Je.postprocess)&&je.push(De)}return{newFiles:P,startedFiles:W,uploadStartedFiles:J,pausedFiles:re,completeFiles:me,erroredFiles:pe,inProgressFiles:$,inProgressNotPausedFiles:Oe,processingFiles:je,isUploadStarted:J.length>0,isAllComplete:p===100&&me.length===O.length&&je.length===0,isAllErrored:!!C&&pe.length===O.length,isAllPaused:$.length!==0&&re.length===$.length,isUploadInProgress:$.length>0,isSomeGhost:O.some(De=>De.isGhost)}}validateRestrictions(f,p=this.getFiles()){try{Nt(this,Rg).validate(p,[f])}catch(C){return C}return null}validateSingleFile(f){try{Nt(this,Rg).validateSingleFile(f)}catch(p){return p.message}return null}validateAggregateRestrictions(f){const p=this.getFiles();try{Nt(this,Rg).validateAggregateRestrictions(p,f)}catch(C){return C.message}return null}checkIfFileAlreadyExists(f){const{files:p}=this.getState();return!!(p[f]&&!p[f].isGhost)}addFile(f){Kn(this,jn,fK).call(this,f);const{nextFilesState:p,validFilesToAdd:C,errors:O}=Kn(this,jn,hK).call(this,[f]),$=O.filter(W=>W.isRestriction);if(Kn(this,jn,S2).call(this,$),O.length>0)throw O[0];this.setState({files:p});const[P]=C;return this.emit("file-added",P),this.emit("files-added",C),this.log(`Added file: ${P.name}, ${P.id}, mime type: ${P.type}`),Kn(this,jn,gK).call(this),P.id}addFiles(f){Kn(this,jn,fK).call(this);const{nextFilesState:p,validFilesToAdd:C,errors:O}=Kn(this,jn,hK).call(this,f),$=O.filter(W=>W.isRestriction);Kn(this,jn,S2).call(this,$);const P=O.filter(W=>!W.isRestriction);if(P.length>0){let W=`Multiple errors occurred while adding files:
`;if(P.forEach(J=>{W+=`
 * ${J.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:P.length}),details:W},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(P,W);{const J=new Error(W);throw J.errors=P,J}}this.setState({files:p}),C.forEach(W=>{this.emit("file-added",W)}),this.emit("files-added",C),C.length>5?this.log(`Added batch of ${C.length} files`):Object.values(C).forEach(W=>{this.log(`Added file: ${W.name}
 id: ${W.id}
 type: ${W.type}`)}),C.length>0&&Kn(this,jn,gK).call(this)}removeFiles(f){const{files:p,currentUploads:C}=this.getState(),O={...p},$={...C},P=Object.create(null);f.forEach(me=>{p[me]&&(P[me]=p[me],delete O[me])});function W(me){return P[me]===void 0}Object.keys($).forEach(me=>{const pe=C[me].fileIDs.filter(W);if(pe.length===0){delete $[me];return}const{capabilities:Oe}=this.getState();if(pe.length!==C[me].fileIDs.length&&!Oe.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");$[me]={...C[me],fileIDs:pe}});const J={currentUploads:$,files:O};Object.keys(O).length===0&&(J.allowNewUpload=!0,J.error=null,J.recoveredState=null),this.setState(J),Nt(this,_2).call(this);const re=Object.keys(P);re.forEach(me=>{this.emit("file-removed",P[me])}),re.length>5?this.log(`Removed ${re.length} files`):this.log(`Removed files: ${re.join(", ")}`)}removeFile(f){this.removeFiles([f])}pauseResume(f){if(!this.getState().capabilities.resumableUploads||this.getFile(f).progress.uploadComplete)return;const p=this.getFile(f),O=!(p.isPaused||!1);return this.setFileState(f,{isPaused:O}),this.emit("upload-pause",p,O),O}pauseAll(){const f={...this.getState().files};Object.keys(f).filter(C=>!f[C].progress.uploadComplete&&f[C].progress.uploadStarted).forEach(C=>{const O={...f[C],isPaused:!0};f[C]=O}),this.setState({files:f}),this.emit("pause-all")}resumeAll(){const f={...this.getState().files};Object.keys(f).filter(C=>!f[C].progress.uploadComplete&&f[C].progress.uploadStarted).forEach(C=>{const O={...f[C],isPaused:!1,error:null};f[C]=O}),this.setState({files:f}),this.emit("resume-all")}async retryAll(){const f=await Kn(this,jn,bK).call(this);return this.emit("complete",f),f}cancelAll(){this.emit("cancel-all");const{files:f}=this.getState(),p=Object.keys(f);p.length&&this.removeFiles(p),this.setState(U6)}retryUpload(f){this.setFileState(f,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(f));const p=Kn(this,jn,vM).call(this,[f],{forceAllowNewUpload:!0});return Kn(this,jn,yM).call(this,p)}logout(){this.iteratePlugins(f=>{var p,C;(C=(p=f.provider)==null?void 0:p.logout)==null||C.call(p)})}[Symbol.for("uppy test: updateTotalProgress")](){return Kn(this,jn,vK).call(this)}updateOnlineStatus(){window.navigator.onLine??!0?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(f,...p){if(typeof f!="function"){const P=`Expected a plugin class, but got ${f===null?"null":typeof f}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(P)}const C=new f(this,...p),O=C.id;if(!O)throw new Error("Your plugin must have an id");if(!C.type)throw new Error("Your plugin must have a type");const $=this.getPlugin(O);if($){const P=`Already found a plugin named '${$.id}'. Tried to use: '${O}'.
Uppy plugins must have unique \`id\` options.`;throw new Error(P)}return f.VERSION&&this.log(`Using ${O} v${f.VERSION}`),C.type in Nt(this,Dg)?Nt(this,Dg)[C.type].push(C):Nt(this,Dg)[C.type]=[C],C.install(),this.emit("plugin-added",C),this}getPlugin(f){for(const p of Object.values(Nt(this,Dg))){const C=p.find(O=>O.id===f);if(C!=null)return C}}[Symbol.for("uppy test: getPlugins")](f){return Nt(this,Dg)[f]}iteratePlugins(f){Object.values(Nt(this,Dg)).flat(1).forEach(f)}removePlugin(f){this.log(`Removing plugin ${f.id}`),this.emit("plugin-remove",f),f.uninstall&&f.uninstall();const p=Nt(this,Dg)[f.type],C=p.findIndex(P=>P.id===f.id);C!==-1&&p.splice(C,1);const $={plugins:{...this.getState().plugins,[f.id]:void 0}};this.setState($)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),Nt(this,MM).call(this),this.iteratePlugins(f=>{this.removePlugin(f)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",Nt(this,Fy)),window.removeEventListener("offline",Nt(this,Fy)))}hideInfo(){const{info:f}=this.getState();this.setState({info:f.slice(1)}),this.emit("info-hidden")}info(f,p="info",C=3e3){const O=typeof f=="object";this.setState({info:[...this.getState().info,{type:p,message:O?f.message:f,details:O?f.details:null}]}),setTimeout(()=>this.hideInfo(),C),this.emit("info-visible")}log(f,p){const{logger:C}=this.opts;switch(p){case"error":C.error(f);break;case"warning":C.warn(f);break;default:C.debug(f);break}}registerRequestClient(f,p){Nt(this,NM).set(f,p)}getRequestClientForFile(f){if(!f.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${f.id}`);const p=Nt(this,NM).get(f.remote.requestClientId);if(p==null)throw new Error(`requestClientId "${f.remote.requestClientId}" not registered for file "${f.id}"`);return p}restore(f){return this.log(`Core: attempting to restore upload "${f}"`),this.getState().currentUploads[f]?Kn(this,jn,yM).call(this,f):(Kn(this,jn,t8).call(this,f),Promise.reject(new Error("Nonexistent upload")))}[Symbol.for("uppy test: createUpload")](...f){return Kn(this,jn,vM).call(this,...f)}addResultData(f,p){if(!Kn(this,jn,oJ).call(this,f)){this.log(`Not setting result for an upload that has been removed: ${f}`);return}const{currentUploads:C}=this.getState(),O={...C[f],result:{...C[f].result,...p}};this.setState({currentUploads:{...C,[f]:O}})}async upload(){var O;(O=Nt(this,Dg).uploader)!=null&&O.length||this.log("No uploader type plugins are used","warning");let{files:f}=this.getState();if(Kn(this,jn,pK).call(this).length>0){const $=await Kn(this,jn,bK).call(this);if(!(this.getFiles().filter(W=>W.progress.uploadStarted==null).length>0))return this.emit("complete",$),$;({files:f}=this.getState())}const C=this.opts.onBeforeUpload(f);return C===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(C&&typeof C=="object"&&(f=C,this.setState({files:f})),Promise.resolve().then(()=>Nt(this,Rg).validateMinNumberOfFiles(f)).catch($=>{throw Kn(this,jn,S2).call(this,[$]),$}).then(()=>{if(!Kn(this,jn,QX).call(this,f))throw new Mg(this.i18n("missingRequiredMetaField"))}).catch($=>{throw $}).then(async()=>{const{currentUploads:$}=this.getState(),P=Object.values($).flatMap(me=>me.fileIDs),W=[];Object.keys(f).forEach(me=>{const pe=this.getFile(me);!pe.progress.uploadStarted&&P.indexOf(me)===-1&&W.push(pe.id)});const J=Kn(this,jn,vM).call(this,W),re=await Kn(this,jn,yM).call(this,J);return this.emit("complete",re),re}).catch($=>{throw this.emit("error",$),this.log($,"error"),$}))}};Dg=new WeakMap,Rg=new WeakMap,MM=new WeakMap,E2=new WeakMap,Rk=new WeakMap,Mk=new WeakMap,T2=new WeakMap,jn=new WeakSet,S2=function(f){for(const P of f)P.isRestriction?this.emit("restriction-failed",P.file,P):this.emit("error",P,P.file),this.log(P,"warning");const p=f.filter(P=>P.isUserFacing),C=4,O=p.slice(0,C),$=p.slice(C);O.forEach(({message:P,details:W=""})=>{this.info({message:P,details:W},"error",this.opts.infoTimeout)}),$.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:$.length})})},mK=function(f){const{missingFields:p,error:C}=Nt(this,Rg).getMissingRequiredMetaFields(f);return p.length>0?(this.setFileState(f.id,{missingRequiredMetaFields:p,error:C.message}),this.log(C.message),this.emit("restriction-failed",f,C),!1):(p.length===0&&f.missingRequiredMetaFields&&this.setFileState(f.id,{missingRequiredMetaFields:[]}),!0)},QX=function(f){let p=!0;for(const C of Object.values(f))Kn(this,jn,mK).call(this,C)||(p=!1);return p},fK=function(f){const{allowNewUpload:p}=this.getState();if(p===!1){const C=new Mg(this.i18n("noMoreFilesAllowed"),{file:f});throw Kn(this,jn,S2).call(this,[C]),C}},eJ=function(f){const p=f instanceof File?{name:f.name,type:f.type,size:f.size,data:f}:f,C=qX(p),O=Tee(C,p),$=GX(O).extension,P=fQ(p,this.getID()),W=p.meta||{};W.name=O,W.type=C;const J=Number.isFinite(p.data.size)?p.data.size:null;return{source:p.source||"",id:P,name:O,extension:$||"",meta:{...this.getState().meta,...W},type:C,data:p.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:J,uploadComplete:!1,uploadStarted:null},size:J,isGhost:!1,isRemote:p.isRemote||!1,remote:p.remote,preview:p.preview}},gK=function(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(f=>{f.isRestriction||this.log(f.stack||f.message||f)})},4))},hK=function(f){var P;let{files:p}=this.getState(),C={...p};const O=[],$=[];for(const W of f)try{let J=Kn(this,jn,eJ).call(this,W);const re=(P=p[J.id])==null?void 0:P.isGhost;re&&(J={...p[J.id],isGhost:!1,data:W.data},this.log(`Replaced the blob in the restored ghost file: ${J.name}, ${J.id}`));const me=this.opts.onBeforeFileAdded(J,C);if(p=this.getState().files,C={...p,...C},!me&&this.checkIfFileAlreadyExists(J.id))throw new Mg(this.i18n("noDuplicates",{fileName:J.name??this.i18n("unnamed")}),{file:W});if(me===!1&&!re)throw new Mg("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:W});typeof me=="object"&&me!==null&&(J=me),Nt(this,Rg).validateSingleFile(J),C[J.id]=J,O.push(J)}catch(J){$.push(J)}try{Nt(this,Rg).validateAggregateRestrictions(Object.values(p),O)}catch(W){return $.push(W),{nextFilesState:p,validFilesToAdd:[],errors:$}}return{nextFilesState:C,validFilesToAdd:O,errors:$}},pK=function(){const{files:f}=this.getState();return Object.keys(f).filter(p=>{const C=f[p];return C.error&&(!C.missingRequiredMetaFields||C.missingRequiredMetaFields.length===0)})},bK=async function(){const f=Kn(this,jn,pK).call(this),p={...this.getState().files};if(f.forEach(O=>{p[O]={...p[O],isPaused:!1,error:null}}),this.setState({files:p,error:null}),this.emit("retry-all",this.getFilesByIds(f)),f.length===0)return{successful:[],failed:[]};const C=Kn(this,jn,vM).call(this,f,{forceAllowNewUpload:!0});return Kn(this,jn,yM).call(this,C)},v8=new WeakMap,vK=function(){const f=Kn(this,jn,tJ).call(this);let p=null;f!=null&&(p=Math.round(f*100),p>100?p=100:p<0&&(p=0)),this.emit("progress",p??0),this.setState({totalProgress:p??0})},_2=new WeakMap,tJ=function(){const p=this.getFiles().filter(J=>J.progress.uploadStarted||J.progress.preprocess||J.progress.postprocess);if(p.length===0)return 0;if(p.every(J=>J.progress.uploadComplete))return 1;const C=J=>J.progress.bytesTotal!=null&&J.progress.bytesTotal!==0,O=p.filter(C),$=p.filter(J=>!C(J));if(O.every(J=>J.progress.uploadComplete)&&$.length>0&&!$.every(J=>J.progress.uploadComplete))return null;const P=O.reduce((J,re)=>J+(re.progress.bytesTotal??0),0),W=O.reduce((J,re)=>J+(re.progress.bytesUploaded||0),0);return P===0?0:W/P},nJ=function(){const f=(O,$,P)=>{let W=O.message||"Unknown error";O.details&&(W+=` ${O.details}`),this.setState({error:W}),$!=null&&$.id in this.getState().files&&this.setFileState($.id,{error:W,response:P})};this.on("error",f),this.on("upload-error",(O,$,P)=>{if(f($,O,P),typeof $=="object"&&$.message){this.log($.message,"error");const W=new Error(this.i18n("failedToUpload",{file:(O==null?void 0:O.name)??""}));W.isUserFacing=!0,W.details=$.message,$.details&&(W.details+=` ${$.details}`),Kn(this,jn,S2).call(this,[W])}else Kn(this,jn,S2).call(this,[$])});let p=null;this.on("upload-stalled",(O,$)=>{const{message:P}=O,W=$.map(J=>J.meta.name).join(", ");p||(this.info({message:P,details:W},"warning",this.opts.infoTimeout),p=setTimeout(()=>{p=null},this.opts.infoTimeout)),this.log(`${P} ${W}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});const C=O=>{const $=O.filter(W=>{const J=W!=null&&this.getFile(W.id);return J||this.log(`Not setting progress for a file that has been removed: ${W==null?void 0:W.id}`),J}),P=Object.fromEntries($.map(W=>[W.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,bytesUploaded:0,bytesTotal:W.size}}]));this.patchFilesState(P)};this.on("upload-start",C),this.on("upload-progress",Nt(this,v8)),this.on("upload-success",(O,$)=>{if(O==null||!this.getFile(O.id)){this.log(`Not setting progress for a file that has been removed: ${O==null?void 0:O.id}`);return}const P=this.getFile(O.id).progress;this.setFileState(O.id,{progress:{...P,postprocess:Nt(this,T2).size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:P.bytesTotal},response:$,uploadURL:$.uploadURL,isPaused:!1}),O.size==null&&this.setFileState(O.id,{size:$.bytesUploaded||P.bytesTotal}),Nt(this,_2).call(this)}),this.on("preprocess-progress",(O,$)=>{if(O==null||!this.getFile(O.id)){this.log(`Not setting progress for a file that has been removed: ${O==null?void 0:O.id}`);return}this.setFileState(O.id,{progress:{...this.getFile(O.id).progress,preprocess:$}})}),this.on("preprocess-complete",O=>{if(O==null||!this.getFile(O.id)){this.log(`Not setting progress for a file that has been removed: ${O==null?void 0:O.id}`);return}const $={...this.getState().files};$[O.id]={...$[O.id],progress:{...$[O.id].progress}},delete $[O.id].progress.preprocess,this.setState({files:$})}),this.on("postprocess-progress",(O,$)=>{if(O==null||!this.getFile(O.id)){this.log(`Not setting progress for a file that has been removed: ${O==null?void 0:O.id}`);return}this.setFileState(O.id,{progress:{...this.getState().files[O.id].progress,postprocess:$}})}),this.on("postprocess-complete",O=>{if(O==null||!this.getFile(O.id)){this.log(`Not setting progress for a file that has been removed: ${O==null?void 0:O.id}`);return}const $={...this.getState().files};$[O.id]={...$[O.id],progress:{...$[O.id].progress}},delete $[O.id].progress.postprocess,this.setState({files:$})}),this.on("restored",()=>{Nt(this,_2).call(this)}),this.on("dashboard:file-edit-complete",O=>{O&&Kn(this,jn,mK).call(this,O)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",Nt(this,Fy)),window.addEventListener("offline",Nt(this,Fy)),setTimeout(Nt(this,Fy),3e3))},Fy=new WeakMap,NM=new WeakMap,vM=function(f,p={}){const{forceAllowNewUpload:C=!1}=p,{allowNewUpload:O,currentUploads:$}=this.getState();if(!O&&!C)throw new Error("Cannot create a new upload: already uploading.");const P=See();return this.emit("upload",P,this.getFilesByIds(f)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...$,[P]:{fileIDs:f,step:0,result:{}}}}),P},oJ=function(f){const{currentUploads:p}=this.getState();return p[f]},t8=function(f){const p={...this.getState().currentUploads};delete p[f],this.setState({currentUploads:p})},yM=async function(f){const p=()=>{const{currentUploads:P}=this.getState();return P[f]};let C=p();const O=[...Nt(this,Rk),...Nt(this,Mk),...Nt(this,T2)];try{for(let P=C.step||0;P<O.length&&C;P++){const W=O[P];this.setState({currentUploads:{...this.getState().currentUploads,[f]:{...C,step:P}}});const{fileIDs:J}=C;await W(J,f),C=p()}}catch(P){throw Kn(this,jn,t8).call(this,f),P}if(C){C.fileIDs.forEach(re=>{const me=this.getFile(re);me!=null&&me.progress.postprocess&&this.emit("postprocess-complete",me)});const P=C.fileIDs.map(re=>this.getFile(re)),W=P.filter(re=>!re.error),J=P.filter(re=>re.error);this.addResultData(f,{successful:W,failed:J,uploadID:f}),C=p()}let $;return C&&($=C.result,Kn(this,jn,t8).call(this,f)),$==null&&(this.log(`Not setting result for an upload that has been removed: ${f}`),$={successful:[],failed:[],uploadID:f}),$},Ko(y8,"VERSION",Eee.version);let c8=y8;var Fp,PM;class $ee{constructor(f){cs(this,Fp);cs(this,PM,[]);ga(this,Fp,f)}on(f,p){return Nt(this,PM).push([f,p]),Nt(this,Fp).on(f,p)}remove(){for(const[f,p]of Nt(this,PM).splice(0))Nt(this,Fp).off(f,p)}onFilePause(f,p){this.on("upload-pause",(C,O)=>{f===(C==null?void 0:C.id)&&p(O)})}onFileRemove(f,p){this.on("file-removed",C=>{f===C.id&&p(C.id)})}onPause(f,p){this.on("upload-pause",(C,O)=>{f===(C==null?void 0:C.id)&&p(O)})}onRetry(f,p){this.on("upload-retry",C=>{f===(C==null?void 0:C.id)&&p()})}onRetryAll(f,p){this.on("retry-all",()=>{Nt(this,Fp).getFile(f)&&p()})}onPauseAll(f,p){this.on("pause-all",()=>{Nt(this,Fp).getFile(f)&&p()})}onCancelAll(f,p){this.on("cancel-all",(...C)=>{Nt(this,Fp).getFile(f)&&p(...C)})}onResumeAll(f,p){this.on("resume-all",()=>{Nt(this,Fp).getFile(f)&&p()})}}Fp=new WeakMap,PM=new WeakMap;class yK extends Error{constructor(p,C=null){super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall.");Ko(this,"cause");Ko(this,"isNetworkError");Ko(this,"request");this.cause=p,this.isNetworkError=!0,this.request=C}}var k2,Nk,BM,Pk;class Iee{constructor(f,p){cs(this,k2);cs(this,Nk,!1);cs(this,BM);cs(this,Pk);ga(this,Pk,f),ga(this,BM,()=>p(f))}progress(){Nt(this,Nk)||Nt(this,Pk)>0&&(clearTimeout(Nt(this,k2)),ga(this,k2,setTimeout(Nt(this,BM),Nt(this,Pk))))}done(){Nt(this,Nk)||(clearTimeout(Nt(this,k2)),ga(this,k2,void 0),ga(this,Nk,!0))}}k2=new WeakMap,Nk=new WeakMap,BM=new WeakMap,Pk=new WeakMap;const W6=()=>{};function Fee(w,f={}){const{body:p=null,headers:C={},method:O="GET",onBeforeRequest:$=W6,onUploadProgress:P=W6,shouldRetry:W=()=>!0,onAfterResponse:J=W6,onTimeout:re=W6,responseType:me,retries:pe=3,signal:Oe=null,timeout:je=3e4,withCredentials:De=!1}=f,Je=ze=>.3*2**(ze-1)*1e3,Ye=new Iee(je,re);function en(ze=0){return new Promise(async(ee,qe)=>{const Sn=new XMLHttpRequest,At=ae=>{W(Sn)&&ze<pe?setTimeout(()=>{en(ze+1).then(ee,qe)},Je(ze)):(Ye.done(),qe(ae))};Sn.open(O,w,!0),Sn.withCredentials=De,me&&(Sn.responseType=me),Oe==null||Oe.addEventListener("abort",()=>{Sn.abort(),qe(new DOMException("Aborted","AbortError"))}),Sn.onload=async()=>{try{await J(Sn,ze)}catch(ae){ae.request=Sn,At(ae);return}Sn.status>=200&&Sn.status<300?(Ye.done(),ee(Sn)):W(Sn)&&ze<pe?setTimeout(()=>{en(ze+1).then(ee,qe)},Je(ze)):(Ye.done(),qe(new yK(Sn.statusText,Sn)))},Sn.onerror=()=>At(new yK(Sn.statusText,Sn)),Sn.upload.onprogress=ae=>{Ye.progress(),P(ae)},C&&Object.keys(C).forEach(ae=>{Sn.setRequestHeader(ae,C[ae])}),await $(Sn,ze),Sn.send(p)})}return en()}function Lee(w){const f=p=>"error"in p&&!!p.error;return w.filter(p=>!f(p))}function Hee(w){return w.filter(f=>{var p;return!((p=f.progress)!=null&&p.uploadStarted)||!f.isRestored})}function gX(w,f){return w===!0?Object.keys(f):Array.isArray(w)?w:[]}function zee(w){return w?w.readyState!==0&&w.readyState!==4||w.status===0:!1}function Vee(w){return new Error("Cancelled",{cause:w})}function hX(w){var f;if(w!=null){const p=()=>this.abort(w.reason);w.addEventListener("abort",p,{once:!0});const C=()=>{w.removeEventListener("abort",p)};(f=this.then)==null||f.call(this,C,C)}return this}var qb,Lp,Kb,Bk,Hp,$k,O2,Bl,wK,wM,sJ,rJ,aJ,w8,Ik;class Uee{constructor(f){cs(this,Bl);cs(this,qb,0);cs(this,Lp,[]);cs(this,Kb,!1);cs(this,Bk);cs(this,Hp,1);cs(this,$k);cs(this,O2);Ko(this,"limit");cs(this,w8,()=>this.resume());cs(this,Ik,()=>{if(Nt(this,Kb)){ga(this,O2,setTimeout(Nt(this,Ik),0));return}ga(this,Hp,this.limit),this.limit=Math.ceil((Nt(this,$k)+Nt(this,Hp))/2);for(let f=Nt(this,Hp);f<=this.limit;f++)Kn(this,Bl,wM).call(this);Nt(this,$k)-Nt(this,Hp)>3?ga(this,O2,setTimeout(Nt(this,Ik),2e3)):ga(this,Hp,Math.floor(Nt(this,Hp)/2))});typeof f!="number"||f===0?this.limit=1/0:this.limit=f}run(f,p){return!Nt(this,Kb)&&Nt(this,qb)<this.limit?Kn(this,Bl,wK).call(this,f):Kn(this,Bl,rJ).call(this,f,p)}wrapSyncFunction(f,p){return(...C)=>{const O=this.run(()=>(f(...C),queueMicrotask(()=>O.done()),()=>{}),p);return{abortOn:hX,abort(){O.abort()}}}}wrapPromiseFunction(f,p){return(...C)=>{let O;const $=new Promise((P,W)=>{O=this.run(()=>{let J,re;try{re=Promise.resolve(f(...C))}catch(me){re=Promise.reject(me)}return re.then(me=>{J?W(J):(O.done(),P(me))},me=>{J?W(J):(O.done(),W(me))}),me=>{J=Vee(me)}},p)});return $.abort=P=>{O.abort(P)},$.abortOn=hX,$}}resume(){ga(this,Kb,!1),clearTimeout(Nt(this,Bk));for(let f=0;f<this.limit;f++)Kn(this,Bl,wM).call(this)}pause(f=null){ga(this,Kb,!0),clearTimeout(Nt(this,Bk)),f!=null&&ga(this,Bk,setTimeout(Nt(this,w8),f))}rateLimit(f){clearTimeout(Nt(this,O2)),this.pause(f),this.limit>1&&Number.isFinite(this.limit)&&(ga(this,$k,this.limit-1),this.limit=Nt(this,Hp),ga(this,O2,setTimeout(Nt(this,Ik),f)))}get isPaused(){return Nt(this,Kb)}}qb=new WeakMap,Lp=new WeakMap,Kb=new WeakMap,Bk=new WeakMap,Hp=new WeakMap,$k=new WeakMap,O2=new WeakMap,Bl=new WeakSet,wK=function(f){ga(this,qb,Nt(this,qb)+1);let p=!1,C;try{C=f()}catch(O){throw ga(this,qb,Nt(this,qb)-1),O}return{abort:O=>{p||(p=!0,ga(this,qb,Nt(this,qb)-1),C==null||C(O),Kn(this,Bl,wM).call(this))},done:()=>{p||(p=!0,ga(this,qb,Nt(this,qb)-1),Kn(this,Bl,wM).call(this))}}},wM=function(){queueMicrotask(()=>Kn(this,Bl,sJ).call(this))},sJ=function(){if(Nt(this,Kb)||Nt(this,qb)>=this.limit||Nt(this,Lp).length===0)return;const f=Nt(this,Lp).shift();if(f==null)throw new Error("Invariant violation: next is null");const p=Kn(this,Bl,wK).call(this,f.fn);f.abort=p.abort,f.done=p.done},rJ=function(f,p){const C={fn:f,priority:(p==null?void 0:p.priority)||0,abort:()=>{Kn(this,Bl,aJ).call(this,C)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},O=Nt(this,Lp).findIndex($=>C.priority>$.priority);return O===-1?Nt(this,Lp).push(C):Nt(this,Lp).splice(O,0,C),C},aJ=function(f){const p=Nt(this,Lp).indexOf(f);p!==-1&&Nt(this,Lp).splice(p,1)},w8=new WeakMap,Ik=new WeakMap;const qq=Symbol("__queue"),Wee="4.4.2",Zee={version:Wee},jee={strings:{uploadStalled:"Upload has not made any progress for %{seconds} seconds. You may want to retry it."}};function Gee(w,f){let p=f;return p||(p=new Error("Upload error")),typeof p=="string"&&(p=new Error(p)),p instanceof Error||(p=Object.assign(new Error("Upload error"),{data:p})),zee(w)?(p=new yK(p,w),p):(p.request=w,p)}function pX(w){return w.data.slice(0,w.data.size,w.meta.type)}const qee={formData:!0,fieldName:"file",method:"post",allowedMetaFields:!0,bundle:!1,headers:{},timeout:30*1e3,limit:5,withCredentials:!1,responseType:""};var Fk,Up,iJ,cJ,lJ,uJ,$M;class OK extends rQ{constructor(p,C){super(p,{...qee,fieldName:C.bundle?"files[]":"file",...C});cs(this,Up);cs(this,Fk);Ko(this,"requests");Ko(this,"uploaderEvents");cs(this,$M,async p=>{if(p.length===0){this.uppy.log("[XHRUpload] No files to upload!");return}this.opts.limit===0&&!this.opts[qq]&&this.uppy.log("[XHRUpload] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/xhr-upload/#limit-0","warning"),this.uppy.log("[XHRUpload] Uploading...");const C=this.uppy.getFilesByIds(p),O=Lee(C),$=Hee(O);if(this.uppy.emit("upload-start",$),this.opts.bundle){if(O.some(W=>W.isRemote))throw new Error("Can’t upload remote files when the `bundle: true` option is set");if(typeof this.opts.headers=="function")throw new TypeError("`headers` may not be a function when the `bundle: true` option is set");await Kn(this,Up,cJ).call(this,O)}else await Kn(this,Up,uJ).call(this,O)});if(this.type="uploader",this.id=this.opts.id||"XHRUpload",this.defaultLocale=jee,this.i18nInit(),qq in this.opts?this.requests=this.opts[qq]:this.requests=new Uee(this.opts.limit),this.opts.bundle&&!this.opts.formData)throw new Error("`opts.formData` must be true when `opts.bundle` is enabled.");if(this.opts.bundle&&typeof this.opts.headers=="function")throw new Error("`opts.headers` can not be a function when the `bundle: true` option is set.");if((C==null?void 0:C.allowedMetaFields)===void 0&&"metaFields"in this.opts)throw new Error("The `metaFields` option has been renamed to `allowedMetaFields`.");this.uploaderEvents=Object.create(null),ga(this,Fk,O=>async($,P)=>{var W,J;try{const re=await Fee($,{...P,onBeforeRequest:(Oe,je)=>{var De,Je;return(Je=(De=this.opts).onBeforeRequest)==null?void 0:Je.call(De,Oe,je,O)},shouldRetry:this.opts.shouldRetry,onAfterResponse:this.opts.onAfterResponse,onTimeout:Oe=>{const je=Math.ceil(Oe/1e3),De=new Error(this.i18n("uploadStalled",{seconds:je}));this.uppy.emit("upload-stalled",De,O)},onUploadProgress:Oe=>{if(Oe.lengthComputable)for(const{id:je}of O){const De=this.uppy.getFile(je);this.uppy.emit("upload-progress",De,{uploadStarted:De.progress.uploadStarted??0,bytesUploaded:Oe.loaded/Oe.total*De.size,bytesTotal:De.size})}}});let me=await((J=(W=this.opts).getResponseData)==null?void 0:J.call(W,re));if(re.responseType==="json")me??(me=re.response);else try{me??(me=JSON.parse(re.responseText))}catch(Oe){throw new Error("@uppy/xhr-upload expects a JSON response (with a `url` property). To parse non-JSON responses, use `getResponseData` to turn your response into JSON.",{cause:Oe})}const pe=typeof(me==null?void 0:me.url)=="string"?me.url:void 0;for(const{id:Oe}of O)this.uppy.emit("upload-success",this.uppy.getFile(Oe),{status:re.status,body:me,uploadURL:pe});return re}catch(re){if(re.name==="AbortError")return;const me=re.request;for(const pe of O)this.uppy.emit("upload-error",this.uppy.getFile(pe.id),Gee(me,re),me);throw re}})}getOptions(p){const C=this.uppy.getState().xhrUpload,{headers:O}=this.opts,$={...this.opts,...C||{},...p.xhrUpload||{},headers:{}};return typeof O=="function"?$.headers=O(p):Object.assign($.headers,this.opts.headers),C&&Object.assign($.headers,C.headers),p.xhrUpload&&Object.assign($.headers,p.xhrUpload.headers),$}addMetadata(p,C,O){gX(O.allowedMetaFields,C).forEach(P=>{const W=C[P];Array.isArray(W)?W.forEach(J=>p.append(P,J)):p.append(P,W)})}createFormDataUpload(p,C){const O=new FormData;this.addMetadata(O,p.meta,C);const $=pX(p);return p.name?O.append(C.fieldName,$,p.meta.name):O.append(C.fieldName,$),O}createBundledUpload(p,C){const O=new FormData,{meta:$}=this.uppy.getState();return this.addMetadata(O,$,C),p.forEach(P=>{const W=this.getOptions(P),J=pX(P);P.name?O.append(W.fieldName,J,P.name):O.append(W.fieldName,J)}),O}install(){if(this.opts.bundle){const{capabilities:p}=this.uppy.getState();this.uppy.setState({capabilities:{...p,individualCancellation:!1}})}this.uppy.addUploader(Nt(this,$M))}uninstall(){if(this.opts.bundle){const{capabilities:p}=this.uppy.getState();this.uppy.setState({capabilities:{...p,individualCancellation:!0}})}this.uppy.removeUploader(Nt(this,$M))}}Fk=new WeakMap,Up=new WeakSet,iJ=async function(p){const C=new $ee(this.uppy),O=new AbortController,$=this.requests.wrapPromiseFunction(async()=>{const P=this.getOptions(p),W=Nt(this,Fk).call(this,[p]),J=P.formData?this.createFormDataUpload(p,P):p.data,re=typeof P.endpoint=="string"?P.endpoint:await P.endpoint(p);return W(re,{...P,body:J,signal:O.signal})});C.onFileRemove(p.id,()=>O.abort()),C.onCancelAll(p.id,()=>{O.abort()});try{await $().abortOn(O.signal)}catch(P){if(P.message!=="Cancelled")throw P}finally{C.remove()}},cJ=async function(p){const C=new AbortController,O=this.requests.wrapPromiseFunction(async()=>{const P=this.uppy.getState().xhrUpload??{},W=Nt(this,Fk).call(this,p),J=this.createBundledUpload(p,{...this.opts,...P}),re=typeof this.opts.endpoint=="string"?this.opts.endpoint:await this.opts.endpoint(p);return W(re,{...this.opts,body:J,signal:C.signal})});function $(){C.abort()}this.uppy.once("cancel-all",$);try{await O().abortOn(C.signal)}catch(P){if(P.message!=="Cancelled")throw P}finally{this.uppy.off("cancel-all",$)}},lJ=function(p){var $;const C=this.getOptions(p),O=gX(C.allowedMetaFields,p.meta);return{...($=p.remote)==null?void 0:$.body,protocol:"multipart",endpoint:C.endpoint,size:p.data.size,fieldname:C.fieldName,metadata:Object.fromEntries(O.map(P=>[P,p.meta[P]])),httpMethod:C.method,useFormData:C.formData,headers:C.headers}},uJ=async function(p){await Promise.allSettled(p.map(C=>{if(C.isRemote){const O=()=>this.requests,$=new AbortController,P=J=>{J.id===C.id&&$.abort()};this.uppy.on("file-removed",P);const W=this.uppy.getRequestClientForFile(C).uploadRemoteFile(C,Kn(this,Up,lJ).call(this,C),{signal:$.signal,getQueue:O});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",P)},{priority:-1})(),W}return Kn(this,Up,iJ).call(this,C)}))},$M=new WeakMap,Ko(OK,"VERSION",Zee.version);function Kq(w,f){w.split(/\s+/).forEach(p=>{f(p)})}class Kee{constructor(){this._events={}}on(f,p){Kq(f,C=>{const O=this._events[C]||[];O.push(p),this._events[C]=O})}off(f,p){var C=arguments.length;if(C===0){this._events={};return}Kq(f,O=>{if(C===1){delete this._events[O];return}const $=this._events[O];$!==void 0&&($.splice($.indexOf(p),1),this._events[O]=$)})}trigger(f,...p){var C=this;Kq(f,O=>{const $=C._events[O];$!==void 0&&$.forEach(P=>{P.apply(C,p)})})}}function Yee(w){return w.plugins={},class extends w{constructor(){super(...arguments),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(f,p){w.plugins[f]={name:f,fn:p}}initializePlugins(f){var p,C;const O=this,$=[];if(Array.isArray(f))f.forEach(P=>{typeof P=="string"?$.push(P):(O.plugins.settings[P.name]=P.options,$.push(P.name))});else if(f)for(p in f)f.hasOwnProperty(p)&&(O.plugins.settings[p]=f[p],$.push(p));for(;C=$.shift();)O.require(C)}loadPlugin(f){var p=this,C=p.plugins,O=w.plugins[f];if(!w.plugins.hasOwnProperty(f))throw new Error('Unable to find "'+f+'" plugin');C.requested[f]=!0,C.loaded[f]=O.fn.apply(p,[p.plugins.settings[f]||{}]),C.names.push(f)}require(f){var p=this,C=p.plugins;if(!p.plugins.loaded.hasOwnProperty(f)){if(C.requested[f])throw new Error('Plugin has circular dependency ("'+f+'")');p.loadPlugin(f)}return C.loaded[f]}}}const C8=w=>(w=w.filter(Boolean),w.length<2?w[0]||"":Jee(w)==1?"["+w.join("")+"]":"(?:"+w.join("|")+")"),dJ=w=>{if(!Xee(w))return w.join("");let f="",p=0;const C=()=>{p>1&&(f+="{"+p+"}")};return w.forEach((O,$)=>{if(O===w[$-1]){p++;return}C(),f+=O,p=1}),C(),f},mJ=w=>{let f=Array.from(w);return C8(f)},Xee=w=>new Set(w).size!==w.length,AM=w=>(w+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),Jee=w=>w.reduce((f,p)=>Math.max(f,Qee(p)),0),Qee=w=>Array.from(w).length,fJ=w=>{if(w.length===1)return[[w]];let f=[];const p=w.substring(1);return fJ(p).forEach(function(O){let $=O.slice(0);$[0]=w.charAt(0)+$[0],f.push($),$=O.slice(0),$.unshift(w.charAt(0)),f.push($)}),f},ete=[[0,65535]],tte="[̀-ͯ·ʾʼ]";let l8,gJ;const nte=3,AK={},bX={"/":"⁄∕",0:"߀",a:"ⱥɐɑ",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",b:"ƀɓƃ",c:"ꜿƈȼↄ",d:"đɗɖᴅƌꮷԁɦ",e:"ɛǝᴇɇ",f:"ꝼƒ",g:"ǥɠꞡᵹꝿɢ",h:"ħⱨⱶɥ",i:"ɨı",j:"ɉȷ",k:"ƙⱪꝁꝃꝅꞣ",l:"łƚɫⱡꝉꝇꞁɭ",m:"ɱɯϻ",n:"ꞥƞɲꞑᴎлԉ",o:"øǿɔɵꝋꝍᴑ",oe:"œ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ƥᵽꝑꝓꝕρ",q:"ꝗꝙɋ",r:"ɍɽꝛꞧꞃ",s:"ßȿꞩꞅʂ",t:"ŧƭʈⱦꞇ",th:"þ",tz:"ꜩ",u:"ʉ",v:"ʋꝟʌ",vy:"ꝡ",w:"ⱳ",y:"ƴɏỿ",z:"ƶȥɀⱬꝣ",hv:"ƕ"};for(let w in bX){let f=bX[w]||"";for(let p=0;p<f.length;p++){let C=f.substring(p,p+1);AK[C]=w}}const ote=new RegExp(Object.keys(AK).join("|")+"|"+tte,"gu"),ste=w=>{l8===void 0&&(l8=cte(ete))},vX=(w,f="NFKD")=>w.normalize(f),u8=w=>Array.from(w).reduce((f,p)=>f+rte(p),""),rte=w=>(w=vX(w).toLowerCase().replace(ote,f=>AK[f]||""),vX(w,"NFC"));function*ate(w){for(const[f,p]of w)for(let C=f;C<=p;C++){let O=String.fromCharCode(C),$=u8(O);$!=O.toLowerCase()&&($.length>nte||$.length!=0&&(yield{folded:$,composed:O,code_point:C}))}}const ite=w=>{const f={},p=(C,O)=>{const $=f[C]||new Set,P=new RegExp("^"+mJ($)+"$","iu");O.match(P)||($.add(AM(O)),f[C]=$)};for(let C of ate(w))p(C.folded,C.folded),p(C.folded,C.composed);return f},cte=w=>{const f=ite(w),p={};let C=[];for(let $ in f){let P=f[$];P&&(p[$]=mJ(P)),$.length>1&&C.push(AM($))}C.sort(($,P)=>P.length-$.length);const O=C8(C);return gJ=new RegExp("^"+O,"u"),p},lte=(w,f=1)=>{let p=0;return w=w.map(C=>(l8[C]&&(p+=C.length),l8[C]||C)),p>=f?dJ(w):""},ute=(w,f=1)=>(f=Math.max(f,w.length-1),C8(fJ(w).map(p=>lte(p,f)))),yX=(w,f=!0)=>{let p=w.length>1?1:0;return C8(w.map(C=>{let O=[];const $=f?C.length():C.length()-1;for(let P=0;P<$;P++)O.push(ute(C.substrs[P]||"",p));return dJ(O)}))},dte=(w,f)=>{for(const p of f){if(p.start!=w.start||p.end!=w.end||p.substrs.join("")!==w.substrs.join(""))continue;let C=w.parts;const O=P=>{for(const W of C){if(W.start===P.start&&W.substr===P.substr)return!1;if(!(P.length==1||W.length==1)&&(P.start<W.start&&P.end>W.start||W.start<P.start&&W.end>P.start))return!0}return!1};if(!(p.parts.filter(O).length>0))return!0}return!1};class d8{constructor(){Ko(this,"parts");Ko(this,"substrs");Ko(this,"start");Ko(this,"end");this.parts=[],this.substrs=[],this.start=0,this.end=0}add(f){f&&(this.parts.push(f),this.substrs.push(f.substr),this.start=Math.min(f.start,this.start),this.end=Math.max(f.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(f,p){let C=new d8,O=JSON.parse(JSON.stringify(this.parts)),$=O.pop();for(const J of O)C.add(J);let P=p.substr.substring(0,f-$.start),W=P.length;return C.add({start:$.start,end:$.start+W,length:W,substr:P}),C}}const mte=w=>{ste(),w=u8(w);let f="",p=[new d8];for(let C=0;C<w.length;C++){let $=w.substring(C).match(gJ);const P=w.substring(C,C+1),W=$?$[0]:null;let J=[],re=new Set;for(const me of p){const pe=me.last();if(!pe||pe.length==1||pe.end<=C)if(W){const Oe=W.length;me.add({start:C,end:C+Oe,length:Oe,substr:W}),re.add("1")}else me.add({start:C,end:C+1,length:1,substr:P}),re.add("2");else if(W){let Oe=me.clone(C,pe);const je=W.length;Oe.add({start:C,end:C+je,length:je,substr:W}),J.push(Oe)}else re.add("3")}if(J.length>0){J=J.sort((me,pe)=>me.length()-pe.length());for(let me of J)dte(me,p)||p.push(me);continue}if(C>0&&re.size==1&&!re.has("3")){f+=yX(p,!1);let me=new d8;const pe=p[0];pe&&me.add(pe.last()),p=[me]}}return f+=yX(p,!0),f},fte=(w,f)=>{if(w)return w[f]},gte=(w,f)=>{if(w){for(var p,C=f.split(".");(p=C.shift())&&(w=w[p]););return w}},Yq=(w,f,p)=>{var C,O;return!w||(w=w+"",f.regex==null)||(O=w.search(f.regex),O===-1)?0:(C=f.string.length/w.length,O===0&&(C+=.5),C*p)},Xq=(w,f)=>{var p=w[f];if(typeof p=="function")return p;p&&!Array.isArray(p)&&(w[f]=[p])},Z6=(w,f)=>{if(Array.isArray(w))w.forEach(f);else for(var p in w)w.hasOwnProperty(p)&&f(w[p],p)},hte=(w,f)=>typeof w=="number"&&typeof f=="number"?w>f?1:w<f?-1:0:(w=u8(w+"").toLowerCase(),f=u8(f+"").toLowerCase(),w>f?1:f>w?-1:0);class pte{constructor(f,p){Ko(this,"items");Ko(this,"settings");this.items=f,this.settings=p||{diacritics:!0}}tokenize(f,p,C){if(!f||!f.length)return[];const O=[],$=f.split(/\s+/);var P;return C&&(P=new RegExp("^("+Object.keys(C).map(AM).join("|")+"):(.*)$")),$.forEach(W=>{let J,re=null,me=null;P&&(J=W.match(P))&&(re=J[1],W=J[2]),W.length>0&&(this.settings.diacritics?me=mte(W)||null:me=AM(W),me&&p&&(me="\\b"+me)),O.push({string:W,regex:me?new RegExp(me,"iu"):null,field:re})}),O}getScoreFunction(f,p){var C=this.prepareSearch(f,p);return this._getScoreFunction(C)}_getScoreFunction(f){const p=f.tokens,C=p.length;if(!C)return function(){return 0};const O=f.options.fields,$=f.weights,P=O.length,W=f.getAttrFn;if(!P)return function(){return 1};const J=function(){return P===1?function(re,me){const pe=O[0].field;return Yq(W(me,pe),re,$[pe]||1)}:function(re,me){var pe=0;if(re.field){const Oe=W(me,re.field);!re.regex&&Oe?pe+=1/P:pe+=Yq(Oe,re,1)}else Z6($,(Oe,je)=>{pe+=Yq(W(me,je),re,Oe)});return pe/P}}();return C===1?function(re){return J(p[0],re)}:f.options.conjunction==="and"?function(re){var me,pe=0;for(let Oe of p){if(me=J(Oe,re),me<=0)return 0;pe+=me}return pe/C}:function(re){var me=0;return Z6(p,pe=>{me+=J(pe,re)}),me/C}}getSortFunction(f,p){var C=this.prepareSearch(f,p);return this._getSortFunction(C)}_getSortFunction(f){var p,C=[];const O=this,$=f.options,P=!f.query&&$.sort_empty?$.sort_empty:$.sort;if(typeof P=="function")return P.bind(this);const W=function(re,me){return re==="$score"?me.score:f.getAttrFn(O.items[me.id],re)};if(P)for(let re of P)(f.query||re.field!=="$score")&&C.push(re);if(f.query){p=!0;for(let re of C)if(re.field==="$score"){p=!1;break}p&&C.unshift({field:"$score",direction:"desc"})}else C=C.filter(re=>re.field!=="$score");return C.length?function(re,me){var pe,Oe;for(let je of C)if(Oe=je.field,pe=(je.direction==="desc"?-1:1)*hte(W(Oe,re),W(Oe,me)),pe)return pe;return 0}:null}prepareSearch(f,p){const C={};var O=Object.assign({},p);if(Xq(O,"sort"),Xq(O,"sort_empty"),O.fields){Xq(O,"fields");const $=[];O.fields.forEach(P=>{typeof P=="string"&&(P={field:P,weight:1}),$.push(P),C[P.field]="weight"in P?P.weight:1}),O.fields=$}return{options:O,query:f.toLowerCase().trim(),tokens:this.tokenize(f,O.respect_word_boundaries,C),total:0,items:[],weights:C,getAttrFn:O.nesting?gte:fte}}search(f,p){var C=this,O,$;$=this.prepareSearch(f,p),p=$.options,f=$.query;const P=p.score||C._getScoreFunction($);f.length?Z6(C.items,(J,re)=>{O=P(J),(p.filter===!1||O>0)&&$.items.push({score:O,id:re})}):Z6(C.items,(J,re)=>{$.items.push({score:1,id:re})});const W=C._getSortFunction($);return W&&$.items.sort(W),$.total=$.items.length,typeof p.limit=="number"&&($.items=$.items.slice(0,p.limit)),$}}const Ag=w=>typeof w>"u"||w===null?null:n8(w),n8=w=>typeof w=="boolean"?w?"1":"0":w+"",Jq=w=>(w+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),bte=(w,f)=>f>0?window.setTimeout(w,f):(w.call(null),null),vte=(w,f)=>{var p;return function(C,O){var $=this;p&&($.loading=Math.max($.loading-1,0),clearTimeout(p)),p=setTimeout(function(){p=null,$.loadedSearches[C]=!0,w.call($,C,O)},f)}},wX=(w,f,p)=>{var C,O=w.trigger,$={};w.trigger=function(){var P=arguments[0];if(f.indexOf(P)!==-1)$[P]=arguments;else return O.apply(w,arguments)},p.apply(w,[]),w.trigger=O;for(C of f)C in $&&O.apply(w,$[C])},yte=w=>({start:w.selectionStart||0,length:(w.selectionEnd||0)-(w.selectionStart||0)}),Ga=(w,f=!1)=>{w&&(w.preventDefault(),f&&w.stopPropagation())},Cu=(w,f,p,C)=>{w.addEventListener(f,p,C)},v2=(w,f)=>{if(!f||!f[w])return!1;var p=(f.altKey?1:0)+(f.ctrlKey?1:0)+(f.shiftKey?1:0)+(f.metaKey?1:0);return p===1},Qq=(w,f)=>{const p=w.getAttribute("id");return p||(w.setAttribute("id",f),f)},CX=w=>w.replace(/[\\"']/g,"\\$&"),y2=(w,f)=>{f&&w.append(f)},nl=(w,f)=>{if(Array.isArray(w))w.forEach(f);else for(var p in w)w.hasOwnProperty(p)&&f(w[p],p)},Ip=w=>{if(w.jquery)return w[0];if(w instanceof HTMLElement)return w;if(hJ(w)){var f=document.createElement("template");return f.innerHTML=w.trim(),f.content.firstChild}return document.querySelector(w)},hJ=w=>typeof w=="string"&&w.indexOf("<")>-1,wte=w=>w.replace(/['"\\]/g,"\\$&"),eK=(w,f)=>{var p=document.createEvent("HTMLEvents");p.initEvent(f,!0,!1),w.dispatchEvent(p)},j6=(w,f)=>{Object.assign(w.style,f)},fm=(w,...f)=>{var p=pJ(f);w=bJ(w),w.map(C=>{p.map(O=>{C.classList.add(O)})})},By=(w,...f)=>{var p=pJ(f);w=bJ(w),w.map(C=>{p.map(O=>{C.classList.remove(O)})})},pJ=w=>{var f=[];return nl(w,p=>{typeof p=="string"&&(p=p.trim().split(/[\t\n\f\r\s]/)),Array.isArray(p)&&(f=f.concat(p))}),f.filter(Boolean)},bJ=w=>(Array.isArray(w)||(w=[w]),w),tK=(w,f,p)=>{if(!(p&&!p.contains(w)))for(;w&&w.matches;){if(w.matches(f))return w;w=w.parentNode}},SX=(w,f=0)=>f>0?w[w.length-1]:w[0],Cte=w=>Object.keys(w).length===0,xX=(w,f)=>{if(!w)return-1;f=f||w.nodeName;for(var p=0;w=w.previousElementSibling;)w.matches(f)&&p++;return p},ha=(w,f)=>{nl(f,(p,C)=>{p==null?w.removeAttribute(C):w.setAttribute(C,""+p)})},CK=(w,f)=>{w.parentNode&&w.parentNode.replaceChild(f,w)},Ste=(w,f)=>{if(f===null)return;if(typeof f=="string"){if(!f.length)return;f=new RegExp(f,"i")}const p=$=>{var P=$.data.match(f);if(P&&$.data.length>0){var W=document.createElement("span");W.className="highlight";var J=$.splitText(P.index);J.splitText(P[0].length);var re=J.cloneNode(!0);return W.appendChild(re),CK(J,W),1}return 0},C=$=>{$.nodeType===1&&$.childNodes&&!/(script|style)/i.test($.tagName)&&($.className!=="highlight"||$.tagName!=="SPAN")&&Array.from($.childNodes).forEach(P=>{O(P)})},O=$=>$.nodeType===3?p($):(C($),0);O(w)},xte=w=>{var f=w.querySelectorAll("span.highlight");Array.prototype.forEach.call(f,function(p){var C=p.parentNode;C.replaceChild(p.firstChild,p),C.normalize()})},Ete=65,Tte=13,_te=27,kte=37,Ote=38,Ate=39,Dte=40,EX=8,Rte=46,TX=9,Mte=typeof navigator>"u"?!1:/Mac/.test(navigator.userAgent),G6=Mte?"metaKey":"ctrlKey",_X={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,refreshThrottle:300,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(w){return w.length>0},render:{}};function kX(w,f){var p=Object.assign({},_X,f),C=p.dataAttr,O=p.labelField,$=p.valueField,P=p.disabledField,W=p.optgroupField,J=p.optgroupLabelField,re=p.optgroupValueField,me=w.tagName.toLowerCase(),pe=w.getAttribute("placeholder")||w.getAttribute("data-placeholder");if(!pe&&!p.allowEmptyOption){let Je=w.querySelector('option[value=""]');Je&&(pe=Je.textContent)}var Oe={placeholder:pe,options:[],optgroups:[],items:[],maxItems:null},je=()=>{var Je,Ye=Oe.options,en={},ze=1;let ee=0;var qe=ae=>{var yt=Object.assign({},ae.dataset),Dt=C&&yt[C];return typeof Dt=="string"&&Dt.length&&(yt=Object.assign(yt,JSON.parse(Dt))),yt},Sn=(ae,yt)=>{var Dt=Ag(ae.value);if(Dt!=null&&!(!Dt&&!p.allowEmptyOption)){if(en.hasOwnProperty(Dt)){if(yt){var Ht=en[Dt][W];Ht?Array.isArray(Ht)?Ht.push(yt):en[Dt][W]=[Ht,yt]:en[Dt][W]=yt}}else{var Te=qe(ae);Te[O]=Te[O]||ae.textContent,Te[$]=Te[$]||Dt,Te[P]=Te[P]||ae.disabled,Te[W]=Te[W]||yt,Te.$option=ae,Te.$order=Te.$order||++ee,en[Dt]=Te,Ye.push(Te)}ae.selected&&Oe.items.push(Dt)}},At=ae=>{var yt,Dt;Dt=qe(ae),Dt[J]=Dt[J]||ae.getAttribute("label")||"",Dt[re]=Dt[re]||ze++,Dt[P]=Dt[P]||ae.disabled,Dt.$order=Dt.$order||++ee,Oe.optgroups.push(Dt),yt=Dt[re],nl(ae.children,Ht=>{Sn(Ht,yt)})};Oe.maxItems=w.hasAttribute("multiple")?null:1,nl(w.children,ae=>{Je=ae.tagName.toLowerCase(),Je==="optgroup"?At(ae):Je==="option"&&Sn(ae)})},De=()=>{const Je=w.getAttribute(C);if(Je)Oe.options=JSON.parse(Je),nl(Oe.options,en=>{Oe.items.push(en[$])});else{var Ye=w.value.trim()||"";if(!p.allowEmptyOption&&!Ye.length)return;const en=Ye.split(p.delimiter);nl(en,ze=>{const ee={};ee[O]=ze,ee[$]=ze,Oe.options.push(ee)}),Oe.items=en}};return me==="select"?je():De(),Object.assign({},_X,Oe,f)}var OX=0;class xu extends Yee(Kee){constructor(f,p){super(),this.order=0,this.isOpen=!1,this.isDisabled=!1,this.isReadOnly=!1,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreHover=!1,this.hasOptions=!1,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],this.refreshTimeout=null,OX++;var C,O=Ip(f);if(O.tomselect)throw new Error("Tom Select already initialized on this element");O.tomselect=this;var $=window.getComputedStyle&&window.getComputedStyle(O,null);C=$.getPropertyValue("direction");const P=kX(O,p);this.settings=P,this.input=O,this.tabIndex=O.tabIndex||0,this.is_select_tag=O.tagName.toLowerCase()==="select",this.rtl=/rtl/i.test(C),this.inputId=Qq(O,"tomselect-"+OX),this.isRequired=O.required,this.sifter=new pte(this.options,{diacritics:P.diacritics}),P.mode=P.mode||(P.maxItems===1?"single":"multi"),typeof P.hideSelected!="boolean"&&(P.hideSelected=P.mode==="multi"),typeof P.hidePlaceholder!="boolean"&&(P.hidePlaceholder=P.mode!=="multi");var W=P.createFilter;typeof W!="function"&&(typeof W=="string"&&(W=new RegExp(W)),W instanceof RegExp?P.createFilter=Ye=>W.test(Ye):P.createFilter=Ye=>this.settings.duplicates||!this.options[Ye]),this.initializePlugins(P.plugins),this.setupCallbacks(),this.setupTemplates();const J=Ip("<div>"),re=Ip("<div>"),me=this._render("dropdown"),pe=Ip('<div role="listbox" tabindex="-1">'),Oe=this.input.getAttribute("class")||"",je=P.mode;var De;if(fm(J,P.wrapperClass,Oe,je),fm(re,P.controlClass),y2(J,re),fm(me,P.dropdownClass,je),P.copyClassesToDropdown&&fm(me,Oe),fm(pe,P.dropdownContentClass),y2(me,pe),Ip(P.dropdownParent||J).appendChild(me),hJ(P.controlInput)){De=Ip(P.controlInput);var Je=["autocorrect","autocapitalize","autocomplete","spellcheck"];nl(Je,Ye=>{O.getAttribute(Ye)&&ha(De,{[Ye]:O.getAttribute(Ye)})}),De.tabIndex=-1,re.appendChild(De),this.focus_node=De}else P.controlInput?(De=Ip(P.controlInput),this.focus_node=De):(De=Ip("<input/>"),this.focus_node=re);this.wrapper=J,this.dropdown=me,this.dropdown_content=pe,this.control=re,this.control_input=De,this.setup()}setup(){const f=this,p=f.settings,C=f.control_input,O=f.dropdown,$=f.dropdown_content,P=f.wrapper,W=f.control,J=f.input,re=f.focus_node,me={passive:!0},pe=f.inputId+"-ts-dropdown";ha($,{id:pe}),ha(re,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":pe});const Oe=Qq(re,f.inputId+"-ts-control"),je="label[for='"+wte(f.inputId)+"']",De=document.querySelector(je),Je=f.focus.bind(f);if(De){Cu(De,"click",Je),ha(De,{for:Oe});const ze=Qq(De,f.inputId+"-ts-label");ha(re,{"aria-labelledby":ze}),ha($,{"aria-labelledby":ze})}if(P.style.width=J.style.width,f.plugins.names.length){const ze="plugin-"+f.plugins.names.join(" plugin-");fm([P,O],ze)}(p.maxItems===null||p.maxItems>1)&&f.is_select_tag&&ha(J,{multiple:"multiple"}),p.placeholder&&ha(C,{placeholder:p.placeholder}),!p.splitOn&&p.delimiter&&(p.splitOn=new RegExp("\\s*"+AM(p.delimiter)+"+\\s*")),p.load&&p.loadThrottle&&(p.load=vte(p.load,p.loadThrottle)),Cu(O,"mousemove",()=>{f.ignoreHover=!1}),Cu(O,"mouseenter",ze=>{var ee=tK(ze.target,"[data-selectable]",O);ee&&f.onOptionHover(ze,ee)},{capture:!0}),Cu(O,"click",ze=>{const ee=tK(ze.target,"[data-selectable]");ee&&(f.onOptionSelect(ze,ee),Ga(ze,!0))}),Cu(W,"click",ze=>{var ee=tK(ze.target,"[data-ts-item]",W);if(ee&&f.onItemSelect(ze,ee)){Ga(ze,!0);return}C.value==""&&(f.onClick(),Ga(ze,!0))}),Cu(re,"keydown",ze=>f.onKeyDown(ze)),Cu(C,"keypress",ze=>f.onKeyPress(ze)),Cu(C,"input",ze=>f.onInput(ze)),Cu(re,"blur",ze=>f.onBlur(ze)),Cu(re,"focus",ze=>f.onFocus(ze)),Cu(C,"paste",ze=>f.onPaste(ze));const Ye=ze=>{const ee=ze.composedPath()[0];if(!P.contains(ee)&&!O.contains(ee)){f.isFocused&&f.blur(),f.inputState();return}ee==C&&f.isOpen?ze.stopPropagation():Ga(ze,!0)},en=()=>{f.isOpen&&f.positionDropdown()};Cu(document,"mousedown",Ye),Cu(window,"scroll",en,me),Cu(window,"resize",en,me),this._destroy=()=>{document.removeEventListener("mousedown",Ye),window.removeEventListener("scroll",en),window.removeEventListener("resize",en),De&&De.removeEventListener("click",Je)},this.revertSettings={innerHTML:J.innerHTML,tabIndex:J.tabIndex},J.tabIndex=-1,J.insertAdjacentElement("afterend",f.wrapper),f.sync(!1),p.items=[],delete p.optgroups,delete p.options,Cu(J,"invalid",()=>{f.isValid&&(f.isValid=!1,f.isInvalid=!0,f.refreshState())}),f.updateOriginalInput(),f.refreshItems(),f.close(!1),f.inputState(),f.isSetup=!0,J.disabled?f.disable():J.readOnly?f.setReadOnly(!0):f.enable(),f.on("change",this.onChange),fm(J,"tomselected","ts-hidden-accessible"),f.trigger("initialize"),p.preload===!0&&f.preload()}setupOptions(f=[],p=[]){this.addOptions(f),nl(p,C=>{this.registerOptionGroup(C)})}setupTemplates(){var f=this,p=f.settings.labelField,C=f.settings.optgroupLabelField,O={optgroup:$=>{let P=document.createElement("div");return P.className="optgroup",P.appendChild($.options),P},optgroup_header:($,P)=>'<div class="optgroup-header">'+P($[C])+"</div>",option:($,P)=>"<div>"+P($[p])+"</div>",item:($,P)=>"<div>"+P($[p])+"</div>",option_create:($,P)=>'<div class="create">Add <strong>'+P($.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};f.settings.render=Object.assign({},O,f.settings.render)}setupCallbacks(){var f,p,C={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(f in C)p=this.settings[C[f]],p&&this.on(f,p)}sync(f=!0){const p=this,C=f?kX(p.input,{delimiter:p.settings.delimiter}):p.settings;p.setupOptions(C.options,C.optgroups),p.setValue(C.items||[],!0),p.lastQuery=null}onClick(){var f=this;if(f.activeItems.length>0){f.clearActiveItems(),f.focus();return}f.isFocused&&f.isOpen?f.blur():f.focus()}onMouseDown(){}onChange(){eK(this.input,"input"),eK(this.input,"change")}onPaste(f){var p=this;if(p.isInputHidden||p.isLocked){Ga(f);return}p.settings.splitOn&&setTimeout(()=>{var C=p.inputValue();if(C.match(p.settings.splitOn)){var O=C.trim().split(p.settings.splitOn);nl(O,$=>{Ag($)&&(this.options[$]?p.addItem($):p.createItem($))})}},0)}onKeyPress(f){var p=this;if(p.isLocked){Ga(f);return}var C=String.fromCharCode(f.keyCode||f.which);if(p.settings.create&&p.settings.mode==="multi"&&C===p.settings.delimiter){p.createItem(),Ga(f);return}}onKeyDown(f){var p=this;if(p.ignoreHover=!0,p.isLocked){f.keyCode!==TX&&Ga(f);return}switch(f.keyCode){case Ete:if(v2(G6,f)&&p.control_input.value==""){Ga(f),p.selectAll();return}break;case _te:p.isOpen&&(Ga(f,!0),p.close()),p.clearActiveItems();return;case Dte:if(!p.isOpen&&p.hasOptions)p.open();else if(p.activeOption){let C=p.getAdjacent(p.activeOption,1);C&&p.setActiveOption(C)}Ga(f);return;case Ote:if(p.activeOption){let C=p.getAdjacent(p.activeOption,-1);C&&p.setActiveOption(C)}Ga(f);return;case Tte:p.canSelect(p.activeOption)?(p.onOptionSelect(f,p.activeOption),Ga(f)):(p.settings.create&&p.createItem()||document.activeElement==p.control_input&&p.isOpen)&&Ga(f);return;case kte:p.advanceSelection(-1,f);return;case Ate:p.advanceSelection(1,f);return;case TX:p.settings.selectOnTab&&(p.canSelect(p.activeOption)&&(p.onOptionSelect(f,p.activeOption),Ga(f)),p.settings.create&&p.createItem()&&Ga(f));return;case EX:case Rte:p.deleteSelection(f);return}p.isInputHidden&&!v2(G6,f)&&Ga(f)}onInput(f){if(this.isLocked)return;const p=this.inputValue();if(this.lastValue!==p){if(this.lastValue=p,p==""){this._onInput();return}this.refreshTimeout&&window.clearTimeout(this.refreshTimeout),this.refreshTimeout=bte(()=>{this.refreshTimeout=null,this._onInput()},this.settings.refreshThrottle)}}_onInput(){const f=this.lastValue;this.settings.shouldLoad.call(this,f)&&this.load(f),this.refreshOptions(),this.trigger("type",f)}onOptionHover(f,p){this.ignoreHover||this.setActiveOption(p,!1)}onFocus(f){var p=this,C=p.isFocused;if(p.isDisabled||p.isReadOnly){p.blur(),Ga(f);return}p.ignoreFocus||(p.isFocused=!0,p.settings.preload==="focus"&&p.preload(),C||p.trigger("focus"),p.activeItems.length||(p.inputState(),p.refreshOptions(!!p.settings.openOnFocus)),p.refreshState())}onBlur(f){if(document.hasFocus()!==!1){var p=this;if(p.isFocused){p.isFocused=!1,p.ignoreFocus=!1;var C=()=>{p.close(),p.setActiveItem(),p.setCaret(p.items.length),p.trigger("blur")};p.settings.create&&p.settings.createOnBlur?p.createItem(null,C):C()}}}onOptionSelect(f,p){var C,O=this;p.parentElement&&p.parentElement.matches("[data-disabled]")||(p.classList.contains("create")?O.createItem(null,()=>{O.settings.closeAfterSelect&&O.close()}):(C=p.dataset.value,typeof C<"u"&&(O.lastQuery=null,O.addItem(C),O.settings.closeAfterSelect&&O.close(),!O.settings.hideSelected&&f.type&&/click/.test(f.type)&&O.setActiveOption(p))))}canSelect(f){return!!(this.isOpen&&f&&this.dropdown_content.contains(f))}onItemSelect(f,p){var C=this;return!C.isLocked&&C.settings.mode==="multi"?(Ga(f),C.setActiveItem(p,f),!0):!1}canLoad(f){return!(!this.settings.load||this.loadedSearches.hasOwnProperty(f))}load(f){const p=this;if(!p.canLoad(f))return;fm(p.wrapper,p.settings.loadingClass),p.loading++;const C=p.loadCallback.bind(p);p.settings.load.call(p,f,C)}loadCallback(f,p){const C=this;C.loading=Math.max(C.loading-1,0),C.lastQuery=null,C.clearActiveOption(),C.setupOptions(f,p),C.refreshOptions(C.isFocused&&!C.isInputHidden),C.loading||By(C.wrapper,C.settings.loadingClass),C.trigger("load",f,p)}preload(){var f=this.wrapper.classList;f.contains("preloaded")||(f.add("preloaded"),this.load(""))}setTextboxValue(f=""){var p=this.control_input,C=p.value!==f;C&&(p.value=f,eK(p,"update"),this.lastValue=f)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(f,p){var C=p?[]:["change"];wX(this,C,()=>{this.clear(p),this.addItems(f,p)})}setMaxItems(f){f===0&&(f=null),this.settings.maxItems=f,this.refreshState()}setActiveItem(f,p){var C=this,O,$,P,W,J,re;if(C.settings.mode!=="single"){if(!f){C.clearActiveItems(),C.isFocused&&C.inputState();return}if(O=p&&p.type.toLowerCase(),O==="click"&&v2("shiftKey",p)&&C.activeItems.length){for(re=C.getLastActive(),P=Array.prototype.indexOf.call(C.control.children,re),W=Array.prototype.indexOf.call(C.control.children,f),P>W&&(J=P,P=W,W=J),$=P;$<=W;$++)f=C.control.children[$],C.activeItems.indexOf(f)===-1&&C.setActiveItemClass(f);Ga(p)}else O==="click"&&v2(G6,p)||O==="keydown"&&v2("shiftKey",p)?f.classList.contains("active")?C.removeActiveItem(f):C.setActiveItemClass(f):(C.clearActiveItems(),C.setActiveItemClass(f));C.inputState(),C.isFocused||C.focus()}}setActiveItemClass(f){const p=this,C=p.control.querySelector(".last-active");C&&By(C,"last-active"),fm(f,"active last-active"),p.trigger("item_select",f),p.activeItems.indexOf(f)==-1&&p.activeItems.push(f)}removeActiveItem(f){var p=this.activeItems.indexOf(f);this.activeItems.splice(p,1),By(f,"active")}clearActiveItems(){By(this.activeItems,"active"),this.activeItems=[]}setActiveOption(f,p=!0){f!==this.activeOption&&(this.clearActiveOption(),f&&(this.activeOption=f,ha(this.focus_node,{"aria-activedescendant":f.getAttribute("id")}),ha(f,{"aria-selected":"true"}),fm(f,"active"),p&&this.scrollToOption(f)))}scrollToOption(f,p){if(!f)return;const C=this.dropdown_content,O=C.clientHeight,$=C.scrollTop||0,P=f.offsetHeight,W=f.getBoundingClientRect().top-C.getBoundingClientRect().top+$;W+P>O+$?this.scroll(W-O+P,p):W<$&&this.scroll(W,p)}scroll(f,p){const C=this.dropdown_content;p&&(C.style.scrollBehavior=p),C.scrollTop=f,C.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(By(this.activeOption,"active"),ha(this.activeOption,{"aria-selected":null})),this.activeOption=null,ha(this.focus_node,{"aria-activedescendant":null})}selectAll(){const f=this;if(f.settings.mode==="single")return;const p=f.controlChildren();p.length&&(f.inputState(),f.close(),f.activeItems=p,nl(p,C=>{f.setActiveItemClass(C)}))}inputState(){var f=this;f.control.contains(f.control_input)&&(ha(f.control_input,{placeholder:f.settings.placeholder}),f.activeItems.length>0||!f.isFocused&&f.settings.hidePlaceholder&&f.items.length>0?(f.setTextboxValue(),f.isInputHidden=!0):(f.settings.hidePlaceholder&&f.items.length>0&&ha(f.control_input,{placeholder:""}),f.isInputHidden=!1),f.wrapper.classList.toggle("input-hidden",f.isInputHidden))}inputValue(){return this.control_input.value.trim()}focus(){var f=this;f.isDisabled||f.isReadOnly||(f.ignoreFocus=!0,f.control_input.offsetWidth?f.control_input.focus():f.focus_node.focus(),setTimeout(()=>{f.ignoreFocus=!1,f.onFocus()},0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(f){return this.sifter.getScoreFunction(f,this.getSearchOptions())}getSearchOptions(){var f=this.settings,p=f.sortField;return typeof f.sortField=="string"&&(p=[{field:f.sortField}]),{fields:f.searchField,conjunction:f.searchConjunction,sort:p,nesting:f.nesting}}search(f){var p,C,O=this,$=this.getSearchOptions();if(O.settings.score&&(C=O.settings.score.call(O,f),typeof C!="function"))throw new Error('Tom Select "score" setting must be a function that returns a function');return f!==O.lastQuery?(O.lastQuery=f,p=O.sifter.search(f,Object.assign($,{score:C})),O.currentResults=p):p=Object.assign({},O.currentResults),O.settings.hideSelected&&(p.items=p.items.filter(P=>{let W=Ag(P.id);return!(W&&O.items.indexOf(W)!==-1)})),p}refreshOptions(f=!0){var p,C,O,$,P,W,J,re,me,pe;const Oe={},je=[];var De=this,Je=De.inputValue();const Ye=Je===De.lastQuery||Je==""&&De.lastQuery==null;var en=De.search(Je),ze=null,ee=De.settings.shouldOpen||!1,qe=De.dropdown_content;Ye&&(ze=De.activeOption,ze&&(me=ze.closest("[data-group]"))),$=en.items.length,typeof De.settings.maxOptions=="number"&&($=Math.min($,De.settings.maxOptions)),$>0&&(ee=!0);const Sn=(ae,yt)=>{let Dt=Oe[ae];if(Dt!==void 0){let Te=je[Dt];if(Te!==void 0)return[Dt,Te.fragment]}let Ht=document.createDocumentFragment();return Dt=je.length,je.push({fragment:Ht,order:yt,optgroup:ae}),[Dt,Ht]};for(p=0;p<$;p++){let ae=en.items[p];if(!ae)continue;let yt=ae.id,Dt=De.options[yt];if(Dt===void 0)continue;let Ht=n8(yt),Te=De.getOption(Ht,!0);for(De.settings.hideSelected||Te.classList.toggle("selected",De.items.includes(Ht)),P=Dt[De.settings.optgroupField]||"",W=Array.isArray(P)?P:[P],C=0,O=W&&W.length;C<O;C++){P=W[C];let ue=Dt.$order,Yn=De.optgroups[P];Yn===void 0?P="":ue=Yn.$order;const[Pn,Rt]=Sn(P,ue);C>0&&(Te=Te.cloneNode(!0),ha(Te,{id:Dt.$id+"-clone-"+C,"aria-selected":null}),Te.classList.add("ts-cloned"),By(Te,"active"),De.activeOption&&De.activeOption.dataset.value==yt&&me&&me.dataset.group===P.toString()&&(ze=Te)),Rt.appendChild(Te),P!=""&&(Oe[P]=Pn)}}De.settings.lockOptgroupOrder&&je.sort((ae,yt)=>ae.order-yt.order),J=document.createDocumentFragment(),nl(je,ae=>{let yt=ae.fragment,Dt=ae.optgroup;if(!yt||!yt.children.length)return;let Ht=De.optgroups[Dt];if(Ht!==void 0){let Te=document.createDocumentFragment(),ue=De.render("optgroup_header",Ht);y2(Te,ue),y2(Te,yt);let Yn=De.render("optgroup",{group:Ht,options:Te});y2(J,Yn)}else y2(J,yt)}),qe.innerHTML="",y2(qe,J),De.settings.highlight&&(xte(qe),en.query.length&&en.tokens.length&&nl(en.tokens,ae=>{Ste(qe,ae.regex)}));var At=ae=>{let yt=De.render(ae,{input:Je});return yt&&(ee=!0,qe.insertBefore(yt,qe.firstChild)),yt};if(De.loading?At("loading"):De.settings.shouldLoad.call(De,Je)?en.items.length===0&&At("no_results"):At("not_loading"),re=De.canCreate(Je),re&&(pe=At("option_create")),De.hasOptions=en.items.length>0||re,ee){if(en.items.length>0){if(!ze&&De.settings.mode==="single"&&De.items[0]!=null&&(ze=De.getOption(De.items[0])),!qe.contains(ze)){let ae=0;pe&&!De.settings.addPrecedence&&(ae=1),ze=De.selectable()[ae]}}else pe&&(ze=pe);f&&!De.isOpen&&(De.open(),De.scrollToOption(ze,"auto")),De.setActiveOption(ze)}else De.clearActiveOption(),f&&De.isOpen&&De.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(f,p=!1){const C=this;if(Array.isArray(f))return C.addOptions(f,p),!1;const O=Ag(f[C.settings.valueField]);return O===null||C.options.hasOwnProperty(O)?!1:(f.$order=f.$order||++C.order,f.$id=C.inputId+"-opt-"+f.$order,C.options[O]=f,C.lastQuery=null,p&&(C.userOptions[O]=p,C.trigger("option_add",O,f)),O)}addOptions(f,p=!1){nl(f,C=>{this.addOption(C,p)})}registerOption(f){return this.addOption(f)}registerOptionGroup(f){var p=Ag(f[this.settings.optgroupValueField]);return p===null?!1:(f.$order=f.$order||++this.order,this.optgroups[p]=f,p)}addOptionGroup(f,p){var C;p[this.settings.optgroupValueField]=f,(C=this.registerOptionGroup(p))&&this.trigger("optgroup_add",C,p)}removeOptionGroup(f){this.optgroups.hasOwnProperty(f)&&(delete this.optgroups[f],this.clearCache(),this.trigger("optgroup_remove",f))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(f,p){const C=this;var O,$;const P=Ag(f),W=Ag(p[C.settings.valueField]);if(P===null)return;const J=C.options[P];if(J==null)return;if(typeof W!="string")throw new Error("Value must be set in option data");const re=C.getOption(P),me=C.getItem(P);if(p.$order=p.$order||J.$order,delete C.options[P],C.uncacheValue(W),C.options[W]=p,re){if(C.dropdown_content.contains(re)){const pe=C._render("option",p);CK(re,pe),C.activeOption===re&&C.setActiveOption(pe)}re.remove()}me&&($=C.items.indexOf(P),$!==-1&&C.items.splice($,1,W),O=C._render("item",p),me.classList.contains("active")&&fm(O,"active"),CK(me,O)),C.lastQuery=null}removeOption(f,p){const C=this;f=n8(f),C.uncacheValue(f),delete C.userOptions[f],delete C.options[f],C.lastQuery=null,C.trigger("option_remove",f),C.removeItem(f,p)}clearOptions(f){const p=(f||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();const C={};nl(this.options,(O,$)=>{p(O,$)&&(C[$]=O)}),this.options=this.sifter.items=C,this.lastQuery=null,this.trigger("option_clear")}clearFilter(f,p){return this.items.indexOf(p)>=0}getOption(f,p=!1){const C=Ag(f);if(C===null)return null;const O=this.options[C];if(O!=null){if(O.$div)return O.$div;if(p)return this._render("option",O)}return null}getAdjacent(f,p,C="option"){var O=this,$;if(!f)return null;C=="item"?$=O.controlChildren():$=O.dropdown_content.querySelectorAll("[data-selectable]");for(let P=0;P<$.length;P++)if($[P]==f)return p>0?$[P+1]:$[P-1];return null}getItem(f){if(typeof f=="object")return f;var p=Ag(f);return p!==null?this.control.querySelector(`[data-value="${CX(p)}"]`):null}addItems(f,p){var C=this,O=Array.isArray(f)?f:[f];O=O.filter(P=>C.items.indexOf(P)===-1);const $=O[O.length-1];O.forEach(P=>{C.isPending=P!==$,C.addItem(P,p)})}addItem(f,p){var C=p?[]:["change","dropdown_close"];wX(this,C,()=>{var O,$;const P=this,W=P.settings.mode,J=Ag(f);if(!(J&&P.items.indexOf(J)!==-1&&(W==="single"&&P.close(),W==="single"||!P.settings.duplicates))&&!(J===null||!P.options.hasOwnProperty(J))&&(W==="single"&&P.clear(p),!(W==="multi"&&P.isFull()))){if(O=P._render("item",P.options[J]),P.control.contains(O)&&(O=O.cloneNode(!0)),$=P.isFull(),P.items.splice(P.caretPos,0,J),P.insertAtCaret(O),P.isSetup){if(!P.isPending&&P.settings.hideSelected){let re=P.getOption(J),me=P.getAdjacent(re,1);me&&P.setActiveOption(me)}!P.isPending&&!P.settings.closeAfterSelect&&P.refreshOptions(P.isFocused&&W!=="single"),P.settings.closeAfterSelect!=!1&&P.isFull()?P.close():P.isPending||P.positionDropdown(),P.trigger("item_add",J,O),P.isPending||P.updateOriginalInput({silent:p})}(!P.isPending||!$&&P.isFull())&&(P.inputState(),P.refreshState())}})}removeItem(f=null,p){const C=this;if(f=C.getItem(f),!f)return;var O,$;const P=f.dataset.value;O=xX(f),f.remove(),f.classList.contains("active")&&($=C.activeItems.indexOf(f),C.activeItems.splice($,1),By(f,"active")),C.items.splice(O,1),C.lastQuery=null,!C.settings.persist&&C.userOptions.hasOwnProperty(P)&&C.removeOption(P,p),O<C.caretPos&&C.setCaret(C.caretPos-1),C.updateOriginalInput({silent:p}),C.refreshState(),C.positionDropdown(),C.trigger("item_remove",P,f)}createItem(f=null,p=()=>{}){arguments.length===3&&(p=arguments[2]),typeof p!="function"&&(p=()=>{});var C=this,O=C.caretPos,$;if(f=f||C.inputValue(),!C.canCreate(f))return p(),!1;C.lock();var P=!1,W=J=>{if(C.unlock(),!J||typeof J!="object")return p();var re=Ag(J[C.settings.valueField]);if(typeof re!="string")return p();C.setTextboxValue(),C.addOption(J,!0),C.setCaret(O),C.addItem(re),p(J),P=!0};return typeof C.settings.create=="function"?$=C.settings.create.call(this,f,W):$={[C.settings.labelField]:f,[C.settings.valueField]:f},P||W($),!0}refreshItems(){var f=this;f.lastQuery=null,f.isSetup&&f.addItems(f.items),f.updateOriginalInput(),f.refreshState()}refreshState(){const f=this;f.refreshValidityState();const p=f.isFull(),C=f.isLocked;f.wrapper.classList.toggle("rtl",f.rtl);const O=f.wrapper.classList;O.toggle("focus",f.isFocused),O.toggle("disabled",f.isDisabled),O.toggle("readonly",f.isReadOnly),O.toggle("required",f.isRequired),O.toggle("invalid",!f.isValid),O.toggle("locked",C),O.toggle("full",p),O.toggle("input-active",f.isFocused&&!f.isInputHidden),O.toggle("dropdown-active",f.isOpen),O.toggle("has-options",Cte(f.options)),O.toggle("has-items",f.items.length>0)}refreshValidityState(){var f=this;f.input.validity&&(f.isValid=f.input.validity.valid,f.isInvalid=!f.isValid)}isFull(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems}updateOriginalInput(f={}){const p=this;var C,O;const $=p.input.querySelector('option[value=""]');if(p.is_select_tag){let J=function(re,me,pe){return re||(re=Ip('<option value="'+Jq(me)+'">'+Jq(pe)+"</option>")),re!=$&&p.input.append(re),P.push(re),(re!=$||W>0)&&(re.selected=!0),re};const P=[],W=p.input.querySelectorAll("option:checked").length;p.input.querySelectorAll("option:checked").forEach(re=>{re.selected=!1}),p.items.length==0&&p.settings.mode=="single"?J($,"",""):p.items.forEach(re=>{if(C=p.options[re],O=C[p.settings.labelField]||"",P.includes(C.$option)){const me=p.input.querySelector(`option[value="${CX(re)}"]:not(:checked)`);J(me,re,O)}else C.$option=J(C.$option,re,O)})}else p.input.value=p.getValue();p.isSetup&&(f.silent||p.trigger("change",p.getValue()))}open(){var f=this;f.isLocked||f.isOpen||f.settings.mode==="multi"&&f.isFull()||(f.isOpen=!0,ha(f.focus_node,{"aria-expanded":"true"}),f.refreshState(),j6(f.dropdown,{visibility:"hidden",display:"block"}),f.positionDropdown(),j6(f.dropdown,{visibility:"visible",display:"block"}),f.focus(),f.trigger("dropdown_open",f.dropdown))}close(f=!0){var p=this,C=p.isOpen;f&&(p.setTextboxValue(),p.settings.mode==="single"&&p.items.length&&p.inputState()),p.isOpen=!1,ha(p.focus_node,{"aria-expanded":"false"}),j6(p.dropdown,{display:"none"}),p.settings.hideSelected&&p.clearActiveOption(),p.refreshState(),C&&p.trigger("dropdown_close",p.dropdown)}positionDropdown(){if(this.settings.dropdownParent==="body"){var f=this.control,p=f.getBoundingClientRect(),C=f.offsetHeight+p.top+window.scrollY,O=p.left+window.scrollX;j6(this.dropdown,{width:p.width+"px",top:C+"px",left:O+"px"})}}clear(f){var p=this;if(p.items.length){var C=p.controlChildren();nl(C,O=>{p.removeItem(O,!0)}),p.inputState(),f||p.updateOriginalInput(),p.trigger("clear")}}insertAtCaret(f){const p=this,C=p.caretPos,O=p.control;O.insertBefore(f,O.children[C]||null),p.setCaret(C+1)}deleteSelection(f){var p,C,O,$,P=this;p=f&&f.keyCode===EX?-1:1,C=yte(P.control_input);const W=[];if(P.activeItems.length)$=SX(P.activeItems,p),O=xX($),p>0&&O++,nl(P.activeItems,J=>W.push(J));else if((P.isFocused||P.settings.mode==="single")&&P.items.length){const J=P.controlChildren();let re;p<0&&C.start===0&&C.length===0?re=J[P.caretPos-1]:p>0&&C.start===P.inputValue().length&&(re=J[P.caretPos]),re!==void 0&&W.push(re)}if(!P.shouldDelete(W,f))return!1;for(Ga(f,!0),typeof O<"u"&&P.setCaret(O);W.length;)P.removeItem(W.pop());return P.inputState(),P.positionDropdown(),P.refreshOptions(!1),!0}shouldDelete(f,p){const C=f.map(O=>O.dataset.value);return!(!C.length||typeof this.settings.onDelete=="function"&&this.settings.onDelete(C,p)===!1)}advanceSelection(f,p){var C,O,$=this;$.rtl&&(f*=-1),!$.inputValue().length&&(v2(G6,p)||v2("shiftKey",p)?(C=$.getLastActive(f),C?C.classList.contains("active")?O=$.getAdjacent(C,f,"item"):O=C:f>0?O=$.control_input.nextElementSibling:O=$.control_input.previousElementSibling,O&&(O.classList.contains("active")&&$.removeActiveItem(C),$.setActiveItemClass(O))):$.moveCaret(f))}moveCaret(f){}getLastActive(f){let p=this.control.querySelector(".last-active");if(p)return p;var C=this.control.querySelectorAll(".active");if(C)return SX(C,f)}setCaret(f){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.setLocked(!0)}unlock(){this.setLocked(!1)}setLocked(f=this.isReadOnly||this.isDisabled){this.isLocked=f,this.refreshState()}disable(){this.setDisabled(!0),this.close()}enable(){this.setDisabled(!1)}setDisabled(f){this.focus_node.tabIndex=f?-1:this.tabIndex,this.isDisabled=f,this.input.disabled=f,this.control_input.disabled=f,this.setLocked()}setReadOnly(f){this.isReadOnly=f,this.input.readOnly=f,this.control_input.readOnly=f,this.setLocked()}destroy(){var f=this,p=f.revertSettings;f.trigger("destroy"),f.off(),f.wrapper.remove(),f.dropdown.remove(),f.input.innerHTML=p.innerHTML,f.input.tabIndex=p.tabIndex,By(f.input,"tomselected","ts-hidden-accessible"),f._destroy(),delete f.input.tomselect}render(f,p){var C,O;const $=this;if(typeof this.settings.render[f]!="function"||(O=$.settings.render[f].call(this,p,Jq),!O))return null;if(O=Ip(O),f==="option"||f==="option_create"?p[$.settings.disabledField]?ha(O,{"aria-disabled":"true"}):ha(O,{"data-selectable":""}):f==="optgroup"&&(C=p.group[$.settings.optgroupValueField],ha(O,{"data-group":C}),p.group[$.settings.disabledField]&&ha(O,{"data-disabled":""})),f==="option"||f==="item"){const P=n8(p[$.settings.valueField]);ha(O,{"data-value":P}),f==="item"?(fm(O,$.settings.itemClass),ha(O,{"data-ts-item":""})):(fm(O,$.settings.optionClass),ha(O,{role:"option",id:p.$id}),p.$div=O,$.options[P]=p)}return O}_render(f,p){const C=this.render(f,p);if(C==null)throw"HTMLElement expected";return C}clearCache(){nl(this.options,f=>{f.$div&&(f.$div.remove(),delete f.$div)})}uncacheValue(f){const p=this.getOption(f);p&&p.remove()}canCreate(f){return this.settings.create&&f.length>0&&this.settings.createFilter.call(this,f)}hook(f,p,C){var O=this,$=O[p];O[p]=function(){var P,W;return f==="after"&&(P=$.apply(O,arguments)),W=C.apply(O,arguments),f==="instead"?W:(f==="before"&&(P=$.apply(O,arguments)),P)}}}const Nte=(w,f,p,C)=>{w.addEventListener(f,p,C)};function Pte(){Nte(this.input,"change",()=>{this.sync()})}const Bte=w=>typeof w>"u"||w===null?null:$te(w),$te=w=>typeof w=="boolean"?w?"1":"0":w+"",AX=(w,f=!1)=>{w&&(w.preventDefault(),f&&w.stopPropagation())},Ite=w=>{if(w.jquery)return w[0];if(w instanceof HTMLElement)return w;if(Fte(w)){var f=document.createElement("template");return f.innerHTML=w.trim(),f.content.firstChild}return document.querySelector(w)},Fte=w=>typeof w=="string"&&w.indexOf("<")>-1;function Lte(w){var f=this,p=f.onOptionSelect;f.settings.hideSelected=!1;const C=Object.assign({className:"tomselect-checkbox",checkedClassNames:void 0,uncheckedClassNames:void 0},w);var O=function(W,J){J?(W.checked=!0,C.uncheckedClassNames&&W.classList.remove(...C.uncheckedClassNames),C.checkedClassNames&&W.classList.add(...C.checkedClassNames)):(W.checked=!1,C.checkedClassNames&&W.classList.remove(...C.checkedClassNames),C.uncheckedClassNames&&W.classList.add(...C.uncheckedClassNames))},$=function(W){setTimeout(()=>{var J=W.querySelector("input."+C.className);J instanceof HTMLInputElement&&O(J,W.classList.contains("selected"))},1)};f.hook("after","setupTemplates",()=>{var P=f.settings.render.option;f.settings.render.option=(W,J)=>{var re=Ite(P.call(f,W,J)),me=document.createElement("input");C.className&&me.classList.add(C.className),me.addEventListener("click",function(Oe){AX(Oe)}),me.type="checkbox";const pe=Bte(W[f.settings.valueField]);return O(me,!!(pe&&f.items.indexOf(pe)>-1)),re.prepend(me),re}}),f.on("item_remove",P=>{var W=f.getOption(P);W&&(W.classList.remove("selected"),$(W))}),f.on("item_add",P=>{var W=f.getOption(P);W&&$(W)}),f.hook("instead","onOptionSelect",(P,W)=>{if(W.classList.contains("selected")){W.classList.remove("selected"),f.removeItem(W.dataset.value),f.refreshOptions(),AX(P,!0);return}p.call(f,P,W),$(W)})}const Hte=w=>{if(w.jquery)return w[0];if(w instanceof HTMLElement)return w;if(zte(w)){var f=document.createElement("template");return f.innerHTML=w.trim(),f.content.firstChild}return document.querySelector(w)},zte=w=>typeof w=="string"&&w.indexOf("<")>-1;function Vte(w){const f=this,p=Object.assign({className:"clear-button",title:"Clear All",html:C=>`<div class="${C.className}" title="${C.title}">&#10799;</div>`},w);f.on("initialize",()=>{var C=Hte(p.html(p));C.addEventListener("click",O=>{f.isLocked||(f.clear(),f.settings.mode==="single"&&f.settings.allowEmptyOption&&f.addItem(""),O.preventDefault(),O.stopPropagation())}),f.control.appendChild(C)})}const Ute=(w,f=!1)=>{w&&(w.preventDefault(),f&&w.stopPropagation())},Ek=(w,f,p,C)=>{w.addEventListener(f,p,C)},Wte=(w,f)=>{if(Array.isArray(w))w.forEach(f);else for(var p in w)w.hasOwnProperty(p)&&f(w[p],p)},Zte=w=>{if(w.jquery)return w[0];if(w instanceof HTMLElement)return w;if(jte(w)){var f=document.createElement("template");return f.innerHTML=w.trim(),f.content.firstChild}return document.querySelector(w)},jte=w=>typeof w=="string"&&w.indexOf("<")>-1,Gte=(w,f)=>{Wte(f,(p,C)=>{p==null?w.removeAttribute(C):w.setAttribute(C,""+p)})},qte=(w,f)=>{var p;(p=w.parentNode)==null||p.insertBefore(f,w.nextSibling)},Kte=(w,f)=>{var p;(p=w.parentNode)==null||p.insertBefore(f,w)},Yte=(w,f)=>{do{var p;if(f=(p=f)==null?void 0:p.previousElementSibling,w==f)return!0}while(f&&f.previousElementSibling);return!1};function Xte(){var w=this;if(w.settings.mode!=="multi")return;var f=w.lock,p=w.unlock;let C=!0,O;w.hook("after","setupTemplates",()=>{var $=w.settings.render.item;w.settings.render.item=(P,W)=>{const J=Zte($.call(w,P,W));Gte(J,{draggable:"true"});const re=Je=>{C||Ute(Je),Je.stopPropagation()},me=Je=>{O=J,setTimeout(()=>{J.classList.add("ts-dragging")},0)},pe=Je=>{Je.preventDefault(),J.classList.add("ts-drag-over"),je(J,O)},Oe=()=>{J.classList.remove("ts-drag-over")},je=(Je,Ye)=>{Ye!==void 0&&(Yte(Ye,J)?qte(Je,Ye):Kte(Je,Ye))},De=()=>{var Je;document.querySelectorAll(".ts-drag-over").forEach(en=>en.classList.remove("ts-drag-over")),(Je=O)==null||Je.classList.remove("ts-dragging"),O=void 0;var Ye=[];w.control.querySelectorAll("[data-value]").forEach(en=>{if(en.dataset.value){let ze=en.dataset.value;ze&&Ye.push(ze)}}),w.setValue(Ye)};return Ek(J,"mousedown",re),Ek(J,"dragstart",me),Ek(J,"dragenter",pe),Ek(J,"dragover",pe),Ek(J,"dragleave",Oe),Ek(J,"dragend",De),J}}),w.hook("instead","lock",()=>(C=!1,f.call(w))),w.hook("instead","unlock",()=>(C=!0,p.call(w)))}const Jte=(w,f=!1)=>{w&&(w.preventDefault(),f&&w.stopPropagation())},Qte=w=>{if(w.jquery)return w[0];if(w instanceof HTMLElement)return w;if(ene(w)){var f=document.createElement("template");return f.innerHTML=w.trim(),f.content.firstChild}return document.querySelector(w)},ene=w=>typeof w=="string"&&w.indexOf("<")>-1;function tne(w){const f=this,p=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:C=>'<div class="'+C.headerClass+'"><div class="'+C.titleRowClass+'"><span class="'+C.labelClass+'">'+C.title+'</span><a class="'+C.closeClass+'">&times;</a></div></div>'},w);f.on("initialize",()=>{var C=Qte(p.html(p)),O=C.querySelector("."+p.closeClass);O&&O.addEventListener("click",$=>{Jte($,!0),f.close()}),f.dropdown.insertBefore(C,f.dropdown.firstChild)})}const nne=(w,f)=>{if(Array.isArray(w))w.forEach(f);else for(var p in w)w.hasOwnProperty(p)&&f(w[p],p)},one=(w,...f)=>{var p=sne(f);w=rne(w),w.map(C=>{p.map(O=>{C.classList.remove(O)})})},sne=w=>{var f=[];return nne(w,p=>{typeof p=="string"&&(p=p.trim().split(/[\t\n\f\r\s]/)),Array.isArray(p)&&(f=f.concat(p))}),f.filter(Boolean)},rne=w=>(Array.isArray(w)||(w=[w]),w),ane=(w,f)=>{if(!w)return-1;f=f||w.nodeName;for(var p=0;w=w.previousElementSibling;)w.matches(f)&&p++;return p};function ine(){var w=this;w.hook("instead","setCaret",f=>{w.settings.mode==="single"||!w.control.contains(w.control_input)?f=w.items.length:(f=Math.max(0,Math.min(w.items.length,f)),f!=w.caretPos&&!w.isPending&&w.controlChildren().forEach((p,C)=>{C<f?w.control_input.insertAdjacentElement("beforebegin",p):w.control.appendChild(p)})),w.caretPos=f}),w.hook("instead","moveCaret",f=>{if(!w.isFocused)return;const p=w.getLastActive(f);if(p){const C=ane(p);w.setCaret(f>0?C+1:C),w.setActiveItem(),one(p,"last-active")}else w.setCaret(w.caretPos+f)})}const cne=27,lne=9,une=(w,f=!1)=>{w&&(w.preventDefault(),f&&w.stopPropagation())},dne=(w,f,p,C)=>{w.addEventListener(f,p,C)},mne=(w,f)=>{if(Array.isArray(w))w.forEach(f);else for(var p in w)w.hasOwnProperty(p)&&f(w[p],p)},DX=w=>{if(w.jquery)return w[0];if(w instanceof HTMLElement)return w;if(fne(w)){var f=document.createElement("template");return f.innerHTML=w.trim(),f.content.firstChild}return document.querySelector(w)},fne=w=>typeof w=="string"&&w.indexOf("<")>-1,gne=(w,...f)=>{var p=hne(f);w=pne(w),w.map(C=>{p.map(O=>{C.classList.add(O)})})},hne=w=>{var f=[];return mne(w,p=>{typeof p=="string"&&(p=p.trim().split(/[\t\n\f\r\s]/)),Array.isArray(p)&&(f=f.concat(p))}),f.filter(Boolean)},pne=w=>(Array.isArray(w)||(w=[w]),w);function bne(){const w=this;w.settings.shouldOpen=!0,w.hook("before","setup",()=>{w.focus_node=w.control,gne(w.control_input,"dropdown-input");const f=DX('<div class="dropdown-input-wrap">');f.append(w.control_input),w.dropdown.insertBefore(f,w.dropdown.firstChild);const p=DX('<input class="items-placeholder" tabindex="-1" />');p.placeholder=w.settings.placeholder||"",w.control.append(p)}),w.on("initialize",()=>{w.control_input.addEventListener("keydown",p=>{switch(p.keyCode){case cne:w.isOpen&&(une(p,!0),w.close()),w.clearActiveItems();return;case lne:w.focus_node.tabIndex=-1;break}return w.onKeyDown.call(w,p)}),w.on("blur",()=>{w.focus_node.tabIndex=w.isDisabled?-1:w.tabIndex}),w.on("dropdown_open",()=>{w.control_input.focus()});const f=w.onBlur;w.hook("instead","onBlur",p=>{if(!(p&&p.relatedTarget==w.control_input))return f.call(w)}),dne(w.control_input,"blur",()=>w.onBlur()),w.hook("before","close",()=>{w.isOpen&&w.focus_node.focus({preventScroll:!0})})})}const q6=(w,f,p,C)=>{w.addEventListener(f,p,C)};function vne(){var w=this;w.on("initialize",()=>{var f=document.createElement("span"),p=w.control_input;f.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",w.wrapper.appendChild(f);var C=["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"];for(const $ of C)f.style[$]=p.style[$];var O=()=>{f.textContent=p.value,p.style.width=f.clientWidth+"px"};O(),w.on("update item_add item_remove",O),q6(p,"input",O),q6(p,"keyup",O),q6(p,"blur",O),q6(p,"update",O)})}function yne(){var w=this,f=w.deleteSelection;this.hook("instead","deleteSelection",p=>w.activeItems.length?f.call(w,p):!1)}function wne(){this.hook("instead","setActiveItem",()=>{}),this.hook("instead","selectAll",()=>{})}const RX=37,Cne=39,Sne=(w,f,p)=>{for(;w&&w.matches;){if(w.matches(f))return w;w=w.parentNode}},xne=(w,f)=>{if(!w)return-1;f=f||w.nodeName;for(var p=0;w=w.previousElementSibling;)w.matches(f)&&p++;return p};function Ene(){var w=this,f=w.onKeyDown;w.hook("instead","onKeyDown",p=>{var C,O,$,P;if(!w.isOpen||!(p.keyCode===RX||p.keyCode===Cne))return f.call(w,p);w.ignoreHover=!0,P=Sne(w.activeOption,"[data-group]"),C=xne(w.activeOption,"[data-selectable]"),P&&(p.keyCode===RX?P=P.previousSibling:P=P.nextSibling,P&&($=P.querySelectorAll("[data-selectable]"),O=$[Math.min($.length-1,C)],O&&w.setActiveOption(O)))})}const Tne=w=>(w+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),MX=(w,f=!1)=>{w&&(w.preventDefault(),f&&w.stopPropagation())},NX=(w,f,p,C)=>{w.addEventListener(f,p,C)},PX=w=>{if(w.jquery)return w[0];if(w instanceof HTMLElement)return w;if(_ne(w)){var f=document.createElement("template");return f.innerHTML=w.trim(),f.content.firstChild}return document.querySelector(w)},_ne=w=>typeof w=="string"&&w.indexOf("<")>-1;function kne(w){const f=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},w);var p=this;if(f.append){var C='<a href="javascript:void(0)" class="'+f.className+'" tabindex="-1" title="'+Tne(f.title)+'">'+f.label+"</a>";p.hook("after","setupTemplates",()=>{var O=p.settings.render.item;p.settings.render.item=($,P)=>{var W=PX(O.call(p,$,P)),J=PX(C);return W.appendChild(J),NX(J,"mousedown",re=>{MX(re,!0)}),NX(J,"click",re=>{p.isLocked||(MX(re,!0),!p.isLocked&&p.shouldDelete([W],re)&&(p.removeItem(W),p.refreshOptions(!1),p.inputState()))}),W}})}}function One(w){const f=this,p=Object.assign({text:C=>C[f.settings.labelField]},w);f.on("item_remove",function(C){if(f.isFocused&&f.control_input.value.trim()===""){var O=f.options[C];O&&f.setTextboxValue(p.text.call(f,O))}})}const Ane=(w,f)=>{if(Array.isArray(w))w.forEach(f);else for(var p in w)w.hasOwnProperty(p)&&f(w[p],p)},Dne=(w,...f)=>{var p=Rne(f);w=Mne(w),w.map(C=>{p.map(O=>{C.classList.add(O)})})},Rne=w=>{var f=[];return Ane(w,p=>{typeof p=="string"&&(p=p.trim().split(/[\t\n\f\r\s]/)),Array.isArray(p)&&(f=f.concat(p))}),f.filter(Boolean)},Mne=w=>(Array.isArray(w)||(w=[w]),w);function Nne(){const w=this,f=w.canLoad,p=w.clearActiveOption,C=w.loadCallback;var O={},$,P=!1,W,J=[];if(w.settings.shouldLoadMore||(w.settings.shouldLoadMore=()=>{if($.clientHeight/($.scrollHeight-$.scrollTop)>.9)return!0;if(w.activeOption){var Oe=w.selectable(),je=Array.from(Oe).indexOf(w.activeOption);if(je>=Oe.length-2)return!0}return!1}),!w.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";w.settings.sortField=[{field:"$order"},{field:"$score"}];const re=pe=>typeof w.settings.maxOptions=="number"&&$.children.length>=w.settings.maxOptions?!1:!!(pe in O&&O[pe]),me=(pe,Oe)=>w.items.indexOf(Oe)>=0||J.indexOf(Oe)>=0;w.setNextUrl=(pe,Oe)=>{O[pe]=Oe},w.getUrl=pe=>{if(pe in O){const Oe=O[pe];return O[pe]=!1,Oe}return w.clearPagination(),w.settings.firstUrl.call(w,pe)},w.clearPagination=()=>{O={}},w.hook("instead","clearActiveOption",()=>{if(!P)return p.call(w)}),w.hook("instead","canLoad",pe=>pe in O?re(pe):f.call(w,pe)),w.hook("instead","loadCallback",(pe,Oe)=>{if(!P)w.clearOptions(me);else if(W){const je=pe[0];je!==void 0&&(W.dataset.value=je[w.settings.valueField])}C.call(w,pe,Oe),P=!1}),w.hook("after","refreshOptions",()=>{const pe=w.lastValue;var Oe;re(pe)?(Oe=w.render("loading_more",{query:pe}),Oe&&(Oe.setAttribute("data-selectable",""),W=Oe)):pe in O&&!$.querySelector(".no-results")&&(Oe=w.render("no_more_results",{query:pe})),Oe&&(Dne(Oe,w.settings.optionClass),$.append(Oe))}),w.on("initialize",()=>{J=Object.keys(w.options),$=w.dropdown_content,w.settings.render=Object.assign({},{loading_more:()=>'<div class="loading-more-results">Loading more results ... </div>',no_more_results:()=>'<div class="no-more-results">No more results</div>'},w.settings.render),$.addEventListener("scroll",()=>{w.settings.shouldLoadMore.call(w)&&re(w.lastValue)&&(P||(P=!0,w.load.call(w,w.lastValue)))})})}xu.define("change_listener",Pte);xu.define("checkbox_options",Lte);xu.define("clear_button",Vte);xu.define("drag_drop",Xte);xu.define("dropdown_header",tne);xu.define("caret_position",ine);xu.define("dropdown_input",bne);xu.define("input_autogrow",vne);xu.define("no_backspace_delete",yne);xu.define("no_active_items",wne);xu.define("optgroup_columns",Ene);xu.define("remove_button",kne);xu.define("restore_on_backspace",One);xu.define("virtual_scroll",Nne);/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function BX(w,f){var p=Object.keys(w);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(w);f&&(C=C.filter(function(O){return Object.getOwnPropertyDescriptor(w,O).enumerable})),p.push.apply(p,C)}return p}function Vp(w){for(var f=1;f<arguments.length;f++){var p=arguments[f]!=null?arguments[f]:{};f%2?BX(Object(p),!0).forEach(function(C){Pne(w,C,p[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(p)):BX(Object(p)).forEach(function(C){Object.defineProperty(w,C,Object.getOwnPropertyDescriptor(p,C))})}return w}function o8(w){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o8=function(f){return typeof f}:o8=function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},o8(w)}function Pne(w,f,p){return f in w?Object.defineProperty(w,f,{value:p,enumerable:!0,configurable:!0,writable:!0}):w[f]=p,w}function Xb(){return Xb=Object.assign||function(w){for(var f=1;f<arguments.length;f++){var p=arguments[f];for(var C in p)Object.prototype.hasOwnProperty.call(p,C)&&(w[C]=p[C])}return w},Xb.apply(this,arguments)}function Bne(w,f){if(w==null)return{};var p={},C=Object.keys(w),O,$;for($=0;$<C.length;$++)O=C[$],!(f.indexOf(O)>=0)&&(p[O]=w[O]);return p}function $ne(w,f){if(w==null)return{};var p=Bne(w,f),C,O;if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(w);for(O=0;O<$.length;O++)C=$[O],!(f.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(w,C)&&(p[C]=w[C])}return p}var Ine="1.15.6";function Yb(w){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(w)}var Jb=Yb(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),FM=Yb(/Edge/i),$X=Yb(/firefox/i),EM=Yb(/safari/i)&&!Yb(/chrome/i)&&!Yb(/android/i),DK=Yb(/iP(ad|od|hone)/i),vJ=Yb(/chrome/i)&&Yb(/android/i),yJ={capture:!1,passive:!1};function bs(w,f,p){w.addEventListener(f,p,!Jb&&yJ)}function ls(w,f,p){w.removeEventListener(f,p,!Jb&&yJ)}function m8(w,f){if(f){if(f[0]===">"&&(f=f.substring(1)),w)try{if(w.matches)return w.matches(f);if(w.msMatchesSelector)return w.msMatchesSelector(f);if(w.webkitMatchesSelector)return w.webkitMatchesSelector(f)}catch{return!1}return!1}}function wJ(w){return w.host&&w!==document&&w.host.nodeType?w.host:w.parentNode}function Ng(w,f,p,C){if(w){p=p||document;do{if(f!=null&&(f[0]===">"?w.parentNode===p&&m8(w,f):m8(w,f))||C&&w===p)return w;if(w===p)break}while(w=wJ(w))}return null}var IX=/\s+/g;function gm(w,f,p){if(w&&f)if(w.classList)w.classList[p?"add":"remove"](f);else{var C=(" "+w.className+" ").replace(IX," ").replace(" "+f+" "," ");w.className=(C+(p?" "+f:"")).replace(IX," ")}}function co(w,f,p){var C=w&&w.style;if(C){if(p===void 0)return document.defaultView&&document.defaultView.getComputedStyle?p=document.defaultView.getComputedStyle(w,""):w.currentStyle&&(p=w.currentStyle),f===void 0?p:p[f];!(f in C)&&f.indexOf("webkit")===-1&&(f="-webkit-"+f),C[f]=p+(typeof p=="string"?"":"px")}}function Ak(w,f){var p="";if(typeof w=="string")p=w;else do{var C=co(w,"transform");C&&C!=="none"&&(p=C+" "+p)}while(!f&&(w=w.parentNode));var O=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return O&&new O(p)}function CJ(w,f,p){if(w){var C=w.getElementsByTagName(f),O=0,$=C.length;if(p)for(;O<$;O++)p(C[O],O);return C}return[]}function zp(){var w=document.scrollingElement;return w||document.documentElement}function Ni(w,f,p,C,O){if(!(!w.getBoundingClientRect&&w!==window)){var $,P,W,J,re,me,pe;if(w!==window&&w.parentNode&&w!==zp()?($=w.getBoundingClientRect(),P=$.top,W=$.left,J=$.bottom,re=$.right,me=$.height,pe=$.width):(P=0,W=0,J=window.innerHeight,re=window.innerWidth,me=window.innerHeight,pe=window.innerWidth),(f||p)&&w!==window&&(O=O||w.parentNode,!Jb))do if(O&&O.getBoundingClientRect&&(co(O,"transform")!=="none"||p&&co(O,"position")!=="static")){var Oe=O.getBoundingClientRect();P-=Oe.top+parseInt(co(O,"border-top-width")),W-=Oe.left+parseInt(co(O,"border-left-width")),J=P+$.height,re=W+$.width;break}while(O=O.parentNode);if(C&&w!==window){var je=Ak(O||w),De=je&&je.a,Je=je&&je.d;je&&(P/=Je,W/=De,pe/=De,me/=Je,J=P+me,re=W+pe)}return{top:P,left:W,bottom:J,right:re,width:pe,height:me}}}function FX(w,f,p){for(var C=Ly(w,!0),O=Ni(w)[f];C;){var $=Ni(C)[p],P=void 0;if(P=O>=$,!P)return C;if(C===zp())break;C=Ly(C,!1)}return!1}function Lk(w,f,p,C){for(var O=0,$=0,P=w.children;$<P.length;){if(P[$].style.display!=="none"&&P[$]!==lo.ghost&&(C||P[$]!==lo.dragged)&&Ng(P[$],p.draggable,w,!1)){if(O===f)return P[$];O++}$++}return null}function RK(w,f){for(var p=w.lastElementChild;p&&(p===lo.ghost||co(p,"display")==="none"||f&&!m8(p,f));)p=p.previousElementSibling;return p||null}function wf(w,f){var p=0;if(!w||!w.parentNode)return-1;for(;w=w.previousElementSibling;)w.nodeName.toUpperCase()!=="TEMPLATE"&&w!==lo.clone&&(!f||m8(w,f))&&p++;return p}function LX(w){var f=0,p=0,C=zp();if(w)do{var O=Ak(w),$=O.a,P=O.d;f+=w.scrollLeft*$,p+=w.scrollTop*P}while(w!==C&&(w=w.parentNode));return[f,p]}function Fne(w,f){for(var p in w)if(w.hasOwnProperty(p)){for(var C in f)if(f.hasOwnProperty(C)&&f[C]===w[p][C])return Number(p)}return-1}function Ly(w,f){if(!w||!w.getBoundingClientRect)return zp();var p=w,C=!1;do if(p.clientWidth<p.scrollWidth||p.clientHeight<p.scrollHeight){var O=co(p);if(p.clientWidth<p.scrollWidth&&(O.overflowX=="auto"||O.overflowX=="scroll")||p.clientHeight<p.scrollHeight&&(O.overflowY=="auto"||O.overflowY=="scroll")){if(!p.getBoundingClientRect||p===document.body)return zp();if(C||f)return p;C=!0}}while(p=p.parentNode);return zp()}function Lne(w,f){if(w&&f)for(var p in f)f.hasOwnProperty(p)&&(w[p]=f[p]);return w}function nK(w,f){return Math.round(w.top)===Math.round(f.top)&&Math.round(w.left)===Math.round(f.left)&&Math.round(w.height)===Math.round(f.height)&&Math.round(w.width)===Math.round(f.width)}var TM;function SJ(w,f){return function(){if(!TM){var p=arguments,C=this;p.length===1?w.call(C,p[0]):w.apply(C,p),TM=setTimeout(function(){TM=void 0},f)}}}function Hne(){clearTimeout(TM),TM=void 0}function xJ(w,f,p){w.scrollLeft+=f,w.scrollTop+=p}function EJ(w){var f=window.Polymer,p=window.jQuery||window.Zepto;return f&&f.dom?f.dom(w).cloneNode(!0):p?p(w).clone(!0)[0]:w.cloneNode(!0)}function TJ(w,f,p){var C={};return Array.from(w.children).forEach(function(O){var $,P,W,J;if(!(!Ng(O,f.draggable,w,!1)||O.animated||O===p)){var re=Ni(O);C.left=Math.min(($=C.left)!==null&&$!==void 0?$:1/0,re.left),C.top=Math.min((P=C.top)!==null&&P!==void 0?P:1/0,re.top),C.right=Math.max((W=C.right)!==null&&W!==void 0?W:-1/0,re.right),C.bottom=Math.max((J=C.bottom)!==null&&J!==void 0?J:-1/0,re.bottom)}}),C.width=C.right-C.left,C.height=C.bottom-C.top,C.x=C.left,C.y=C.top,C}var yd="Sortable"+new Date().getTime();function zne(){var w=[],f;return{captureAnimationState:function(){if(w=[],!!this.options.animation){var C=[].slice.call(this.el.children);C.forEach(function(O){if(!(co(O,"display")==="none"||O===lo.ghost)){w.push({target:O,rect:Ni(O)});var $=Vp({},w[w.length-1].rect);if(O.thisAnimationDuration){var P=Ak(O,!0);P&&($.top-=P.f,$.left-=P.e)}O.fromRect=$}})}},addAnimationState:function(C){w.push(C)},removeAnimationState:function(C){w.splice(Fne(w,{target:C}),1)},animateAll:function(C){var O=this;if(!this.options.animation){clearTimeout(f),typeof C=="function"&&C();return}var $=!1,P=0;w.forEach(function(W){var J=0,re=W.target,me=re.fromRect,pe=Ni(re),Oe=re.prevFromRect,je=re.prevToRect,De=W.rect,Je=Ak(re,!0);Je&&(pe.top-=Je.f,pe.left-=Je.e),re.toRect=pe,re.thisAnimationDuration&&nK(Oe,pe)&&!nK(me,pe)&&(De.top-pe.top)/(De.left-pe.left)===(me.top-pe.top)/(me.left-pe.left)&&(J=Une(De,Oe,je,O.options)),nK(pe,me)||(re.prevFromRect=me,re.prevToRect=pe,J||(J=O.options.animation),O.animate(re,De,pe,J)),J&&($=!0,P=Math.max(P,J),clearTimeout(re.animationResetTimer),re.animationResetTimer=setTimeout(function(){re.animationTime=0,re.prevFromRect=null,re.fromRect=null,re.prevToRect=null,re.thisAnimationDuration=null},J),re.thisAnimationDuration=J)}),clearTimeout(f),$?f=setTimeout(function(){typeof C=="function"&&C()},P):typeof C=="function"&&C(),w=[]},animate:function(C,O,$,P){if(P){co(C,"transition",""),co(C,"transform","");var W=Ak(this.el),J=W&&W.a,re=W&&W.d,me=(O.left-$.left)/(J||1),pe=(O.top-$.top)/(re||1);C.animatingX=!!me,C.animatingY=!!pe,co(C,"transform","translate3d("+me+"px,"+pe+"px,0)"),this.forRepaintDummy=Vne(C),co(C,"transition","transform "+P+"ms"+(this.options.easing?" "+this.options.easing:"")),co(C,"transform","translate3d(0,0,0)"),typeof C.animated=="number"&&clearTimeout(C.animated),C.animated=setTimeout(function(){co(C,"transition",""),co(C,"transform",""),C.animated=!1,C.animatingX=!1,C.animatingY=!1},P)}}}}function Vne(w){return w.offsetWidth}function Une(w,f,p,C){return Math.sqrt(Math.pow(f.top-w.top,2)+Math.pow(f.left-w.left,2))/Math.sqrt(Math.pow(f.top-p.top,2)+Math.pow(f.left-p.left,2))*C.animation}var Tk=[],oK={initializeByDefault:!0},LM={mount:function(f){for(var p in oK)oK.hasOwnProperty(p)&&!(p in f)&&(f[p]=oK[p]);Tk.forEach(function(C){if(C.pluginName===f.pluginName)throw"Sortable: Cannot mount plugin ".concat(f.pluginName," more than once")}),Tk.push(f)},pluginEvent:function(f,p,C){var O=this;this.eventCanceled=!1,C.cancel=function(){O.eventCanceled=!0};var $=f+"Global";Tk.forEach(function(P){p[P.pluginName]&&(p[P.pluginName][$]&&p[P.pluginName][$](Vp({sortable:p},C)),p.options[P.pluginName]&&p[P.pluginName][f]&&p[P.pluginName][f](Vp({sortable:p},C)))})},initializePlugins:function(f,p,C,O){Tk.forEach(function(W){var J=W.pluginName;if(!(!f.options[J]&&!W.initializeByDefault)){var re=new W(f,p,f.options);re.sortable=f,re.options=f.options,f[J]=re,Xb(C,re.defaults)}});for(var $ in f.options)if(f.options.hasOwnProperty($)){var P=this.modifyOption(f,$,f.options[$]);typeof P<"u"&&(f.options[$]=P)}},getEventProperties:function(f,p){var C={};return Tk.forEach(function(O){typeof O.eventProperties=="function"&&Xb(C,O.eventProperties.call(p[O.pluginName],f))}),C},modifyOption:function(f,p,C){var O;return Tk.forEach(function($){f[$.pluginName]&&$.optionListeners&&typeof $.optionListeners[p]=="function"&&(O=$.optionListeners[p].call(f[$.pluginName],C))}),O}};function Wne(w){var f=w.sortable,p=w.rootEl,C=w.name,O=w.targetEl,$=w.cloneEl,P=w.toEl,W=w.fromEl,J=w.oldIndex,re=w.newIndex,me=w.oldDraggableIndex,pe=w.newDraggableIndex,Oe=w.originalEvent,je=w.putSortable,De=w.extraEventProperties;if(f=f||p&&p[yd],!!f){var Je,Ye=f.options,en="on"+C.charAt(0).toUpperCase()+C.substr(1);window.CustomEvent&&!Jb&&!FM?Je=new CustomEvent(C,{bubbles:!0,cancelable:!0}):(Je=document.createEvent("Event"),Je.initEvent(C,!0,!0)),Je.to=P||p,Je.from=W||p,Je.item=O||p,Je.clone=$,Je.oldIndex=J,Je.newIndex=re,Je.oldDraggableIndex=me,Je.newDraggableIndex=pe,Je.originalEvent=Oe,Je.pullMode=je?je.lastPutMode:void 0;var ze=Vp(Vp({},De),LM.getEventProperties(C,f));for(var ee in ze)Je[ee]=ze[ee];p&&p.dispatchEvent(Je),Ye[en]&&Ye[en].call(f,Je)}}var Zne=["evt"],vd=function(f,p){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},O=C.evt,$=$ne(C,Zne);LM.pluginEvent.bind(lo)(f,p,Vp({dragEl:Xt,parentEl:qa,ghostEl:Co,rootEl:pa,nextEl:x2,lastDownEl:s8,cloneEl:Ra,cloneHidden:Iy,dragStarted:CM,putSortable:tl,activeSortable:lo.active,originalEvent:O,oldIndex:Ok,oldDraggableIndex:_M,newIndex:hm,newDraggableIndex:$y,hideGhostForTarget:AJ,unhideGhostForTarget:DJ,cloneNowHidden:function(){Iy=!0},cloneNowShown:function(){Iy=!1},dispatchSortableEvent:function(W){Su({sortable:p,name:W,originalEvent:O})}},$))};function Su(w){Wne(Vp({putSortable:tl,cloneEl:Ra,targetEl:Xt,rootEl:pa,oldIndex:Ok,oldDraggableIndex:_M,newIndex:hm,newDraggableIndex:$y},w))}var Xt,qa,Co,pa,x2,s8,Ra,Iy,Ok,hm,_M,$y,K6,tl,kk=!1,f8=!1,g8=[],w2,Og,sK,rK,HX,zX,CM,_k,kM,OM=!1,Y6=!1,r8,Pl,aK=[],SK=!1,h8=[],S8=typeof document<"u",X6=DK,VX=FM||Jb?"cssFloat":"float",jne=S8&&!vJ&&!DK&&"draggable"in document.createElement("div"),_J=function(){if(S8){if(Jb)return!1;var w=document.createElement("x");return w.style.cssText="pointer-events:auto",w.style.pointerEvents==="auto"}}(),kJ=function(f,p){var C=co(f),O=parseInt(C.width)-parseInt(C.paddingLeft)-parseInt(C.paddingRight)-parseInt(C.borderLeftWidth)-parseInt(C.borderRightWidth),$=Lk(f,0,p),P=Lk(f,1,p),W=$&&co($),J=P&&co(P),re=W&&parseInt(W.marginLeft)+parseInt(W.marginRight)+Ni($).width,me=J&&parseInt(J.marginLeft)+parseInt(J.marginRight)+Ni(P).width;if(C.display==="flex")return C.flexDirection==="column"||C.flexDirection==="column-reverse"?"vertical":"horizontal";if(C.display==="grid")return C.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if($&&W.float&&W.float!=="none"){var pe=W.float==="left"?"left":"right";return P&&(J.clear==="both"||J.clear===pe)?"vertical":"horizontal"}return $&&(W.display==="block"||W.display==="flex"||W.display==="table"||W.display==="grid"||re>=O&&C[VX]==="none"||P&&C[VX]==="none"&&re+me>O)?"vertical":"horizontal"},Gne=function(f,p,C){var O=C?f.left:f.top,$=C?f.right:f.bottom,P=C?f.width:f.height,W=C?p.left:p.top,J=C?p.right:p.bottom,re=C?p.width:p.height;return O===W||$===J||O+P/2===W+re/2},qne=function(f,p){var C;return g8.some(function(O){var $=O[yd].options.emptyInsertThreshold;if(!(!$||RK(O))){var P=Ni(O),W=f>=P.left-$&&f<=P.right+$,J=p>=P.top-$&&p<=P.bottom+$;if(W&&J)return C=O}}),C},OJ=function(f){function p($,P){return function(W,J,re,me){var pe=W.options.group.name&&J.options.group.name&&W.options.group.name===J.options.group.name;if($==null&&(P||pe))return!0;if($==null||$===!1)return!1;if(P&&$==="clone")return $;if(typeof $=="function")return p($(W,J,re,me),P)(W,J,re,me);var Oe=(P?W:J).options.group.name;return $===!0||typeof $=="string"&&$===Oe||$.join&&$.indexOf(Oe)>-1}}var C={},O=f.group;(!O||o8(O)!="object")&&(O={name:O}),C.name=O.name,C.checkPull=p(O.pull,!0),C.checkPut=p(O.put),C.revertClone=O.revertClone,f.group=C},AJ=function(){!_J&&Co&&co(Co,"display","none")},DJ=function(){!_J&&Co&&co(Co,"display","")};S8&&!vJ&&document.addEventListener("click",function(w){if(f8)return w.preventDefault(),w.stopPropagation&&w.stopPropagation(),w.stopImmediatePropagation&&w.stopImmediatePropagation(),f8=!1,!1},!0);var C2=function(f){if(Xt){f=f.touches?f.touches[0]:f;var p=qne(f.clientX,f.clientY);if(p){var C={};for(var O in f)f.hasOwnProperty(O)&&(C[O]=f[O]);C.target=C.rootEl=p,C.preventDefault=void 0,C.stopPropagation=void 0,p[yd]._onDragOver(C)}}},Kne=function(f){Xt&&Xt.parentNode[yd]._isOutsideThisEl(f.target)};function lo(w,f){if(!(w&&w.nodeType&&w.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(w));this.el=w,this.options=f=Xb({},f),w[yd]=this;var p={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(w.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return kJ(w,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(P,W){P.setData("Text",W.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:lo.supportPointer!==!1&&"PointerEvent"in window&&(!EM||DK),emptyInsertThreshold:5};LM.initializePlugins(this,w,p);for(var C in p)!(C in f)&&(f[C]=p[C]);OJ(f);for(var O in this)O.charAt(0)==="_"&&typeof this[O]=="function"&&(this[O]=this[O].bind(this));this.nativeDraggable=f.forceFallback?!1:jne,this.nativeDraggable&&(this.options.touchStartThreshold=1),f.supportPointer?bs(w,"pointerdown",this._onTapStart):(bs(w,"mousedown",this._onTapStart),bs(w,"touchstart",this._onTapStart)),this.nativeDraggable&&(bs(w,"dragover",this),bs(w,"dragenter",this)),g8.push(this.el),f.store&&f.store.get&&this.sort(f.store.get(this)||[]),Xb(this,zne())}lo.prototype={constructor:lo,_isOutsideThisEl:function(f){!this.el.contains(f)&&f!==this.el&&(_k=null)},_getDirection:function(f,p){return typeof this.options.direction=="function"?this.options.direction.call(this,f,p,Xt):this.options.direction},_onTapStart:function(f){if(f.cancelable){var p=this,C=this.el,O=this.options,$=O.preventOnFilter,P=f.type,W=f.touches&&f.touches[0]||f.pointerType&&f.pointerType==="touch"&&f,J=(W||f).target,re=f.target.shadowRoot&&(f.path&&f.path[0]||f.composedPath&&f.composedPath()[0])||J,me=O.filter;if(ooe(C),!Xt&&!(/mousedown|pointerdown/.test(P)&&f.button!==0||O.disabled)&&!re.isContentEditable&&!(!this.nativeDraggable&&EM&&J&&J.tagName.toUpperCase()==="SELECT")&&(J=Ng(J,O.draggable,C,!1),!(J&&J.animated)&&s8!==J)){if(Ok=wf(J),_M=wf(J,O.draggable),typeof me=="function"){if(me.call(this,f,J,this)){Su({sortable:p,rootEl:re,name:"filter",targetEl:J,toEl:C,fromEl:C}),vd("filter",p,{evt:f}),$&&f.preventDefault();return}}else if(me&&(me=me.split(",").some(function(pe){if(pe=Ng(re,pe.trim(),C,!1),pe)return Su({sortable:p,rootEl:pe,name:"filter",targetEl:J,fromEl:C,toEl:C}),vd("filter",p,{evt:f}),!0}),me)){$&&f.preventDefault();return}O.handle&&!Ng(re,O.handle,C,!1)||this._prepareDragStart(f,W,J)}}},_prepareDragStart:function(f,p,C){var O=this,$=O.el,P=O.options,W=$.ownerDocument,J;if(C&&!Xt&&C.parentNode===$){var re=Ni(C);if(pa=$,Xt=C,qa=Xt.parentNode,x2=Xt.nextSibling,s8=C,K6=P.group,lo.dragged=Xt,w2={target:Xt,clientX:(p||f).clientX,clientY:(p||f).clientY},HX=w2.clientX-re.left,zX=w2.clientY-re.top,this._lastX=(p||f).clientX,this._lastY=(p||f).clientY,Xt.style["will-change"]="all",J=function(){if(vd("delayEnded",O,{evt:f}),lo.eventCanceled){O._onDrop();return}O._disableDelayedDragEvents(),!$X&&O.nativeDraggable&&(Xt.draggable=!0),O._triggerDragStart(f,p),Su({sortable:O,name:"choose",originalEvent:f}),gm(Xt,P.chosenClass,!0)},P.ignore.split(",").forEach(function(me){CJ(Xt,me.trim(),iK)}),bs(W,"dragover",C2),bs(W,"mousemove",C2),bs(W,"touchmove",C2),P.supportPointer?(bs(W,"pointerup",O._onDrop),!this.nativeDraggable&&bs(W,"pointercancel",O._onDrop)):(bs(W,"mouseup",O._onDrop),bs(W,"touchend",O._onDrop),bs(W,"touchcancel",O._onDrop)),$X&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Xt.draggable=!0),vd("delayStart",this,{evt:f}),P.delay&&(!P.delayOnTouchOnly||p)&&(!this.nativeDraggable||!(FM||Jb))){if(lo.eventCanceled){this._onDrop();return}P.supportPointer?(bs(W,"pointerup",O._disableDelayedDrag),bs(W,"pointercancel",O._disableDelayedDrag)):(bs(W,"mouseup",O._disableDelayedDrag),bs(W,"touchend",O._disableDelayedDrag),bs(W,"touchcancel",O._disableDelayedDrag)),bs(W,"mousemove",O._delayedDragTouchMoveHandler),bs(W,"touchmove",O._delayedDragTouchMoveHandler),P.supportPointer&&bs(W,"pointermove",O._delayedDragTouchMoveHandler),O._dragStartTimer=setTimeout(J,P.delay)}else J()}},_delayedDragTouchMoveHandler:function(f){var p=f.touches?f.touches[0]:f;Math.max(Math.abs(p.clientX-this._lastX),Math.abs(p.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Xt&&iK(Xt),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var f=this.el.ownerDocument;ls(f,"mouseup",this._disableDelayedDrag),ls(f,"touchend",this._disableDelayedDrag),ls(f,"touchcancel",this._disableDelayedDrag),ls(f,"pointerup",this._disableDelayedDrag),ls(f,"pointercancel",this._disableDelayedDrag),ls(f,"mousemove",this._delayedDragTouchMoveHandler),ls(f,"touchmove",this._delayedDragTouchMoveHandler),ls(f,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(f,p){p=p||f.pointerType=="touch"&&f,!this.nativeDraggable||p?this.options.supportPointer?bs(document,"pointermove",this._onTouchMove):p?bs(document,"touchmove",this._onTouchMove):bs(document,"mousemove",this._onTouchMove):(bs(Xt,"dragend",this),bs(pa,"dragstart",this._onDragStart));try{document.selection?a8(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(f,p){if(kk=!1,pa&&Xt){vd("dragStarted",this,{evt:p}),this.nativeDraggable&&bs(document,"dragover",Kne);var C=this.options;!f&&gm(Xt,C.dragClass,!1),gm(Xt,C.ghostClass,!0),lo.active=this,f&&this._appendGhost(),Su({sortable:this,name:"start",originalEvent:p})}else this._nulling()},_emulateDragOver:function(){if(Og){this._lastX=Og.clientX,this._lastY=Og.clientY,AJ();for(var f=document.elementFromPoint(Og.clientX,Og.clientY),p=f;f&&f.shadowRoot&&(f=f.shadowRoot.elementFromPoint(Og.clientX,Og.clientY),f!==p);)p=f;if(Xt.parentNode[yd]._isOutsideThisEl(f),p)do{if(p[yd]){var C=void 0;if(C=p[yd]._onDragOver({clientX:Og.clientX,clientY:Og.clientY,target:f,rootEl:p}),C&&!this.options.dragoverBubble)break}f=p}while(p=wJ(p));DJ()}},_onTouchMove:function(f){if(w2){var p=this.options,C=p.fallbackTolerance,O=p.fallbackOffset,$=f.touches?f.touches[0]:f,P=Co&&Ak(Co,!0),W=Co&&P&&P.a,J=Co&&P&&P.d,re=X6&&Pl&&LX(Pl),me=($.clientX-w2.clientX+O.x)/(W||1)+(re?re[0]-aK[0]:0)/(W||1),pe=($.clientY-w2.clientY+O.y)/(J||1)+(re?re[1]-aK[1]:0)/(J||1);if(!lo.active&&!kk){if(C&&Math.max(Math.abs($.clientX-this._lastX),Math.abs($.clientY-this._lastY))<C)return;this._onDragStart(f,!0)}if(Co){P?(P.e+=me-(sK||0),P.f+=pe-(rK||0)):P={a:1,b:0,c:0,d:1,e:me,f:pe};var Oe="matrix(".concat(P.a,",").concat(P.b,",").concat(P.c,",").concat(P.d,",").concat(P.e,",").concat(P.f,")");co(Co,"webkitTransform",Oe),co(Co,"mozTransform",Oe),co(Co,"msTransform",Oe),co(Co,"transform",Oe),sK=me,rK=pe,Og=$}f.cancelable&&f.preventDefault()}},_appendGhost:function(){if(!Co){var f=this.options.fallbackOnBody?document.body:pa,p=Ni(Xt,!0,X6,!0,f),C=this.options;if(X6){for(Pl=f;co(Pl,"position")==="static"&&co(Pl,"transform")==="none"&&Pl!==document;)Pl=Pl.parentNode;Pl!==document.body&&Pl!==document.documentElement?(Pl===document&&(Pl=zp()),p.top+=Pl.scrollTop,p.left+=Pl.scrollLeft):Pl=zp(),aK=LX(Pl)}Co=Xt.cloneNode(!0),gm(Co,C.ghostClass,!1),gm(Co,C.fallbackClass,!0),gm(Co,C.dragClass,!0),co(Co,"transition",""),co(Co,"transform",""),co(Co,"box-sizing","border-box"),co(Co,"margin",0),co(Co,"top",p.top),co(Co,"left",p.left),co(Co,"width",p.width),co(Co,"height",p.height),co(Co,"opacity","0.8"),co(Co,"position",X6?"absolute":"fixed"),co(Co,"zIndex","100000"),co(Co,"pointerEvents","none"),lo.ghost=Co,f.appendChild(Co),co(Co,"transform-origin",HX/parseInt(Co.style.width)*100+"% "+zX/parseInt(Co.style.height)*100+"%")}},_onDragStart:function(f,p){var C=this,O=f.dataTransfer,$=C.options;if(vd("dragStart",this,{evt:f}),lo.eventCanceled){this._onDrop();return}vd("setupClone",this),lo.eventCanceled||(Ra=EJ(Xt),Ra.removeAttribute("id"),Ra.draggable=!1,Ra.style["will-change"]="",this._hideClone(),gm(Ra,this.options.chosenClass,!1),lo.clone=Ra),C.cloneId=a8(function(){vd("clone",C),!lo.eventCanceled&&(C.options.removeCloneOnHide||pa.insertBefore(Ra,Xt),C._hideClone(),Su({sortable:C,name:"clone"}))}),!p&&gm(Xt,$.dragClass,!0),p?(f8=!0,C._loopId=setInterval(C._emulateDragOver,50)):(ls(document,"mouseup",C._onDrop),ls(document,"touchend",C._onDrop),ls(document,"touchcancel",C._onDrop),O&&(O.effectAllowed="move",$.setData&&$.setData.call(C,O,Xt)),bs(document,"drop",C),co(Xt,"transform","translateZ(0)")),kk=!0,C._dragStartId=a8(C._dragStarted.bind(C,p,f)),bs(document,"selectstart",C),CM=!0,window.getSelection().removeAllRanges(),EM&&co(document.body,"user-select","none")},_onDragOver:function(f){var p=this.el,C=f.target,O,$,P,W=this.options,J=W.group,re=lo.active,me=K6===J,pe=W.sort,Oe=tl||re,je,De=this,Je=!1;if(SK)return;function Ye(gt,Ro){vd(gt,De,Vp({evt:f,isOwner:me,axis:je?"vertical":"horizontal",revert:P,dragRect:O,targetRect:$,canSort:pe,fromSortable:Oe,target:C,completed:ze,onMove:function(Ge,yo){return J6(pa,p,Xt,O,Ge,Ni(Ge),f,yo)},changed:ee},Ro))}function en(){Ye("dragOverAnimationCapture"),De.captureAnimationState(),De!==Oe&&Oe.captureAnimationState()}function ze(gt){return Ye("dragOverCompleted",{insertion:gt}),gt&&(me?re._hideClone():re._showClone(De),De!==Oe&&(gm(Xt,tl?tl.options.ghostClass:re.options.ghostClass,!1),gm(Xt,W.ghostClass,!0)),tl!==De&&De!==lo.active?tl=De:De===lo.active&&tl&&(tl=null),Oe===De&&(De._ignoreWhileAnimating=C),De.animateAll(function(){Ye("dragOverAnimationComplete"),De._ignoreWhileAnimating=null}),De!==Oe&&(Oe.animateAll(),Oe._ignoreWhileAnimating=null)),(C===Xt&&!Xt.animated||C===p&&!C.animated)&&(_k=null),!W.dragoverBubble&&!f.rootEl&&C!==document&&(Xt.parentNode[yd]._isOutsideThisEl(f.target),!gt&&C2(f)),!W.dragoverBubble&&f.stopPropagation&&f.stopPropagation(),Je=!0}function ee(){hm=wf(Xt),$y=wf(Xt,W.draggable),Su({sortable:De,name:"change",toEl:p,newIndex:hm,newDraggableIndex:$y,originalEvent:f})}if(f.preventDefault!==void 0&&f.cancelable&&f.preventDefault(),C=Ng(C,W.draggable,p,!0),Ye("dragOver"),lo.eventCanceled)return Je;if(Xt.contains(f.target)||C.animated&&C.animatingX&&C.animatingY||De._ignoreWhileAnimating===C)return ze(!1);if(f8=!1,re&&!W.disabled&&(me?pe||(P=qa!==pa):tl===this||(this.lastPutMode=K6.checkPull(this,re,Xt,f))&&J.checkPut(this,re,Xt,f))){if(je=this._getDirection(f,C)==="vertical",O=Ni(Xt),Ye("dragOverValid"),lo.eventCanceled)return Je;if(P)return qa=pa,en(),this._hideClone(),Ye("revert"),lo.eventCanceled||(x2?pa.insertBefore(Xt,x2):pa.appendChild(Xt)),ze(!0);var qe=RK(p,W.draggable);if(!qe||Qne(f,je,this)&&!qe.animated){if(qe===Xt)return ze(!1);if(qe&&p===f.target&&(C=qe),C&&($=Ni(C)),J6(pa,p,Xt,O,C,$,f,!!C)!==!1)return en(),qe&&qe.nextSibling?p.insertBefore(Xt,qe.nextSibling):p.appendChild(Xt),qa=p,ee(),ze(!0)}else if(qe&&Jne(f,je,this)){var Sn=Lk(p,0,W,!0);if(Sn===Xt)return ze(!1);if(C=Sn,$=Ni(C),J6(pa,p,Xt,O,C,$,f,!1)!==!1)return en(),p.insertBefore(Xt,Sn),qa=p,ee(),ze(!0)}else if(C.parentNode===p){$=Ni(C);var At=0,ae,yt=Xt.parentNode!==p,Dt=!Gne(Xt.animated&&Xt.toRect||O,C.animated&&C.toRect||$,je),Ht=je?"top":"left",Te=FX(C,"top","top")||FX(Xt,"top","top"),ue=Te?Te.scrollTop:void 0;_k!==C&&(ae=$[Ht],OM=!1,Y6=!Dt&&W.invertSwap||yt),At=eoe(f,C,$,je,Dt?1:W.swapThreshold,W.invertedSwapThreshold==null?W.swapThreshold:W.invertedSwapThreshold,Y6,_k===C);var Yn;if(At!==0){var Pn=wf(Xt);do Pn-=At,Yn=qa.children[Pn];while(Yn&&(co(Yn,"display")==="none"||Yn===Co))}if(At===0||Yn===C)return ze(!1);_k=C,kM=At;var Rt=C.nextElementSibling,R=!1;R=At===1;var So=J6(pa,p,Xt,O,C,$,f,R);if(So!==!1)return(So===1||So===-1)&&(R=So===1),SK=!0,setTimeout(Xne,30),en(),R&&!Rt?p.appendChild(Xt):C.parentNode.insertBefore(Xt,R?Rt:C),Te&&xJ(Te,0,ue-Te.scrollTop),qa=Xt.parentNode,ae!==void 0&&!Y6&&(r8=Math.abs(ae-Ni(C)[Ht])),ee(),ze(!0)}if(p.contains(Xt))return ze(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){ls(document,"mousemove",this._onTouchMove),ls(document,"touchmove",this._onTouchMove),ls(document,"pointermove",this._onTouchMove),ls(document,"dragover",C2),ls(document,"mousemove",C2),ls(document,"touchmove",C2)},_offUpEvents:function(){var f=this.el.ownerDocument;ls(f,"mouseup",this._onDrop),ls(f,"touchend",this._onDrop),ls(f,"pointerup",this._onDrop),ls(f,"pointercancel",this._onDrop),ls(f,"touchcancel",this._onDrop),ls(document,"selectstart",this)},_onDrop:function(f){var p=this.el,C=this.options;if(hm=wf(Xt),$y=wf(Xt,C.draggable),vd("drop",this,{evt:f}),qa=Xt&&Xt.parentNode,hm=wf(Xt),$y=wf(Xt,C.draggable),lo.eventCanceled){this._nulling();return}kk=!1,Y6=!1,OM=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),xK(this.cloneId),xK(this._dragStartId),this.nativeDraggable&&(ls(document,"drop",this),ls(p,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),EM&&co(document.body,"user-select",""),co(Xt,"transform",""),f&&(CM&&(f.cancelable&&f.preventDefault(),!C.dropBubble&&f.stopPropagation()),Co&&Co.parentNode&&Co.parentNode.removeChild(Co),(pa===qa||tl&&tl.lastPutMode!=="clone")&&Ra&&Ra.parentNode&&Ra.parentNode.removeChild(Ra),Xt&&(this.nativeDraggable&&ls(Xt,"dragend",this),iK(Xt),Xt.style["will-change"]="",CM&&!kk&&gm(Xt,tl?tl.options.ghostClass:this.options.ghostClass,!1),gm(Xt,this.options.chosenClass,!1),Su({sortable:this,name:"unchoose",toEl:qa,newIndex:null,newDraggableIndex:null,originalEvent:f}),pa!==qa?(hm>=0&&(Su({rootEl:qa,name:"add",toEl:qa,fromEl:pa,originalEvent:f}),Su({sortable:this,name:"remove",toEl:qa,originalEvent:f}),Su({rootEl:qa,name:"sort",toEl:qa,fromEl:pa,originalEvent:f}),Su({sortable:this,name:"sort",toEl:qa,originalEvent:f})),tl&&tl.save()):hm!==Ok&&hm>=0&&(Su({sortable:this,name:"update",toEl:qa,originalEvent:f}),Su({sortable:this,name:"sort",toEl:qa,originalEvent:f})),lo.active&&((hm==null||hm===-1)&&(hm=Ok,$y=_M),Su({sortable:this,name:"end",toEl:qa,originalEvent:f}),this.save()))),this._nulling()},_nulling:function(){vd("nulling",this),pa=Xt=qa=Co=x2=Ra=s8=Iy=w2=Og=CM=hm=$y=Ok=_M=_k=kM=tl=K6=lo.dragged=lo.ghost=lo.clone=lo.active=null,h8.forEach(function(f){f.checked=!0}),h8.length=sK=rK=0},handleEvent:function(f){switch(f.type){case"drop":case"dragend":this._onDrop(f);break;case"dragenter":case"dragover":Xt&&(this._onDragOver(f),Yne(f));break;case"selectstart":f.preventDefault();break}},toArray:function(){for(var f=[],p,C=this.el.children,O=0,$=C.length,P=this.options;O<$;O++)p=C[O],Ng(p,P.draggable,this.el,!1)&&f.push(p.getAttribute(P.dataIdAttr)||noe(p));return f},sort:function(f,p){var C={},O=this.el;this.toArray().forEach(function($,P){var W=O.children[P];Ng(W,this.options.draggable,O,!1)&&(C[$]=W)},this),p&&this.captureAnimationState(),f.forEach(function($){C[$]&&(O.removeChild(C[$]),O.appendChild(C[$]))}),p&&this.animateAll()},save:function(){var f=this.options.store;f&&f.set&&f.set(this)},closest:function(f,p){return Ng(f,p||this.options.draggable,this.el,!1)},option:function(f,p){var C=this.options;if(p===void 0)return C[f];var O=LM.modifyOption(this,f,p);typeof O<"u"?C[f]=O:C[f]=p,f==="group"&&OJ(C)},destroy:function(){vd("destroy",this);var f=this.el;f[yd]=null,ls(f,"mousedown",this._onTapStart),ls(f,"touchstart",this._onTapStart),ls(f,"pointerdown",this._onTapStart),this.nativeDraggable&&(ls(f,"dragover",this),ls(f,"dragenter",this)),Array.prototype.forEach.call(f.querySelectorAll("[draggable]"),function(p){p.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),g8.splice(g8.indexOf(this.el),1),this.el=f=null},_hideClone:function(){if(!Iy){if(vd("hideClone",this),lo.eventCanceled)return;co(Ra,"display","none"),this.options.removeCloneOnHide&&Ra.parentNode&&Ra.parentNode.removeChild(Ra),Iy=!0}},_showClone:function(f){if(f.lastPutMode!=="clone"){this._hideClone();return}if(Iy){if(vd("showClone",this),lo.eventCanceled)return;Xt.parentNode==pa&&!this.options.group.revertClone?pa.insertBefore(Ra,Xt):x2?pa.insertBefore(Ra,x2):pa.appendChild(Ra),this.options.group.revertClone&&this.animate(Xt,Ra),co(Ra,"display",""),Iy=!1}}};function Yne(w){w.dataTransfer&&(w.dataTransfer.dropEffect="move"),w.cancelable&&w.preventDefault()}function J6(w,f,p,C,O,$,P,W){var J,re=w[yd],me=re.options.onMove,pe;return window.CustomEvent&&!Jb&&!FM?J=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(J=document.createEvent("Event"),J.initEvent("move",!0,!0)),J.to=f,J.from=w,J.dragged=p,J.draggedRect=C,J.related=O||f,J.relatedRect=$||Ni(f),J.willInsertAfter=W,J.originalEvent=P,w.dispatchEvent(J),me&&(pe=me.call(re,J,P)),pe}function iK(w){w.draggable=!1}function Xne(){SK=!1}function Jne(w,f,p){var C=Ni(Lk(p.el,0,p.options,!0)),O=TJ(p.el,p.options,Co),$=10;return f?w.clientX<O.left-$||w.clientY<C.top&&w.clientX<C.right:w.clientY<O.top-$||w.clientY<C.bottom&&w.clientX<C.left}function Qne(w,f,p){var C=Ni(RK(p.el,p.options.draggable)),O=TJ(p.el,p.options,Co),$=10;return f?w.clientX>O.right+$||w.clientY>C.bottom&&w.clientX>C.left:w.clientY>O.bottom+$||w.clientX>C.right&&w.clientY>C.top}function eoe(w,f,p,C,O,$,P,W){var J=C?w.clientY:w.clientX,re=C?p.height:p.width,me=C?p.top:p.left,pe=C?p.bottom:p.right,Oe=!1;if(!P){if(W&&r8<re*O){if(!OM&&(kM===1?J>me+re*$/2:J<pe-re*$/2)&&(OM=!0),OM)Oe=!0;else if(kM===1?J<me+r8:J>pe-r8)return-kM}else if(J>me+re*(1-O)/2&&J<pe-re*(1-O)/2)return toe(f)}return Oe=Oe||P,Oe&&(J<me+re*$/2||J>pe-re*$/2)?J>me+re/2?1:-1:0}function toe(w){return wf(Xt)<wf(w)?1:-1}function noe(w){for(var f=w.tagName+w.className+w.src+w.href+w.textContent,p=f.length,C=0;p--;)C+=f.charCodeAt(p);return C.toString(36)}function ooe(w){h8.length=0;for(var f=w.getElementsByTagName("input"),p=f.length;p--;){var C=f[p];C.checked&&h8.push(C)}}function a8(w){return setTimeout(w,0)}function xK(w){return clearTimeout(w)}S8&&bs(document,"touchmove",function(w){(lo.active||kk)&&w.cancelable&&w.preventDefault()});lo.utils={on:bs,off:ls,css:co,find:CJ,is:function(f,p){return!!Ng(f,p,f,!1)},extend:Lne,throttle:SJ,closest:Ng,toggleClass:gm,clone:EJ,index:wf,nextTick:a8,cancelNextTick:xK,detectDirection:kJ,getChild:Lk,expando:yd};lo.get=function(w){return w[yd]};lo.mount=function(){for(var w=arguments.length,f=new Array(w),p=0;p<w;p++)f[p]=arguments[p];f[0].constructor===Array&&(f=f[0]),f.forEach(function(C){if(!C.prototype||!C.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(C));C.utils&&(lo.utils=Vp(Vp({},lo.utils),C.utils)),LM.mount(C)})};lo.create=function(w,f){return new lo(w,f)};lo.version=Ine;var Mi=[],SM,EK,TK=!1,cK,lK,p8,xM;function soe(){function w(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var f in this)f.charAt(0)==="_"&&typeof this[f]=="function"&&(this[f]=this[f].bind(this))}return w.prototype={dragStarted:function(p){var C=p.originalEvent;this.sortable.nativeDraggable?bs(document,"dragover",this._handleAutoScroll):this.options.supportPointer?bs(document,"pointermove",this._handleFallbackAutoScroll):C.touches?bs(document,"touchmove",this._handleFallbackAutoScroll):bs(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(p){var C=p.originalEvent;!this.options.dragOverBubble&&!C.rootEl&&this._handleAutoScroll(C)},drop:function(){this.sortable.nativeDraggable?ls(document,"dragover",this._handleAutoScroll):(ls(document,"pointermove",this._handleFallbackAutoScroll),ls(document,"touchmove",this._handleFallbackAutoScroll),ls(document,"mousemove",this._handleFallbackAutoScroll)),UX(),i8(),Hne()},nulling:function(){p8=EK=SM=TK=xM=cK=lK=null,Mi.length=0},_handleFallbackAutoScroll:function(p){this._handleAutoScroll(p,!0)},_handleAutoScroll:function(p,C){var O=this,$=(p.touches?p.touches[0]:p).clientX,P=(p.touches?p.touches[0]:p).clientY,W=document.elementFromPoint($,P);if(p8=p,C||this.options.forceAutoScrollFallback||FM||Jb||EM){uK(p,this.options,W,C);var J=Ly(W,!0);TK&&(!xM||$!==cK||P!==lK)&&(xM&&UX(),xM=setInterval(function(){var re=Ly(document.elementFromPoint($,P),!0);re!==J&&(J=re,i8()),uK(p,O.options,re,C)},10),cK=$,lK=P)}else{if(!this.options.bubbleScroll||Ly(W,!0)===zp()){i8();return}uK(p,this.options,Ly(W,!1),!1)}}},Xb(w,{pluginName:"scroll",initializeByDefault:!0})}function i8(){Mi.forEach(function(w){clearInterval(w.pid)}),Mi=[]}function UX(){clearInterval(xM)}var uK=SJ(function(w,f,p,C){if(f.scroll){var O=(w.touches?w.touches[0]:w).clientX,$=(w.touches?w.touches[0]:w).clientY,P=f.scrollSensitivity,W=f.scrollSpeed,J=zp(),re=!1,me;EK!==p&&(EK=p,i8(),SM=f.scroll,me=f.scrollFn,SM===!0&&(SM=Ly(p,!0)));var pe=0,Oe=SM;do{var je=Oe,De=Ni(je),Je=De.top,Ye=De.bottom,en=De.left,ze=De.right,ee=De.width,qe=De.height,Sn=void 0,At=void 0,ae=je.scrollWidth,yt=je.scrollHeight,Dt=co(je),Ht=je.scrollLeft,Te=je.scrollTop;je===J?(Sn=ee<ae&&(Dt.overflowX==="auto"||Dt.overflowX==="scroll"||Dt.overflowX==="visible"),At=qe<yt&&(Dt.overflowY==="auto"||Dt.overflowY==="scroll"||Dt.overflowY==="visible")):(Sn=ee<ae&&(Dt.overflowX==="auto"||Dt.overflowX==="scroll"),At=qe<yt&&(Dt.overflowY==="auto"||Dt.overflowY==="scroll"));var ue=Sn&&(Math.abs(ze-O)<=P&&Ht+ee<ae)-(Math.abs(en-O)<=P&&!!Ht),Yn=At&&(Math.abs(Ye-$)<=P&&Te+qe<yt)-(Math.abs(Je-$)<=P&&!!Te);if(!Mi[pe])for(var Pn=0;Pn<=pe;Pn++)Mi[Pn]||(Mi[Pn]={});(Mi[pe].vx!=ue||Mi[pe].vy!=Yn||Mi[pe].el!==je)&&(Mi[pe].el=je,Mi[pe].vx=ue,Mi[pe].vy=Yn,clearInterval(Mi[pe].pid),(ue!=0||Yn!=0)&&(re=!0,Mi[pe].pid=setInterval((function(){C&&this.layer===0&&lo.active._onTouchMove(p8);var Rt=Mi[this.layer].vy?Mi[this.layer].vy*W:0,R=Mi[this.layer].vx?Mi[this.layer].vx*W:0;typeof me=="function"&&me.call(lo.dragged.parentNode[yd],R,Rt,w,p8,Mi[this.layer].el)!=="continue"||xJ(Mi[this.layer].el,R,Rt)}).bind({layer:pe}),24))),pe++}while(f.bubbleScroll&&Oe!==J&&(Oe=Ly(Oe,!1)));TK=re}},30),RJ=function(f){var p=f.originalEvent,C=f.putSortable,O=f.dragEl,$=f.activeSortable,P=f.dispatchSortableEvent,W=f.hideGhostForTarget,J=f.unhideGhostForTarget;if(p){var re=C||$;W();var me=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:p,pe=document.elementFromPoint(me.clientX,me.clientY);J(),re&&!re.el.contains(pe)&&(P("spill"),this.onSpill({dragEl:O,putSortable:C}))}};function MK(){}MK.prototype={startIndex:null,dragStart:function(f){var p=f.oldDraggableIndex;this.startIndex=p},onSpill:function(f){var p=f.dragEl,C=f.putSortable;this.sortable.captureAnimationState(),C&&C.captureAnimationState();var O=Lk(this.sortable.el,this.startIndex,this.options);O?this.sortable.el.insertBefore(p,O):this.sortable.el.appendChild(p),this.sortable.animateAll(),C&&C.animateAll()},drop:RJ};Xb(MK,{pluginName:"revertOnSpill"});function NK(){}NK.prototype={onSpill:function(f){var p=f.dragEl,C=f.putSortable,O=C||this.sortable;O.captureAnimationState(),p.parentNode&&p.parentNode.removeChild(p),O.animateAll()},drop:RJ};Xb(NK,{pluginName:"removeOnSpill"});lo.mount(new soe);lo.mount(NK,MK);var MJ={exports:{}};(function(w){(function(){var f=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},p=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},C=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},O=function(e,n){return $(function(o,r){return e.eq(n(o),n(r))})},$=function(e){return{eq:e}},P=$(function(e,n){return e===n}),W=P,J=function(e){return $(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,i=0;i<r;i++)if(!e.eq(n[i],o[i]))return!1;return!0})},re=function(e,n){return O(J(e),function(o){return C(o,n)})},me=function(e){return $(function(n,o){var r=Object.keys(n),i=Object.keys(o);if(!re(W).eq(r,i))return!1;for(var u=r.length,g=0;g<u;g++){var y=r[g];if(!e.eq(n[y],o[y]))return!1}return!0})},pe=$(function(e,n){if(e===n)return!0;var o=f(e),r=f(n);return o!==r?!1:p(o)?e===n:o==="array"?J(pe).eq(e,n):o==="object"?me(pe).eq(e,n):!1});const Oe=Object.getPrototypeOf,je=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},De=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&je(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},Je=e=>n=>De(n)===e,Ye=e=>n=>typeof n===e,en=e=>n=>e===n,ze=(e,n)=>qe(e)&&je(e,n,(o,r)=>Oe(o)===r),ee=Je("string"),qe=Je("object"),Sn=e=>ze(e,Object),At=Je("array"),ae=en(null),yt=Ye("boolean"),Dt=en(void 0),Ht=e=>e==null,Te=e=>!Ht(e),ue=Ye("function"),Yn=Ye("number"),Pn=(e,n)=>{if(At(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},Rt=()=>{},R=(e,n)=>(...o)=>e(n.apply(null,o)),So=(e,n)=>o=>e(n(o)),gt=e=>()=>e,Ro=e=>e,tn=(e,n)=>e===n;function Ge(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const yo=e=>n=>!e(n),kr=e=>()=>{throw new Error(e)},us=e=>e(),Fr=e=>{e()},Ke=gt(!1),St=gt(!0);class Z{constructor(n,o){this.tag=n,this.value=o}static some(n){return new Z(!0,n)}static none(){return Z.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?Z.some(n(this.value)):Z.none()}bind(n){return this.tag?n(this.value):Z.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:Z.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return Te(n)?Z.some(n):Z.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Z.singletonNone=new Z(!1);const Dc=Array.prototype.slice,ko=Array.prototype.indexOf,Ns=Array.prototype.push,Io=(e,n)=>ko.call(e,n),Pg=(e,n)=>{const o=Io(e,n);return o===-1?Z.none():Z.some(o)},fn=(e,n)=>Io(e,n)>-1,Yo=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];if(n(i,o))return!0}return!1},Wt=(e,n)=>{const o=e.length,r=new Array(o);for(let i=0;i<o;i++){const u=e[i];r[i]=n(u,i)}return r},Ie=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];n(i,o)}},uo=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},sr=(e,n)=>{const o=[],r=[];for(let i=0,u=e.length;i<u;i++){const g=e[i];(n(g,i)?o:r).push(g)}return{pass:o,fail:r}},Zt=(e,n)=>{const o=[];for(let r=0,i=e.length;r<i;r++){const u=e[r];n(u,r)&&o.push(u)}return o},$l=(e,n,o)=>(uo(e,(r,i)=>{o=n(o,r,i)}),o),ss=(e,n,o)=>(Ie(e,(r,i)=>{o=n(o,r,i)}),o),Eu=(e,n,o)=>{for(let r=0,i=e.length;r<i;r++){const u=e[r];if(n(u,r))return Z.some(u);if(o(u,r))break}return Z.none()},_s=(e,n)=>Eu(e,n,Ke),Jr=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];if(n(i,o))return Z.some(o)}return Z.none()},pm=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!At(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);Ns.apply(n,e[o])}return n},Ka=(e,n)=>pm(Wt(e,n)),Js=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const i=e[o];if(n(i,o)!==!0)return!1}return!0},ns=e=>{const n=Dc.call(e,0);return n.reverse(),n},wd=(e,n)=>Zt(e,o=>!fn(n,o)),Xo=(e,n)=>{const o={};for(let r=0,i=e.length;r<i;r++){const u=e[r];o[String(u)]=n(u,r)}return o},Jo=(e,n)=>{const o=Dc.call(e,0);return o.sort(n),o},ol=(e,n)=>n>=0&&n<e.length?Z.some(e[n]):Z.none(),js=e=>ol(e,0),Pi=e=>ol(e,e.length-1),Or=ue(Array.from)?Array.from:e=>Dc.call(e),Rc=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return Z.none()},Cd=(e,n)=>{const o=[],r=ue(n)?i=>Yo(o,u=>n(u,i)):i=>fn(o,i);for(let i=0,u=e.length;i<u;i++){const g=e[i];r(g)||o.push(g)}return o},Ar=Object.keys,bm=Object.hasOwnProperty,vt=(e,n)=>{const o=Ar(e);for(let r=0,i=o.length;r<i;r++){const u=o[r],g=e[u];n(g,u)}},no=(e,n)=>Qr(e,(o,r)=>({k:r,v:n(o,r)})),Qr=(e,n)=>{const o={};return vt(e,(r,i)=>{const u=n(r,i);o[u.k]=u.v}),o},Ma=e=>(n,o)=>{e[o]=n},vm=(e,n,o,r)=>{vt(e,(i,u)=>{(n(i,u)?o:r)(i,u)})},Bi=(e,n)=>{const o={},r={};return vm(e,n,Ma(o),Ma(r)),{t:o,f:r}},Uo=(e,n)=>{const o={};return vm(e,n,Ma(o),Rt),o},$i=(e,n)=>{const o=[];return vt(e,(r,i)=>{o.push(n(r,i))}),o},sl=e=>$i(e,Ro),Fo=(e,n)=>an(e,n)?Z.from(e[n]):Z.none(),an=(e,n)=>bm.call(e,n),ba=(e,n)=>an(e,n)&&e[n]!==void 0&&e[n]!==null,rl=(e,n,o=pe)=>me(o).eq(e,n),Il=e=>{const n={};return Ie(e,o=>{n[o]={}}),Ar(n)},ym=e=>e.length!==void 0,ea=Array.isArray,rr=e=>{if(ea(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},ks=(e,n,o)=>{if(!e)return!1;if(o=o||e,ym(e)){for(let r=0,i=e.length;r<i;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(an(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},Ii=(e,n)=>{const o=[];return ks(e,(r,i)=>{o.push(n(r,i,e))}),o},wm=(e,n)=>{const o=[];return ks(e,(r,i)=>{(!n||n(r,i,e))&&o.push(r)}),o},al=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},Na=(e,n,o,r)=>{let i=Dt(o)?e[0]:o;for(let u=0;u<e.length;u++)i=n.call(r,i,e[u],u);return i},vs=(e,n,o)=>{for(let r=0,i=e.length;r<i;r++)if(n.call(o,e[r],r,e))return r;return-1},Ya=e=>e[e.length-1],Fl=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},Wp=(e,n,o,r)=>{const i=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!i,g=e.isiOS()||e.isAndroid(),y=g||r("(pointer:coarse)"),x=i||!u&&g&&r("(min-device-width:768px)"),A=u||g&&!x,I=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,F=!A&&!x&&!I;return{isiPad:gt(i),isiPhone:gt(u),isTablet:gt(x),isPhone:gt(A),isTouch:gt(y),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:gt(I),isDesktop:gt(F)}},Tu=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},Mc=(e,n)=>{const o=Tu(e,n);if(!o)return{major:0,minor:0};const r=i=>Number(n.replace(o,"$"+i));return ta(r(1),r(2))},Zp=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?we():Mc(e,o)},we=()=>ta(0,0),ta=(e,n)=>({major:e,minor:n}),Ll={nu:ta,detect:Zp,unknown:we},Cf=(e,n)=>Rc(n.brands,o=>{const r=o.brand.toLowerCase();return _s(e,i=>{var u;return r===((u=i.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(i=>({current:i.name,version:Ll.nu(parseInt(o.version,10),0)}))}),Sd=(e,n)=>{const o=String(n).toLowerCase();return _s(e,r=>r.search(o))},Lo=(e,n)=>Sd(e,n).map(o=>{const r=Ll.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Bg=(e,n)=>Sd(e,n).map(o=>{const r=Ll.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Sf=(e,n)=>e.substring(n),_u=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,xd=(e,n)=>Ps(e,n)?Sf(e,n.length):e,br=(e,n,o=0,r)=>{const i=e.indexOf(n,o);return i!==-1?Dt(r)?!0:i+n.length<=r:!1},Ps=(e,n)=>_u(e,n,0),Xa=(e,n)=>_u(e,n,e.length-n.length),Ja=e=>n=>n.replace(e,""),Hl=Ja(/^\s+|\s+$/g),Ed=Ja(/^\s+/g),ku=Ja(/\s+$/g),po=e=>e.length>0,na=e=>!po(e),rc=(e,n)=>n<=0?"":new Array(n+1).join(e),il=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?Z.none():Z.some(o)},ui=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Gs=e=>n=>br(n,e),Qo=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>br(e,"edge/")&&br(e,"chrome")&&br(e,"safari")&&br(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ui],search:e=>br(e,"chrome")&&!br(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>br(e,"msie")||br(e,"trident")},{name:"Opera",versionRegexes:[ui,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Gs("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Gs("firefox")},{name:"Safari",versionRegexes:[ui,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(br(e,"safari")||br(e,"mobile/"))&&br(e,"applewebkit")}],va=[{name:"Windows",search:Gs("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>br(e,"iphone")||br(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Gs("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Gs("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Gs("linux"),versionRegexes:[]},{name:"Solaris",search:Gs("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Gs("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Gs("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],xf={browsers:gt(Qo),oses:gt(va)},wo="Edge",Lr="Chromium",Pa="IE",ar="Opera",Nc="Firefox",Pc="Safari",oa=()=>Bc({current:void 0,version:Ll.unknown()}),Bc=e=>{const n=e.current,o=e.version,r=i=>()=>n===i;return{current:n,version:o,isEdge:r(wo),isChromium:r(Lr),isIE:r(Pa),isOpera:r(ar),isFirefox:r(Nc),isSafari:r(Pc)}},Fi={unknown:oa,nu:Bc},$g="Windows",$c="iOS",Ig="Android",di="Linux",zl="macOS",Ef="Solaris",Tf="FreeBSD",Fg="ChromeOS",q=()=>le({current:void 0,version:Ll.unknown()}),le=e=>{const n=e.current,o=e.version,r=i=>()=>n===i;return{current:n,version:o,isWindows:r($g),isiOS:r($c),isAndroid:r(Ig),isMacOS:r(zl),isLinux:r(di),isSolaris:r(Ef),isFreeBSD:r(Tf),isChromeOS:r(Fg)}},ye={unknown:q,nu:le},ot={detect:(e,n,o)=>{const r=xf.browsers(),i=xf.oses(),u=n.bind(x=>Cf(r,x)).orThunk(()=>Lo(r,e)).fold(Fi.unknown,Fi.nu),g=Bg(i,e).fold(ye.unknown,ye.nu),y=Wp(g,u,e,o);return{browser:u,os:g,deviceType:y}}},rn=e=>window.matchMedia(e).matches;let Oo=Fl(()=>ot.detect(navigator.userAgent,Z.from(navigator.userAgentData),rn));const es=()=>Oo(),xo=navigator.userAgent,ds=es(),Xn=ds.browser,Os=ds.os,Qa=ds.deviceType,Lg=xo.indexOf("Windows Phone")!==-1,xt={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Xn.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Xn.isIE(),windowsPhone:Lg,browser:{current:Xn.current,version:Xn.version,isChromium:Xn.isChromium,isEdge:Xn.isEdge,isFirefox:Xn.isFirefox,isIE:Xn.isIE,isOpera:Xn.isOpera,isSafari:Xn.isSafari},os:{current:Os.current,version:Os.version,isAndroid:Os.isAndroid,isChromeOS:Os.isChromeOS,isFreeBSD:Os.isFreeBSD,isiOS:Os.isiOS,isLinux:Os.isLinux,isMacOS:Os.isMacOS,isSolaris:Os.isSolaris,isWindows:Os.isWindows},deviceType:{isDesktop:Qa.isDesktop,isiPad:Qa.isiPad,isiPhone:Qa.isiPhone,isPhone:Qa.isPhone,isTablet:Qa.isTablet,isTouch:Qa.isTouch,isWebView:Qa.isWebView}},_f=/^\s*|\s*$/g,As=e=>Ht(e)?"":(""+e).replace(_f,""),Hr=(e,n)=>n?n==="array"&&ea(e)?!0:typeof e===n:e!==void 0,jp=(e,n,o={})=>{const r=ee(e)?e.split(n||","):e||[];let i=r.length;for(;i--;)o[r[i]]={};return o},ys=an,Hy=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const i in r)if(an(r,i)){const u=r[i];u!==void 0&&(e[i]=u)}}return e},Vl=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),ks(e,(i,u)=>n.call(r,i,u,o)===!1?!1:(Vl(i,n,o,r),!0)))},at={trim:As,isArray:ea,is:Hr,toArray:rr,makeMap:jp,each:ks,map:Ii,grep:wm,inArray:al,hasOwn:ys,extend:Hy,walk:Vl,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,i=o.length;r<i&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>At(e)?e:e===""?[]:Ii(e.split(n||","),As),_addCacheSuffix:e=>{const n=xt.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},Ds=(e,n,o=tn)=>e.exists(r=>o(r,n)),Of=(e,n,o=tn)=>Dr(e,n,o).getOr(e.isNone()&&n.isNone()),qs=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},Dr=(e,n,o)=>e.isSome()&&n.isSome()?Z.some(o(e.getOrDie(),n.getOrDie())):Z.none(),Ul=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?Z.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):Z.none(),eo=(e,n)=>e?Z.some(n):Z.none(),mi=typeof window<"u"?window:Function("return this;")(),vr=(e,n)=>{let o=n??mi;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},Td=(e,n)=>{const o=e.split(".");return vr(o,n)},ms=(e,n)=>Td(e,n),_d=(e,n)=>{const o=ms(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},Gp=Object.getPrototypeOf,qp=e=>_d("HTMLElement",e),io=e=>{const n=Td("ownerDocument.defaultView",e);return qe(e)&&(qp(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Gp(e).constructor.name))},Kp=8,Ou=9,ac=11,Ic=1,Af=3,Jn=e=>e.dom.nodeName.toLowerCase(),ir=e=>e.dom.nodeType,Ba=e=>n=>ir(n)===e,Qb=e=>ir(e)===Kp||Jn(e)==="#comment",fs=e=>zr(e)&&io(e.dom),zr=Ba(Ic),Vr=Ba(Af),ev=Ba(Ou),Yp=Ba(ac),Li=e=>n=>zr(n)&&Jn(n)===e,Hg=(e,n,o)=>{if(ee(o)||yt(o)||Yn(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},ts=(e,n,o)=>{Hg(e.dom,n,o)},Fc=(e,n)=>{const o=e.dom;vt(n,(r,i)=>{Hg(o,i,r)})},ya=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},cl=(e,n)=>Z.from(ya(e,n)),Au=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},Bs=(e,n)=>{e.dom.removeAttribute(n)},Lc=e=>{const n=e.dom.attributes;return n==null||n.length===0},Cm=e=>ss(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),Df=(e,n)=>{const o=ya(e,n);return o===void 0||o===""?[]:o.split(" ")},tv=(e,n,o)=>{const i=Df(e,n).concat([o]);return ts(e,n,i.join(" ")),!0},nv=(e,n,o)=>{const r=Zt(Df(e,n),i=>i!==o);return r.length>0?ts(e,n,r.join(" ")):Bs(e,n),!1},ll=e=>e.dom.classList!==void 0,zg=e=>Df(e,"class"),ti=(e,n)=>tv(e,"class",n),Vg=(e,n)=>nv(e,"class",n),ov=(e,n)=>fn(zg(e),n)?Vg(e,n):ti(e,n),Du=(e,n)=>{ll(e)?e.dom.classList.add(n):ti(e,n)},Xp=e=>{(ll(e)?e.dom.classList:zg(e)).length===0&&Bs(e,"class")},ul=(e,n)=>{ll(e)?e.dom.classList.remove(n):Vg(e,n),Xp(e)},zy=(e,n)=>{const o=ll(e)?e.dom.classList.toggle(n):ov(e,n);return Xp(e),o},kd=(e,n)=>ll(e)&&e.dom.classList.contains(n),Vy=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const i="HTML does not have a single root node";throw console.error(i,e),new Error(i)}return Rf(r.childNodes[0])},Uy=(e,n)=>{const r=(n||document).createElement(e);return Rf(r)},Wy=(e,n)=>{const r=(n||document).createTextNode(e);return Rf(r)},Rf=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},se={fromHtml:Vy,fromTag:Uy,fromText:Wy,fromDom:Rf,fromPoint:(e,n,o)=>Z.from(e.dom.elementFromPoint(n,o)).map(Rf)},Ru=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let i=n(e);do i=i.bind(r);while(i.isSome());return o},Hi=(e,n)=>{const o=e.dom;if(o.nodeType!==Ic)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},Sm=e=>e.nodeType!==Ic&&e.nodeType!==Ou&&e.nodeType!==ac||e.childElementCount===0,Jp=(e,n)=>{const o=n===void 0?document:n.dom;return Sm(o)?[]:Wt(o.querySelectorAll(e),se.fromDom)},jy=(e,n)=>{const o=n===void 0?document:n.dom;return Sm(o)?Z.none():Z.from(o.querySelector(e)).map(se.fromDom)},oo=(e,n)=>e.dom===n.dom,wa=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},dl=e=>se.fromDom(e.dom.ownerDocument),Wl=e=>ev(e)?e:dl(e),Mu=e=>se.fromDom(Wl(e).dom.documentElement),ml=e=>se.fromDom(Wl(e).dom.defaultView),sa=e=>Z.from(e.dom.parentNode).map(se.fromDom),Zl=e=>Z.from(e.dom.parentElement).map(se.fromDom),sv=(e,n)=>{const o=ue(n)?n:Ke;let r=e.dom;const i=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,g=se.fromDom(u);if(i.push(g),o(g)===!0)break;r=u}return i},rv=e=>{const n=o=>Zt(o,r=>!oo(e,r));return sa(e).map(cr).map(n).getOr([])},Hc=e=>Z.from(e.dom.previousSibling).map(se.fromDom),fl=e=>Z.from(e.dom.nextSibling).map(se.fromDom),Qp=e=>ns(Ru(e,Hc)),Ca=e=>Ru(e,fl),cr=e=>Wt(e.dom.childNodes,se.fromDom),Od=(e,n)=>{const o=e.dom.childNodes;return Z.from(o[n]).map(se.fromDom)},Mf=e=>Od(e,0),zc=e=>Od(e,e.dom.childNodes.length-1),$a=e=>e.dom.childNodes.length,av=e=>e.dom.hasChildNodes(),Gy=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return se.fromDom(n)},Ug=e=>Yp(e)&&Te(e.dom.host),Wg=ue(Element.prototype.attachShadow)&&ue(Node.prototype.getRootNode),xm=gt(Wg),gl=Wg?e=>se.fromDom(e.dom.getRootNode()):Wl,iv=e=>Ug(e)?e:Gy(Wl(e)),A2=e=>Ug(e)?e:se.fromDom(Wl(e).dom.body),qy=e=>{const n=gl(e);return Ug(n)?Z.some(n):Z.none()},Ky=e=>se.fromDom(e.dom.host),Ad=e=>{if(xm()&&Te(e.target)){const n=se.fromDom(e.target);if(zr(n)&&e1(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return js(o)}}return Z.from(e.target)},e1=e=>Te(e.dom.shadowRoot),Em=e=>{const n=Vr(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return qy(se.fromDom(n)).fold(()=>o.body.contains(n),So(Em,Ky))};var gs=(e,n,o,r,i)=>e(o,r)?Z.some(o):ue(i)&&i(o)?Z.none():n(o,r,i);const ws=(e,n,o)=>{let r=e.dom;const i=ue(o)?o:Ke;for(;r.parentNode;){r=r.parentNode;const u=se.fromDom(r);if(n(u))return Z.some(u);if(i(u))break}return Z.none()},fi=(e,n,o)=>gs((i,u)=>u(i),ws,e,n,o),t1=(e,n)=>{const o=e.dom;return o.parentNode?Yy(se.fromDom(o.parentNode),r=>!oo(e,r)&&n(r)):Z.none()},Yy=(e,n)=>{const o=i=>n(se.fromDom(i));return _s(e.dom.childNodes,o).map(se.fromDom)},Ur=(e,n)=>{const o=r=>{for(let i=0;i<r.childNodes.length;i++){const u=se.fromDom(r.childNodes[i]);if(n(u))return Z.some(u);const g=o(r.childNodes[i]);if(g.isSome())return g}return Z.none()};return o(e.dom)},Nu=(e,n,o)=>ws(e,r=>Hi(r,n),o),gi=(e,n)=>jy(n,e),hl=(e,n,o)=>gs((i,u)=>Hi(i,u),Nu,e,n,o),cv=e=>hl(e,"[contenteditable]"),xn=(e,n=!1)=>Em(e)?e.dom.isContentEditable:cv(e).fold(gt(n),o=>ni(o)==="true"),ni=e=>e.dom.contentEditable,Pu=e=>e.style!==void 0&&ue(e.style.getPropertyValue),Tm=(e,n,o)=>{if(!ee(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);Pu(e)&&e.style.setProperty(n,o)},n1=(e,n)=>{Pu(e)&&e.style.removeProperty(n)},lv=(e,n,o)=>{const r=e.dom;Tm(r,n,o)},Sa=(e,n)=>{const o=e.dom;vt(n,(r,i)=>{Tm(o,i,r)})},Qs=(e,n)=>{const o=e.dom,i=window.getComputedStyle(o).getPropertyValue(n);return i===""&&!Em(e)?hi(o,n):i},hi=(e,n)=>Pu(e)?e.style.getPropertyValue(n):"",er=(e,n)=>{const o=e.dom,r=hi(o,n);return Z.from(r).filter(i=>i.length>0)},Zg=e=>{const n={},o=e.dom;if(Pu(o))for(let r=0;r<o.style.length;r++){const i=o.style.item(r);n[i]=o.style[i]}return n},_m=(e,n)=>{const o=e.dom;n1(o,n),Ds(cl(e,"style").map(Hl),"")&&Bs(e,"style")},Fs=e=>e.dom.offsetWidth,lr=(e,n)=>{sa(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},Vc=(e,n)=>{fl(e).fold(()=>{sa(e).each(i=>{Ks(i,n)})},r=>{lr(r,n)})},Nf=(e,n)=>{Mf(e).fold(()=>{Ks(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},Ks=(e,n)=>{e.dom.appendChild(n.dom)},o1=(e,n)=>{lr(e,n),Ks(n,e)},uv=(e,n)=>{Ie(n,(o,r)=>{const i=r===0?e:n[r-1];Vc(i,o)})},Eo=(e,n)=>{Ie(n,o=>{Ks(e,o)})},Dd=e=>{e.dom.textContent="",Ie(cr(e),n=>{fo(n)})},fo=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},Uc=e=>{const n=cr(e);n.length>0&&uv(e,n),fo(e)},jg=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,cr(se.fromDom(r))},Pf=e=>Wt(e,se.fromDom),Nn=e=>e.dom.innerHTML,km=(e,n)=>{const r=dl(e).dom,i=se.fromDom(r.createDocumentFragment()),u=jg(n,r);Eo(i,u),Dd(e),Ks(e,i)},dv=e=>{const n=se.fromTag("div"),o=se.fromDom(e.dom.cloneNode(!0));return Ks(n,o),Nn(n)},s1=(e,n,o,r,i,u,g)=>({target:e,x:n,y:o,stop:r,prevent:i,kill:u,raw:g}),Xy=e=>{const n=se.fromDom(Ad(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),i=R(r,o);return s1(n,e.clientX,e.clientY,o,r,i,e)},Jy=(e,n)=>o=>{e(o)&&n(Xy(o))},mv=(e,n,o,r,i)=>{const u=Jy(o,r);return e.dom.addEventListener(n,u,i),{unbind:Ge(r1,e,n,u,i)}},Gg=(e,n,o,r)=>mv(e,n,o,r,!1),r1=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},_=(e,n)=>({left:e,top:n,translate:(r,i)=>_(e+r,n+i)}),B=_,U=e=>{const n=e.getBoundingClientRect();return B(n.left,n.top)},oe=(e,n)=>e!==void 0?e:n!==void 0?n:0,de=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,i=n.documentElement;if(o===e.dom)return B(o.offsetLeft,o.offsetTop);const u=oe(r==null?void 0:r.pageYOffset,i.scrollTop),g=oe(r==null?void 0:r.pageXOffset,i.scrollLeft),y=oe(i.clientTop,o.clientTop),x=oe(i.clientLeft,o.clientLeft);return tt(e).translate(g-x,u-y)},tt=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?B(r.offsetLeft,r.offsetTop):Em(e)?U(n):B(0,0)},It=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return B(o,r)},pn=(e,n,o)=>{const i=(o!==void 0?o.dom:document).defaultView;i&&i.scrollTo(e,n)},hn=(e,n)=>{es().browser.isSafari()&&ue(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},sn=e=>{const n=e===void 0?window:e;return es().browser.isFirefox()?Z.none():Z.from(n.visualViewport)},hs=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),Rr=e=>{const n=e===void 0?window:e,o=n.document,r=It(se.fromDom(o));return sn(n).fold(()=>{const i=n.document.documentElement,u=i.clientWidth,g=i.clientHeight;return hs(r.left,r.top,u,g)},i=>hs(Math.max(i.pageLeft,r.left),Math.max(i.pageTop,r.top),i.width,i.height))},zi=(e,n)=>Zt(cr(e),n),jl=(e,n)=>{let o=[];return Ie(cr(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(jl(r,n))}),o},Wr=(e,n)=>Jp(n,e),D2=(e,n,o)=>Nu(e,n,o).isSome();class Wo{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,i){if(n){if(!i&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let g=n.parentNode;g&&g!==this.rootNode;g=g.parentNode)if(u=g[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const i=n.parentNode;if(i&&i!==this.rootNode)return i}}}const Vt=e=>n=>!!n&&n.nodeType===e,Gl=e=>!!e&&!Object.getPrototypeOf(e),Mt=Vt(1),Om=e=>Mt(e)&&fs(se.fromDom(e)),HM=e=>Mt(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Rd=e=>{const n=e.toLowerCase();return o=>Te(o)&&o.nodeName.toLowerCase()===n},ur=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return fn(n,r)}return!1}},Bf=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(Mt(r)){const i=r.ownerDocument.defaultView;if(i)for(let u=0;u<o.length;u++){const g=i.getComputedStyle(r,null);if((g?g.getPropertyValue(e):null)===o[u])return!0}}return!1}},a1=e=>n=>Mt(n)&&n.hasAttribute(e),Zr=(e,n)=>o=>Mt(o)&&o.getAttribute(e)===n,ql=e=>Mt(e)&&e.hasAttribute("data-mce-bogus"),fv=e=>Mt(e)&&e.getAttribute("data-mce-bogus")==="all",Bu=e=>Mt(e)&&e.tagName==="TABLE",R2=e=>n=>!!(Om(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),gv=ur(["textarea","input"]),nt=Vt(3),M2=Vt(4),Am=Vt(7),Md=Vt(8),i1=Vt(9),Cs=Vt(11),Mo=Rd("br"),oi=Rd("img"),Ia=R2("true"),Vn=R2("false"),c1=ur(["td","th"]),ra=ur(["td","th","caption"]),Ls=ur(["video","audio","object","embed"]),hv=Rd("li"),We=Rd("details"),Vi=Rd("summary"),l1="\uFEFF",so=" ",Kl=e=>e===l1,Hk=e=>e.replace(/\uFEFF/g,""),Qy=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?Z.from(u.dom.nodeValue):Z.none();return{get:o,getOption:r,set:(u,g)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=g}}})(Vr,"text"),Xl=e=>Qy.get(e),ew=e=>Qy.getOption(e),ic=(e,n)=>Qy.set(e,n),go=["td","th"],$u=["thead","tbody","tfoot"],$f=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],aa=["li","dd","dt"],tw=["ul","ol","dl"],If=["pre","script","textarea","style"],Ff=e=>{let n;return o=>(n=n||Xo(e,St),an(n,Jn(o)))},pi=e=>Jn(e)==="table",Dm=e=>zr(e)&&Jn(e)==="br",xe=Ff($f),Ui=Ff(tw),Iu=Ff(aa),Fu=Ff($u),Wi=Ff(go),yr=Ff(If),Mr=e=>{const n=[];let o=e.dom;for(;o;)n.push(se.fromDom(o)),o=o.lastChild;return n},zM=e=>{const n=Wr(e,"br"),o=Zt(Mr(e).slice(-1),Dm);n.length===o.length&&Ie(o,fo)},bi=()=>{const e=se.fromTag("br");return ts(e,"data-mce-bogus","1"),e},Lu=e=>{Dd(e),Ks(e,bi())},Jt=(e,n)=>{zc(e).each(o=>{Hc(o).each(r=>{n.isBlock(Jn(e))&&Dm(o)&&n.isBlock(Jn(r))&&fo(o)})})},jr=l1,Zi=Kl,cc=Hk,zk=e=>e.insertContent(jr,{preserve_zwsp:!0}),Vk=Mt,qg=nt,u1=e=>(qg(e)&&(e=e.parentNode),Vk(e)&&e.hasAttribute("data-mce-caret")),vi=e=>qg(e)&&Zi(e.data),ia=e=>u1(e)||vi(e),nw=e=>e.firstChild!==e.lastChild||!Mo(e.firstChild),Uk=(e,n)=>{var o;const i=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(jr),u=e.parentNode;if(n){const g=e.previousSibling;if(qg(g)){if(ia(g))return g;if(Kg(g))return g.splitText(g.data.length-1)}u==null||u.insertBefore(i,e)}else{const g=e.nextSibling;if(qg(g)){if(ia(g))return g;if(Lf(g))return g.splitText(1),g}e.nextSibling?u==null||u.insertBefore(i,e.nextSibling):u==null||u.appendChild(i)}return i},Hu=e=>{const n=e.container();return nt(n)?n.data.charAt(e.offset())===jr||e.isAtStart()&&vi(n.previousSibling):!1},pv=e=>{const n=e.container();return nt(n)?n.data.charAt(e.offset()-1)===jr||e.isAtEnd()&&vi(n.nextSibling):!1},N2=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(bi().dom);const g=n.parentNode;return o?g==null||g.insertBefore(u,n):n.nextSibling?g==null||g.insertBefore(u,n.nextSibling):g==null||g.appendChild(u),u},Lf=e=>qg(e)&&e.data[0]===jr,Kg=e=>qg(e)&&e.data[e.data.length-1]===jr,P2=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];ql(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},Nd=e=>e&&e.hasAttribute("data-mce-caret")?(P2(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,B2=e=>u1(e.startContainer),$2=Ia,ow=Vn,sw=Mo,Gr=nt,zu=ur(["script","style","textarea"]),Yg=ur(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Hf=ur(["table"]),I2=ia,dr=e=>I2(e)?!1:Gr(e)?!zu(e.parentNode):Yg(e)||sw(e)||Hf(e)||Jg(e),Xg=e=>Mt(e)&&e.getAttribute("unselectable")==="true",Jg=e=>!Xg(e)&&ow(e),rw=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(Jg(o))return!1;if($2(o))return!0}return!0},Pd=e=>Jg(e)?!ss(Or(e.getElementsByTagName("*")),(n,o)=>n||$2(o),!1):!1,ji=e=>Yg(e)||Pd(e),bv=(e,n)=>dr(e)&&rw(e,n),pl=/^[ \t\r\n]*$/,Rm=e=>pl.test(e),zf=e=>{for(const n of e)if(!Kl(n))return!1;return!0},Qg=e=>" \f	\v".indexOf(e)!==-1,Bd=e=>e===`
`||e==="\r",Wk=(e,n)=>n<e.length&&n>=0?Bd(e[n]):!1,Vf=(e,n=4,o=!0,r=!0)=>{const i=rc(" ",n),u=e.replace(/\t/g,i);return ss(u,(y,x)=>Qg(x)||x===so?y.pcIsSpace||y.str===""&&o||y.str.length===u.length-1&&r||Wk(u,y.str.length+1)?{pcIsSpace:!1,str:y.str+so}:{pcIsSpace:!0,str:y.str+" "}:{pcIsSpace:Bd(x),str:y.str+x},{pcIsSpace:!1,str:""}).str},aw=(e,n)=>{const o=se.fromDom(n),r=se.fromDom(e);return D2(r,"pre,code",Ge(oo,o))},F2=(e,n)=>nt(e)&&Rm(e.data)&&!aw(e,n),Hs=e=>Mt(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),eh=(e,n)=>dr(e)&&!F2(e,n)||Hs(e)||Jl(e),Jl=a1("data-mce-bookmark"),Mm=a1("data-mce-bogus"),Uf=Zr("data-mce-bogus","all"),Wf=e=>Zl(se.fromDom(e)).exists(n=>!xn(n)),Gi=(e,n)=>{let o=0;if(eh(e,e))return!1;{let r=e.firstChild;if(!r)return!0;const i=new Wo(r,e);do{if(n){if(Uf(r)){r=i.next(!0);continue}if(Mm(r)){r=i.next();continue}}if(Ia(r)&&Wf(r))return!1;if(Mo(r)){o++,r=i.next();continue}if(eh(r,e))return!1;r=i.next()}while(r);return o<=1}},Rs=(e,n=!0)=>Gi(e.dom,n),Ql=e=>e.toLowerCase()==="svg",iw=e=>Ql(e.nodeName),d1=e=>(e==null?void 0:e.nodeName)==="svg"?"svg":"html",vv=["svg"],Nm=()=>{let e=[];const n=()=>e[e.length-1];return{track:u=>{iw(u)&&e.push(u);let g=n();return g&&!g.contains(u)&&(e.pop(),g=n()),d1(g)},current:()=>d1(n()),reset:()=>{e=[]}}},m1="data-mce-block",yv=e=>Zt(Ar(e),n=>!/[A-Z]/.test(n)),Vu=e=>Wt(yv(e),n=>`${n}:`+Wt(vv,o=>`not(${o} ${n})`).join(":")).join(","),eu=(e,n)=>Te(n.querySelector(e))?(n.setAttribute(m1,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(m1),!1),lc=(e,n)=>{const o=Vu(e.getTransparentElements()),r=Vu(e.getBlockElements());return Zt(n.querySelectorAll(o),i=>eu(r,i))},Pm=(e,n)=>{var o;const r=n?"lastChild":"firstChild";for(let i=e[r];i;i=i[r])if(Rs(se.fromDom(i))){(o=i.parentNode)===null||o===void 0||o.removeChild(i);return}},Bm=(e,n)=>{const o=document.createRange(),r=e.parentNode;if(r){o.setStartBefore(e),o.setEndBefore(n);const i=o.extractContents();Pm(i,!0),o.setStartAfter(n),o.setEndAfter(e);const u=o.extractContents();Pm(u,!1),Rs(se.fromDom(i))||r.insertBefore(i,e),Rs(se.fromDom(n))||r.insertBefore(n,e),Rs(se.fromDom(u))||r.insertBefore(u,e),r.removeChild(e)}},L2=(e,n,o)=>{const r=e.getBlockElements(),i=se.fromDom(n),u=y=>Jn(y)in r,g=y=>oo(y,i);Ie(Pf(o),y=>{ws(y,u,g).each(x=>{const A=zi(y,I=>u(I)&&!e.isValidChild(Jn(x),Jn(I)));if(A.length>0){const I=Zl(x);Ie(A,F=>{ws(F,u,g).each(z=>{Bm(z.dom,F.dom)})}),I.each(F=>lc(e,F.dom))}})})},wv=(e,n,o)=>{Ie([...o,...Fn(e,n)?[n]:[]],r=>Ie(Wr(se.fromDom(r),r.nodeName.toLowerCase()),i=>{Gt(e,i.dom)&&Uc(i)}))},f1=(e,n)=>{const o=lc(e,n);L2(e,n,o),wv(e,n,o)},Cv=(e,n)=>{if(h1(e,n)){const o=Vu(e.getBlockElements());eu(o,n)}},H2=(e,n,o)=>{const r=u=>oo(u,se.fromDom(n)),i=sv(se.fromDom(o),r);ol(i,i.length-2).filter(zr).fold(()=>f1(e,n),u=>f1(e,u.dom))},Sv=e=>e.hasAttribute(m1),g1=(e,n)=>an(e.getTransparentElements(),n),h1=(e,n)=>Mt(n)&&g1(e,n.nodeName),Fn=(e,n)=>h1(e,n)&&Sv(n),Gt=(e,n)=>h1(e,n)&&!Sv(n),$d=(e,n)=>n.type===1&&g1(e,n.name)&&ee(n.attr(m1)),xv=es().browser,p1=e=>_s(e,zr),Zk=e=>xv.isFirefox()&&Jn(e)==="table"?p1(cr(e)).filter(n=>Jn(n)==="caption").bind(n=>p1(Ca(n)).map(o=>{const r=o.dom.offsetTop,i=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=i?-u:0})).getOr(0):0,cw=(e,n)=>e.children&&fn(e.children,n),Ho=(e,n,o)=>{let r=0,i=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&Qs(se.fromDom(e),"position")==="static"){const y=n.getBoundingClientRect();return r=y.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,i=y.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:i}}let g=n;for(;g&&g!==o&&g.nodeType&&!cw(g,o);){const y=g;r+=y.offsetLeft||0,i+=y.offsetTop||0,g=y.offsetParent}for(g=n.parentNode;g&&g!==o&&g.nodeType&&!cw(g,o);)r-=g.scrollLeft||0,i-=g.scrollTop||0,g=g.parentNode;i+=Zk(se.fromDom(n))}return{x:r,y:i}},lw=(e,n={})=>{let o=0;const r={},i=se.fromDom(e),u=Wl(i),g=ge=>{n.referrerPolicy=ge},y=ge=>{n.contentCssCors=ge},x=ge=>{Ks(iv(i),ge)},A=ge=>{const be=iv(i);gi(be,"#"+ge).each(fo)},I=ge=>Fo(r,ge).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),F=ge=>new Promise((be,ve)=>{let Se;const Ze=at._addCacheSuffix(ge),st=I(Ze);r[Ze]=st,st.count++;const Ct=(Et,Ut)=>{Ie(Et,Fr),st.status=Ut,st.passed=[],st.failed=[],Se&&(Se.onload=null,Se.onerror=null,Se=null)},Fe=()=>Ct(st.passed,2),Me=()=>Ct(st.failed,3);if(be&&st.passed.push(be),ve&&st.failed.push(ve),st.status===1)return;if(st.status===2){Fe();return}if(st.status===3){Me();return}st.status=1;const Qe=se.fromTag("link",u.dom);Fc(Qe,{rel:"stylesheet",type:"text/css",id:st.id}),n.contentCssCors&&ts(Qe,"crossOrigin","anonymous"),n.referrerPolicy&&ts(Qe,"referrerpolicy",n.referrerPolicy),Se=Qe.dom,Se.onload=Fe,Se.onerror=Me,x(Qe),ts(Qe,"href",Ze)}),z=(ge,be)=>{const ve=I(ge);r[ge]=ve,ve.count++;const Se=se.fromTag("style",u.dom);Fc(Se,{rel:"stylesheet",type:"text/css",id:ve.id}),Se.dom.innerHTML=be,x(Se)},X=ge=>Promise.allSettled(Wt(ge,ve=>F(ve).then(gt(ve)))).then(ve=>{const Se=sr(ve,Ze=>Ze.status==="fulfilled");return Se.fail.length>0?Promise.reject(Wt(Se.fail,Ze=>Ze.reason)):Wt(Se.pass,Ze=>Ze.value)}),te=ge=>{const be=at._addCacheSuffix(ge);Fo(r,be).each(ve=>{--ve.count===0&&(delete r[be],A(ve.id))})};return{load:F,loadRawCss:z,loadAll:X,unload:te,unloadRawCss:ge=>{Fo(r,ge).each(be=>{--be.count===0&&(delete r[ge],A(be.id))})},unloadAll:ge=>{Ie(ge,be=>{te(be)})},_setReferrerPolicy:g,_setContentCssCors:y}},dw=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=gl(o).dom;return Z.from(e.get(u)).getOrThunk(()=>{const g=lw(u,r);return e.set(u,g),g})}}})(),Ve=e=>e.nodeName.toLowerCase()==="span",Ev=(e,n,o)=>Te(e)&&(eh(e,n)||o.isInline(e.nodeName.toLowerCase())),jk=(e,n,o)=>{const r=new Wo(e,n).prev(!1),i=new Wo(e,n).next(!1),u=Dt(r)||Ev(r,n,o),g=Dt(i)||Ev(i,n,o);return u&&g},b1=e=>Ve(e)&&e.getAttribute("data-mce-type")==="bookmark",Gk=(e,n,o)=>nt(e)&&e.data.length>0&&jk(e,n,o),th=e=>Mt(e)?e.childNodes.length>0:!1,mw=e=>Cs(e)||i1(e),Id=(e,n,o,r)=>{var i;const u=r||n;if(Mt(n)&&b1(n))return n;const g=n.childNodes;for(let y=g.length-1;y>=0;y--)Id(e,g[y],o,u);if(Mt(n)){const y=n.childNodes;y.length===1&&b1(y[0])&&((i=n.parentNode)===null||i===void 0||i.insertBefore(y[0],n))}return!mw(n)&&!eh(n,u)&&!th(n)&&!Gk(n,u,o)&&e.remove(n),n},qk=at.makeMap,Uu=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,No=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Wu=/[<>&\"\']/g,fw=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,bl={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},Fd={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},gw={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Zf=e=>{const n=se.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},z2=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let i=0;i<r.length;i+=2){const u=String.fromCharCode(parseInt(r[i],n));if(!Fd[u]){const g="&"+r[i+1]+";";o[u]=g,o[g]=u}}return o}else return},Tv=z2("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),hw=(e,n)=>e.replace(n?Uu:No,o=>Fd[o]||o),Kk=e=>(""+e).replace(Wu,n=>Fd[n]||n),pw=(e,n)=>e.replace(n?Uu:No,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":Fd[o]||"&#"+o.charCodeAt(0)+";"),Zu=(e,n,o)=>{const r=o||Tv;return e.replace(n?Uu:No,i=>Fd[i]||r[i]||i)},jf={encodeRaw:hw,encodeAllRaw:Kk,encodeNumeric:pw,encodeNamed:Zu,getEncodeFunc:(e,n)=>{const o=z2(n)||Tv,r=(g,y)=>g.replace(y?Uu:No,x=>Fd[x]!==void 0?Fd[x]:o[x]!==void 0?o[x]:x.length>1?"&#"+((x.charCodeAt(0)-55296)*1024+(x.charCodeAt(1)-56320)+65536)+";":"&#"+x.charCodeAt(0)+";"),i=(g,y)=>Zu(g,y,o),u=qk(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?i:Zu:u.numeric?pw:hw},decode:e=>e.replace(fw,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):bl[o]||String.fromCharCode(o)):gw[n]||Tv[n]||Zf(n))},ca=(e,n)=>(e=at.trim(e),e?e.split(n||" "):[]),Ot=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),Yk=e=>{const n=/^(~)?(.+)$/;return Ka(ca(e,","),o=>{const r=n.exec(o);if(r){const i=r[1]==="~",u=i?"span":"div",g=r[2];return[{inline:i,cloneName:u,name:g}]}else return[]})},vw=e=>{let n,o,r;if(n="id accesskey class dir lang style tabindex title role",o="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"){const u="a ins del canvas map";n+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",o+=" article aside details dialog figure main header footer hgroup section nav "+u,r+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen svg"}e!=="html5-strict"&&(n+=" xml:lang",r=[r,"acronym applet basefont big font strike tt"].join(" "),o=[o,"center dir isindex noframes"].join(" "));const i=[o,r].join(" ");return{globalAttributes:n,blockContent:o,phrasingContent:r,flowContent:i}},Xk=e=>{const{globalAttributes:n,phrasingContent:o,flowContent:r}=vw(e),i={},u=(x,A,I)=>{i[x]={attributes:Xo(A,gt({})),attributesOrder:A,children:Xo(I,gt({}))}},g=(x,A="",I="")=>{const F=ca(I),z=ca(x);let X=z.length;const te=ca([n,A].join(" "));for(;X--;)u(z[X],te.slice(),F)},y=(x,A)=>{const I=ca(x),F=ca(A);let z=I.length;for(;z--;){const X=i[I[z]];for(let te=0,K=F.length;te<K;te++)X.attributes[F[te]]={},X.attributesOrder.push(F[te])}};return e!=="html5-strict"&&(Ie(ca("acronym applet basefont big font strike tt"),I=>{g(I,"",o)}),Ie(ca("center dir isindex noframes"),I=>{g(I,"",r)})),g("html","manifest","head body"),g("head","","base command link meta noscript script style title"),g("title hr noscript br"),g("base","href target"),g("link","href rel media hreflang type sizes hreflang"),g("meta","name http-equiv content charset"),g("style","media type scoped"),g("script","src async defer type charset"),g("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),g("dd div","",r),g("address dt caption","",e==="html4"?o:r),g("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),g("blockquote","cite",r),g("ol","reversed start type","li"),g("ul","","li"),g("li","value",r),g("dl","","dt dd"),g("a","href target rel media hreflang type",e==="html4"?o:r),g("q","cite",o),g("ins del","cite datetime",r),g("img","src sizes srcset alt usemap ismap width height"),g("iframe","src name width height",r),g("embed","src type width height"),g("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),g("param","name value"),g("map","name",[r,"area"].join(" ")),g("area","alt coords shape href target rel media hreflang type"),g("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),g("colgroup","span","col"),g("col","span"),g("tbody thead tfoot","","tr"),g("tr","","td th"),g("td","colspan rowspan headers",r),g("th","colspan rowspan headers scope abbr",r),g("form","accept-charset action autocomplete enctype method name novalidate target",r),g("fieldset","disabled form name",[r,"legend"].join(" ")),g("label","form for",o),g("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),g("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),g("select","disabled form multiple name required size","option optgroup"),g("optgroup","disabled label","option"),g("option","disabled label selected value"),g("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),g("menu","type label",[r,"li"].join(" ")),g("noscript","",r),e!=="html4"&&(g("wbr"),g("ruby","",[o,"rt rp"].join(" ")),g("figcaption","",r),g("mark rt rp bdi","",o),g("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),g("canvas","width height",r),g("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),g("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),g("picture","","img source"),g("source","src srcset type media sizes"),g("track","kind src srclang label default"),g("datalist","",[o,"option"].join(" ")),g("article section nav aside main header footer","",r),g("hgroup","","h1 h2 h3 h4 h5 h6"),g("figure","",[r,"figcaption"].join(" ")),g("time","datetime",o),g("dialog","open",r),g("command","type label icon disabled checked radiogroup command"),g("output","for form name",o),g("progress","value max",o),g("meter","value min max low high optimum",o),g("details","open",[r,"summary"].join(" ")),g("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(y("script","language xml:space"),y("style","xml:space"),y("object","declare classid code codebase codetype archive standby align border hspace vspace"),y("embed","align name hspace vspace"),y("param","valuetype type"),y("a","charset name rev shape coords"),y("br","clear"),y("applet","codebase archive code object alt name width height align hspace vspace"),y("img","name longdesc align border hspace vspace"),y("iframe","longdesc frameborder marginwidth marginheight scrolling align"),y("font basefont","size color face"),y("input","usemap align"),y("select"),y("textarea"),y("h1 h2 h3 h4 h5 h6 div p legend caption","align"),y("ul","type compact"),y("li","type"),y("ol dl menu dir","compact"),y("pre","width xml:space"),y("hr","align noshade size width"),y("isindex","prompt"),y("table","summary width frame rules cellspacing cellpadding align bgcolor"),y("col","width align char charoff valign"),y("colgroup","width align char charoff valign"),y("thead","align char charoff valign"),y("tr","align char charoff valign bgcolor"),y("th","axis align char charoff valign nowrap bgcolor width height"),y("form","accept"),y("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),y("tfoot","align char charoff valign"),y("tbody","align char charoff valign"),y("area","nohref"),y("body","background bgcolor text link vlink alink")),e!=="html4"&&(y("input button select textarea","autofocus"),y("input textarea","placeholder"),y("a","download"),y("link script img","crossorigin"),y("img","loading"),y("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&Ie([i.video,i.audio],x=>{delete x.children.audio,delete x.children.video}),Ie(ca("a form meter progress dfn"),x=>{i[x]&&delete i[x].children[x]}),delete i.caption.children.table,delete i.script,i},V2=e=>e==="-"?"remove":"add",Gf=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Ka(ca(e,","),o=>{const r=n.exec(o);if(r){const i=r[1],u=i?V2(i):"replace",g=r[2],y=ca(r[3],"|");return[{operation:u,name:g,validChildren:y}]}else return[]})},nh=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:i,attributesOrder:u}=n;return Ie(ca(e,"|"),g=>{const y=o.exec(g);if(y){const x={},A=y[1],I=y[2].replace(/[\\:]:/g,":"),F=y[3],z=y[4];if(A==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(I),x.required=!0),A==="-"){delete i[I],u.splice(at.inArray(u,I),1);return}if(F&&(F==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:I,value:z}),x.defaultValue=z):F==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:I,value:z}),x.forcedValue=z):F==="<"&&(x.validValues=at.makeMap(z,"?"))),r.test(I)){const X=x;n.attributePatterns=n.attributePatterns||[],X.pattern=Ot(I),n.attributePatterns.push(X)}else i[I]||u.push(I),i[I]=x}})},v1=(e,n)=>{vt(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},oh=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Ka(ca(n,","),r=>{const i=o.exec(r);if(i){const u=i[1],g=i[2],y=i[3],x=i[4],A=i[5],I={attributes:{},attributesOrder:[]};if(e.each(F=>v1(F,I)),u==="#"?I.paddEmpty=!0:u==="-"&&(I.removeEmpty=!0),x==="!"&&(I.removeEmptyAttrs=!0),A&&nh(A,I),y&&(I.outputName=g),g==="@")if(e.isNone())e=Z.some(I);else return[];return[y?{name:g,element:I,aliasName:y}:{name:g,element:I}]}else return[]})},_v={},Ld=at.makeMap,tu=at.each,y1=at.extend,Wc=at.explode,kv=(e,n={})=>{const o=Ld(e," ",Ld(e.toUpperCase()," "));return y1(o,n)},U2=e=>kv("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),sh=(e,n)=>{if(e){const o={};return ee(e)&&(e={"*":e}),tu(e,(r,i)=>{o[i]=o[i.toUpperCase()]=n==="map"?Ld(r,/[, ]/):Wc(r,/[, ]/)}),o}else return},Hd=(e={})=>{var n;const o={},r={};let i=[];const u={},g={},y=(yn,Zn,mo)=>{const Es=e[yn];if(Es)return Ld(Es,/[, ]/,Ld(Es.toUpperCase(),/[, ]/));{let Ms=_v[yn];return Ms||(Ms=kv(Zn,mo),_v[yn]=Ms),Ms}},x=(n=e.schema)!==null&&n!==void 0?n:"html5",A=Xk(x);e.verify_html===!1&&(e.valid_elements="*[*]");const I=sh(e.valid_styles),F=sh(e.invalid_styles,"map"),z=sh(e.valid_classes,"map"),X=y("whitespace_elements","pre script noscript style textarea video audio iframe object code"),te=y("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),K=y("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),ne=y("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),ge="td th iframe video audio object script code",be=y("non_empty_elements",ge+" pre svg",K),ve=y("move_caret_before_on_enter_elements",ge+" table",K),Se="h1 h2 h3 h4 h5 h6",Ze=y("text_block_elements",Se+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),st=y("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",Ze),Ct=y("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Fe=y("transparent_elements","a ins del canvas map"),Me=y("wrap_block_elements","pre "+Se);tu("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),yn=>{g[yn]=new RegExp("</"+yn+"[^>]*>","gi")});const Qe=yn=>{const Zn=Z.from(o["@"]),mo=/[*?+]/;Ie(oh(Zn,yn??""),({name:Es,element:Ms,aliasName:wu})=>{if(wu&&(o[wu]=Ms),mo.test(Es)){const ky=Ms;ky.pattern=Ot(Es),i.push(ky)}else o[Es]=Ms})},Et=yn=>{i=[],Ie(Ar(o),Zn=>{delete o[Zn]}),Qe(yn)},Ut=yn=>{delete _v.text_block_elements,delete _v.block_elements,Ie(Yk(yn??""),({inline:Zn,name:mo,cloneName:Es})=>{if(r[mo]=r[Es],u[mo]=Es,be[mo.toUpperCase()]={},be[mo]={},Zn||(st[mo.toUpperCase()]={},st[mo]={}),!o[mo]){let Ms=o[Es];Ms=y1({},Ms),delete Ms.removeEmptyAttrs,delete Ms.removeEmpty,o[mo]=Ms}vt(r,(Ms,wu)=>{Ms[Es]&&(r[wu]=Ms=y1({},r[wu]),Ms[mo]=Ms[Es])})})},Cn=yn=>{Ie(Gf(yn??""),({operation:Zn,name:mo,validChildren:Es})=>{const Ms=Zn==="replace"?{"#comment":{}}:r[mo];Ie(Es,wu=>{Zn==="remove"?delete Ms[wu]:Ms[wu]={}}),r[mo]=Ms})},Rn=yn=>{const Zn=o[yn];if(Zn)return Zn;let mo=i.length;for(;mo--;){const Es=i[mo];if(Es.pattern.test(yn))return Es}};e.valid_elements?(Et(e.valid_elements),tu(A,(yn,Zn)=>{r[Zn]=yn.children})):(tu(A,(yn,Zn)=>{o[Zn]={attributes:yn.attributes,attributesOrder:yn.attributesOrder},r[Zn]=yn.children}),tu(ca("strong/b em/i"),yn=>{const Zn=ca(yn,"/");o[Zn[1]].outputName=Zn[0]}),tu(Ct,(yn,Zn)=>{o[Zn]&&(e.padd_empty_block_inline_children&&(o[Zn].paddInEmptyBlock=!0),o[Zn].removeEmpty=!0)}),tu(ca("ol ul blockquote a table tbody"),yn=>{o[yn]&&(o[yn].removeEmpty=!0)}),tu(ca("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),yn=>{o[yn]&&(o[yn].paddEmpty=!0)}),tu(ca("span"),yn=>{o[yn].removeEmptyAttrs=!0})),delete o.svg,Ut(e.custom_elements),Cn(e.valid_children),Qe(e.extended_valid_elements),Cn("+ol[ul|ol],+ul[ul|ol]"),tu({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(yn,Zn)=>{o[Zn]&&(o[Zn].parentsRequired=ca(yn))}),e.invalid_elements&&tu(Wc(e.invalid_elements),yn=>{o[yn]&&delete o[yn]}),Rn("span")||Qe("span[!data-mce-type|*]");const _o=gt(I),Go=gt(F),Zs=gt(z),Da=gt(ne),Xr=gt(st),dt=gt(Ze),Tt=gt(Ct),to=gt(Object.seal(K)),Gn=gt(te),Ft=gt(be),Lt=gt(ve),it=gt(X),gn=gt(Fe),Wn=gt(Me),Do=gt(Object.seal(g)),qo=(yn,Zn)=>{const mo=r[yn.toLowerCase()];return!!(mo&&mo[Zn.toLowerCase()])},Ai=(yn,Zn)=>{const mo=Rn(yn);if(mo)if(Zn){if(mo.attributes[Zn])return!0;const Es=mo.attributePatterns;if(Es){let Ms=Es.length;for(;Ms--;)if(Es[Ms].pattern.test(Zn))return!0}}else return!0;return!1},Jc=yn=>an(Xr(),yn),hf=yn=>!Ps(yn,"#")&&Ai(yn)&&!Jc(yn),Di=yn=>an(Wn(),yn)||hf(yn),fd=gt(u);return{type:x,children:r,elements:o,getValidStyles:_o,getValidClasses:Zs,getBlockElements:Xr,getInvalidStyles:Go,getVoidElements:to,getTextBlockElements:dt,getTextInlineElements:Tt,getBoolAttrs:Da,getElementRule:Rn,getSelfClosingElements:Gn,getNonEmptyElements:Ft,getMoveCaretBeforeOnEnterElements:Lt,getWhitespaceElements:it,getTransparentElements:gn,getSpecialElements:Do,isValidChild:qo,isValid:Ai,isBlock:Jc,isInline:hf,isWrapper:Di,getCustomElements:fd,addValidElements:Qe,setValidElements:Et,addCustomElements:Ut,addValidChildren:Cn}},Jk=e=>({value:rh(e)}),rh=e=>xd(e,"#").toUpperCase(),qf=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},vl=e=>{const n=qf(e.red)+qf(e.green)+qf(e.blue);return Jk(n)},qi=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Qk=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,W2=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),Z2=(e,n,o,r)=>{const i=parseInt(e,10),u=parseInt(n,10),g=parseInt(o,10),y=parseFloat(r);return W2(i,u,g,y)},yw=e=>{if(e==="transparent")return Z.some(W2(0,0,0,0));const n=qi.exec(e);if(n!==null)return Z.some(Z2(n[1],n[2],n[3],"1"));const o=Qk.exec(e);return o!==null?Z.some(Z2(o[1],o[2],o[3],o[4])):Z.none()},Ki=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,ah=e=>yw(e).map(vl).map(n=>"#"+n.value).getOr(e),Ov=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,i=/\s+$/,u={};let g,y;const x=l1;n&&(g=n.getValidStyles(),y=n.getInvalidStyles());const A=(`\\" \\' \\; \\: ; : `+x).split(" ");for(let F=0;F<A.length;F++)u[A[F]]=x+F,u[x+F]=A[F];const I={parse:F=>{const z={};let X=!1;const te=e.url_converter,K=e.url_converter_scope||I,ne=(Fe,Me,Qe)=>{const Et=z[Fe+"-top"+Me];if(!Et)return;const Ut=z[Fe+"-right"+Me];if(!Ut)return;const Cn=z[Fe+"-bottom"+Me];if(!Cn)return;const Rn=z[Fe+"-left"+Me];if(!Rn)return;const _o=[Et,Ut,Cn,Rn];let Go=_o.length-1;for(;Go--&&_o[Go]===_o[Go+1];);Go>-1&&Qe||(z[Fe+Me]=Go===-1?_o[0]:_o.join(" "),delete z[Fe+"-top"+Me],delete z[Fe+"-right"+Me],delete z[Fe+"-bottom"+Me],delete z[Fe+"-left"+Me])},ge=Fe=>{const Me=z[Fe];if(!Me)return;const Qe=Me.indexOf(",")>-1?[Me]:Me.split(" ");let Et=Qe.length;for(;Et--;)if(Qe[Et]!==Qe[0])return!1;return z[Fe]=Qe[0],!0},be=(Fe,Me,Qe,Et)=>{ge(Me)&&ge(Qe)&&ge(Et)&&(z[Fe]=z[Me]+" "+z[Qe]+" "+z[Et],delete z[Me],delete z[Qe],delete z[Et])},ve=Fe=>(X=!0,u[Fe]),Se=(Fe,Me)=>(X&&(Fe=Fe.replace(/\uFEFF[0-9]/g,Qe=>u[Qe])),Me||(Fe=Fe.replace(/\\([\'\";:])/g,"$1")),Fe),Ze=Fe=>String.fromCharCode(parseInt(Fe.slice(1),16)),st=Fe=>Fe.replace(/\\[0-9a-f]+/gi,Ze),Ct=(Fe,Me,Qe,Et,Ut,Cn)=>{if(Ut=Ut||Cn,Ut)return Ut=Se(Ut),"'"+Ut.replace(/\'/g,"\\'")+"'";if(Me=Se(Me||Qe||Et||""),!e.allow_script_urls){const Rn=Me.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Rn)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Rn))return""}return te&&(Me=te.call(K,Me,"style")),"url('"+Me.replace(/\'/g,"\\'")+"')"};if(F){F=F.replace(/[\u0000-\u001F]/g,""),F=F.replace(/\\[\"\';:\uFEFF]/g,ve).replace(/\"[^\"]+\"|\'[^\']+\'/g,Me=>Me.replace(/[;:]/g,ve));let Fe;for(;Fe=r.exec(F);){r.lastIndex=Fe.index+Fe[0].length;let Me=Fe[1].replace(i,"").toLowerCase(),Qe=Fe[2].replace(i,"");if(Me&&Qe){if(Me=st(Me),Qe=st(Qe),Me.indexOf(x)!==-1||Me.indexOf('"')!==-1||!e.allow_script_urls&&(Me==="behavior"||/expression\s*\(|\/\*|\*\//.test(Qe)))continue;Me==="font-weight"&&Qe==="700"?Qe="bold":(Me==="color"||Me==="background-color")&&(Qe=Qe.toLowerCase()),ee(e.force_hex_color)&&e.force_hex_color!=="off"&&yw(Qe).each(Et=>{(e.force_hex_color==="always"||Et.alpha===1)&&(Qe=ah(Ki(Et)))}),Qe=Qe.replace(o,Ct),z[Me]=X?Se(Qe,!0):Qe}}ne("border","",!0),ne("border","-width"),ne("border","-color"),ne("border","-style"),ne("padding",""),ne("margin",""),be("border","border-width","border-style","border-color"),z.border==="medium none"&&delete z.border,z["border-image"]==="none"&&delete z["border-image"]}return z},serialize:(F,z)=>{let X="";const te=(ne,ge)=>{const be=ge[ne];if(be)for(let ve=0,Se=be.length;ve<Se;ve++){const Ze=be[ve],st=F[Ze];st&&(X+=(X.length>0?" ":"")+Ze+": "+st+";")}},K=(ne,ge)=>{if(!y||!ge)return!0;let be=y["*"];return be&&be[ne]?!1:(be=y[ge],!(be&&be[ne]))};return z&&g?(te("*",g),te(z,g)):vt(F,(ne,ge)=>{ne&&K(ge,z)&&(X+=(X.length>0?" ":"")+ge+": "+ne+";")}),X}};return I},Av={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},eO=e=>e instanceof Event||ue(e.initEvent),j2=e=>e.isDefaultPrevented===St||e.isDefaultPrevented===Ke,ww=e=>Ht(e.preventDefault)||eO(e),ih=(e,n)=>{const o=n??{};for(const r in e)an(Av,r)||(o[r]=e[r]);return Te(e.composedPath)&&(o.composedPath=()=>e.composedPath()),Te(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),Te(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},ch=(e,n,o,r)=>{var i;const u=ih(n,r);return u.type=e,Ht(u.target)&&(u.target=(i=u.srcElement)!==null&&i!==void 0?i:o),ww(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=St,ue(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=St,ue(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=St,u.stopPropagation()},j2(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?St:Ke,u.isPropagationStopped=u.cancelBubble===!0?St:Ke,u.isImmediatePropagationStopped=Ke)),u},Dv="mce-data-",tO=/^(?:mouse|contextmenu)|click/,Rv=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},lh=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},nO=e=>Te(e)&&tO.test(e.type),w1=(e,n)=>{const o=ch(e.type,e,document,n);if(nO(e)&&Dt(e.pageX)&&!Dt(e.clientX)){const r=o.target.ownerDocument||document,i=r.documentElement,u=r.body,g=o;g.pageX=e.clientX+(i&&i.scrollLeft||u&&u.scrollLeft||0)-(i&&i.clientLeft||u&&u.clientLeft||0),g.pageY=e.clientY+(i&&i.scrollTop||u&&u.scrollTop||0)-(i&&i.clientTop||u&&u.clientTop||0)}return o},Cw=(e,n,o)=>{const r=e.document,i={type:"ready"};if(o.domLoaded){n(i);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,g=()=>{lh(e,"DOMContentLoaded",g),lh(e,"load",g),o.domLoaded||(o.domLoaded=!0,n(i)),e=null};u()?g():Rv(e,"DOMContentLoaded",g),o.domLoaded||Rv(e,"load",g)};class Yi{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=Dv+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,i){const u=this;let g;const y=window,x=z=>{u.executeHandlers(w1(z||y.event),A)};if(!n||nt(n)||Md(n))return r;let A;n[u.expando]?A=n[u.expando]:(A=u.count++,n[u.expando]=A,u.events[A]={}),i=i||n;const I=o.split(" ");let F=I.length;for(;F--;){let z=I[F],X=x,te=!1,K=!1;if(z==="DOMContentLoaded"&&(z="ready"),u.domLoaded&&z==="ready"&&n.readyState==="complete"){r.call(i,w1({type:z}));continue}!u.hasFocusIn&&(z==="focusin"||z==="focusout")&&(te=!0,K=z==="focusin"?"focus":"blur",X=ne=>{const ge=w1(ne||y.event);ge.type=ge.type==="focus"?"focusin":"focusout",u.executeHandlers(ge,A)}),g=u.events[A][z],g?z==="ready"&&u.domLoaded?r(w1({type:z})):g.push({func:r,scope:i}):(u.events[A][z]=g=[{func:r,scope:i}],g.fakeName=K,g.capture=te,g.nativeHandler=X,z==="ready"?Cw(n,X,u):Rv(n,K||z,X,te))}return n=g=null,r}unbind(n,o,r){if(!n||nt(n)||Md(n))return this;const i=n[this.expando];if(i){let u=this.events[i];if(o){const g=o.split(" ");let y=g.length;for(;y--;){const x=g[y],A=u[x];if(A){if(r){let I=A.length;for(;I--;)if(A[I].func===r){const F=A.nativeHandler,z=A.fakeName,X=A.capture,te=A.slice(0,I).concat(A.slice(I+1));te.nativeHandler=F,te.fakeName=z,te.capture=X,u[x]=te}}(!r||A.length===0)&&(delete u[x],lh(n,A.fakeName||x,A.nativeHandler,A.capture))}}}else vt(u,(g,y)=>{lh(n,g.fakeName||y,g.nativeHandler,g.capture)}),u={};for(const g in u)if(an(u,g))return this;delete this.events[i];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||nt(n)||Md(n))return this;const i=w1({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(i,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!i.isPropagationStopped());return this}clean(n){if(!n||nt(n)||Md(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],i=r&&r[n.type];if(i)for(let u=0,g=i.length;u<g;u++){const y=i[u];if(y&&y.func.call(y.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Yi.Event=new Yi;const Mv=at.each,G2=at.grep,Nv="data-mce-style",UM=at.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Pv=(e,n,o)=>{Ht(o)||o===""?Bs(e,n):ts(e,n,o)},$m=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),ju=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,i=e.previousSibling;i;i=i.previousSibling){const u=i.nodeType;n&&nt(i)&&(u===r||!i.data.length)||(o++,r=u)}return o},Sw=(e,n)=>{const o=ya(n,"style"),r=e.serialize(e.parse(o),Jn(n));Pv(n,Nv,r)},uh=(e,n)=>Yn(e)?an(UM,n)?e+"":e+"px":e,Bv=(e,n,o)=>{const r=$m(n);Ht(o)||o===""?_m(e,r):lv(e,r,uh(o,r))},q2=(e,n,o)=>{const r=n.keep_values,i={set:(g,y,x)=>{const A=se.fromDom(g);ue(n.url_converter)&&Te(y)&&(y=n.url_converter.call(n.url_converter_scope||o(),String(y),x,g));const I="data-mce-"+x;Pv(A,I,y),Pv(A,x,y)},get:(g,y)=>{const x=se.fromDom(g);return ya(x,"data-mce-"+y)||ya(x,y)}},u={style:{set:(g,y)=>{const x=se.fromDom(g);r&&Pv(x,Nv,y),Bs(x,"style"),ee(y)&&Sa(x,e.parse(y))},get:g=>{const y=se.fromDom(g),x=ya(y,Nv)||ya(y,"style");return e.serialize(e.parse(x),Jn(y))}}};return r&&(u.href=u.src=i),u},Zo=(e,n={})=>{const o={},r=window,i={};let u=0;const g=!0,y=!0,x=dw.forElement(se.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),A=[],I=n.schema?n.schema:Hd({}),F=Ov({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope,force_hex_color:n.force_hex_color},n.schema),z=n.ownEvents?new Yi:Yi.Event,X=I.getBlockElements(),te=ke=>ee(ke)?an(X,ke):Mt(ke)&&(an(X,ke.nodeName)||Fn(I,ke)),K=ke=>ke&&e&&ee(ke)?e.getElementById(ke):ke,ne=ke=>{const Re=K(ke);return Te(Re)?se.fromDom(Re):null},ge=(ke,Re,ut="")=>{let rt;const Kt=ne(ke);if(Te(Kt)&&zr(Kt)){const zn=p2[Re];zn&&zn.get?rt=zn.get(Kt.dom,Re):rt=ya(Kt,Re)}return Te(rt)?rt:ut},be=ke=>{const Re=K(ke);return Ht(Re)?[]:Re.attributes},ve=(ke,Re,ut)=>{Tt(ke,rt=>{if(Mt(rt)){const Kt=se.fromDom(rt),zn=ut===""?null:ut,Ts=ya(Kt,Re),hr=p2[Re];hr&&hr.set?hr.set(Kt.dom,zn,Re):Pv(Kt,Re,zn),Ts!==zn&&n.onSetAttrib&&n.onSetAttrib({attrElm:Kt.dom,attrName:Re,attrValue:zn})}})},Se=(ke,Re)=>ke.cloneNode(Re),Ze=()=>n.root_element||e.body,st=ke=>{const Re=Rr(ke);return{x:Re.x,y:Re.y,w:Re.width,h:Re.height}},Ct=(ke,Re)=>Ho(e.body,K(ke),Re),Fe=(ke,Re,ut)=>{Tt(ke,rt=>{const Kt=se.fromDom(rt);Bv(Kt,Re,ut),n.update_styles&&Sw(F,Kt)})},Me=(ke,Re)=>{Tt(ke,ut=>{const rt=se.fromDom(ut);vt(Re,(Kt,zn)=>{Bv(rt,zn,Kt)}),n.update_styles&&Sw(F,rt)})},Qe=(ke,Re,ut)=>{const rt=K(ke);if(!(Ht(rt)||!Om(rt)&&!HM(rt)))return ut?Qs(se.fromDom(rt),$m(Re)):(Re=Re.replace(/-(\D)/g,(Kt,zn)=>zn.toUpperCase()),Re==="float"&&(Re="cssFloat"),rt.style?rt.style[Re]:void 0)},Et=ke=>{const Re=K(ke);if(!Re)return{w:0,h:0};let ut=Qe(Re,"width"),rt=Qe(Re,"height");return(!ut||ut.indexOf("px")===-1)&&(ut="0"),(!rt||rt.indexOf("px")===-1)&&(rt="0"),{w:parseInt(ut,10)||Re.offsetWidth||Re.clientWidth,h:parseInt(rt,10)||Re.offsetHeight||Re.clientHeight}},Ut=ke=>{const Re=K(ke),ut=Ct(Re),rt=Et(Re);return{x:ut.x,y:ut.y,w:rt.w,h:rt.h}},Cn=(ke,Re)=>{if(!ke)return!1;const ut=At(ke)?ke:[ke];return Yo(ut,rt=>Hi(se.fromDom(rt),Re))},Rn=(ke,Re,ut,rt)=>{const Kt=[];let zn=K(ke);rt=rt===void 0;const Ts=ut||(Ze().nodeName!=="BODY"?Ze().parentNode:null);if(ee(Re))if(Re==="*")Re=Mt;else{const hr=Re;Re=_r=>Cn(_r,hr)}for(;zn&&!(zn===Ts||Ht(zn.nodeType)||i1(zn)||Cs(zn));){if(!Re||Re(zn))if(rt)Kt.push(zn);else return[zn];zn=zn.parentNode}return rt?Kt:null},_o=(ke,Re,ut)=>{const rt=Rn(ke,Re,ut,!1);return rt&&rt.length>0?rt[0]:null},Go=(ke,Re,ut)=>{let rt=Re;if(ke){ee(Re)&&(rt=Kt=>Cn(Kt,Re));for(let Kt=ke[ut];Kt;Kt=Kt[ut])if(ue(rt)&&rt(Kt))return Kt}return null},Zs=(ke,Re)=>Go(ke,Re,"nextSibling"),Da=(ke,Re)=>Go(ke,Re,"previousSibling"),Xr=ke=>ue(ke.querySelectorAll),dt=(ke,Re)=>{var ut,rt;const Kt=(rt=(ut=K(Re))!==null&&ut!==void 0?ut:n.root_element)!==null&&rt!==void 0?rt:e;return Xr(Kt)?Or(Kt.querySelectorAll(ke)):[]},Tt=function(ke,Re,ut){const rt=ut??this;if(At(ke)){const Kt=[];return Mv(ke,(zn,Ts)=>{const hr=K(zn);hr&&Kt.push(Re.call(rt,hr,Ts))}),Kt}else{const Kt=K(ke);return Kt?Re.call(rt,Kt):!1}},to=(ke,Re)=>{Tt(ke,ut=>{vt(Re,(rt,Kt)=>{ve(ut,Kt,rt)})})},Gn=(ke,Re)=>{Tt(ke,ut=>{const rt=se.fromDom(ut);km(rt,Re)})},Ft=(ke,Re,ut,rt,Kt)=>Tt(ke,zn=>{const Ts=ee(Re)?e.createElement(Re):Re;return Te(ut)&&to(Ts,ut),rt&&(!ee(rt)&&rt.nodeType?Ts.appendChild(rt):ee(rt)&&Gn(Ts,rt)),Kt?Ts:zn.appendChild(Ts)}),Lt=(ke,Re,ut)=>Ft(e.createElement(ke),ke,Re,ut,!0),it=jf.decode,gn=jf.encodeAllRaw,Wn=(ke,Re,ut="")=>{let rt="<"+ke;for(const Kt in Re)ba(Re,Kt)&&(rt+=" "+Kt+'="'+gn(Re[Kt])+'"');return na(ut)&&an(I.getVoidElements(),ke)?rt+" />":rt+">"+ut+"</"+ke+">"},Do=ke=>{const Re=e.createElement("div"),ut=e.createDocumentFragment();ut.appendChild(Re),ke&&(Re.innerHTML=ke);let rt;for(;rt=Re.firstChild;)ut.appendChild(rt);return ut.removeChild(Re),ut},qo=(ke,Re)=>Tt(ke,ut=>{const rt=se.fromDom(ut);return Re&&Ie(cr(rt),Kt=>{Vr(Kt)&&Kt.dom.length===0?fo(Kt):lr(rt,Kt)}),fo(rt),rt.dom}),Ai=ke=>Tt(ke,Re=>{const ut=Re.attributes;for(let rt=ut.length-1;rt>=0;rt--)Re.removeAttributeNode(ut.item(rt))}),Jc=ke=>F.parse(ke),hf=(ke,Re)=>F.serialize(ke,Re),Di=ke=>{if(kg!==Zo.DOM&&e===document){if(o[ke])return;o[ke]=!0}let Re=e.getElementById("mceDefaultStyles");if(!Re){Re=e.createElement("style"),Re.id="mceDefaultStyles",Re.type="text/css";const ut=e.head;ut.firstChild?ut.insertBefore(Re,ut.firstChild):ut.appendChild(Re)}Re.styleSheet?Re.styleSheet.cssText+=ke:Re.appendChild(e.createTextNode(ke))},fd=ke=>{ke||(ke=""),Ie(ke.split(","),Re=>{i[Re]=!0,x.load(Re).catch(Rt)})},yn=(ke,Re,ut)=>{Tt(ke,rt=>{if(Mt(rt)){const Kt=se.fromDom(rt),zn=Re.split(" ");Ie(zn,Ts=>{Te(ut)?(ut?Du:ul)(Kt,Ts):zy(Kt,Ts)})}})},Zn=(ke,Re)=>{yn(ke,Re,!0)},mo=(ke,Re)=>{yn(ke,Re,!1)},Es=(ke,Re)=>{const ut=ne(ke),rt=Re.split(" ");return Te(ut)&&Js(rt,Kt=>kd(ut,Kt))},Ms=ke=>{Tt(ke,Re=>_m(se.fromDom(Re),"display"))},wu=ke=>{Tt(ke,Re=>lv(se.fromDom(Re),"display","none"))},ky=ke=>{const Re=ne(ke);return Te(Re)&&Ds(er(Re,"display"),"none")},Oy=ke=>(ke||"mce_")+u++,pf=ke=>{const Re=ne(ke);return Te(Re)?Mt(Re.dom)?Re.dom.outerHTML:dv(Re):""},bf=(ke,Re)=>{Tt(ke,ut=>{Mt(ut)&&(ut.outerHTML=Re)})},Ap=(ke,Re)=>{const ut=K(Re);return Tt(ke,rt=>{const Kt=ut==null?void 0:ut.parentNode,zn=ut==null?void 0:ut.nextSibling;return Kt&&(zn?Kt.insertBefore(rt,zn):Kt.appendChild(rt)),rt})},Ay=(ke,Re,ut)=>Tt(Re,rt=>{var Kt;const zn=At(Re)?ke.cloneNode(!0):ke;return ut&&Mv(G2(rt.childNodes),Ts=>{zn.appendChild(Ts)}),(Kt=rt.parentNode)===null||Kt===void 0||Kt.replaceChild(zn,rt),rt}),g2=(ke,Re)=>{if(ke.nodeName!==Re.toUpperCase()){const ut=Lt(Re);return Mv(be(ke),rt=>{ve(ut,rt.nodeName,ge(ke,rt.nodeName))}),Ay(ut,ke,!0),ut}else return ke},gk=(ke,Re)=>{let ut=ke;for(;ut;){let rt=Re;for(;rt&&ut!==rt;)rt=rt.parentNode;if(ut===rt)break;ut=ut.parentNode}return!ut&&ke.ownerDocument?ke.ownerDocument.documentElement:ut},Vb=ke=>{if(Mt(ke)){const Re=ke.nodeName.toLowerCase()==="a"&&!ge(ke,"href")&&ge(ke,"id");if(ge(ke,"name")||ge(ke,"data-mce-bookmark")||Re)return!0}return!1},hk=(ke,Re,ut)=>{let rt=0;if(Vb(ke))return!1;const Kt=ke.firstChild;if(Kt){const zn=new Wo(Kt,ke),Ts=I?I.getWhitespaceElements():{},hr=Re||(I?I.getNonEmptyElements():null);let _r=Kt;do{if(Mt(_r)){const Ny=_r.getAttribute("data-mce-bogus");if(Ny){_r=zn.next(Ny==="all");continue}const Py=_r.nodeName.toLowerCase();if(hr&&hr[Py]){if(Py==="br"){rt++,_r=zn.next();continue}return!1}if(Vb(_r))return!1}if(Md(_r)||nt(_r)&&!Rm(_r.data)&&(!(ut!=null&&ut.includeZwsp)||!zf(_r.data))||nt(_r)&&_r.parentNode&&Ts[_r.parentNode.nodeName]&&Rm(_r.data))return!1;_r=zn.next()}while(_r)}return rt<=1},Dp=()=>e.createRange(),Dy=(ke,Re,ut)=>{let rt=Dp(),Kt,zn;if(ke&&Re&&ke.parentNode&&Re.parentNode){const Ts=ke.parentNode;return rt.setStart(Ts,ju(ke)),rt.setEnd(Re.parentNode,ju(Re)),Kt=rt.extractContents(),rt=Dp(),rt.setStart(Re.parentNode,ju(Re)+1),rt.setEnd(Ts,ju(ke)+1),zn=rt.extractContents(),Ts.insertBefore(Id(kg,Kt,I),ke),ut?Ts.insertBefore(ut,ke):Ts.insertBefore(Re,ke),Ts.insertBefore(Id(kg,zn,I),ke),qo(ke),ut||Re}else return},gd=(ke,Re,ut,rt)=>{if(At(ke)){let Kt=ke.length;const zn=[];for(;Kt--;)zn[Kt]=gd(ke[Kt],Re,ut,rt);return zn}else return n.collect&&(ke===e||ke===r)&&A.push([ke,Re,ut,rt]),z.bind(ke,Re,ut,rt||kg)},vf=(ke,Re,ut)=>{if(At(ke)){let rt=ke.length;const Kt=[];for(;rt--;)Kt[rt]=vf(ke[rt],Re,ut);return Kt}else{if(A.length>0&&(ke===e||ke===r)){let rt=A.length;for(;rt--;){const[Kt,zn,Ts]=A[rt];ke===Kt&&(!Re||Re===zn)&&(!ut||ut===Ts)&&z.unbind(Kt,zn,Ts)}}return z.unbind(ke,Re,ut)}},Ry=(ke,Re,ut)=>z.dispatch(ke,Re,ut),My=(ke,Re,ut)=>z.dispatch(ke,Re,ut),h2=ke=>{if(ke&&Om(ke)){const Re=ke.getAttribute("data-mce-contenteditable");return Re&&Re!=="inherit"?Re:ke.contentEditable!=="inherit"?ke.contentEditable:null}else return null},kg={doc:e,settings:n,win:r,files:i,stdMode:g,boxModel:y,styleSheetLoader:x,boundEvents:A,styles:F,schema:I,events:z,isBlock:te,root:null,clone:Se,getRoot:Ze,getViewPort:st,getRect:Ut,getSize:Et,getParent:_o,getParents:Rn,get:K,getNext:Zs,getPrev:Da,select:dt,is:Cn,add:Ft,create:Lt,createHTML:Wn,createFragment:Do,remove:qo,setStyle:Fe,getStyle:Qe,setStyles:Me,removeAllAttribs:Ai,setAttrib:ve,setAttribs:to,getAttrib:ge,getPos:Ct,parseStyle:Jc,serializeStyle:hf,addStyle:Di,loadCSS:fd,addClass:Zn,removeClass:mo,hasClass:Es,toggleClass:yn,show:Ms,hide:wu,isHidden:ky,uniqueId:Oy,setHTML:Gn,getOuterHTML:pf,setOuterHTML:bf,decode:it,encode:gn,insertAfter:Ap,replace:Ay,rename:g2,findCommonAncestor:gk,run:Tt,getAttribs:be,isEmpty:hk,createRng:Dp,nodeIndex:ju,split:Dy,bind:gd,unbind:vf,fire:My,dispatch:Ry,getContentEditable:h2,getContentEditableParent:ke=>{const Re=Ze();let ut=null;for(let rt=ke;rt&&rt!==Re&&(ut=h2(rt),ut===null);rt=rt.parentNode);return ut},isEditable:ke=>{if(Te(ke)){const Re=Mt(ke)?ke:ke.parentElement;return Te(Re)&&Om(Re)&&xn(se.fromDom(Re))}else return!1},destroy:()=>{if(A.length>0){let ke=A.length;for(;ke--;){const[Re,ut,rt]=A[ke];z.unbind(Re,ut,rt)}}vt(i,(ke,Re)=>{x.unload(Re),delete i[Re]})},isChildOf:(ke,Re)=>ke===Re||Re.contains(ke),dumpRng:ke=>"startContainer: "+ke.startContainer.nodeName+", startOffset: "+ke.startOffset+", endContainer: "+ke.endContainer.nodeName+", endOffset: "+ke.endOffset},p2=q2(F,n,gt(kg));return kg};Zo.DOM=Zo(document),Zo.nodeIndex=ju;const oO=Zo.DOM,zs=0,K2=1,ps=2,dh=3;class mr{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const i=oO;let u;const g=()=>{i.remove(A),u&&(u.onerror=u.onload=u=null)},y=()=>{g(),o()},x=()=>{g(),r("Failed to load script: "+n)},A=i.uniqueId();u=document.createElement("script"),u.id=A,u.type="text/javascript",u.src=at._addCacheSuffix(n),this.settings.referrerPolicy&&i.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=y,u.onerror=x,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===ps}markDone(n){this.states[n]=ps}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=zs),new Promise((i,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:i,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(x,A)=>{Fo(o.scriptLoadedCallbacks,A).each(I=>{Ie(I,F=>F[x](A))}),delete o.scriptLoadedCallbacks[A]},i=x=>{const A=Zt(x,I=>I.status==="rejected");return A.length>0?Promise.reject(Ka(A,({reason:I})=>At(I)?I:[I])):Promise.resolve()},u=x=>Promise.allSettled(Wt(x,A=>o.states[A]===ps?(r("resolve",A),Promise.resolve()):o.states[A]===dh?(r("reject",A),Promise.reject(A)):(o.states[A]=K2,o.loadScript(A).then(()=>{o.states[A]=ps,r("resolve",A);const I=o.queue;return I.length>0?(o.queue=[],u(I).then(i)):Promise.resolve()},()=>(o.states[A]=dh,r("reject",A),Promise.reject(A)))))),g=x=>(o.loading=!0,u(x).then(A=>{o.loading=!1;const I=o.queueLoadedCallbacks.shift();return Z.from(I).each(Fr),i(A)})),y=Il(n);return o.loading?new Promise((x,A)=>{o.queueLoadedCallbacks.push(()=>{g(y).then(x,A)})}):g(y)}}mr.ScriptLoader=new mr;const Ss=e=>{let n=e;return{get:()=>n,set:i=>{n=i}}},uc=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},xw=e=>qe(e)&&an(e,"raw"),la=e=>At(e)&&e.length>1,C1={},mh=Ss("en"),Gu=()=>Fo(C1,mh.get()),yl={getData:()=>no(C1,e=>({...e})),setCode:e=>{e&&mh.set(e)},getCode:()=>mh.get(),add:(e,n)=>{let o=C1[e];o||(C1[e]=o={});const r=Wt(Ar(n),i=>i.toLowerCase());vt(n,(i,u)=>{const g=u.toLowerCase();g!==u&&uc(r,g)?(an(n,g)||(o[g]=i),o[u]=i):o[g]=i})},translate:e=>{const n=Gu().getOr({}),o=g=>ue(g)?Object.prototype.toString.call(g):r(g)?"":""+g,r=g=>g===""||g===null||g===void 0,i=g=>{const y=o(g);return an(n,y)?o(n[y]):Fo(n,y.toLowerCase()).map(o).getOr(y)},u=g=>g.replace(/{context:\w+}$/,"");if(r(e))return"";if(xw(e))return o(e.raw);if(la(e)){const g=e.slice(1),y=i(e[0]).replace(/\{([0-9]+)\}/g,(x,A)=>an(g,A)?o(g[A]):x);return u(y)}return u(i(e))},isRtl:()=>Gu().bind(e=>Fo(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>an(C1,e)},Fa=()=>{const e=[],n={},o={},r=[],i=(K,ne)=>{const ge=Zt(r,be=>be.name===K&&be.state===ne);Ie(ge,be=>be.resolve())},u=K=>an(n,K),g=K=>an(o,K),y=K=>{if(o[K])return o[K].instance},x=(K,ne)=>{const ge=yl.getCode(),be=","+(ne||"")+",";!ge||ne&&be.indexOf(","+ge+",")===-1||mr.ScriptLoader.add(n[K]+"/langs/"+ge+".js")},A=(K,ne)=>{Fa.languageLoad!==!1&&(u(K)?x(K,ne):te(K,"loaded").then(()=>x(K,ne)))},I=(K,ne)=>(e.push(ne),o[K]={instance:ne},i(K,"added"),ne),F=K=>{delete n[K],delete o[K]},z=(K,ne)=>ee(ne)?ee(K)?{prefix:"",resource:ne,suffix:""}:{prefix:K.prefix,resource:ne,suffix:K.suffix}:ne,X=(K,ne)=>{if(n[K])return Promise.resolve();let ge=ee(ne)?ne:ne.prefix+ne.resource+ne.suffix;ge.indexOf("/")!==0&&ge.indexOf("://")===-1&&(ge=Fa.baseURL+"/"+ge),n[K]=ge.substring(0,ge.lastIndexOf("/"));const be=()=>(i(K,"loaded"),Promise.resolve());return o[K]?be():mr.ScriptLoader.add(ge).then(be)},te=(K,ne="added")=>ne==="added"&&g(K)||ne==="loaded"&&u(K)?Promise.resolve():new Promise(ge=>{r.push({name:K,state:ne,resolve:ge})});return{items:e,urls:n,lookup:o,get:y,requireLangPack:A,add:I,remove:F,createUrl:z,load:X,waitFor:te}};Fa.languageLoad=!0,Fa.baseURL="",Fa.PluginManager=Fa(),Fa.ThemeManager=Fa(),Fa.ModelManager=Fa();const rO=e=>{const n=Ss(Z.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(Z.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:y=>{o(),n.set(Z.some(y))}}},aO=e=>{const n=Ss(Z.none()),o=()=>n.get().each(y=>clearInterval(y));return{clear:()=>{o(),n.set(Z.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:y=>{o(),n.set(Z.some(setInterval(y,e)))}}},Fm=()=>{const e=rO(Rt);return{...e,on:o=>e.get().each(o)}},S1=(e,n)=>{let o=null;return{cancel:()=>{ae(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{ae(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},$v=(e,n)=>{let o=null;const r=()=>{ae(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},Iv=gt("mce-annotation"),qu=gt("data-mce-annotation"),gh=gt("data-mce-annotation-uid"),hh=gt("data-mce-annotation-active"),ph=gt("data-mce-annotation-classes"),Kf=gt("data-mce-annotation-attrs"),X2=e=>n=>oo(n,e),$s=(e,n)=>{const o=e.selection.getRng(),r=se.fromDom(o.startContainer),i=se.fromDom(e.getBody()),u=n.fold(()=>"."+Iv(),x=>`[${qu()}="${x}"]`),g=Od(r,o.startOffset).getOr(r);return hl(g,u,X2(i)).bind(x=>cl(x,`${gh()}`).bind(A=>cl(x,`${qu()}`).map(I=>{const F=Q2(e,A);return{uid:A,name:I,elements:F}})))},J2=e=>zr(e)&&kd(e,Iv()),bh=(e,n)=>Au(e,"data-mce-bogus")||D2(e,'[data-mce-bogus="all"]',X2(n)),Q2=(e,n)=>{const o=se.fromDom(e.getBody()),r=Wr(o,`[${gh()}="${n}"]`);return Zt(r,i=>!bh(i,o))},Fv=(e,n)=>{const o=se.fromDom(e.getBody()),r=Wr(o,`[${qu()}="${n}"]`),i={};return Ie(r,u=>{if(!bh(u,o)){const g=ya(u,gh()),y=Fo(i,g).getOr([]);i[g]=y.concat([u])}}),i},xa=(e,n)=>{const o=Ss({}),r=()=>({listeners:[],previous:Fm()}),i=(F,z)=>{u(F,X=>(z(X),X))},u=(F,z)=>{const X=o.get(),te=Fo(X,F).getOrThunk(r),K=z(te);X[F]=K,o.set(X)},g=(F,z,X)=>{i(F,te=>{Ie(te.listeners,K=>K(!0,F,{uid:z,nodes:Wt(X,ne=>ne.dom)}))})},y=F=>{i(F,z=>{Ie(z.listeners,X=>X(!1,F))})},x=(F,z)=>{Ie(Q2(e,F),X=>{z?ts(X,hh(),"true"):Bs(X,hh())})},A=$v(()=>{const F=Jo(n.getNames());Ie(F,z=>{u(z,X=>{const te=X.previous.get();return $s(e,Z.some(z)).fold(()=>{te.each(K=>{y(z),X.previous.clear(),x(K,!1)})},({uid:K,name:ne,elements:ge})=>{Ds(te,K)||(te.each(be=>x(be,!1)),g(ne,K,ge),X.previous.set(K),x(K,!0))}),{previous:X.previous,listeners:X.listeners}})})},30);return e.on("remove",()=>{A.cancel()}),e.on("NodeChange",()=>{A.throttle()}),{addListener:(F,z)=>{u(F,X=>({previous:X.previous,listeners:X.listeners.concat([z])}))}}},dc=(e,n)=>{const o=qu(),r=u=>Z.from(u.attr(o)).bind(n.lookup),i=u=>{var g,y;u.attr(gh(),null),u.attr(qu(),null),u.attr(hh(),null);const x=Z.from(u.attr(Kf())).map(z=>z.split(",")).getOr([]),A=Z.from(u.attr(ph())).map(z=>z.split(",")).getOr([]);Ie(x,z=>u.attr(z,null));const I=(y=(g=u.attr("class"))===null||g===void 0?void 0:g.split(" "))!==null&&y!==void 0?y:[],F=wd(I,[Iv()].concat(A));u.attr("class",F.length>0?F.join(" "):null),u.attr(ph(),null),u.attr(Kf(),null)};e.serializer.addTempAttr(hh()),e.serializer.addAttributeFilter(o,u=>{for(const g of u)r(g).each(y=>{y.persistent===!1&&(g.name==="span"?g.unwrap():i(g))})})},ex=()=>{const e={};return{register:(i,u)=>{e[i]={name:i,settings:u}},lookup:i=>Fo(e,i).map(u=>u.settings),getNames:()=>Ar(e)}};let Lv=0;const Yf=e=>{const o=new Date().getTime(),r=Math.floor(Math.random()*1e9);return Lv++,e+"_"+r+Lv+String(o)},iO=(e,n)=>{Ie(n,o=>{Du(e,o)})},tx=(e,n)=>{Ie(n,o=>{ul(e,o)})},Ew=(e,n)=>se.fromDom(e.dom.cloneNode(n)),Xi=e=>Ew(e,!1),Hv=e=>Ew(e,!0),Vs=(e,n)=>{const o=se.fromTag(n),r=Cm(e);return Fc(o,r),o},nu=(e,n)=>{const o=Vs(e,n);Vc(e,o);const r=cr(e);return Eo(o,r),fo(e),o},vh=(e,n,o=Ke)=>{const r=new Wo(e,n),i=u=>{let g;do g=r[u]();while(g&&!nt(g)&&!o(g));return Z.from(g).filter(nt)};return{current:()=>Z.from(r.current()).filter(nt),next:()=>i("next"),prev:()=>i("prev"),prev2:()=>i("prev2")}},Lm=(e,n)=>{const o=n||(g=>e.isBlock(g)||Mo(g)||Vn(g)),r=(g,y,x,A)=>{if(nt(g)){const I=A(g,y,g.data);if(I!==-1)return Z.some({container:g,offset:I})}return x().bind(I=>r(I.container,I.offset,x,A))};return{backwards:(g,y,x,A)=>{const I=vh(g,A??e.getRoot(),o);return r(g,y,()=>I.prev().map(F=>({container:F,offset:F.length})),x).getOrNull()},forwards:(g,y,x,A)=>{const I=vh(g,A??e.getRoot(),o);return r(g,y,()=>I.next().map(F=>({container:F,offset:0})),x).getOrNull()}}},Xf=Math.round,Jf=e=>e?{left:Xf(e.left),top:Xf(e.top),bottom:Xf(e.bottom),right:Xf(e.right),width:Xf(e.width),height:Xf(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Vd=(e,n)=>(e=Jf(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),nx=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,Qf=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,Hm=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:Qf(n.top-e.bottom,e,n)},eg=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:Qf(n.bottom-e.top,e,n),ox=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,cO=e=>ss(e,(n,o)=>n.fold(()=>Z.some(o),r=>{const i=Math.min(o.left,r.left),u=Math.min(o.top,r.top),g=Math.max(o.right,r.right),y=Math.max(o.bottom,r.bottom);return Z.some({top:u,right:g,bottom:y,left:i,width:g-i,height:y-u})}),Z.none()),Tw=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),i=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-i)*(o-i))},lO=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),zv=(e,n,o)=>Math.min(Math.max(e,n),o),_w=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},Ji=(e,n)=>{if(Mt(e)&&e.hasChildNodes()){const o=e.childNodes,r=zv(n,0,o.length-1);return o[r]}else return e},sx=(e,n)=>{if(!(n<0&&Mt(e)&&e.hasChildNodes()))return Ji(e,n)},yh=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),rx=e=>ee(e)&&e.charCodeAt(0)>=768&&yh.test(e),uO=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},x1=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},zm=Mt,Vv=dr,Un=Bf("display","block table"),Qi=Bf("float","left right"),ou=x1(zm,Vv,yo(Qi)),kw=yo(Bf("white-space","pre pre-line pre-wrap")),To=nt,E1=Mo,Ow=Zo.nodeIndex,wr=sx,Ku=e=>e?e.createRange():Zo.DOM.createRng(),Vm=e=>ee(e)&&/[\r\n\t ]/.test(e),Aw=e=>!!e.setStart&&!!e.setEnd,Uv=e=>{const n=e.startContainer,o=e.startOffset;if(Vm(e.toString())&&kw(n.parentNode)&&nt(n)){const r=n.data;if(Vm(r[o-1])||Vm(r[o+1]))return!0}return!1},T1=e=>{const n=e.ownerDocument,o=Ku(n),r=n.createTextNode(so),i=e.parentNode;i.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=Jf(o.getBoundingClientRect());return i.removeChild(r),u},Dw=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,i=e.endOffset;if(n===o&&nt(o)&&r===0&&i===1){const u=e.cloneRange();return u.setEndAfter(o),Yu(u)}else return null},Wv=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Yu=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=Jf(r[0]):o=Jf(e.getBoundingClientRect()),!Aw(e)&&E1(e)&&Wv(o)?T1(e):Wv(o)&&Aw(e)&&(n=Dw(e))!==null&&n!==void 0?n:o},Ud=(e,n)=>{const o=Vd(e,n);return o.width=1,o.right=o.left+1,o},dO=e=>{const n=[],o=g=>{g.height!==0&&(n.length>0&&nx(g,n[n.length-1])||n.push(g))},r=(g,y)=>{const x=Ku(g.ownerDocument);if(y<g.data.length){if(rx(g.data[y]))return;if(rx(g.data[y-1])&&(x.setStart(g,y),x.setEnd(g,y+1),!Uv(x))){o(Ud(Yu(x),!1));return}}y>0&&(x.setStart(g,y-1),x.setEnd(g,y),Uv(x)||o(Ud(Yu(x),!1))),y<g.data.length&&(x.setStart(g,y),x.setEnd(g,y+1),Uv(x)||o(Ud(Yu(x),!0)))},i=e.container(),u=e.offset();if(To(i))return r(i,u),n;if(zm(i))if(e.isAtEnd()){const g=wr(i,u);To(g)&&r(g,g.data.length),ou(g)&&!E1(g)&&o(Ud(Yu(g),!1))}else{const g=wr(i,u);if(To(g)&&r(g,0),ou(g)&&e.isAtEnd())return o(Ud(Yu(g),!1)),n;const y=wr(e.container(),e.offset()-1);ou(y)&&!E1(y)&&(Un(y)||Un(g)||!ou(g))&&o(Ud(Yu(y),!1)),ou(g)&&o(Ud(Yu(g),!0))}return n},Ae=(e,n,o)=>{const r=()=>(To(e),n===0),i=()=>To(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const I=Ku(e.ownerDocument);return I.setStart(e,n),I.setEnd(e,n),I},g=()=>(o||(o=dO(Ae(e,n))),o),y=()=>g().length>0,x=I=>I&&e===I.container()&&n===I.offset(),A=I=>wr(e,I?n-1:n);return{container:gt(e),offset:gt(n),toRange:u,getClientRects:g,isVisible:y,isAtStart:r,isAtEnd:i,isEqual:x,getNode:A}};Ae.fromRangeStart=e=>Ae(e.startContainer,e.startOffset),Ae.fromRangeEnd=e=>Ae(e.endContainer,e.endOffset),Ae.after=e=>Ae(e.parentNode,Ow(e)+1),Ae.before=e=>Ae(e.parentNode,Ow(e)),Ae.isAbove=(e,n)=>Dr(js(n.getClientRects()),Pi(e.getClientRects()),Hm).getOr(!1),Ae.isBelow=(e,n)=>Dr(Pi(n.getClientRects()),js(e.getClientRects()),eg).getOr(!1),Ae.isAtStart=e=>e?e.isAtStart():!1,Ae.isAtEnd=e=>e?e.isAtEnd():!1,Ae.isTextPosition=e=>e?nt(e.container()):!1,Ae.isElementPosition=e=>!Ae.isTextPosition(e);const _1=(e,n)=>{nt(n)&&n.data.length===0&&e.remove(n)},wh=(e,n,o)=>{n.insertNode(o),_1(e,o.previousSibling),_1(e,o.nextSibling)},mc=(e,n,o)=>{const r=Z.from(o.firstChild),i=Z.from(o.lastChild);n.insertNode(o),r.each(u=>_1(e,u.previousSibling)),i.each(u=>_1(e,u.nextSibling))},Rw=(e,n,o)=>{Cs(o)?mc(e,n,o):wh(e,n,o)},rs=nt,Zv=ql,Wd=Zo.nodeIndex,Mw=e=>{const n=e.parentNode;return Zv(n)?Mw(n):n},jv=e=>e?Na(e.childNodes,(n,o)=>(Zv(o)&&o.nodeName!=="BR"?n=n.concat(jv(o)):n.push(o),n),[]):[],Nw=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&rs(o);)n+=o.data.length;return n},k1=e=>n=>e===n,Ch=e=>{let n,o;n=jv(Mw(e)),o=vs(n,k1(e),e),n=n.slice(0,o+1);const r=Na(n,(i,u,g)=>(rs(u)&&rs(n[g-1])&&i++,i),0);return n=wm(n,ur([e.nodeName])),o=vs(n,k1(e),e),o-r},Pw=e=>(rs(e)?"text()":e.nodeName.toLowerCase())+"["+Ch(e)+"]",mO=(e,n,o)=>{const r=[];for(let i=n.parentNode;i&&i!==e;i=i.parentNode)r.push(i);return r},si=(e,n)=>{let o=[],r=n.container(),i=n.offset(),u;if(rs(r))u=Nw(r,i);else{const y=r.childNodes;i>=y.length?(u="after",i=y.length-1):u="before",r=y[i]}o.push(Pw(r));let g=mO(e,r);return g=wm(g,yo(ql)),o=o.concat(Ii(g,y=>Pw(y))),o.reverse().join("/")+","+u},Cr=(e,n,o)=>{let r=jv(e);return r=wm(r,(i,u)=>!rs(i)||!rs(r[u-1])),r=wm(r,ur([n])),r[o]},ua=(e,n)=>{let o=e,r=0;for(;rs(o);){const i=o.data.length;if(n>=r&&n<=r+i){e=o,n=n-r;break}if(!rs(o.nextSibling)){e=o,n=i;break}r+=i,o=o.nextSibling}return rs(e)&&n>e.data.length&&(n=e.data.length),Ae(e,n)},ri=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),i=o.length>1?o[1]:"before",u=Na(r,(g,y)=>{const x=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(y);return x?(x[1]==="text()"&&(x[1]="#text"),Cr(g,x[1],parseInt(x[2],10))):null},e);if(!u)return null;if(!rs(u)&&u.parentNode){let g;return i==="after"?g=Wd(u)+1:g=Wd(u),Ae(u.parentNode,g)}return ua(u,parseInt(i,10))},Ea=Vn,La=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let i=n.previousSibling;i&&nt(i);i=i.previousSibling)r+=e(i.data).length;return r},Sr=(e,n,o,r,i)=>{const u=i?r.startContainer:r.endContainer;let g=i?r.startOffset:r.endOffset;const y=[],x=e.getRoot();if(nt(u))y.push(o?La(n,u,g):g);else{let A=0;const I=u.childNodes;g>=I.length&&I.length&&(A=1,g=Math.max(0,I.length-1)),y.push(e.nodeIndex(I[g],o)+A)}for(let A=u;A&&A!==x;A=A.parentNode)y.push(e.nodeIndex(A,o));return y},Bw=(e,n,o,r)=>{const i=n.dom,u=Sr(i,e,o,r,!0),g=n.isForward(),y=B2(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:g,...y};{const x=Sr(i,e,o,r,!1);return{start:u,end:x,forward:g,...y}}},O1=(e,n,o)=>{let r=0;return at.each(e.select(n),i=>{if(i.getAttribute("data-mce-bogus")!=="all"){if(i===o)return!1;r++;return}}),r},$w=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(Mt(o)&&o.nodeName==="TR"){const i=o.childNodes;o=i[Math.min(n?r:r-1,i.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},A1=e=>($w(e,!0),$w(e,!1),e),Iw=(e,n)=>{if(Mt(e)&&(e=Ji(e,n),Ea(e)))return e;if(ia(e)){nt(e)&&u1(e)&&(e=e.parentNode);let o=e.previousSibling;if(Ea(o)||(o=e.nextSibling,Ea(o)))return o}},ax=e=>Iw(e.startContainer,e.startOffset)||Iw(e.endContainer,e.endOffset),Gv=(e,n,o)=>{const r=o.getNode(),i=o.getRng();if(r.nodeName==="IMG"||Ea(r)){const g=r.nodeName;return{name:g,index:O1(o.dom,g,r)}}const u=ax(i);if(u){const g=u.tagName;return{name:g,index:O1(o.dom,g,u)}}return Bw(e,o,n,i)},Fw=e=>{const n=e.getRng();return{start:si(e.dom.getRoot(),Ae.fromRangeStart(n)),end:si(e.dom.getRoot(),Ae.fromRangeEnd(n)),forward:e.isForward()}},fO=e=>({rng:e.getRng(),forward:e.isForward()}),gO=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},ix=(e,n)=>{const o=e.dom;let r=e.getRng();const i=o.uniqueId(),u=e.isCollapsed(),g=e.getNode(),y=g.nodeName,x=e.isForward();if(y==="IMG")return{name:y,index:O1(o,y,g)};const A=A1(r.cloneRange());if(!u){A.collapse(!1);const F=gO(o,i+"_end",n);Rw(o,A,F)}r=A1(r),r.collapse(!0);const I=gO(o,i+"_start",n);return Rw(o,r,I),e.moveToBookmark({id:i,keep:!0,forward:x}),{id:i,forward:x}},hO=(e,n,o=!1)=>n===2?Gv(cc,o,e):n===3?Fw(e):n?fO(e):ix(e,!1),Sh=Ge(Gv,Ro,!0),qv=e=>{const n=u=>u(e),o=gt(e),r=()=>i,i={tag:!0,inner:e,fold:(u,g)=>g(e),isValue:St,isError:Ke,map:u=>yi.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>Z.some(e)};return i},cx=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,i)=>r(e),isValue:Ke,isError:St,map:n,mapError:r=>yi.error(r(e)),bind:n,exists:Ke,forall:St,getOr:Ro,or:Ro,getOrThunk:us,orThunk:us,getOrDie:kr(String(e)),each:Rt,toOptional:Z.none};return o},yi={value:qv,error:cx,fromOption:(e,n)=>e.fold(()=>cx(n),qv)},su={generate:e=>{if(!At(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return Ie(e,(r,i)=>{const u=Ar(r);if(u.length!==1)throw new Error("one and only one name per case");const g=u[0],y=r[g];if(o[g]!==void 0)throw new Error("duplicate key detected:"+g);if(g==="cata")throw new Error("cannot have a case named cata (sorry)");if(!At(y))throw new Error("case arguments must be an array");n.push(g),o[g]=(...x)=>{const A=x.length;if(A!==y.length)throw new Error("Wrong number of arguments to case "+g+". Expected "+y.length+" ("+y+"), got "+A);return{fold:(...F)=>{if(F.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+F.length);return F[i].apply(null,x)},match:F=>{const z=Ar(F);if(n.length!==z.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+z.join(","));if(!Js(n,te=>fn(z,te)))throw new Error("Not all branches were specified when using match. Specified: "+z.join(", ")+`
Required: `+n.join(", "));return F[g].apply(null,x)},log:F=>{console.log(F,{constructors:n,constructor:g,params:x})}}}}),o}};su.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const lt=e=>{const n=[],o=[];return Ie(e,r=>{r.fold(i=>{n.push(i)},i=>{o.push(i)})}),{errors:n,values:o}},Lw=e=>e.type==="inline-command"||e.type==="inline-format",xr=e=>e.type==="block-command"||e.type==="block-format",lx=e=>{const n=r=>yi.error({message:r,pattern:e}),o=(r,i,u)=>{if(e.format!==void 0){let g;if(At(e.format)){if(!Js(e.format,ee))return n(r+" pattern has non-string items in the `format` array");g=e.format}else if(ee(e.format))g=[e.format];else return n(r+" pattern has non-string `format` parameter");return yi.value(i(g))}else return e.cmd!==void 0?ee(e.cmd)?yi.value(u(e.cmd,e.value)):n(r+" pattern has non-string `cmd` parameter"):n(r+" pattern is missing both `format` and `cmd` parameters")};if(!qe(e))return n("Raw pattern is not an object");if(!ee(e.start))return n("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!ee(e.end))return n("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let r=e.start,i=e.end;return i.length===0&&(i=r,r=""),o("Inline",u=>({type:"inline-format",start:r,end:i,format:u}),(u,g)=>({type:"inline-command",start:r,end:i,cmd:u,value:g}))}else return e.replacement!==void 0?ee(e.replacement)?e.start.length===0?n("Replacement pattern has empty `start` parameter"):yi.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?n("Block pattern has empty `start` parameter"):o("Block",r=>({type:"block-format",start:e.start,format:r[0]}),(r,i)=>({type:"block-command",start:e.start,cmd:r,value:i}))},Kv=e=>Zt(e,xr),Hw=e=>Zt(e,Lw),wi=(e,n)=>({inlinePatterns:Hw(e),blockPatterns:Kv(e),dynamicPatternsLookup:n}),pO=e=>{const n=lt(Wt(e,lx));return Ie(n.errors,o=>console.error(o.message,o.pattern)),n.values},ux=e=>n=>{const o=e(n);return pO(o)},Ci=es().deviceType,xh=Ci.isTouch(),D1=Zo.DOM,Xu=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return ss(n,(o,r)=>{const i=r.split("="),u=i[0],g=i.length>1?i[1]:u;return o[Hl(u)]=Hl(g),o},{})},wl=e=>ze(e,RegExp),_t=e=>n=>n.options.get(e),fc=e=>ee(e)||qe(e),dx=(e,n="")=>o=>{const r=ee(o);if(r)if(o.indexOf("=")!==-1){const i=Xu(o);return{value:Fo(i,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},mx=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:dx(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:dx(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=ee(o)&&po(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=fn(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>yt(o)?{valid:!0,value:o}:ee(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||ee(o)||Pn(o,ee);return r?ee(o)?{value:Wt(o.split(","),Hl),valid:r}:At(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Jw(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=ee(o)||Pn(o,ee);return r?{value:At(o)?o:Wt(o.split(","),Hl),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=yt(o)||ee(o);return r?o===!1||Ci.isiPhone()||Ci.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!xh}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"object"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||ee(o)||ue(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||ee(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:"string"}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:fc}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:fc}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:fc}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>ee(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>Pn(o,qe)||o===!1?{value:pO(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),n("text_patterns_lookup",{processor:o=>ue(o)?{value:ux(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>Pn(o,wl)?{value:o,valid:!0}:wl(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!1}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=fn(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=fn(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("force_hex_color",{processor:o=>{const r=["always","rgb_only","off"],i=fn(r,o);return i?{value:o,valid:i}:{valid:!1,message:`Must be one of: ${r.join(", ")}.`}},default:"off"}),n("sandbox_iframes",{processor:"boolean",default:!1}),n("convert_unsafe_embeds",{processor:"boolean",default:!1}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:yl.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:D1.getAttrib(e.getElement(),"placeholder")})})},zw=_t("iframe_attrs"),fx=_t("doctype"),Vw=_t("document_base_url"),Uw=_t("body_id"),bO=_t("body_class"),Ww=_t("content_security_policy"),vO=_t("br_in_pre"),Ha=_t("forced_root_block"),R1=_t("forced_root_block_attrs"),yO=_t("newline_behavior"),wO=_t("br_newline_selector"),Zw=_t("no_newline_selector"),CO=_t("keep_styles"),gx=_t("end_container_on_empty_block"),hx=_t("automatic_uploads"),M1=_t("images_reuse_filename"),px=_t("images_replace_blob_uris"),jw=_t("icons"),tg=_t("icons_url"),SO=_t("images_upload_url"),xO=_t("images_upload_base_path"),Gw=_t("images_upload_credentials"),EO=_t("images_upload_handler"),Zd=_t("content_css_cors"),Dn=_t("referrer_policy"),qw=_t("language"),za=_t("language_url"),Yv=_t("indent_use_margin"),Kw=_t("indentation"),Yw=_t("content_css"),Xv=_t("content_style"),bx=_t("font_css"),TO=_t("directionality"),_O=_t("inline_boundaries_selector"),Eh=_t("object_resizing"),vx=_t("resize_img_proportional"),qM=_t("placeholder"),Um=_t("event_root"),kO=_t("service_message"),Th=_t("theme"),OO=_t("theme_url"),Xw=_t("model"),yx=_t("model_url"),ng=_t("inline_boundaries"),AO=_t("formats"),wx=_t("preview_styles"),Cx=_t("format_empty_lines"),_h=_t("format_noneditable_selector"),Sx=_t("custom_ui_selector"),Jw=_t("inline"),DO=_t("hidden_input"),xx=_t("submit_patch"),Ju=_t("add_form_submit_trigger"),N1=_t("add_unload_trigger"),P1=_t("custom_undo_redo_levels"),Jv=_t("disable_nodechange"),B1=_t("readonly"),Zc=_t("editable_root"),kh=_t("content_css_cors"),$1=_t("plugins"),Wm=_t("external_plugins"),Qv=_t("block_unsupported_drop"),RO=_t("visual"),MO=_t("visual_table_class"),Ex=_t("visual_anchor_class"),NO=_t("iframe_aria_text"),Qw=_t("setup"),PO=_t("init_instance_callback"),BO=_t("urlconverter_callback"),Tx=_t("auto_focus"),$O=_t("browser_spellcheck"),_x=_t("protect"),IO=_t("paste_block_drop"),e0=_t("paste_data_images"),FO=_t("paste_preprocess"),kx=_t("paste_postprocess"),Oh=_t("newdocument_content"),eC=_t("paste_webkit_styles"),tC=_t("paste_remove_styles_if_webkit"),nC=_t("paste_merge_formats"),Ox=_t("smart_paste"),oC=_t("paste_as_text"),LO=_t("paste_tab_spaces"),t0=_t("allow_html_data_urls"),n0=_t("text_patterns"),HO=_t("text_patterns_lookup"),sC=_t("noneditable_class"),Ax=_t("editable_class"),zO=_t("noneditable_regexp"),rC=_t("preserve_cdata"),VO=_t("highlight_on_focus"),Ah=_t("xss_sanitization"),UO=_t("init_content_sync"),aC=e=>e.options.isSet("text_patterns_lookup"),WO=e=>at.explode(e.options.get("font_size_style_values")),ZO=e=>at.explode(e.options.get("font_size_classes")),jO=e=>e.options.get("encoding")==="xml",Dx=e=>at.explode(e.options.get("images_file_types")),GO=_t("table_tab_navigation"),qr=_t("details_initial_state"),KM=_t("details_serialized_state"),Dh=_t("force_hex_color"),o0=_t("sandbox_iframes"),Rx=Mt,iC=nt,Mx=e=>{const n=e.parentNode;n&&n.removeChild(e)},Nx=e=>{const n=cc(e);return{count:e.length-n.length,text:n}},og=e=>{let n;for(;(n=e.data.lastIndexOf(jr))!==-1;)e.deleteData(n,1)},I1=(e,n)=>(Er(e),n),qO=(e,n)=>{const o=Nx(e.data.substr(0,n.offset())),r=Nx(e.data.substr(n.offset()));return(o.text+r.text).length>0?(og(e),Ae(e,n.offset()-o.count)):n},KO=(e,n)=>{const o=n.container(),r=Pg(Or(o.childNodes),e).map(i=>i<n.offset()?Ae(o,n.offset()-1):n).getOr(n);return Er(e),r},F1=(e,n)=>iC(e)&&n.container()===e?qO(e,n):I1(e,n),cC=(e,n)=>n.container()===e.parentNode?KO(e,n):I1(e,n),Px=(e,n)=>Ae.isTextPosition(n)?F1(e,n):cC(e,n),Er=e=>{Rx(e)&&ia(e)&&(nw(e)?e.removeAttribute("data-mce-caret"):Mx(e)),iC(e)&&(og(e),e.data.length===0&&Mx(e))},Bx=Vn,lC=Ls,YM=c1,Rh="*[contentEditable=false],video,audio,embed,object",YO=(e,n,o)=>{const r=Vd(n.getBoundingClientRect(),o);let i,u;if(e.tagName==="BODY"){const y=e.ownerDocument.documentElement;i=e.scrollLeft||y.scrollLeft,u=e.scrollTop||y.scrollTop}else{const y=e.getBoundingClientRect();i=e.scrollLeft-y.left,u=e.scrollTop-y.top}r.left+=i,r.right+=i,r.top+=u,r.bottom+=u,r.width=1;let g=n.offsetWidth-n.clientWidth;return g>0&&(o&&(g*=-1),r.left+=g,r.right+=g),r},$x=e=>{var n,o;const r=Wr(se.fromDom(e),Rh);for(let i=0;i<r.length;i++){const u=r[i].dom;let g=u.previousSibling;if(Kg(g)){const y=g.data;y.length===1?(n=g.parentNode)===null||n===void 0||n.removeChild(g):g.deleteData(y.length-1,1)}g=u.nextSibling,Lf(g)&&(g.data.length===1?(o=g.parentNode)===null||o===void 0||o.removeChild(g):g.deleteData(0,1))}},uC=(e,n,o,r)=>{const i=Fm();let u,g;const y=Ha(e),x=e.dom,A=(K,ne)=>{let ge;if(I(),YM(ne))return null;if(o(ne)){const be=N2(y,ne,K),ve=YO(n,ne,K);x.setStyle(be,"top",ve.top),g=be;const Se=x.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});x.setStyles(Se,{...ve}),x.add(n,Se),i.set({caret:Se,element:ne,before:K}),K&&x.addClass(Se,"mce-visual-caret-before"),F(),ge=ne.ownerDocument.createRange(),ge.setStart(be,0),ge.setEnd(be,0)}else return g=Uk(ne,K),ge=ne.ownerDocument.createRange(),s0(g.nextSibling)?(ge.setStart(g,0),ge.setEnd(g,0)):(ge.setStart(g,1),ge.setEnd(g,1)),ge;return ge},I=()=>{$x(n),g&&(Er(g),g=null),i.on(K=>{x.remove(K.caret),i.clear()}),u&&(clearInterval(u),u=void 0)},F=()=>{u=setInterval(()=>{i.on(K=>{r()?x.toggleClass(K.caret,"mce-visual-caret-hidden"):x.addClass(K.caret,"mce-visual-caret-hidden")})},500)};return{show:A,hide:I,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{i.on(K=>{const ne=YO(n,K.element,K.before);x.setStyles(K.caret,{...ne})})},destroy:()=>clearInterval(u)}},L1=()=>xt.browser.isFirefox(),s0=e=>Bx(e)||lC(e),Mh=e=>(s0(e)||Bu(e)&&L1())&&Zl(se.fromDom(e)).exists(xn),XO=Ia,Zm=Vn,Ix=Ls,jm=Bf("display","block table table-cell table-caption list-item"),Gm=ia,dC=u1,Fx=Mt,XM=nt,mC=dr,qm=e=>e>0,Qu=e=>e<0,H1=(e,n)=>{let o;for(;o=e(n);)if(!dC(o))return o;return null},Nh=(e,n,o,r,i)=>{const u=new Wo(e,r),g=Zm(e)||dC(e);let y;if(Qu(n)){if(g&&(y=H1(u.prev.bind(u),!0),o(y)))return y;for(;y=H1(u.prev.bind(u),i);)if(o(y))return y}if(qm(n)){if(g&&(y=H1(u.next.bind(u),!0),o(y)))return y;for(;y=H1(u.next.bind(u),i);)if(o(y))return y}return null},fC=(e,n)=>{const o=i=>XO(i.dom),r=i=>i.dom===n;return ws(se.fromDom(e),o,r).map(i=>i.dom).getOr(n)},jd=(e,n)=>{for(;e&&e!==n;){if(jm(e))return e;e=e.parentNode}return null},ru=(e,n,o)=>jd(e.container(),o)===jd(n.container(),o),z1=(e,n)=>{if(!n)return Z.none();const o=n.container(),r=n.offset();return Fx(o)?Z.from(o.childNodes[r+e]):Z.none()},r0=(e,n)=>{var o;const i=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)),i},V1=(e,n,o)=>jd(n,e)===jd(o,e),gC=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let i=o;for(;i&&i!==n;){let u=i[r];if(u&&Gm(u)&&(u=u[r]),Zm(u)||Ix(u)){if(V1(n,u,i))return u;break}if(mC(u))break;i=i.parentNode}return null},Ph=Ge(r0,!0),U1=Ge(r0,!1),hC=(e,n,o)=>{let r;const i=Ge(gC,!0,n),u=Ge(gC,!1,n),g=o.startContainer,y=o.startOffset;if(u1(g)){const x=XM(g)?g.parentNode:g,A=x.getAttribute("data-mce-caret");if(A==="before"&&(r=x.nextSibling,Mh(r)))return Ph(r);if(A==="after"&&(r=x.previousSibling,Mh(r)))return U1(r)}if(!o.collapsed)return o;if(nt(g)){if(Gm(g)){if(e===1){if(r=u(g),r)return Ph(r);if(r=i(g),r)return U1(r)}if(e===-1){if(r=i(g),r)return U1(r);if(r=u(g),r)return Ph(r)}return o}if(Kg(g)&&y>=g.data.length-1)return e===1&&(r=u(g),r)?Ph(r):o;if(Lf(g)&&y<=1)return e===-1&&(r=i(g),r)?U1(r):o;if(y===g.data.length)return r=u(g),r?Ph(r):o;if(y===0)return r=i(g),r?U1(r):o}return o},Lx=(e,n)=>z1(e?0:-1,n).filter(Zm),Km=(e,n,o)=>{const r=hC(e,n,o);return e===-1?Ae.fromRangeStart(r):Ae.fromRangeEnd(r)},a0=e=>Z.from(e.getNode()).map(se.fromDom),JO=e=>Z.from(e.getNode(!0)).map(se.fromDom),Hx=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},pC=(e,n)=>{const o=ru(e,n);return!o&&Mo(e.getNode())?!0:o};var Us;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(Us||(Us={}));const JM=Vn,Gd=nt,zx=Mt,i0=Mo,Ym=dr,Ta=ji,Bh=bv,W1=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},$h=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,bC=(e,n)=>{if(qm(e)){if(Ym(n.previousSibling)&&!Gd(n.previousSibling))return Ae.before(n);if(Gd(n))return Ae(n,0)}if(Qu(e)){if(Ym(n.nextSibling)&&!Gd(n.nextSibling))return Ae.after(n);if(Gd(n))return Ae(n,n.data.length)}return Qu(e)?i0(n)?Ae.before(n):Ae.after(n):Ae.before(n)},Ih=(e,n)=>{const o=n.nextSibling;return o&&Ym(o)?Gd(o)?Ae(o,0):Ae.before(o):sg(Us.Forwards,Ae.after(n),e)},sg=(e,n,o)=>{let r,i,u,g;if(!zx(o)||!n)return null;if(n.isEqual(Ae.after(o))&&o.lastChild){if(g=Ae.after(o.lastChild),Qu(e)&&Ym(o.lastChild)&&zx(o.lastChild))return i0(o.lastChild)?Ae.before(o.lastChild):g}else g=n;const y=g.container();let x=g.offset();if(Gd(y)){if(Qu(e)&&x>0)return Ae(y,--x);if(qm(e)&&x<y.length)return Ae(y,++x);r=y}else{if(Qu(e)&&x>0&&(i=$h(y,x-1),Ym(i)))return!Ta(i)&&(u=Nh(i,e,Bh,i),u)?Gd(u)?Ae(u,u.data.length):Ae.after(u):Gd(i)?Ae(i,i.data.length):Ae.before(i);if(qm(e)&&x<y.childNodes.length&&(i=$h(y,x),Ym(i)))return i0(i)?Ih(o,i):!Ta(i)&&(u=Nh(i,e,Bh,i),u)?Gd(u)?Ae(u,0):Ae.before(u):Gd(i)?Ae(i,0):Ae.after(i);r=i||g.getNode()}if(r&&(qm(e)&&g.isAtEnd()||Qu(e)&&g.isAtStart())&&(r=Nh(r,e,St,o,!0),Bh(r,o)))return bC(e,r);i=r&&Nh(r,e,Bh,o);const A=Ya(Zt(W1(y,o),JM));return A&&(!i||!A.contains(i))?(qm(e)?g=Ae.after(A):g=Ae.before(A),g):i?bC(e,i):null},au=e=>({next:n=>sg(Us.Forwards,n,e),prev:n=>sg(Us.Backwards,n,e)}),QO=(e,n,o)=>{const r=e?Ae.before(o):Ae.after(o);return Kr(e,n,r)},eA=e=>Mo(e)?Ae.before(e):Ae.after(e),Xm=e=>Ae.isTextPosition(e)?e.offset()===0:dr(e.getNode()),Fh=e=>{if(Ae.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return dr(e.getNode(!0))},c0=(e,n)=>!Ae.isTextPosition(e)&&!Ae.isTextPosition(n)&&e.getNode()===n.getNode(!0),ed=e=>!Ae.isTextPosition(e)&&Mo(e.getNode()),vC=(e,n,o)=>e?!c0(n,o)&&!ed(n)&&Fh(n)&&Xm(o):!c0(o,n)&&Xm(n)&&Fh(o),Kr=(e,n,o)=>{const r=au(n);return Z.from(e?r.next(o):r.prev(o))},qd=(e,n,o)=>Kr(e,n,o).bind(r=>ru(o,r,n)&&vC(e,o,r)?Kr(e,n,r):Z.some(r)),Cl=(e,n,o,r)=>qd(e,n,o).bind(i=>r(i)?Cl(e,n,i,r):Z.some(i)),Lh=(e,n)=>{const o=e?n.firstChild:n.lastChild;return nt(o)?Z.some(Ae(o,e?0:o.data.length)):o?dr(o)?Z.some(e?Ae.before(o):eA(o)):QO(e,n,o):Z.none()},Va=Ge(Kr,!0),Si=Ge(Kr,!1),ai=Ge(Lh,!0),Sl=Ge(Lh,!1),l0="_mce_caret",gc=e=>Mt(e)&&e.id===l0,rg=(e,n)=>{let o=n;for(;o&&o!==e;){if(gc(o))return o;o=o.parentNode}return null},yC=e=>ee(e.start),tA=e=>an(e,"rng"),Vx=e=>an(e,"id"),Z1=e=>an(e,"name"),Ux=e=>at.isArray(e.start),j1=e=>!Z1(e)&&yt(e.forward)?e.forward:!0,u0=(e,n)=>(Mt(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),nA=(e,n)=>{const o=Z.from(ri(e.getRoot(),n.start)),r=Z.from(ri(e.getRoot(),n.end));return Dr(o,r,(i,u)=>{const g=e.createRng();return g.setStart(i.container(),i.offset()),g.setEnd(u.container(),u.offset()),{range:g,forward:j1(n)}})},Wx=(e,n)=>{var o;const i=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(jr);e.appendChild(i),n.setStart(i,0),n.setEnd(i,0)},oA=e=>!e.hasChildNodes(),QM=(e,n)=>Sl(e).fold(Ke,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),Zx=(e,n,o)=>oA(n)&&rg(e,n)?(Wx(n,o),!0):!1,Ln=(e,n,o,r)=>{const i=o[n?"start":"end"],u=e.getRoot();if(i){let g=u,y=i[0];for(let x=i.length-1;g&&x>=1;x--){const A=g.childNodes;if(Zx(u,g,r))return!0;if(i[x]>A.length-1)return Zx(u,g,r)?!0:QM(g,r);g=A[i[x]]}nt(g)&&(y=Math.min(i[0],g.data.length)),Mt(g)&&(y=Math.min(i[0],g.childNodes.length)),n?r.setStart(g,y):r.setEnd(g,y)}return!0},iu=e=>nt(e)&&e.data.length>0,ag=(e,n,o)=>{const r=e.get(o.id+"_"+n),i=r==null?void 0:r.parentNode,u=o.keep;if(r&&i){let g,y;if(n==="start"?u?r.hasChildNodes()?(g=r.firstChild,y=1):iu(r.nextSibling)?(g=r.nextSibling,y=0):iu(r.previousSibling)?(g=r.previousSibling,y=r.previousSibling.data.length):(g=i,y=e.nodeIndex(r)+1):(g=i,y=e.nodeIndex(r)):u?r.hasChildNodes()?(g=r.firstChild,y=1):iu(r.previousSibling)?(g=r.previousSibling,y=r.previousSibling.data.length):(g=i,y=e.nodeIndex(r)):(g=i,y=e.nodeIndex(r)),!u){const x=r.previousSibling,A=r.nextSibling;at.each(at.grep(r.childNodes),F=>{nt(F)&&(F.data=F.data.replace(/\uFEFF/g,""))});let I;for(;I=e.get(o.id+"_"+n);)e.remove(I,!0);if(nt(A)&&nt(x)&&!xt.browser.isOpera()){const F=x.data.length;x.appendData(A.data),e.remove(A),g=x,y=F}}return Z.some(Ae(g,y))}else return Z.none()},wC=(e,n)=>{const o=e.createRng();return Ln(e,!0,n,o)&&Ln(e,!1,n,o)?Z.some({range:o,forward:j1(n)}):Z.none()},jx=(e,n)=>{const o=ag(e,"start",n),r=ag(e,"end",n);return Dr(o,r.or(o),(i,u)=>{const g=e.createRng();return g.setStart(u0(e,i.container()),i.offset()),g.setEnd(u0(e,u.container()),u.offset()),{range:g,forward:j1(n)}})},G1=(e,n)=>Z.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),sA=(e,n)=>{const o=e.dom;if(n){if(Ux(n))return wC(o,n);if(yC(n))return nA(o,n);if(Vx(n))return jx(o,n);if(Z1(n))return G1(o,n);if(tA(n))return Z.some({range:n.rng,forward:j1(n)})}return Z.none()},Hh=(e,n,o)=>hO(e,n,o),d0=(e,n)=>{sA(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},hc=e=>Mt(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",m0=(e=>n=>e===n)(so),zh=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Jm=e=>!zh(e)&&!m0(e)&&!Kl(e),f0=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},g0=e=>Ka(e,n=>{const o=_w(n);return o?[se.fromDom(o)]:[]}),ig=e=>f0(e).length>1,rA=e=>Zt(g0(e),Wi),Gx=e=>Wr(e,"td[data-mce-selected],th[data-mce-selected]"),aA=(e,n)=>{const o=Gx(n);return o.length>0?o:rA(e)},Vh=e=>aA(f0(e.selection.getSel()),se.fromDom(e.getBody())),Kd=(e,n)=>Nu(e,"table",n),iA=e=>{const n=e.startContainer,o=e.startOffset;return nt(n)?o===0?Z.some(se.fromDom(n)):Z.none():Z.from(n.childNodes[o]).map(se.fromDom)},cA=e=>{const n=e.endContainer,o=e.endOffset;return nt(n)?o===n.data.length?Z.some(se.fromDom(n)):Z.none():Z.from(n.childNodes[o-1]).map(se.fromDom)},qx=e=>Mf(e).fold(gt([e]),n=>[e].concat(qx(n))),CC=e=>zc(e).fold(gt([e]),n=>Jn(n)==="br"?Hc(n).map(o=>[e].concat(CC(o))).getOr([]):[e].concat(CC(n))),SC=(e,n)=>Dr(iA(n),cA(n),(o,r)=>{const i=_s(qx(e),Ge(oo,o)),u=_s(CC(e),Ge(oo,r));return i.isSome()&&u.isSome()}).getOr(!1),xC=(e,n,o,r)=>{const i=o,u=new Wo(o,i),g=Uo(e.schema.getMoveCaretBeforeOnEnterElements(),(x,A)=>!fn(["td","th","table"],A.toLowerCase()));let y=o;do{if(nt(y)&&at.trim(y.data).length!==0){r?n.setStart(y,0):n.setEnd(y,y.data.length);return}if(g[y.nodeName]){r?n.setStartBefore(y):y.nodeName==="BR"?n.setEndBefore(y):n.setEndAfter(y);return}}while(y=r?u.next():u.prev());i.nodeName==="BODY"&&(r?n.setStart(i,0):n.setEnd(i,i.childNodes.length))},h0=e=>{const n=e.selection.getSel();return Te(n)&&n.rangeCount>0},Qm=(e,n)=>{const o=Vh(e);o.length>0?Ie(o,r=>{const i=r.dom,u=e.dom.createRng();u.setStartBefore(i),u.setEndAfter(i),n(u,!0)}):n(e.selection.getRng(),!1)},Kx=(e,n,o)=>{const r=ix(e,n);o(r),e.moveToBookmark(r)},q1=e=>Yn(e==null?void 0:e.nodeType),EC=e=>Mt(e)&&!hc(e)&&!gc(e)&&!ql(e),lA=(e,n)=>{if(EC(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},K1=(e,n,o)=>{const{selection:r,dom:i}=e,u=r.getNode(),g=Vn(u);Kx(r,!0,()=>{n()}),g&&Vn(u)&&i.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&uA(i,r)},uA=(e,n)=>{var o,r;const i=n.getRng(),{startContainer:u,startOffset:g}=i,y=n.getNode();if(!lA(e,y)&&Mt(u)){const x=u.childNodes,A=e.getRoot();let I;if(g<x.length){const F=x[g];I=new Wo(F,(o=e.getParent(F,e.isBlock))!==null&&o!==void 0?o:A)}else{const F=x[x.length-1];I=new Wo(F,(r=e.getParent(F,e.isBlock))!==null&&r!==void 0?r:A),I.next(!0)}for(let F=I.current();F;F=I.next()){if(e.getContentEditable(F)==="false")return;if(nt(F)&&!Ys(F)){i.setStart(F,0),n.setRng(i);return}}}},wt=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(Mt(e)||!Ys(e))return e}},fr=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||Fn(e,n),Yd=(e,n,o)=>e.schema.isValidChild(n,o),Ys=(e,n=!1)=>{if(Te(e)&&nt(e)){const o=n?e.data.replace(/ /g," "):e.data;return Rm(o)}else return!1},jc=e=>Te(e)&&nt(e)&&e.length===0,p0=(e,n)=>{const o="[data-mce-cef-wrappable]",r=_h(e),i=na(r)?o:`${o},${r}`;return Hi(se.fromDom(n),i)},Y1=(e,n)=>{const o=e.dom;return EC(n)&&o.getContentEditable(n)==="false"&&p0(e,n)&&o.select('[contenteditable="true"]',n).length===0},cu=(e,n)=>ue(e)?e(n):(Te(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),b0=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),v0=(e,n)=>{if(Ht(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=ah(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},Uh=(e,n,o)=>{const r=e.getStyle(n,o);return v0(r,o)},Yx=(e,n)=>{let o;return e.getParent(n,r=>Mt(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},X1=(e,n,o)=>e.getParents(n,o,e.getRoot()),TC=(e,n,o)=>{const r=e.formatter.get(n);return Te(r)&&Yo(r,o)},_C=(e,n)=>TC(e,n,r=>{const i=u=>ue(u)||u.length>1&&u.charAt(0)==="%";return Yo(["styles","attributes"],u=>Fo(r,u).exists(g=>{const y=At(g)?g:sl(g);return Yo(y,i)}))}),dA=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],i=u=>Uo(u,(g,y)=>Yo(r,x=>x===y));return TC(e,n,u=>{const g=i(u);return TC(e,o,y=>{const x=i(y);return rl(g,x)})})},lu=e=>ba(e,"block"),y0=e=>lu(e)&&e.wrapper===!0,Wh=e=>lu(e)&&e.wrapper!==!0,da=e=>ba(e,"selector"),tr=e=>ba(e,"inline"),w0=e=>da(e)&&tr(e)&&Ds(Fo(e,"mixed"),!0),J1=e=>da(e)&&e.expand!==!1&&!tr(e),C0=e=>{const n=[];let o=e;for(;o;){if(nt(o)&&o.data!==jr||o.childNodes.length>1)return[];Mt(o)&&n.push(o),o=o.firstChild}return n},Q1=e=>C0(e).length>0,eb=e=>gc(e.dom)&&Q1(e.dom),Zh=hc,Xx=X1,tb=Ys,Jx=fr,Qx=e=>Mo(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,eE=(e,n)=>{let o=n;for(;o;){if(Mt(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},Gc=(e,n,o,r)=>{const i=n.data;if(e){for(let u=o;u>0;u--)if(r(i.charAt(u-1)))return u}else for(let u=o;u<i.length;u++)if(r(i.charAt(u)))return u;return-1},_a=(e,n,o)=>Gc(e,n,o,r=>m0(r)||zh(r)),xl=(e,n,o)=>Gc(e,n,o,Jm),xi=(e,n,o,r,i,u)=>{let g;const y=e.getParent(o,e.isBlock)||n,x=(I,F,z)=>{const X=Lm(e),te=i?X.backwards:X.forwards;return Z.from(te(I,F,(K,ne)=>Zh(K.parentNode)?-1:(g=K,z(i,K,ne)),y))};return x(o,r,_a).bind(I=>u?x(I.container,I.offset+(i?-1:0),xl):Z.some(I)).orThunk(()=>g?Z.some({container:g,offset:i?0:g.length}):Z.none())},nb=(e,n,o,r,i)=>{const u=r[i];nt(r)&&na(r.data)&&u&&(r=u);const g=Xx(e,r);for(let y=0;y<g.length;y++)for(let x=0;x<n.length;x++){const A=n[x];if(!(Te(A.collapsed)&&A.collapsed!==o.collapsed)&&da(A)&&e.is(g[y],A.selector))return g[y]}return r},S0=(e,n,o,r)=>{var i;let u=o;const g=e.getRoot(),y=n[0];if(lu(y)&&(u=y.wrapper?null:e.getParent(o,y.block,g)),!u){const x=(i=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&i!==void 0?i:g;u=e.getParent(nt(o)?o.parentNode:o,A=>A!==g&&Jx(e.schema,A),x)}if(u&&lu(y)&&y.wrapper&&(u=Xx(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!b0(u,"br")););return u||o},tE=(e,n,o,r)=>{const i=o.parentNode;return Te(o[r])?!1:i===n||Ht(i)||e.isBlock(i)?!0:tE(e,n,i,r)},ob=(e,n,o,r,i)=>{let u=o;const g=i?"previousSibling":"nextSibling",y=e.getRoot();if(nt(o)&&!tb(o)&&(i?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let x=u[g];x;x=x[g]){const A=nt(x)&&!tE(e,y,x,g);if(!Zh(x)&&!Qx(x)&&!tb(x,A))return u}if(u===y||u.parentNode===y){o=u;break}u=u.parentNode}return o},mA=e=>Zh(e.parentNode)||Zh(e),Xd=(e,n,o,r=!1)=>{let{startContainer:i,startOffset:u,endContainer:g,endOffset:y}=n;const x=o[0];return Mt(i)&&i.hasChildNodes()&&(i=Ji(i,u),nt(i)&&(u=0)),Mt(g)&&g.hasChildNodes()&&(g=Ji(g,n.collapsed?y:y-1),nt(g)&&(y=g.data.length)),i=eE(e,i),g=eE(e,g),mA(i)&&(i=Zh(i)?i:i.parentNode,n.collapsed?i=i.previousSibling||i:i=i.nextSibling||i,nt(i)&&(u=n.collapsed?i.length:0)),mA(g)&&(g=Zh(g)?g:g.parentNode,n.collapsed?g=g.nextSibling||g:g=g.previousSibling||g,nt(g)&&(y=n.collapsed?0:g.length)),n.collapsed&&(xi(e,e.getRoot(),i,u,!0,r).each(({container:F,offset:z})=>{i=F,u=z}),xi(e,e.getRoot(),g,y,!1,r).each(({container:F,offset:z})=>{g=F,y=z})),(tr(x)||x.block_expand)&&((!tr(x)||!nt(i)||u===0)&&(i=ob(e,o,i,u,!0)),(!tr(x)||!nt(g)||y===g.data.length)&&(g=ob(e,o,g,y,!1))),J1(x)&&(i=nb(e,o,n,i,"previousSibling"),g=nb(e,o,n,g,"nextSibling")),(lu(x)||da(x))&&(i=S0(e,o,i,"previousSibling"),g=S0(e,o,g,"nextSibling"),lu(x)&&(e.isBlock(i)||(i=ob(e,o,i,u,!0)),e.isBlock(g)||(g=ob(e,o,g,y,!1)))),Mt(i)&&i.parentNode&&(u=e.nodeIndex(i),i=i.parentNode),Mt(g)&&g.parentNode&&(y=e.nodeIndex(g)+1,g=g.parentNode),{startContainer:i,startOffset:u,endContainer:g,endOffset:y}},sb=(e,n,o)=>{var r;const i=n.startOffset,u=Ji(n.startContainer,i),g=n.endOffset,y=Ji(n.endContainer,g-1),x=ne=>{const ge=ne[0];nt(ge)&&ge===u&&i>=ge.data.length&&ne.splice(0,1);const be=ne[ne.length-1];return g===0&&ne.length>0&&be===y&&nt(be)&&ne.splice(ne.length-1,1),ne},A=(ne,ge,be)=>{const ve=[];for(;ne&&ne!==be;ne=ne[ge])ve.push(ne);return ve},I=(ne,ge)=>e.getParent(ne,be=>be.parentNode===ge,ge),F=(ne,ge,be)=>{const ve=be?"nextSibling":"previousSibling";for(let Se=ne,Ze=Se.parentNode;Se&&Se!==ge;Se=Ze){Ze=Se.parentNode;const st=A(Se===ne?Se:Se[ve],ve);st.length&&(be||st.reverse(),o(x(st)))}};if(u===y)return o(x([u]));const z=(r=e.findCommonAncestor(u,y))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,y))return F(u,z,!0);if(e.isChildOf(y,u))return F(y,z);const X=I(u,z)||u,te=I(y,z)||y;F(u,X,!0);const K=A(X===u?X:X.nextSibling,"nextSibling",te===y?te.nextSibling:te);K.length&&o(x(K)),F(y,te)},kC=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],nE=e=>Vr(e)&&Xl(e)===jr,oE=(e,n,o,r)=>sa(n).fold(()=>"skipping",i=>r==="br"||nE(n)?"valid":J2(n)?"existing":gc(n.dom)?"caret":Yo(kC,u=>Hi(n,u))?"valid-block":!Yd(e,o,r)||!Yd(e,Jn(i),o)?"invalid-child":"valid"),OC=(e,n)=>{const o=Xd(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},x0=(e,n,o,r,i,u)=>{const{uid:g=n,...y}=o;Du(e,Iv()),ts(e,`${gh()}`,g),ts(e,`${qu()}`,r);const{attributes:x={},classes:A=[]}=i(g,y);if(Fc(e,x),iO(e,A),u){A.length>0&&ts(e,`${ph()}`,A.join(","));const I=Ar(x);I.length>0&&ts(e,`${Kf()}`,I.join(","))}},Po=e=>{ul(e,Iv()),Bs(e,`${gh()}`),Bs(e,`${qu()}`),Bs(e,`${hh()}`);const n=cl(e,`${Kf()}`).map(r=>r.split(",")).getOr([]),o=cl(e,`${ph()}`).map(r=>r.split(",")).getOr([]);Ie(n,r=>Bs(e,r)),tx(e,o),Bs(e,`${ph()}`),Bs(e,`${Kf()}`)},Jd=(e,n,o,r,i)=>{const u=se.fromTag("span",e);return x0(u,n,o,r,i,!1),u},sE=(e,n,o,r,i,u)=>{const g=[],y=Jd(e.getDoc(),o,u,r,i),x=Fm(),A=()=>{x.clear()},I=()=>x.get().getOrThunk(()=>{const te=Xi(y);return g.push(te),x.set(te),te}),F=te=>{Ie(te,z)},z=te=>{switch(oE(e,te,"span",Jn(te))){case"invalid-child":{A();const ne=cr(te);F(ne),A();break}case"valid-block":{A(),x0(te,o,u,r,i,!0);break}case"valid":{const ne=I();o1(te,ne);break}}},X=te=>{const K=Wt(te,se.fromDom);F(K)};return sb(e.dom,n,te=>{A(),X(te)}),g},AC=(e,n,o,r)=>{e.undoManager.transact(()=>{const i=e.selection,u=i.getRng(),g=Vh(e).length>0,y=Yf("mce-annotation");if(u.collapsed&&!g&&OC(e,u),i.getRng().collapsed&&!g){const x=Jd(e.getDoc(),y,r,n,o.decorate);km(x,so),i.getRng().insertNode(x.dom),i.select(x.dom)}else Kx(i,!1,()=>{Qm(e,x=>{sE(e,x,y,n,o.decorate,r)})})})},DC=e=>{const n=ex();dc(e,n);const o=xa(e,n),r=Li("span"),i=u=>{Ie(u,g=>{r(g)?Uc(g):Po(g)})};return{register:(u,g)=>{n.register(u,g)},annotate:(u,g)=>{n.lookup(u).each(y=>{AC(e,u,y,g)})},annotationChanged:(u,g)=>{o.addListener(u,g)},remove:u=>{$s(e,Z.some(u)).each(({elements:g})=>{const y=e.selection.getBookmark();i(g),e.selection.moveToBookmark(y)})},removeAll:u=>{const g=e.selection.getBookmark();vt(Fv(e,u),(y,x)=>{i(y)}),e.selection.moveToBookmark(g)},getAll:u=>{const g=Fv(e,u);return no(g,y=>Wt(y,x=>x.dom))}}},cg=e=>({getBookmark:Ge(Hh,e),moveToBookmark:Ge(d0,e)});cg.isBookmarkNode=hc;const RC=(e,n,o)=>o.collapsed?!1:Yo(o.getClientRects(),r=>ox(r,e,n)),MC=(e,n)=>e.dispatch("PreProcess",n),fA=(e,n)=>e.dispatch("PostProcess",n),jh=e=>{e.dispatch("remove")},Gh=e=>{e.dispatch("detach")},NC=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},PC=(e,n,o,r,i)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:i})},El=(e,n,o,r,i)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:i})},ef=e=>{e.dispatch("PreInit")},gA=e=>{e.dispatch("PostRender")},rb=e=>{e.dispatch("Init")},hA=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},ec=(e,n,o)=>{e.dispatch(n,o)},ka=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},lg=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},eN=(e,n)=>e.dispatch("BeforeSetContent",n),rE=(e,n)=>e.dispatch("SetContent",n),pA=(e,n)=>e.dispatch("BeforeGetContent",n),Bn=(e,n)=>e.dispatch("GetContent",n),BC=(e,n)=>{e.dispatch("AutocompleterStart",n)},aE=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},$C=e=>{e.dispatch("AutocompleterEnd")},bA=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),vA=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),iE=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),yA=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),kt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||kt.metaKeyPressed(e),metaKeyPressed:e=>xt.os.isMacOS()||xt.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},tf="data-mce-selected",cE="table,img,figure.image,hr,video,span.mce-preview-object,details",ab=Math.abs,ib=Math.round,wA={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},tN=e=>e.type==="longpress"||e.type.indexOf("touch")===0,nN=(e,n)=>{const o=n.dom,r=n.getDoc(),i=document,u=n.getBody();let g,y,x,A,I,F,z,X,te,K,ne,ge,be,ve,Se,Ze,st;const Ct=it=>Te(it)&&(oi(it)||o.is(it,"figure.image")),Fe=it=>Ls(it)||o.hasClass(it,"mce-preview-object"),Me=(it,gn)=>{if(tN(it)){const Wn=it.touches[0];return Ct(it.target)&&!RC(Wn.clientX,Wn.clientY,gn)}else return Ct(it.target)&&!RC(it.clientX,it.clientY,gn)},Qe=it=>{const gn=it.target;Me(it,n.selection.getRng())&&!it.isDefaultPrevented()&&n.selection.select(gn)},Et=it=>o.hasClass(it,"mce-preview-object")&&Te(it.firstElementChild)?[it,it.firstElementChild]:o.is(it,"figure.image")?[it.querySelector("img")]:[it],Ut=it=>{const gn=Eh(n);return!gn||it.getAttribute("data-mce-resize")==="false"||it===n.getBody()?!1:o.hasClass(it,"mce-preview-object")&&Te(it.firstElementChild)?Hi(se.fromDom(it.firstElementChild),gn):Hi(se.fromDom(it),gn)},Cn=it=>Fe(it)?o.create("img",{src:xt.transparentSrc}):it.cloneNode(!0),Rn=(it,gn,Wn)=>{if(Te(Wn)){const Do=Et(it);Ie(Do,qo=>{qo.style[gn]||!n.schema.isValid(qo.nodeName.toLowerCase(),gn)?o.setStyle(qo,gn,Wn):o.setAttrib(qo,gn,""+Wn)})}},_o=(it,gn,Wn)=>{Rn(it,"width",gn),Rn(it,"height",Wn)},Go=it=>{let gn,Wn,Do,qo,Ai;gn=it.screenX-F,Wn=it.screenY-z,ve=gn*A[2]+K,Se=Wn*A[3]+ne,ve=ve<5?5:ve,Se=Se<5?5:Se,(Ct(g)||Fe(g))&&vx(n)!==!1?Do=!kt.modifierPressed(it):Do=kt.modifierPressed(it),Do&&(ab(gn)>ab(Wn)?(Se=ib(ve*ge),ve=ib(Se/ge)):(ve=ib(Se/ge),Se=ib(ve*ge))),_o(y,ve,Se),qo=A.startPos.x+gn,Ai=A.startPos.y+Wn,qo=qo>0?qo:0,Ai=Ai>0?Ai:0,o.setStyles(x,{left:qo,top:Ai,display:"block"}),x.innerHTML=ve+" &times; "+Se,A[2]<0&&y.clientWidth<=ve&&o.setStyle(y,"left",X+(K-ve)),A[3]<0&&y.clientHeight<=Se&&o.setStyle(y,"top",te+(ne-Se)),gn=u.scrollWidth-Ze,Wn=u.scrollHeight-st,gn+Wn!==0&&o.setStyles(x,{left:qo-gn,top:Ai-Wn}),be||(PC(n,g,K,ne,"corner-"+A.name),be=!0)},Zs=()=>{const it=be;be=!1,it&&(Rn(g,"width",ve),Rn(g,"height",Se)),o.unbind(r,"mousemove",Go),o.unbind(r,"mouseup",Zs),i!==r&&(o.unbind(i,"mousemove",Go),o.unbind(i,"mouseup",Zs)),o.remove(y),o.remove(x),o.remove(I),Da(g),it&&(El(n,g,ve,Se,"corner-"+A.name),o.setAttrib(g,"style",o.getAttrib(g,"style"))),n.nodeChanged()},Da=it=>{Gn();const gn=o.getPos(it,u),Wn=gn.x,Do=gn.y,qo=it.getBoundingClientRect(),Ai=qo.width||qo.right-qo.left,Jc=qo.height||qo.bottom-qo.top;g!==it&&(dt(),g=it,ve=Se=0);const hf=n.dispatch("ObjectSelected",{target:it});Ut(it)&&!hf.isDefaultPrevented()?vt(wA,(Di,fd)=>{const yn=mo=>{const Es=Et(g)[0];F=mo.screenX,z=mo.screenY,K=Es.clientWidth,ne=Es.clientHeight,ge=ne/K,A=Di,A.name=fd,A.startPos={x:Ai*Di[0]+Wn,y:Jc*Di[1]+Do},Ze=u.scrollWidth,st=u.scrollHeight,I=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(I,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),y=Cn(g),o.addClass(y,"mce-clonedresizable"),o.setAttrib(y,"data-mce-bogus","all"),y.contentEditable="false",o.setStyles(y,{left:Wn,top:Do,margin:0}),_o(y,Ai,Jc),y.removeAttribute(tf),u.appendChild(y),o.bind(r,"mousemove",Go),o.bind(r,"mouseup",Zs),i!==r&&(o.bind(i,"mousemove",Go),o.bind(i,"mouseup",Zs)),x=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},K+" &times; "+ne)};let Zn=o.get("mceResizeHandle"+fd);Zn&&o.remove(Zn),Zn=o.add(u,"div",{id:"mceResizeHandle"+fd,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+fd+"-resize; margin:0; padding:0"}),o.bind(Zn,"mousedown",mo=>{mo.stopImmediatePropagation(),mo.preventDefault(),yn(mo)}),Di.elm=Zn,o.setStyles(Zn,{left:Ai*Di[0]+Wn-Zn.offsetWidth/2,top:Jc*Di[1]+Do-Zn.offsetHeight/2})}):dt(!1)},Xr=S1(Da,0),dt=(it=!0)=>{Xr.cancel(),Gn(),g&&it&&g.removeAttribute(tf),vt(wA,(gn,Wn)=>{const Do=o.get("mceResizeHandle"+Wn);Do&&(o.unbind(Do),o.remove(Do))})},Tt=(it,gn)=>o.isChildOf(it,gn),to=it=>{if(be||n.removed||n.composing)return;const gn=it.type==="mousedown"?it.target:e.getNode(),Wn=hl(se.fromDom(gn),cE).map(qo=>qo.dom).filter(qo=>o.isEditable(qo.parentElement)||qo.nodeName==="IMG"&&o.isEditable(qo)).getOrUndefined(),Do=Te(Wn)?o.getAttrib(Wn,tf,"1"):"1";if(Ie(o.select(`img[${tf}],hr[${tf}]`),qo=>{qo.removeAttribute(tf)}),Te(Wn)&&Tt(Wn,u)&&n.hasFocus()){Ft();const qo=e.getStart(!0);if(Tt(qo,Wn)&&Tt(e.getEnd(!0),Wn)){o.setAttrib(Wn,tf,Do),Xr.throttle(Wn);return}}dt()},Gn=()=>{vt(wA,it=>{it.elm&&(o.unbind(it.elm),delete it.elm)})},Ft=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{Ft(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",to),n.on("keyup compositionend",it=>{g&&g.nodeName==="TABLE"&&to(it)}),n.on("hide blur",dt),n.on("contextmenu longpress",Qe,!0)}),n.on("remove",Gn),{isResizable:Ut,showResizeRect:Da,hideResizeRect:dt,updateResizeRect:to,destroy:()=>{Xr.cancel(),g=y=I=null}}},E8=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},CA=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},lE=(e,n,o)=>{const r=e.document.createRange();return E8(r,n),CA(r,o),r},on=(e,n,o,r,i)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,i),u},Qd=su.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),uE=(e,n,o)=>n(se.fromDom(o.startContainer),o.startOffset,se.fromDom(o.endContainer),o.endOffset),SA=(e,n)=>n.match({domRange:o=>({ltr:gt(o),rtl:Z.none}),relative:(o,r)=>({ltr:Fl(()=>lE(e,o,r)),rtl:Fl(()=>Z.some(lE(e,r,o)))}),exact:(o,r,i,u)=>({ltr:Fl(()=>on(e,o,r,i,u)),rtl:Fl(()=>Z.some(on(e,i,u,o,r)))})}),cb=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(i=>i.collapsed===!1).map(i=>Qd.rtl(se.fromDom(i.endContainer),i.endOffset,se.fromDom(i.startContainer),i.startOffset)).getOrThunk(()=>uE(e,Qd.ltr,o)):uE(e,Qd.ltr,o)},xA=(e,n)=>{const o=SA(e,n);return cb(e,o)};Qd.ltr,Qd.rtl;const IC={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},mE=(e,n,o)=>{var r,i;return Z.from((i=(r=e.dom).caretPositionFromPoint)===null||i===void 0?void 0:i.call(r,n,o)).bind(u=>{if(u.offsetNode===null)return Z.none();const g=e.dom.createRange();return g.setStart(u.offsetNode,u.offset),g.collapse(),Z.some(g)})},E0=(e,n,o)=>{var r,i;return Z.from((i=(r=e.dom).caretRangeFromPoint)===null||i===void 0?void 0:i.call(r,n,o))},EA=document.caretPositionFromPoint?mE:document.caretRangeFromPoint?E0:Z.none,TA=(e,n,o)=>{const r=se.fromDom(e.document);return EA(r,n,o).map(i=>IC.create(se.fromDom(i.startContainer),i.startOffset,se.fromDom(i.endContainer),i.endOffset))},qh=su.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),FC=(e,n,o,r)=>e.fold(n,o,r),fE=e=>e.fold(Ro,Ro,Ro),_A=qh.before,kA=qh.on,T0=qh.after,td={before:_A,on:kA,after:T0,cata:FC,getStart:fE},_0=su.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ro=e=>_0.exact(e.start,e.soffset,e.finish,e.foffset),OA=e=>e.match({domRange:n=>se.fromDom(n.startContainer),relative:(n,o)=>td.getStart(n),exact:(n,o,r,i)=>n}),em=_0.domRange,nd=_0.relative,k0=_0.exact,pc=e=>{const n=OA(e);return ml(n)},O0=IC.create,tm={domRange:em,relative:nd,exact:k0,exactFromRange:ro,getWin:pc,range:O0},Kh=(e,n)=>{const o=Jn(e);return o==="input"?td.after(e):fn(["br","img"],o)?n===0?td.before(e):td.after(e):td.on(e,n)},lb=(e,n)=>{const o=e.fold(td.before,Kh,td.after),r=n.fold(td.before,Kh,td.after);return tm.relative(o,r)},LC=(e,n,o,r)=>{const i=Kh(e,n),u=Kh(o,r);return tm.relative(i,u)},AA=e=>e.match({domRange:n=>{const o=se.fromDom(n.startContainer),r=se.fromDom(n.endContainer);return LC(o,n.startOffset,r,n.endOffset)},relative:lb,exact:LC}),HC=(e,n)=>{const r=document.createDocumentFragment();return Ie(e,i=>{r.appendChild(i.dom)}),se.fromDom(r)},DA=e=>{const n=tm.getWin(e).dom,o=(i,u,g,y)=>on(n,i,u,g,y),r=AA(e);return xA(n,r).match({ltr:o,rtl:o})},Hn=(e,n,o)=>TA(e,n,o),bc=(e,n,o)=>{const r=ml(se.fromDom(o));return Hn(r.dom,e,n).map(i=>{const u=o.createRange();return u.setStart(i.start.dom,i.soffset),u.setEnd(i.finish.dom,i.foffset),u}).getOrUndefined()},nm=(e,n)=>Te(e)&&Te(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,RA=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},Yh=(e,n,o)=>RA(e,n,o)!==null,Qn=(e,n,o)=>Yh(e,n,r=>r.nodeName===o),MA=(e,n)=>ia(e)&&!Yh(e,n,gc),zC=(e,n,o)=>{const r=n.parentNode;if(r){const i=new Wo(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=i[o?"prev":"next"]();)if(Mo(u))return!0}return!1},l=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},m=(e,n)=>{let o=n;for(;o&&o!==e;){if(Vn(o))return!0;o=o.parentNode}return!1},b=(e,n,o,r,i)=>{const u=e.getRoot(),g=e.schema.getNonEmptyElements(),y=i.parentNode;let x,A;if(!y)return Z.none();const I=e.getParent(y,e.isBlock)||u;if(r&&Mo(i)&&n&&e.isEmpty(I))return Z.some(Ae(y,e.nodeIndex(i)));const F=new Wo(i,I);for(;A=F[r?"prev":"next"]();){if(e.getContentEditableParent(A)==="false"||MA(A,u))return Z.none();if(nt(A)&&A.data.length>0)return Qn(A,u,"A")?Z.none():Z.some(Ae(A,r?A.data.length:0));if(e.isBlock(A)||g[A.nodeName.toLowerCase()])return Z.none();x=A}return Md(x)?Z.none():o&&x?Z.some(Ae(x,0)):Z.none()},S=(e,n,o,r)=>{const i=e.getRoot();let u,g=!1,y=o?r.startContainer:r.endContainer,x=o?r.startOffset:r.endOffset;const A=Mt(y)&&x===y.childNodes.length,I=e.schema.getNonEmptyElements();let F=o;if(ia(y))return Z.none();if(Mt(y)&&x>y.childNodes.length-1&&(F=!1),i1(y)&&(y=i,x=0),y===i){if(F&&(u=y.childNodes[x>0?x-1:0],u&&(ia(u)||I[u.nodeName]||Bu(u))))return Z.none();if(y.hasChildNodes()){if(x=Math.min(!F&&x>0?x-1:x,y.childNodes.length-1),y=y.childNodes[x],x=nt(y)&&A?y.data.length:0,!n&&y===i.lastChild&&Bu(y)||m(i,y)||ia(y)||We(y))return Z.none();if(y.hasChildNodes()&&!Bu(y)){u=y;const z=new Wo(y,i);do{if(Vn(u)||ia(u)){g=!1;break}if(nt(u)&&u.data.length>0){x=F?0:u.data.length,y=u,g=!0;break}if(I[u.nodeName.toLowerCase()]&&!ra(u)){x=e.nodeIndex(u),y=u.parentNode,F||x++,g=!0;break}}while(u=F?z.next():z.prev())}}}return n&&(nt(y)&&x===0&&b(e,A,n,!0,y).each(z=>{y=z.container(),x=z.offset(),g=!0}),Mt(y)&&(u=y.childNodes[x],u||(u=y.childNodes[x-1]),u&&Mo(u)&&!l(u,"A")&&!zC(e,u,!1)&&!zC(e,u,!0)&&b(e,A,n,!0,u).each(z=>{y=z.container(),x=z.offset(),g=!0}))),F&&!n&&nt(y)&&x===y.data.length&&b(e,A,n,!1,y).each(z=>{y=z.container(),x=z.offset(),g=!0}),g&&y?Z.some(Ae(y,x)):Z.none()},k=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),i=Ae.fromRangeStart(n);return S(e,o,!0,r).each(u=>{(!o||!Ae.isAbove(i,u))&&r.setStart(u.container(),u.offset())}),o||S(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),nm(n,r)?Z.none():Z.some(r)},M=(e,n)=>e.splitText(n),H=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,i=e.endOffset;if(n===r&&nt(n)){if(o>0&&o<n.data.length)if(r=M(n,o),n=r.previousSibling,i>o){i=i-o;const u=M(r,i).previousSibling;n=r=u,i=u.data.length,o=0}else i=0}else if(nt(n)&&o>0&&o<n.data.length&&(n=M(n,o),o=0),nt(r)&&i>0&&i<r.data.length){const u=M(r,i).previousSibling;r=u,i=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:i}},G=e=>({walk:(u,g)=>sb(e,u,g),split:H,expand:(u,g={type:"word"})=>{if(g.type==="word"){const y=Xd(e,u,[{inline:"span"}]),x=e.createRng();return x.setStart(y.startContainer,y.startOffset),x.setEnd(y.endContainer,y.endOffset),x}return u},normalize:u=>k(e,u).fold(Ke,g=>(u.setStart(g.startContainer,g.startOffset),u.setEnd(g.endContainer,g.endOffset),!0))});G.compareRanges=nm,G.getCaretRangeFromPoint=bc,G.getSelectedNode=_w,G.getNode=Ji;const ce=((e,n)=>{const o=(y,x)=>{if(!Yn(x)&&!x.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+x);const A=y.dom;Pu(A)&&(A.style[e]=x+"px")},r=y=>{const x=n(y);if(x<=0||x===null){const A=Qs(y,e);return parseFloat(A)||0}return x},i=r,u=(y,x)=>ss(x,(A,I)=>{const F=Qs(y,I),z=F===void 0?0:parseInt(F,10);return isNaN(z)?A:A+z},0);return{set:o,get:r,getOuter:i,aggregate:u,max:(y,x,A)=>{const I=u(y,A);return x>I?x-I:0}}})("height",e=>{const n=e.dom;return Em(e)?n.getBoundingClientRect().height:n.offsetHeight}),Ce=e=>ce.get(e),et=()=>se.fromDom(document),pt=(e,n)=>e.view(n).fold(gt([]),r=>{const i=e.owner(r),u=pt(e,i);return[r].concat(u)}),ht=(e,n)=>{const o=n.owner(e);return pt(n,o)};var He=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?Z.none():Z.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(se.fromDom)},owner:e=>Wl(e)});const Pt=e=>{const n=et(),o=It(n),r=ht(e,He),i=tt(e),u=$l(r,(g,y)=>{const x=tt(y);return{left:g.left+x.left,top:g.top+x.top}},{left:0,top:0});return B(u.left+i.left+o.left,u.top+i.top+o.top)},dn=e=>Jn(e)==="textarea",_n=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),os=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},Tr=(e,n)=>{const o=cr(e);if(o.length===0||dn(e))return{element:e,offset:n};if(n<o.length&&!dn(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return dn(r)?{element:e,offset:n}:Jn(r)==="img"?{element:r,offset:1}:Vr(r)?{element:r,offset:Xl(r).length}:{element:r,offset:cr(r).length}}},Is=(e,n)=>{const o=de(e),r=Ce(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},Ei=(e,n)=>{const o=Tr(e,n),r=se.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+jr+"</span>");return lr(o.element,r),Is(r,()=>fo(r))},ug=e=>Is(se.fromDom(e),Rt),dg=(e,n,o,r)=>{Ua(e,(i,u)=>A0(e,n,o,r),o)},VC=(e,n,o,r,i)=>{const u={elm:r.element.dom,alignToTop:i};if(_n(e,u))return;const g=It(n).top;o(e,n,g,r,i),os(e,u)},A0=(e,n,o,r)=>{const i=se.fromDom(e.getBody()),u=se.fromDom(e.getDoc());Fs(i);const g=Ei(se.fromDom(o.startContainer),o.startOffset);VC(e,u,n,g,r),g.cleanup()},Ao=(e,n,o,r)=>{const i=se.fromDom(e.getDoc());VC(e,i,o,ug(n),r)},Ua=(e,n,o)=>{const r=o.startContainer,i=o.startOffset,u=o.endContainer,g=o.endOffset;n(se.fromDom(r),se.fromDom(u));const y=e.dom.createRng();y.setStart(r,i),y.setEnd(u,g),e.selection.setRng(o)},ma=(e,n,o,r,i)=>{const u=n.pos;if(r)pn(u.left,u.top,i);else{const g=u.top-o+n.height;pn(-e.getBody().getBoundingClientRect().left,g,i)}},vc=(e,n,o,r,i,u)=>{const g=r+o,y=i.pos.top,x=i.bottom,A=x-y>=r;y<o?ma(e,i,r,u!==!1,n):y>g?ma(e,i,r,A?u!==!1:u===!0,n):x>g&&!A&&ma(e,i,r,u===!0,n)},tc=(e,n,o,r,i)=>{const u=ml(n).dom.innerHeight;vc(e,n,o,u,r,i)},nf=(e,n,o,r,i)=>{const u=ml(n).dom.innerHeight;vc(e,n,o,u,r,i);const g=Pt(r.element),y=Rr(window);g.top<y.y?hn(r.element,i!==!1):g.top>y.bottom&&hn(r.element,i===!0)},ii=(e,n,o)=>dg(e,tc,n,o),UC=(e,n,o)=>Ao(e,n,tc,o),ub=(e,n,o)=>dg(e,nf,n,o),od=(e,n,o)=>Ao(e,n,nf,o),Oa=(e,n,o)=>{(e.inline?UC:od)(e,n,o)},db=(e,n,o)=>{(e.inline?ii:ub)(e,n,o)},gE=(e,n=!1)=>e.dom.focus({preventScroll:n}),hE=e=>{const n=gl(e).dom;return e.dom===n.activeElement},Xh=(e=et())=>Z.from(e.dom.activeElement).map(se.fromDom),pE=e=>Xh(gl(e)).filter(n=>e.dom.contains(n.dom)),D0=(e,n)=>{const o=Vr(n)?Xl(n).length:cr(n).length+1;return e>o?o:e<0?0:e},bE=e=>tm.range(e.start,D0(e.soffset,e.start),e.finish,D0(e.foffset,e.finish)),mg=(e,n)=>!Gl(n.dom)&&(wa(e,n)||oo(e,n)),oN=e=>n=>mg(e,n.start)&&mg(e,n.finish),T8=e=>e.inline||xt.browser.isFirefox(),_8=e=>tm.range(se.fromDom(e.startContainer),e.startOffset,se.fromDom(e.endContainer),e.endOffset),k8=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?Z.none():Z.from(n.getRangeAt(0))).map(_8)},O8=e=>{const n=ml(e);return k8(n.dom).filter(oN(e))},sN=(e,n)=>Z.from(n).filter(oN(e)).map(bE),rN=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),Z.some(n)}catch{return Z.none()}},R0=e=>{const n=T8(e)?O8(se.fromDom(e.getBody())):Z.none();e.bookmark=n.isSome()?n:e.bookmark},NA=e=>(e.bookmark?e.bookmark:Z.none()).bind(o=>sN(se.fromDom(e.getBody()),o)).bind(rN),A8=e=>{NA(e).each(n=>e.selection.setRng(n))},iN={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},cN=(e,n)=>(Yn(n)||(n=0),setTimeout(e,n)),lN=(e,n)=>(Yn(n)||(n=0),setInterval(e,n)),Tl={setEditorTimeout:(e,n,o)=>cN(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=lN(()=>{e.removed?clearInterval(r):n()},o);return r}},D8=e=>e.type==="nodechange"&&e.selectionChange,R8=(e,n)=>{const o=()=>{n.throttle()};Zo.DOM.bind(document,"mouseup",o),e.on("remove",()=>{Zo.DOM.unbind(document,"mouseup",o)})},M8=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},N8=(e,n)=>{M8(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{D8(o)||R0(e)})},vE=e=>{const n=S1(()=>{R0(e)},0);e.on("init",()=>{e.inline&&R8(e,n),N8(e,n)}),e.on("remove",()=>{n.cancel()})};let mb;const yE=Zo.DOM,uN=e=>Mt(e)&&iN.isEditorUIElement(e),wE=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},CE=(e,n)=>{const o=Sx(e);return yE.getParent(n,i=>uN(i)||(o?e.dom.is(i,o):!1))!==null},PA=e=>{try{const n=gl(se.fromDom(e.getElement()));return Xh(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},P8=(e,n)=>{const o=n.editor;vE(o);const r=(i,u)=>{if(VO(i)&&i.inline!==!0){const g=se.fromDom(i.getContainer());u(g,"tox-edit-focus")}};o.on("focusin",()=>{const i=e.focusedEditor;wE(PA(o))&&r(o,Du),i!==o&&(i&&i.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:i}),o.focus(!0))}),o.on("focusout",()=>{Tl.setEditorTimeout(o,()=>{const i=e.focusedEditor;(!wE(PA(o))||i!==o)&&r(o,ul),!CE(o,PA(o))&&i===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),mb||(mb=i=>{const u=e.activeEditor;u&&Ad(i).each(g=>{const y=g;y.ownerDocument===document&&y!==document.body&&!CE(u,y)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},yE.bind(document,"focusin",mb))},B8=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&mb&&(yE.unbind(document,"focusin",mb),mb=null)},$8=e=>{e.on("AddEditor",Ge(P8,e)),e.on("RemoveEditor",Ge(B8,e))},I8=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),F8=e=>e.collapsed?Z.from(Ji(e.startContainer,e.startOffset)).map(se.fromDom):Z.none(),L8=(e,n)=>F8(n).bind(o=>Fu(o)?Z.some(o):wa(e,o)?Z.none():Z.some(e)),dN=(e,n)=>{L8(se.fromDom(e.getBody()),n).bind(o=>ai(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},BA=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},H8=e=>hE(e)||pE(e).isSome(),z8=e=>Te(e.iframeElement)&&hE(se.fromDom(e.iframeElement)),SE=e=>{const n=e.getBody();return n&&H8(se.fromDom(n))},mN=e=>{const n=gl(se.fromDom(e.getElement()));return Xh(n).filter(o=>!wE(o.dom)&&CE(e,o.dom)).isSome()},Jh=e=>e.inline?SE(e):z8(e),fN=e=>Jh(e)||mN(e),V8=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable(),Te(e.bookmark)&&!Jh(e)&&NA(e).each(u=>{e.selection.setRng(u),r=u});const i=I8(e,n.getNode());if(i&&e.dom.isChildOf(i,o)){BA(i),dN(e,r),$A(e);return}e.inline||(xt.browser.isOpera()||BA(o),e.getWin().focus()),(xt.browser.isFirefox()||e.inline)&&(BA(o),dN(e,r)),$A(e)},$A=e=>e.editorManager.setActive(e),U8=(e,n)=>{e.removed||(n?$A(e):V8(e))},gN=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),hN=(e,n,o,r,i)=>{const u=o?n.startContainer:n.endContainer,g=o?n.startOffset:n.endOffset;return Z.from(u).map(se.fromDom).map(y=>!r||!n.collapsed?Od(y,i(y,g)).getOr(y):y).bind(y=>zr(y)?Z.some(y):sa(y).filter(zr)).map(y=>y.dom).getOr(e)},IA=(e,n,o=!1)=>hN(e,n,!0,o,(r,i)=>Math.min($a(r),i)),pN=(e,n,o=!1)=>hN(e,n,!1,o,(r,i)=>i>0?i-1:i),FA=(e,n)=>{const o=e;for(;e&&nt(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},bN=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const i=n.startOffset,u=n.endOffset;let g=n.commonAncestorContainer;n.collapsed||(o===r&&u-i<2&&o.hasChildNodes()&&(g=o.childNodes[i]),nt(o)&&nt(r)&&(o.length===i?o=FA(o.nextSibling,!0):o=o.parentNode,u===0?r=FA(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(g=o)));const y=nt(g)?g.parentNode:g;return Om(y)?y:e},W8=(e,n,o,r)=>{const i=[],u=e.getRoot(),g=e.getParent(o||IA(u,n,n.collapsed),e.isBlock),y=e.getParent(r||pN(u,n,n.collapsed),e.isBlock);if(g&&g!==u&&i.push(g),g&&y&&g!==y){let x;const A=new Wo(g,u);for(;(x=A.next())&&x!==y;)e.isBlock(x)&&i.push(x)}return y&&g!==y&&y!==u&&i.push(y),i},Z8=(e,n,o)=>Z.from(n).bind(r=>Z.from(r.parentNode).map(i=>{const u=e.nodeIndex(r),g=e.createRng();return g.setStart(i,u),g.setEnd(i,u+1),o&&(xC(e,g,r,!0),xC(e,g,r,!1)),g})),LA=(e,n)=>Wt(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),j8=e=>Jn(e)==="img"?1:ew(e).fold(()=>cr(e).length,n=>n.length),G8=e=>ew(e).filter(n=>n.trim().length!==0||n.indexOf(so)>-1).isSome(),q8=e=>fs(e)&&ya(e,"contenteditable")==="false",K8=["img","br"],vN=e=>G8(e)||fn(K8,Jn(e))||q8(e),Y8=e=>Ur(e,vN),X8=e=>J8(e,vN),J8=(e,n)=>{const o=r=>{const i=cr(r);for(let u=i.length-1;u>=0;u--){const g=i[u];if(n(g))return Z.some(g);const y=o(g);if(y.isSome())return y}return Z.none()};return o(e)},yN="[data-mce-autocompleter]",Q8=(e,n)=>{if(wN(se.fromDom(e.getBody())).isNone()){const o=se.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());Ks(o,se.fromDom(n.extractContents())),n.insertNode(o.dom),sa(o).each(r=>r.dom.normalize()),X8(o).map(r=>{e.selection.setCursorLocation(r.dom,j8(r))})}},e7=e=>hl(e,yN),wN=e=>gi(e,yN),t7=(e,n)=>wN(n).each(o=>{const r=e.selection.getBookmark();Uc(o),e.selection.moveToBookmark(r)}),n7={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},xE=(e,n,o)=>{const r=o?"lastChild":"firstChild",i=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[i];if(u)return u;for(let g=e.parent;g&&g!==n;g=g.parent)if(u=g[i],u)return u}},o7=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!Rm(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},qt=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class Ti{static create(n,o){const r=new Ti(n,n7[n]||1);return o&&vt(o,(i,u)=>{r.attr(u,i)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!ee(n))return Te(n)&&vt(n,(u,g)=>{r.attr(g,u)}),r;const i=r.attributes;if(i){if(o!==void 0){if(o===null){if(n in i.map){delete i.map[n];let u=i.length;for(;u--;)if(i[u].name===n)return i.splice(u,1),r}return r}if(n in i.map){let u=i.length;for(;u--;)if(i[u].name===n){i[u].value=o;break}}else i.push({name:n,value:o});return i.map[n]=o,r}return i.map[n]}}clone(){const n=this,o=new Ti(n.name,n.type),r=n.attributes;if(r){const i=[];i.map={};for(let u=0,g=r.length;u<g;u++){const y=r[u];y.name!=="id"&&(i[i.length]={name:y.name,value:y.value},i.map[y.name]=y.value)}o.attributes=i}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,i=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):i&&(i.next=r),o.lastChild===n?(o.lastChild=i,i&&(i.next=null)):r&&(r.prev=i),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const i=o.parent||this;return r?(o===i.firstChild?i.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===i.lastChild?i.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=i,n}getAll(n){const o=this,r=[];for(let i=o.firstChild;i;i=xE(i,o))i.name===n&&r.push(i);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let i=n.firstChild;i;i=xE(i,n))o.push(i);let r=o.length;for(;r--;){const i=o[r];i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var i;const u=this;let g=u.firstChild;if(qt(u))return!1;if(g)do{if(g.type===1){if(g.attr("data-mce-bogus"))continue;if(n[g.name]||qt(g))return!1}if(g.type===8||g.type===3&&!o7(g)||g.type===3&&g.parent&&o[g.parent.name]&&Rm((i=g.value)!==null&&i!==void 0?i:"")||r&&r(g))return!1}while(g=xE(g,u));return!0}walk(n){return xE(this,null,n)}}const CN=at.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),SN=e=>ee(e.nodeValue)&&e.nodeValue.includes(jr),EE=e=>`${e.length===0?"":`${Wt(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,s7=(e,n)=>n.querySelectorAll(EE(e)),xN=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>SN(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),EN=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(SN(n)){const o=n.parentNode;return o&&an(CN,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),r7=e=>xN(e).nextNode()!==null,a7=e=>EN(e).nextNode()!==null,TE=(e,n)=>n.querySelector(EE(e))!==null,TN=(e,n)=>{Ie(s7(e,n),o=>{const r=se.fromDom(o);ya(r,"data-mce-bogus")==="all"?fo(r):Ie(e,i=>{Au(r,i)&&Bs(r,i)})})},i7=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},c7=R(i7,xN),vn=R(i7,EN),_N=(e,n)=>{const o=[{condition:Ge(TE,n),action:Ge(TN,n)},{condition:r7,action:c7},{condition:a7,action:vn}];let r=e,i=!1;return Ie(o,({condition:u,action:g})=>{u(r)&&(i||(r=e.cloneNode(!0),i=!0),g(r))}),r},En=e=>{const n=Wr(e,"[data-mce-bogus]");Ie(n,o=>{ya(o,"data-mce-bogus")==="all"?fo(o):Dm(o)?(lr(o,se.fromText(l1)),fo(o)):Uc(o)})},HA=e=>{const n=Wr(e,"input");Ie(n,o=>{Bs(o,"name")})},$K=(e,n)=>{const o=Ha(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},IK=(e,n)=>{const o=e.getDoc(),r=gl(se.fromDom(e.getBody())),i=se.fromTag("div",o);ts(i,"data-mce-bogus","all"),Sa(i,{position:"fixed",left:"-9999999px",top:"0"}),km(i,n.innerHTML),En(i),HA(i);const u=A2(r);Ks(u,i);const g=cc(i.dom.innerText);return fo(i),g},l7=(e,n,o)=>{let r;return n.format==="raw"?r=at.trim(cc(_N(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=IK(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=$K(e,e.serializer.serialize(o,n)),n.format!=="text"&&!yr(se.fromDom(o))&&ee(r)?at.trim(r):r},FK=(e,n)=>Z.from(e.getBody()).fold(gt(n.format==="tree"?new Ti("body",11):""),o=>l7(e,n,o)),u7=at.makeMap,kN=e=>{const n=[];e=e||{};const o=e.indent,r=u7(e.indent_before||""),i=u7(e.indent_after||""),u=jf.getEncodeFunc(e.entity_encoding||"raw",e.entities),g=e.element_format!=="xhtml";return{start:(y,x,A)=>{if(o&&r[y]&&n.length>0){const I=n[n.length-1];I.length>0&&I!==`
`&&n.push(`
`)}if(n.push("<",y),x)for(let I=0,F=x.length;I<F;I++){const z=x[I];n.push(" ",z.name,'="',u(z.value,!0),'"')}if(!A||g?n[n.length]=">":n[n.length]=" />",A&&o&&i[y]&&n.length>0){const I=n[n.length-1];I.length>0&&I!==`
`&&n.push(`
`)}},end:y=>{let x;n.push("</",y,">"),o&&i[y]&&n.length>0&&(x=n[n.length-1],x.length>0&&x!==`
`&&n.push(`
`))},text:(y,x)=>{y.length>0&&(n[n.length]=x?y:u(y))},cdata:y=>{n.push("<![CDATA[",y,"]]>")},comment:y=>{n.push("<!--",y,"-->")},pi:(y,x)=>{x?n.push("<?",y," ",u(x),"?>"):n.push("<?",y,"?>"),o&&n.push(`
`)},doctype:y=>{n.push("<!DOCTYPE",y,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Qh=(e={},n=Hd())=>{const o=kN(e);return e.validate="validate"in e?e.validate:!0,{serialize:i=>{const u=e.validate,g={3:x=>{var A;o.text((A=x.value)!==null&&A!==void 0?A:"",x.raw)},8:x=>{var A;o.comment((A=x.value)!==null&&A!==void 0?A:"")},7:x=>{o.pi(x.name,x.value)},10:x=>{var A;o.doctype((A=x.value)!==null&&A!==void 0?A:"")},4:x=>{var A;o.cdata((A=x.value)!==null&&A!==void 0?A:"")},11:x=>{let A=x;if(A=A.firstChild)do y(A);while(A=A.next)}};o.reset();const y=x=>{var A;const I=g[x.type];if(I)I(x);else{const F=x.name,z=F in n.getVoidElements();let X=x.attributes;if(u&&X&&X.length>1){const te=[];te.map={};const K=n.getElementRule(x.name);if(K){for(let ne=0,ge=K.attributesOrder.length;ne<ge;ne++){const be=K.attributesOrder[ne];if(be in X.map){const ve=X.map[be];te.map[be]=ve,te.push({name:be,value:ve})}}for(let ne=0,ge=X.length;ne<ge;ne++){const be=X[ne].name;if(!(be in te.map)){const ve=X.map[be];te.map[be]=ve,te.push({name:be,value:ve})}}X=te}}if(o.start(F,X,z),Ql(F))ee(x.value)&&o.text(x.value,!0),o.end(F);else if(!z){let te=x.firstChild;if(te){(F==="pre"||F==="textarea")&&te.type===3&&((A=te.value)===null||A===void 0?void 0:A[0])===`
`&&o.text(`
`,!0);do y(te);while(te=te.next)}o.end(F)}}};return i.type===1&&!e.inner?y(i):i.type===3?g[3](i):g[11](i),o.getContent()}}},cn=new Set;Ie(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{cn.add(n)});const ON=["font","text-decoration","text-emphasis"],zA=(e,n)=>Ar(e.parseStyle(e.getAttrib(n,"style"))),d7=e=>cn.has(e),WC=(e,n)=>Js(zA(e,n),o=>!d7(o)),AN=e=>Zt(e,n=>Yo(ON,o=>Ps(n,o))),m7=(e,n,o)=>{const r=zA(e,n),i=zA(e,o),u=g=>{var y,x;const A=(y=e.getStyle(n,g))!==null&&y!==void 0?y:"",I=(x=e.getStyle(o,g))!==null&&x!==void 0?x:"";return po(A)&&po(I)&&A!==I};return Yo(r,g=>{const y=x=>Yo(x,A=>A===g);if(!y(i)&&y(ON)){const x=AN(i);return Yo(x,u)}else return u(g)})},DN=(e,n,o)=>Z.from(o.container()).filter(nt).exists(r=>{const i=e?0:-1;return n(r.data.charAt(o.offset()+i))}),VA=Ge(DN,!0,zh),_E=Ge(DN,!1,zh),f7=e=>{const n=e.container();return nt(n)&&(n.data.length===0||Zi(n.data)&&cg.isBookmarkNode(n.parentNode))},fb=(e,n)=>o=>z1(e?0:-1,o).filter(n).isSome(),g7=e=>oi(e)&&Qs(se.fromDom(e),"display")==="block",RN=e=>Vn(e)&&!fv(e),h7=fb(!0,g7),p7=fb(!1,g7),ZC=fb(!0,Ls),M0=fb(!1,Ls),MN=fb(!0,Bu),kn=fb(!1,Bu),fg=fb(!0,RN),om=fb(!1,RN),NN=e=>e.slice(0,-1),PN=(e,n,o)=>wa(n,e)?NN(sv(e,r=>o(r)||oo(r,n))):[],UA=(e,n)=>PN(e,n,Ke),of=(e,n)=>[e].concat(UA(e,n)),kE=(e,n,o)=>Cl(e,n,o,f7),b7=e=>n=>e.isBlock(Jn(n)),WA=(e,n,o)=>_s(of(se.fromDom(n.container()),e),b7(o)),BN=(e,n,o,r)=>kE(e,n.dom,o).forall(i=>WA(n,o,r).fold(()=>!ru(i,o,n.dom),u=>!ru(i,o,n.dom)&&wa(u,se.fromDom(i.container())))),$N=(e,n,o,r)=>WA(n,o,r).fold(()=>kE(e,n.dom,o).forall(i=>!ru(i,o,n.dom)),i=>kE(e,i.dom,o).isNone()),ZA=Ge($N,!1),IN=Ge($N,!0),v7=Ge(BN,!1),y7=Ge(BN,!0),w7=e=>a0(e).exists(Dm),OE=(e,n,o,r)=>{const i=Zt(of(se.fromDom(o.container()),n),g=>r.isBlock(Jn(g))),u=js(i).getOr(n);return Kr(e,u.dom,o).filter(w7)},jC=(e,n,o)=>a0(n).exists(Dm)||OE(!0,e,n,o).isSome(),GC=(e,n,o)=>JO(n).exists(Dm)||OE(!1,e,n,o).isSome(),C7=Ge(OE,!1),S7=Ge(OE,!0),FN=e=>Ae.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),LN=(e,n,o)=>{const r=Zt(of(se.fromDom(n.container()),e),i=>o.isBlock(Jn(i)));return js(r).getOr(e)},HN=(e,n,o)=>FN(n)?_E(n):_E(n)||Si(LN(e,n,o).dom,n).exists(_E),zN=(e,n,o)=>FN(n)?VA(n):VA(n)||Va(LN(e,n,o).dom,n).exists(VA),x7=e=>fn(["pre","pre-wrap"],e),jA=e=>a0(e).bind(n=>fi(n,zr)).exists(n=>x7(Qs(n,"white-space"))),VN=(e,n)=>Si(e.dom,n).isNone(),E7=(e,n)=>Va(e.dom,n).isNone(),T7=(e,n,o)=>VN(e,n)||E7(e,n)||ZA(e,n,o)||IN(e,n,o)||GC(e,n,o)||jC(e,n,o),gb=e=>Te(e)&&Vn(e)&&jm(e),UN=(e,n)=>o=>gb(new Wo(o,e)[n]()),WN=(e,n)=>{const o=Va(e.dom,n).getOr(n),r=UN(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},_7=(e,n)=>{const o=Si(e.dom,n).getOr(n),r=UN(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},ZN=(e,n,o)=>jA(n)?!1:T7(e,n,o)||HN(e,n,o)||zN(e,n,o),N0=(e,n,o)=>jA(n)?!1:ZA(e,n,o)||v7(e,n,o)||GC(e,n,o)||HN(e,n,o)||_7(e,n),jN=e=>{const n=e.container(),o=e.offset();return nt(n)&&o<n.data.length?Ae(n,o+1):e},P0=(e,n,o)=>jA(n)?!1:IN(e,n,o)||y7(e,n,o)||jC(e,n,o)||zN(e,n,o)||WN(e,n),AE=(e,n,o)=>N0(e,n,o)||P0(e,jN(n),o),_i=(e,n)=>m0(e.charAt(n)),GN=(e,n)=>zh(e.charAt(n)),k7=e=>{const n=e.container();return nt(n)&&br(n.data,so)},O7=e=>{const n=e.split("");return Wt(n,(o,r)=>m0(o)&&r>0&&r<n.length-1&&Jm(n[r-1])&&Jm(n[r+1])?" ":o).join("")},qN=(e,n,o,r)=>{const i=n.data,u=Ae(n,0);return!o&&_i(i,0)&&!AE(e,u,r)?(n.data=" "+i.slice(1),!0):o&&GN(i,0)&&N0(e,u,r)?(n.data=so+i.slice(1),!0):!1},A7=e=>{const n=e.data,o=O7(n);return o!==n?(e.data=o,!0):!1},ep=(e,n,o,r)=>{const i=n.data,u=Ae(n,i.length-1);return!o&&_i(i,i.length-1)&&!AE(e,u,r)?(n.data=i.slice(0,-1)+" ",!0):o&&GN(i,i.length-1)&&P0(e,u,r)?(n.data=i.slice(0,-1)+so,!0):!1},D7=(e,n,o)=>{const r=n.container();if(!nt(r))return Z.none();if(k7(n)){const i=qN(e,r,!1,o)||A7(r)||ep(e,r,!1,o);return eo(i,n)}else if(AE(e,n,o)){const i=qN(e,r,!0,o)||ep(e,r,!0,o);return eo(i,n)}else return Z.none()},R7=e=>{const n=se.fromDom(e.getBody());e.selection.isCollapsed()&&D7(n,Ae.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},xs=(e,n,o,r)=>{if(o===0)return;const i=se.fromDom(e),u=ws(i,A=>r.isBlock(Jn(A))).getOr(i),g=e.data.slice(n,n+o),y=n+o>=e.data.length&&P0(u,Ae(e,e.data.length),r),x=n===0&&N0(u,Ae(e,0),r);e.replaceData(n,o,Vf(g,4,x,y))},hb=(e,n,o)=>{const r=e.data.slice(n),i=r.length-Ed(r).length;xs(e,n,i,o)},KN=(e,n,o)=>{const r=e.data.slice(0,n),i=r.length-ku(r).length;xs(e,n-i,i,o)},Yr=(e,n,o,r,i=!0)=>{const u=ku(e.data).length,g=i?e:n,y=i?n:e;return i?g.appendData(y.data):g.insertData(0,y.data),fo(se.fromDom(y)),r&&hb(g,u,o),g},M7=(e,n)=>{const o=e.container(),r=e.offset();return!Ae.isTextPosition(e)&&o===n.parentNode&&r>Ae.before(n).offset()},N7=(e,n)=>M7(n,e)?Ae(n.container(),n.offset()-1):n,gg=e=>nt(e)?Ae(e,0):Ae.before(e),bo=e=>nt(e)?Ae(e,e.data.length):Ae.after(e),GA=e=>dr(e.previousSibling)?Z.some(bo(e.previousSibling)):e.previousSibling?Sl(e.previousSibling):Z.none(),qA=e=>dr(e.nextSibling)?Z.some(gg(e.nextSibling)):e.nextSibling?ai(e.nextSibling):Z.none(),P7=(e,n)=>Z.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>Si(e,Ae.before(o))).orThunk(()=>Va(e,Ae.after(n))),B7=(e,n)=>Va(e,Ae.after(n)).orThunk(()=>Si(e,Ae.before(n))),$7=(e,n)=>GA(n).orThunk(()=>qA(n)).orThunk(()=>P7(e,n)),qc=(e,n)=>qA(n).orThunk(()=>GA(n)).orThunk(()=>B7(e,n)),sd=(e,n,o)=>e?qc(n,o):$7(n,o),YN=(e,n,o)=>sd(e,n,o).map(Ge(N7,o)),DE=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},KA=e=>n=>n.dom===e,RE=(e,n)=>n&&an(e.schema.getBlockElements(),Jn(n)),XN=(e,n)=>{if(Rs(e)){const o=se.fromHtml('<br data-mce-bogus="1">');return n?Ie(cr(e),r=>{eb(r)||fo(r)}):Dd(e),Ks(e,o),Z.some(Ae.before(o.dom))}else return Z.none()},qC=(e,n,o,r)=>{const i=Hc(e).filter(Vr),u=fl(e).filter(Vr);return fo(e),Ul(i,u,n,(g,y,x)=>{const A=g.dom,I=y.dom,F=A.data.length;return Yr(A,I,o,r),x.container()===I?Ae(A,F):x}).orThunk(()=>(r&&(i.each(g=>KN(g.dom,g.dom.length,o)),u.each(g=>hb(g.dom,0,o))),n))},ME=(e,n)=>an(e.schema.getTextInlineElements(),Jn(n)),hg=(e,n,o,r=!0,i=!1)=>{const u=YN(n,e.getBody(),o.dom),g=ws(o,Ge(RE,e),KA(e.getBody())),y=qC(o,u,e.schema,ME(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):g.bind(x=>XN(x,i)).fold(()=>{r&&DE(e,n,y)},x=>{r&&DE(e,n,Z.some(x))})},JN=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,KC=e=>JN.test(e),pb=(e,n)=>Hi(se.fromDom(n),_O(e))&&!Fn(e.schema,n)&&e.dom.isEditable(n),QN=e=>{var n;return Zo.DOM.getStyle(e,"direction",!0)==="rtl"||KC((n=e.textContent)!==null&&n!==void 0?n:"")},sm=(e,n,o)=>Zt(Zo.DOM.getParents(o.container(),"*",n),e),fa=(e,n,o)=>{const r=sm(e,n,o);return Z.from(r[r.length-1])},YC=(e,n,o)=>{const r=jd(n,e),i=jd(o,e);return Te(r)&&r===i},uu=e=>Hu(e)||pv(e),du=(e,n)=>{const o=n.container(),r=n.offset();return e?vi(o)?nt(o.nextSibling)?Ae(o.nextSibling,0):Ae.after(o):Hu(n)?Ae(o,r+1):n:vi(o)?nt(o.previousSibling)?Ae(o.previousSibling,o.previousSibling.data.length):Ae.before(o):pv(n)?Ae(o,r-1):n},zo=Ge(du,!0),eP=Ge(du,!1),tp=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},XC=e=>{e.execCommand("delete")},NE=e=>tp(e,"Delete"),YA=e=>tp(e,"ForwardDelete"),XA=e=>n=>Ds(sa(n),e,oo),I7=e=>xe(e)||Iu(e),B0=(e,n)=>wa(e,n)?fi(n,I7,XA(e)):Z.none(),JA=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},QA=(e,n,o)=>Dr(ai(o),Sl(o),(r,i)=>{const u=du(!0,r),g=du(!1,i),y=du(!1,n);return e?Va(o,y).exists(x=>x.isEqual(g)&&n.isEqual(u)):Si(o,y).exists(x=>x.isEqual(u)&&n.isEqual(g))}).getOr(!0),e4=e=>(Qb(e)?Hc(e):zc(e)).bind(e4).orThunk(()=>Z.some(e)),PE=(e,n,o,r=!0)=>{var i;n.deleteContents();const u=e4(o).getOr(o),g=se.fromDom((i=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&i!==void 0?i:o.dom);if(g.dom===e.getBody()?JA(e,r):Rs(g)&&(Lu(g),r&&e.selection.setCursorLocation(g.dom,0)),!oo(o,g)){const y=Ds(sa(g),o)?[]:rv(g);Ie(y.concat(cr(o)),x=>{!oo(x,g)&&!wa(x,g)&&Rs(x)&&fo(x)})}},tP=(e,n,o)=>ws(e,n,o).isSome(),BE=(e,n)=>t1(e,n).isSome(),nP=(e,n)=>Ur(e,n).isSome(),F7=e=>n=>oo(e,n),t4=e=>Wr(e,"td,th"),oP=(e,n)=>Kd(se.fromDom(e),n),L7=e=>Dr(e.startTable,e.endTable,(n,o)=>{const r=nP(n,u=>oo(u,o)),i=nP(o,u=>oo(u,n));return!r&&!i?e:{...e,startTable:r?Z.none():e.startTable,endTable:i?Z.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),sP=e=>L7(e),H7=(e,n)=>{const o=oP(e.startContainer,n),r=oP(e.endContainer,n),i=o.isSome(),u=r.isSome(),g=Dr(o,r,oo).getOr(!1);return sP({startTable:o,endTable:r,isStartInTable:i,isEndInTable:u,isSameTable:g,isMultiTable:!g&&i&&u})},n4=(e,n)=>({start:e,end:n}),rP=(e,n,o)=>({rng:e,table:n,cells:o}),JC=su.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),QC=(e,n)=>hl(se.fromDom(e),"td,th",n),$0=e=>!oo(e.start,e.end),aP=(e,n)=>Kd(e.start,n).bind(o=>Kd(e.end,n).bind(r=>eo(oo(o,r),o))),z7=(e,n)=>!$0(e)&&aP(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),iP=(e,n)=>{const o=QC(e.startContainer,n),r=QC(e.endContainer,n);return Dr(o,r,n4)},V7=e=>n=>Kd(n,e).bind(o=>Pi(t4(o)).map(r=>n4(n,r))),cP=e=>n=>Kd(n,e).bind(o=>js(t4(o)).map(r=>n4(r,n))),yc=e=>n=>aP(n,e).map(o=>rP(n,o,t4(o))),lP=(e,n,o,r)=>{if(o.collapsed||!e.forall($0))return Z.none();if(n.isSameTable){const i=e.bind(yc(r));return Z.some({start:i,end:i})}else{const i=QC(o.startContainer,r),u=QC(o.endContainer,r),g=i.bind(V7(r)).bind(yc(r)),y=u.bind(cP(r)).bind(yc(r));return Z.some({start:g,end:y})}},o4=(e,n)=>Jr(e,o=>oo(o,n)),eS=e=>Dr(o4(e.cells,e.rng.start),o4(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),s4=(e,n,o)=>e.exists(r=>z7(r,o)&&SC(r.start,n)),r4=(e,n)=>{const{startTable:o,endTable:r}=n,i=e.cloneRange();return o.each(u=>i.setStartAfter(u.dom)),r.each(u=>i.setEndBefore(u.dom)),i},uP=(e,n,o,r)=>lP(e,n,o,r).bind(({start:i,end:u})=>i.or(u)).bind(i=>{const{isSameTable:u}=n,g=eS(i).getOr([]);if(u&&i.cells.length===g.length)return Z.some(JC.fullTable(i.table));if(g.length>0){if(u)return Z.some(JC.partialTable(g,Z.none()));{const y=r4(o,n);return Z.some(JC.partialTable(g,Z.some({...n,rng:y})))}}else return Z.none()}),U7=(e,n,o,r)=>lP(e,n,o,r).bind(({start:i,end:u})=>{const g=i.bind(eS).getOr([]),y=u.bind(eS).getOr([]);if(g.length>0&&y.length>0){const x=r4(o,n);return Z.some(JC.multiTable(g,y,x))}else return Z.none()}),W7=(e,n)=>{const o=F7(e),r=iP(n,o),i=H7(n,o);return s4(r,n,o)?r.map(u=>JC.singleCellTable(n,u.start)):i.isMultiTable?U7(r,i,n,o):uP(r,i,n,o)},$E=e=>Ie(e,n=>{Bs(n,"contenteditable"),Lu(n)}),dP=(e,n)=>Z.from(e.dom.getParent(n,e.dom.isBlock)).map(se.fromDom),rd=(e,n,o)=>{o.each(r=>{n?fo(r):(Lu(r),e.selection.setCursorLocation(r.dom,0))})},a4=(e,n,o,r)=>{const i=o.cloneRange();r?(i.setStart(o.startContainer,o.startOffset),i.setEndAfter(n.dom.lastChild)):(i.setStartBefore(n.dom.firstChild),i.setEnd(o.endContainer,o.endOffset)),c4(e,i,n,!1).each(u=>u())},mP=e=>{const n=Vh(e),o=se.fromDom(e.selection.getNode());c1(o.dom)&&Rs(o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&Yo(n,r=>oo(r,o))&&ts(o,"data-mce-selected","1")},Z7=(e,n,o)=>Z.some(()=>{const r=e.selection.getRng(),i=o.bind(({rng:u,isStartInTable:g})=>{const y=dP(e,g?u.endContainer:u.startContainer);u.deleteContents(),rd(e,g,y.filter(Rs));const x=g?n[0]:n[n.length-1];return a4(e,x,r,g),Rs(x)?Z.none():Z.some(g?n.slice(1):n.slice(0,-1))}).getOr(n);$E(i),mP(e)}),i4=(e,n,o,r)=>Z.some(()=>{const i=e.selection.getRng(),u=n[0],g=o[o.length-1];a4(e,u,i,!0),a4(e,g,i,!1);const y=Rs(u)?n:n.slice(1),x=Rs(g)?o:o.slice(0,-1);$E(y.concat(x)),r.deleteContents(),mP(e)}),c4=(e,n,o,r=!0)=>Z.some(()=>{PE(e,n,o,r)}),I0=(e,n)=>Z.some(()=>hg(e,!1,n)),j7=(e,n,o)=>W7(n,o).bind(r=>r.fold(Ge(c4,e),Ge(I0,e),Ge(Z7,e),Ge(i4,e))),F0=(e,n)=>nS(e,n),mu=(e,n,o,r)=>bb(n,r).fold(()=>j7(e,n,o),i=>F0(e,i)),tS=(e,n,o)=>{const r=se.fromDom(e.getBody()),i=e.selection.getRng();return o.length!==0?Z7(e,o,Z.none()):mu(e,r,i,n)},Bo=(e,n)=>_s(of(n,e),Wi),bb=(e,n)=>_s(of(n,e),Li("caption")),fP=(e,n,o,r,i)=>qd(o,e.getBody(),i).bind(u=>Bo(n,se.fromDom(u.getNode())).bind(g=>oo(g,r)?Z.none():Z.some(Rt))),nS=(e,n)=>Z.some(()=>{Lu(n),e.selection.setCursorLocation(n.dom,0)}),l4=(e,n,o,r)=>ai(e.dom).bind(i=>Sl(e.dom).map(u=>n?o.isEqual(i)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(i))).getOr(!0),u4=(e,n)=>nS(e,n),d4=(e,n,o)=>bb(e,se.fromDom(o.getNode())).fold(()=>Z.some(Rt),r=>eo(!oo(r,n),Rt)),m4=(e,n,o,r,i)=>qd(o,e.getBody(),i).fold(()=>Z.some(Rt),u=>l4(r,o,i,u)?u4(e,r):d4(n,r,u)),IE=(e,n,o,r)=>{const i=Ae.fromRangeStart(e.selection.getRng());return Bo(o,r).bind(u=>Rs(u)?nS(e,u):fP(e,o,n,u,i))},f4=(e,n,o,r)=>{const i=Ae.fromRangeStart(e.selection.getRng());return Rs(r)?nS(e,r):m4(e,o,n,r,i)},g4=(e,n)=>e?MN(n):kn(n),gP=(e,n)=>{const o=Ae.fromRangeStart(e.selection.getRng());return g4(n,o)||Kr(n,e.getBody(),o).exists(r=>g4(n,r))},hP=(e,n,o)=>{const r=se.fromDom(e.getBody());return bb(r,o).fold(()=>IE(e,n,r,o).orThunk(()=>eo(gP(e,n),Rt)),i=>f4(e,n,r,i))},FE=(e,n)=>{const o=se.fromDom(e.selection.getStart(!0)),r=Vh(e);return e.selection.isCollapsed()&&r.length===0?hP(e,n,o):tS(e,o,r)},np=(e,n)=>{let o=n;for(;o&&o!==e;){if(Ia(o)||Vn(o))return o;o=o.parentNode}return null},L0=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],pP=at.each,oS=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,g)=>{if(u.nodeName!==g.nodeName||u.nodeType!==g.nodeType)return!1;const y=A=>{const I={};return pP(n.getAttribs(A),F=>{const z=F.nodeName.toLowerCase();z!=="style"&&!i(z)&&(I[z]=n.getAttrib(A,z))}),I},x=(A,I)=>{for(const F in A)if(an(A,F)){const z=I[F];if(Dt(z)||A[F]!==z)return!1;delete I[F]}for(const F in I)if(an(I,F))return!1;return!0};return Mt(u)&&Mt(g)&&(!x(y(u),y(g))||!x(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(g,"style"))))?!1:!hc(u)&&!hc(g)},i=u=>Yo(L0,g=>Ps(u,g))||o.has(u);return{compare:r,isAttributeInternal:i}},bP=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),G7=e=>e.name==="summary",vP=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},h4=(e,n,o,r)=>{const i=o.name;for(let u=0,g=e.length;u<g;u++){const y=e[u];if(y.name===i){const x=r.nodes[i];x?x.nodes.push(o):r.nodes[i]={filter:y,nodes:[o]}}}if(o.attributes)for(let u=0,g=n.length;u<g;u++){const y=n[u],x=y.name;if(x in o.attributes.map){const A=r.attributes[x];A?A.nodes.push(o):r.attributes[x]={filter:y,nodes:[o]}}}},yP=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&vP(o,i=>{h4(e,n,i,r)}),r},sS=(e,n)=>{const o=(r,i)=>{vt(r,u=>{const g=Or(u.nodes);Ie(u.filter.callbacks,y=>{for(let x=g.length-1;x>=0;x--){const A=g[x];(!(i?A.attr(u.filter.name)!==void 0:A.name===u.filter.name)||Ht(A.parent))&&g.splice(x,1)}g.length>0&&y(g,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},p4=(e,n,o,r={})=>{const i=yP(e,n,o);sS(i,r)},LE=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const u=new Ti("br",1);n.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new Ti("#text",3)).value=so},wP=e=>{var n;return b4(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===so},b4=(e,n)=>{const o=e==null?void 0:e.firstChild;return Te(o)&&o===e.lastChild&&o.name===n},CP=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},H0=(e,n,o,r)=>r.isEmpty(n,o,i=>CP(e,i)),SP=(e,n)=>Te(e)&&(n(e)||e.name==="br"),xP=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return Z.from(n)},HE=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const i of r)o&&!n.isValidChild(o.name,i.name)&&HE(i,n,o);e.unwrap()}},zE=(e,n,o,r=Rt)=>{const i=n.getTextBlockElements(),u=n.getNonEmptyElements(),g=n.getWhitespaceElements(),y=at.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),x=new Set,A=I=>I!==o&&!y[I.name];for(let I=0;I<e.length;I++){const F=e[I];let z,X,te;if(!F.parent||x.has(F))continue;if(i[F.name]&&F.parent.name==="li"){let ne=F.next;for(;ne&&i[ne.name];){ne.name="li",x.add(ne),F.parent.insert(ne,F.parent);ne=ne.next}F.unwrap();continue}const K=[F];for(z=F.parent;z&&!n.isValidChild(z.name,F.name)&&A(z);z=z.parent)K.push(z);if(z&&K.length>1)if(VE(n,F,z))HE(F,n);else{K.reverse(),X=K[0].clone(),r(X);let ne=X;for(let ge=0;ge<K.length-1;ge++){n.isValidChild(ne.name,K[ge].name)&&ge>0?(te=K[ge].clone(),r(te),ne.append(te)):te=ne;for(let be=K[ge].firstChild;be&&be!==K[ge+1];){const ve=be.next;te.append(be),be=ve}ne=te}H0(n,u,g,X)?z.insert(F,K[0],!0):(z.insert(X,K[0],!0),z.insert(F,X)),z=K[0],(H0(n,u,g,z)||b4(z,"br"))&&z.empty().remove()}else if(F.parent){if(F.name==="li"){let ne=F.prev;if(ne&&(ne.name==="ul"||ne.name==="ol")){ne.append(F);continue}if(ne=F.next,ne&&(ne.name==="ul"||ne.name==="ol")&&ne.firstChild){ne.insert(F,ne.firstChild,!0);continue}const ge=new Ti("ul",1);r(ge),F.wrap(ge);continue}if(n.isValidChild(F.parent.name,"div")&&n.isValidChild("div",F.name)){const ne=new Ti("div",1);r(ne),F.wrap(ne)}else HE(F,n)}}},v4=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},VE=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&v4(o,"a")?!0:G7(o)&&bP(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,EP=(e,n,o,r)=>{const i=document.createRange();return i.setStart(e,n),i.setEnd(o,r),i},TP=e=>{const n=Ae.fromRangeStart(e),o=Ae.fromRangeEnd(e),r=e.commonAncestorContainer;return Kr(!1,r,o).map(i=>!ru(n,o,r)&&ru(n,i,r)?EP(n.container(),n.offset(),i.container(),i.offset()):e).getOr(e)},UE=e=>e.collapsed?e:TP(e),_P=e=>Te(e.firstChild)&&e.firstChild===e.lastChild,kP=e=>e.name==="br"||e.value===so,y4=(e,n)=>e.getBlockElements()[n.name]&&_P(n)&&kP(n.firstChild),WE=(e,n)=>{const o=e.getNonEmptyElements();return Te(n)&&(n.isEmpty(o)||y4(e,n))},ZE=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),WE(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},jE=e=>{var n,o;const r=e.firstChild,i=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),i&&i.id==="mce_marker"&&((o=i.parentNode)===null||o===void 0||o.removeChild(i)),e},OP=(e,n,o)=>{const r=n.serialize(o),i=e.createFragment(r);return jE(i)},GE=e=>{var n;return Zt((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},w4=e=>e.data===so||Mo(e),rS=e=>Te(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&w4(e.firstChild),C4=e=>!e.firstChild||rS(e),AP=e=>e.length>0&&C4(e[e.length-1])?e.slice(0,-1):e,op=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},S4=(e,n)=>!!op(e,n),x4=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},aS=(e,n)=>{const o=Ae.before(e),i=au(n).next(o);return i?i.toRange():null},pg=(e,n)=>{const o=Ae.after(e),i=au(n).prev(o);return i?i.toRange():null},DP=(e,n,o,r)=>{const i=x4(e,r),u=e.parentNode;return u&&(u.insertBefore(i[0],e),at.each(n,g=>{u.insertBefore(g,e)}),u.insertBefore(i[1],e),u.removeChild(e)),pg(n[n.length-1],o)},q7=(e,n,o)=>{const r=e.parentNode;return r&&at.each(n,i=>{r.insertBefore(i,e)}),aS(e,o)},RP=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),pg(n[0],o)),MP=(e,n,o,r)=>{const i=OP(n,e,r),u=op(n,o.startContainer),g=AP(GE(i.firstChild)),y=1,x=2,A=n.getRoot(),I=F=>{const z=Ae.fromRangeStart(o),X=au(n.getRoot()),te=F===y?X.prev(z):X.next(z),K=te==null?void 0:te.getNode();return K?op(n,K)!==u:!0};return u?I(y)?q7(u,g,A):I(x)?RP(u,g,A,n):DP(u,g,A,o):null},K7=["pre"],LK=(e,n,o,r)=>{var i;const u=n.firstChild,g=n.lastChild,y=g.attr("data-mce-type")==="bookmark"?g.prev:g,x=u===y,A=fn(K7,u.name);if(x&&A){const I=u.attr("contenteditable")!=="false",F=((i=e.getParent(o,e.isBlock))===null||i===void 0?void 0:i.nodeName.toLowerCase())===u.name,z=Z.from(np(r,o)).forall(Ia);return I&&F&&z}else return!1},E4=c1,T4=(e,n,o)=>{if(Te(o)){const r=e.getParent(n.endContainer,E4);return o===r&&SC(se.fromDom(o),n)}else return!1},rm=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const i=o.firstChild,u=o.lastChild;!i||i===u&&i.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},_4=(e,n,o)=>{Z.from(e.getParent(n,"td,th")).map(se.fromDom).each(r=>Jt(r,o))},qE=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const i=e.getBody(),u=oS(e);at.each(r.select("*[data-mce-fragment]"),g=>{if(Te(o[g.nodeName.toLowerCase()])&&WC(r,g)){for(let x=g.parentElement;Te(x)&&x!==i&&!m7(r,g,x);x=x.parentElement)if(u.compare(x,g)){r.remove(g,!0);break}}})}},k4=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},Y7=e=>{at.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},NP=e=>!!e.getAttribute("data-mce-fragment"),X7=(e,n)=>Te(n)&&!e.schema.getVoidElements()[n.nodeName],PP=(e,n)=>{var o,r,i;let u;const g=e.dom,y=e.selection;if(!n)return;y.scrollIntoView(n);const x=np(e.getBody(),n);if(x&&g.getContentEditable(x)==="false"){g.remove(n),y.select(x);return}let A=g.createRng();const I=n.previousSibling;if(nt(I)){A.setStart(I,(r=(o=I.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const X=n.nextSibling;nt(X)&&(I.appendData(X.data),(i=X.parentNode)===null||i===void 0||i.removeChild(X))}else A.setStartBefore(n),A.setEndBefore(n);const F=X=>{let te=Ae.fromRangeStart(X);return te=au(e.getBody()).next(te),te==null?void 0:te.toRange()},z=g.getParent(n,g.isBlock);if(g.remove(n),z&&g.isEmpty(z)){const X=E4(z);Dd(se.fromDom(z)),A.setStart(z,0),A.setEnd(z,0),!X&&!NP(z)&&(u=F(A))?(A=u,g.remove(z)):g.add(z,g.create("br",X?{}:{"data-mce-bogus":"1"}))}y.setRng(A)},O4=e=>{const n=e.dom,o=UE(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,E4);T4(n,o,r)?c4(e,o,se.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&nt(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},J7=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return Z.some(n);return Z.none()},BP=(e,n,o)=>{var r;return Yo(o.children(),bP)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},Q7=(e,n,o)=>{var r,i;const u=e.selection,g=e.dom,y=e.parser,x=o.merge,A=Qh({validate:!0},e.schema),I='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=cc(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,I);let F=u.getRng();const z=F.startContainer,X=e.getBody();z===X&&u.isCollapsed()&&g.isBlock(X.firstChild)&&X7(e,X.firstChild)&&g.isEmpty(X.firstChild)&&(F=g.createRng(),F.setStart(X.firstChild,0),F.setEnd(X.firstChild,0),u.setRng(F)),u.isCollapsed()||O4(e);const te=u.getNode(),K={context:te.nodeName.toLowerCase(),data:o.data,insert:!0},ne=y.parse(n,K);if(o.paste===!0&&ZE(e.schema,ne)&&S4(g,te))return F=MP(A,g,u.getRng(),ne),F&&u.setRng(F),n;o.paste===!0&&LK(g,ne,te,e.getBody())&&((r=ne.firstChild)===null||r===void 0||r.unwrap()),k4(ne);let ge=ne.lastChild;if(ge&&ge.attr("id")==="mce_marker"){const be=ge;for(ge=ge.prev;ge;ge=ge.walk(!0))if(ge.type===3||!g.isBlock(ge.name)){ge.parent&&e.schema.isValidChild(ge.parent.name,"span")&&ge.parent.insert(be,ge,ge.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(te),!K.invalid&&!BP(g,te,ne))n=A.serialize(ne),rm(e,n,te);else{e.selection.setContent(I);let be=u.getNode(),ve;const Se=e.getBody();for(i1(be)?be=ve=Se:ve=be;ve&&ve!==Se;)be=ve,ve=ve.parentNode;n=be===Se?Se.innerHTML:g.getOuterHTML(be);const Ze=y.parse(n),st=J7(Ze),Ct=st.bind(xP).getOr(Ze);st.each(Et=>Et.replace(ne));const Fe=ne.children(),Me=(i=ne.parent)!==null&&i!==void 0?i:Ze;ne.unwrap();const Qe=Zt(Fe,Et=>VE(e.schema,Et,Me));zE(Qe,e.schema,Ct),p4(y.getNodeFilters(),y.getAttributeFilters(),Ze),n=A.serialize(Ze),be===Se?g.setHTML(Se,n):g.setOuterHTML(be,n)}return qE(e,x),PP(e,g.get("mce_marker")),Y7(e.getBody()),_4(g,u.getStart(),e.schema),H2(e.schema,e.getBody(),u.getStart()),n},sp=e=>e instanceof Ti,$P=e=>{Jh(e)&&ai(e.getBody()).each(n=>{const o=n.getNode(),r=Bu(o)?ai(o).getOr(n):n;e.selection.setRng(r.toRange())})},A4=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&$P(e)},IP=(e,n,o,r)=>{if(o=cc(o),o.length===0||/^\s+$/.test(o)){const i='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+i+"</li>");const u=Ha(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=i,o=e.dom.createHTML(u,R1(e),o)):o||(o=i),A4(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=Qh({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const i=yr(se.fromDom(n))?o:at.trim(o);return A4(e,i,r.no_selection),{content:i,html:i}}},eH=(e,n,o,r)=>{p4(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const i=Qh({validate:!1},e.schema).serialize(o),u=cc(yr(se.fromDom(n))?i:at.trim(i));return A4(e,u,r.no_selection),{content:o,html:u}},tH=(e,n,o)=>Z.from(e.getBody()).map(r=>sp(n)?eH(e,r,n,o):IP(e,r,n,o)).getOr({content:n,html:sp(o.content)?"":o.content}),FP=e=>ue(e)?e:Ke,nH=(e,n,o)=>{let r=e.dom;const i=FP(o);for(;r.parentNode;){r=r.parentNode;const u=se.fromDom(r),g=n(u);if(g.isSome())return g;if(i(u))break}return Z.none()},D4=(e,n,o)=>{const r=n(e),i=FP(o);return r.orThunk(()=>i(e)?Z.none():nH(e,n,i))},KE=b0,LP=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let i=0;i<r.length;i++){const u=r[i];if(da(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},iS=(e,n,o,r,i)=>{const u=e.dom.getRoot();if(n===u)return!1;const g=e.dom.getParent(n,y=>LP(e,y,o)?!0:y.parentNode===u||!!rf(e,y,o,r,!0));return!!rf(e,g,o,r,i)},sf=(e,n,o)=>tr(o)&&KE(n,o.inline)||lu(o)&&KE(n,o.block)?!0:da(o)?Mt(n)&&e.is(n,o.selector):!1,HP=(e,n,o,r,i,u)=>{const g=o[r],y=r==="attributes";if(ue(o.onmatch))return o.onmatch(n,o,r);if(g){if(ym(g)){for(let x=0;x<g.length;x++)if(y?e.getAttrib(n,g[x]):Uh(e,n,g[x]))return!0}else for(const x in g)if(an(g,x)){const A=y?e.getAttrib(n,x):Uh(e,n,x),I=cu(g[x],u),F=Ht(A)||na(A);if(F&&Ht(I))continue;if(i&&F&&!o.exact||(!i||o.exact)&&!KE(A,v0(I,x)))return!1}}return!0},rf=(e,n,o,r,i)=>{const u=e.formatter.get(o),g=e.dom;if(u&&Mt(n))for(let y=0;y<u.length;y++){const x=u[y];if(sf(e.dom,n,x)&&HP(g,n,x,"attributes",i,r)&&HP(g,n,x,"styles",i,r)){const A=x.classes;if(A){for(let I=0;I<A.length;I++)if(!e.dom.hasClass(n,cu(A[I],r)))return}return x}}},z0=(e,n,o,r,i)=>{if(r)return iS(e,r,n,o,i);if(r=e.selection.getNode(),iS(e,r,n,o,i))return!0;const u=e.selection.getStart();return!!(u!==r&&iS(e,u,n,o,i))},zP=(e,n,o)=>{const r=[],i={},u=e.selection.getStart();return e.dom.getParent(u,g=>{for(let y=0;y<n.length;y++){const x=n[y];!i[x]&&rf(e,g,x,o)&&(i[x]=!0,r.push(x))}},e.dom.getRoot()),r},VP=(e,n)=>{const o=i=>oo(i,se.fromDom(e.getBody())),r=(i,u)=>rf(e,i.dom,u)?Z.some(u):Z.none();return Z.from(e.selection.getStart(!0)).bind(i=>D4(se.fromDom(i),u=>Rc(n,g=>r(u,g)),o)).getOrNull()},oH=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const i=e.selection.getStart(),u=X1(r,i);for(let g=o.length-1;g>=0;g--){const y=o[g];if(!da(y))return!0;for(let x=u.length-1;x>=0;x--)if(r.is(u[x],y.selector))return!0}}return!1},UP=(e,n,o)=>ss(o,(r,i)=>{const u=_C(e,i);return e.formatter.matchNode(n,i,{},u)?r.concat([i]):r},[]),cS=jr,vb=(e,n)=>e.importNode(n,!0),R4=e=>{if(e){const n=new Wo(e,e);for(let o=n.current();o;o=n.next())if(nt(o))return o}return null},YE=e=>{const n=se.fromTag("span");return Fc(n,{id:l0,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Ks(n,se.fromText(cS)),n},WP=e=>{const n=R4(e);return n&&n.data.charAt(0)===cS&&n.deleteData(0,1),n},V0=(e,n,o)=>{const r=e.dom,i=e.selection;if(Q1(n))hg(e,!1,se.fromDom(n),o,!0);else{const u=i.getRng(),g=r.getParent(n,r.isBlock),y=u.startContainer,x=u.startOffset,A=u.endContainer,I=u.endOffset,F=WP(n);r.remove(n,!0),y===F&&x>0&&u.setStart(F,x-1),A===F&&I>0&&u.setEnd(F,I-1),g&&r.isEmpty(g)&&Lu(se.fromDom(g)),i.setRng(u)}},XE=(e,n,o)=>{const r=e.dom,i=e.selection;if(n)V0(e,n,o);else if(n=rg(e.getBody(),i.getStart()),!n)for(;n=r.get(l0);)V0(e,n,o)},sH=(e,n,o)=>{var r,i;const u=e.dom,g=u.getParent(o,Ge(fr,e.schema));g&&u.isEmpty(g)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(zM(se.fromDom(o)),u.isEmpty(o)?(i=o.parentNode)===null||i===void 0||i.replaceChild(n,o):u.insertAfter(n,o))},M4=(e,n)=>(e.appendChild(n),n),ZP=(e,n)=>{var o;const r=$l(e,(u,g)=>M4(u,g.cloneNode(!1)),n),i=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return M4(r,i.createTextNode(cS))},rH=(e,n,o,r,i,u)=>{const g=e.formatter,y=e.dom,x=Zt(Ar(g.get()),F=>F!==r&&!br(F,"removeformat")),A=UP(e,o,x);if(Zt(A,F=>!dA(e,F,r)).length>0){const F=o.cloneNode(!1);return y.add(n,F),g.remove(r,i,F,u),y.remove(F),Z.some(F)}else return Z.none()},JE=(e,n,o)=>{let r;const i=e.selection,u=e.formatter.get(n);if(!u)return;const g=i.getRng();let y=g.startOffset;const A=g.startContainer.nodeValue;r=rg(e.getBody(),i.getStart());const I=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(A&&y>0&&y<A.length&&I.test(A.charAt(y))&&I.test(A.charAt(y-1))){const F=i.getBookmark();g.collapse(!0);let z=Xd(e.dom,g,u);z=H(z),e.formatter.apply(n,o,z),i.moveToBookmark(F)}else{let F=r?R4(r):null;(!r||(F==null?void 0:F.data)!==cS)&&(r=vb(e.getDoc(),YE(!0).dom),F=r.firstChild,g.insertNode(r),y=1),e.formatter.apply(n,o,r),i.setCursorLocation(F,y)}},jP=(e,n,o,r)=>{const i=e.dom,u=e.selection;let g=!1;const y=e.formatter.get(n);if(!y)return;const x=u.getRng(),A=x.startContainer,I=x.startOffset;let F=A;nt(A)&&(I!==A.data.length&&(g=!0),F=F.parentNode);const z=[];let X;for(;F;){if(rf(e,F,n,o,r)){X=F;break}F.nextSibling&&(g=!0),z.push(F),F=F.parentNode}if(X)if(g){const te=u.getBookmark();x.collapse(!0);let K=Xd(i,x,y,!0);K=H(K),e.formatter.remove(n,o,K,r),u.moveToBookmark(te)}else{const te=rg(e.getBody(),X),K=Te(te)?i.getParents(X.parentNode,St,te):[],ne=YE(!1).dom;sH(e,ne,te??X);const ge=rH(e,ne,X,n,o,r),be=ZP([...z,...ge.toArray(),...K],ne);te&&V0(e,te,Te(te)),u.setCursorLocation(be,1),i.isEmpty(X)&&i.remove(X)}},N4=(e,n,o)=>{const r=e.selection,i=e.getBody();XE(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===cS&&XE(e,rg(i,r.getStart()),!0),(n===37||n===39)&&XE(e,rg(i,r.getStart()),!0)},aH=e=>nt(e)&&Xa(e.data,so),iH=e=>{e.on("mouseup keydown",n=>{N4(e,n.keyCode,aH(e.selection.getRng().endContainer))})},P4=e=>{const n=YE(!1),o=ZP(e,n.dom);return{caretContainer:n,caretPosition:Ae(o,0)}},QE=(e,n)=>{const{caretContainer:o,caretPosition:r}=P4(n);return lr(se.fromDom(e),o),fo(se.fromDom(e)),r},GP=(e,n)=>{const{caretContainer:o,caretPosition:r}=P4(n);return e.insertNode(o.dom),r},qP=(e,n)=>{if(gc(n.dom))return!1;const o=e.schema.getTextInlineElements();return an(o,Jn(n))&&!gc(n.dom)&&!ql(n.dom)},lS={},KP=ur(["pre"]),eT=(e,n)=>{lS[e]||(lS[e]=[]),lS[e].push(n)},bg=(e,n)=>{an(lS,e)&&Ie(lS[e],o=>{o(n)})};eT("pre",e=>{const n=e.selection.getRng(),o=i=>u=>{const g=u.previousSibling;return KP(g)&&fn(i,g)},r=(i,u)=>{const g=se.fromDom(u),y=Wl(g).dom;fo(g),Eo(se.fromDom(i),[se.fromTag("br",y),se.fromTag("br",y),...cr(g)])};if(!n.collapsed){const i=e.selection.getSelectedBlocks(),u=Zt(Zt(i,KP),o(i));Ie(u,g=>{r(g.previousSibling,g)})}});const YP=["fontWeight","fontStyle","color","fontSize","fontFamily"],B4=e=>qe(e.styles)&&Yo(Ar(e.styles),n=>fn(YP,n)),nr=e=>_s(e,n=>tr(n)&&n.inline==="span"&&B4(n)),tT=(e,n)=>{const o=e.get(n);return At(o)?nr(o):Z.none()},nT=(e,n)=>Si(n,Ae.fromRangeStart(e)).isNone(),af=(e,n)=>Va(n,Ae.fromRangeEnd(e)).exists(o=>!Mo(o.getNode())||Va(n,o).isSome())===!1,$4=e=>n=>hv(n)&&e.isEditable(n),XP=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return nT(o,n[0])&&af(o,n[0])?n:[];{const r=js(n).filter(g=>nT(o,g)).toArray(),i=Pi(n).filter(g=>af(o,g)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(i)}},uS=e=>Zt(XP(e),$4(e.dom)),JP=e=>Zt(e.getSelectedBlocks(),$4(e.dom)),I4=at.each,rp=e=>Mt(e)&&!hc(e)&&!gc(e)&&!ql(e),QP=(e,n)=>{for(let o=e;o;o=o[n]){if(nt(o)&&po(o.data))return e;if(Mt(o)&&!hc(o))return o}return e},ap=(e,n,o)=>{const r=oS(e),i=Om(n)&&e.dom.isEditable(n),u=Om(o)&&e.dom.isEditable(o);if(i&&u){const g=QP(n,"previousSibling"),y=QP(o,"nextSibling");if(r.compare(g,y)){for(let x=g.nextSibling;x&&x!==y;){const A=x;x=x.nextSibling,g.appendChild(A)}return e.dom.remove(y),at.each(at.grep(y.childNodes),x=>{g.appendChild(x)}),g}}return o},eB=(e,n,o,r)=>{var i;if(r&&n.merge_siblings!==!1){const u=(i=ap(e,wt(r),r))!==null&&i!==void 0?i:r;ap(e,u,wt(u,!0))}},ip=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";I4(e.select(r,o),i=>{rp(i)&&e.isEditable(i)&&I4(n.styles,(u,g)=>{e.setStyle(i,g,"")})})}},Kc=(e,n,o)=>{I4(e.childNodes,r=>{rp(r)&&(n(r)&&o(r),r.hasChildNodes()&&Kc(r,n,o))})},oT=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},sT=(e,n)=>o=>!!(o&&Uh(e,o,n)),tB=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),oT(e,r)},yb=su.generate([{keep:[]},{rename:["name"]},{removed:[]}]),rT=/^(src|href|style)$/,F4=at.each,Yc=b0,aT=e=>/^(TR|TH|TD)$/.test(e.nodeName),L4=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),iT=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],i=n[o?"startOffset":"endOffset"];if(Mt(r)){const u=r.childNodes.length-1;!o&&i&&i--,r=r.childNodes[i>u?u:i]}return nt(r)&&o&&i>=r.data.length&&(r=new Wo(r,e.getBody()).next()||r),nt(r)&&!o&&i===0&&(r=new Wo(r,e.getBody()).prev()||r),r},cT=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return aT(e)&&r?e.nodeName==="TR"&&r[o]||r:e},vg=(e,n,o,r)=>{var i;const u=e.create(o,r);return(i=n.parentNode)===null||i===void 0||i.insertBefore(u,n),u.appendChild(n),u},lT=(e,n,o,r,i)=>{const u=se.fromDom(n),g=se.fromDom(e.create(r,i)),y=o?Ca(u):Qp(u);return Eo(g,y),o?(lr(u,g),Nf(g,u)):(Vc(u,g),Ks(g,u)),g.dom},cH=(e,n)=>n.links&&e.nodeName==="A",H4=(e,n,o)=>{const r=n.parentNode;let i;const u=e.dom,g=Ha(e);lu(o)&&r===u.getRoot()&&(!o.list_block||!Yc(n,o.list_block))&&Ie(Or(n.childNodes),y=>{Yd(e,g,y.nodeName.toLowerCase())?i?i.appendChild(y):(i=vg(u,y,g),u.setAttribs(i,R1(e))):i=null}),!(w0(o)&&!Yc(o.inline,n))&&u.remove(n,!0)},nB=(e,n,o)=>Yn(e)?{name:n,value:null}:{name:e,value:cu(n,o)},oB=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},sB=(e,n,o,r,i)=>{let u=!1;F4(o.styles,(g,y)=>{const{name:x,value:A}=nB(y,g,r),I=v0(A,x);(o.remove_similar||ae(A)||!Mt(i)||Yc(Uh(e,i,x),I))&&e.setStyle(n,x,""),u=!0}),u&&oB(e,n)},lH=(e,n,o)=>{n==="removeformat"?Ie(JP(e.selection),r=>{Ie(YP,i=>e.dom.setStyle(r,i,"")),oB(e.dom,r)}):tT(e.formatter,n).each(r=>{Ie(JP(e.selection),i=>sB(e.dom,i,r,o,null))})},U0=(e,n,o,r,i)=>{const u=e.dom,g=oS(e),y=e.schema;if(tr(n)&&g1(y,n.inline)&&Fn(y,r)&&r.parentElement===e.getBody())return H4(e,r,n),yb.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!sf(u,r,n)&&!cH(r,n))return yb.keep();const x=r,A=n.preserve_attributes;if(tr(n)&&n.remove==="all"&&At(A)){const I=Zt(u.getAttribs(x),F=>fn(A,F.name.toLowerCase()));if(u.removeAllAttribs(x),Ie(I,F=>u.setAttrib(x,F.name,F.value)),I.length>0)return yb.rename("span")}if(n.remove!=="all"){sB(u,x,n,o,i),F4(n.attributes,(F,z)=>{const{name:X,value:te}=nB(z,F,o);if(n.remove_similar||ae(te)||!Mt(i)||Yc(u.getAttrib(i,X),te)){if(X==="class"){const K=u.getAttrib(x,X);if(K){let ne="";if(Ie(K.split(/\s+/),ge=>{/mce\-\w+/.test(ge)&&(ne+=(ne?" ":"")+ge)}),ne){u.setAttrib(x,X,ne);return}}}if(rT.test(X)&&x.removeAttribute("data-mce-"+X),X==="style"&&ur(["li"])(x)&&u.getStyle(x,"list-style-type")==="none"){x.removeAttribute(X),u.setStyle(x,"list-style-type","none");return}X==="class"&&x.removeAttribute("className"),x.removeAttribute(X)}}),F4(n.classes,F=>{F=cu(F,o),(!Mt(i)||u.hasClass(i,F))&&u.removeClass(x,F)});const I=u.getAttribs(x);for(let F=0;F<I.length;F++){const z=I[F].nodeName;if(!g.isAttributeInternal(z))return yb.keep()}}return n.remove!=="none"?(H4(e,x,n),yb.removed()):yb.keep()},uH=(e,n,o,r,i)=>{let u;return n.parentNode&&Ie(X1(e.dom,n.parentNode).reverse(),g=>{if(!u&&Mt(g)&&g.id!=="_start"&&g.id!=="_end"){const y=rf(e,g,o,r,i);y&&y.split!==!1&&(u=g)}}),u},rB=(e,n,o,r)=>U0(e,n,o,r,r).fold(gt(r),i=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,i)),gt(null)),z4=(e,n,o,r,i,u,g,y)=>{var x,A;let I,F;const z=e.dom;if(o){const X=o.parentNode;for(let te=r.parentNode;te&&te!==X;te=te.parentNode){let K=z.clone(te,!1);for(let ne=0;ne<n.length&&(K=rB(e,n[ne],y,K),K!==null);ne++);K&&(I&&K.appendChild(I),F||(F=K),I=K)}(!g.mixed||!z.isBlock(o))&&(r=(x=z.split(o,r))!==null&&x!==void 0?x:r),I&&F&&((A=i.parentNode)===null||A===void 0||A.insertBefore(I,i),F.appendChild(i),tr(g)&&eB(e,g,y,I))}return r},dH=(e,n,o,r,i)=>{const u=e.formatter.get(n),g=u[0],y=e.dom,x=e.selection,A=K=>{const ne=uH(e,K,n,o,i);return z4(e,u,ne,K,K,!0,g,o)},I=K=>hc(K)&&Mt(K)&&(K.id==="_start"||K.id==="_end"),F=K=>Yo(u,ne=>W0(e,ne,o,K,K)),z=K=>{const ne=Or(K.childNodes),be=F(K)||Yo(u,Ze=>sf(y,K,Ze)),ve=K.parentNode;if(!be&&Te(ve)&&J1(g)&&F(ve),g.deep&&ne.length)for(let Ze=0;Ze<ne.length;Ze++)z(ne[Ze]);Ie(["underline","line-through","overline"],Ze=>{Mt(K)&&e.dom.getStyle(K,"text-decoration")===Ze&&K.parentNode&&Yx(y,K.parentNode)===Ze&&W0(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Ze}},void 0,K)})},X=K=>{const ne=y.get(K?"_start":"_end");if(ne){let ge=ne[K?"firstChild":"lastChild"];return I(ge)&&(ge=ge[K?"firstChild":"lastChild"]),nt(ge)&&ge.data.length===0&&(ge=K?ne.previousSibling||ne.nextSibling:ne.nextSibling||ne.previousSibling),y.remove(ne,!0),ge}else return null},te=K=>{let ne,ge,be=Xd(y,K,u,K.collapsed);if(g.split){if(be=H(be),ne=iT(e,be,!0),ge=iT(e,be),ne!==ge){if(ne=cT(ne,!0),ge=cT(ge,!1),L4(y,ne,ge)){const Se=Z.from(ne.firstChild).getOr(ne);A(lT(y,Se,!0,"span",{id:"_start","data-mce-type":"bookmark"})),X(!0);return}if(L4(y,ge,ne)){const Se=Z.from(ge.lastChild).getOr(ge);A(lT(y,Se,!1,"span",{id:"_end","data-mce-type":"bookmark"})),X(!1);return}ne=vg(y,ne,"span",{id:"_start","data-mce-type":"bookmark"}),ge=vg(y,ge,"span",{id:"_end","data-mce-type":"bookmark"});const ve=y.createRng();ve.setStartAfter(ne),ve.setEndBefore(ge),sb(y,ve,Se=>{Ie(Se,Ze=>{!hc(Ze)&&!hc(Ze.parentNode)&&A(Ze)})}),A(ne),A(ge),ne=X(!0),ge=X()}else ne=ge=A(ne);be.startContainer=ne.parentNode?ne.parentNode:ne,be.startOffset=y.nodeIndex(ne),be.endContainer=ge.parentNode?ge.parentNode:ge,be.endOffset=y.nodeIndex(ge)+1}sb(y,be,ve=>{Ie(ve,z)})};if(r){if(q1(r)){const K=y.createRng();K.setStartBefore(r),K.setEndAfter(r),te(K)}else te(r);lg(e,n,r,o);return}!x.isCollapsed()||!tr(g)||Vh(e).length?(K1(e,()=>Qm(e,te),K=>tr(g)&&z0(e,n,o,K)),e.nodeChanged()):jP(e,n,o,i),lH(e,n,o),lg(e,n,r,o)},V4=(e,n,o,r,i)=>{(r||e.selection.isEditable())&&dH(e,n,o,r,i)},W0=(e,n,o,r,i)=>U0(e,n,o,r,i).fold(Ke,u=>(e.dom.rename(r,u),!0),St),aB=at.each,mH=(e,n,o,r)=>{const i=u=>{if(Om(u)&&Mt(u.parentNode)&&e.isEditable(u)){const g=Yx(e,u.parentNode);e.getStyle(u,"color")&&g?e.setStyle(u,"text-decoration",g):e.getStyle(u,"text-decoration")===g&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(at.walk(r,i,"childNodes"),i(r))},fH=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const i=sT(e,"fontSize");Kc(r,u=>i(u)&&e.isEditable(u),tB(e,"backgroundColor",cu(n.styles.backgroundColor,o)))}},gH=(e,n,o,r)=>{if(tr(n)&&(n.inline==="sub"||n.inline==="sup")){const i=sT(e,"fontSize");Kc(r,g=>i(g)&&e.isEditable(g),tB(e,"fontSize",""));const u=Zt(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},hH=(e,n,o,r)=>{aB(n,i=>{tr(i)&&aB(e.dom.select(i.inline,r),u=>{rp(u)&&W0(e,i,o,u,i.exact?u:null)}),ip(e.dom,i,r)})},pH=(e,n,o,r,i)=>{const u=i.parentNode;rf(e,u,o,r)&&W0(e,n,r,i)||n.merge_with_parents&&u&&e.dom.getParent(u,g=>rf(e,g,o,r)?(W0(e,n,r,i),!0):!1)},uT=at.each,bH=(e,n,o,r)=>{if(Cx(e)&&tr(n)&&o.parentNode){const i=U2(e.schema),u=BE(se.fromDom(o),g=>gc(g.dom));return ba(i,r)&&Rs(se.fromDom(o.parentNode),!1)&&!u}else return!1},iB=(e,n,o,r)=>{if(uT(o.styles,(i,u)=>{e.setStyle(n,u,cu(i,r))}),o.styles){const i=e.getAttrib(n,"style");i&&e.setAttrib(n,"data-mce-style",i)}},vH=(e,n,o,r)=>{const i=e.formatter.get(n),u=i[0],g=!r&&e.selection.isCollapsed(),y=e.dom,x=e.selection,A=(te,K=u)=>{ue(K.onformat)&&K.onformat(te,K,o,r),iB(y,te,K,o),uT(K.attributes,(ne,ge)=>{y.setAttrib(te,ge,cu(ne,o))}),uT(K.classes,ne=>{const ge=cu(ne,o);y.hasClass(te,ge)||y.addClass(te,ge)})},I=(te,K)=>{let ne=!1;return uT(te,ge=>da(ge)?y.getContentEditable(K)==="false"&&!ge.ceFalseOverride||Te(ge.collapsed)&&ge.collapsed!==g?!0:y.is(K,ge.selector)&&!gc(K)?(A(K,ge),ne=!0,!1):!0:!1),ne},F=te=>{if(ee(te)){const K=y.create(te);return A(K),K}else return null},z=(te,K,ne)=>{const ge=[];let be=!0;const ve=u.inline||u.block,Se=F(ve),Ze=Fe=>y0(u)&&rf(e,Fe,n,o),st=(Fe,Me,Qe)=>{const Et=Wh(u)&&fr(e.schema,Fe)&&Yd(e,Me,ve);return Qe&&Et},Ct=(Fe,Me,Qe,Et)=>{const Ut=Fe.nodeName.toLowerCase(),Cn=Yd(e,ve,Ut)&&Yd(e,Me,ve),Rn=!ne&&nt(Fe)&&Zi(Fe.data),_o=gc(Fe),Go=!tr(u)||!te.isBlock(Fe);return(Qe||Et)&&Cn&&!Rn&&!_o&&Go};sb(te,K,Fe=>{let Me;const Qe=Et=>{let Ut=!1,Cn=be,Rn=!1;const _o=Et.parentNode,Go=_o.nodeName.toLowerCase(),Zs=te.getContentEditable(Et);Te(Zs)&&(Cn=be,be=Zs==="true",Ut=!0,Rn=Y1(e,Et));const Da=be&&!Ut;if(Mo(Et)&&!bH(e,u,Et,Go)){Me=null,lu(u)&&te.remove(Et);return}if(Ze(Et)){Me=null;return}if(st(Et,Go,Da)){const Xr=te.rename(Et,ve);A(Xr),ge.push(Xr),Me=null;return}if(da(u)){let Xr=I(i,Et);if(!Xr&&Te(_o)&&J1(u)&&(Xr=I(i,_o)),!tr(u)||Xr){Me=null;return}}Te(Se)&&Ct(Et,Go,Da,Rn)?(Me||(Me=te.clone(Se,!1),_o.insertBefore(Me,Et),ge.push(Me)),Rn&&Ut&&(be=Cn),Me.appendChild(Et)):(Me=null,Ie(Or(Et.childNodes),Qe),Ut&&(be=Cn),Me=null)};Ie(Fe,Qe)}),u.links===!0&&Ie(ge,Fe=>{const Me=Qe=>{Qe.nodeName==="A"&&A(Qe,u),Ie(Or(Qe.childNodes),Me)};Me(Fe)}),Ie(ge,Fe=>{const Me=Ut=>{let Cn=0;return Ie(Ut.childNodes,Rn=>{!jc(Rn)&&!hc(Rn)&&Cn++}),Cn},Qe=Ut=>_s(Ut.childNodes,EC).filter(Rn=>te.getContentEditable(Rn)!=="false"&&sf(te,Rn,u)).map(Rn=>{const _o=te.clone(Rn,!1);return A(_o),te.replace(_o,Ut,!0),te.remove(Rn,!0),_o}).getOr(Ut),Et=Me(Fe);if((ge.length>1||!te.isBlock(Fe))&&Et===0){te.remove(Fe,!0);return}(tr(u)||lu(u)&&u.wrapper)&&(!u.exact&&Et===1&&(Fe=Qe(Fe)),hH(e,i,o,Fe),pH(e,u,n,o,Fe),fH(te,u,o,Fe),mH(te,u,o,Fe),gH(te,u,o,Fe),eB(e,u,o,Fe))})},X=q1(r)?r:x.getNode();if(y.getContentEditable(X)==="false"&&!Y1(e,X)){r=X,I(i,r),ka(e,n,r,o);return}if(u){if(r)if(q1(r)){if(!I(i,r)){const te=y.createRng();te.setStartBefore(r),te.setEndAfter(r),z(y,Xd(y,te,i),!0)}}else z(y,r,!0);else!g||!tr(u)||Vh(e).length?(x.setRng(UE(x.getRng())),K1(e,()=>{Qm(e,(te,K)=>{const ne=K?te:Xd(y,te,i);z(y,ne,!1)})},St),e.nodeChanged()):JE(e,n,o),tT(e.formatter,n).each(te=>{Ie(uS(e.selection),K=>iB(y,K,te,o))});bg(n,e)}ka(e,n,r,o)},cB=(e,n,o,r)=>{(r||e.selection.isEditable())&&vH(e,n,o,r)},lB=e=>an(e,"vars"),yH=(e,n)=>{e.set({}),n.on("NodeChange",o=>{dB(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=Z.from(o.node).map(i=>q1(i)?i:i.startContainer).bind(i=>Mt(i)?Z.some(i):Z.from(i.parentElement)).getOrThunk(()=>U4(n));dB(n,r,e.get())})},U4=e=>e.selection.getStart(),uB=(e,n,o,r,i)=>Eu(n,y=>{const x=e.formatter.matchNode(y,o,i??{},r);return!Dt(x)},y=>LP(e,y,o)?!0:r?!1:Te(e.formatter.matchNode(y,o,i,!0))),wb=(e,n)=>{const o=n??U4(e);return Zt(X1(e.dom,o),r=>Mt(r)&&!ql(r))},dB=(e,n,o)=>{const r=wb(e,n);vt(o,(i,u)=>{const g=y=>{const x=uB(e,r,u,y.similar,lB(y)?y.vars:void 0),A=x.isSome();if(y.state.get()!==A){y.state.set(A);const I=x.getOr(n);lB(y)?y.callback(A,{node:I,format:u,parents:r}):Ie(y.callbacks,F=>F(A,{node:I,format:u,parents:r}))}};Ie([i.withSimilar,i.withoutSimilar],g),Ie(i.withVars,g)})},wH=(e,n,o,r,i,u)=>{const g=n.get();Ie(o.split(","),y=>{const x=Fo(g,y).getOrThunk(()=>{const I={withSimilar:{state:Ss(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Ss(!1),similar:!1,callbacks:[]},withVars:[]};return g[y]=I,I}),A=()=>{const I=wb(e);return uB(e,I,y,i,u).isSome()};if(Dt(u)){const I=i?x.withSimilar:x.withoutSimilar;I.callbacks.push(r),I.callbacks.length===1&&I.state.set(A())}else x.withVars.push({state:Ss(A()),similar:i,vars:u,callback:r})}),n.set(g)},CH=(e,n,o)=>{const r=e.get();Ie(n.split(","),i=>Fo(r,i).each(u=>{r[i]={withSimilar:{...u.withSimilar,callbacks:Zt(u.withSimilar.callbacks,g=>g!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:Zt(u.withoutSimilar.callbacks,g=>g!==o)},withVars:Zt(u.withVars,g=>g.callback!==o)}})),e.set(r)},SH=(e,n,o,r,i,u)=>(wH(e,n,o,r,i,u),{unbind:()=>CH(n,o,r)}),mB=(e,n,o,r)=>{const i=e.formatter.get(n);i&&(z0(e,n,o,r)&&(!("toggle"in i[0])||i[0].toggle)?V4(e,n,o,r):cB(e,n,o,r))},fB=at.explode,gB=()=>{const e={};return{addFilter:(i,u)=>{Ie(fB(i),g=>{an(e,g)||(e[g]={name:g,callbacks:[]}),e[g].callbacks.push(u)})},getFilters:()=>sl(e),removeFilter:(i,u)=>{Ie(fB(i),g=>{if(an(e,g))if(Te(u)){const y=e[g],x=Zt(y.callbacks,A=>A!==u);x.length>0?y.callbacks=x:delete e[g]}else delete e[g]})}}},xH=(e,n)=>{Ie(n,o=>{e.attr(o,null)})},EH=(e,n,o)=>{e.addNodeFilter("font",r=>{Ie(r,i=>{const u=n.parse(i.attr("style")),g=i.attr("color"),y=i.attr("face"),x=i.attr("size");g&&(u.color=g),y&&(u["font-family"]=y),x&&il(x).each(A=>{u["font-size"]=o[A-1]}),i.name="span",i.attr("style",n.serialize(u)),xH(i,["color","face","size"])})})},TH=(e,n,o)=>{e.addNodeFilter("strike",r=>{const i=n.type!=="html4";Ie(r,u=>{if(i)u.name="s";else{const g=o.parse(u.attr("style"));g["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(g))}})})},_H=(e,n,o)=>{var r;const i=Ov();n.convert_fonts_to_spans&&EH(e,i,at.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),TH(e,o,i)},kH=(e,n,o)=>{n.inline_styles&&_H(e,n,o)},hB=(e,n,o)=>{n.addNodeFilter("br",(r,i,u)=>{const g=at.extend({},o.getBlockElements()),y=o.getNonEmptyElements(),x=o.getWhitespaceElements();g.body=1;const A=I=>I.name in g||$d(o,I);for(let I=0,F=r.length;I<F;I++){let z=r[I],X=z.parent;if(X&&A(X)&&z===X.lastChild){let te=z.prev;for(;te;){const K=te.name;if(K!=="span"||te.attr("data-mce-type")!=="bookmark"){K==="br"&&(z=null);break}te=te.prev}if(z&&(z.remove(),H0(o,y,x,X))){const K=o.getElementRule(X.name);K&&(K.removeEmpty?X.remove():K.paddEmpty&&LE(e,u,A,X))}}else{let te=z;for(;X&&X.firstChild===te&&X.lastChild===te&&(te=X,!g[X.name]);)X=X.parent;if(te===X){const K=new Ti("#text",3);K.value=so,z.replace(K)}}}})},OH=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),AH=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},dS=e=>{const[n,...o]=e.split(","),r=o.join(","),i=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(i){const u=i[2]===";base64",g=u?AH(r):decodeURIComponent(r);return Z.some({type:i[1],data:g,base64Encoded:u})}else return Z.none()},W4=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return Z.none()}const i=new Uint8Array(r.length);for(let u=0;u<i.length;u++)i[u]=r.charCodeAt(u);return Z.some(new Blob([i],{type:e}))},HK=e=>new Promise((n,o)=>{dS(e).bind(({type:r,data:i,base64Encoded:u})=>W4(r,i,u)).fold(()=>o("Invalid data URI"),n)}),mS=e=>Ps(e,"blob:")?OH(e):Ps(e,"data:")?HK(e):Promise.reject("Unknown URI format"),Z4=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var i;o((i=r.error)===null||i===void 0?void 0:i.message)},r.readAsDataURL(e)});let fS=0;const gS=e=>"blobid"+fS++,j4=(e,n,o)=>dS(e).bind(({data:r,type:i,base64Encoded:u})=>{if(n&&!u)return Z.none();{const g=u?r:btoa(r);return o(g,i)}}),DH=(e,n,o)=>{const r=e.create(gS(),n,o);return e.add(r),r},pB=(e,n,o=!1)=>j4(n,o,(r,i)=>Z.from(e.getByData(r,i)).orThunk(()=>W4(i,r).map(u=>DH(e,u,r)))),zK=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(Ps(n,"blob:")){const r=e.getByUri(n);return Te(r)?Promise.resolve(r):mS(n).then(i=>Z4(i).then(u=>j4(u,!1,g=>Z.some(DH(e,i,g))).getOrThunk(o)))}else return Ps(n,"data:")?pB(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},RH=e=>Te(e.attr("data-mce-bogus")),MH=e=>e.attr("src")===xt.transparentSrc||Te(e.attr("data-mce-placeholder")),VK=(e,n)=>{const{blob_cache:o}=n;if(o){const r=i=>{const u=i.attr("src");MH(i)||RH(i)||Ht(u)||pB(o,u,!0).each(g=>{i.attr("src",g.blobUri())})};e.addAttributeFilter("src",i=>Ie(i,r))}},G4=(e,n)=>Ps(e,`${n}/`),bB=(e,n,o,r,i)=>{let u;Dt(e)?u="iframe":G4(e,"image")?u="img":G4(e,"video")?u="video":G4(e,"audio")?u="audio":u="iframe";const g=new Ti(u,1);return g.attr(u==="audio"?{src:n}:{src:n,width:o,height:r}),(u==="audio"||u==="video")&&g.attr("controls",""),u==="iframe"&&i&&g.attr("sandbox",""),g},NH=(e,n)=>{const o=e.schema;n.remove_trailing_brs&&hB(n,e,o),e.addAttributeFilter("href",i=>{let u=i.length;const g=x=>x.split(" ").filter(I=>I.length>0).concat(["noopener"]).sort().join(" "),y=x=>{const A=x?at.trim(x):"";return/\b(noopener)\b/g.test(A)?A:g(A)};if(!n.allow_unsafe_link_target)for(;u--;){const x=i[u];x.name==="a"&&x.attr("target")==="_blank"&&x.attr("rel",y(x.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",i=>{let u=i.length,g,y,x,A;for(;u--;)if(A=i[u],A.name==="a"&&A.firstChild&&!A.attr("href"))for(x=A.parent,g=A.lastChild;g&&x;)y=g.prev,x.insert(g,A),g=y}),n.fix_list_elements&&e.addNodeFilter("ul,ol",i=>{let u=i.length,g,y;for(;u--;)if(g=i[u],y=g.parent,y&&(y.name==="ul"||y.name==="ol"))if(g.prev&&g.prev.name==="li")g.prev.append(g);else{const x=new Ti("li",1);x.attr("style","list-style-type: none"),g.wrap(x)}});const r=o.getValidClasses();n.validate&&r&&e.addAttributeFilter("class",i=>{var u;let g=i.length;for(;g--;){const y=i[g],x=(u=y.attr("class"))!==null&&u!==void 0?u:"",A=at.explode(x," ");let I="";for(let F=0;F<A.length;F++){const z=A[F];let X=!1,te=r["*"];te&&te[z]&&(X=!0),te=r[y.name],!X&&te&&te[z]&&(X=!0),X&&(I&&(I+=" "),I+=z)}I.length||(I=null),y.attr("class",I)}}),VK(e,n),n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",i=>Ie(i,u=>{u.replace(bB(u.attr("type"),u.name==="object"?u.attr("data"):u.attr("src"),u.attr("width"),u.attr("height"),n.sandbox_iframes))})),n.sandbox_iframes&&e.addNodeFilter("iframe",i=>Ie(i,u=>u.attr("sandbox","")))};/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:q4,setPrototypeOf:vB,isFrozen:dT,getPrototypeOf:yB,getOwnPropertyDescriptor:Nr}=Object;let{freeze:_l,seal:am,create:PH}=Object,{apply:wB,construct:kl}=typeof Reflect<"u"&&Reflect;_l||(_l=function(n){return n}),am||(am=function(n){return n}),wB||(wB=function(n,o,r){return n.apply(o,r)}),kl||(kl=function(n,o){return new n(...o)});const Cb=gu(Array.prototype.forEach),yg=gu(Array.prototype.pop),ad=gu(Array.prototype.push),mT=gu(String.prototype.toLowerCase),K4=gu(String.prototype.toString),Sb=gu(String.prototype.match),cf=gu(String.prototype.replace),Z0=gu(String.prototype.indexOf),CB=gu(String.prototype.trim),fu=gu(Object.prototype.hasOwnProperty),wc=gu(RegExp.prototype.test),j0=BH(TypeError);function gu(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];return wB(e,n,r)}}function BH(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return kl(e,o)}}function Vo(e,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mT;vB&&vB(e,null);let r=n.length;for(;r--;){let i=n[r];if(typeof i=="string"){const u=o(i);u!==i&&(dT(n)||(n[r]=u),i=u)}e[i]=!0}return e}function $H(e){for(let n=0;n<e.length;n++)fu(e,n)||(e[n]=null);return e}function xb(e){const n=PH(null);for(const[o,r]of q4(e))fu(e,o)&&(Array.isArray(r)?n[o]=$H(r):r&&typeof r=="object"&&r.constructor===Object?n[o]=xb(r):n[o]=r);return n}function hS(e,n){for(;e!==null;){const r=Nr(e,n);if(r){if(r.get)return gu(r.get);if(typeof r.value=="function")return gu(r.value)}e=yB(e)}function o(){return null}return o}const SB=_l(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Y4=_l(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),fT=_l(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),IH=_l(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Eb=_l(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),xB=_l(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),EB=_l(["#text"]),X4=_l(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),J4=_l(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Q4=_l(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),gT=_l(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),FH=am(/\{\{[\w\W]*|[\w\W]*\}\}/gm),TB=am(/<%[\w\W]*|[\w\W]*%>/gm),_B=am(/\${[\w\W]*}/gm),kB=am(/^data-[\-\w.\u00B7-\uFFFF]/),OB=am(/^aria-[\-\w]+$/),eD=am(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),AB=am(/^(?:\w+script|data):/i),LH=am(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),DB=am(/^html$/i),HH=am(/^[a-z][.\w]*(-[.\w]+)+$/i);var hT=Object.freeze({__proto__:null,MUSTACHE_EXPR:FH,ERB_EXPR:TB,TMPLIT_EXPR:_B,DATA_ATTR:kB,ARIA_ATTR:OB,IS_ALLOWED_URI:eD,IS_SCRIPT_OR_DATA:AB,ATTR_WHITESPACE:LH,DOCTYPE_NAME:DB,CUSTOM_ELEMENT:HH});const wg={element:1,text:3,progressingInstruction:7,comment:8,document:9},RB=function(){return typeof window>"u"?null:window},MB=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";o&&o.hasAttribute(i)&&(r=o.getAttribute(i));const u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML(g){return g},createScriptURL(g){return g}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function pS(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:RB();const n=Mn=>pS(Mn);if(n.version="3.1.7",n.removed=[],!e||!e.document||e.document.nodeType!==wg.document)return n.isSupported=!1,n;let{document:o}=e;const r=o,i=r.currentScript,{DocumentFragment:u,HTMLTemplateElement:g,Node:y,Element:x,NodeFilter:A,NamedNodeMap:I=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:F,DOMParser:z,trustedTypes:X}=e,te=x.prototype,K=hS(te,"cloneNode"),ne=hS(te,"remove"),ge=hS(te,"nextSibling"),be=hS(te,"childNodes"),ve=hS(te,"parentNode");if(typeof g=="function"){const Mn=o.createElement("template");Mn.content&&Mn.content.ownerDocument&&(o=Mn.content.ownerDocument)}let Se,Ze="";const{implementation:st,createNodeIterator:Ct,createDocumentFragment:Fe,getElementsByTagName:Me}=o,{importNode:Qe}=r;let Et={};n.isSupported=typeof q4=="function"&&typeof ve=="function"&&st&&st.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Ut,ERB_EXPR:Cn,TMPLIT_EXPR:Rn,DATA_ATTR:_o,ARIA_ATTR:Go,IS_SCRIPT_OR_DATA:Zs,ATTR_WHITESPACE:Da,CUSTOM_ELEMENT:Xr}=hT;let{IS_ALLOWED_URI:dt}=hT,Tt=null;const to=Vo({},[...SB,...Y4,...fT,...Eb,...EB]);let Gn=null;const Ft=Vo({},[...X4,...J4,...Q4,...gT]);let Lt=Object.seal(PH(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),it=null,gn=null,Wn=!0,Do=!0,qo=!1,Ai=!0,Jc=!1,hf=!0,Di=!1,fd=!1,yn=!1,Zn=!1,mo=!1,Es=!1,Ms=!0,wu=!1;const ky="user-content-";let Oy=!0,pf=!1,bf={},Ap=null;const Ay=Vo({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let g2=null;const gk=Vo({},["audio","video","img","source","image","track"]);let Vb=null;const hk=Vo({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Dp="http://www.w3.org/1998/Math/MathML",Dy="http://www.w3.org/2000/svg",gd="http://www.w3.org/1999/xhtml";let vf=gd,Ry=!1,My=null;const h2=Vo({},[Dp,Dy,gd],K4);let Ub=null;const cM=["application/xhtml+xml","text/html"],pk="text/html";let ja=null,Rp=null;const kg=o.createElement("form"),p2=function(Ne){return Ne instanceof RegExp||Ne instanceof Function},ke=function(){let Ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Rp&&Rp===Ne)){if((!Ne||typeof Ne!="object")&&(Ne={}),Ne=xb(Ne),Ub=cM.indexOf(Ne.PARSER_MEDIA_TYPE)===-1?pk:Ne.PARSER_MEDIA_TYPE,ja=Ub==="application/xhtml+xml"?K4:mT,Tt=fu(Ne,"ALLOWED_TAGS")?Vo({},Ne.ALLOWED_TAGS,ja):to,Gn=fu(Ne,"ALLOWED_ATTR")?Vo({},Ne.ALLOWED_ATTR,ja):Ft,My=fu(Ne,"ALLOWED_NAMESPACES")?Vo({},Ne.ALLOWED_NAMESPACES,K4):h2,Vb=fu(Ne,"ADD_URI_SAFE_ATTR")?Vo(xb(hk),Ne.ADD_URI_SAFE_ATTR,ja):hk,g2=fu(Ne,"ADD_DATA_URI_TAGS")?Vo(xb(gk),Ne.ADD_DATA_URI_TAGS,ja):gk,Ap=fu(Ne,"FORBID_CONTENTS")?Vo({},Ne.FORBID_CONTENTS,ja):Ay,it=fu(Ne,"FORBID_TAGS")?Vo({},Ne.FORBID_TAGS,ja):{},gn=fu(Ne,"FORBID_ATTR")?Vo({},Ne.FORBID_ATTR,ja):{},bf=fu(Ne,"USE_PROFILES")?Ne.USE_PROFILES:!1,Wn=Ne.ALLOW_ARIA_ATTR!==!1,Do=Ne.ALLOW_DATA_ATTR!==!1,qo=Ne.ALLOW_UNKNOWN_PROTOCOLS||!1,Ai=Ne.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Jc=Ne.SAFE_FOR_TEMPLATES||!1,hf=Ne.SAFE_FOR_XML!==!1,Di=Ne.WHOLE_DOCUMENT||!1,Zn=Ne.RETURN_DOM||!1,mo=Ne.RETURN_DOM_FRAGMENT||!1,Es=Ne.RETURN_TRUSTED_TYPE||!1,yn=Ne.FORCE_BODY||!1,Ms=Ne.SANITIZE_DOM!==!1,wu=Ne.SANITIZE_NAMED_PROPS||!1,Oy=Ne.KEEP_CONTENT!==!1,pf=Ne.IN_PLACE||!1,dt=Ne.ALLOWED_URI_REGEXP||eD,vf=Ne.NAMESPACE||gd,Lt=Ne.CUSTOM_ELEMENT_HANDLING||{},Ne.CUSTOM_ELEMENT_HANDLING&&p2(Ne.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Lt.tagNameCheck=Ne.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ne.CUSTOM_ELEMENT_HANDLING&&p2(Ne.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Lt.attributeNameCheck=Ne.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ne.CUSTOM_ELEMENT_HANDLING&&typeof Ne.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Lt.allowCustomizedBuiltInElements=Ne.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Jc&&(Do=!1),mo&&(Zn=!0),bf&&(Tt=Vo({},EB),Gn=[],bf.html===!0&&(Vo(Tt,SB),Vo(Gn,X4)),bf.svg===!0&&(Vo(Tt,Y4),Vo(Gn,J4),Vo(Gn,gT)),bf.svgFilters===!0&&(Vo(Tt,fT),Vo(Gn,J4),Vo(Gn,gT)),bf.mathMl===!0&&(Vo(Tt,Eb),Vo(Gn,Q4),Vo(Gn,gT))),Ne.ADD_TAGS&&(Tt===to&&(Tt=xb(Tt)),Vo(Tt,Ne.ADD_TAGS,ja)),Ne.ADD_ATTR&&(Gn===Ft&&(Gn=xb(Gn)),Vo(Gn,Ne.ADD_ATTR,ja)),Ne.ADD_URI_SAFE_ATTR&&Vo(Vb,Ne.ADD_URI_SAFE_ATTR,ja),Ne.FORBID_CONTENTS&&(Ap===Ay&&(Ap=xb(Ap)),Vo(Ap,Ne.FORBID_CONTENTS,ja)),Oy&&(Tt["#text"]=!0),Di&&Vo(Tt,["html","head","body"]),Tt.table&&(Vo(Tt,["tbody"]),delete it.tbody),Ne.TRUSTED_TYPES_POLICY){if(typeof Ne.TRUSTED_TYPES_POLICY.createHTML!="function")throw j0('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Ne.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw j0('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Se=Ne.TRUSTED_TYPES_POLICY,Ze=Se.createHTML("")}else Se===void 0&&(Se=MB(X,i)),Se!==null&&typeof Ze=="string"&&(Ze=Se.createHTML(""));_l&&_l(Ne),Rp=Ne}},Re=Vo({},["mi","mo","mn","ms","mtext"]),ut=Vo({},["annotation-xml"]),rt=Vo({},["title","style","font","a","script"]),Kt=Vo({},[...Y4,...fT,...IH]),zn=Vo({},[...Eb,...xB]),Ts=function(Ne){let zt=ve(Ne);(!zt||!zt.tagName)&&(zt={namespaceURI:vf,tagName:"template"});const On=mT(Ne.tagName),pr=mT(zt.tagName);return My[Ne.namespaceURI]?Ne.namespaceURI===Dy?zt.namespaceURI===gd?On==="svg":zt.namespaceURI===Dp?On==="svg"&&(pr==="annotation-xml"||Re[pr]):!!Kt[On]:Ne.namespaceURI===Dp?zt.namespaceURI===gd?On==="math":zt.namespaceURI===Dy?On==="math"&&ut[pr]:!!zn[On]:Ne.namespaceURI===gd?zt.namespaceURI===Dy&&!ut[pr]||zt.namespaceURI===Dp&&!Re[pr]?!1:!zn[On]&&(rt[On]||!Kt[On]):!!(Ub==="application/xhtml+xml"&&My[Ne.namespaceURI]):!1},hr=function(Ne){ad(n.removed,{element:Ne});try{ve(Ne).removeChild(Ne)}catch{ne(Ne)}},_r=function(Ne,zt){try{ad(n.removed,{attribute:zt.getAttributeNode(Ne),from:zt})}catch{ad(n.removed,{attribute:null,from:zt})}if(zt.removeAttribute(Ne),Ne==="is"&&!Gn[Ne])if(Zn||mo)try{hr(zt)}catch{}else try{zt.setAttribute(Ne,"")}catch{}},Ny=function(Ne){let zt=null,On=null;if(yn)Ne="<remove></remove>"+Ne;else{const Ri=Sb(Ne,/^[\r\n\t ]+/);On=Ri&&Ri[0]}Ub==="application/xhtml+xml"&&vf===gd&&(Ne='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ne+"</body></html>");const pr=Se?Se.createHTML(Ne):Ne;if(vf===gd)try{zt=new z().parseFromString(pr,Ub)}catch{}if(!zt||!zt.documentElement){zt=st.createDocument(vf,"template",null);try{zt.documentElement.innerHTML=Ry?Ze:pr}catch{}}const oc=zt.body||zt.documentElement;return Ne&&On&&oc.insertBefore(o.createTextNode(On),oc.childNodes[0]||null),vf===gd?Me.call(zt,Di?"html":"body")[0]:Di?zt.documentElement:oc},Py=function(Ne){return Ct.call(Ne.ownerDocument||Ne,Ne,A.SHOW_ELEMENT|A.SHOW_COMMENT|A.SHOW_TEXT|A.SHOW_PROCESSING_INSTRUCTION|A.SHOW_CDATA_SECTION,null)},bk=function(Ne){return Ne instanceof F&&(typeof Ne.nodeName!="string"||typeof Ne.textContent!="string"||typeof Ne.removeChild!="function"||!(Ne.attributes instanceof I)||typeof Ne.removeAttribute!="function"||typeof Ne.setAttribute!="function"||typeof Ne.namespaceURI!="string"||typeof Ne.insertBefore!="function"||typeof Ne.hasChildNodes!="function")},lM=function(Ne){return typeof y=="function"&&Ne instanceof y},yf=function(Ne,zt,On){Et[Ne]&&Cb(Et[Ne],pr=>{pr.call(n,zt,On,Rp)})},R6=function(Ne){let zt=null;if(yf("beforeSanitizeElements",Ne,null),bk(Ne))return hr(Ne),!0;const On=ja(Ne.nodeName);if(yf("uponSanitizeElement",Ne,{tagName:On,allowedTags:Tt}),Ne.hasChildNodes()&&!lM(Ne.firstElementChild)&&wc(/<[/\w]/g,Ne.innerHTML)&&wc(/<[/\w]/g,Ne.textContent)||Ne.nodeType===wg.progressingInstruction||hf&&Ne.nodeType===wg.comment&&wc(/<[/\w]/g,Ne.data))return hr(Ne),!0;if(!Tt[On]||it[On]){if(!it[On]&&M6(On)&&(Lt.tagNameCheck instanceof RegExp&&wc(Lt.tagNameCheck,On)||Lt.tagNameCheck instanceof Function&&Lt.tagNameCheck(On)))return!1;if(Oy&&!Ap[On]){const pr=ve(Ne)||Ne.parentNode,oc=be(Ne)||Ne.childNodes;if(oc&&pr){const Ri=oc.length;for(let Qc=Ri-1;Qc>=0;--Qc){const hd=K(oc[Qc],!0);hd.__removalCount=(Ne.__removalCount||0)+1,pr.insertBefore(hd,ge(Ne))}}}return hr(Ne),!0}return Ne instanceof x&&!Ts(Ne)||(On==="noscript"||On==="noembed"||On==="noframes")&&wc(/<\/no(script|embed|frames)/i,Ne.innerHTML)?(hr(Ne),!0):(Jc&&Ne.nodeType===wg.text&&(zt=Ne.textContent,Cb([Ut,Cn,Rn],pr=>{zt=cf(zt,pr," ")}),Ne.textContent!==zt&&(ad(n.removed,{element:Ne.cloneNode()}),Ne.textContent=zt)),yf("afterSanitizeElements",Ne,null),!1)},uM=function(Ne,zt,On){if(Ms&&(zt==="id"||zt==="name")&&(On in o||On in kg))return!1;if(!(Do&&!gn[zt]&&wc(_o,zt))){if(!(Wn&&wc(Go,zt))){if(!Gn[zt]||gn[zt]){if(!(M6(Ne)&&(Lt.tagNameCheck instanceof RegExp&&wc(Lt.tagNameCheck,Ne)||Lt.tagNameCheck instanceof Function&&Lt.tagNameCheck(Ne))&&(Lt.attributeNameCheck instanceof RegExp&&wc(Lt.attributeNameCheck,zt)||Lt.attributeNameCheck instanceof Function&&Lt.attributeNameCheck(zt))||zt==="is"&&Lt.allowCustomizedBuiltInElements&&(Lt.tagNameCheck instanceof RegExp&&wc(Lt.tagNameCheck,On)||Lt.tagNameCheck instanceof Function&&Lt.tagNameCheck(On))))return!1}else if(!Vb[zt]){if(!wc(dt,cf(On,Da,""))){if(!((zt==="src"||zt==="xlink:href"||zt==="href")&&Ne!=="script"&&Z0(On,"data:")===0&&g2[Ne])){if(!(qo&&!wc(Zs,cf(On,Da,"")))){if(On)return!1}}}}}}return!0},M6=function(Ne){return Ne!=="annotation-xml"&&Sb(Ne,Xr)},N6=function(Ne){yf("beforeSanitizeAttributes",Ne,null);const{attributes:zt}=Ne;if(!zt)return;const On={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Gn};let pr=zt.length;for(;pr--;){const oc=zt[pr],{name:Ri,namespaceURI:Qc,value:hd}=oc,b2=ja(Ri);let sc=Ri==="value"?hd:CB(hd);const P6=sc;if(On.attrName=b2,On.attrValue=sc,On.keepAttr=!0,On.forceKeepAttr=void 0,yf("uponSanitizeAttribute",Ne,On),sc=On.attrValue,On.forceKeepAttr)continue;if(!On.keepAttr){_r(Ri,Ne);continue}if(!Ai&&wc(/\/>/i,sc)){_r(Ri,Ne);continue}Jc&&Cb([Ut,Cn,Rn],$6=>{sc=cf(sc,$6," ")});const B6=ja(Ne.nodeName);if(!uM(B6,b2,sc)){_r(Ri,Ne);continue}if(wu&&(b2==="id"||b2==="name")&&(_r(Ri,Ne),sc=ky+sc),hf&&wc(/((--!?|])>)|<\/(style|title)/i,sc)){_r(Ri,Ne);continue}if(Se&&typeof X=="object"&&typeof X.getAttributeType=="function"&&!Qc)switch(X.getAttributeType(B6,b2)){case"TrustedHTML":{sc=Se.createHTML(sc);break}case"TrustedScriptURL":{sc=Se.createScriptURL(sc);break}}if(sc!==P6)try{Qc?Ne.setAttributeNS(Qc,Ri,sc):Ne.setAttribute(Ri,sc),bk(Ne)?hr(Ne):yg(n.removed)}catch{}}yf("afterSanitizeAttributes",Ne,null)},Fq=function Mn(Ne){let zt=null;const On=Py(Ne);for(yf("beforeSanitizeShadowDOM",Ne,null);zt=On.nextNode();)yf("uponSanitizeShadowNode",zt,null),!R6(zt)&&(zt.content instanceof u&&Mn(zt.content),N6(zt));yf("afterSanitizeShadowDOM",Ne,null)};return n.sanitize=function(Mn){let Ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},zt=null,On=null,pr=null,oc=null;if(Ry=!Mn,Ry&&(Mn="<!-->"),typeof Mn!="string"&&!lM(Mn))if(typeof Mn.toString=="function"){if(Mn=Mn.toString(),typeof Mn!="string")throw j0("dirty is not a string, aborting")}else throw j0("toString is not a function");if(!n.isSupported)return Mn;if(fd||ke(Ne),n.removed=[],typeof Mn=="string"&&(pf=!1),pf){if(Mn.nodeName){const hd=ja(Mn.nodeName);if(!Tt[hd]||it[hd])throw j0("root node is forbidden and cannot be sanitized in-place")}}else if(Mn instanceof y)zt=Ny("<!---->"),On=zt.ownerDocument.importNode(Mn,!0),On.nodeType===wg.element&&On.nodeName==="BODY"||On.nodeName==="HTML"?zt=On:zt.appendChild(On);else{if(!Zn&&!Jc&&!Di&&Mn.indexOf("<")===-1)return Se&&Es?Se.createHTML(Mn):Mn;if(zt=Ny(Mn),!zt)return Zn?null:Es?Ze:""}zt&&yn&&hr(zt.firstChild);const Ri=Py(pf?Mn:zt);for(;pr=Ri.nextNode();)R6(pr)||(pr.content instanceof u&&Fq(pr.content),N6(pr));if(pf)return Mn;if(Zn){if(mo)for(oc=Fe.call(zt.ownerDocument);zt.firstChild;)oc.appendChild(zt.firstChild);else oc=zt;return(Gn.shadowroot||Gn.shadowrootmode)&&(oc=Qe.call(r,oc,!0)),oc}let Qc=Di?zt.outerHTML:zt.innerHTML;return Di&&Tt["!doctype"]&&zt.ownerDocument&&zt.ownerDocument.doctype&&zt.ownerDocument.doctype.name&&wc(DB,zt.ownerDocument.doctype.name)&&(Qc="<!DOCTYPE "+zt.ownerDocument.doctype.name+`>
`+Qc),Jc&&Cb([Ut,Cn,Rn],hd=>{Qc=cf(Qc,hd," ")}),Se&&Es?Se.createHTML(Qc):Qc},n.setConfig=function(){let Mn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ke(Mn),fd=!0},n.clearConfig=function(){Rp=null,fd=!1},n.isValidAttribute=function(Mn,Ne,zt){Rp||ke({});const On=ja(Mn),pr=ja(Ne);return uM(On,pr,zt)},n.addHook=function(Mn,Ne){typeof Ne=="function"&&(Et[Mn]=Et[Mn]||[],ad(Et[Mn],Ne))},n.removeHook=function(Mn){if(Et[Mn])return yg(Et[Mn])},n.removeHooks=function(Mn){Et[Mn]&&(Et[Mn]=[])},n.removeAllHooks=function(){Et={}},n}var NB=pS();const PB=at.each,cp=at.trim,tD=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],BB={ftp:21,http:80,https:443,mailto:25},bS=["img","video"],$B=(e,n)=>Te(e)?!e:Te(n)?!fn(bS,n):!0,nD=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},oD=(e,n,o)=>{const r=nD(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?$B(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class hu{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),i=/data:([^;]+)/.exec(r[0]);return i&&(o=i[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const i=jf.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!oD(r,i,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=cp(n),this.settings=o;const r=o.base_uri,i=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){i.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const y=r?r.path:new hu(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+i.toAbsPath(y,n);else{const x=/([^#?]*)([#?]?.*)/.exec(n);x&&(n=(r&&r.protocol||"http")+"://mce_host"+i.toAbsPath(y,x[1])+x[2])}}n=n.replace(/@@/g,"(mce_at)");const g=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);g&&PB(tD,(y,x)=>{let A=g[x];A&&(A=A.replace(/\(mce_at\)/g,"@@")),i[y]=A}),r&&(i.protocol||(i.protocol=r.protocol),i.userInfo||(i.userInfo=r.userInfo),!i.port&&i.host==="mce_host"&&(i.port=r.port),(!i.host||i.host==="mce_host")&&(i.host=r.host),i.source=""),u&&(i.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new hu(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),i=o.getURI();if(r===i||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===i)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new hu(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?BB[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,i="",u,g;const y=n.substring(0,n.lastIndexOf("/")).split("/"),x=o.split("/");if(y.length>=x.length){for(u=0,g=y.length;u<g;u++)if(u>=x.length||y[u]!==x[u]){r=u+1;break}}if(y.length<x.length){for(u=0,g=x.length;u<g;u++)if(u>=y.length||y[u]!==x[u]){r=u+1;break}}if(r===1)return o;for(u=0,g=y.length-(r-1);u<g;u++)i+="../";for(u=r-1,g=x.length;u<g;u++)u!==r-1?i+="/"+x[u]:i+=x[u];return i}toAbsPath(n,o){let r=0;const i=/\/$/.test(o)?"/":"",u=n.split("/"),g=o.split("/"),y=[];PB(u,F=>{F&&y.push(F)});const x=[];for(let F=g.length-1;F>=0;F--)if(!(g[F].length===0||g[F]===".")){if(g[F]===".."){r++;continue}if(r>0){r--;continue}x.push(g[F])}const A=y.length-r;let I;return A<=0?I=ns(x).join("/"):I=y.slice(0,A).join("/")+"/"+ns(x).join("/"),I.indexOf("/")!==0&&(I="/"+I),i&&I.lastIndexOf("/")!==I.length-1&&(I+=i),I}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const zH=at.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),sD="data-mce-type";let IB=0;const pT=(e,n,o,r,i)=>{var u,g,y,x;const A=n.validate,I=o.getSpecialElements();e.nodeType===Kp&&!n.allow_conditional_comments&&/^\[if/i.test((u=e.nodeValue)!==null&&u!==void 0?u:"")&&(e.nodeValue=" "+e.nodeValue);const F=(g=i==null?void 0:i.tagName)!==null&&g!==void 0?g:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){Te(i)&&(i.allowedTags[F]=!0);return}if(e.nodeType!==Ic||F==="body")return;const z=se.fromDom(e),X=Au(z,sD),te=ya(z,"data-mce-bogus");if(!X&&ee(te)){te==="all"?fo(z):Uc(z);return}const K=o.getElementRule(F);if(A&&!K){an(I,F)?fo(z):Uc(z);return}else Te(i)&&(i.allowedTags[F]=!0);if(A&&K&&!X){if(Ie((y=K.attributesForced)!==null&&y!==void 0?y:[],ne=>{ts(z,ne.name,ne.value==="{$uid}"?`mce_${IB++}`:ne.value)}),Ie((x=K.attributesDefault)!==null&&x!==void 0?x:[],ne=>{Au(z,ne.name)||ts(z,ne.name,ne.value==="{$uid}"?`mce_${IB++}`:ne.value)}),K.attributesRequired&&!Yo(K.attributesRequired,ne=>Au(z,ne))){Uc(z);return}if(K.removeEmptyAttrs&&Lc(z)){Uc(z);return}K.outputName&&K.outputName!==F&&nu(z,K.outputName)}},VH=(e,n,o,r,i)=>{const u=e.tagName.toLowerCase(),{attrName:g,attrValue:y}=i;i.keepAttr=rD(n,o,r,u,g,y),i.keepAttr?(i.allowedAttributes[g]=!0,LB(g,o)&&(i.attrValue=g),n.allow_svg_data_urls&&Ps(y,"data:image/svg+xml")&&(i.forceKeepAttr=!0)):FB(e,g)&&(i.forceKeepAttr=!0)},rD=(e,n,o,r,i,u)=>o!=="html"&&!Ql(r)?!0:!(i in zH&&oD(e,u,r))&&(!e.validate||n.isValid(r,i)||Ps(i,"data-")||Ps(i,"aria-")),FB=(e,n)=>e.hasAttribute(sD)&&(n==="id"||n==="class"||n==="style"),LB=(e,n)=>e in n.getBoolAttrs(),UH=(e,n,o,r)=>{const{attributes:i}=e;for(let u=i.length-1;u>=0;u--){const g=i[u],y=g.name,x=g.value;!rD(n,o,r,e.tagName.toLowerCase(),y,x)&&!FB(e,y)?e.removeAttribute(y):LB(y,o)&&e.setAttribute(y,y)}},WH=(e,n,o)=>{const r=NB();return r.addHook("uponSanitizeElement",(i,u)=>{pT(i,e,n,o.track(i),u)}),r.addHook("uponSanitizeAttribute",(i,u)=>{VH(i,e,n,o.current(),u)}),r},ZH=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},jH=e=>{const n=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`),o={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:n};return NB().sanitize(e,o),e.innerHTML},GH=(e,n)=>{const o=Nm();if(e.sanitize){const r=WH(e,n,o);return{sanitizeHtmlElement:(u,g)=>{r.sanitize(u,ZH(e,g)),r.removed=[],o.reset()},sanitizeNamespaceElement:jH}}else return{sanitizeHtmlElement:(u,g)=>{const y=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let x;for(;x=y.nextNode();){const A=o.track(x);pT(x,e,n,A),Mt(x)&&UH(x,e,n,A)}o.reset()},sanitizeNamespaceElement:Rt}},HB=at.makeMap,zB=at.extend,vS=(e,n,o,r)=>{const i=e.name,u=i in o&&i!=="title"&&i!=="textarea"&&i!=="noscript",g=n.childNodes;for(let y=0,x=g.length;y<x;y++){const A=g[y],I=new Ti(A.nodeName.toLowerCase(),A.nodeType);if(Mt(A)){const F=A.attributes;for(let z=0,X=F.length;z<X;z++){const te=F[z];I.attr(te.name,te.value)}Ql(I.name)&&(r(A),I.value=A.innerHTML)}else nt(A)?(I.value=A.data,u&&(I.raw=!0)):(Md(A)||M2(A)||Am(A))&&(I.value=A.data);Ql(I.name)||vS(I,A,o,r),e.append(I)}},ki=(e,n,o)=>{const r=[];for(let i=e,u=i;i;u=i,i=i.walk()){const g=i;Ie(n,y=>y(g)),Ht(g.parent)&&g!==e?i=u:r.push(g)}for(let i=r.length-1;i>=0;i--){const u=r[i];Ie(o,g=>g(u))}},qH=(e,n,o,r)=>{const i=o.validate,u=n.getNonEmptyElements(),g=n.getWhitespaceElements(),y=zB(HB("script,style,head,html,body,title,meta,param"),n.getBlockElements()),x=U2(n),A=/[ \t\r\n]+/g,I=/^[ \t\r\n]+/,F=/[ \t\r\n]+$/,z=be=>{let ve=be.parent;for(;Te(ve);){if(ve.name in g)return!0;ve=ve.parent}return!1},X=be=>{let ve=be;for(;Te(ve);){if(ve.name in x)return H0(n,u,g,ve);ve=ve.parent}return!1},te=be=>be.name in y||$d(n,be)||Ql(be.name)&&be.parent===e,K=(be,ve)=>{const Se=ve?be.prev:be.next;return Te(Se)||Ht(be.parent)?!1:te(be.parent)&&(be.parent!==e||r.isRootContent===!0)};return[be=>{var ve;if(be.type===3&&!z(be)){let Se=(ve=be.value)!==null&&ve!==void 0?ve:"";Se=Se.replace(A," "),(SP(be.prev,te)||K(be,!0))&&(Se=Se.replace(I,"")),Se.length===0?be.remove():be.value=Se}},be=>{var ve;if(be.type===1){const Se=n.getElementRule(be.name);if(i&&Se){const Ze=H0(n,u,g,be);Se.paddInEmptyBlock&&Ze&&X(be)?LE(o,r,te,be):Se.removeEmpty&&Ze?te(be)?be.remove():be.unwrap():Se.paddEmpty&&(Ze||wP(be))&&LE(o,r,te,be)}}else if(be.type===3&&!z(be)){let Se=(ve=be.value)!==null&&ve!==void 0?ve:"";(be.next&&te(be.next)||K(be,!1))&&(Se=Se.replace(F,"")),Se.length===0?be.remove():be.value=Se}}]},bT=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},id=(e={},n=Hd())=>{const o=gB(),r=gB(),i={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,g=GH(i,n),y=(ve,Se,Ze="html")=>{const st=Ze==="xhtml"?"application/xhtml+xml":"text/html",Ct=an(n.getSpecialElements(),Se.toLowerCase()),Fe=Ct?`<${Se}>${ve}</${Se}>`:ve,Me=Ze==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Fe}</body></html>`:`<body>${Fe}</body>`,Qe=u.parseFromString(Me,st).body;return g.sanitizeHtmlElement(Qe,st),Ct?Qe.firstChild:Qe},x=o.addFilter,A=o.getFilters,I=o.removeFilter,F=r.addFilter,z=r.getFilters,X=r.removeFilter,te=(ve,Se)=>{VE(n,ve)&&Se.push(ve)},K=(ve,Se)=>{const Ze=ee(Se.attr(sD)),st=Se.type===1&&!an(ve,Se.name)&&!$d(n,Se)&&!Ql(Se.name);return Se.type===3||st&&!Ze},ne=(ve,Se)=>{const Ze=zB(HB("script,style,head,html,body,title,meta,param"),n.getBlockElements()),st=/^[ \t\r\n]+/,Ct=/[ \t\r\n]+$/;let Fe=ve.firstChild,Me=null;const Qe=Et=>{var Ut,Cn;Et&&(Fe=Et.firstChild,Fe&&Fe.type===3&&(Fe.value=(Ut=Fe.value)===null||Ut===void 0?void 0:Ut.replace(st,"")),Fe=Et.lastChild,Fe&&Fe.type===3&&(Fe.value=(Cn=Fe.value)===null||Cn===void 0?void 0:Cn.replace(Ct,"")))};if(n.isValidChild(ve.name,Se.toLowerCase())){for(;Fe;){const Et=Fe.next;K(Ze,Fe)?(Me||(Me=new Ti(Se,1),Me.attr(i.forced_root_block_attrs),ve.insert(Me,Fe)),Me.append(Fe)):(Qe(Me),Me=null),Fe=Et}Qe(Me)}},be={schema:n,addAttributeFilter:F,getAttributeFilters:z,removeAttributeFilter:X,addNodeFilter:x,getNodeFilters:A,removeNodeFilter:I,parse:(ve,Se={})=>{var Ze;const st=i.validate,Ct=(Ze=Se.context)!==null&&Ze!==void 0?Ze:i.root_name,Fe=y(ve,Ct,Se.format);f1(n,Fe);const Me=new Ti(Ct,11);vS(Me,Fe,n.getSpecialElements(),g.sanitizeNamespaceElement),Fe.innerHTML="";const[Qe,Et]=qH(Me,n,i,Se),Ut=[],Cn=st?Zs=>te(Zs,Ut):Rt,Rn={nodes:{},attributes:{}},_o=Zs=>h4(A(),z(),Zs,Rn);if(ki(Me,[Qe,_o],[Et,Cn]),Ut.reverse(),st&&Ut.length>0)if(Se.context){const{pass:Zs,fail:Da}=sr(Ut,Xr=>Xr.parent===Me);zE(Da,n,Me,_o),Se.invalid=Zs.length>0}else zE(Ut,n,Me,_o);const Go=bT(i,Se);return Go&&(Me.name==="body"||Se.isRootContent)&&ne(Me,Go),Se.invalid||sS(Rn,Se),Me}};return NH(be,i),kH(be,i,n),be},VB=e=>sp(e)?Qh({validate:!1}).serialize(e):e,Cc=(e,n,o)=>{const r=VB(e),i=n(r);if(i.isDefaultPrevented())return i;if(sp(e))if(i.content!==r){const u=id({validate:!1,forced_root_block:!1,...o}).parse(i.content,{context:e.name});return{...i,content:u}}else return{...i,content:e};else return i},lp=(e,n)=>{if(n.no_events)return yi.value(n);{const o=pA(e,n);return o.isDefaultPrevented()?yi.error(Bn(e,{content:"",...o}).content):yi.value(o)}},aD=(e,n,o)=>o.no_events?n:Cc(n,i=>Bn(e,{...o,content:i}),{sanitize:Ah(e),sandbox_iframes:o0(e)}).content,iD=(e,n)=>{if(n.no_events)return yi.value(n);{const o=Cc(n.content,r=>eN(e,{...n,content:r}),{sanitize:Ah(e),sandbox_iframes:o0(e)});return o.isDefaultPrevented()?(rE(e,o),yi.error(void 0)):yi.value(o)}},vT=(e,n,o)=>{o.no_events||rE(e,{...o,content:n})},cD=(e,n,o)=>({element:e,width:n,rows:o}),lD=(e,n)=>({element:e,cells:n}),yS=(e,n)=>({x:e,y:n}),yT=(e,n)=>cl(e,n).bind(il).getOr(1),KH=(e,n,o,r,i)=>{const u=yT(i,"rowspan"),g=yT(i,"colspan"),y=e.rows;for(let x=o;x<o+u;x++){y[x]||(y[x]=lD(Hv(r),[]));for(let A=n;A<n+g;A++){const I=y[x].cells;I[A]=x===o&&A===n?i:Xi(i)}}},UB=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},YH=(e,n,o)=>{for(;UB(e,n,o);)n++;return n},wT=e=>ss(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),CT=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const i=o[r].cells;for(let u=0;u<i.length;u++)if(oo(i[u],n))return Z.some(yS(u,r))}return Z.none()},WB=(e,n,o,r,i)=>{const u=[],g=e.rows;for(let y=o;y<=i;y++){const x=g[y].cells,A=n<r?x.slice(n,r+1):x.slice(r,n+1);u.push(lD(g[y].element,A))}return u},XH=(e,n,o)=>{const r=n.x,i=n.y,u=o.x,g=o.y,y=i<g?WB(e,r,i,u,g):WB(e,r,g,u,i);return cD(e.element,wT(y),y)},lf=(e,n)=>{const o=Xi(e.element),r=se.fromTag("tbody");return Eo(r,n),Ks(o,r),o},uD=e=>Wt(e.rows,n=>{const o=Wt(n.cells,i=>{const u=Hv(i);return Bs(u,"colspan"),Bs(u,"rowspan"),u}),r=Xi(n.element);return Eo(r,o),r}),JH=e=>{const n=cD(Xi(e),0,[]);return Ie(Wr(e,"tr"),(o,r)=>{Ie(Wr(o,"td,th"),(i,u)=>{KH(n,YH(n,u,r),r,o,i)})}),cD(n.element,wT(n.rows),n.rows)},ST=e=>lf(e,uD(e)),dD=(e,n,o)=>CT(e,n).bind(r=>CT(e,o).map(i=>XH(e,r,i))),ZB=e=>_s(e,n=>Jn(n)==="ul"||Jn(n)==="ol"),jB=(e,n)=>_s(e,o=>Jn(o)==="li"&&SC(o,n)).fold(gt([]),o=>ZB(e).map(r=>{const i=se.fromTag(Jn(r)),u=Uo(Zg(r),(g,y)=>Ps(y,"list-style"));return Sa(i,u),[se.fromTag("li"),i]}).getOr([])),GB=(e,n)=>{const o=ss(n,(r,i)=>(Ks(i,r),i),e);return n.length>0?HC([o]):o},QH=e=>Iu(e)?sa(e).filter(Ui).fold(gt([]),n=>[e,n]):Ui(e)?[e]:[],ez=(e,n,o)=>{const r=se.fromDom(n.commonAncestorContainer),i=of(r,e),u=Zt(i,x=>o.isWrapper(Jn(x))),g=jB(i,n),y=u.concat(g.length?g:QH(r));return Wt(y,Xi)},qB=()=>HC([]),tz=(e,n,o)=>GB(se.fromDom(n.cloneContents()),ez(e,n,o)),nz=(e,n)=>Nu(n,"table",Ge(oo,e)),KB=(e,n)=>nz(e,n[0]).bind(o=>{const r=n[0],i=n[n.length-1],u=JH(o);return dD(u,r,i).map(g=>HC([ST(g)]))}).getOrThunk(qB),oz=(e,n,o)=>n.length>0&&n[0].collapsed?qB():tz(e,n[0],o),sz=(e,n,o)=>{const r=aA(n,e);return r.length>0?KB(e,r):oz(e,n,o)},xT=(e,n)=>n>=0&&n<e.length&&zh(e.charAt(n)),mD=e=>cc(e.innerText),fD=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),gD=e=>Z.from(e.selection.getRng()).map(n=>{var o;const r=Z.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),i=e.getBody(),u=fD(r),g=se.fromDom(n.cloneContents());En(g),HA(g);const y=e.dom.add(i,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},g.dom),x=mD(y),A=cc((o=y.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(y),xT(A,0)||xT(A,A.length-1)){const I=r.getOr(i),F=mD(I),z=F.indexOf(x);if(z===-1)return x;{const X=xT(F,z-1),te=xT(F,z+x.length);return(X?" ":"")+x+(te?" ":"")}}else return x}).getOr(""),YB=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),i=e.selection.getSel(),u=LA(e,f0(i)),g=n.contextual?sz(se.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return g&&r.appendChild(g),e.selection.serializer.serialize(r,n)},hD=(e,n)=>{if(n.format==="text")return gD(e);{const o=YB(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},XB=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),JB=(e,n,o={})=>{const r=XB(o,n);return lp(e,r).fold(Ro,i=>{const u=hD(e,i);return aD(e,u,i)})},wS=0,pD=1,bD=2,QB=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),i=new Array(o),u=(I,F,z)=>({start:I,end:F,diag:z}),g=(I,F,z,X,te)=>{const K=x(I,F,z,X);if(K===null||K.start===F&&K.diag===F-X||K.end===I&&K.diag===I-z){let ne=I,ge=z;for(;ne<F||ge<X;)ne<F&&ge<X&&e[ne]===n[ge]?(te.push([wS,e[ne]]),++ne,++ge):F-I>X-z?(te.push([bD,e[ne]]),++ne):(te.push([pD,n[ge]]),++ge)}else{g(I,K.start,z,K.start-K.diag,te);for(let ne=K.start;ne<K.end;++ne)te.push([wS,e[ne]]);g(K.end,F,K.end-K.diag,X,te)}},y=(I,F,z,X)=>{let te=I;for(;te-F<X&&te<z&&e[te]===n[te-F];)++te;return u(I,te,F)},x=(I,F,z,X)=>{const te=F-I,K=X-z;if(te===0||K===0)return null;const ne=te-K,ge=K+te,be=(ge%2===0?ge:ge+1)/2;r[1+be]=I,i[1+be]=F+1;let ve,Se,Ze,st,Ct;for(ve=0;ve<=be;++ve){for(Se=-ve;Se<=ve;Se+=2){for(Ze=Se+be,Se===-ve||Se!==ve&&r[Ze-1]<r[Ze+1]?r[Ze]=r[Ze+1]:r[Ze]=r[Ze-1]+1,st=r[Ze],Ct=st-I+z-Se;st<F&&Ct<X&&e[st]===n[Ct];)r[Ze]=++st,++Ct;if(ne%2!==0&&ne-ve<=Se&&Se<=ne+ve&&i[Ze-ne]<=r[Ze])return y(i[Ze-ne],Se+I-z,F,X)}for(Se=ne-ve;Se<=ne+ve;Se+=2){for(Ze=Se+be-ne,Se===ne-ve||Se!==ne+ve&&i[Ze+1]<=i[Ze-1]?i[Ze]=i[Ze+1]-1:i[Ze]=i[Ze-1],st=i[Ze]-1,Ct=st-I+z-Se;st>=I&&Ct>=z&&e[st]===n[Ct];)i[Ze]=st--,Ct--;if(ne%2===0&&-ve<=Se&&Se<=ve&&i[Ze]<=r[Ze+ne])return y(i[Ze],Se+I-z,F,X)}}return null},A=[];return g(0,e.length,0,n.length,A),A},e$=e=>Mt(e)?e.outerHTML:nt(e)?jf.encodeRaw(e.data,!1):Md(e)?"<!--"+e.data+"-->":"",vD=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},rz=(e,n,o)=>{const r=vD(n);if(e.hasChildNodes()&&o<e.childNodes.length){const i=e.childNodes[o];e.insertBefore(r,i)}else e.appendChild(r)},ET=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},az=(e,n)=>{let o=0;Ie(e,r=>{r[0]===wS?o++:r[0]===pD?(rz(n,r[1],o),o++):r[0]===bD&&ET(n,o)})},iz=(e,n)=>Zt(Wt(Or(e.childNodes),R(cc,e$)),o=>o.length>0),cz=(e,n)=>{const o=Wt(Or(n.childNodes),e$);return az(QB(o,e),n),n},t$=Fl(()=>document.implementation.createHTMLDocument("undo")),n$=e=>e.querySelector("iframe")!==null,lz=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),uz=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),TT=e=>{const n=e.serializer.getTempAttrs(),o=_N(e.getBody(),n);return n$(o)?lz(iz(o)):uz(cc(o.innerHTML))},yD=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?cz(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:Te(r)&&Ux(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},wD=e=>e.type==="fragmented"?e.fragments.join(""):e.content,CD=e=>{const n=se.fromTag("body",t$());return km(n,wD(e)),Ie(Wr(n,"*[data-mce-bogus]"),Uc),Nn(n)},UK=(e,n)=>wD(e)===wD(n),dz=(e,n)=>CD(e)===CD(n),SD=(e,n)=>!e||!n?!1:UK(e,n)?!0:dz(e,n),xD=e=>e.get()===0,_T=(e,n,o)=>{xD(o)&&(e.typing=n)},o$=(e,n)=>{e.typing&&(_T(e,!1,n),e.add())},mz=e=>{e.typing&&(e.typing=!1,e.add())},fz=(e,n,o)=>{xD(n)&&o.set(Sh(e.selection))},s$=(e,n,o,r,i,u,g)=>{const y=TT(e),x=at.extend(u||{},y);if(!xD(r)||e.removed)return null;const A=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:x,lastLevel:A,originalEvent:g}).isDefaultPrevented()||A&&SD(A,x))return null;n.data[o.get()]&&i.get().each(z=>{n.data[o.get()].beforeBookmark=z});const I=P1(e);if(I&&n.data.length>I){for(let z=0;z<n.data.length-1;z++)n.data[z]=n.data[z+1];n.data.length--,o.set(n.data.length)}x.bookmark=Sh(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(x),o.set(n.data.length-1);const F={level:x,lastLevel:A,originalEvent:g};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",F),e.dispatch("change",F)):e.dispatch("AddUndo",F),x},gz=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},hz=(e,n,o,r,i)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,g=n.data[o.get()-1];yD(e,g,!0),n.transact(i)&&(n.data[o.get()-1].beforeBookmark=u)}},pz=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],yD(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},bz=(e,n,o,r)=>{let i;return n.typing&&(n.add(),n.typing=!1,_T(n,!1,o)),r.get()>0&&(r.set(r.get()-1),i=n.data[r.get()],yD(e,i,!0),e.setDirty(!0),e.dispatch("Undo",{level:i})),i},vz=e=>{e.clear(),e.add()},WK=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!SD(TT(e),n.data[0]),ZK=(e,n)=>n.get()<e.data.length-1&&!e.typing,yz=(e,n,o)=>(o$(e,n),e.beforeChange(),e.ignore(o),e.add()),wz=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},jK=(e,n)=>{const o=e.dom,r=Te(n)?n:e.getBody();Ie(o.select("table,a",r),i=>{switch(i.nodeName){case"TABLE":const u=MO(e),g=o.getAttrib(i,"border");(!g||g==="0")&&e.hasVisual?o.addClass(i,u):o.removeClass(i,u);break;case"A":if(!o.getAttrib(i,"href")){const y=o.getAttrib(i,"name")||i.id,x=Ex(e);y&&e.hasVisual?o.addClass(i,x):o.removeClass(i,x)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},r$=e=>({init:{bindEvents:Rt},undoManager:{beforeChange:(n,o)=>fz(e,n,o),add:(n,o,r,i,u,g)=>s$(e,n,o,r,i,u,g),undo:(n,o,r)=>bz(e,n,o,r),redo:(n,o)=>pz(e,n,o),clear:(n,o)=>gz(e,n,o),reset:n=>vz(n),hasUndo:(n,o)=>WK(e,n,o),hasRedo:(n,o)=>ZK(n,o),transact:(n,o,r)=>yz(n,o,r),ignore:(n,o)=>wz(n,o),extra:(n,o,r,i)=>hz(e,n,o,r,i)},formatter:{match:(n,o,r,i)=>z0(e,n,o,r,i),matchAll:(n,o)=>zP(e,n,o),matchNode:(n,o,r,i)=>rf(e,n,o,r,i),canApply:n=>oH(e,n),closest:n=>VP(e,n),apply:(n,o,r)=>cB(e,n,o,r),remove:(n,o,r,i)=>V4(e,n,o,r,i),toggle:(n,o,r)=>mB(e,n,o,r),formatChanged:(n,o,r,i,u)=>SH(e,n,o,r,i,u)},editor:{getContent:n=>FK(e,n),setContent:(n,o)=>tH(e,n,o),insertContent:(n,o)=>Q7(e,n,o),addVisual:n=>jK(e,n)},selection:{getContent:(n,o)=>JB(e,n,o)},autocompleter:{addDecoration:n=>Q8(e,n),removeDecoration:()=>t7(e,se.fromDom(e.getBody()))},raw:{getModel:()=>Z.none()}}),Ws=e=>{const n=A=>qe(A)?A:{},{init:o,undoManager:r,formatter:i,editor:u,selection:g,autocompleter:y,raw:x}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(A,I,F)=>r.transact(F),ignore:(A,I)=>r.ignore(I),extra:(A,I,F,z)=>r.extra(F,z)},formatter:{match:(A,I,F,z)=>i.match(A,n(I),z),matchAll:i.matchAll,matchNode:i.matchNode,canApply:A=>i.canApply(A),closest:A=>i.closest(A),apply:(A,I,F)=>i.apply(A,n(I)),remove:(A,I,F,z)=>i.remove(A,n(I)),toggle:(A,I,F)=>i.toggle(A,n(I)),formatChanged:(A,I,F,z,X)=>i.formatChanged(I,F,z,X)},editor:{getContent:A=>u.getContent(A),setContent:(A,I)=>({content:u.setContent(A,I),html:""}),insertContent:(A,I)=>(u.insertContent(A),""),addVisual:u.addVisual},selection:{getContent:(A,I)=>g.getContent(I)},autocompleter:{addDecoration:y.addDecoration,removeDecoration:y.removeDecoration},raw:{getModel:()=>Z.some(x.getRawModel())}}},ED=()=>{const e=gt(null),n=gt("");return{init:{bindEvents:Rt},undoManager:{beforeChange:Rt,add:e,undo:e,redo:e,clear:Rt,reset:Rt,hasUndo:Ke,hasRedo:Ke,transact:e,ignore:Rt,extra:Rt},formatter:{match:Ke,matchAll:gt([]),matchNode:gt(void 0),canApply:Ke,closest:n,apply:Rt,remove:Rt,toggle:Rt,formatChanged:gt({unbind:Rt})},editor:{getContent:n,setContent:gt({content:"",html:""}),insertContent:gt(""),addVisual:Rt},selection:{getContent:n},autocompleter:{addDecoration:Rt,removeDecoration:Rt},raw:{getModel:gt(Z.none())}}},Cg=e=>an(e.plugins,"rtc"),Cz=e=>Fo(e.plugins,"rtc").bind(n=>Z.from(n.setup)),Sz=e=>{const n=e;return Cz(e).fold(()=>(n.rtcInstance=r$(e),Z.none()),o=>(n.rtcInstance=ED(),Z.some(()=>o().then(r=>(n.rtcInstance=Ws(r),r.rtc.isRemote)))))},up=e=>e.rtcInstance?e.rtcInstance:r$(e),Pr=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},GK=(e,n,o)=>{Pr(e).undoManager.beforeChange(n,o)},Wa=(e,n,o,r,i,u,g)=>Pr(e).undoManager.add(n,o,r,i,u,g),a$=(e,n,o,r)=>Pr(e).undoManager.undo(n,o,r),i$=(e,n,o)=>Pr(e).undoManager.redo(n,o),c$=(e,n,o)=>{Pr(e).undoManager.clear(n,o)},xz=(e,n)=>{Pr(e).undoManager.reset(n)},Ez=(e,n,o)=>Pr(e).undoManager.hasUndo(n,o),kT=(e,n,o)=>Pr(e).undoManager.hasRedo(n,o),Tz=(e,n,o,r)=>Pr(e).undoManager.transact(n,o,r),TD=(e,n,o)=>{Pr(e).undoManager.ignore(n,o)},_z=(e,n,o,r,i)=>{Pr(e).undoManager.extra(n,o,r,i)},l$=(e,n,o,r,i)=>Pr(e).formatter.match(n,o,r,i),u$=(e,n,o)=>Pr(e).formatter.matchAll(n,o),_D=(e,n,o,r,i)=>Pr(e).formatter.matchNode(n,o,r,i),d$=(e,n)=>Pr(e).formatter.canApply(n),kD=(e,n)=>Pr(e).formatter.closest(n),kz=(e,n,o,r)=>{Pr(e).formatter.apply(n,o,r)},Oz=(e,n,o,r,i)=>{Pr(e).formatter.remove(n,o,r,i)},Az=(e,n,o,r)=>{Pr(e).formatter.toggle(n,o,r)},pu=(e,n,o,r,i,u)=>Pr(e).formatter.formatChanged(n,o,r,i,u),Dz=(e,n)=>up(e).editor.getContent(n),Rz=(e,n,o)=>up(e).editor.setContent(n,o),Mz=(e,n,o)=>up(e).editor.insertContent(n,o),Nz=(e,n,o)=>Pr(e).selection.getContent(n,o),Pz=(e,n)=>Pr(e).editor.addVisual(n),OD=e=>Pr(e).init.bindEvents(),Bz=(e,n)=>Pr(e).autocompleter.addDecoration(n),$z=e=>Pr(e).autocompleter.removeDecoration(),Iz=(e,n={})=>{const o=n.format?n.format:"html";return Nz(e,o,n)},CS=e=>e.dom.length===0?(fo(e),Z.none()):Z.some(e),Fz=(e,n)=>e.filter(o=>cg.isBookmarkNode(o.dom)).bind(n?fl:Hc),Lz=(e,n,o,r,i)=>{const u=e.dom,g=n.dom,y=r?u.length:g.length;r?(Yr(u,g,i,!1,!r),o.setStart(g,y)):(Yr(g,u,i,!1,!r),o.setEnd(g,y))},m$=(e,n,o)=>{sa(e).each(r=>{const i=e.dom;n&&N0(r,Ae(i,0),o)?hb(i,0,o):!n&&P0(r,Ae(i,i.length),o)&&KN(i,i.length,o)})},OT=(e,n,o,r,i)=>{e.bind(u=>((r?KN:hb)(u.dom,r?u.dom.length:0,i),n.filter(Vr).map(y=>Lz(u,y,o,r,i)))).orThunk(()=>Fz(n,r).or(n).filter(Vr).map(g=>m$(g,r,i)))},Hz=(e,n,o)=>{const r=Z.from(n.firstChild).map(se.fromDom),i=Z.from(n.lastChild).map(se.fromDom);e.deleteContents(),e.insertNode(n);const u=r.bind(Hc).filter(Vr).bind(CS),g=i.bind(fl).filter(Vr).bind(CS);OT(u,r,e,!0,o),OT(g,i,e,!1,o),e.collapse(!1)},zz=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),qK=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),i=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...i,...n});return Qh({validate:!1},e.schema).serialize(u)}else return n.content},Vz=(e,n,o={})=>{const r=zz(o,n);iD(e,r).each(i=>{const u=qK(e,i),g=e.selection.getRng();Hz(g,g.createContextualFragment(u),e.schema),e.selection.setRng(g),db(e,g),vT(e,u,i)})},f$=(e,n,o)=>{if(an(e,n)){const r=Zt(e[n],i=>i!==o);r.length===0?delete e[n]:e[n]=r}};var g$=(e,n)=>{let o,r;const i=(y,x)=>_s(x,A=>e.is(A,y)),u=y=>e.getParents(y,void 0,e.getRoot()),g=()=>{o={},r={},n.on("NodeChange",y=>{const x=y.element,A=u(x),I={};vt(o,(F,z)=>{i(z,A).each(X=>{r[z]||(Ie(F,te=>{te(!0,{node:X,selector:z,parents:A})}),r[z]=F),I[z]=F})}),vt(r,(F,z)=>{I[z]||(delete r[z],Ie(F,X=>{X(!1,{node:x,selector:z,parents:A})}))})})};return{selectorChangedWithUnbind:(y,x)=>(o||g(),o[y]||(o[y]=[]),o[y].push(x),i(y,u(n.selection.getStart())).each(()=>{r[y]=o[y]}),{unbind:()=>{f$(o,y,x),f$(r,y,x)}})}};const AD=e=>!!(e&&e.ownerDocument)&&wa(se.fromDom(e.ownerDocument),se.fromDom(e)),Uz=e=>e?AD(e.startContainer)&&AD(e.endContainer):!1,dp=(e,n,o,r)=>{let i,u;const{selectorChangedWithUnbind:g}=g$(e,r),y=(dt,Tt)=>{const to=e.createRng();Te(dt)&&Te(Tt)?(to.setStart(dt,Tt),to.setEnd(dt,Tt),Se(to),ge(!1)):(xC(e,to,r.getBody(),!0),Se(to))},x=dt=>Iz(r,dt),A=(dt,Tt)=>Vz(r,dt,Tt),I=dt=>IA(r.getBody(),ve(),dt),F=dt=>pN(r.getBody(),ve(),dt),z=(dt,Tt)=>Da.getBookmark(dt,Tt),X=dt=>Da.moveToBookmark(dt),te=(dt,Tt)=>(Z8(e,dt,Tt).each(Se),dt),K=()=>{const dt=ve(),Tt=be();return!dt||dt.item?!1:dt.compareEndPoints?dt.compareEndPoints("StartToEnd",dt)===0:!Tt||dt.collapsed},ne=()=>{const dt=ve(),Tt=r.getBody().querySelectorAll('[data-mce-selected="1"]');return Tt.length>0?Js(Tt,to=>e.isEditable(to.parentElement)):gN(e,dt)},ge=dt=>{const Tt=ve();Tt.collapse(!!dt),Se(Tt)},be=()=>n.getSelection?n.getSelection():n.document.selection,ve=()=>{let dt;const Tt=(Gn,Ft,Lt)=>{try{return Ft.compareBoundaryPoints(Gn,Lt)}catch{return-1}},to=n.document;if(Te(r.bookmark)&&!Jh(r)){const Gn=NA(r);if(Gn.isSome())return Gn.map(Ft=>LA(r,[Ft])[0]).getOr(to.createRange())}try{const Gn=be();Gn&&!Gl(Gn.anchorNode)&&(Gn.rangeCount>0?dt=Gn.getRangeAt(0):dt=to.createRange(),dt=LA(r,[dt])[0])}catch{}if(dt||(dt=to.createRange()),i1(dt.startContainer)&&dt.collapsed){const Gn=e.getRoot();dt.setStart(Gn,0),dt.setEnd(Gn,0)}return i&&u&&(Tt(dt.START_TO_START,dt,i)===0&&Tt(dt.END_TO_END,dt,i)===0?dt=u:(i=null,u=null)),dt},Se=(dt,Tt)=>{if(!Uz(dt))return;const to=be();if(dt=r.dispatch("SetSelectionRange",{range:dt,forward:Tt}).range,to){u=dt;try{to.removeAllRanges(),to.addRange(dt)}catch{}Tt===!1&&to.extend&&(to.collapse(dt.endContainer,dt.endOffset),to.extend(dt.startContainer,dt.startOffset)),i=to.rangeCount>0?to.getRangeAt(0):null}if(!dt.collapsed&&dt.startContainer===dt.endContainer&&(to!=null&&to.setBaseAndExtent)&&dt.endOffset-dt.startOffset<2&&dt.startContainer.hasChildNodes()){const Ft=dt.startContainer.childNodes[dt.startOffset];Ft&&Ft.nodeName==="IMG"&&(to.setBaseAndExtent(dt.startContainer,dt.startOffset,dt.endContainer,dt.endOffset),(to.anchorNode!==dt.startContainer||to.focusNode!==dt.endContainer)&&to.setBaseAndExtent(Ft,0,Ft,1))}r.dispatch("AfterSetSelectionRange",{range:dt,forward:Tt})},Ze=dt=>(A(e.getOuterHTML(dt)),dt),st=()=>bN(r.getBody(),ve()),Ct=(dt,Tt)=>W8(e,ve(),dt,Tt),Fe=()=>{const dt=be(),Tt=dt==null?void 0:dt.anchorNode,to=dt==null?void 0:dt.focusNode;if(!dt||!Tt||!to||Gl(Tt)||Gl(to))return!0;const Gn=e.createRng(),Ft=e.createRng();try{Gn.setStart(Tt,dt.anchorOffset),Gn.collapse(!0),Ft.setStart(to,dt.focusOffset),Ft.collapse(!0)}catch{return!0}return Gn.compareBoundaryPoints(Gn.START_TO_START,Ft)<=0},Zs={dom:e,win:n,serializer:o,editor:r,expand:(dt={type:"word"})=>Se(G(e).expand(ve(),dt)),collapse:ge,setCursorLocation:y,getContent:x,setContent:A,getBookmark:z,moveToBookmark:X,select:te,isCollapsed:K,isEditable:ne,isForward:Fe,setNode:Ze,getNode:st,getSel:be,setRng:Se,getRng:ve,getStart:I,getEnd:F,getSelectedBlocks:Ct,normalize:()=>{const dt=ve(),Tt=be();if(!ig(Tt)&&h0(r)){const to=k(e,dt);return to.each(Gn=>{Se(Gn,Fe())}),to.getOr(dt)}return dt},selectorChanged:(dt,Tt)=>(g(dt,Tt),Zs),selectorChangedWithUnbind:g,getScrollContainer:()=>{let dt,Tt=e.getRoot();for(;Tt&&Tt.nodeName!=="BODY";){if(Tt.scrollHeight>Tt.clientHeight){dt=Tt;break}Tt=Tt.parentNode}return dt},scrollIntoView:(dt,Tt)=>{Te(dt)?Oa(r,dt,Tt):db(r,ve(),Tt)},placeCaretAt:(dt,Tt)=>Se(bc(dt,Tt,r.getDoc())),getBoundingClientRect:()=>{const dt=ve();return dt.collapsed?Ae.fromRangeStart(dt).getClientRects()[0]:dt.getBoundingClientRect()},destroy:()=>{n=i=u=null,Xr.destroy()}},Da=cg(Zs),Xr=nN(Zs,r);return Zs.bookmarkManager=Da,Zs.controlSelection=Xr,Zs},G0=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,i)=>{let u=r.length;for(;u--;){const g=r[u];g.attr("tabindex",g.attr("data-mce-tabindex")),g.attr(i,null)}}),e.addAttributeFilter("src,href,style",(r,i)=>{const u="data-mce-"+i,g=n.url_converter,y=n.url_converter_scope;let x=r.length;for(;x--;){const A=r[x];let I=A.attr(u);I!==void 0?(A.attr(i,I.length>0?I:null),A.attr(u,null)):(I=A.attr(i),i==="style"?I=o.serializeStyle(o.parseStyle(I),A.name):g&&(I=g.call(y,I,i,A.name)),A.attr(i,I.length>0?I:null))}}),e.addAttributeFilter("class",r=>{let i=r.length;for(;i--;){const u=r[i];let g=u.attr("class");g&&(g=g.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",g.length>0?g:null))}}),e.addAttributeFilter("data-mce-type",(r,i,u)=>{let g=r.length;for(;g--;){const y=r[g];y.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(Z.from(y.firstChild).exists(A=>{var I;return!Zi((I=A.value)!==null&&I!==void 0?I:"")})?y.unwrap():y.remove())}}),e.addNodeFilter("script,style",(r,i)=>{var u;const g=x=>x.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let y=r.length;for(;y--;){const x=r[y],A=x.firstChild,I=(u=A==null?void 0:A.value)!==null&&u!==void 0?u:"";if(i==="script"){const F=x.attr("type");F&&x.attr("type",F==="mce-no/type"?null:F.replace(/^mce\-/,"")),n.element_format==="xhtml"&&A&&I.length>0&&(A.value=`// <![CDATA[
`+g(I)+`
// ]]>`)}else n.element_format==="xhtml"&&A&&I.length>0&&(A.value=`<!--
`+g(I)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let i=r.length;for(;i--;){const u=r[i],g=u.value;n.preserve_cdata&&(g==null?void 0:g.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(g.replace(/^\[CDATA\[|\]\]$/g,""))):(g==null?void 0:g.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(g).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,i)=>{let u=r.length;for(;u--;){const g=r[u];g.type===7?g.remove():g.type===1&&i==="input"&&!g.attr("type")&&g.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{Ie(r,i=>{i.attr("data-mce-type")==="format-caret"&&(i.isEmpty(e.schema.getNonEmptyElements())?i.remove():i.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,i)=>{let u=r.length;for(;u--;)r[u].attr(i,null)}),n.remove_trailing_brs&&hB(n,e,e.schema)},SS=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},h$=(e,n,o)=>{let r;const i=e.dom;let u=n.cloneNode(!0);const g=document.implementation;if(g.createHTMLDocument){const y=g.createHTMLDocument("");at.each(u.nodeName==="BODY"?u.childNodes:[u],x=>{y.body.appendChild(y.importNode(x,!0))}),u.nodeName!=="BODY"?u=y.body.firstChild:u=y.body,r=i.doc,i.doc=y}return MC(e,{...o,node:u}),r&&(i.doc=r),u},p$=(e,n)=>Te(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,Wz=(e,n,o)=>p$(e,o)?h$(e,n,o):n,b$=(e,n,o)=>{at.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,i)=>{let u=r.length;for(;u--;)r[u].attr(i,null)}),n.push(o))},Zz=(e,n,o)=>!n.no_events&&e?fA(e,{...n,content:o}).content:o,jz=(e,n,o)=>{const r=cc(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||yr(se.fromDom(n))?r:at.trim(r)},Gz=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,i=e.parse(n,r);return SS(i),i},qz=(e,n,o)=>Qh(e,n).serialize(o),v$=(e,n,o,r,i)=>{const u=qz(n,o,r);return Zz(e,i,u)},Kz=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},i=n&&n.dom?n.dom:Zo.DOM,u=n&&n.schema?n.schema:Hd(r),g=id(r,u);G0(g,r,i);const y=(x,A={})=>{const I={format:"html",...A},F=Wz(n,x,I),z=jz(i,F,I),X=Gz(g,z,I);return I.format==="tree"?X:v$(n,r,u,X,I)};return{schema:u,addNodeFilter:g.addNodeFilter,addAttributeFilter:g.addAttributeFilter,serialize:y,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:Ge(b$,g,o),getTempAttrs:gt(o),getNodeFilters:g.getNodeFilters,getAttributeFilters:g.getAttributeFilters,removeNodeFilter:g.removeNodeFilter,removeAttributeFilter:g.removeAttributeFilter}},y$=(e,n)=>{const o=Kz(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},xS="html",w$=(e,n)=>({...e,format:n,get:!0,getInner:!0}),C$=(e,n={})=>{const o=n.format?n.format:xS,r=w$(n,o);return lp(e,r).fold(Ro,i=>{const u=Dz(e,i);return aD(e,u,i)})},Yz="html",Xz=(e,n)=>({format:Yz,...e,set:!0,content:n}),DD=(e,n,o={})=>{const r=Xz(o,n);return iD(e,r).map(i=>{const u=Rz(e,i.content,i);return vT(e,u.html,i),u.content}).getOr(n)},S$="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),Jz="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),Qz="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),x$=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],E$=(e,n)=>{const o=Zt(n,r=>an(e,r));return Jo(o)},KK=e=>{const n=E$(e,S$),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Jo(n)},im=e=>E$(e,Jz),AT=(e,n)=>{const o=at.makeMap(e.plugins," "),i=Zt(n,u=>an(o,u));return Jo(i)},eV=e=>AT(e,Qz),tV=e=>AT(e,x$.map(n=>n.name)),nV=(e,n)=>{const o=KK(e),r=eV(n),i=r.length>0,u=o.length>0,g=n.theme==="mobile";if(i||u||g){const y=`
- `,x=g?`

Themes:${y}mobile`:"",A=i?`

Plugins:${y}${r.join(y)}`:"",I=u?`

Options:${y}${o.join(y)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+x+A+I)}},oV=e=>_s(x$,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),vo=(e,n)=>{const o=im(e),r=tV(n),i=r.length>0,u=o.length>0;if(i||u){const g=`
- `,y=i?`

Plugins:${g}${r.map(oV).join(g)}`:"",x=u?`

Options:${g}${o.join(g)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+y+x)}},YK=(e,n)=>{nV(e,n),vo(e,n)},DT=Zo.DOM,sV=e=>{DT.setStyle(e.id,"display",e.orgDisplay)},as=e=>Z.from(e).each(n=>n.destroy()),rV=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},ES=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),DT.unbind(n,"submit reset",e.formEventDelegate))},aV=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),i=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Te(i==null?void 0:i.nextSibling)&&DT.remove(i.nextSibling),jh(e),e.editorManager.remove(e),!e.inline&&r&&sV(e),Gh(e),DT.remove(e.getContainer()),as(n),as(o),e.destroy()}},iV=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),as(o),as(r)),ES(e),rV(e),e.destroyed=!0}},TS=(()=>{const e={};return{add:(i,u)=>{e[i]=u},get:i=>e[i]?e[i]:{icons:{}},has:i=>an(e,i)}})(),bu=Fa.ModelManager,Sc=(e,n)=>n.dom[e],q0=(e,n)=>parseInt(Qs(n,e),10),mp=Ge(Sc,"clientWidth"),uf=Ge(Sc,"clientHeight"),_S=Ge(q0,"margin-top"),RD=Ge(q0,"margin-left"),MD=e=>e.dom.getBoundingClientRect(),T$=(e,n,o)=>{const r=mp(e),i=uf(e);return n>=0&&o>=0&&n<=r&&o<=i},_$=(e,n,o,r)=>{const i=MD(n),u=e?i.left+n.dom.clientLeft+RD(n):0,g=e?i.top+n.dom.clientTop+_S(n):0,y=o-u,x=r-g;return{x:y,y:x}},cV=(e,n,o)=>{const r=se.fromDom(e.getBody()),i=e.inline?r:Mu(r),u=_$(e.inline,i,n,o);return T$(i,u.x,u.y)},lV=e=>Z.from(e).map(se.fromDom),k$=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return lV(n).map(Em).getOr(!1)};var O$=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const ND=e=>{const n=[],o=()=>{const z=e.theme;return z&&z.getNotificationManagerImpl?z.getNotificationManagerImpl():O$()},r=()=>Z.from(n[0]),i=(z,X)=>z.type===X.type&&z.text===X.text&&!z.progressBar&&!z.timeout&&!X.progressBar&&!X.timeout,u=()=>{Ie(n,z=>{z.reposition()})},g=z=>{n.push(z)},y=z=>{Jr(n,X=>X===z).each(X=>{n.splice(X,1)})},x=(z,X=!0)=>e.removed||!k$(e)?{}:(X&&e.dispatch("BeforeOpenNotification",{notification:z}),_s(n,te=>i(o().getArgs(te),z)).getOrThunk(()=>{e.editorManager.setActive(e);const te=o().open(z,()=>{y(te),u(),fN(e)&&r().fold(()=>e.focus(),K=>gE(se.fromDom(K.getEl())))});return g(te),u(),e.dispatch("OpenNotification",{notification:{...te}}),te})),A=()=>{r().each(z=>{o().close(z),y(z),u()})},I=gt(n);return(z=>{z.on("SkinLoaded",()=>{const X=kO(z);X&&x({text:X,type:"warning",timeout:0},!1),u()}),z.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(u)}),z.on("remove",()=>{Ie(n.slice(),X=>{o().close(X)})})})(e),{open:x,close:A,getNotifications:I}},Tb=Fa.PluginManager,Sg=Fa.ThemeManager;var JK=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const A$=e=>{let n=[];const o=()=>{const K=e.theme;return K&&K.getWindowManagerImpl?K.getWindowManagerImpl():JK()},r=(K,ne)=>(...ge)=>ne?ne.apply(K,ge):void 0,i=K=>{e.dispatch("OpenWindow",{dialog:K})},u=K=>{e.dispatch("CloseWindow",{dialog:K})},g=K=>{n.push(K),i(K)},y=K=>{u(K),n=Zt(n,ne=>ne!==K),n.length===0&&e.focus()},x=()=>Z.from(n[n.length-1]),A=K=>{e.editorManager.setActive(e),R0(e),e.ui.show();const ne=K();return g(ne),ne},I=(K,ne)=>A(()=>o().open(K,ne,y)),F=K=>A(()=>o().openUrl(K,y)),z=(K,ne,ge)=>{const be=o();be.alert(K,r(ge||be,ne))},X=(K,ne,ge)=>{const be=o();be.confirm(K,r(ge||be,ne))},te=()=>{x().each(K=>{o().close(K),y(K)})};return e.on("remove",()=>{Ie(n,K=>{o().close(K)})}),{open:I,openUrl:F,alert:z,confirm:X,close:te}},uV=(e,n)=>{e.notificationManager.open({type:"error",text:n})},RT=(e,n)=>{e._skinLoaded?uV(e,n):e.on("SkinLoaded",()=>{uV(e,n)})},dV=(e,n)=>{RT(e,yl.translate(["Failed to upload image: {0}",n]))},Ol=(e,n,o)=>{ec(e,n,{message:o}),console.error(o)},MT=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,QK=(e,n,o)=>{Ol(e,"PluginLoadError",MT("plugin",n,o))},mV=(e,n,o)=>{Ol(e,"IconsLoadError",MT("icons",n,o))},kS=(e,n,o)=>{Ol(e,"LanguageLoadError",MT("language",n,o))},fV=(e,n,o)=>{Ol(e,"ThemeLoadError",MT("theme",n,o))},D$=(e,n,o)=>{Ol(e,"ModelLoadError",MT("model",n,o))},R$=(e,n,o)=>{const r=yl.translate(["Failed to initialize plugin: {0}",n]);ec(e,"PluginLoadError",{message:r}),OS(r,o),RT(e,r)},OS=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},gV=e=>/^[a-z0-9\-]+$/i.test(e),PD=e=>"content/"+e+"/content.css",fp=e=>tinymce.Resource.has(PD(e)),hV=e=>M$(e,Yw(e)),pV=e=>M$(e,bx(e)),M$=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",i=`content${e.editorManager.suffix}.css`;return Wt(n,u=>fp(u)?u:gV(u)&&!e.inline?`${o}/${u}/${i}`:e.documentBaseURI.toAbsolute(u))},bV=e=>{e.contentCSS=e.contentCSS.concat(hV(e),pV(e))},vV=e=>e?Or(e.getElementsByTagName("img")):[],yV=(e,n)=>{const o={};return{findAll:(i,u=St)=>{const g=Zt(vV(i),x=>{const A=x.src;return x.hasAttribute("data-mce-bogus")||x.hasAttribute("data-mce-placeholder")||!A||A===xt.transparentSrc?!1:Ps(A,"blob:")?!e.isUploaded(A)&&u(x):Ps(A,"data:")?u(x):!1}),y=Wt(g,x=>{const A=x.src;if(an(o,A))return o[A].then(I=>ee(I)?I:{image:x,blobInfo:I.blobInfo});{const I=zK(n,A).then(F=>(delete o[A],{image:x,blobInfo:F})).catch(F=>(delete o[A],F));return o[A]=I,I}});return Promise.all(y)}}},N$=()=>{let o={};const r=(z,X)=>({status:z,resultUri:X}),i=z=>z in o;return{hasBlobUri:i,getResultUri:z=>{const X=o[z];return X?X.resultUri:null},isPending:z=>i(z)?o[z].status===1:!1,isUploaded:z=>i(z)?o[z].status===2:!1,markPending:z=>{o[z]=r(1,null)},markUploaded:(z,X)=>{o[z]=r(2,X)},removeFailed:z=>{delete o[z]},destroy:()=>{o={}}}};let wV=0;const CV=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},NT=e=>e+wV+++CV(),SV=()=>{let e=[];const n=F=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[F.toLowerCase()]||"dat",o=(F,z,X,te,K)=>{if(ee(F))return r({id:F,name:te,filename:K,blob:z,base64:X});if(qe(F))return r(F);throw new Error("Unknown input type")},r=F=>{if(!F.blob||!F.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const z=F.id||NT("blobid"),X=F.name||z,te=F.blob;return{id:gt(z),name:gt(X),filename:gt(F.filename||X+"."+n(te.type)),blob:gt(te),base64:gt(F.base64),blobUri:gt(F.blobUri||URL.createObjectURL(te)),uri:gt(F.uri)}},i=F=>{g(F.id())||e.push(F)},u=F=>_s(e,F).getOrUndefined(),g=F=>u(z=>z.id()===F);return{create:o,add:i,get:g,getByUri:F=>u(z=>z.blobUri()===F),getByData:(F,z)=>u(X=>X.base64()===F&&X.blob().type===z),findFirst:u,removeByUri:F=>{e=Zt(e,z=>z.blobUri()===F?(URL.revokeObjectURL(z.blobUri()),!1):!0)},destroy:()=>{Ie(e,F=>{URL.revokeObjectURL(F.blobUri())}),e=[]}}},xV=(e,n)=>{const o={},r=(K,ne)=>K?K.replace(/\/$/,"")+"/"+ne.replace(/^\//,""):ne,i=(K,ne)=>new Promise((ge,be)=>{const ve=new XMLHttpRequest;ve.open("POST",n.url),ve.withCredentials=n.credentials,ve.upload.onprogress=Ze=>{ne(Ze.loaded/Ze.total*100)},ve.onerror=()=>{be("Image upload failed due to a XHR Transport error. Code: "+ve.status)},ve.onload=()=>{if(ve.status<200||ve.status>=300){be("HTTP Error: "+ve.status);return}const Ze=JSON.parse(ve.responseText);if(!Ze||!ee(Ze.location)){be("Invalid JSON: "+ve.responseText);return}ge(r(n.basePath,Ze.location))};const Se=new FormData;Se.append("file",K.blob(),K.filename()),ve.send(Se)}),u=ue(n.handler)?n.handler:i,g=()=>new Promise(K=>{K([])}),y=(K,ne)=>({url:ne,blobInfo:K,status:!0}),x=(K,ne)=>({url:"",blobInfo:K,status:!1,error:ne}),A=(K,ne)=>{at.each(o[K],ge=>{ge(ne)}),delete o[K]},I=(K,ne,ge)=>(e.markPending(K.blobUri()),new Promise(be=>{let ve,Se;try{const Ze=()=>{ve&&(ve.close(),Se=Rt)},st=Fe=>{Ze(),e.markUploaded(K.blobUri(),Fe),A(K.blobUri(),y(K,Fe)),be(y(K,Fe))},Ct=Fe=>{Ze(),e.removeFailed(K.blobUri()),A(K.blobUri(),x(K,Fe)),be(x(K,Fe))};Se=Fe=>{Fe<0||Fe>100||Z.from(ve).orThunk(()=>Z.from(ge).map(us)).each(Me=>{ve=Me,Me.progressBar.value(Fe)})},ne(K,Se).then(st,Fe=>{Ct(ee(Fe)?{message:Fe}:Fe)})}catch(Ze){be(x(K,Ze))}})),F=K=>K===i,z=K=>{const ne=K.blobUri();return new Promise(ge=>{o[ne]=o[ne]||[],o[ne].push(ge)})},X=(K,ne)=>(K=at.grep(K,ge=>!e.isUploaded(ge.blobUri())),Promise.all(at.map(K,ge=>e.isPending(ge.blobUri())?z(ge):I(ge,u,ne))));return{upload:(K,ne)=>!n.url&&F(u)?g():X(K,ne)}},EV=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),K0=(e,n)=>xV(n,{url:SO(e),basePath:xO(e),credentials:Gw(e),handler:EO(e)}),TV=e=>{const n=N$(),o=K0(e,n);return{upload:(r,i=!0)=>o.upload(r,i?EV(e):void 0)}},BD=(e,n)=>e.dom.isEmpty(n.dom)&&Te(e.schema.getTextBlockElements()[Jn(n)]),_V=e=>n=>{BD(e,n)&&Ks(n,se.fromHtml('<br data-mce-bogus="1" />'))},kV=e=>{const n=SV();let o,r;const i=N$(),u=[],g=ve=>Se=>e.selection?ve(Se):[],y=ve=>ve+(ve.indexOf("?")===-1?"?":"&")+new Date().getTime(),x=(ve,Se,Ze)=>{let st=0;do st=ve.indexOf(Se,st),st!==-1&&(ve=ve.substring(0,st)+Ze+ve.substr(st+Se.length),st+=Ze.length-Se.length+1);while(st!==-1);return ve},A=(ve,Se,Ze)=>{const st=`src="${Ze}"${Ze===xt.transparentSrc?' data-mce-placeholder="1"':""}`;return ve=x(ve,`src="${Se}"`,st),ve=x(ve,'data-mce-src="'+Se+'"','data-mce-src="'+Ze+'"'),ve},I=(ve,Se)=>{Ie(e.undoManager.data,Ze=>{Ze.type==="fragmented"?Ze.fragments=Wt(Ze.fragments,st=>A(st,ve,Se)):Ze.content=A(Ze.content,ve,Se)})},F=(ve,Se)=>{const Ze=e.convertURL(Se,"src");I(ve.src,Se),Fc(se.fromDom(ve),{src:M1(e)?y(Se):Se,"data-mce-src":Ze})},z=()=>(o||(o=K0(e,i)),ne().then(g(ve=>{const Se=Wt(ve,Ze=>Ze.blobInfo);return o.upload(Se,EV(e)).then(g(Ze=>{const st=[];let Ct=!1;const Fe=Wt(Ze,(Me,Qe)=>{const{blobInfo:Et,image:Ut}=ve[Qe];let Cn=!1;return Me.status&&px(e)?(Me.url&&!br(Ut.src,Me.url)&&(Ct=!0),n.removeByUri(Ut.src),Cg(e)||F(Ut,Me.url)):Me.error&&(Me.error.remove&&(I(Ut.src,xt.transparentSrc),st.push(Ut),Cn=!0),dV(e,Me.error.message)),{element:Ut,status:Me.status,uploadUri:Me.url,blobInfo:Et,removed:Cn}});return st.length>0&&!Cg(e)?e.undoManager.transact(()=>{Ie(Pf(st),Me=>{const Qe=sa(Me);fo(Me),Qe.each(_V(e)),n.removeByUri(Me.dom.src)})}):Ct&&e.undoManager.dispatchChange(),Fe}))}))),X=()=>hx(e)?z():Promise.resolve([]),te=ve=>Js(u,Se=>Se(ve)),K=ve=>{u.push(ve)},ne=()=>(r||(r=yV(i,n)),r.findAll(e.getBody(),te).then(g(ve=>{const Se=Zt(ve,Ze=>ee(Ze)?(RT(e,Ze),!1):Ze.uriType!=="blob");return Cg(e)||Ie(Se,Ze=>{I(Ze.image.src,Ze.blobInfo.blobUri()),Ze.image.src=Ze.blobInfo.blobUri(),Ze.image.removeAttribute("data-mce-src")}),Se}))),ge=()=>{n.destroy(),i.destroy(),r=o=null},be=ve=>ve.replace(/src="(blob:[^"]+)"/g,(Se,Ze)=>{const st=i.getResultUri(Ze);if(st)return'src="'+st+'"';let Ct=n.getByUri(Ze);return Ct||(Ct=ss(e.editorManager.get(),(Fe,Me)=>Fe||Me.editorUpload&&Me.editorUpload.blobCache.getByUri(Ze),void 0)),Ct?'src="data:'+Ct.blob().type+";base64,"+Ct.base64()+'"':Se});return e.on("SetContent",()=>{hx(e)?X():ne()}),e.on("RawSaveContent",ve=>{ve.content=be(ve.content)}),e.on("GetContent",ve=>{ve.source_view||ve.format==="raw"||ve.format==="tree"||(ve.content=be(ve.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",ve=>{Ie(ve,Se=>{const Ze=Se.attr("src");if(!Ze||n.getByUri(Ze))return;const st=i.getResultUri(Ze);st&&Se.attr("src",st)})})}),{blobCache:n,addFilter:K,uploadImages:z,uploadImagesAuto:X,scanForImages:ne,destroy:ge}},OV=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:i=>{n.setStyle(i,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:i=>{n.setStyle(i,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const i={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},g={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[g,i,u]:[i,g,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(i,u,g)=>Mt(i)&&i.hasAttribute("href"),onformat:(i,u,g)=>{at.each(g,(y,x)=>{n.setAttrib(i,x,y)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":i=>{var u;return(u=i==null?void 0:i.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return at.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),i=>{r[i]={block:i,remove:"all"}}),r},P$={remove_similar:!0,inherit:!1},cd={selector:"td,th",...P$},_b={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...cd},tablecellverticalalign:{styles:{"vertical-align":"%value"},...cd},tablecellbordercolor:{styles:{borderColor:"%value"},...cd},tablecellclass:{classes:["%value"],...cd},tableclass:{selector:"table",classes:["%value"],...P$},tablecellborderstyle:{styles:{borderStyle:"%value"},...cd},tablecellborderwidth:{styles:{borderWidth:"%value"},...cd}},PT=gt(_b),BT=e=>{const n={},o=g=>Te(g)?n[g]:n,r=g=>an(n,g),i=(g,y)=>{g&&(ee(g)?(At(y)||(y=[y]),Ie(y,x=>{Dt(x.deep)&&(x.deep=!da(x)),Dt(x.split)&&(x.split=!da(x)||tr(x)),Dt(x.remove)&&da(x)&&!tr(x)&&(x.remove="none"),da(x)&&tr(x)&&(x.mixed=!0,x.block_expand=!0),ee(x.classes)&&(x.classes=x.classes.split(/\s+/))}),n[g]=y):vt(g,(x,A)=>{i(A,x)}))},u=g=>(g&&n[g]&&delete n[g],n);return i(OV(e)),i(PT()),i(AO(e)),{get:o,has:r,register:i,unregister:u}},df=at.each,ci=Zo.DOM,Y0=e=>Te(e)&&qe(e),AS=(e,n)=>{const o=n&&n.schema||Hd({}),r=(x,A)=>{A.classes.length>0&&ci.addClass(x,A.classes.join(" ")),ci.setAttribs(x,A.attrs)},i=x=>{const A=ee(x)?{name:x,classes:[],attrs:{}}:x,I=ci.create(A.name);return r(I,A),I},u=(x,A)=>{const I=o.getElementRule(x.nodeName.toLowerCase()),F=I==null?void 0:I.parentsRequired;return F&&F.length?A&&fn(F,A)?A:F[0]:!1},g=(x,A,I)=>{let F;const z=A[0],X=Y0(z)?z.name:void 0,te=u(x,X);if(te)X===te?(F=z,A=A.slice(1)):F=te;else if(z)F=z,A=A.slice(1);else if(!I)return x;const K=F?i(F):ci.create("div");K.appendChild(x),I&&at.each(I,ge=>{const be=i(ge);K.insertBefore(be,x)});const ne=Y0(F)?F.siblings:void 0;return g(K,A,ne)},y=ci.create("div");if(e.length>0){const x=e[0],A=i(x),I=Y0(x)?x.siblings:void 0;y.appendChild(g(A,e.slice(1),I))}return y},B$=e=>{e=at.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,i,u,g,y)=>{switch(i){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":at.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(g==="["){const x=y.match(/([\w\-]+)(?:\=\"([^\"]+))?/);x&&(o.attrs[x[1]]=x[2])}return""})),o.name=n||"div",o},$D=e=>ee(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),at.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=at.map(n.split(/(?:~\+|~|\+)/),B$),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],ID=(e,n)=>{let o="",r=wx(e);if(r==="")return"";const i=z=>ee(z)?z.replace(/%(\w+)/g,""):"",u=(z,X)=>ci.getStyle(X??e.getBody(),z,!0);if(ee(n)){const z=e.formatter.get(n);if(!z)return"";n=z[0]}if("preview"in n){const z=n.preview;if(z===!1)return"";r=z||r}let g=n.block||n.inline||"span",y;const x=$D(n.selector);x.length>0?(x[0].name||(x[0].name=g),g=n.selector,y=AS(x,e)):y=AS([g],e);const A=ci.select(g,y)[0]||y.firstChild;df(n.styles,(z,X)=>{const te=i(z);te&&ci.setStyle(A,X,te)}),df(n.attributes,(z,X)=>{const te=i(z);te&&ci.setAttrib(A,X,te)}),df(n.classes,z=>{const X=i(z);ci.hasClass(A,X)||ci.addClass(A,X)}),e.dispatch("PreviewFormats"),ci.setStyles(y,{position:"absolute",left:-65535}),e.getBody().appendChild(y);const I=u("fontSize"),F=/px$/.test(I)?parseInt(I,10):0;return df(r.split(" "),z=>{let X=u(z,A);if(!(z==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(X)&&(X=u(z),ah(X).toLowerCase()==="#ffffff"))&&!(z==="color"&&ah(X).toLowerCase()==="#000000")){if(z==="font-size"&&/em|%$/.test(X)){if(F===0)return;X=parseFloat(X)/(/%$/.test(X)?100:1)*F+"px"}z==="border"&&X&&(o+="padding:0 2px;"),o+=z+":"+X+";"}}),e.dispatch("AfterPreviewFormats"),ci.remove(y),o},$$=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},FD=e=>{const n=BT(e),o=Ss({});return $$(e),iH(e),Cg(e)||yH(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,i,u)=>{kz(e,r,i,u)},remove:(r,i,u,g)=>{Oz(e,r,i,u,g)},toggle:(r,i,u)=>{Az(e,r,i,u)},match:(r,i,u,g)=>l$(e,r,i,u,g),closest:r=>kD(e,r),matchAll:(r,i)=>u$(e,r,i),matchNode:(r,i,u,g)=>_D(e,r,i,u,g),canApply:r=>d$(e,r),formatChanged:(r,i,u,g)=>pu(e,o,r,i,u,g),getCssText:Ge(ID,e)}},kb=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},I$=(e,n,o)=>{const r=Ss(!1),i=x=>{_T(n,!1,o),n.add({},x)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",x=>{const A=x.command;kb(A)||(o$(n,o),n.beforeChange())}),e.on("ExecCommand",x=>{const A=x.command;kb(A)||i(x)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",i),e.on("dragend",i),e.on("keyup",x=>{const A=x.keyCode;if(x.isDefaultPrevented())return;const I=xt.os.isMacOS()&&x.key==="Meta";(A>=33&&A<=36||A>=37&&A<=40||A===45||x.ctrlKey||I)&&(i(),e.nodeChanged()),(A===46||A===8)&&e.nodeChanged(),r.get()&&n.typing&&!SD(TT(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",x=>{const A=x.keyCode;if(x.isDefaultPrevented())return;if(A>=33&&A<=36||A>=37&&A<=40||A===45){n.typing&&i(x);return}const I=x.ctrlKey&&!x.altKey||x.metaKey;if((A<16||A>20)&&A!==224&&A!==91&&!n.typing&&!I){n.beforeChange(),_T(n,!0,o),n.add({},x),r.set(!0);return}(xt.os.isMacOS()?x.metaKey:x.ctrlKey&&!x.altKey)&&n.beforeChange()}),e.on("mousedown",x=>{n.typing&&i(x)});const u=x=>x.inputType==="insertReplacementText",g=x=>x.inputType==="insertText"&&x.data===null,y=x=>x.inputType==="insertFromPaste"||x.inputType==="insertFromDrop";e.on("input",x=>{x.inputType&&(u(x)||g(x)||y(x))&&i(x)}),e.on("AddUndo Undo Redo ClearUndos",x=>{x.isDefaultPrevented()||e.nodeChanged()})},F$=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},LD=e=>{const n=Fm(),o=Ss(0),r=Ss(0),i={data:[],typing:!1,beforeChange:()=>{GK(e,o,n)},add:(u,g)=>Wa(e,i,r,o,n,u,g),dispatchChange:()=>{e.setDirty(!0);const u=TT(e);u.bookmark=Sh(e.selection),e.dispatch("change",{level:u,lastLevel:ol(i.data,r.get()).getOrUndefined()})},undo:()=>a$(e,i,o,r),redo:()=>i$(e,r,i.data),clear:()=>{c$(e,i,r)},reset:()=>{xz(e,i)},hasUndo:()=>Ez(e,i,r),hasRedo:()=>kT(e,i,r),transact:u=>Tz(e,i,o,u),ignore:u=>{TD(e,o,u)},extra:(u,g)=>{_z(e,i,r,u,g)}};return Cg(e)||I$(e,i,o),F$(e),i},$T=[9,27,kt.HOME,kt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,kt.DOWN,kt.UP,kt.LEFT,kt.RIGHT].concat(xt.browser.isFirefox()?[224]:[]),HD="data-mce-placeholder",zD=e=>e.type==="keydown"||e.type==="keyup",VD=e=>{const n=e.keyCode;return n===kt.BACKSPACE||n===kt.DELETE},L$=e=>{if(zD(e)){const n=e.keyCode;return!VD(e)&&(kt.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||fn($T,n))}else return!1},xg=e=>zD(e)&&!(VD(e)||e.type==="keyup"&&e.keyCode===229),gp=(e,n,o)=>{if(Rs(se.fromDom(n),!1)){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},ld=e=>{var n;const o=e.dom,r=Ha(e),i=(n=qM(e))!==null&&n!==void 0?n:"",u=(g,y)=>{if(L$(g))return;const x=e.getBody(),A=xg(g)?!1:gp(o,x,r);(o.getAttrib(x,HD)!==""!==A||y)&&(o.setAttrib(x,HD,A?i:null),o.setAttrib(x,"aria-placeholder",A?i:null),hA(e,A),e.on(A?"keydown":"keyup",u),e.off(A?"keyup":"keydown",u))};po(i)&&e.on("init",g=>{u(g,!0),e.on("change SetContent ExecCommand",u),e.on("paste",y=>Tl.setEditorTimeout(e,()=>u(y)))})},AV=(e,n)=>({block:e,position:n}),DV=(e,n)=>({from:e,to:n}),UD=(e,n)=>{const o=se.fromDom(e),r=se.fromDom(n.container());return B0(o,r).map(i=>AV(i,n))},RV=e=>!oo(e.from.block,e.to.block),H$=(e,n)=>fi(n,i=>Wi(i)||Ia(i.dom),i=>oo(i,e)).filter(zr).getOr(e),MV=(e,n)=>{const o=se.fromDom(e);return oo(H$(o,n.from.block),H$(o,n.to.block))},NV=e=>Vn(e.from.block.dom)===!1&&Vn(e.to.block.dom)===!1,PV=e=>{const n=o=>xe(o)||Sv(o.dom);return n(e.from.block)&&n(e.to.block)},BV=(e,n,o)=>Mo(o.position.getNode())&&!Rs(o.block)?Lh(!1,o.block.dom).bind(r=>r.isEqual(o.position)?Kr(n,e,r).bind(i=>UD(e,i)):Z.some(o)).getOr(o):o,$V=(e,n,o)=>{const r=UD(e,Ae.fromRangeStart(o)),i=r.bind(u=>Kr(n,e,u.position).bind(g=>UD(e,g).map(y=>BV(e,n,y))));return Dr(r,i,DV).filter(u=>RV(u)&&MV(e,u)&&NV(u)&&PV(u))},IV=(e,n,o)=>o.collapsed?$V(e,n,o):Z.none(),FV=(e,n)=>{const o=cr(e);return Jr(o,r=>n.isBlock(Jn(r))).fold(gt(o),r=>o.slice(0,r))},IT=(e,n)=>{const o=FV(e,n);return Ie(o,fo),o},FT=(e,n)=>{const o=of(n,e);return _s(o.reverse(),r=>Rs(r)).each(fo)},z$=e=>Zt(Qp(e),n=>!Rs(n)).length===0,LV=(e,n,o,r,i)=>{if(Rs(o))return Lu(o),ai(o.dom);z$(i)&&Rs(n)&&lr(i,se.fromTag("br"));const u=Si(o.dom,Ae.before(i.dom));return Ie(IT(n,r),g=>{lr(i,g)}),FT(e,n),u},HV=(e,n)=>e.isInline(Jn(n)),V$=(e,n,o,r)=>{if(Rs(o)){if(Rs(n)){const g=$l((y=>{const x=(A,I)=>Mf(A).fold(()=>I,F=>HV(r,F)?x(F,I.concat(Xi(F))):I);return x(y,[])})(o),(y,x)=>(o1(y,x),x),bi());Dd(n),Ks(n,g)}return fo(o),ai(n.dom)}const i=Sl(o.dom);return Ie(IT(n,r),u=>{Ks(o,u)}),FT(e,n),i},U$=(e,n)=>{const o=of(n,e);return Z.from(o[o.length-1])},WD=(e,n)=>wa(n,e)?U$(n,e):Z.none(),ZD=(e,n)=>{Lh(e,n.dom).bind(o=>Z.from(o.getNode())).map(se.fromDom).filter(Dm).each(fo)},jD=(e,n,o,r)=>(ZD(!0,n),ZD(!1,o),WD(n,o).fold(Ge(V$,e,n,o,r),Ge(LV,e,n,o,r))),LT=(e,n,o,r,i)=>n?jD(e,r,o,i):jD(e,o,r,i),GD=(e,n)=>{const o=se.fromDom(e.getBody());return IV(o.dom,n,e.selection.getRng()).map(i=>()=>{LT(o,n,i.from.block,i.to.block,e.schema).each(u=>{e.selection.setRng(u.toRange())})})},zV=(e,n,o)=>{const r=n.getRng();return Dr(B0(e,se.fromDom(r.startContainer)),B0(e,se.fromDom(r.endContainer)),(i,u)=>oo(i,u)?Z.none():Z.some(()=>{r.deleteContents(),LT(e,!0,i,u,o).each(g=>{n.setRng(g.toRange())})})).getOr(Z.none())},cm=(e,n)=>{const o=se.fromDom(n),r=Ge(oo,e);return ws(o,Wi,r).isSome()},ud=(e,n)=>cm(e,n.startContainer)||cm(e,n.endContainer),HT=(e,n)=>{const o=Si(e.dom,Ae.fromRangeStart(n)).isNone(),r=Va(e.dom,Ae.fromRangeEnd(n)).isNone();return!ud(e,n)&&o&&r},W$=e=>Z.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),zT=e=>{const n=se.fromDom(e.getBody()),o=e.selection.getRng();return HT(n,o)?W$(e):zV(n,e.selection,e.schema)},VT=(e,n)=>e.selection.isCollapsed()?Z.none():zT(e),mf=(e,n,o,r,i)=>Z.from(n._selectionOverrides.showCaret(e,o,r,i)),Z$=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},X0=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?Z.none():Z.some(Z$(n)),j$=(e,n,o)=>{const r=hC(1,e.getBody(),n),i=Ae.fromRangeStart(r),u=i.getNode();if(s0(u))return mf(1,e,u,!i.isAtEnd(),!1);const g=i.getNode(!0);if(s0(g))return mf(1,e,g,!1,!1);const y=np(e.dom.getRoot(),i.getNode());return s0(y)?mf(1,e,y,!1,o):Z.none()},UT=(e,n,o)=>n.collapsed?j$(e,n,o).getOr(n):n,WT=e=>fg(e)||ZC(e),qD=e=>om(e)||M0(e),VV=(e,n)=>{nt(n)&&n.data.length===0&&e.remove(n)},G$=(e,n,o,r,i,u)=>{mf(r,e,u.getNode(!i),i,!0).each(g=>{if(n.collapsed){const y=n.cloneRange();i?y.setEnd(g.startContainer,g.startOffset):y.setStart(g.endContainer,g.endOffset),y.deleteContents()}else n.deleteContents();e.selection.setRng(g)}),VV(e.dom,o)},UV=(e,n)=>{const o=e.selection.getRng();if(!nt(o.commonAncestorContainer))return Z.none();const r=n?Us.Forwards:Us.Backwards,i=au(e.getBody()),u=Ge(Hx,n?i.next:i.prev),g=n?WT:qD,y=Km(r,e.getBody(),o),x=u(y),A=x&&du(n,x);if(!A||!pC(y,A))return Z.none();if(g(A))return Z.some(()=>G$(e,o,y.getNode(),r,n,A));const I=u(A);return I&&g(I)&&pC(A,I)?Z.some(()=>G$(e,o,y.getNode(),r,n,I)):Z.none()},KD=(e,n)=>UV(e,n),ZT=(e,n)=>{const o=e.getBody();return n?ai(o).filter(fg):Sl(o).filter(om)},YD=e=>{const n=e.selection.getRng();return!n.collapsed&&(ZT(e,!0).exists(o=>o.isEqual(Ae.fromRangeStart(n)))||ZT(e,!1).exists(o=>o.isEqual(Ae.fromRangeEnd(n))))},WV=e=>Te(e)&&(Wi(se.fromDom(e))||Iu(se.fromDom(e))),xc=su.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),ZV=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return Mt(o)&&o.getAttribute("data-mce-caret")===r},jV=(e,n,o,r,i)=>{const u=g=>i.isInline(g.nodeName.toLowerCase())&&!ru(o,r,e);return Lx(!n,o).fold(()=>Lx(n,r).fold(Ke,u),u)},q$=(e,n,o,r)=>{const i=r.getNode(!n);return B0(se.fromDom(e),se.fromDom(o.getNode())).map(u=>Rs(u)?xc.remove(u.dom):xc.moveToElement(i)).orThunk(()=>Z.some(xc.moveToElement(i)))},K$=(e,n,o,r)=>Kr(n,e,o).bind(i=>WV(i.getNode())||jV(e,n,o,i,r)?Z.none():n&&Vn(i.getNode())||!n&&Vn(i.getNode(!0))?q$(e,n,o,i):n&&om(o)||!n&&fg(o)?Z.some(xc.moveToPosition(i)):Z.none()),GV=(e,n)=>Ht(n)?Z.none():e&&Vn(n.nextSibling)?Z.some(xc.moveToElement(n.nextSibling)):!e&&Vn(n.previousSibling)?Z.some(xc.moveToElement(n.previousSibling)):Z.none(),qV=(e,n,o)=>o.fold(r=>Z.some(xc.remove(r)),r=>Z.some(xc.moveToElement(r)),r=>ru(n,r,e)?Z.none():Z.some(xc.moveToPosition(r))),KV=(e,n,o,r)=>ZV(n,o)?GV(n,o.getNode(!n)).orThunk(()=>K$(e,n,o,r)):K$(e,n,o,r).bind(i=>qV(e,o,i)),jT=(e,n,o,r)=>{const i=hC(n?1:-1,e,o),u=Ae.fromRangeStart(i),g=se.fromDom(e);return!n&&om(u)?Z.some(xc.remove(u.getNode(!0))):n&&fg(u)?Z.some(xc.remove(u.getNode())):!n&&fg(u)&&GC(g,u,r)?C7(g,u,r).map(y=>xc.remove(y.getNode())):n&&om(u)&&jC(g,u,r)?S7(g,u,r).map(y=>xc.remove(y.getNode())):KV(e,n,u,r)},XD=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),hg(e,n,se.fromDom(o)),!0),YV=(e,n)=>o=>{const r=n?Ae.before(o):Ae.after(o);return e.selection.setRng(r.toRange()),!0},XV=e=>n=>(e.selection.setRng(n.toRange()),!0),Y$=(e,n)=>Z.from(np(e.getBody(),n)),JV=(e,n)=>{const o=e.selection.getNode();return Y$(e,o).filter(Vn).fold(()=>jT(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold(XD(e,n),YV(e,n),XV(e))),()=>Z.some(Rt))},X$=e=>{Ie(Wr(e,".mce-offscreen-selection"),fo)},QV=(e,n)=>{const o=e.selection.getNode();return Vn(o)&&!c1(o)?Y$(e,o.parentNode).filter(Vn).fold(()=>Z.some(()=>{X$(se.fromDom(e.getBody())),hg(e,n,se.fromDom(e.selection.getNode())),JA(e)}),()=>Z.some(Rt)):YD(e)?Z.some(()=>{PE(e,e.selection.getRng(),se.fromDom(e.getBody()))}):Z.none()},J$=e=>{const n=e.dom,o=e.selection,r=np(e.getBody(),o.getNode());if(Ia(r)&&n.isBlock(r)&&n.isEmpty(r)){const i=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(i),o.setRng(Ae.before(i).toRange())}return!0},DS=(e,n)=>e.selection.isCollapsed()?JV(e,n):QV(e,n),e9=(e,n)=>{const o=Ae.fromRangeStart(e.selection.getRng());return Kr(n,e.getBody(),o).filter(r=>n?h7(r):p7(r)).bind(r=>z1(n?0:-1,r)).map(r=>()=>e.selection.select(r))},JD=(e,n)=>e.selection.isCollapsed()?e9(e,n):Z.none(),J0=nt,Q$=e=>J0(e)&&e.data[0]===jr,eI=e=>J0(e)&&e.data[e.data.length-1]===jr,tI=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(jr)},t9=e=>{var n;if(J0(e.previousSibling))return eI(e.previousSibling)||e.previousSibling.appendData(jr),e.previousSibling;if(J0(e))return Q$(e)||e.insertData(0,jr),e;{const o=tI(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},GT=e=>{var n,o;if(J0(e.nextSibling))return Q$(e.nextSibling)||e.nextSibling.insertData(0,jr),e.nextSibling;if(J0(e))return eI(e)||e.appendData(jr),e;{const r=tI(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},Ob=(e,n)=>e?t9(n):GT(n),n9=Ge(Ob,!0),o9=Ge(Ob,!1),RS=(e,n)=>nt(e.container())?Ob(n,e.container()):Ob(n,e.getNode()),nI=(e,n)=>{const o=n.get();return o&&e.container()===o&&vi(o)},QD=(e,n)=>n.fold(o=>{Er(e.get());const r=n9(o);return e.set(r),Z.some(Ae(r,r.length-1))},o=>ai(o).map(r=>{if(nI(r,e)){const i=e.get();return Ae(i,1)}else{Er(e.get());const i=RS(r,!0);return e.set(i),Ae(i,1)}}),o=>Sl(o).map(r=>{if(nI(r,e)){const i=e.get();return Ae(i,i.length-1)}else{Er(e.get());const i=RS(r,!1);return e.set(i),Ae(i,i.length-1)}}),o=>{Er(e.get());const r=o9(o);return e.set(r),Z.some(Ae(r,1))}),oI=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return Z.none()},nc=su.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),sI=(e,n)=>{const o=jd(n,e);return o||e},s9=(e,n,o)=>{const r=zo(o),i=sI(n,r.container());return fa(e,i,r).fold(()=>Va(i,r).bind(Ge(fa,e,i)).map(u=>nc.before(u)),Z.none)},r9=(e,n)=>rg(e,n)===null,rI=(e,n,o)=>fa(e,n,o).filter(Ge(r9,n)),a9=(e,n,o)=>{const r=eP(o);return rI(e,n,r).bind(i=>Si(i,r).isNone()?Z.some(nc.start(i)):Z.none())},i9=(e,n,o)=>{const r=zo(o);return rI(e,n,r).bind(i=>Va(i,r).isNone()?Z.some(nc.end(i)):Z.none())},c9=(e,n,o)=>{const r=eP(o),i=sI(n,r.container());return fa(e,i,r).fold(()=>Si(i,r).bind(Ge(fa,e,i)).map(u=>nc.after(u)),Z.none)},l9=e=>!QN(MS(e)),Aa=(e,n,o)=>oI([s9,a9,i9,c9],[e,n,o]).filter(l9),MS=e=>e.fold(Ro,Ro,Ro,Ro),e3=e=>e.fold(gt("before"),gt("start"),gt("end"),gt("after")),NS=e=>e.fold(nc.before,nc.before,nc.after,nc.after),t3=e=>e.fold(nc.start,nc.start,nc.end,nc.end),aI=(e,n)=>e3(e)===e3(n)&&MS(e)===MS(n),u9=(e,n,o,r,i,u)=>Dr(fa(n,o,r),fa(n,o,i),(g,y)=>g!==y&&YC(o,g,y)?nc.after(e?g:y):u).getOr(u),iI=(e,n)=>e.fold(St,o=>!aI(o,n)),d9=(e,n,o,r,i)=>{const u=du(e,i);return Kr(e,o,u).map(Ge(du,e)).fold(()=>r.map(NS),x=>Aa(n,o,x).map(Ge(u9,e,n,o,u,x)).filter(Ge(iI,r))).filter(l9)},m9=(e,n)=>e?n.fold(R(Z.some,nc.start),Z.none,R(Z.some,nc.after),Z.none):n.fold(Z.none,R(Z.some,nc.before),Z.none,R(Z.some,nc.end)),f9=(e,n,o,r)=>{const i=du(e,r),u=Aa(n,o,i);return Aa(n,o,i).bind(Ge(m9,e)).orThunk(()=>d9(e,n,o,u,r))},Q0=e=>ue(e.selection.getSel().modify),n3=(e,n,o)=>{const r=e?1:-1;return n.setRng(Ae(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},cI=(e,n)=>{const o=n.selection.getRng(),r=e?Ae.fromRangeEnd(o):Ae.fromRangeStart(o);return Q0(n)?e&&Hu(r)?n3(!0,n.selection,r):!e&&pv(r)?n3(!1,n.selection,r):!1:!1};var lm;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(lm||(lm={}));const ey=(e,n)=>e===Us.Backwards?ns(n):n,g9=(e,n,o)=>e===Us.Forwards?n.next(o):n.prev(o),h9=(e,n,o,r)=>Mo(r.getNode(n===Us.Forwards))?lm.Br:ru(o,r)===!1?lm.Block:lm.Wrap,lI=(e,n,o,r)=>{const i=au(o);let u=r;const g=[];for(;u;){const y=g9(n,i,u);if(!y)break;if(Mo(y.getNode(!1)))return n===Us.Forwards?{positions:ey(n,g).concat([y]),breakType:lm.Br,breakAt:Z.some(y)}:{positions:ey(n,g),breakType:lm.Br,breakAt:Z.some(y)};if(!y.isVisible()){u=y;continue}if(e(u,y)){const x=h9(o,n,u,y);return{positions:ey(n,g),breakType:x,breakAt:Z.some(y)}}g.push(y),u=y}return{positions:ey(n,g),breakType:lm.Eol,breakAt:Z.none()}},p9=(e,n,o,r)=>n(o,r).breakAt.map(i=>{const u=n(o,i).positions;return e===Us.Backwards?u.concat(i):[i].concat(u)}).getOr([]),uI=(e,n)=>ss(e,(o,r)=>o.fold(()=>Z.some(r),i=>Dr(js(i.getClientRects()),js(r.getClientRects()),(u,g)=>{const y=Math.abs(n-u.left);return Math.abs(n-g.left)<=y?r:i}).or(o)),Z.none()),o3=(e,n)=>js(n.getClientRects()).bind(o=>uI(e,o.left)),Ec=Ge(lI,Ae.isAbove,-1),PS=Ge(lI,Ae.isBelow,1),dI=Ge(p9,-1,Ec),hp=Ge(p9,1,PS),s3=(e,n)=>Ec(e,n).breakAt.isNone(),mI=(e,n)=>PS(e,n).breakAt.isNone(),qT=e=>ai(e).map(n=>[n].concat(PS(e,n).positions)).getOr([]),b9=e=>Sl(e).map(n=>Ec(e,n).positions.concat(n)).getOr([]),v9=(e,n)=>o3(dI(e,n),n),y9=(e,n)=>o3(hp(e,n),n),w9=Vn,fI=(e,n)=>Math.abs(e.left-n),gI=(e,n)=>Math.abs(e.right-n),Eg=e=>ba(e,"node"),hI=(e,n)=>Na(e,(o,r)=>{const i=Math.min(fI(o,n),gI(o,n)),u=Math.min(fI(r,n),gI(r,n));return u===i&&Eg(r)&&w9(r.node)||u<i?r:o}),C9=e=>{const n=o=>Wt(o,r=>{const i=Jf(r);return i.node=e,i});if(Mt(e))return n(e.getClientRects());if(nt(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},pI=e=>Ka(e,C9);var BS;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(BS||(BS={}));const S9=(e,n,o,r)=>{let i=r;for(;i=Nh(i,e,bv,n);)if(o(i))return},KT=(e,n,o,r,i,u)=>{let g=0;const y=[],x=F=>{let z=pI([F]);e===-1&&(z=z.reverse());for(let X=0;X<z.length;X++){const te=z[X];if(!o(te,A)){if(y.length>0&&n(te,Ya(y))&&g++,te.line=g,i(te))return!0;y.push(te)}}return!1},A=Ya(u.getClientRects());if(!A)return y;const I=u.getNode();return I&&(x(I),S9(e,r,x,I)),y},r3=(e,n)=>n.line>e,a3=(e,n)=>n.line===e,bI=Ge(KT,BS.Up,Hm,eg),vI=Ge(KT,BS.Down,eg,Hm),i3=e=>Ya(e.getClientRects()),x9=(e,n,o,r)=>{const i=au(n);let u,g,y,x;const A=[];let I=0;e===1?(u=i.next,g=eg,y=Hm,x=Ae.after(r)):(u=i.prev,g=Hm,y=eg,x=Ae.before(r));const F=i3(x);do{if(!x.isVisible())continue;const z=i3(x);if(y(z,F))continue;A.length>0&&g(z,Ya(A))&&I++;const X=Jf(z);if(X.position=x,X.line=I,o(X))return A;A.push(X)}while(x=u(x));return A},ty=e=>n=>r3(e,n),ny=e=>n=>a3(e,n),ff=(e,n)=>{e.selection.setRng(n),db(e,e.selection.getRng())},YT=(e,n,o)=>Z.some(UT(e,n,o)),c3=(e,n,o,r,i,u)=>{const g=n===Us.Forwards,y=au(e.getBody()),x=Ge(Hx,g?y.next:y.prev),A=g?r:i;if(!o.collapsed){const te=_w(o);if(u(te))return mf(n,e,te,n===Us.Backwards,!1);if(YD(e)){const K=o.cloneRange();return K.collapse(n===Us.Backwards),Z.from(K)}}const I=Km(n,e.getBody(),o);if(A(I))return X0(e,I.getNode(!g));let F=x(I);const z=B2(o);if(F)F=du(g,F);else return z?Z.some(o):Z.none();if(A(F))return mf(n,e,F.getNode(!g),g,!1);const X=x(F);return X&&A(X)&&pC(F,X)?mf(n,e,X.getNode(!g),g,!1):z?YT(e,F.toRange(),!1):Z.none()},l3=(e,n,o,r,i,u)=>{const g=Km(n,e.getBody(),o),y=Ya(g.getClientRects()),x=n===BS.Down,A=e.getBody();if(!y)return Z.none();if(YD(e)){const ne=x?Ae.fromRangeEnd(o):Ae.fromRangeStart(o);return(x?y9:v9)(A,ne).orThunk(()=>Z.from(ne)).map(be=>be.toRange())}const F=(x?vI:bI)(A,ty(1),g),z=Zt(F,ny(1)),X=y.left,te=hI(z,X);if(te&&u(te.node)){const ne=Math.abs(X-te.left),ge=Math.abs(X-te.right);return mf(n,e,te.node,ne<ge,!1)}let K;if(r(g)?K=g.getNode():i(g)?K=g.getNode(!0):K=_w(o),K){const ne=x9(n,A,ty(1),K);let ge=hI(Zt(ne,ny(1)),X);if(ge||(ge=Ya(Zt(ne,ny(0))),ge))return YT(e,ge.position.toRange(),!1)}return z.length===0?oy(e,x).filter(x?i:r).map(ne=>UT(e,ne.toRange(),!1)):Z.none()},oy=(e,n)=>{const o=e.selection.getRng(),r=n?Ae.fromRangeEnd(o):Ae.fromRangeStart(o),i=fC(r.container(),e.getBody());if(n){const u=PS(i,r);return Pi(u.positions)}else{const u=Ec(i,r);return js(u.positions)}},XT=(e,n,o)=>oy(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),pp=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},yI=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},u3=(e,n,o)=>QD(n,o).map(r=>(pp(e,r),o)),E9=(e,n,o)=>{const r=Ae.fromRangeStart(e);if(e.collapsed)return r;{const i=Ae.fromRangeEnd(e);return o?Si(n,i).getOr(i):Va(n,r).getOr(r)}},T9=(e,n,o)=>{const r=e.getBody(),i=E9(e.selection.getRng(),r,o),u=Ge(pb,e);return f9(o,u,r,i).bind(y=>u3(e,n,y))},wI=(e,n,o)=>{const r=Wt(Wr(se.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),g=>g.dom),i=Zt(r,e),u=Zt(o,e);Ie(wd(i,u),Ge(yI,!1)),Ie(wd(u,i),Ge(yI,!0))},_9=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=Ae.fromRangeStart(e.selection.getRng());Ae.isTextPosition(r)&&!uu(r)&&(pp(e,Px(o,r)),n.set(null))}},CI=(e,n,o,r)=>{if(n.selection.isCollapsed()){const i=Zt(r,e);Ie(i,u=>{const g=Ae.fromRangeStart(n.selection.getRng());Aa(e,n.getBody(),g).bind(y=>u3(n,o,y))})}},k9=(e,n,o)=>ng(e)?T9(e,n,o).isSome():!1,SI=(e,n,o)=>ng(n)?cI(e,n):!1,O9=e=>{const n=Ss(null),o=Ge(pb,e);return e.on("NodeChange",r=>{ng(e)&&(wI(o,e.dom,r.parents),_9(e,n),CI(o,e,n,r.parents))}),n},A9=Ge(SI,!0),D9=Ge(SI,!1),JT=(e,n,o)=>{if(ng(e)){const r=oy(e,n).getOrThunk(()=>{const i=e.selection.getRng();return n?Ae.fromRangeEnd(i):Ae.fromRangeStart(i)});return Aa(Ge(pb,e),e.getBody(),r).exists(i=>{const u=NS(i);return QD(o,u).exists(g=>(pp(e,g),!0))})}else return!1},R9=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},M9=e=>Dr(ai(e),Sl(e),(n,o)=>{const r=du(!0,n),i=du(!1,o);return Va(e,r).forall(u=>u.isEqual(i))}).getOr(!0),xI=(e,n)=>o=>QD(n,o).map(r=>()=>pp(e,r)),d3=(e,n,o,r)=>{const i=e.getBody(),u=Ge(pb,e);e.undoManager.ignore(()=>{e.selection.setRng(R9(o,r)),NE(e),Aa(u,i,Ae.fromRangeStart(e.selection.getRng())).map(t3).bind(xI(e,n)).each(Fr)}),e.nodeChanged()},N9=(e,n)=>{const o=jd(n,e);return o||e},Ab=(e,n,o,r)=>{const i=N9(e.getBody(),r.container()),u=Ge(pb,e),g=Aa(u,i,r);return g.bind(x=>o?x.fold(gt(Z.some(t3(x))),Z.none,gt(Z.some(NS(x))),Z.none):x.fold(Z.none,gt(Z.some(NS(x))),Z.none,gt(Z.some(t3(x))))).map(xI(e,n)).getOrThunk(()=>{const x=qd(o,i,r),A=x.bind(I=>Aa(u,i,I));return Dr(g,A,()=>fa(u,i,r).bind(I=>M9(I)?Z.some(()=>{hg(e,o,se.fromDom(I))}):Z.none())).getOrThunk(()=>A.bind(()=>x.map(I=>()=>{o?d3(e,n,r,I):d3(e,n,I,r)})))})},QT=(e,n,o)=>{if(e.selection.isCollapsed()&&ng(e)){const r=Ae.fromRangeStart(e.selection.getRng());return Ab(e,n,o,r)}return Z.none()},m3=e=>$a(e)>1,f3=(e,n)=>{const o=se.fromDom(e.getBody()),r=se.fromDom(e.selection.getStart()),i=of(r,o);return Jr(i,n).fold(gt(i),u=>i.slice(0,u))},g3=e=>$a(e)===1,bp=e=>f3(e,n=>e.schema.isBlock(Jn(n))||m3(n)),EI=e=>f3(e,n=>e.schema.isBlock(Jn(n))),Al=(e,n)=>{const o=Ge(qP,e);return Ka(n,r=>o(r)?[r.dom]:[])},vp=e=>{const n=EI(e);return Al(e,n)},h3=(e,n,o,r)=>{const i=Al(n,r);if(i.length===0)hg(n,e,o);else{const u=QE(o.dom,i);n.selection.setRng(u.toRange())}},P9=(e,n)=>{const o=Zt(bp(e),g3);return Pi(o).bind(r=>{const i=Ae.fromRangeStart(e.selection.getRng());return QA(n,i,r.dom)&&!eb(r)?Z.some(()=>h3(n,e,r,o)):Z.none()})},TI=(e,n)=>{const o=n.parentElement;return Mo(n)&&!ae(o)&&e.dom.isEmpty(o)},B9=e=>eb(se.fromDom(e)),_I=(e,n)=>{const o=e.selection.getStart(),r=TI(e,o)||B9(o)?QE(o,n):GP(e.selection.getRng(),n);e.selection.setRng(r.toRange())},$9=(e,n)=>{const o=wd(n,vp(e));o.length>0&&_I(e,o)},kI=e=>nt(e.startContainer),I9=e=>e.startOffset===0&&kI(e),OI=(e,n)=>{const o=n.startContainer.parentElement;return!ae(o)&&qP(e,se.fromDom(o))},F9=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!ae(n)&&!ae(o)&&n.isEqualNode(o)},L9=e=>{const n=e.endContainer;return e.endOffset===(nt(n)?n.length:n.childNodes.length)},sy=e=>F9(e)&&L9(e),p3=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),AI=e=>sy(e)||p3(e),DI=e=>{const n=e.selection.getRng();return I9(n)&&OI(e,n)&&AI(n)},b3=e=>{if(DI(e)){const n=vp(e);return Z.some(()=>{NE(e),$9(e,n)})}else return Z.none()},v3=(e,n)=>e.selection.isCollapsed()?P9(e,n):b3(e),H9=(e,n)=>tP(e,o=>gc(o.dom),o=>n.isBlock(Jn(o))),z9=e=>H9(se.fromDom(e.selection.getStart()),e.schema),V9=e=>{const n=e.selection.getRng();return n.collapsed&&(kI(n)||e.dom.isEmpty(n.startContainer))&&!z9(e)},$S=e=>(V9(e)&&_I(e,[]),!0),y3=(e,n,o)=>Te(o)?Z.some(()=>{e._selectionOverrides.hideFakeCaret(),hg(e,n,se.fromDom(o))}):Z.none(),U9=(e,n)=>{const o=n?ZC:M0,r=n?Us.Forwards:Us.Backwards,i=Km(r,e.getBody(),e.selection.getRng());return o(i)?y3(e,n,i.getNode(!n)):Z.from(du(n,i)).filter(u=>o(u)&&pC(i,u)).bind(u=>y3(e,n,u.getNode(!n)))},RI=(e,n)=>{const o=e.selection.getNode();return Ls(o)?y3(e,n,o):Z.none()},w3=(e,n)=>e.selection.isCollapsed()?U9(e,n):RI(e,n),W9=e=>fi(e,n=>Ia(n.dom)||Vn(n.dom)).exists(n=>Ia(n.dom)),Tc=e=>il(e??"").getOr(0),MI=(e,n)=>{const o=e||pi(n)?"margin":"padding",r=Qs(n,"direction")==="rtl"?"-right":"-left";return o+r},C3=(e,n,o,r,i,u)=>{const g=MI(o,se.fromDom(u)),y=Tc(e.getStyle(u,g));if(n==="outdent"){const x=Math.max(0,y-r);e.setStyle(u,g,x?x+i:"")}else{const x=y+r+i;e.setStyle(u,g,x)}},NI=(e,n)=>Js(n,o=>{const r=MI(Yv(e),o),i=er(o,r).map(Tc).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&i>0}),e_=e=>{const n=BI(e);return!e.mode.isReadOnly()&&(n.length>1||NI(e,n))},PI=e=>Ui(e)||Iu(e),Z9=e=>sa(e).exists(PI),BI=e=>Zt(Pf(e.selection.getSelectedBlocks()),n=>!PI(n)&&!Z9(n)&&W9(n)),$I=(e,n)=>{var o,r;const{dom:i}=e,u=Kw(e),g=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",y=Tc(u),x=Yv(e);Ie(BI(e),A=>{C3(i,n,x,y,g,A.dom)})},j9=e=>$I(e,"indent"),S3=e=>$I(e,"outdent"),II=e=>{if(e.selection.isCollapsed()&&e_(e)){const n=e.dom,o=e.selection.getRng(),r=Ae.fromRangeStart(o),i=n.getParent(o.startContainer,n.isBlock);if(i!==null&&ZA(se.fromDom(i),r,e.schema))return Z.some(()=>S3(e))}return Z.none()},FI=(e,n,o)=>Rc([II,DS,KD,(r,i)=>QT(r,n,i),GD,FE,JD,w3,VT,v3],r=>r(e,o)).filter(r=>e.selection.isEditable()),IS=(e,n)=>{FI(e,n,!1).fold(()=>{e.selection.isEditable()&&(NE(e),JA(e))},Fr)},Tg=(e,n)=>{FI(e,n,!0).fold(()=>{e.selection.isEditable()&&YA(e)},Fr)},Db=(e,n)=>{e.addCommand("delete",()=>{IS(e,n)}),e.addCommand("forwardDelete",()=>{Tg(e,n)})},FS=5,x3=400,t_=e=>e.touches===void 0||e.touches.length!==1?Z.none():Z.some(e.touches[0]),LI=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>FS||r>FS},G9=e=>{const n=Fm(),o=Ss(!1),r=$v(i=>{e.dispatch("longpress",{...i,type:"longpress"}),o.set(!0)},x3);e.on("touchstart",i=>{t_(i).each(u=>{r.cancel();const g={x:u.clientX,y:u.clientY,target:i.target};r.throttle(i),o.set(!1),n.set(g)})},!0),e.on("touchmove",i=>{r.cancel(),t_(i).each(u=>{n.on(g=>{LI(u,g)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",i=>{r.cancel(),i.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(i.target)).each(()=>{o.get()?i.preventDefault():e.dispatch("tap",{...i,type:"tap"})})},!0)},n_=(e,n)=>an(e,n.nodeName),HI=(e,n)=>nt(n)?!0:Mt(n)?!n_(e.getBlockElements(),n)&&!hc(n)&&!Fn(e,n)&&!iw(n):!1,q9=(e,n,o)=>Yo(UA(se.fromDom(o),se.fromDom(n)),r=>n_(e,r.dom)),K9=(e,n)=>{if(nt(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||n_(e,n.nextSibling)||iw(n.nextSibling)}return!1},zI=e=>e.dom.create(Ha(e),R1(e)),Y9=e=>{const n=e.dom,o=e.selection,r=e.schema,i=r.getBlockElements(),u=o.getStart(),g=e.getBody();let y,x,A=!1;const I=Ha(e);if(!u||!Mt(u))return;const F=g.nodeName.toLowerCase();if(!r.isValidChild(F,I.toLowerCase())||q9(i,g,u))return;const z=o.getRng(),{startContainer:X,startOffset:te,endContainer:K,endOffset:ne}=z,ge=Jh(e);let be=g.firstChild;for(;be;)if(Mt(be)&&Cv(r,be),HI(r,be)){if(K9(i,be)){x=be,be=be.nextSibling,n.remove(x);continue}y||(y=zI(e),g.insertBefore(y,be),A=!0),x=be,be=be.nextSibling,y.appendChild(x)}else y=null,be=be.nextSibling;A&&ge&&(z.setStart(X,te),z.setEnd(K,ne),o.setRng(z),e.nodeChanged())},VI=(e,n,o)=>{const r=se.fromDom(zI(e)),i=bi();Ks(r,i),o(n,r);const u=document.createRange();return u.setStartBefore(i.dom),u.setEndBefore(i.dom),u},X9=e=>{e.on("NodeChange",Ge(Y9,e))},E3=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,UI=(e,n,o)=>function(r){const i=arguments,u=i[i.length-2],g=u>0?n.charAt(u-1):"";if(g==='"')return r;if(g===">"){const y=n.lastIndexOf("<",u);if(y!==-1&&n.substring(y,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(i[0])+'">'+e.dom.encode(typeof i[1]=="string"?i[1]:i[0])+"</span>"},eY=(e,n,o)=>{let r=n.length,i=o.content;if(o.format!=="raw"){for(;r--;)i=i.replace(n[r],UI(e,i,sC(e)));o.content=i}},tY=(e,n)=>Js(e,o=>{const r=n.match(o);return r!==null&&r[0].length===n.length}),nY=e=>{const n="contenteditable",o=" "+at.trim(Ax(e))+" ",r=" "+at.trim(sC(e))+" ",i=E3(o),u=E3(r),g=zO(e);g.length>0&&e.on("BeforeSetContent",y=>{eY(e,g,y)}),e.parser.addAttributeFilter("class",y=>{let x=y.length;for(;x--;){const A=y[x];i(A)?A.attr(n,"true"):u(A)&&A.attr(n,"false")}}),e.serializer.addAttributeFilter(n,y=>{let x=y.length;for(;x--;){const A=y[x];if(!i(A)&&!u(A))continue;const I=A.attr("data-mce-content");g.length>0&&I?tY(g,I)?(A.name="#text",A.type=3,A.raw=!0,A.value=I):A.remove():A.attr(n,null)}})},J9=e=>gi(se.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),Q9=(e,n)=>{n.hasAttribute("data-mce-caret")&&(Nd(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},oY=(e,n)=>{const o=J9(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),Q9(e,o);return}nw(o)&&(Q9(e,o),e.undoManager.add())}},eU=e=>{e.on("keyup compositionstart",Ge(oY,e))},WI=Vn,sY=(e,n,o)=>c3(n,e,o,fg,om,WI),tU=(e,n,o)=>l3(n,e,o,u=>fg(u)||MN(u),u=>om(u)||kn(u),WI),Xc=e=>{const n=e.dom.create(Ha(e));return n.innerHTML='<br data-mce-bogus="1">',n},T3=(e,n,o)=>{const r=au(e.getBody()),i=Ge(Hx,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!i(Ae.fromRangeStart(o))){const y=se.fromDom(Xc(e));n===1?Vc(se.fromDom(u),y):lr(se.fromDom(u),y),e.selection.select(y.dom,!0),e.selection.collapse()}}},LS=(e,n)=>{const o=n?Us.Forwards:Us.Backwards,r=e.selection.getRng();return sY(o,e,r).orThunk(()=>(T3(e,o,r),Z.none()))},nU=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return tU(o,e,r).orThunk(()=>(T3(e,o,r),Z.none()))},ZI=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return QN(o)?!n:n},_3=(e,n)=>LS(e,ZI(e.selection,n)).exists(o=>(ff(e,o),!0)),o_=(e,n)=>nU(e,n).exists(o=>(ff(e,o),!0)),jI=(e,n)=>XT(e,n,n?om:fg),s_=(e,n)=>ZT(e,!n).map(o=>{const r=o.toRange(),i=e.selection.getRng();return n?r.setStart(i.startContainer,i.startOffset):r.setEnd(i.endContainer,i.endOffset),r}).exists(o=>(ff(e,o),!0)),GI=e=>fn(["figcaption"],Jn(e)),oU=(e,n,o)=>{const r=Ge(oo,n);return fi(se.fromDom(e.container()),i=>o.isBlock(Jn(i)),r).filter(GI)},sU=(e,n,o)=>n?mI(e.dom,o):s3(e.dom,o),rU=(e,n)=>{const o=se.fromDom(e.getBody()),r=Ae.fromRangeStart(e.selection.getRng());return oU(r,o,e.schema).exists(()=>{if(sU(o,n,r)){const u=VI(e,o,n?Ks:Nf);return e.selection.setRng(u),!0}else return!1})},r_=(e,n)=>e.selection.isCollapsed()?rU(e,n):!1,aU=(e,n,o)=>{const r=e.selection.getRng(),i=Ae.fromRangeStart(r);return e.getBody().firstChild===n&&s3(o,i)?(e.execCommand("InsertNewBlockBefore"),!0):!1},iU=(e,n)=>{const o=e.selection.getRng(),r=Ae.fromRangeStart(o);return e.getBody().lastChild===n&&mI(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},rY=(e,n)=>n?Z.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>iU(e,o)).getOr(!1):Z.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>Z.from(e.dom.getParent(o,"details")).map(r=>aU(e,r,o))).getOr(!1),qI=(e,n)=>rY(e,n),k3={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},aY=e=>Wt(e,n=>({...k3,...n})),cU=e=>Wt(e,n=>({...k3,...n})),KI=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,lU=(e,n)=>Ka(aY(e),o=>KI(o,n)?[o]:[]),O3=(e,n)=>Ka(cU(e),o=>KI(o,n)?[o]:[]),un=(e,...n)=>()=>e.apply(null,n),ry=(e,n)=>_s(lU(e,n),o=>o.action()),A3=(e,n)=>Rc(O3(e,n),o=>o.action()),YI=(e,n)=>{const o=n?Us.Forwards:Us.Backwards,r=e.selection.getRng();return c3(e,o,r,ZC,M0,Ls).exists(i=>(ff(e,i),!0))},XI=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return l3(e,o,r,ZC,M0,Ls).exists(i=>(ff(e,i),!0))},a_=(e,n)=>XT(e,n,n?M0:ZC),JI=su.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),HS={...JI,none:e=>JI.none(e)},uU=(e,n)=>vu(e,n,St),vu=(e,n,o)=>Ka(cr(e),r=>Hi(r,n)?o(r)?[r]:[]:vu(r,n,o)),QI=(e,n,o=Ke)=>{if(o(n))return Z.none();if(fn(e,Jn(n)))return Z.some(n);const r=i=>Hi(i,"table")||o(i);return Nu(n,e.join(","),r)},eF=(e,n)=>QI(["td","th"],e,n),cY=e=>uU(e,"th,td"),dU=(e,n)=>hl(e,"table",n),tF=(e,n,o,r,i=St)=>{const u=r===1;if(!u&&o<=0)return HS.first(e[0]);if(u&&o>=e.length-1)return HS.last(e[e.length-1]);{const g=o+r,y=e[g];return i(y)?HS.middle(n,y):tF(e,n,g,r,i)}},mU=(e,n)=>dU(e,n).bind(o=>{const r=cY(o);return Jr(r,u=>oo(e,u)).map(u=>({index:u,all:r}))}),fU=(e,n,o)=>mU(e,o).fold(()=>HS.none(e),i=>tF(i.all,e,i.index,1,n)),i_=(e,n,o)=>mU(e,o).fold(()=>HS.none(),i=>tF(i.all,e,i.index,-1,n)),gU=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),D3=(e,n)=>Ka(n,o=>{const r=gU(Jf(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),nF=(e,n,o)=>ss(e,(r,i)=>r.fold(()=>Z.some(i),u=>{const g=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),y=Math.sqrt(Math.abs(i.x-n)+Math.abs(i.y-o));return Z.some(y<g?i:u)}),Z.none()),R3=(e,n,o,r,i)=>{const u=Wr(se.fromDom(o),"td,th,caption").map(y=>y.dom),g=Zt(D3(e,u),y=>n(y,i));return nF(g,r,i).map(y=>y.cell)},oF=e=>e.bottom,hU=e=>e.top,pU=(e,n)=>e.y<n,bU=(e,n)=>e.y>n,vU=Ge(R3,oF,pU),c_=Ge(R3,hU,bU),yU=(e,n)=>js(n.getClientRects()).bind(o=>vU(e,o.left,o.top)).bind(o=>o3(b9(o),n)),wU=(e,n)=>Pi(n.getClientRects()).bind(o=>c_(e,o.left,o.top)).bind(o=>o3(qT(o),n)),CU=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),M3=e=>e.breakType===lm.Wrap&&e.positions.length===0,SU=e=>e.breakType===lm.Br&&e.positions.length===1,sF=(e,n,o)=>{const r=e(n,o);return M3(r)||!Mo(o.getNode())&&SU(r)?!CU(e,n,r):r.breakAt.isNone()},rF=Ge(sF,Ec),xU=Ge(sF,PS),EU=(e,n,o)=>{const r=Ae.fromRangeStart(n);return Lh(!e,o).exists(i=>i.isEqual(r))},TU=(e,n,o,r)=>{const i=e.selection.getRng(),u=n?1:-1;return L1()&&EU(n,i,o)?(mf(u,e,o,!n,!1).each(g=>{ff(e,g)}),!0):!1},_U=(e,n,o)=>yU(n,o).orThunk(()=>js(o.getClientRects()).bind(r=>uI(dI(e,Ae.before(n)),r.left))).getOr(Ae.before(n)),kU=(e,n,o)=>wU(n,o).orThunk(()=>js(o.getClientRects()).bind(r=>uI(hp(e,Ae.after(n)),r.left))).getOr(Ae.after(n)),aF=(e,n)=>{const o=n.getNode(e);return Bu(o)?Z.some(o):Z.none()},N3=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?Vc:lr,i=VI(n,se.fromDom(o),r);ff(n,i)})},iF=(e,n,o)=>{const r=aF(!!n,o),i=n===!1;r.fold(()=>ff(e,o.toRange()),u=>Lh(i,e.getBody()).filter(g=>g.isEqual(o)).fold(()=>ff(e,o.toRange()),g=>N3(n,e,u)))},cF=(e,n,o,r)=>{const i=e.selection.getRng(),u=Ae.fromRangeStart(i),g=e.getBody();if(!n&&rF(r,u)){const y=_U(g,o,u);return iF(e,n,y),!0}else if(n&&xU(r,u)){const y=kU(g,o,u);return iF(e,n,y),!0}else return!1},lF=(e,n,o)=>Z.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>Z.from(e.dom.getParent(r,"table")).map(i=>o(e,n,i,r))).getOr(!1),uF=(e,n)=>lF(e,n,TU),P3=(e,n)=>lF(e,n,cF),OU=e=>{const n=tm.exact(e,0,e,0);return DA(n)},dF=(e,n,o)=>o.fold(Z.none,Z.none,(r,i)=>Y8(i).map(u=>OU(u)),r=>(e.execCommand("mceTableInsertRowAfter"),mF(e,n,r))),mF=(e,n,o)=>dF(e,n,fU(o,xn)),Br=(e,n,o)=>dF(e,n,i_(o,xn)),fF=(e,n)=>{const o=["table","li","dl"],r=se.fromDom(e.getBody()),i=y=>{const x=Jn(y);return oo(y,r)||fn(o,x)},u=e.selection.getRng(),g=se.fromDom(n?u.endContainer:u.startContainer);return eF(g,i).map(y=>(dU(y,i).each(I=>{e.model.table.clearSelectedCells(I.dom)}),e.selection.collapse(!n),(n?mF:Br)(e,i,y).each(I=>{e.selection.setRng(I)}),!0)).getOr(!1)},AU=(e,n,o)=>{const r=xt.os.isMacOS()||xt.os.isiOS();ry([{keyCode:kt.RIGHT,action:un(_3,e,!0)},{keyCode:kt.LEFT,action:un(_3,e,!1)},{keyCode:kt.UP,action:un(o_,e,!1)},{keyCode:kt.DOWN,action:un(o_,e,!0)},...r?[{keyCode:kt.UP,action:un(s_,e,!1),metaKey:!0,shiftKey:!0},{keyCode:kt.DOWN,action:un(s_,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:kt.RIGHT,action:un(uF,e,!0)},{keyCode:kt.LEFT,action:un(uF,e,!1)},{keyCode:kt.UP,action:un(P3,e,!1)},{keyCode:kt.DOWN,action:un(P3,e,!0)},{keyCode:kt.UP,action:un(P3,e,!1)},{keyCode:kt.UP,action:un(qI,e,!1)},{keyCode:kt.DOWN,action:un(qI,e,!0)},{keyCode:kt.RIGHT,action:un(YI,e,!0)},{keyCode:kt.LEFT,action:un(YI,e,!1)},{keyCode:kt.UP,action:un(XI,e,!1)},{keyCode:kt.DOWN,action:un(XI,e,!0)},{keyCode:kt.RIGHT,action:un(k9,e,n,!0)},{keyCode:kt.LEFT,action:un(k9,e,n,!1)},{keyCode:kt.RIGHT,ctrlKey:!r,altKey:r,action:un(A9,e,n)},{keyCode:kt.LEFT,ctrlKey:!r,altKey:r,action:un(D9,e,n)},{keyCode:kt.UP,action:un(r_,e,!1)},{keyCode:kt.DOWN,action:un(r_,e,!0)}],o).each(i=>{o.preventDefault()})},DU=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||AU(e,n,o)})},dd=(e,n)=>({container:e,offset:n}),ay=Zo.DOM,zS=e=>n=>e===n?-1:0,yp=e=>n=>e.isBlock(n)||fn(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",VS=(e,n,o)=>{if(nt(e)&&n>=0)return Z.some(dd(e,n));{const r=Lm(ay);return Z.from(r.backwards(e,n,zS(e),o)).map(i=>dd(i.container,i.container.data.length))}},gF=(e,n,o)=>{if(nt(e)&&n>=e.length)return Z.some(dd(e,n));{const r=Lm(ay);return Z.from(r.forwards(e,n,zS(e),o)).map(i=>dd(i.container,0))}},US=(e,n,o)=>{if(!nt(e))return Z.none();const r=e.data;if(n>=0&&n<=r.length)return Z.some(dd(e,n));{const i=Lm(ay);return Z.from(i.backwards(e,n,zS(e),o)).bind(u=>{const g=u.container.data;return US(u.container,n+g.length,o)})}},l_=(e,n,o)=>{if(!nt(e))return Z.none();const r=e.data;if(n<=r.length)return Z.some(dd(e,n));{const i=Lm(ay);return Z.from(i.forwards(e,n,zS(e),o)).bind(u=>l_(u.container,n-r.length,o))}},WS=(e,n,o,r,i)=>{const u=Lm(e,yp(e));return Z.from(u.backwards(n,o,r,i))},hF=e=>e.collapsed&&nt(e.startContainer),ZS=e=>cc(e.toString().replace(/\u00A0/g," ")),jS=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,Rb=(e,n)=>e.substring(n.length),GS=(e,n,o)=>{let r;const i=o.charAt(0);for(r=n-1;r>=0;r--){const u=e.charAt(r);if(jS(u))return Z.none();if(i===u&&br(e,o,r,n))break}return Z.some(r)},md=(e,n,o,r=0)=>{if(!hF(n))return Z.none();const i={text:"",offset:0},u=(y,x,A)=>(i.text=A+i.text,i.offset+=x,GS(i.text,i.offset,o).getOr(x)),g=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return WS(e,n.startContainer,n.startOffset,u,g).bind(y=>{const x=n.cloneRange();if(x.setStart(y.container,y.offset),x.setEnd(n.endContainer,n.endOffset),x.collapsed)return Z.none();const A=ZS(x);return A.lastIndexOf(o)!==0||Rb(A,o).length<r?Z.none():Z.some({text:Rb(A,o),range:x,trigger:o})})},iy=(e,n,o,r=0)=>e7(se.fromDom(n.startContainer)).fold(()=>md(e,n,o,r),i=>{const u=e.createRng();u.selectNode(i.dom);const g=ZS(u);return Z.some({range:u,text:Rb(g,o),trigger:o})}),pF=e=>e.nodeType===Af,bF=e=>e.nodeType===Ic,vF=e=>{if(pF(e))return dd(e,e.data.length);{const n=e.childNodes;return n.length>0?vF(n[n.length-1]):dd(e,n.length)}},B3=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?B3(o[n],0):o.length>0&&bF(e)&&o.length===n?vF(o[o.length-1]):dd(e,n)},RU=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return WS(e,n.container,n.offset,(i,u)=>u===0?-1:u,r).filter(i=>{const u=i.container.data.charAt(i.offset-1);return!jS(u)}).isSome()},MU=e=>n=>{const o=B3(n.startContainer,n.startOffset);return!RU(e,o)},qS=(e,n,o)=>Rc(o.triggers,r=>iy(e,n,r)),NU=(e,n)=>{const o=n(),r=e.selection.getRng();return qS(e.dom,r,o).bind(i=>yF(e,n,i))},yF=(e,n,o,r={})=>{var i;const u=n(),y=(i=e.selection.getRng().startContainer.nodeValue)!==null&&i!==void 0?i:"",x=Zt(u.lookupByTrigger(o.trigger),I=>o.text.length>=I.minChars&&I.matches.getOrThunk(()=>MU(e.dom))(o.range,y,o.text));if(x.length===0)return Z.none();const A=Promise.all(Wt(x,I=>I.fetch(o.text,I.maxResults,r).then(z=>({matchText:o.text,items:z,columns:I.columns,onAction:I.onAction,highlightOn:I.highlightOn}))));return Z.some({lookupData:A,context:o})};var um;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(um||(um={}));const $3=(e,n,o)=>e.stype===um.Error?n(e.serror):o(e.svalue),PU=e=>{const n=[],o=[];return Ie(e,r=>{$3(r,i=>o.push(i),i=>n.push(i))}),{values:n,errors:o}},BU=(e,n)=>e.stype===um.Error?{stype:um.Error,serror:n(e.serror)}:e,$U=(e,n)=>e.stype===um.Value?{stype:um.Value,svalue:n(e.svalue)}:e,IU=(e,n)=>e.stype===um.Value?n(e.svalue):e,FU=(e,n)=>e.stype===um.Error?n(e.serror):e,wF=e=>({stype:um.Value,svalue:e}),CF=e=>({stype:um.Error,serror:e}),Za={fromResult:e=>e.fold(CF,wF),toResult:e=>$3(e,yi.error,yi.value),svalue:wF,partition:PU,serror:CF,bind:IU,bindError:FU,map:$U,mapError:BU,fold:$3},u_=e=>qe(e)&&Ar(e).length>100?" removed due to size":JSON.stringify(e,null,2),SF=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:gt("... (only showing first ten failures)")}]):e;return Wt(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},KS=(e,n)=>Za.serror([{path:e,getErrorInfo:n}]),LU=(e,n,o)=>KS(e,()=>'Could not find valid *required* value for "'+n+'" in '+u_(o)),HU=(e,n)=>KS(e,()=>'Choice schema did not contain choice key: "'+n+'"'),zU=(e,n,o)=>KS(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+u_(n)),VU=(e,n)=>KS(e,gt(n)),xF=(e,n,o,r)=>Fo(o,r).fold(()=>zU(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),UU=(e,n)=>({extract:(i,u)=>Fo(u,e).fold(()=>HU(i,e),y=>xF(i,u,n,y)),toString:()=>"chooseOn("+e+"). Possible values: "+Ar(n)}),EF=(e,n)=>n,WU=(e,n)=>Sn(e)&&Sn(n)?YS(e,n):n,I3=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const i=n[r];for(const u in i)an(i,u)&&(o[u]=e(o[u],i[u]))}return o},YS=I3(WU),ZU=I3(EF),TF=()=>({tag:"required",process:{}}),jU=e=>({tag:"defaultedThunk",process:e}),F3=e=>jU(gt(e)),GU=()=>({tag:"option",process:{}}),qU=(e,n)=>e.length>0?Za.svalue(YS(n,ZU.apply(void 0,e))):Za.svalue(n),L3=e=>R(Za.serror,pm)(e),_F={consolidateObj:(e,n)=>{const o=Za.partition(e);return o.errors.length>0?L3(o.errors):qU(o.values,n)},consolidateArr:e=>{const n=Za.partition(e);return n.errors.length>0?L3(n.errors):Za.svalue(n.values)}},KU=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),YU=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),kF=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},d_=e=>{const n=(r,i)=>Za.bindError(e(i),u=>VU(r,u)),o=gt("val");return{extract:n,toString:o}},OF=d_(Za.svalue),XU=(e,n,o,r)=>Fo(n,o).fold(()=>LU(e,o,n),r),AF=(e,n,o,r)=>{const i=Fo(e,n).getOrThunk(()=>o(e));return r(i)},JU=(e,n,o)=>o(Fo(e,n)),QU=(e,n,o,r)=>{const i=Fo(e,n).map(u=>u===!0?o(e):u);return r(i)},eW=(e,n,o,r,i)=>{const u=y=>i.extract(n.concat([r]),y),g=y=>y.fold(()=>Za.svalue(Z.none()),x=>{const A=i.extract(n.concat([r]),x);return Za.map(A,Z.some)});switch(e.tag){case"required":return XU(n,o,r,u);case"defaultedThunk":return AF(o,r,e.process,u);case"option":return JU(o,r,g);case"defaultedOptionThunk":return QU(o,r,e.process,g);case"mergeWithThunk":return AF(o,r,gt({}),y=>{const x=YS(e.process(o),y);return u(x)})}},tW=(e,n,o)=>{const r={},i=[];for(const u of o)kF(u,(g,y,x,A)=>{const I=eW(x,e,n,g,A);Za.fold(I,F=>{i.push(...F)},F=>{r[y]=F})},(g,y)=>{r[g]=y(n)});return i.length>0?Za.serror(i):Za.svalue(r)},H3=e=>({extract:(r,i)=>tW(r,i,e),toString:()=>`obj{
`+Wt(e,i=>kF(i,(u,g,y,x)=>u+" -> "+x.toString(),(u,g)=>"state("+u+")")).join(`
`)+"}"}),DF=e=>({extract:(r,i)=>{const u=Wt(i,(g,y)=>e.extract(r.concat(["["+y+"]"]),g));return _F.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),fY=e=>d_(n=>e(n).fold(Za.serror,Za.svalue)),nW=(e,n,o)=>{const r=n.extract([e],o);return Za.mapError(r,i=>({input:o,errors:i}))},m_=(e,n,o)=>Za.toResult(nW(e,n,o)),RF=e=>`Errors: 
`+SF(e.errors).join(`
`)+`

Input object: `+u_(e.input),z3=(e,n)=>UU(e,no(n,H3)),oW=gt(OF),XS=(e,n)=>d_(o=>{const r=typeof o;return e(o)?Za.svalue(o):Za.serror(`Expected type: ${n} but got: ${r}`)}),MF=XS(Yn,"number"),f_=XS(ee,"string"),sW=XS(yt,"boolean"),V3=XS(ue,"function"),cy=KU,NF=YU,U3=e=>fY(n=>fn(e,n)?yi.value(n):yi.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),PF=(e,n)=>cy(e,e,TF(),n),BF=e=>PF(e,f_),$F=e=>PF(e,V3),IF=(e,n)=>cy(e,e,TF(),DF(n)),W3=(e,n)=>cy(e,e,GU(),n),g_=e=>W3(e,f_),rW=e=>W3(e,V3),aW=(e,n)=>cy(e,e,F3(n),oW()),ly=(e,n,o)=>cy(e,e,F3(n),o),$r=(e,n)=>ly(e,n,MF),gf=(e,n)=>ly(e,n,f_),FF=(e,n,o)=>ly(e,n,U3(o)),LF=(e,n)=>ly(e,n,sW),Z3=(e,n)=>ly(e,n,V3),iW=(e,n,o)=>ly(e,n,DF(o)),cW=BF("type"),lW=$F("fetch"),h_=$F("onAction"),uy=Z3("onSetup",()=>Rt),gY=g_("text"),uW=g_("icon"),dW=g_("tooltip"),dm=g_("label"),mW=LF("active",!1),fW=LF("enabled",!0),j3=LF("primary",!1),gW=e=>aW("columns",e),Mb=e=>gf("type",e),HF=H3([cW,BF("trigger"),$r("minChars",1),gW(1),$r("maxResults",10),rW("matches"),lW,h_,iW("highlightOn",[],f_)]),hW=e=>m_("Autocompleter",HF,{trigger:e.ch,...e}),G3=[fW,dW,uW,gY,uy],zF=[mW].concat(G3),VF=[Z3("predicate",Ke),FF("scope","node",["node","editor"]),FF("position","selection",["node","selection","line"])],UF=G3.concat([Mb("contextformbutton"),j3,h_,NF("original",Ro)]),q3=zF.concat([Mb("contextformbutton"),j3,h_,NF("original",Ro)]),K3=G3.concat([Mb("contextformbutton")]),Y3=zF.concat([Mb("contextformtogglebutton")]),pW=z3("type",{contextformbutton:UF,contextformtogglebutton:q3});H3([Mb("contextform"),Z3("initValue",gt("")),dm,IF("commands",pW),W3("launch",z3("type",{contextformbutton:K3,contextformtogglebutton:Y3}))].concat(VF));const bW=e=>{const n=e.ui.registry.getAll().popups,o=no(n,g=>hW(g).fold(y=>{throw new Error(RF(y))},Ro)),r=Il($i(o,g=>g.trigger)),i=sl(o);return{dataset:o,triggers:r,lookupByTrigger:g=>Zt(i,y=>y.trigger===g)}},vW=(e,n)=>{const o=$v(n.load,50);e.on("keypress compositionend",r=>{r.which!==27&&o.throttle()}),e.on("keydown",r=>{const i=r.which;i===8?o.throttle():i===27&&n.cancelIfNecessary()}),e.on("remove",o.cancel)},yW=e=>{const n=Fm(),o=Ss(!1),r=n.isSet,i=()=>{r()&&($z(e),$C(e),o.set(!1),n.clear())},u=A=>{r()||(Bz(e,A.range),n.set({trigger:A.trigger,matchLength:A.text.length}))},g=Fl(()=>bW(e)),y=A=>n.get().map(I=>iy(e.dom,e.selection.getRng(),I.trigger).bind(F=>yF(e,g,F,A))).getOrThunk(()=>NU(e,g)),x=A=>{y(A).fold(i,I=>{u(I.context),I.lookupData.then(F=>{n.get().map(z=>{const X=I.context;z.trigger===X.trigger&&(X.text.length-z.matchLength>=10?i():(n.set({...z,matchLength:X.text.length}),o.get()?aE(e,{lookupData:F}):(o.set(!0),BC(e,{lookupData:F}))))})})})};e.addCommand("mceAutocompleterReload",(A,I)=>{const F=qe(I)?I.fetchOptions:{};x(F)}),e.addCommand("mceAutocompleterClose",i),vW(e,{cancelIfNecessary:i,load:x})},ZF=es().browser.isSafari(),jF=e=>Lu(se.fromDom(e)),X3=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},p_=(e,n)=>Z.from(e.getParent(n.container(),"details")),b_=(e,n)=>p_(e,n).isSome(),wW=(e,n)=>{const o=Z.from(e.getParent(n.startContainer,"details")),r=Z.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const i=o.bind(u=>Z.from(e.select("summary",u)[0]));return Z.some({startSummary:i,startDetails:o,endDetails:r})}else return Z.none()},CW=(e,n)=>ai(n).exists(o=>o.isEqual(e)),SW=(e,n)=>Sl(n).exists(o=>Mo(o.getNode())&&Si(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),xW=(e,n)=>n.startSummary.exists(o=>CW(e,o)),EW=(e,n)=>n.startSummary.exists(o=>SW(e,o)),GF=(e,n)=>n.startDetails.exists(o=>Si(o,e).forall(r=>n.startSummary.exists(i=>!i.contains(e.container())&&i.contains(r.container())))),J3=(e,n,o)=>o.startDetails.exists(r=>Va(e,n).forall(i=>!r.contains(i.container()))),Q3=(e,n)=>{const o=n.getNode();Dt(o)||e.selection.setCursorLocation(o,n.offset())},eR=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const i=e.dom.select("summary",r)[0];i&&(o?ai(i):Sl(i)).each(g=>Q3(e,g))}else Q3(e,n)},TW=(e,n)=>{const o=x=>x.contains(e.startContainer),r=x=>x.contains(e.endContainer),i=n.startSummary.exists(o),u=n.startSummary.exists(r),g=n.startDetails.forall(x=>n.endDetails.forall(A=>x!==A));return(i||u)&&!(i&&u)||g},qF=(e,n,o)=>{const{dom:r,selection:i}=e,u=e.getBody();if(o==="character"){const g=Ae.fromRangeStart(i.getRng()),y=r.getParent(g.container(),r.isBlock),x=p_(r,g),A=y&&r.isEmpty(y),I=ae(y==null?void 0:y.previousSibling),F=ae(y==null?void 0:y.nextSibling);return A&&(n?F:I)&&qd(!n,u,g).exists(te=>b_(r,te)&&!Of(x,p_(r,te)))?!0:qd(n,u,g).fold(Ke,z=>{const X=p_(r,z);if(b_(r,z)&&!Of(x,X)){if(n||eR(e,z,!1),y&&A){if(n&&I)return!0;if(!n&&F)return!0;eR(e,z,n),e.dom.remove(y)}return!0}else return!1})}else return!1},_W=(e,n,o,r)=>{const u=e.selection.getRng(),g=Ae.fromRangeStart(u),y=e.getBody();return r==="selection"?TW(u,n):o?EW(g,n)||J3(y,g,n):xW(g,n)||GF(g,n)},v_=(e,n,o)=>wW(e.dom,e.selection.getRng()).fold(()=>qF(e,n,o),r=>_W(e,r,n,o)||qF(e,n,o)),KF=(e,n,o)=>{const r=e.selection,i=r.getNode(),u=r.getRng(),g=Ae.fromRangeStart(u);return Vi(i)?(o==="selection"&&X3(u,i)||QA(n,g,i)?jF(i):e.undoManager.transact(()=>{const y=r.getSel();let{anchorNode:x,anchorOffset:A,focusNode:I,focusOffset:F}=y??{};const z=()=>{Te(x)&&Te(A)&&Te(I)&&Te(F)&&(y==null||y.setBaseAndExtent(x,A,I,F))},X=()=>{x=y==null?void 0:y.anchorNode,A=y==null?void 0:y.anchorOffset,I=y==null?void 0:y.focusNode,F=y==null?void 0:y.focusOffset},te=(ne,ge)=>{Ie(ne.childNodes,be=>{q1(be)&&ge.appendChild(be)})},K=e.dom.create("span",{"data-mce-bogus":"1"});te(i,K),i.appendChild(K),z(),(o==="word"||o==="line")&&(y==null||y.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&X3(r.getRng(),K)?jF(i):(e.execCommand(n?"ForwardDelete":"Delete"),X(),te(K,i),z()),e.dom.remove(K)}),!0):!1},wp=(e,n,o)=>v_(e,n,o)||ZF&&KF(e,n,o)?Z.some(Rt):Z.none(),YF=e=>(n,o,r={})=>{const i=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:i,currentTarget:i,eventPhase:Event.AT_TARGET,originalTarget:i,explicitOriginalTarget:i,isTrusted:!1,srcElement:i,cancelable:!1,preventDefault:Rt,inputType:o},g=ih(new InputEvent(e));return n.dispatch(e,{...g,...u,...r})},JS=YF("input"),tR=YF("beforeinput"),kW=es(),OW=kW.os,XF=OW.isMacOS()||OW.isiOS(),AW=kW.browser.isFirefox(),DW=(e,n,o)=>{const r=o.keyCode===kt.BACKSPACE?"deleteContentBackward":"deleteContentForward",i=e.selection.isCollapsed(),u=i?"character":"selection",g=y=>i?y?"word":"line":"selection";A3([{keyCode:kt.BACKSPACE,action:un(II,e)},{keyCode:kt.BACKSPACE,action:un(DS,e,!1)},{keyCode:kt.DELETE,action:un(DS,e,!0)},{keyCode:kt.BACKSPACE,action:un(KD,e,!1)},{keyCode:kt.DELETE,action:un(KD,e,!0)},{keyCode:kt.BACKSPACE,action:un(QT,e,n,!1)},{keyCode:kt.DELETE,action:un(QT,e,n,!0)},{keyCode:kt.BACKSPACE,action:un(FE,e,!1)},{keyCode:kt.DELETE,action:un(FE,e,!0)},{keyCode:kt.BACKSPACE,action:un(wp,e,!1,u)},{keyCode:kt.DELETE,action:un(wp,e,!0,u)},...XF?[{keyCode:kt.BACKSPACE,altKey:!0,action:un(wp,e,!1,g(!0))},{keyCode:kt.DELETE,altKey:!0,action:un(wp,e,!0,g(!0))},{keyCode:kt.BACKSPACE,metaKey:!0,action:un(wp,e,!1,g(!1))}]:[{keyCode:kt.BACKSPACE,ctrlKey:!0,action:un(wp,e,!1,g(!0))},{keyCode:kt.DELETE,ctrlKey:!0,action:un(wp,e,!0,g(!0))}],{keyCode:kt.BACKSPACE,action:un(JD,e,!1)},{keyCode:kt.DELETE,action:un(JD,e,!0)},{keyCode:kt.BACKSPACE,action:un(w3,e,!1)},{keyCode:kt.DELETE,action:un(w3,e,!0)},{keyCode:kt.BACKSPACE,action:un(VT,e,!1)},{keyCode:kt.DELETE,action:un(VT,e,!0)},{keyCode:kt.BACKSPACE,action:un(GD,e,!1)},{keyCode:kt.DELETE,action:un(GD,e,!0)},{keyCode:kt.BACKSPACE,action:un(v3,e,!1)},{keyCode:kt.DELETE,action:un(v3,e,!0)}],o).filter(y=>e.selection.isEditable()).each(y=>{o.preventDefault(),tR(e,r).isDefaultPrevented()||(y(),JS(e,r))})},hY=(e,n,o)=>ry([{keyCode:kt.BACKSPACE,action:un(J$,e)},{keyCode:kt.DELETE,action:un(J$,e)},...XF?[{keyCode:kt.BACKSPACE,altKey:!0,action:un($S,e)},{keyCode:kt.DELETE,altKey:!0,action:un($S,e)},...o?[{keyCode:AW?224:91,action:un($S,e)}]:[]]:[{keyCode:kt.BACKSPACE,ctrlKey:!0,action:un($S,e)},{keyCode:kt.DELETE,ctrlKey:!0,action:un($S,e)}]],n),RW=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===kt.BACKSPACE,r.isDefaultPrevented()||DW(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||hY(e,r,o),o=!1})},Xs=e=>{for(;e;){if(Mt(e)||nt(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},Cp=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=Xs(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(so),n.firstChild)}const i=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new Wo(n,n);let g=n,y;for(;y=u.current();){if(nt(y)){i.setStart(y,0),i.setEnd(y,0);break}if(r[y.nodeName.toLowerCase()]){i.setStartBefore(y),i.setEndBefore(y);break}g=y,y=u.next()}y||(i.setStart(g,0),i.setEnd(g,0))}else Mo(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)):(i.setStart(n,0),i.setEnd(n,0));e.selection.setRng(i),db(e,i)},Dl=(e,n)=>{const o=e.getRoot();let r,i=n;for(;i!==o&&i&&e.getContentEditable(i)!=="false";){if(e.getContentEditable(i)==="true"){r=i;break}i=i.parentNode}return i!==o?r:o},y_=e=>Z.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),JF=e=>y_(e).fold(gt(""),n=>n.nodeName.toUpperCase()),MW=e=>y_(e).filter(n=>Iu(se.fromDom(n))).isSome(),dy=e=>{e.innerHTML='<br data-mce-bogus="1">'},nR=(e,n,o)=>{const r=e.dom;Z.from(o.style).map(r.parseStyle).each(x=>{const I={...Zg(se.fromDom(n)),...x};r.setStyles(n,I)});const i=Z.from(o.class).map(x=>x.split(/\s+/)),u=Z.from(n.className).map(x=>Zt(x.split(/\s+/),A=>A!==""));Dr(i,u,(x,A)=>{const I=Zt(A,z=>!fn(x,z)),F=[...x,...I];r.setAttrib(n,"class",F.join(" "))});const g=["style","class"],y=Uo(o,(x,A)=>!fn(g,A));r.setAttribs(n,y)},my=(e,n)=>{if(Ha(e).toLowerCase()===n.tagName.toLowerCase()){const r=R1(e);nR(e,n,r)}},oR=(e,n,o,r,i=!0,u,g)=>{const y=e.dom,x=e.schema,A=Ha(e),I=o?o.nodeName.toUpperCase():"";let F=n;const z=x.getTextInlineElements();let X;u||I==="TABLE"||I==="HR"?X=y.create(u||A,g||{}):X=o.cloneNode(!1);let te=X;if(!i)y.setAttrib(X,"style",null),y.setAttrib(X,"class",null);else do if(z[F.nodeName]){if(gc(F)||hc(F))continue;const K=F.cloneNode(!1);y.setAttrib(K,"id",""),X.hasChildNodes()?(K.appendChild(X.firstChild),X.appendChild(K)):(te=K,X.appendChild(K))}while((F=F.parentNode)&&F!==r);return my(e,X),dy(te),X},NW=(e,n)=>e.dom.getParent(n,We),PW=(e,n,o)=>{let r=n;for(;r&&r!==e&&ae(r.nextSibling);){const i=r.parentElement;if(!i||!o(i))return We(i);r=i}return!1},BW=(e,n,o)=>!n&&o.nodeName.toLowerCase()===Ha(e)&&e.dom.isEmpty(o)&&PW(e.getBody(),o,r=>an(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),$W=(e,n,o)=>{var r,i,u;const g=n(Ha(e)),y=NW(e,o);y&&(e.dom.insertAfter(g,y),Cp(e,g),((u=(i=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||i===void 0?void 0:i.length)!==null&&u!==void 0?u:0)>1&&e.dom.remove(o))},IW=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,QF=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},eL=(e,n)=>{const o=e==null?void 0:e.parentNode;return Te(o)&&o.nodeName===n},tL=e=>Te(e)&&/^(OL|UL|LI)$/.test(e.nodeName),sR=e=>Te(e)&&/^(LI|DT|DD)$/.test(e.nodeName),FW=e=>tL(e)&&tL(e.parentNode),w_=e=>{const n=e.parentNode;return sR(n)?n:e},QS=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!Mt(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},rR=e=>ss($i(Zg(se.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),LW=(e,n,o,r,i)=>{const u=e.dom,g=e.selection.getRng(),y=o.parentNode;if(o===e.getBody()||!y)return;FW(o)&&(i="LI");const x=sR(r)?rR(r):void 0;let A=sR(r)&&x?n(i,{style:rR(r)}):n(i);if(QS(o,r,!0)&&QS(o,r,!1))if(eL(o,"LI")){const I=w_(o);u.insertAfter(A,I),QF(o)?u.remove(I):u.remove(o)}else u.replace(A,o);else if(QS(o,r,!0))eL(o,"LI")?(u.insertAfter(A,w_(o)),A.appendChild(u.doc.createTextNode(" ")),A.appendChild(o)):y.insertBefore(A,o),u.remove(r);else if(QS(o,r,!1))u.insertAfter(A,w_(o)),u.remove(r);else{o=w_(o);const I=g.cloneRange();I.setStartAfter(r),I.setEndAfter(o);const F=I.extractContents();if(i==="LI"&&IW(F,"LI")){const z=Zt(Wt(A.children,se.fromDom),yo(Li("br")));A=F.firstChild,u.insertAfter(F,o),Ie(z,X=>Nf(se.fromDom(A),X)),x&&A.setAttribute("style",x)}else u.insertAfter(F,o),u.insertAfter(A,o);u.remove(r)}Cp(e,A)},HW=e=>{Ie(jl(se.fromDom(e),Vr),n=>{const o=n.dom;o.nodeValue=cc(o.data)})},pY=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},aR=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),iR=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,cR=(e,n)=>Te(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",zW=(e,n,o)=>{var r;const i=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;Mt(u)&&!n[u.nodeName.toLowerCase()]&&i.push(u)}let g=i.length;for(;g--;)u=i[g],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||aR(e,u))&&e.remove(u)},C_=(e,n,o)=>nt(n)?e?o===1&&n.data.charAt(o-1)===jr?0:o:o===n.data.length-1&&n.data.charAt(o)===jr?n.data.length:o:o,VW=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,C_(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,C_(!1,e.endContainer,e.endOffset)),n},nL=e=>{let n=e;do nt(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},UW=(e,n,o,r,i)=>{var u,g;const y=e.dom,x=(u=Dl(y,r))!==null&&u!==void 0?u:y.getRoot();let A=y.getParent(r,y.isBlock);if(!A||!cR(y,A)){if(A=A||x,!A.hasChildNodes()){const X=y.create(n);return my(e,X),A.appendChild(X),o.setStart(X,0),o.setEnd(X,0),X}let I=r;for(;I&&I.parentNode!==A;)I=I.parentNode;let F;for(;I&&!y.isBlock(I);)F=I,I=I.previousSibling;const z=(g=F==null?void 0:F.parentElement)===null||g===void 0?void 0:g.nodeName;if(F&&z&&e.schema.isValidChild(z,n.toLowerCase())){const X=F.parentNode,te=y.create(n);for(my(e,te),X.insertBefore(te,F),I=F;I&&!y.isBlock(I);){const K=I.nextSibling;te.appendChild(I),I=K}o.setStart(r,i),o.setEnd(r,i)}}return r},WW=(e,n)=>{n.normalize();const o=n.lastChild;(!o||Mt(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},bY=(e,n)=>{const o=gx(e);return Ht(n)?!1:ee(o)?fn(at.explode(o),n.nodeName.toLowerCase()):o},oL={insert:(e,n)=>{let o,r,i,u,g=!1;const y=e.dom,x=e.schema,A=x.getNonEmptyElements(),I=e.selection.getRng(),F=Ha(e),z=se.fromDom(I.startContainer),X=Od(z,I.startOffset),te=X.exists(Qe=>fs(Qe)&&!xn(Qe)),K=I.collapsed&&te,ne=(Qe,Et)=>oR(e,o,st,Ze,CO(e),Qe,Et),ge=Qe=>{const Et=C_(Qe,o,r);if(nt(o)&&(Qe?Et>0:Et<o.data.length))return!1;if(o.parentNode===st&&g&&!Qe||Qe&&Mt(o)&&o===st.firstChild)return!0;if(iR(o,"TABLE")||iR(o,"HR"))return g&&!Qe||!g&&Qe;const Ut=new Wo(o,st);nt(o)&&(Qe&&Et===0?Ut.prev():!Qe&&Et===o.data.length&&Ut.next());let Cn;for(;Cn=Ut.current();){if(Mt(Cn)){if(!Cn.getAttribute("data-mce-bogus")){const Rn=Cn.nodeName.toLowerCase();if(A[Rn]&&Rn!=="br")return!1}}else if(nt(Cn)&&!Rm(Cn.data))return!1;Qe?Ut.prev():Ut.next()}return!0},be=()=>{let Qe;return/^(H[1-6]|PRE|FIGURE)$/.test(i)&&Ct!=="HGROUP"?Qe=ne(F):Qe=ne(),bY(e,u)&&cR(y,u)&&y.isEmpty(st,void 0,{includeZwsp:!0})?Qe=y.split(u,st):y.insertAfter(Qe,st),Cp(e,Qe),Qe};k(y,I).each(Qe=>{I.setStart(Qe.startContainer,Qe.startOffset),I.setEnd(Qe.endContainer,Qe.endOffset)}),o=I.startContainer,r=I.startOffset;const ve=!!(n&&n.shiftKey),Se=!!(n&&n.ctrlKey);Mt(o)&&o.hasChildNodes()&&!K&&(g=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,g&&nt(o)?r=o.data.length:r=0);const Ze=Dl(y,o);if(!Ze||pY(e,o))return;ve||(o=UW(e,F,I,o,r));let st=y.getParent(o,y.isBlock)||y.getRoot();u=Te(st==null?void 0:st.parentNode)?y.getParent(st.parentNode,y.isBlock):null,i=st?st.nodeName.toUpperCase():"";const Ct=u?u.nodeName.toUpperCase():"";if(Ct==="LI"&&!Se){const Qe=u;st=Qe,u=Qe.parentNode,i=Ct}if(Mt(u)&&BW(e,ve,st))return $W(e,ne,st);if(/^(LI|DT|DD)$/.test(i)&&Mt(u)&&y.isEmpty(st)){LW(e,ne,u,st,F);return}if(!K&&(st===e.getBody()||!cR(y,st)))return;const Fe=st.parentNode;let Me;if(K)Me=ne(F),X.fold(()=>{Ks(z,se.fromDom(Me))},Qe=>{lr(Qe,se.fromDom(Me))}),e.selection.setCursorLocation(Me,0);else if(u1(st))Me=Nd(st),y.isEmpty(st)&&dy(st),my(e,Me),Cp(e,Me);else if(ge(!1))Me=be();else if(ge(!0)&&Fe){Me=Fe.insertBefore(ne(),st);const Qe=av(se.fromDom(I.startContainer))&&I.collapsed;Cp(e,iR(st,"HR")||Qe?Me:st)}else{const Qe=VW(I).cloneRange();Qe.setEndAfter(st);const Et=Qe.extractContents();HW(Et),nL(Et),Me=Et.firstChild,y.insertAfter(Et,st),zW(y,A,Me),WW(y,st),y.isEmpty(st)&&dy(st),Me.normalize(),y.isEmpty(Me)?(y.remove(Me),be()):(my(e,Me),Cp(e,Me))}y.setAttrib(Me,"id",""),e.dispatch("NewBlock",{newBlock:Me})},fakeEventName:"insertParagraph"},ZW=(e,n,o)=>{const r=new Wo(n,o);let i;const u=e.getNonEmptyElements();for(;i=r.next();)if(u[i.nodeName.toLowerCase()]||nt(i)&&i.length>0)return!0;return!1},sL=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),db(e,r)},jW=(e,n)=>{const o=e.selection,r=e.dom,i=o.getRng();let u,g=!1;k(r,i).each(X=>{i.setStart(X.startContainer,X.startOffset),i.setEnd(X.endContainer,X.endOffset)});let y=i.startOffset,x=i.startContainer;if(Mt(x)&&x.hasChildNodes()){const X=y>x.childNodes.length-1;x=x.childNodes[Math.min(y,x.childNodes.length-1)]||x,X&&nt(x)?y=x.data.length:y=0}let A=r.getParent(x,r.isBlock);const I=A&&A.parentNode?r.getParent(A.parentNode,r.isBlock):null,F=I?I.nodeName.toUpperCase():"",z=!!(n&&n.ctrlKey);F==="LI"&&!z&&(A=I),nt(x)&&y>=x.data.length&&(ZW(e.schema,x,A||r.getRoot())||(u=r.create("br"),i.insertNode(u),i.setStartAfter(u),i.setEndAfter(u),g=!0)),u=r.create("br"),Rw(r,i,u),sL(e,u,g),e.undoManager.add()},GW=(e,n)=>{const o=se.fromTag("br");lr(se.fromDom(n),o),e.undoManager.add()},qW=(e,n)=>{KW(e.getBody(),n)||Vc(se.fromDom(n),se.fromTag("br"));const o=se.fromTag("br");Vc(se.fromDom(n),o),sL(e,o.dom,!1),e.undoManager.add()},S_=e=>Mo(e.getNode()),KW=(e,n)=>S_(Ae.after(n))?!0:Va(e,Ae.after(n)).map(o=>Mo(o.getNode())).getOr(!1),rL=e=>e&&e.nodeName==="A"&&"href"in e,lR=e=>e.fold(Ke,rL,rL,Ke),uR=e=>{const n=Ge(pb,e),o=Ae.fromRangeStart(e.selection.getRng());return Aa(n,e.getBody(),o).filter(lR)},YW=(e,n)=>{n.fold(Rt,Ge(GW,e),Ge(qW,e),Rt)},XW={insert:(e,n)=>{const o=uR(e);o.isSome()?o.each(Ge(YW,e)):jW(e,n)},fakeEventName:"insertLineBreak"},aL=(e,n)=>y_(e).filter(o=>n.length>0&&Hi(se.fromDom(o),n)).isSome(),JW=e=>aL(e,wO(e)),yY=e=>aL(e,Zw(e)),Rl=su.generate([{br:[]},{block:[]},{none:[]}]),mm=(e,n)=>yY(e),iL=e=>(n,o)=>MW(n)===e,dR=(e,n)=>(o,r)=>JF(o)===e.toUpperCase()===n,QW=e=>{const n=Dl(e.dom,e.selection.getStart());return Ht(n)},e2=e=>dR("pre",e),eZ=()=>dR("summary",!0),x_=e=>(n,o)=>vO(n)===e,tZ=(e,n)=>JW(e),E_=(e,n)=>n,nZ=e=>{const n=Ha(e),o=Dl(e.dom,e.selection.getStart());return Te(o)&&e.schema.isValidChild(o.nodeName,n)},mR=e=>{const n=e.selection.getRng(),o=se.fromDom(n.startContainer),i=Od(o,n.startOffset).map(u=>fs(u)&&!xn(u));return n.collapsed&&i.getOr(!0)},Ml=(e,n)=>(o,r)=>ss(e,(u,g)=>u&&g(o,r),!0)?Z.some(n):Z.none(),T_=(e,n)=>oI([Ml([mm],Rl.none()),Ml([e2(!0),QW],Rl.none()),Ml([eZ()],Rl.br()),Ml([e2(!0),x_(!1),E_],Rl.br()),Ml([e2(!0),x_(!1)],Rl.block()),Ml([e2(!0),x_(!0),E_],Rl.block()),Ml([e2(!0),x_(!0)],Rl.br()),Ml([iL(!0),E_],Rl.br()),Ml([iL(!0)],Rl.block()),Ml([tZ],Rl.br()),Ml([E_],Rl.br()),Ml([nZ],Rl.block()),Ml([mR],Rl.block())],[e,!!(n&&n.shiftKey)]).getOr(Rl.none()),__=(e,n,o)=>{n.selection.isCollapsed()||XC(n),!(Te(o)&&tR(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),Te(o)&&JS(n,e.fakeEventName))},cL=(e,n)=>{const o=()=>__(XW,e,n),r=()=>__(oL,e,n),i=T_(e,n);switch(yO(e)){case"linebreak":i.fold(o,o,Rt);break;case"block":i.fold(r,r,Rt);break;case"invert":i.fold(r,o,Rt);break;default:i.fold(o,r,Rt);break}},lL=es(),oZ=lL.os.isiOS()&&lL.browser.isSafari(),uL=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),mz(e.undoManager),e.undoManager.transact(()=>{cL(e,n)}))},dL=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(nt(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},sZ=e=>{let n=Z.none();const o=i=>{n=Z.some(i.selection.getBookmark()),i.undoManager.add()},r=(i,u)=>{i.undoManager.undo(),n.fold(Rt,g=>i.selection.moveToBookmark(g)),uL(i,u),n=Z.none()};e.on("keydown",i=>{i.keyCode===kt.ENTER&&(oZ&&dL(e.selection.getRng())?o(e):uL(e,i))}),e.on("keyup",i=>{i.keyCode===kt.ENTER&&n.each(()=>r(e,i))})},mL=(e,n,o)=>{const r=xt.os.isMacOS()||xt.os.isiOS();ry([{keyCode:kt.END,action:un(jI,e,!0)},{keyCode:kt.HOME,action:un(jI,e,!1)},...r?[]:[{keyCode:kt.HOME,action:un(s_,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:kt.END,action:un(s_,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:kt.END,action:un(a_,e,!0)},{keyCode:kt.HOME,action:un(a_,e,!1)},{keyCode:kt.END,action:un(JT,e,!0,n)},{keyCode:kt.HOME,action:un(JT,e,!1,n)}],o).each(i=>{o.preventDefault()})},fL=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||mL(e,n,o)})},rZ=e=>{e.on("input",n=>{n.isComposing||R7(e)})},aZ=es(),fR=(e,n,o)=>{ry([{keyCode:kt.PAGE_UP,action:un(JT,e,!1,n)},{keyCode:kt.PAGE_DOWN,action:un(JT,e,!0,n)}],o)},gL=e=>e.stopImmediatePropagation(),hL=e=>e.keyCode===kt.PAGE_UP||e.keyCode===kt.PAGE_DOWN,t2=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",gL,!0):!o&&e.get()&&n.off("NodeChange",gL),e.set(o)},iZ=(e,n)=>{if(aZ.os.isMacOS())return;const o=Ss(!1);e.on("keydown",r=>{hL(r)&&t2(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||fR(e,n,r),hL(r)&&o.get()&&(t2(o,e,!1),e.nodeChanged())})},gR=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||Yo(n.getTargetRanges(),o=>!gN(e.dom,o)))&&n.preventDefault()})},k_=(e,n)=>{const o=n.container(),r=n.offset();return nt(o)?(o.insertData(r,e),Z.some(Ae(o,r+e.length))):a0(n).map(i=>{const u=se.fromText(e);return n.isAtEnd()?Vc(i,u):lr(i,u),Ae(u.dom,e.length)})},hR=Ge(k_,so),pL=Ge(k_," "),wY=(e,n,o)=>ZN(e,n,o)?hR(n):pL(n),Sp=e=>n=>n.fold(o=>Si(e.dom,Ae.before(o)),o=>ai(o),o=>Sl(o),o=>Va(e.dom,Ae.after(o))),cZ=(e,n,o)=>r=>ZN(e,r,o)?hR(n):pL(n),bL=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},lZ=(e,n)=>e.isEditable(e.getParent(n,"summary")),O_=e=>{const n=Ae.fromRangeStart(e.selection.getRng()),o=se.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=Ge(pb,e),i=Ae.fromRangeStart(e.selection.getRng());return Aa(r,e.getBody(),i).bind(Sp(o)).map(u=>()=>cZ(o,n,e.schema)(u).each(bL(e)))}else return Z.none()},vL=e=>{const n=()=>{const o=se.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=Ae.fromRangeStart(e.selection.getRng());wY(o,r,e.schema).each(bL(e))};return eo(xt.browser.isFirefox()&&e.selection.isEditable()&&lZ(e.dom,e.selection.getRng().startContainer),n)},yL=(e,n)=>{A3([{keyCode:kt.SPACEBAR,action:un(O_,e)},{keyCode:kt.SPACEBAR,action:un(vL,e)}],n).each(o=>{n.preventDefault(),tR(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),JS(e,"insertText",{data:" "}))})},uZ=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||yL(e,n)})},wL=e=>GO(e)?[{keyCode:kt.TAB,action:un(fF,e,!0)},{keyCode:kt.TAB,shiftKey:!0,action:un(fF,e,!1)}]:[],dZ=(e,n)=>{ry([...wL(e)],n).each(o=>{n.preventDefault()})},mZ=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||dZ(e,n)})},fZ=e=>{if(e.addShortcut("Meta+P","","mcePrint"),yW(e),Cg(e))return Ss(null);{const n=O9(e);return gR(e),eU(e),DU(e,n),RW(e,n),sZ(e),uZ(e),rZ(e),mZ(e),fL(e,n),iZ(e,n),n}};class CL{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",i=>{const u=n.selection.getRng(),g={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(i.type==="nodechange"||!nm(g,o))&&n.dispatch("SelectionChange"),o=g}),n.on("contextmenu",()=>{n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const i=n.selection.getStart(!0);i&&h0(n)&&!r.isSameElementPath(i)&&n.dom.isChildOf(i,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",i=>{!i.isDefaultPrevented()&&h0(n)&&(n.selection.getNode().nodeName==="IMG"?Tl.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor.selection;let r;if(this.editor.initialized&&o&&!Jv(this.editor)&&!this.editor.mode.isReadOnly()){const i=this.editor.getBody();r=o.getStart(!0)||i,(r.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(r,i))&&(r=i);const u=[];this.editor.dom.getParent(r,g=>g===i?!0:(u.push(g),!1)),this.editor.dispatch("NodeChange",{...n,element:r,parents:u})}}isSameElementPath(n){let o;const r=this.editor,i=ns(r.dom.getParents(n,St,r.getBody()));if(i.length===this.lastPath.length){for(o=i.length;o>=0&&i[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=i,!0}return this.lastPath=i,!1}}const A_=Yf("image"),gZ=e=>{const n=e;return Z.from(n[A_])},pR=(e,n)=>{const o=e;o[A_]=n},D_=Yf("event"),R_=e=>{const n=e;return Z.from(n[D_])},n2=e=>n=>{const o=n;o[D_]=e},SL=(e,n)=>n2(n)(e),xL=n2(0),hZ=n2(2),M_=n2(1),bZ=(e=>n=>{const o=n;return Z.from(o[D_]).exists(r=>r===e)})(0),vZ=()=>Object.freeze({length:0,item:e=>null}),N_=Yf("mode"),yZ=e=>{const n=e;return Z.from(n[N_])},P_=e=>n=>{const o=n;o[N_]=e},EL=(e,n)=>P_(n)(e),TL=P_(0),bR=P_(2),_L=P_(1),kL=e=>n=>{const o=n;return Z.from(o[N_]).exists(r=>r===e)},Nb=kL(0),OL=kL(1),wZ=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(Nb(e))if(ee(o)){if(!Dt(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{Nb(e)&&n.remove(o)},clear:()=>{Nb(e)&&n.clear()}}),CZ=["none","copy","link","move"],SZ=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],vR=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(i){fn(CZ,i)&&(n=i)},get effectAllowed(){return o},set effectAllowed(i){bZ(r)&&fn(SZ,i)&&(o=i)},get items(){return wZ(r,e.items)},get files(){return OL(r)?vZ():e.files},get types(){return e.types},setDragImage:(i,u,g)=>{Nb(r)&&(pR(r,{image:i,x:u,y:g}),e.setDragImage(i,u,g))},getData:i=>OL(r)?"":e.getData(i),setData:(i,u)=>{Nb(r)&&e.setData(i,u)},clearData:i=>{Nb(r)&&e.clearData(i)}};return TL(r),r},fy=e=>{const n=vR(),o=yZ(e);return bR(e),xL(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,gZ(e).each(r=>n.setDragImage(r.image,r.x,r.y)),Ie(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),Ie(e.files,r=>n.items.add(r)),R_(e).each(r=>{SL(n,r)}),o.each(r=>{EL(e,r),EL(n,r)}),n},xZ=e=>{const n=e.getData("text/html");return n===""?Z.none():Z.some(n)},AL=(e,n)=>e.setData("text/html",n),yR="x-tinymce/html",B_=gt(yR),wR="<!-- "+yR+" -->",EZ=e=>wR+e,DL=e=>e.replace(wR,""),RL=e=>e.indexOf(wR)!==-1,TZ=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),CY=(e,n)=>{let o="<"+e;const r=$i(n,(i,u)=>u+'="'+jf.encodeAllRaw(i)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},$_=(e,n,o)=>{const r=e.split(/\n\n/),i=CY(n,o),u="</"+n+">",g=Wt(r,x=>x.split(/\n/).join("<br />")),y=x=>i+x+u;return g.length===1?g[0]:Wt(g,y).join("")},ML="%MCEPASTEBIN%",_Z=(e,n)=>{const{dom:o,selection:r}=e,i=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},ML);xt.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(i,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",g=>{g.stopPropagation()}),u.focus(),r.select(u,!0)},kZ=(e,n)=>{const o=e.dom;if(CR(e)){let r;const i=n.get();for(;r=CR(e);)o.remove(r),o.unbind(r);i&&e.selection.setRng(i)}n.set(null)},CR=e=>e.dom.get("mcepastebin"),OZ=e=>Te(e)&&e.id==="mcepastebin",AZ=e=>{const n=e.dom,o=(g,y)=>{g.appendChild(y),n.remove(y,!0)},[r,...i]=Zt(e.getBody().childNodes,OZ);Ie(i,g=>{o(r,g)});const u=n.select("div[id=mcepastebin]",r);for(let g=u.length-1;g>=0;g--){const y=n.create("div");r.insertBefore(y,u[g]),o(y,u[g])}return r?r.innerHTML:""},NL=e=>e===ML,DZ=e=>{const n=Ss(null);return{create:()=>_Z(e,n),remove:()=>kZ(e,n),getEl:()=>CR(e),getHtml:()=>AZ(e),getLastRng:n.get}},PL=(e,n)=>(at.each(n,o=>{ze(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),RZ=e=>{const n=Hd(),o=id({},n);let r="";const i=n.getVoidElements(),u=at.makeMap("script noscript style textarea video audio iframe object"," "),g=n.getBlockElements(),y=x=>{const A=x.name,I=x;if(A==="br"){r+=`
`;return}if(A!=="wbr"){if(i[A]&&(r+=" "),u[A]){r+=" ";return}if(x.type===3&&(r+=x.value),!(x.name in n.getVoidElements())){let F=x.firstChild;if(F)do y(F);while(F=F.next)}g[A]&&I.next&&(r+=`
`,A==="p"&&(r+=`
`))}};return e=PL(e,[/<!\[[^\]]+\]>/g]),y(o.parse(e)),r},BL=e=>(e=PL(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,i)=>!r&&!i?" ":so],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),MZ=e=>{let n=0;return()=>e+n++},NZ=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return at.hasOwn(o,n)?"image/"+o[n]:"image/"+n},jo=(e,n)=>{const o=id({sanitize:Ah(e),sandbox_iframes:o0(e)},e.schema);o.addNodeFilter("meta",i=>{at.each(i,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return Qh({validate:!0},e.schema).serialize(r)},$L=(e,n)=>({content:e,cancelled:n}),IL=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),i=vA(e,r,o);return $L(i.node.innerHTML,i.isDefaultPrevented())},PZ=(e,n,o)=>{const r=bA(e,n,o),i=jo(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?IL(e,i,o):$L(i,r.isDefaultPrevented())},SR=(e,n,o)=>PZ(e,n,o),I_=(e,n)=>(e.insertContent(n,{merge:nC(e),paste:!0}),!0),xR=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),BZ=(e,n)=>xR(n)&&Yo(Dx(e),o=>Xa(n.toLowerCase(),`.${o.toLowerCase()}`)),FL=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),ER=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),$Z=(e,n,o)=>!e.selection.isCollapsed()&&xR(n)?ER(e,n,o):!1,IZ=(e,n,o)=>BZ(e,n)?FL(e,n,o):!1,FZ=(e,n)=>{at.each([$Z,IZ,I_],o=>!o(e,n,I_))},LL=(e,n,o)=>{o||!Ox(e)?I_(e,n):FZ(e,n)},LZ=MZ("mceclip"),HZ=e=>{const n=vR();return AL(n,e),bR(n),n},Pb=(e,n,o,r,i)=>{const u=SR(e,n,o);if(!u.cancelled){const g=u.content,y=()=>LL(e,g,r);i?tR(e,"insertFromPaste",{dataTransfer:HZ(g)}).isDefaultPrevented()||(y(),JS(e,"insertFromPaste")):y()}},F_=(e,n,o,r)=>{const i=o||RL(n);Pb(e,DL(n),i,!1,r)},xp=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),i=Vf(r,LO(e)),u=$_(i,Ha(e),R1(e));Pb(e,u,!1,!0,o)},gy=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},Ep=(e,n)=>n in e&&e[n].length>0,HL=e=>Ep(e,"text/html")||Ep(e,"text/plain"),hy=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Te(o)?e.dom.encode(o[1]):void 0},zZ=(e,n,o,r)=>{const i=LZ(),u=M1(e)&&Te(o.name),g=u?hy(e,o.name):i,y=u?o.name:void 0,x=n.create(i,o,r,g,y);return n.add(x),x},TR=(e,n)=>{dS(n.uri).each(({data:o,type:r,base64Encoded:i})=>{const u=i?o:btoa(o),g=n.file,y=e.editorUpload.blobCache,x=y.getByData(u,r),A=x??zZ(e,y,g,u);F_(e,`<img src="${A.blobUri()}">`,!1,!0)})},VZ=e=>e.type==="paste",zL=e=>Promise.all(Wt(e,n=>Z4(n).then(o=>({file:n,uri:o})))),VL=e=>{const n=Dx(e);return o=>Ps(o.type,"image/")&&Yo(n,r=>NZ(r)===o.type)},_R=(e,n)=>{const o=n.items?Ka(Or(n.items),i=>i.kind==="file"?[i.getAsFile()]:[]):[],r=n.files?Or(n.files):[];return Zt(o.length>0?o:r,VL(e))},kR=(e,n,o)=>{const r=VZ(n)?n.clipboardData:n.dataTransfer;if(e0(e)&&r){const i=_R(e,r);if(i.length>0)return n.preventDefault(),zL(i).then(u=>{o&&e.selection.setRng(o),Ie(u,g=>{TR(e,g)})}),!0}return!1},UZ=e=>{var n,o;return xt.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},WZ=e=>kt.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,L_=(e,n,o,r,i)=>{let u=BL(o);const g=Ep(n,B_())||RL(o),y=!g&&TZ(u),x=xR(u);(NL(u)||!u.length||y&&!x)&&(r=!0),(r||x)&&(Ep(n,"text/plain")&&y?u=n["text/plain"]:u=RZ(u)),!NL(u)&&(r?xp(e,u,i):F_(e,u,g,i))},ZZ=(e,n,o)=>{let r;const i=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{WZ(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||UZ(u))return;const g=o.get()==="text"||r;r=!1;const y=gy(u.clipboardData);!HL(y)&&kR(e,u,i())||(Ep(y,"text/html")?(u.preventDefault(),L_(e,y,y["text/html"],g,!0)):Ep(y,"text/plain")&&Ep(y,"text/uri-list")?(u.preventDefault(),L_(e,y,y["text/plain"],g,!0)):(n.create(),Tl.setEditorTimeout(e,()=>{const x=n.getHtml();n.remove(),L_(e,y,x,g,!1)},0)))})},UL=e=>{const n=i=>Ps(i,"webkit-fake-url"),o=i=>Ps(i,"data:"),r=i=>{var u;return((u=i.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(i,u,g)=>{if(!e0(e)&&r(g))for(const y of i){const x=y.attr("src");ee(x)&&!y.attr("data-mce-object")&&x!==xt.transparentSrc&&(n(x)||!t0(e)&&o(x))&&y.remove()}})},OR=(e,n,o)=>{ZZ(e,n,o),UL(e)},WL=(e,n)=>{n.get()==="text"?(n.set("html"),iE(e,!1)):(n.set("text"),iE(e,!0)),e.focus()},jZ=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{WL(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&F_(e,r.html,r.internal,!1),r.text&&xp(e,r.text,!1)})},GZ=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(B_(),n),!0}catch{return!1}else return!1},ZL=(e,n,o,r)=>{GZ(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},AR=e=>(n,o)=>{const{dom:r,selection:i}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),g=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(g),r.add(e.getBody(),u);const y=i.getRng();g.focus();const x=r.createRng();x.selectNodeContents(g),i.setRng(x),Tl.setEditorTimeout(e,()=>{i.setRng(y),r.remove(u),o()},0)},H_=e=>({html:EZ(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),qZ=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),DR=e=>!e.selection.isCollapsed()||qZ(e),jL=e=>n=>{!n.isDefaultPrevented()&&DR(e)&&e.selection.isEditable()&&ZL(n,H_(e),AR(e),()=>{if(xt.browser.isChromium()||xt.browser.isFirefox()){const o=e.selection.getRng();Tl.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},KZ=e=>n=>{!n.isDefaultPrevented()&&DR(e)&&ZL(n,H_(e),AR(e),Rt)},GL=e=>{e.on("cut",jL(e)),e.on("copy",KZ(e))},qL=(e,n)=>{var o,r;return G.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},YZ=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},KL=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},XZ=e=>Yo(e.files,n=>/^image\//.test(n.type)),JZ=(e,n,o,r)=>{const i=e.getParent(o,g=>Fn(n,g));if(!ae(e.getParent(o,"summary")))return!0;if(i&&an(r,"text/html")){const g=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!ae(g.querySelector(i.nodeName.toLowerCase()))}else return!1},z_=e=>{e.on("input",n=>{const o=r=>ae(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=Zt(e.dom.select("details"),o);Ie(r,i=>{Mo(i.firstChild)&&i.firstChild.remove();const u=e.dom.create("summary");u.appendChild(bi().dom),i.prepend(u)})}})},QZ=(e,n)=>{IO(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),e0(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&XZ(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=qL(e,o);if(Ht(r))return;const i=gy(o.dataTransfer),u=Ep(i,B_());if((!HL(i)||YZ(i))&&kR(e,o,r))return;const g=i[B_()],y=g||i["text/html"]||i["text/plain"],x=JZ(e.dom,e.schema,r.startContainer,i),A=n.get();A&&!x||y&&(o.preventDefault(),Tl.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(g||A&&x)&&e.execCommand("Delete"),KL(e,r);const I=BL(y);i["text/html"]?F_(e,I,u,!0):xp(e,I,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{e0(e)&&!n.get()&&(o.preventDefault(),KL(e,qL(e,o))),o.type==="dragend"&&n.set(!1)}),z_(e)},YL=e=>{const n=i=>u=>{i(e,u)},o=FO(e);ue(o)&&e.on("PastePreProcess",n(o));const r=kx(e);ue(r)&&e.on("PastePostProcess",n(r))},ej=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},tj=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,RR=e=>at.trim(e).replace(tj,ah).toLowerCase(),XL=(e,n,o)=>{const r=eC(e);if(o||r==="all"||!tC(e))return n;const i=r?r.split(/[, ]/):[];if(i&&r!=="none"){const u=e.dom,g=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(y,x,A,I)=>{const F=u.parseStyle(u.decode(A)),z={};for(let te=0;te<i.length;te++){const K=F[i[te]];let ne=K,ge=u.getStyle(g,i[te],!0);/color/.test(i[te])&&(ne=RR(ne),ge=RR(ge)),ge!==ne&&(z[i[te]]=K)}const X=u.serializeStyle(z,"span");return X?x+' style="'+X+'"'+I:x+I})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,g,y,x)=>g+' style="'+y+'"'+x),n},nj=e=>{(xt.browser.isChromium()||xt.browser.isSafari())&&ej(e,XL)},oj=e=>{const n=Ss(!1),o=Ss(oC(e)?"text":"html"),r=DZ(e);nj(e),jZ(e,o),YL(e),e.on("PreInit",()=>{GL(e),QZ(e,n),OR(e,r,o)})},sj=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},rj=e=>{e.parser.addNodeFilter("details",n=>{const o=qr(e);Ie(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=KM(e);Ie(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},aj=e=>{sj(e),rj(e)},JL=Mo,QL=nt,ij=e=>Vn(e.dom),cj=e=>Ia(e.dom),e5=e=>n=>oo(se.fromDom(e),n),lj=(e,n,o)=>fi(se.fromDom(e),r=>cj(r)||o.isBlock(Jn(r)),e5(n)).getOr(se.fromDom(n)).dom,t5=(e,n)=>fi(se.fromDom(e),ij,e5(n)),n5=(e,n,o)=>{const r=new Wo(e,n),i=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let g=o?e:i();g&&!JL(g);g=i())dr(g)&&(u=g);return u},uj=(e,n,o)=>{const i=Ae.fromRangeStart(e).getNode(),u=lj(i,n,o),g=n5(i,u,!1),y=n5(i,u,!0),x=document.createRange();return t5(g,u).fold(()=>{QL(g)?x.setStart(g,0):x.setStartBefore(g)},A=>x.setStartBefore(A.dom)),t5(y,u).fold(()=>{QL(y)?x.setEnd(y,y.data.length):x.setEndAfter(y)},A=>x.setEndAfter(A.dom)),x},o5=e=>{const n=uj(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(UE(n))},s5=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),o5(e))})};var py;(function(e){e.Before="before",e.After="after"})(py||(py={}));const dj=(e,n)=>Math.abs(e.left-n),mj=(e,n)=>Math.abs(e.right-n),fj=(e,n)=>e>=n.top&&e<=n.bottom,gj=(e,n)=>e.top<n.bottom&&e.bottom>n.top,hj=(e,n)=>{const o=lO(e,n)/Math.min(e.height,n.height);return gj(e,n)&&o>.5},pj=(e,n)=>{const o=Zt(e,r=>fj(n,r));return cO(o).fold(()=>[[],e],r=>{const{pass:i,fail:u}=sr(e,g=>hj(g,r));return[i,u]})},V_=(e,n)=>({node:e.node,position:dj(e,n)<mj(e,n)?py.Before:py.After}),r5=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),MR=(e,n,o,r)=>{const i=F=>dr(F.node)?Z.some(F):Mt(F.node)?MR(Or(F.node.childNodes),n,o,!1):Z.none(),u=(F,z,X)=>i(z).filter(te=>Math.abs(X(F,n,o)-X(te,n,o))<2&&nt(te.node)),g=(F,z)=>{const X=Jo(F,(te,K)=>z(te,n,o)-z(K,n,o));return Rc(X,i).map(te=>r&&!nt(te.node)&&X.length>1?u(te,X[1],z).getOr(te):te)},[y,x]=pj(pI(e),o),{pass:A,fail:I}=sr(x,F=>F.top<o);return g(y,r5).orThunk(()=>g(I,Tw)).orThunk(()=>g(A,Tw))},a5=(e,n,o,r)=>{const i=(u,g)=>{const y=A=>Mt(A)&&A.classList.contains("mce-drag-container"),x=Zt(u.dom.childNodes,yo(y));return g.fold(()=>MR(x,o,r,!0),A=>{const I=Zt(x,F=>F!==A.dom);return MR(I,o,r,!0)}).orThunk(()=>(oo(u,e)?Z.none():Zl(u)).bind(I=>i(I,Z.some(u))))};return i(n,Z.none())},i5=(e,n,o)=>{const r=se.fromDom(e),i=Wl(r),g=se.fromPoint(i,n,o).filter(y=>wa(r,y)).getOr(r);return a5(r,g,n,o)},U_=(e,n,o)=>i5(e,n,o).filter(r=>Mh(r.node)).map(r=>V_(r,n)),c5=e=>{var n,o;const r=e.getBoundingClientRect(),i=e.ownerDocument,u=i.documentElement,g=i.defaultView;return{top:r.top+((n=g==null?void 0:g.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=g==null?void 0:g.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},l5=e=>e.inline?c5(e.getBody()):{left:0,top:0},bj=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},u5=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},i={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:i},vj=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=c5(e.getContentAreaContainer()),r=u5(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},d5=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),yj=(e,n)=>d5(l5(e),bj(e),vj(e,n)),m5=e=>({target:e,srcElement:e}),wj=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...m5(o)}),o2=(e,n,o)=>{const r=kr("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:Rt,stopImmediatePropagation:Rt,stopPropagation:Rt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...m5(n)}},Cj=(e,n)=>{const o=fy(e);return n==="dragstart"?(xL(o),TL(o)):n==="drop"?(hZ(o),bR(o)):(M_(o),_L(o)),o},Sj=(e,n,o,r)=>{const i=Cj(o,e);return Dt(r)?o2(e,n,i):wj(e,r,n,i)},s2=32,xj=100,W_=8,Z_=16,f5=Vn,Ej=uO(f5,Ia),j_=(e,n,o)=>f5(o)&&o!==n&&e.isEditable(o.parentElement),g5=(e,n,o)=>Ht(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),h5=(e,n,o,r)=>{const i=e.dom,u=n.cloneNode(!0);i.setStyles(u,{width:o,height:r}),i.setAttrib(u,"data-mce-selected",null);const g=i.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return i.setStyles(g,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),i.setStyles(u,{margin:0,boxSizing:"border-box"}),g.appendChild(u),g},Tj=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},G_=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},p5=G_("left",-s2),_j=G_("left",s2),b5=G_("top",-s2),q_=G_("top",s2),NR=(e,n,o,r,i,u,g,y,x,A,I,F)=>{let z=0,X=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>i&&(z=n.pageX+o-i),n.pageY+r>u&&(X=n.pageY+r-u),e.style.width=o-z+"px",e.style.height=r-X+"px";const te=x.clientHeight,K=x.clientWidth,ne=g+x.getBoundingClientRect().top,ge=y+x.getBoundingClientRect().left;I.on(be=>{be.intervalId.clear(),be.dragging&&F&&(g+W_>=te?be.intervalId.set(q_(A)):g-W_<=0?be.intervalId.set(b5(A)):y+W_>=K?be.intervalId.set(_j(A)):y-W_<=0?be.intervalId.set(p5(A)):ne+Z_>=window.innerHeight?be.intervalId.set(q_(window)):ne-Z_<=0?be.intervalId.set(b5(window)):ge+Z_>=window.innerWidth?be.intervalId.set(_j(window)):ge-Z_<=0&&be.intervalId.set(p5(window)))})},r2=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},kj=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);r2(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&Lu(se.fromDom(o))},Oj=e=>e.button===0,v5=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),Aj=(e,n)=>o=>{if(Oj(o)){const r=_s(n.dom.getParents(o.target),Ej).getOr(null);if(Te(r)&&j_(n.dom,n.getBody(),r)){const i=n.dom.getPos(r),u=n.getBody(),g=n.getDoc().documentElement;e.set({element:r,dataTransfer:vR(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:g.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:g.offsetHeight)-2,relX:o.pageX-i.x,relY:o.pageY-i.y,width:r.offsetWidth,height:r.offsetHeight,ghost:h5(n,r,r.offsetWidth,r.offsetHeight),intervalId:aO(xj)})}}},PR=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),U_(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const i=e._selectionOverrides.showCaret(1,r.node,r.position===py.Before,!1);i?e.selection.setRng(i):e.selection.placeCaretAt(n,o)})},by=(e,n,o,r,i)=>{n==="dragstart"&&AL(r,e.dom.getOuterHTML(o));const u=Sj(n,o,r,i);return e.dispatch(n,u)},Dj=(e,n)=>{const o=S1((i,u)=>PR(n,i,u),0);n.on("remove",o.cancel);const r=e;return i=>e.on(u=>{const g=Math.max(Math.abs(i.screenX-u.screenX),Math.abs(i.screenY-u.screenY));if(!u.dragging&&g>10){const y=by(n,"dragstart",u.element,u.dataTransfer,i);if(Te(y.dataTransfer)&&(u.dataTransfer=y.dataTransfer),y.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const y=i.currentTarget===n.getDoc().documentElement,x=v5(u,yj(n,i));Tj(u.ghost,n.getBody()),NR(u.ghost,x,u.width,u.height,u.maxX,u.maxY,i.clientY,i.clientX,n.getContentAreaContainer(),n.getWin(),r,y),o.throttle(i.clientX,i.clientY)}})},Rj=e=>{const n=e.getSel();if(Te(n)){const r=n.getRangeAt(0).startContainer;return nt(r)?r.parentNode:r}else return null},y5=(e,n)=>o=>{e.on(r=>{var i;if(r.intervalId.clear(),r.dragging){if(g5(n,Rj(n.selection),r.element)){const u=(i=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&i!==void 0?i:n.getBody();by(n,"drop",u,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{kj(n.dom,r.element),xZ(r.dataTransfer).each(y=>n.insertContent(y)),n._selectionOverrides.hideFakeCaret()})}by(n,"dragend",n.getBody(),r.dataTransfer,o)}}),C5(e)},w5=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>by(n,"dragend",r.element,r.dataTransfer),i=>by(n,"dragend",r.element,r.dataTransfer,i))}),C5(e)},SY=(e,n)=>o=>w5(e,n,Z.some(o)),C5=e=>{e.on(n=>{n.intervalId.clear(),r2(n.ghost)}),e.clear()},Mj=e=>{const n=Fm(),o=Zo.DOM,r=document,i=Aj(n,e),u=Dj(n,e),g=y5(n,e),y=SY(n,e);e.on("mousedown",i),e.on("mousemove",u),e.on("mouseup",g),o.bind(r,"mousemove",u),o.bind(r,"mouseup",y),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",y)}),e.on("keydown",x=>{x.keyCode===kt.ESC&&w5(n,e,Z.none())})},Nj=e=>{const n=i=>{if(!i.isDefaultPrevented()){const u=i.dataTransfer;u&&(fn(u.types,"Files")||u.files.length>0)&&(i.preventDefault(),i.type==="drop"&&RT(e,"Dropped file type is not supported"))}},o=i=>{CE(e,i.target)&&n(i)},r=()=>{const i=Zo.DOM,u=e.dom,g=document,y=e.inline?e.getBody():e.getDoc(),x=["drop","dragover"];Ie(x,A=>{i.bind(g,A,o),u.bind(y,A,n)}),e.on("remove",()=>{Ie(x,A=>{i.unbind(g,A,o),u.unbind(y,A,n)})})};e.on("init",()=>{Tl.setEditorTimeout(e,r,0)})},S5=e=>{Mj(e),Qv(e)&&Nj(e)},Pj=e=>{const n=S1(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=UT(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},x5=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(Ls(o)){const r=np(e.getBody(),o),i=Vn(r)?r:o;e.selection.getNode()!==i&&X0(e,i).each(u=>e.selection.setRng(u))}})})},a2=Vn,E5=(e,n)=>np(e.getBody(),n),Bj=e=>{const n=e.selection,o=e.dom,r=e.getBody(),i=uC(e,r,o.isBlock,()=>Jh(e)),u="sel-"+o.uniqueId(),g="data-mce-selected";let y;const x=Ct=>Te(Ct)&&o.hasClass(Ct,"mce-offscreen-selection"),A=Ct=>Ct!==r&&(a2(Ct)||Ls(Ct))&&o.isChildOf(Ct,r)&&o.isEditable(Ct.parentNode),I=Ct=>{Ct&&n.setRng(Ct)},F=(Ct,Fe,Me,Qe=!0)=>e.dispatch("ShowCaret",{target:Fe,direction:Ct,before:Me}).isDefaultPrevented()?null:(Qe&&n.scrollIntoView(Fe,Ct===-1),i.show(Me,Fe)),z=Ct=>{Ct.hasAttribute("data-mce-caret")&&(Nd(Ct),n.scrollIntoView(Ct))},X=()=>{e.on("click",Fe=>{o.isEditable(Fe.target)||(Fe.preventDefault(),e.focus())}),e.on("blur NewBlock",Se),e.on("ResizeWindow FullscreenStateChanged",i.reposition),e.on("tap",Fe=>{const Me=Fe.target,Qe=E5(e,Me);a2(Qe)?(Fe.preventDefault(),X0(e,Qe).each(ve)):A(Me)&&X0(e,Me).each(ve)},!0),e.on("mousedown",Fe=>{const Me=Fe.target;if(Me!==r&&Me.nodeName!=="HTML"&&!o.isChildOf(Me,r)||!cV(e,Fe.clientX,Fe.clientY))return;Se(),st();const Qe=E5(e,Me);a2(Qe)?(Fe.preventDefault(),X0(e,Qe).each(ve)):U_(r,Fe.clientX,Fe.clientY).each(Et=>{Fe.preventDefault();const Ut=F(1,Et.node,Et.position===py.Before,!1);I(Ut),Om(Qe)?Qe.focus():e.getBody().focus()})}),e.on("keypress",Fe=>{kt.modifierPressed(Fe)||a2(n.getNode())&&Fe.preventDefault()}),e.on("GetSelectionRange",Fe=>{let Me=Fe.range;if(y){if(!y.parentNode){y=null;return}Me=Me.cloneRange(),Me.selectNode(y),Fe.range=Me}}),e.on("SetSelectionRange",Fe=>{Fe.range=ne(Fe.range);const Me=ve(Fe.range,Fe.forward);Me&&(Fe.range=Me)});const Ct=Fe=>Mt(Fe)&&Fe.id==="mcepastebin";e.on("AfterSetSelectionRange",Fe=>{const Me=Fe.range,Qe=Me.startContainer.parentElement;!K(Me)&&!Ct(Qe)&&st(),x(Qe)||Se()}),S5(e),Pj(e),x5(e)},te=Ct=>ia(Ct)||Lf(Ct)||Kg(Ct),K=Ct=>te(Ct.startContainer)||te(Ct.endContainer),ne=Ct=>{const Fe=e.schema.getVoidElements(),Me=o.createRng(),Qe=Ct.startContainer,Et=Ct.startOffset,Ut=Ct.endContainer,Cn=Ct.endOffset;return an(Fe,Qe.nodeName.toLowerCase())?Et===0?Me.setStartBefore(Qe):Me.setStartAfter(Qe):Me.setStart(Qe,Et),an(Fe,Ut.nodeName.toLowerCase())?Cn===0?Me.setEndBefore(Ut):Me.setEndAfter(Ut):Me.setEnd(Ut,Cn),Me},ge=(Ct,Fe)=>{const Me=se.fromDom(e.getBody()),Qe=e.getDoc(),Et=gi(Me,"#"+u).getOrThunk(()=>{const Rn=se.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Qe);return ts(Rn,"id",u),Ks(Me,Rn),Rn}),Ut=o.createRng();Dd(Et),Eo(Et,[se.fromText(so,Qe),se.fromDom(Fe),se.fromText(so,Qe)]),Ut.setStart(Et.dom.firstChild,1),Ut.setEnd(Et.dom.lastChild,0),Sa(Et,{top:o.getPos(Ct,e.getBody()).y+"px"}),gE(Et);const Cn=n.getSel();return Cn&&(Cn.removeAllRanges(),Cn.addRange(Ut)),Ut},be=Ct=>{const Fe=Ct.cloneNode(!0),Me=e.dispatch("ObjectSelected",{target:Ct,targetClone:Fe});if(Me.isDefaultPrevented())return null;const Qe=ge(Ct,Me.targetClone),Et=se.fromDom(Ct);return Ie(Wr(se.fromDom(e.getBody()),`*[${g}]`),Ut=>{oo(Et,Ut)||Bs(Ut,g)}),o.getAttrib(Ct,g)||Ct.setAttribute(g,"1"),y=Ct,st(),Qe},ve=(Ct,Fe)=>{if(!Ct)return null;if(Ct.collapsed){if(!K(Ct)){const Ut=Fe?1:-1,Cn=Km(Ut,r,Ct),Rn=Cn.getNode(!Fe);if(Te(Rn)){if(Mh(Rn))return F(Ut,Rn,Fe?!Cn.isAtEnd():!1,!1);if(vi(Rn)&&Vn(Rn.nextSibling)){const Go=o.createRng();return Go.setStart(Rn,0),Go.setEnd(Rn,0),Go}}const _o=Cn.getNode(Fe);if(Te(_o)){if(Mh(_o))return F(Ut,_o,Fe?!1:!Cn.isAtEnd(),!1);if(vi(_o)&&Vn(_o.previousSibling)){const Go=o.createRng();return Go.setStart(_o,1),Go.setEnd(_o,1),Go}}}return null}let Me=Ct.startContainer,Qe=Ct.startOffset;const Et=Ct.endOffset;if(nt(Me)&&Qe===0&&a2(Me.parentNode)&&(Me=Me.parentNode,Qe=o.nodeIndex(Me),Me=Me.parentNode),!Mt(Me))return null;if(Et===Qe+1&&Me===Ct.endContainer){const Ut=Me.childNodes[Qe];if(A(Ut))return be(Ut)}return null},Se=()=>{y&&y.removeAttribute(g),gi(se.fromDom(e.getBody()),"#"+u).each(fo),y=null},Ze=()=>{i.destroy(),y=null},st=()=>{i.hide()};return Cg(e)||X(),{showCaret:F,showBlockCaretContainer:z,hideFakeCaret:st,destroy:Ze}},$j=(e,n)=>{let o=n;for(let r=e.previousSibling;nt(r);r=r.previousSibling)o+=r.data.length;return o},T5=(e,n,o,r,i)=>{if(nt(o)&&(r<0||r>o.data.length))return[];const u=i&&nt(o)?[$j(o,r)]:[r];let g=o;for(;g!==n&&g.parentNode;)u.push(e.nodeIndex(g,i)),g=g.parentNode;return g===n?u.reverse():[]},K_=(e,n,o,r,i,u,g=!1)=>{const y=T5(e,n,o,r,g),x=T5(e,n,i,u,g);return{start:y,end:x}},Ij=(e,n)=>{const o=n.slice(),r=o.pop();return Yn(r)?ss(o,(u,g)=>u.bind(y=>Z.from(y.childNodes[g])),Z.some(e)).bind(u=>nt(u)&&(r<0||r>u.data.length)?Z.none():Z.some({node:u,offset:r})):Z.none()},_5=(e,n)=>Ij(e,n.start).bind(({node:o,offset:r})=>Ij(e,n.end).map(({node:i,offset:u})=>{const g=document.createRange();return g.setStart(o,r),g.setEnd(i,u),g})),k5=(e,n,o,r=!1)=>K_(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),vy=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,nt(n.firstChild)&&Rm(n.firstChild.data)),vy(e,r,o)}},yy=(e,n,o,r=!0)=>{const i=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(nt(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),nt(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),vy(e,i,o),i!==u&&vy(e,u,o))},BR=(e,n)=>Z.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),O5=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:Kv(r).concat(e.blockPatterns),inlinePatterns:Hw(r).concat(e.inlinePatterns)}},A5=(e,n,o,r)=>{const i=e.createRng();return i.setStart(n,0),i.setEnd(o,r),i.toString()},D5=e=>/^\s[^\s]/.test(e),i2=(e,n,o)=>{gF(n,0,n).each(i=>{const u=i.container;l_(u,o.start.length,n).each(x=>{const A=e.createRng();A.setStart(u,0),A.setEnd(x.container,x.offset),yy(e,A,I=>I===n)});const g=se.fromDom(u),y=Xl(g);D5(y)&&ic(g,y.slice(1))})},R5=(e,n)=>{const o=e.dom,r=n.pattern,i=_5(o.getRoot(),n.range).getOrDie("Unable to resolve path range"),u=(g,y)=>{const x=y.get(g);return At(x)&&js(x).exists(A=>an(A,"block"))};return BR(e,i).each(g=>{r.type==="block-format"?u(r.format,e.formatter)&&e.undoManager.transact(()=>{i2(e.dom,g,r),e.formatter.apply(r.format)}):r.type==="block-command"&&e.undoManager.transact(()=>{i2(e.dom,g,r),e.execCommand(r.cmd,!1,r.value)})}),!0},M5=e=>Jo(e,(n,o)=>o.start.length-n.start.length),Fj=(e,n)=>{const o=M5(e),r=n.replace(so," ");return _s(o,i=>n.indexOf(i.start)===0||r.indexOf(i.start)===0)},Lj=(e,n,o,r)=>{var i;const u=e.dom,g=Ha(e);if(!u.is(n,g))return[];const y=(i=n.textContent)!==null&&i!==void 0?i:"";return Fj(o.blockPatterns,y).map(x=>at.trim(y).length===x.start.length?[]:[{pattern:x,range:K_(u,u.getRoot(),n,0,n,0,r)}]).getOr([])},N5=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();Ie(n,r=>R5(e,r)),e.selection.moveToBookmark(o)},P5=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),Y_=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},B5=(e,n,o)=>{const r=_5(e.getRoot(),o).getOrDie("Unable to resolve path range"),i=r.startContainer,u=r.endContainer,g=r.endOffset===0?u:u.splitText(r.endOffset),y=r.startOffset===0?i:i.splitText(r.startOffset),x=y.parentNode,A=g.parentNode;return{prefix:n,end:A.insertBefore(P5(e,n+"-end"),g),start:x.insertBefore(P5(e,n+"-start"),y)}},X_=(e,n,o)=>{vy(e,e.get(n.prefix+"-end"),o),vy(e,e.get(n.prefix+"-start"),o)},$R=e=>e.start.length===0,Hj=e=>(n,o)=>{const i=n.data.substring(0,o),u=i.lastIndexOf(e.charAt(e.length-1)),g=i.lastIndexOf(e);return g!==-1?g+e.length:u!==-1?u+1:-1},$5=(e,n,o,r)=>{const i=n.start;return WS(e,r.container,r.offset,Hj(i),o).bind(g=>{var y,x;const A=(x=(y=o.textContent)===null||y===void 0?void 0:y.indexOf(i))!==null&&x!==void 0?x:-1;if(A!==-1&&g.offset>=A+i.length){const F=e.createRng();return F.setStart(g.container,g.offset-i.length),F.setEnd(g.container,g.offset),Z.some(F)}else{const F=g.offset-i.length;return US(g.container,F,o).map(z=>{const X=e.createRng();return X.setStart(z.container,z.offset),X.setEnd(g.container,g.offset),X}).filter(z=>z.toString()===i).orThunk(()=>$5(e,n,o,dd(g.container,0)))}})},zj=(e,n,o,r,i,u=!1)=>{if(n.start.length===0&&!u){const g=e.createRng();return g.setStart(o,r),g.setEnd(o,r),Z.some(g)}return VS(o,r,i).bind(g=>$5(e,n,i,g).bind(x=>{var A;if(u){if(x.endContainer===g.container&&x.endOffset===g.offset)return Z.none();if(g.offset===0&&((A=x.endContainer.textContent)===null||A===void 0?void 0:A.length)===x.endOffset)return Z.none()}return Z.some(x)}))},Vj=(e,n,o,r)=>{const i=e.dom,u=i.getRoot(),g=o.pattern,y=o.position.container,x=o.position.offset;return US(y,x-o.pattern.end.length,n).bind(A=>{const I=K_(i,u,A.container,A.offset,y,x,r);if($R(g))return Z.some({matches:[{pattern:g,startRng:I,endRng:I}],position:A});{const F=J_(e,o.remainingPatterns,A.container,A.offset,n,r),z=F.getOr({matches:[],position:A}),X=z.position;return zj(i,g,X.container,X.offset,n,F.isNone()).map(K=>{const ne=k5(i,u,K,r);return{matches:z.matches.concat([{pattern:g,startRng:ne,endRng:I}]),position:dd(K.startContainer,K.startOffset)}})}})},J_=(e,n,o,r,i,u)=>{const g=e.dom;return VS(o,r,g.getRoot()).bind(y=>{const x=A5(g,i,o,r);for(let A=0;A<n.length;A++){const I=n[A];if(!Xa(x,I.end))continue;const F=n.slice();F.splice(A,1);const z=Vj(e,i,{pattern:I,remainingPatterns:F,position:y},u);if(z.isNone()&&r>0)return J_(e,n,o,r-1,i,u);if(z.isSome())return z}return Z.none()})},IR=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?Ie(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},I5=(e,n,o,r)=>{const i=Y_(e.dom,o);yy(e.dom,i,r),IR(e,n,i)},FR=(e,n,o,r,i)=>{const u=e.dom,g=Y_(u,r),y=Y_(u,o);yy(u,y,i),yy(u,g,i);const x={prefix:o.prefix,start:o.end,end:r.start},A=Y_(u,x);IR(e,n,A)},LR=(e,n)=>{const o=Yf("mce_textpattern"),r=$l(n,(i,u)=>{const g=B5(e,o+`_end${i.length}`,u.endRng);return i.concat([{...u,endMarker:g}])},[]);return $l(r,(i,u)=>{const g=r.length-i.length-1,y=$R(u.pattern)?u.endMarker:B5(e,o+`_start${g}`,u.startRng);return i.concat([{...u,startMarker:y}])},[])},Uj=e=>Jo(e,(n,o)=>o.end.length-n.end.length),HR=(e,n)=>{const o=Js(e,r=>Yo(n,i=>r.pattern.start===i.pattern.start&&r.pattern.end===i.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},F5=(e,n,o,r,i,u)=>{const g=J_(e,i.inlinePatterns,o,r,n,u).fold(()=>[],x=>x.matches),y=J_(e,Uj(i.inlinePatterns),o,r,n,u).fold(()=>[],x=>x.matches);return HR(g,y)},L5=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),i=LR(o,n);Ie(i,u=>{const g=o.getParent(u.startMarker.start,o.isBlock),y=x=>x===g;$R(u.pattern)?I5(e,u.pattern,u.endMarker,y):FR(e,u.pattern,u.startMarker,u.endMarker,y),X_(o,u.endMarker,y),X_(o,u.startMarker,y)}),e.selection.moveToBookmark(r)},H5=(e,n)=>{const o=e.selection.getRng();return BR(e,o).map(r=>{var i;const u=Math.max(0,o.startOffset),g=O5(n,r,(i=r.textContent)!==null&&i!==void 0?i:""),y=F5(e,r,o.startContainer,u,g,!0),x=Lj(e,r,g,!0);return x.length>0||y.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{zk(e),L5(e,y),N5(e,x);const A=e.selection.getRng(),I=VS(A.startContainer,A.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),I.each(F=>{const z=F.container;z.data.charAt(F.offset-1)===l1&&(z.deleteData(F.offset-1,1),vy(e.dom,z.parentNode,X=>X===e.dom.getRoot()))})}),!0):!1}).getOr(!1)},Wj=(e,n)=>{const o=e.selection.getRng();BR(e,o).map(r=>{const i=Math.max(0,o.startOffset-1),u=A5(e.dom,r,o.startContainer,i),g=O5(n,r,u),y=F5(e,r,o.startContainer,i,g,!1);y.length>0&&e.undoManager.transact(()=>{L5(e,y)})})},z5=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},Zj=(e,n)=>z5(e,n,(o,r)=>o===r.keyCode&&!kt.modifierPressed(r)),jj=(e,n)=>z5(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),Gj=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>wi(n0(e),HO(e)),i=()=>aC(e);e.on("keydown",g=>{if(g.keyCode===13&&!kt.modifierPressed(g)&&e.selection.isCollapsed()){const y=r();(y.inlinePatterns.length>0||y.blockPatterns.length>0||i())&&H5(e,y)&&g.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()){const g=r();(g.inlinePatterns.length>0||i())&&Wj(e,g)}};e.on("keyup",g=>{Zj(o,g)&&u()}),e.on("keypress",g=>{jj(n,g)&&Tl.setEditorTimeout(e,u)})},qj=e=>{Gj(e)},Kj=e=>{const n=at.each,o=kt.BACKSPACE,r=kt.DELETE,i=e.dom,u=e.selection,g=e.parser,y=xt.browser,x=y.isFirefox(),A=y.isChromium()||y.isSafari(),I=xt.deviceType.isiPhone()||xt.deviceType.isiPad(),F=xt.os.isMacOS()||xt.os.isiOS(),z=(Ft,Lt)=>{try{e.getDoc().execCommand(Ft,!1,String(Lt))}catch{}},X=Ft=>Ft.isDefaultPrevented(),te=()=>{const Ft=it=>{const gn=i.create("body"),Wn=it.cloneContents();return gn.appendChild(Wn),u.serializer.serialize(gn,{format:"html"})},Lt=it=>{const gn=Ft(it),Wn=i.createRng();Wn.selectNode(e.getBody());const Do=Ft(Wn);return gn===Do};e.on("keydown",it=>{const gn=it.keyCode;if(!X(it)&&(gn===r||gn===o)&&e.selection.isEditable()){const Wn=e.selection.isCollapsed(),Do=e.getBody();if(Wn&&!Rs(se.fromDom(Do))||!Wn&&!Lt(e.selection.getRng()))return;it.preventDefault(),e.setContent(""),Do.firstChild&&i.isBlock(Do.firstChild)?e.selection.setCursorLocation(Do.firstChild,0):e.selection.setCursorLocation(Do,0),e.nodeChanged()}})},K=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},ne=()=>{e.inline||i.bind(e.getDoc(),"mousedown mouseup",Ft=>{let Lt;if(Ft.target===e.getDoc().documentElement)if(Lt=u.getRng(),e.getBody().focus(),Ft.type==="mousedown"){if(ia(Lt.startContainer))return;u.placeCaretAt(Ft.clientX,Ft.clientY)}else u.setRng(Lt)})},ge=()=>{e.on("keydown",Ft=>{if(!X(Ft)&&Ft.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const Lt=u.getNode(),it=Lt.previousSibling;if(Lt.nodeName==="HR"){i.remove(Lt),Ft.preventDefault();return}it&&it.nodeName&&it.nodeName.toLowerCase()==="hr"&&(i.remove(it),Ft.preventDefault())}}})},be=()=>{Range.prototype.getClientRects||e.on("mousedown",Ft=>{if(!X(Ft)&&Ft.target.nodeName==="HTML"){const Lt=e.getBody();Lt.blur(),Tl.setEditorTimeout(e,()=>{Lt.focus()})}})},ve=()=>{const Ft=Ex(e);e.on("click",Lt=>{const it=Lt.target;/^(IMG|HR)$/.test(it.nodeName)&&i.isEditable(it)&&(Lt.preventDefault(),e.selection.select(it),e.nodeChanged()),it.nodeName==="A"&&i.hasClass(it,Ft)&&it.childNodes.length===0&&i.isEditable(it.parentNode)&&(Lt.preventDefault(),u.select(it))})},Se=()=>{const Ft=()=>{const it=i.getAttribs(u.getStart().cloneNode(!1));return()=>{const gn=u.getStart();gn!==e.getBody()&&(i.setAttrib(gn,"style",null),n(it,Wn=>{gn.setAttributeNode(Wn.cloneNode(!0))}))}},Lt=()=>!u.isCollapsed()&&i.getParent(u.getStart(),i.isBlock)!==i.getParent(u.getEnd(),i.isBlock);e.on("keypress",it=>{let gn;return!X(it)&&(it.keyCode===8||it.keyCode===46)&&Lt()?(gn=Ft(),e.getDoc().execCommand("delete",!1),gn(),it.preventDefault(),!1):!0}),i.bind(e.getDoc(),"cut",it=>{if(!X(it)&&Lt()){const gn=Ft();Tl.setEditorTimeout(e,()=>{gn()})}})},Ze=()=>{e.on("keydown",Ft=>{if(!X(Ft)&&Ft.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const Lt=u.getNode().previousSibling;if(Lt&&Lt.nodeName&&Lt.nodeName.toLowerCase()==="table")return Ft.preventDefault(),!1}return!0})},st=()=>{e.on("keydown",Ft=>{if(X(Ft)||Ft.keyCode!==kt.BACKSPACE)return;let Lt=u.getRng();const it=Lt.startContainer,gn=Lt.startOffset,Wn=i.getRoot();let Do=it;if(!(!Lt.collapsed||gn!==0)){for(;Do.parentNode&&Do.parentNode.firstChild===Do&&Do.parentNode!==Wn;)Do=Do.parentNode;Do.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,Do),Lt=i.createRng(),Lt.setStart(it,0),Lt.setEnd(it,0),u.setRng(Lt))}})},Ct=()=>{const Ft=()=>{z("StyleWithCSS",!1),z("enableInlineTableEditing",!1),Eh(e)||z("enableObjectResizing",!1)};B1(e)||e.on("BeforeExecCommand mousedown",Ft)},Fe=()=>{const Ft=()=>{n(i.select("a:not([data-mce-block])"),Lt=>{var it;let gn=Lt.parentNode;const Wn=i.getRoot();if((gn==null?void 0:gn.lastChild)===Lt){for(;gn&&!i.isBlock(gn);){if(((it=gn.parentNode)===null||it===void 0?void 0:it.lastChild)!==gn||gn===Wn)return;gn=gn.parentNode}i.add(gn,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Lt=>{(Lt.type==="setcontent"||Lt.command==="mceInsertLink")&&Ft()})},Me=()=>{e.on("init",()=>{z("DefaultParagraphSeparator",Ha(e))})},Qe=Ft=>{const Lt=Ft.getBody(),it=Ft.selection.getRng();return it.startContainer===it.endContainer&&it.startContainer===Lt&&it.startOffset===0&&it.endOffset===Lt.childNodes.length},Et=()=>{e.on("keyup focusin mouseup",Ft=>{!kt.modifierPressed(Ft)&&!Qe(e)&&u.normalize()},!0)},Ut=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Cn=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Rn=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",Ft=>{let Lt;Ft.target.nodeName==="HTML"&&(Lt=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Lt),e.selection.normalize(),e.nodeChanged())}))},_o=()=>{F&&e.on("keydown",Ft=>{kt.metaKeyPressed(Ft)&&!Ft.shiftKey&&(Ft.keyCode===37||Ft.keyCode===39)&&(Ft.preventDefault(),e.selection.getSel().modify("move",Ft.keyCode===37?"backward":"forward","lineboundary"))})},Go=()=>{e.on("click",Ft=>{let Lt=Ft.target;do if(Lt.tagName==="A"){Ft.preventDefault();return}while(Lt=Lt.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Zs=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",Ft=>{Ft.preventDefault()})})},Da=()=>{g.addNodeFilter("br",Ft=>{let Lt=Ft.length;for(;Lt--;)Ft[Lt].attr("class")==="Apple-interchange-newline"&&Ft[Lt].remove()})},Xr=Rt,dt=()=>{if(!x||e.removed)return!1;const Ft=e.selection.getSel();return!Ft||!Ft.rangeCount||Ft.rangeCount===0},Tt=()=>{A&&(ne(),ve(),Zs(),K(),I&&(Cn(),Rn(),Go())),x&&(be(),Ct(),Ut(),_o())},to=()=>{e.on("drop",Ft=>{var Lt;const it=(Lt=Ft.dataTransfer)===null||Lt===void 0?void 0:Lt.getData("text/html");ee(it)&&/^<img[^>]*>$/.test(it)&&e.dispatch("dragend",new window.DragEvent("dragend",Ft))})},Gn=()=>{st(),te(),xt.windowsPhone||Et(),A&&(ne(),ve(),Me(),Zs(),Ze(),Da(),I?(Cn(),Rn(),Go()):K()),x&&(ge(),be(),Se(),Ct(),Fe(),Ut(),_o(),Ze(),to())};return Cg(e)?Tt():Gn(),{refreshContentEditable:Xr,isHidden:dt}},Q_=Zo.DOM,Yj=(e,n)=>{const o=se.fromDom(e.getBody()),r=iv(gl(o)),i=se.fromTag("style");ts(i,"type","text/css"),Ks(i,se.fromText(n)),Ks(r,i),e.on("remove",()=>{fo(i)})},zR=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,VR=e=>Uo(e,n=>Dt(n)===!1),V5=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return VR({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:zR(e),sandbox_iframes:n("sandbox_iframes"),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},U5=e=>{const n=e.options.get;return VR({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},Xj=e=>{const n=e.options.get;return{...V5(e),...U5(e),...VR({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},Jj=e=>{const n=id(V5(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const i=e.dom,u="data-mce-"+r;let g=o.length;for(;g--;){const y=o[g];let x=y.attr(r);if(x&&!y.attr(u)){if(x.indexOf("data:")===0||x.indexOf("blob:")===0)continue;r==="style"?(x=i.serializeStyle(i.parseStyle(x),y.name),x.length||(x=null),y.attr(u,x),y.attr(r,x)):r==="tabindex"?(y.attr(u,x),y.attr(r,null)):y.attr(u,e.convertURL(x,r,y.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const i=o[r],u=i.attr("type")||"no/type";u.indexOf("mce-")!==0&&i.attr("type","mce-"+u)}}),rC(e)&&n.addNodeFilter("#cdata",o=>{var r;let i=o.length;for(;i--;){const u=o[i];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const i=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(i)&&u.getAll("br").length===0&&u.append(new Ti("br",1))}}),n},Qj=e=>{const n=Tx(e);n&&Tl.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},ek=e=>{const n=e.dom.getRoot();!e.inline&&(!h0(e)||e.selection.getStart(!0)===n)&&ai(n).each(o=>{const r=o.getNode(),i=Bu(r)?ai(r).getOr(o):o;e.selection.setRng(i.toRange())})},eG=e=>{e.bindPendingEventDelegates(),e.initialized=!0,rb(e),e.focus(!0),ek(e),e.nodeChanged({initial:!0});const n=PO(e);ue(n)&&n.call(e,e),Qj(e)},UR=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,tG=(e,n,o)=>{const{pass:r,fail:i}=sr(n,y=>tinymce.Resource.has(PD(y))),g=[...r.map(y=>{const x=tinymce.Resource.get(PD(y));return ee(x)?Promise.resolve(UR(e).loadRawCss(y,x)):Promise.resolve()}),UR(e).loadAll(i)];return e.inline?g:g.concat([e.ui.styleSheetLoader.loadAll(o)])},W5=e=>{const n=UR(e),o=bx(e),r=e.contentCSS,i=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?i():e.on("remove",i)};if(e.contentStyles.length>0){let x="";at.each(e.contentStyles,A=>{x+=A+`\r
`}),e.dom.addStyle(x)}const g=Promise.all(tG(e,r,o)).then(u).catch(u),y=Xv(e);return y&&Yj(e,y),g},nG=e=>{const n=e.getDoc(),o=e.getBody();ef(e),$O(e)||(n.body.spellcheck=!1,Q_.setAttrib(o,"spellcheck","false")),e.quirks=Kj(e),gA(e);const r=TO(e);r!==void 0&&(o.dir=r);const i=_x(e);i&&e.on("BeforeSetContent",u=>{at.each(i,g=>{u.content=u.content.replace(g,y=>"<!--mce:protected "+escape(y)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},oG=e=>{Cg(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},WR=e=>{e.removed!==!0&&(oG(e),eG(e))},sG=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},Z5=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(Q_.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=B1(e),e._editableRoot=Zc(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&Q_.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=kV(e),e.schema=Hd(U5(e)),e.dom=Zo(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:Zd(e),referrerPolicy:Dn(e),onSetAttrib:g=>{e.dispatch("SetAttrib",g)},force_hex_color:Dh(e)}),e.parser=Jj(e),e.serializer=y$(Xj(e),e),e.selection=dp(e.dom,e.getWin(),e.serializer,e),e.annotator=DC(e),e.formatter=FD(e),e.undoManager=LD(e),e._nodeChangeDispatcher=new CL(e),e._selectionOverrides=Bj(e),G9(e),aj(e),nY(e),Cg(e)||(s5(e),qj(e));const i=fZ(e);Db(e,i),X9(e),ld(e),oj(e);const u=Sz(e);nG(e),u.fold(()=>{const g=sG(e);W5(e).then(()=>{WR(e),g()})},g=>{e.setProgressState(!0),W5(e).then(()=>{g().then(y=>{e.setProgressState(!1),WR(e),OD(e)},y=>{e.notificationManager.open({type:"error",text:String(y)}),WR(e),OD(e)})})})},j5=St,rG=(e,n,o)=>Gg(e,n,j5,o),tk=Zo.DOM,aG=(e,n,o,r)=>{const i=se.fromTag("iframe");return r.each(u=>ts(i,"tabindex",u)),Fc(i,o),Fc(i,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),Du(i,"tox-edit-area__iframe"),i},iG=e=>{let n=fx(e)+"<html><head>";Vw(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=Uw(e),r=bO(e),i=e.translate(NO(e));return Ww(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+Ww(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${i}"><br></body></html>`,n},G5=(e,n)=>{const o=e.translate("Rich Text Area"),r=cl(se.fromDom(e.getElement()),"tabindex").bind(il),i=aG(e.id,o,zw(e),r).dom;i.onload=()=>{i.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=i,e.iframeHTML=iG(e),tk.add(n.iframeContainer,i)},c2=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,Z5(e)};if(UO(e)||xt.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=rG(se.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},cG=(e,n)=>{G5(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=tk.isHidden(n.editorContainer)),e.getElement().style.display="none",tk.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,c2(e)},ZR=Zo.DOM,lG=(e,n,o)=>{const r=Tb.get(o),i=Tb.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=at.trim(o),r&&at.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,i)||{};e.plugins[o]=u,ue(u.init)&&(u.init(e,i),n.push(o))}catch(u){R$(e,o,u)}}},uG=e=>e.replace(/^\-/,""),dG=e=>{const n=[];Ie($1(e),o=>{lG(e,n,uG(o))})},mG=e=>{const n=at.trim(jw(e)),o=e.ui.registry.getAll().icons,r={...TS.get("default").icons,...TS.get(n).icons};vt(r,(i,u)=>{an(o,u)||e.ui.registry.addIcon(u,i)})},q5=e=>{const n=Th(e);if(ee(n)){const o=Sg.get(n);e.theme=o(e,Sg.urls[n])||{},ue(e.theme.init)&&e.theme.init(e,Sg.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},fG=e=>{const n=Xw(e),o=bu.get(n);e.model=o(e,bu.urls[n])},K5=e=>{const n=e.theme.renderUI;return n?n():X5(e)},gG=e=>{const n=e.getElement(),r=Th(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},Y5=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),hG=e=>{const n=ZR.create("div");return ZR.insertAfter(n,e),Y5(n,n)},X5=e=>{const n=e.getElement();return e.inline?Y5(null):hG(n)},pG=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,ee(Th(e))?K5(e):ue(Th(e))?gG(e):X5(e)},bG=(e,n)=>{const o={show:Z.from(n.show).getOr(Rt),hide:Z.from(n.hide).getOr(Rt),isEnabled:Z.from(n.isEnabled).getOr(St),setEnabled:r=>{e.mode.isReadOnly()||Z.from(n.setEnabled).each(i=>i(r))}};e.ui={...e.ui,...o}},vG=async e=>{e.dispatch("ScriptsLoaded"),mG(e),q5(e),fG(e),dG(e);const n=await pG(e);bG(e,Z.from(n.api).getOr({})),e.editorContainer=n.editorContainer,bV(e),e.inline?Z5(e):cG(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},Bb=Zo.DOM,J5=e=>e.charAt(0)==="-",Q5=(e,n)=>{const o=qw(n),r=za(n);if(!yl.hasCode(o)&&o!=="en"){const i=po(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(i).catch(()=>{kS(n,i,o)})}},jR=(e,n)=>{const o=Th(e);if(ee(o)&&!J5(o)&&!an(Sg.urls,o)){const r=OO(e),i=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;Sg.load(o,i).catch(()=>{fV(e,i,o)})}},e6=(e,n)=>{const o=Xw(e);if(o!=="plugin"&&!an(bu.urls,o)){const r=yx(e),i=ee(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;bu.load(o,i).catch(()=>{D$(e,i,o)})}},t6=e=>Z.from(tg(e)).filter(po).map(n=>({url:n,name:Z.none()})),n6=(e,n,o)=>Z.from(n).filter(r=>po(r)&&!TS.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:Z.some(r)})),yG=(e,n,o)=>{const r=n6(n,"default",o),i=t6(n).orThunk(()=>n6(n,jw(n),""));Ie(qs([r,i]),u=>{e.add(u.url).catch(()=>{mV(n,u.url,u.name.getOrUndefined())})})},wG=(e,n)=>{const o=(r,i)=>{Tb.load(r,i).catch(()=>{QK(e,i,r)})};vt(Wm(e),(r,i)=>{o(i,r),e.options.set("plugins",$1(e).concat(i))}),Ie($1(e),r=>{r=at.trim(r),r&&!Tb.urls[r]&&!J5(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},o6=e=>{const n=Th(e);return!ee(n)||Te(Sg.get(n))},s6=e=>{const n=Xw(e);return Te(bu.get(n))},CG=(e,n)=>{const o=mr.ScriptLoader,r=()=>{!e.removed&&o6(e)&&s6(e)&&vG(e)};jR(e,n),e6(e,n),Q5(o,e),yG(o,e,n),wG(e,n),o.loadQueue().then(r,r)},SG=(e,n)=>dw.forElement(e,{contentCssCors:kh(n),referrerPolicy:Dn(n)}),GR=e=>{const n=e.id;yl.setCode(qw(e));const o=()=>{Bb.unbind(window,"ready",o),e.render()};if(!Yi.Event.domLoaded){Bb.bind(window,"ready",o);return}if(!e.getElement())return;const r=se.fromDom(e.getElement()),i=Cm(r);e.on("remove",()=>{uo(r.dom.attributes,g=>Bs(r,g.name)),Fc(r,i)}),e.ui.styleSheetLoader=SG(r,e),Jw(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||Bb.getParent(n,"form");u&&(e.formElement=u,DO(e)&&!gv(e.getElement())&&(Bb.insertAfter(Bb.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=g=>{e.dispatch(g.type,g)},Bb.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),xx(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=A$(e),e.notificationManager=ND(e),jO(e)&&e.on("GetContent",g=>{g.save&&(g.content=Bb.encode(g.content))}),Ju(e)&&e.on("submit",()=>{e.initialized&&e.save()}),N1(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),CG(e,e.suffix)},nk=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),yA(e,n))},ok=e=>e._editableRoot,_g=(e,n)=>({sections:gt(e),options:gt(n)}),l2=es().deviceType,$b=l2.isPhone(),r6=l2.isTablet(),u2=e=>{if(Ht(e))return[];{const n=At(e)?e:e.split(/[ ,]/),o=Wt(n,Hl);return Zt(o,po)}},xG=(e,n)=>{const o=Bi(n,(r,i)=>fn(e,i));return _g(o.t,o.f)},a6=(e,n,o={})=>{const r=e.sections(),i=Fo(r,n).getOr({});return at.extend({},o,i)},qR=(e,n)=>an(e.sections(),n),KR=(e,n)=>qR(e,n)?e.sections()[n]:{},sk=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Fo(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),Tp=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?at.extend({},e.external_plugins,r):r},Ib=(e,n)=>[...u2(e),...u2(n)],i6=(e,n,o,r)=>e&&qR(n,"mobile")?r:o,EG=(e,n,o,r)=>{const i=u2(o.forced_plugins),u=u2(r.plugins),g=KR(n,"mobile"),y=g.plugins?u2(g.plugins):u,x=i6(e,n,u,y),A=Ib(i,x);return at.extend(r,{forced_plugins:i,plugins:A})},TG=(e,n)=>e&&qR(n,"mobile"),_G=(e,n,o,r,i)=>{var u;const g=e?{mobile:sk((u=i.mobile)!==null&&u!==void 0?u:{},n)}:{},y=xG(["mobile"],YS(g,i)),x=at.extend(o,r,y.options(),TG(e,y)?a6(y,"mobile"):{},{external_plugins:Tp(r,y.options())});return EG(e,y,r,x)},kG=(e,n)=>_G($b||r6,$b,n,e,n),OG=(e,n)=>Pz(e,n),AG=e=>{const n=(r,i)=>{e.formatter.toggle(r,i),e.nodeChanged()},o=r=>()=>{Ie("left,center,right,justify".split(","),i=>{r!==i&&e.formatter.remove("align"+i)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},c6=e=>{const n=o=>()=>{const r=e.selection,i=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return Yo(i,u=>Te(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},DG=e=>{AG(e),c6(e)},RG=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let i=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(xt.os.isMacOS()||xt.os.isiOS())&&(i=i.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:i,type:"error"})}}})},MG=(e,n,o,r)=>{const i=se.fromDom(e.getRoot());return N0(i,Ae.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),P0(i,Ae.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},xY=e=>{if(typeof e!="string"){const n=at.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},NG=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?MG(r,o.getRng(),n,e.schema):n},wy=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=xY(n);iD(e,{...r,content:NG(e,o),format:"html",set:!1,selection:!0}).each(i=>{const u=Mz(e,i.content,r);vT(e,u,i),e.addVisual()})}},PG=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{wy(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{wy(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{wy(e,r)},mceInsertContent:(n,o,r)=>{wy(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(Oh(e))}})},BG={"font-size":"size","font-family":"face"},l6=Li("font"),$G=(e,n,o)=>{const r=u=>er(u,e).orThunk(()=>l6(u)?Fo(BG,e).bind(g=>cl(u,g)):Z.none()),i=u=>oo(se.fromDom(n),u);return D4(se.fromDom(o),u=>r(u),i)},u6=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),IG=(e,n)=>Z.from(Zo.DOM.getStyle(n,e,!0)),rk=e=>(n,o)=>Z.from(o).map(se.fromDom).filter(zr).bind(r=>$G(e,n,r.dom).or(IG(e,r.dom))).getOr(""),FG=rk("font-size"),LG=R(u6,rk("font-family")),HG=e=>ai(e.getBody()).bind(n=>{const o=n.container();return Z.from(nt(o)?o.parentNode:o)}),zG=e=>Z.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?Z.none():Z.from(e.selection.getStart(!0))}),d6=(e,n)=>zG(e).orThunk(Ge(HG,e)).map(se.fromDom).filter(zr).bind(n),d2=(e,n)=>d6(e,So(Z.some,n)),YR=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=WO(e),i=ZO(e);return i.length>0?i[o-1]||n:r[o-1]||n}else return n}else return n},XR=e=>{const n=e.split(/\s*,\s*/);return Wt(n,o=>o.indexOf(" ")!==-1&&!(Ps(o,'"')||Ps(o,"'"))?`'${o}'`:o).join(",")},VG=(e,n)=>{const o=YR(e,n);e.formatter.toggle("fontname",{value:XR(o)}),e.nodeChanged()},EY=e=>d2(e,n=>LG(e.getBody(),n.dom)).getOr(""),TY=(e,n)=>{e.formatter.toggle("fontsize",{value:YR(e,n)}),e.nodeChanged()},UG=e=>d2(e,n=>FG(e.getBody(),n.dom)).getOr(""),m6=e=>d2(e,n=>{const o=se.fromDom(e.getBody()),r=D4(n,u=>er(u,"line-height"),Ge(oo,o)),i=()=>{const u=parseFloat(Qs(n,"line-height")),g=parseFloat(Qs(n,"font-size"));return String(u/g)};return r.getOrThunk(i)}).getOr(""),WG=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},ZG=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,i)=>{n(o,{value:i})},BackColor:(o,r,i)=>{n("hilitecolor",{value:i})},FontName:(o,r,i)=>{VG(e,i)},FontSize:(o,r,i)=>{TY(e,i)},LineHeight:(o,r,i)=>{WG(e,i)},Lang:(o,r,i)=>{var u;n(o,{value:i.code,customValue:(u=i.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,i)=>{n(ee(i)?i:"p")},mceToggleFormat:(o,r,i)=>{n(i)}})},jG=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>EY(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>UG(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>m6(e))},_Y=e=>{ZG(e),jG(e)},kY=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},f6=e=>{e.editorCommands.addCommands({Indent:()=>{j9(e)},Outdent:()=>{S3(e)}}),e.editorCommands.addCommands({Outdent:()=>e_(e)},"state")},g6=e=>{const n=(o,r,i)=>{const u=ee(i)?{href:i}:i,g=e.dom.getParent(e.selection.getNode(),"a");qe(u)&&ee(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!g||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,g))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},GG=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{e.getDoc().execCommand(n);const o=e.dom.getParent(e.selection.getNode(),"ol,ul");if(o){const r=o.parentNode;if(r&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(r.nodeName)){const i=e.selection.getBookmark();e.dom.split(r,o),e.selection.moveToBookmark(i)}}}})},qG=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{const o=e.dom.getParent(e.selection.getNode(),"ul,ol");return o&&(n==="insertunorderedlist"&&o.tagName==="UL"||n==="insertorderedlist"&&o.tagName==="OL")}},"state")},KG=e=>{GG(e),qG(e)},OY=(e,n,o,r)=>{const i=e.dom,u=y=>i.isBlock(y)&&y.parentElement===o,g=u(n)?n:i.getParent(r,u,o);return Z.from(g).map(se.fromDom)},YG=(e,n)=>{const o=e.dom,r=e.selection.getRng(),i=n?e.selection.getStart():e.selection.getEnd(),u=n?r.startContainer:r.endContainer,g=Dl(o,u);if(!g||!g.isContentEditable)return;const y=n?lr:Vc,x=Ha(e);OY(e,i,g,u).each(A=>{const I=oR(e,u,A.dom,g,!1,x);y(A,se.fromDom(I)),e.selection.setCursorLocation(I,0),e.dispatch("NewBlock",{newBlock:I}),JS(e,"insertParagraph")})},AY=e=>YG(e,!0),XG=e=>YG(e,!1),DY=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{AY(e)},InsertNewBlockAfter:()=>{XG(e)}})},JG=e=>{e.editorCommands.addCommands({insertParagraph:()=>{__(oL,e)},mceInsertNewLine:(n,o,r)=>{cL(e,r)},InsertLineBreak:(n,o,r)=>{__(XW,e)}})},Fb=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let i=0;e.dom.getParent(e.selection.getNode(),u=>Mt(u)&&i++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),Ia);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},JR=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const i=r??e.selection.getNode();if(i!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(i,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{U8(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},ak=e=>{DG(e),RG(e),kY(e),Fb(e),PG(e),g6(e),f6(e),DY(e),JG(e),KG(e),_Y(e),JR(e)},h6=["toggleview"],QR=e=>fn(h6,e.toLowerCase());class eM{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,i){const u=this.editor,g=n.toLowerCase(),y=i==null?void 0:i.skip_focus;if(u.removed||(g!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(g)&&!y?u.focus():A8(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const A=this.commands.exec[g];return ue(A)?(A(g,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!QR(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return ue(r)?r(o):!1}queryCommandValue(n){if(!QR(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return ue(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;vt(n,(i,u)=>{Ie(u.toLowerCase().split(","),g=>{r[o][g]=i})})}addCommand(n,o,r){const i=n.toLowerCase();this.commands.exec[i]=(u,g,y)=>o.call(r??this.editor,g,y)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const Lb="data-mce-contenteditable",QG=(e,n,o)=>{kd(e,n)&&!o?ul(e,n):o&&Du(e,n)},tM=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},ik=(e,n)=>{e.dom.contentEditable=n?"true":"false"},_p=e=>{Ie(Wr(e,'*[contenteditable="true"]'),n=>{ts(n,Lb,"true"),ik(n,!1)})},eq=e=>{Ie(Wr(e,`*[${Lb}="true"]`),n=>{Bs(n,Lb),ik(n,!0)})},p6=e=>{Z.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},tq=e=>{e.selection.setRng(e.selection.getRng())},ck=(e,n)=>{const o=se.fromDom(e.getBody());QG(o,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),p6(e),e.readonly=!0,ik(o,!1),_p(o)):(e.readonly=!1,e.hasEditableRoot()&&ik(o,!0),eq(o),tM(e,"StyleWithCSS",!1),tM(e,"enableInlineTableEditing",!1),tM(e,"enableObjectResizing",!1),fN(e)&&e.focus(),tq(e),e.nodeChanged())},Hb=e=>e.readonly,b6=e=>{e.parser.addAttributeFilter("contenteditable",n=>{Hb(e)&&Ie(n,o=>{o.attr(Lb,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Lb,n=>{Hb(e)&&Ie(n,o=>{o.attr("contenteditable",o.attr(Lb))})}),e.serializer.addTempAttr(Lb)},nq=e=>{e.serializer?b6(e):e.on("PreInit",()=>{b6(e)})},v6=e=>e.type==="click",oq=["copy"],sq=e=>fn(oq,e.type),rq=(e,n)=>hl(n,"a",r=>oo(r,se.fromDom(e.getBody()))).bind(r=>cl(r,"href")),nM=(e,n)=>{if(v6(n)&&!kt.metaKeyPressed(n)){const o=se.fromDom(n.target);rq(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const i=e.dom.select(`${r},[name="${xd(r,"#")}"]`);i.length&&e.selection.scrollIntoView(i[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else sq(n)&&e.dispatch(n.type,n)},aq=e=>{e.on("ShowCaret",n=>{Hb(e)&&n.preventDefault()}),e.on("ObjectSelected",n=>{Hb(e)&&n.preventDefault()})},iq=at.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class gr{static isNative(n){return!!iq[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Ke}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),i=ch(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(i);const u=this.bindings[r];if(u)for(let g=0,y=u.length;g<y;g++){const x=u[g];if(!x.removed){if(x.once&&this.off(r,x.func),i.isImmediatePropagationStopped())return i;if(x.func.call(this.scope,i)===!1)return i.preventDefault(),i}}return i}on(n,o,r,i){if(o===!1&&(o=Ke),o){const u={func:o,removed:!1};i&&at.extend(u,i);const g=n.toLowerCase().split(" ");let y=g.length;for(;y--;){const x=g[y];let A=this.bindings[x];A||(A=[],this.toggleEvent(x,!0)),r?A=[u,...A]:A=[...A,u],this.bindings[x]=A}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let i=r.length;for(;i--;){const u=r[i];let g=this.bindings[u];if(!u)return vt(this.bindings,(y,x)=>{this.toggleEvent(x,!1),delete this.bindings[x]}),this;if(g){if(!o)g.length=0;else{const y=sr(g,x=>x.func===o);g=y.fail,this.bindings[u]=g,Ie(y.pass,x=>{x.removed=!0})}g.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else vt(this.bindings,(r,i)=>{this.toggleEvent(i,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const m2=e=>(e._eventDispatcher||(e._eventDispatcher=new gr({scope:e,toggleEvent:(n,o)=>{gr.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),oM={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return ch(e.toLowerCase(),n??{},r);const i=m2(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!i.isPropagationStopped();)u.dispatch(e,i,!1),u=u.parent?u.parent():void 0}return i},on(e,n,o){return m2(this).on(e,n,o)},off(e,n){return m2(this).off(e,n)},once(e,n){return m2(this).once(e,n)},hasEventListeners(e){return m2(this).has(e)}},Cy=Zo.DOM;let kp;const Sy=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=Um(e);return o?(e.eventRoot||(e.eventRoot=Cy.select(o)[0]),e.eventRoot):e.getBody()},cq=e=>!e.hidden&&!Hb(e),y6=(e,n,o)=>{cq(e)?e.dispatch(n,o):Hb(e)&&nM(e,o)},w6=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=Sy(e,n);if(Um(e)){if(kp||(kp={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||kp&&(vt(kp,(i,u)=>{e.dom.unbind(Sy(e,u))}),kp=null)})),kp[n])return;const r=i=>{const u=i.target,g=e.editorManager.get();let y=g.length;for(;y--;){const x=g[y].getBody();(x===u||Cy.isChildOf(u,x))&&y6(g[y],n,i)}};kp[n]=r,Cy.bind(o,n,r)}else{const r=i=>{y6(e,n,i)};Cy.bind(o,n,r),e.delegates[n]=r}},C6={...oM,bindPendingEventDelegates(){const e=this;at.each(e._pendingNativeEvents,n=>{w6(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?w6(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(Sy(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(vt(e.delegates,(r,i)=>{e.dom.unbind(Sy(e,i),i,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},lq=e=>ee(e)?{value:e.split(/[ ,]/),valid:!0}:Pn(e,ee)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},uq=e=>{const n=(()=>{switch(e){case"array":return At;case"boolean":return yt;case"function":return ue;case"number":return Yn;case"object":return qe;case"string":return ee;case"string[]":return lq;case"object[]":return o=>Pn(o,qe);case"regexp":return o=>ze(o,RegExp);default:return St}})();return o=>yu(o,n,`The value must be a ${e}.`)},dq=e=>ee(e.processor),S6=(e,n)=>{const o=na(n.message)?"":`. ${n.message}`;return e+o},zb=e=>e.valid,yu=(e,n,o="")=>{const r=n(e);return yt(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},mq=(e,n,o)=>{if(!Dt(n)){const r=yu(n,o);if(zb(r))return r.value;console.error(S6(`Invalid default value passed for the "${e}" option`,r))}},fq=(e,n)=>{const o={},r={},i=(F,z,X)=>{const te=yu(z,X);return zb(te)?(r[F]=te.value,!0):(console.warn(S6(`Invalid value passed for the ${F} option`,te)),!1)},u=(F,z)=>{const X=dq(z)?uq(z.processor):z.processor,te=mq(F,z.default,X);o[F]={...z,default:te,processor:X},Fo(r,F).orThunk(()=>Fo(n,F)).each(ne=>i(F,ne,X))},g=F=>an(o,F);return{register:u,isRegistered:g,get:F=>Fo(r,F).orThunk(()=>Fo(o,F).map(z=>z.default)).getOrUndefined(),set:(F,z)=>{if(g(F)){const X=o[F];return X.immutable?(console.error(`"${F}" is an immutable option and cannot be updated`),!1):i(F,z,X.processor)}else return console.warn(`"${F}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:F=>{const z=g(F);return z&&delete r[F],z},isSet:F=>an(r,F)}},gq=["design","readonly"],x6=(e,n,o,r)=>{const i=o[n.get()],u=o[r];try{u.activate()}catch(g){console.error(`problem while activating editor mode ${r}:`,g);return}i.deactivate(),i.editorReadOnly!==u.editorReadOnly&&ck(e,u.editorReadOnly),n.set(r),NC(e,r)},hq=(e,n,o,r)=>{if(r!==o.get()){if(!an(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?x6(e,o,n,r):e.on("init",()=>x6(e,o,n,r))}},pq=(e,n,o)=>{if(fn(gq,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},bq=e=>{const n=Ss("design"),o=Ss({design:{activate:Rt,deactivate:Rt,editorReadOnly:!1},readonly:{activate:Rt,deactivate:Rt,editorReadOnly:!0}});return nq(e),aq(e),{isReadOnly:()=>Hb(e),set:r=>hq(e,o.get(),n,r),get:()=>n.get(),register:(r,i)=>{o.set(pq(o.get(),r,i))}}},sM=at.each,rM=at.explode,RY={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},E6=at.makeMap("alt,ctrl,shift,meta,access"),vq=e=>e in E6,yq=e=>{const n={},o=xt.os.isMacOS()||xt.os.isiOS();sM(rM(e.toLowerCase(),"+"),u=>{vq(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=RY[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let i;for(i in E6)n[i]?r.push(i):n[i]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class T6{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(sM(o.shortcuts,i=>{o.matchShortcut(r,i)&&(o.pendingPatterns=i.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(i))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,i){const u=this,g=u.normalizeCommandFunc(r);return sM(rM(at.trim(n)),y=>{const x=u.createShortcut(y,o,g,i);u.shortcuts[x.id]=x}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:at.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,i){const u=at.map(rM(n,">"),yq);return u[u.length-1]=at.extend(u[u.length-1],{func:r,scope:i||this.editor}),at.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const wq=()=>{const e={},n={},o={},r={},i={},u={},g={},y={},x=(I,F)=>(z,X)=>{I[z.toLowerCase()]={...X,type:F}},A=(I,F)=>r[I.toLowerCase()]=F;return{addButton:x(e,"button"),addGroupToolbarButton:x(e,"grouptoolbarbutton"),addToggleButton:x(e,"togglebutton"),addMenuButton:x(e,"menubutton"),addSplitButton:x(e,"splitbutton"),addMenuItem:x(n,"menuitem"),addNestedMenuItem:x(n,"nestedmenuitem"),addToggleMenuItem:x(n,"togglemenuitem"),addAutocompleter:x(o,"autocompleter"),addContextMenu:x(i,"contextmenu"),addContextToolbar:x(u,"contexttoolbar"),addContextForm:x(u,"contextform"),addSidebar:x(g,"sidebar"),addView:x(y,"views"),addIcon:A,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:i,contextToolbars:u,sidebars:g,views:y})}},Cq=()=>{const e=wq();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},xy=Zo.DOM,_6=at.extend,Sq=at.each;class lk{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,_6(this,C6);const i=this;this.id=n,this.hidden=!1;const u=kG(r.defaultOptions,o);this.options=fq(i,u),mx(i);const g=this.options.get;g("deprecation_warnings")&&YK(o,u);const y=g("suffix");y&&(r.suffix=y),this.suffix=r.suffix;const x=g("base_url");x&&r._setBaseUrl(x),this.baseUri=r.baseURI;const A=Dn(i);A&&(mr.ScriptLoader._setReferrerPolicy(A),Zo.DOM.styleSheetLoader._setReferrerPolicy(A));const I=kh(i);Te(I)&&Zo.DOM.styleSheetLoader._setContentCssCors(I),Fa.languageLoad=g("language_load"),Fa.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new hu(Vw(i),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Jw(i),this.hasVisual=RO(i),this.shortcuts=new T6(this),this.editorCommands=new eM(this),ak(this);const F=g("cache_suffix");F&&(xt.cacheSuffix=F.replace(/^[\?\&]+/,"")),this.ui={registry:Cq(),styleSheetLoader:void 0,show:Rt,hide:Rt,setEnabled:Rt,isEnabled:St},this.mode=bq(i),r.dispatch("SetupEditor",{editor:this});const z=Qw(i);ue(z)&&z.call(i,i)}render(){GR(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return Jh(this)}translate(n){return yl.translate(n)}getParam(n,o,r){const i=this.options;return i.isRegistered(n)||(Te(r)?i.register(n,{processor:r,default:o}):i.register(n,{processor:St,default:o})),!i.isSet(n)&&!Dt(o)?o:i.get(n)}hasPlugin(n,o){return fn($1(this),n)?o?Tb.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,i){this.shortcuts.add(n,o,r,i)}execCommand(n,o,r,i){return this.editorCommands.execCommand(n,o,r,i)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(xy.show(n.getContainer()),xy.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(xy.hide(n.getContainer()),xy.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const i={...n,load:!0},u=gv(r)?r.value:r.innerHTML,g=o.setContent(u,i);return i.no_events||o.dispatch("LoadContent",{...i,element:r}),g}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const i={...n,save:!0,element:r};let u=o.getContent(i);const g={...i,content:u};if(g.no_events||o.dispatch("SaveContent",g),g.format==="raw"&&o.dispatch("RawSaveContent",g),u=g.content,gv(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const y=xy.getParent(o.id,"form");y&&Sq(y.elements,x=>x.name===o.id?(x.value=u,!1):!0)}return g.element=i.element=r=null,g.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return DD(this,n,o)}getContent(n){return C$(this,n)}insertContent(n,o){o&&(n=_6({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?DD(this,this.startContent,{format:"raw"}):DD(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||xy.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=xy.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const i=this,u=i.options.get,g=BO(i);if(ue(g))return g.call(i,n,r,!0,o);if(!u("convert_urls")||r==="link"||qe(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const y=new hu(n);return y.protocol!=="http"&&y.protocol!=="https"&&y.protocol!==""?n:u("relative_urls")?i.documentBaseURI.toRelative(n):(n=i.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){OG(this,n)}setEditableRoot(n){nk(this,n)}hasEditableRoot(){return ok(this)}remove(){aV(this)}destroy(n){iV(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Ey=Zo.DOM,uk=at.each;let k6=!1,dk,_c=[];const mk=e=>{const n=e.type;uk(Op.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},O6=e=>{if(e!==k6){const n=Zo.DOM;e?(n.bind(window,"resize",mk),n.bind(window,"scroll",mk)):(n.unbind(window,"resize",mk),n.unbind(window,"scroll",mk)),k6=e}},A6=e=>{const n=_c;return _c=Zt(_c,o=>e!==o),Op.activeEditor===e&&(Op.activeEditor=_c.length>0?_c[0]:null),Op.focusedEditor===e&&(Op.focusedEditor=null),n.length!==_c.length},xq=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(A6(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},Eq=document.compatMode!=="CSS1Compat",Op={...oM,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"8.6",releaseDate:"TBD",i18n:yl,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=hu.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const i=window.tinymce||window.tinyMCEPreInit;if(i)n=i.base||i.baseURL,o=i.suffix;else{const u=document.getElementsByTagName("script");for(let g=0;g<u.length;g++){const y=u[g].src||"";if(y==="")continue;const x=y.substring(y.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(y)){x.indexOf(".min")!==-1&&(o=".min"),n=y.substring(0,y.lastIndexOf("/"));break}}if(!n&&document.currentScript){const g=document.currentScript.src;g.indexOf(".min")!==-1&&(o=".min"),n=g.substring(0,g.lastIndexOf("/"))}}e.baseURL=new hu(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new hu(e.baseURL),e.suffix=o,$8(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&vt(r,(i,u)=>{Fa.PluginManager.urls[u]=i})},init(e){const n=this;let o;const r=at.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),i=(I,F)=>I.inline&&F.tagName.toLowerCase()in r,u=I=>{let F=I.id;return F||(F=Fo(I,"name").filter(z=>!Ey.get(z)).getOrThunk(Ey.uniqueId),I.setAttribute("id",F)),F},g=I=>{const F=e[I];if(F)return F.apply(n,[])},y=I=>xt.browser.isIE()||xt.browser.isEdge()?(OS("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):Eq?(OS("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):ee(I.selector)?Ey.select(I.selector):Te(I.target)?[I.target]:[];let x=I=>{o=I};const A=()=>{let I=0;const F=[];let z;const X=(te,K,ne)=>{const ge=new lk(te,K,n);F.push(ge),ge.on("init",()=>{++I===z.length&&x(F)}),ge.targetElm=ge.targetElm||ne,ge.render()};Ey.unbind(window,"ready",A),g("onpageload"),z=Cd(y(e)),at.each(z,te=>{xq(n.get(te.id))}),z=at.grep(z,te=>!n.get(te.id)),z.length===0?x([]):uk(z,te=>{i(e,te)?OS("Could not initialize inline editor on invalid inline target element",te):X(u(te),e,te)})};return Ey.bind(window,"ready",A),new Promise(I=>{o?I(o):x=F=>{I(F)}})},get(e){return arguments.length===0?_c.slice(0):ee(e)?_s(_c,n=>n.id===e).getOr(null):Yn(e)&&_c[e]?_c[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&_c.push(e),O6(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),dk||(dk=r=>{const i=n.dispatch("BeforeUnload");if(i.returnValue)return r.preventDefault(),r.returnValue=i.returnValue,i.returnValue},window.addEventListener("beforeunload",dk))),e},createEditor(e,n){return this.add(new lk(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=_c.length-1;r>=0;r--)n.remove(_c[r]);return}if(ee(e)){uk(Ey.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,ae(n.get(o.id))?null:(A6(o)&&n.dispatch("RemoveEditor",{editor:o}),_c.length===0&&window.removeEventListener("beforeunload",dk),o.remove(),O6(_c.length>0),o)},execCommand(e,n,o){var r;const i=this,u=qe(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!i.get(u)){const g=o.options;new lk(u,g,i).render()}return!0}case"mceRemoveEditor":{const g=i.get(u);return g&&g.remove(),!0}case"mceToggleEditor":{const g=i.get(u);return g?(g.isHidden()?g.show():g.hide(),!0):(i.execCommand("mceAddEditor",!1,o),!0)}}return i.activeEditor?i.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{uk(_c,e=>{e.save()})},addI18n:(e,n)=>{yl.add(e,n)},translate:e=>yl.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new hu(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new hu(this.baseURL)}};Op.setup();const Tq=(()=>{const e=Fm(),n=u=>({items:u,types:Ar(u),getType:g=>Fo(u,g).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),i=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:i}})(),aM=Math.min,Ty=Math.max,fk=Math.round,D6=(e,n,o)=>{let r=n.x,i=n.y;const u=e.w,g=e.h,y=n.w,x=n.h,A=(o||"").split("");return A[0]==="b"&&(i+=x),A[1]==="r"&&(r+=y),A[0]==="c"&&(i+=fk(x/2)),A[1]==="c"&&(r+=fk(y/2)),A[3]==="b"&&(i-=g),A[4]==="r"&&(r-=u),A[3]==="c"&&(i-=fk(g/2)),A[4]==="c"&&(r-=fk(u/2)),_y(r,i,u,g)},_q=(e,n,o,r)=>{for(let i=0;i<r.length;i++){const u=D6(e,n,r[i]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[i]}return null},kq=(e,n,o)=>_y(e.x-n,e.y-o,e.w+n*2,e.h+o*2),Oq=(e,n)=>{const o=Ty(e.x,n.x),r=Ty(e.y,n.y),i=aM(e.x+e.w,n.x+n.w),u=aM(e.y+e.h,n.y+n.h);return i-o<0||u-r<0?null:_y(o,r,i-o,u-r)},Aq=(e,n,o)=>{let r=e.x,i=e.y,u=e.x+e.w,g=e.y+e.h;const y=n.x+n.w,x=n.y+n.h,A=Ty(0,n.x-r),I=Ty(0,n.y-i),F=Ty(0,u-y),z=Ty(0,g-x);return r+=A,i+=I,o&&(u+=A,g+=I,r-=F,i-=z),u-=F,g-=z,_y(r,i,u-r,g-i)},_y=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),Rq={inflate:kq,relativePosition:D6,findBestRelativePosition:_q,intersect:Oq,clamp:Aq,create:_y,fromClientRect:e=>_y(e.left,e.top,e.width,e.height)},Mq=(e,n,o=1e3)=>{let r=!1,i=null;const u=A=>(...I)=>{r||(r=!0,i!==null&&(clearTimeout(i),i=null),A.apply(null,I))},g=u(e),y=u(n);return{start:(...A)=>{!r&&i===null&&(i=setTimeout(()=>y.apply(null,A),o))},resolve:g,reject:y}},Nq=(()=>{const e={},n={},o={};return{load:(x,A)=>{const I=`Script at URL "${A}" failed to load`,F=`Script at URL "${A}" did not call \`tinymce.Resource.add('${x}', data)\` within 1 second`;if(e[x]!==void 0)return e[x];{const z=new Promise((X,te)=>{const K=Mq(X,te);n[x]=K.resolve,mr.ScriptLoader.loadScript(A).then(()=>K.start(F),()=>K.reject(I))});return e[x]=z,z}},add:(x,A)=>{n[x]!==void 0&&(n[x](A),delete n[x]),e[x]=Promise.resolve(A),o[x]=A},has:x=>x in o,get:x=>o[x],unload:x=>{delete e[x]}}})(),Pq=()=>(()=>{let e={},n=[];const o={getItem:r=>{const i=e[r];return i||null},setItem:(r,i)=>{n.push(r),e[r]=String(i)},key:r=>n[r],removeItem:r=>{n=n.filter(i=>i===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let f2;try{const e="__storage_test__";f2=window.localStorage,f2.setItem(e,e),f2.removeItem(e)}catch{f2=Pq()}var Bq=f2;const $q={geom:{Rect:Rq},util:{Delay:Tl,Tools:at,VK:kt,URI:hu,EventDispatcher:gr,Observable:oM,I18n:yl,LocalStorage:Bq,ImageUploader:TV},dom:{EventUtils:Yi,TreeWalker:Wo,TextSeeker:Lm,DOMUtils:Zo,ScriptLoader:mr,RangeUtils:G,Serializer:y$,StyleSheetLoader:lw,ControlSelection:nN,BookmarkManager:cg,Selection:dp,Event:Yi.Event},html:{Styles:Ov,Entities:jf,Node:Ti,Schema:Hd,DomParser:id,Writer:kN,Serializer:Qh},Env:xt,AddOnManager:Fa,Annotator:DC,Formatter:FD,UndoManager:LD,EditorCommands:eM,WindowManager:A$,NotificationManager:ND,EditorObservable:C6,Shortcuts:T6,Editor:lk,FocusManager:iN,EditorManager:Op,DOM:Zo.DOM,ScriptLoader:mr.ScriptLoader,PluginManager:Tb,ThemeManager:Sg,ModelManager:bu,IconManager:TS,Resource:Nq,FakeClipboard:Tq,trim:at.trim,isArray:at.isArray,is:at.is,toArray:at.toArray,makeMap:at.makeMap,each:at.each,map:at.map,grep:at.grep,inArray:at.inArray,extend:at.extend,walk:at.walk,resolve:at.resolve,explode:at.explode,_addCacheSuffix:at._addCacheSuffix},iM=at.extend(Op,$q),PY=e=>{try{w.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(iM),PY(iM)})()})(MJ);var roe=MJ.exports;const _K=IM(roe);tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){const w=Object.getPrototypeOf,f=(t,s,a)=>{var c;return a(t,s.prototype)?!0:((c=t.constructor)===null||c===void 0?void 0:c.name)===s.name},p=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&f(t,String,(a,c)=>c.isPrototypeOf(a))?"string":s},C=t=>s=>p(s)===t,O=t=>s=>typeof s===t,$=t=>s=>t===s,P=(t,s)=>J(t)&&f(t,s,(a,c)=>w(a)===c),W=C("string"),J=C("object"),re=t=>P(t,Object),me=C("array"),pe=$(null),Oe=O("boolean"),je=$(void 0),De=t=>t==null,Je=t=>!De(t),Ye=O("function"),en=O("number"),ze=(t,s)=>{if(me(t)){for(let a=0,c=t.length;a<c;++a)if(!s(t[a]))return!1;return!0}return!1},ee=()=>{},qe=t=>()=>t(),Sn=(t,s)=>(...a)=>t(s.apply(null,a)),At=(t,s)=>a=>t(s(a)),ae=t=>()=>t,yt=t=>t,Dt=(t,s)=>t===s;function Ht(t,...s){return(...a)=>{const c=s.concat(a);return t.apply(null,c)}}const Te=t=>s=>!t(s),ue=t=>()=>{throw new Error(t)},Yn=t=>t(),Pn=ae(!1),Rt=ae(!0);class R{constructor(s,a){this.tag=s,this.value=a}static some(s){return new R(!0,s)}static none(){return R.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?R.some(s(this.value)):R.none()}bind(s){return this.tag?s(this.value):R.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:R.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return Je(s)?R.some(s):R.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}R.singletonNone=new R(!1);const So=Array.prototype.slice,gt=Array.prototype.indexOf,Ro=Array.prototype.push,tn=(t,s)=>gt.call(t,s),Ge=(t,s)=>{const a=tn(t,s);return a===-1?R.none():R.some(a)},yo=(t,s)=>tn(t,s)>-1,kr=(t,s)=>{for(let a=0,c=t.length;a<c;a++){const d=t[a];if(s(d,a))return!0}return!1},us=(t,s)=>{const a=[];for(let c=0;c<t;c++)a.push(s(c));return a},Fr=(t,s)=>{const a=[];for(let c=0;c<t.length;c+=s){const d=So.call(t,c,c+s);a.push(d)}return a},Ke=(t,s)=>{const a=t.length,c=new Array(a);for(let d=0;d<a;d++){const h=t[d];c[d]=s(h,d)}return c},St=(t,s)=>{for(let a=0,c=t.length;a<c;a++){const d=t[a];s(d,a)}},Z=(t,s)=>{for(let a=t.length-1;a>=0;a--){const c=t[a];s(c,a)}},Dc=(t,s)=>{const a=[],c=[];for(let d=0,h=t.length;d<h;d++){const v=t[d];(s(v,d)?a:c).push(v)}return{pass:a,fail:c}},ko=(t,s)=>{const a=[];for(let c=0,d=t.length;c<d;c++){const h=t[c];s(h,c)&&a.push(h)}return a},Ns=(t,s,a)=>(Z(t,(c,d)=>{a=s(a,c,d)}),a),Io=(t,s,a)=>(St(t,(c,d)=>{a=s(a,c,d)}),a),Pg=(t,s,a)=>{for(let c=0,d=t.length;c<d;c++){const h=t[c];if(s(h,c))return R.some(h);if(a(h,c))break}return R.none()},fn=(t,s)=>Pg(t,s,Pn),Yo=(t,s)=>{for(let a=0,c=t.length;a<c;a++){const d=t[a];if(s(d,a))return R.some(a)}return R.none()},Wt=t=>{const s=[];for(let a=0,c=t.length;a<c;++a){if(!me(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);Ro.apply(s,t[a])}return s},Ie=(t,s)=>Wt(Ke(t,s)),uo=(t,s)=>{for(let a=0,c=t.length;a<c;++a){const d=t[a];if(s(d,a)!==!0)return!1}return!0},sr=t=>{const s=So.call(t,0);return s.reverse(),s},Zt=(t,s)=>ko(t,a=>!yo(s,a)),$l=(t,s)=>{const a={};for(let c=0,d=t.length;c<d;c++){const h=t[c];a[String(h)]=s(h,c)}return a},ss=t=>[t],Eu=(t,s)=>{const a=So.call(t,0);return a.sort(s),a},_s=(t,s)=>s>=0&&s<t.length?R.some(t[s]):R.none(),Jr=t=>_s(t,0),pm=t=>_s(t,t.length-1),Ka=Ye(Array.from)?Array.from:t=>So.call(t),Js=(t,s)=>{for(let a=0;a<t.length;a++){const c=s(t[a],a);if(c.isSome())return c}return R.none()},ns=Object.keys,wd=Object.hasOwnProperty,Xo=(t,s)=>{const a=ns(t);for(let c=0,d=a.length;c<d;c++){const h=a[c],v=t[h];s(v,h)}},Jo=(t,s)=>ol(t,(a,c)=>({k:c,v:s(a,c)})),ol=(t,s)=>{const a={};return Xo(t,(c,d)=>{const h=s(c,d);a[h.k]=h.v}),a},js=t=>(s,a)=>{t[a]=s},Pi=(t,s,a,c)=>{Xo(t,(d,h)=>{(s(d,h)?a:c)(d,h)})},Or=(t,s)=>{const a={},c={};return Pi(t,s,js(a),js(c)),{t:a,f:c}},Rc=(t,s)=>{const a={};return Pi(t,s,js(a),ee),a},Cd=(t,s)=>{const a=[];return Xo(t,(c,d)=>{a.push(s(c,d))}),a},Ar=(t,s)=>{const a=ns(t);for(let c=0,d=a.length;c<d;c++){const h=a[c],v=t[h];if(s(v,h,t))return R.some(v)}return R.none()},bm=t=>Cd(t,yt),vt=(t,s)=>no(t,s)?R.from(t[s]):R.none(),no=(t,s)=>wd.call(t,s),Qr=(t,s)=>no(t,s)&&t[s]!==void 0&&t[s]!==null,Ma=(t,s,a=Dt)=>t.exists(c=>a(c,s)),vm=(t,s,a=Dt)=>$i(t,s,a).getOr(t.isNone()&&s.isNone()),Bi=t=>{const s=[],a=c=>{s.push(c)};for(let c=0;c<t.length;c++)t[c].each(a);return s},Uo=t=>{const s=[];for(let a=0;a<t.length;a++){const c=t[a];if(c.isSome())s.push(c.getOrDie());else return R.none()}return R.some(s)},$i=(t,s,a)=>t.isSome()&&s.isSome()?R.some(a(t.getOrDie(),s.getOrDie())):R.none(),sl=(t,s,a,c)=>t.isSome()&&s.isSome()&&a.isSome()?R.some(c(t.getOrDie(),s.getOrDie(),a.getOrDie())):R.none(),Fo=(t,s)=>t!=null?R.some(s(t)):R.none(),an=(t,s)=>t?R.some(s):R.none(),ba=(t,s)=>t+s,rl=(t,s)=>t.substring(s),Il=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,ym=(t,s)=>ks(t,s)?rl(t,s.length):t,ea=(t,s)=>Ii(t,s)?t:ba(t,s),rr=(t,s,a=0,c)=>{const d=t.indexOf(s,a);return d!==-1?je(c)?!0:d+s.length<=c:!1},ks=(t,s)=>Il(t,s,0),Ii=(t,s)=>Il(t,s,t.length-s.length),al=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),Na=t=>t.length>0,vs=t=>!Na(t),Ya=t=>t.style!==void 0&&Ye(t.style.getPropertyValue),Fl=(t,s)=>{const c=(s||document).createElement("div");if(c.innerHTML=t,!c.hasChildNodes()||c.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return Mc(c.childNodes[0])},Wp=(t,s)=>{const c=(s||document).createElement(t);return Mc(c)},Tu=(t,s)=>{const c=(s||document).createTextNode(t);return Mc(c)},Mc=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},we={fromHtml:Fl,fromTag:Wp,fromText:Tu,fromDom:Mc,fromPoint:(t,s,a)=>R.from(t.dom.elementFromPoint(s,a)).map(Mc)},ta=typeof window<"u"?window:Function("return this;")(),Ll=(t,s)=>{let a=s??ta;for(let c=0;c<t.length&&a!==void 0&&a!==null;++c)a=a[t[c]];return a},Cf=(t,s)=>{const a=t.split(".");return Ll(a,s)},Sd=(t,s)=>Cf(t,s),Lo=(t,s)=>{const a=Sd(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},Bg=Object.getPrototypeOf,Sf=t=>Lo("HTMLElement",t),_u=t=>{const s=Cf("ownerDocument.defaultView",t);return J(t)&&(Sf(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Bg(t).constructor.name))},xd=9,br=11,Ps=1,Xa=3,Ja=t=>t.dom.nodeName.toLowerCase(),Hl=t=>t.dom.nodeType,Ed=t=>s=>Hl(s)===t,ku=t=>po(t)&&_u(t.dom),po=Ed(Ps),na=Ed(Xa),rc=Ed(xd),il=Ed(br),ui=t=>s=>po(s)&&Ja(s)===t,Gs=(t,s)=>{const a=t.dom;if(a.nodeType!==Ps)return!1;{const c=a;if(c.matches!==void 0)return c.matches(s);if(c.msMatchesSelector!==void 0)return c.msMatchesSelector(s);if(c.webkitMatchesSelector!==void 0)return c.webkitMatchesSelector(s);if(c.mozMatchesSelector!==void 0)return c.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Qo=t=>t.nodeType!==Ps&&t.nodeType!==xd&&t.nodeType!==br||t.childElementCount===0,va=(t,s)=>{const a=s===void 0?document:s.dom;return Qo(a)?[]:Ke(a.querySelectorAll(t),we.fromDom)},xf=(t,s)=>{const a=s===void 0?document:s.dom;return Qo(a)?R.none():R.from(a.querySelector(t)).map(we.fromDom)},wo=(t,s)=>t.dom===s.dom,Lr=(t,s)=>{const a=t.dom,c=s.dom;return a===c?!1:a.contains(c)},Pa=t=>we.fromDom(t.dom.ownerDocument),ar=t=>rc(t)?t:Pa(t),Nc=t=>we.fromDom(ar(t).dom.documentElement),Pc=t=>we.fromDom(ar(t).dom.defaultView),oa=t=>R.from(t.dom.parentNode).map(we.fromDom),Bc=t=>oa(t),Fi=t=>R.from(t.dom.parentElement).map(we.fromDom),$g=(t,s)=>{const a=Ye(s)?s:Pn;let c=t.dom;const d=[];for(;c.parentNode!==null&&c.parentNode!==void 0;){const h=c.parentNode,v=we.fromDom(h);if(d.push(v),a(v)===!0)break;c=h}return d},$c=t=>R.from(t.dom.offsetParent).map(we.fromDom),Ig=t=>R.from(t.dom.nextSibling).map(we.fromDom),di=t=>Ke(t.dom.childNodes,we.fromDom),zl=(t,s)=>{const a=t.dom.childNodes;return R.from(a[s]).map(we.fromDom)},Ef=t=>zl(t,0),Tf=(t,s)=>({element:t,offset:s}),Fg=(t,s)=>{const a=di(t);return a.length>0&&s<a.length?Tf(a[s],0):Tf(t,s)},q=t=>il(t)&&Je(t.dom.host),le=Ye(Element.prototype.attachShadow)&&Ye(Node.prototype.getRootNode),ye=ae(le),Be=le?t=>we.fromDom(t.dom.getRootNode()):ar,ot=t=>q(t)?t:we.fromDom(ar(t).dom.body),rn=t=>Oo(t).isSome(),Oo=t=>{const s=Be(t);return q(s)?R.some(s):R.none()},es=t=>we.fromDom(t.dom.host),xo=t=>{if(ye()&&Je(t.target)){const s=we.fromDom(t.target);if(po(s)&&ds(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return Jr(a)}}return R.from(t.target)},ds=t=>Je(t.dom.shadowRoot),Xn=t=>{const s=na(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return Oo(we.fromDom(s)).fold(()=>a.body.contains(s),At(Xn,es))},Os=()=>Qa(we.fromDom(document)),Qa=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return we.fromDom(s)},Lg=(t,s,a)=>{if(W(a)||Oe(a)||en(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},xt=(t,s,a)=>{Lg(t.dom,s,a)},_f=(t,s)=>{const a=t.dom;Xo(s,(c,d)=>{Lg(a,d,c)})},As=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},Hr=(t,s)=>R.from(As(t,s)),jp=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},ys=(t,s)=>{t.dom.removeAttribute(s)},Hy=t=>Io(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),Vl=(t,s,a)=>{if(!W(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);Ya(t)&&t.style.setProperty(s,a)},kf=(t,s)=>{Ya(t)&&t.style.removeProperty(s)},bn=(t,s,a)=>{const c=t.dom;Vl(c,s,a)},ei=(t,s)=>{const a=t.dom;Xo(s,(c,d)=>{Vl(a,d,c)})},at=(t,s)=>{const a=t.dom;Xo(s,(c,d)=>{c.fold(()=>{kf(a,d)},h=>{Vl(a,d,h)})})},Ds=(t,s)=>{const a=t.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!Xn(t)?Of(a,s):d},Of=(t,s)=>Ya(t)?t.style.getPropertyValue(s):"",qs=(t,s)=>{const a=t.dom,c=Of(a,s);return R.from(c).filter(d=>d.length>0)},Dr=t=>{const s={},a=t.dom;if(Ya(a))for(let c=0;c<a.style.length;c++){const d=a.style.item(c);s[d]=a.style[d]}return s},Ul=(t,s,a)=>{const c=we.fromTag(t);return bn(c,s,a),qs(c,s).isSome()},eo=(t,s)=>{const a=t.dom;kf(a,s),Ma(Hr(t,"style").map(al),"")&&ys(t,"style")},mi=t=>t.dom.offsetWidth,vr=(t,s)=>{const a=(E,T)=>{if(!en(T)&&!T.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+T);const D=E.dom;Ya(D)&&(D.style[t]=T+"px")},c=E=>{const T=s(E);if(T<=0||T===null){const D=Ds(E,t);return parseFloat(D)||0}return T},d=c,h=(E,T)=>Io(T,(D,N)=>{const L=Ds(E,N),V=L===void 0?0:parseInt(L,10);return isNaN(V)?D:D+V},0);return{set:a,get:c,getOuter:d,aggregate:h,max:(E,T,D)=>{const N=h(E,D);return T>N?T-N:0}}},Td=vr("height",t=>{const s=t.dom;return Xn(t)?s.getBoundingClientRect().height:s.offsetHeight}),ms=t=>Td.get(t),_d=t=>Td.getOuter(t),Gp=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],c=Td.max(t,s,a);bn(t,"max-height",c+"px")},qp=(t,s)=>({left:t,top:s,translate:(c,d)=>qp(t+c,s+d)}),io=qp,Kp=t=>{const s=t.getBoundingClientRect();return io(s.left,s.top)},Ou=(t,s)=>t!==void 0?t:s!==void 0?s:0,ac=t=>{const s=t.dom.ownerDocument,a=s.body,c=s.defaultView,d=s.documentElement;if(a===t.dom)return io(a.offsetLeft,a.offsetTop);const h=Ou(c==null?void 0:c.pageYOffset,d.scrollTop),v=Ou(c==null?void 0:c.pageXOffset,d.scrollLeft),E=Ou(d.clientTop,a.clientTop),T=Ou(d.clientLeft,a.clientLeft);return Ic(t).translate(v-T,h-E)},Ic=t=>{const s=t.dom,c=s.ownerDocument.body;return c===s?io(c.offsetLeft,c.offsetTop):Xn(t)?Kp(s):io(0,0)},Af=vr("width",t=>t.dom.offsetWidth),Jn=(t,s)=>Af.set(t,s),ir=t=>Af.get(t),Ba=t=>Af.getOuter(t),Qb=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],c=Af.max(t,s,a);bn(t,"max-width",c+"px")},fs=t=>{let s=!1,a;return(...c)=>(s||(s=!0,a=t.apply(null,c)),a)},zr=(t,s,a,c)=>{const d=t.isiOS()&&/ipad/i.test(a)===!0,h=t.isiOS()&&!d,v=t.isiOS()||t.isAndroid(),E=v||c("(pointer:coarse)"),T=d||!h&&v&&c("(min-device-width:768px)"),D=h||v&&!T,N=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,L=!D&&!T&&!N;return{isiPad:ae(d),isiPhone:ae(h),isTablet:ae(T),isPhone:ae(D),isTouch:ae(E),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:ae(N),isDesktop:ae(L)}},Vr=(t,s)=>{for(let a=0;a<t.length;a++){const c=t[a];if(c.test(s))return c}},ev=(t,s)=>{const a=Vr(t,s);if(!a)return{major:0,minor:0};const c=d=>Number(s.replace(a,"$"+d));return Hg(c(1),c(2))},Yp=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?Li():ev(t,a)},Li=()=>Hg(0,0),Hg=(t,s)=>({major:t,minor:s}),ts={nu:Hg,detect:Yp,unknown:Li},Fc=(t,s)=>Js(s.brands,a=>{const c=a.brand.toLowerCase();return fn(t,d=>{var h;return c===((h=d.brand)===null||h===void 0?void 0:h.toLowerCase())}).map(d=>({current:d.name,version:ts.nu(parseInt(a.version,10),0)}))}),ya=(t,s)=>{const a=String(s).toLowerCase();return fn(t,c=>c.search(a))},cl=(t,s)=>ya(t,s).map(a=>{const c=ts.detect(a.versionRegexes,s);return{current:a.name,version:c}}),Au=(t,s)=>ya(t,s).map(a=>{const c=ts.detect(a.versionRegexes,s);return{current:a.name,version:c}}),Bs=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Lc=t=>s=>rr(s,t),Cm=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>rr(t,"edge/")&&rr(t,"chrome")&&rr(t,"safari")&&rr(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Bs],search:t=>rr(t,"chrome")&&!rr(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>rr(t,"msie")||rr(t,"trident")},{name:"Opera",versionRegexes:[Bs,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Lc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Lc("firefox")},{name:"Safari",versionRegexes:[Bs,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(rr(t,"safari")||rr(t,"mobile/"))&&rr(t,"applewebkit")}],Df=[{name:"Windows",search:Lc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>rr(t,"iphone")||rr(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Lc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Lc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Lc("linux"),versionRegexes:[]},{name:"Solaris",search:Lc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Lc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Lc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],tv={browsers:ae(Cm),oses:ae(Df)},nv="Edge",ll="Chromium",zg="IE",ti="Opera",Vg="Firefox",ov="Safari",Du=()=>Xp({current:void 0,version:ts.unknown()}),Xp=t=>{const s=t.current,a=t.version,c=d=>()=>s===d;return{current:s,version:a,isEdge:c(nv),isChromium:c(ll),isIE:c(zg),isOpera:c(ti),isFirefox:c(Vg),isSafari:c(ov)}},ul={unknown:Du,nu:Xp},zy="Windows",kd="iOS",Vy="Android",Uy="Linux",Wy="macOS",Rf="Solaris",Zy="FreeBSD",se="ChromeOS",Ru=()=>Hi({current:void 0,version:ts.unknown()}),Hi=t=>{const s=t.current,a=t.version,c=d=>()=>s===d;return{current:s,version:a,isWindows:c(zy),isiOS:c(kd),isAndroid:c(Vy),isMacOS:c(Wy),isLinux:c(Uy),isSolaris:c(Rf),isFreeBSD:c(Zy),isChromeOS:c(se)}},Sm={unknown:Ru,nu:Hi},jy={detect:(t,s,a)=>{const c=tv.browsers(),d=tv.oses(),h=s.bind(T=>Fc(c,T)).orThunk(()=>cl(c,t)).fold(ul.unknown,ul.nu),v=Au(d,t).fold(Sm.unknown,Sm.nu),E=zr(v,h,t,a);return{browser:h,os:v,deviceType:E}}},oo=t=>window.matchMedia(t).matches;let wa=fs(()=>jy.detect(navigator.userAgent,R.from(navigator.userAgentData),oo));const dl=()=>wa(),Wl=(t,s,a,c,d,h,v)=>({target:t,x:s,y:a,stop:c,prevent:d,kill:h,raw:v}),Mu=t=>{const s=we.fromDom(xo(t).getOr(t.target)),a=()=>t.stopPropagation(),c=()=>t.preventDefault(),d=Sn(c,a);return Wl(s,t.clientX,t.clientY,a,c,d,t)},ml=(t,s)=>a=>{t(a)&&s(Mu(a))},sa=(t,s,a,c,d)=>{const h=ml(a,c);return t.dom.addEventListener(s,h,d),{unbind:Ht(rv,t,s,h,d)}},Zl=(t,s,a,c)=>sa(t,s,a,c,!1),sv=(t,s,a,c)=>sa(t,s,a,c,!0),rv=(t,s,a,c)=>{t.dom.removeEventListener(s,a,c)},Hc=(t,s)=>{oa(t).each(c=>{c.dom.insertBefore(s.dom,t.dom)})},fl=(t,s)=>{Ig(t).fold(()=>{oa(t).each(d=>{Ca(d,s)})},c=>{Hc(c,s)})},Qp=(t,s)=>{Ef(t).fold(()=>{Ca(t,s)},c=>{t.dom.insertBefore(s.dom,c.dom)})},Ca=(t,s)=>{t.dom.appendChild(s.dom)},cr=(t,s,a)=>{zl(t,a).fold(()=>{Ca(t,s)},c=>{Hc(c,s)})},Od=(t,s)=>{St(s,a=>{Ca(t,a)})},Mf=t=>{t.dom.textContent="",St(di(t),s=>{zc(s)})},zc=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},$a=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,c=s.body.scrollTop||s.documentElement.scrollTop;return io(a,c)},av=(t,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(t,s)},Gy=t=>{const s=t===void 0?window:t;return dl().browser.isFirefox()?R.none():R.from(s.visualViewport)},Ug=(t,s,a,c)=>({x:t,y:s,width:a,height:c,right:t+a,bottom:s+c}),Wg=t=>{const s=t===void 0?window:t,a=s.document,c=$a(we.fromDom(a));return Gy(s).fold(()=>{const d=s.document.documentElement,h=d.clientWidth,v=d.clientHeight;return Ug(c.left,c.top,h,v)},d=>Ug(Math.max(d.pageLeft,c.left),Math.max(d.pageTop,c.top),d.width,d.height))},xm=()=>we.fromDom(document),gl=(t,s)=>t.view(s).fold(ae([]),c=>{const d=t.owner(c),h=gl(t,d);return[c].concat(h)}),iv=(t,s)=>{const a=s.owner(t),c=gl(s,a);return R.some(c)};var Ky=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?R.none():R.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(we.fromDom)},owner:t=>Pa(t)});const Ad=t=>{const s=xm(),a=$a(s);return iv(t,Ky).fold(Ht(ac,t),d=>{const h=Ic(t),v=Ns(d,(E,T)=>{const D=Ic(T);return{left:E.left+D.left,top:E.top+D.top}},{left:0,top:0});return io(v.left+h.left+a.left,v.top+h.top+a.top)})},e1=(t,s,a)=>({point:t,width:s,height:a}),Em=(t,s,a,c)=>({x:t,y:s,width:a,height:c}),gs=(t,s,a,c)=>({x:t,y:s,width:a,height:c,right:t+a,bottom:s+c}),ws=t=>{const s=ac(t),a=Ba(t),c=_d(t);return gs(s.left,s.top,a,c)},fi=t=>{const s=Ad(t),a=Ba(t),c=_d(t);return gs(s.left,s.top,a,c)},t1=(t,s)=>{const a=Math.max(t.x,s.x),c=Math.max(t.y,s.y),d=Math.min(t.right,s.right),h=Math.min(t.bottom,s.bottom),v=d-a,E=h-c;return gs(a,c,v,E)},Yy=(t,s)=>Io(s,(a,c)=>t1(a,c),t),Ur=()=>Wg(window);var Nu=tinymce.util.Tools.resolve("tinymce.ThemeManager");const gi=t=>{const s=h=>h(t),a=ae(t),c=()=>d,d={tag:!0,inner:t,fold:(h,v)=>v(t),isValue:Rt,isError:Pn,map:h=>xn.value(h(t)),mapError:c,bind:s,exists:s,forall:s,getOr:a,or:c,getOrThunk:a,orThunk:c,getOrDie:a,each:h=>{h(t)},toOptional:()=>R.some(t)};return d},hl=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(c,d)=>c(t),isValue:Pn,isError:Rt,map:s,mapError:c=>xn.error(c(t)),bind:s,exists:Pn,forall:Rt,getOr:yt,or:yt,getOrThunk:Yn,orThunk:Yn,getOrDie:ue(String(t)),each:ee,toOptional:R.none};return a},xn={value:gi,error:hl,fromOption:(t,s)=>t.fold(()=>hl(s),gi)};var ni;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(ni||(ni={}));const Pu=(t,s,a)=>t.stype===ni.Error?s(t.serror):a(t.svalue),Tm=t=>{const s=[],a=[];return St(t,c=>{Pu(c,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},n1=(t,s)=>t.stype===ni.Error?{stype:ni.Error,serror:s(t.serror)}:t,lv=(t,s)=>t.stype===ni.Value?{stype:ni.Value,svalue:s(t.svalue)}:t,Sa=(t,s)=>t.stype===ni.Value?s(t.svalue):t,Qs=(t,s)=>t.stype===ni.Error?s(t.serror):t,hi=t=>({stype:ni.Value,svalue:t}),er=t=>({stype:ni.Error,serror:t}),Fs={fromResult:t=>t.fold(er,hi),toResult:t=>Pu(t,xn.error,xn.value),svalue:hi,partition:Tm,serror:er,bind:Sa,bindError:Qs,map:lv,mapError:n1,fold:Pu},lr=(t,s,a,c)=>({tag:"field",key:t,newKey:s,presence:a,prop:c}),Vc=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),Nf=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},Ks=(t,s)=>s,o1=(t,s)=>re(t)&&re(s)?Eo(t,s):s,uv=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let c=0;c<s.length;c++){const d=s[c];for(const h in d)no(d,h)&&(a[h]=t(a[h],d[h]))}return a},Eo=uv(o1),Dd=uv(Ks),fo=()=>({tag:"required",process:{}}),Uc=t=>({tag:"defaultedThunk",process:t}),jg=t=>Uc(ae(t)),Pf=()=>({tag:"option",process:{}}),Nn=t=>({tag:"mergeWithThunk",process:t}),km=t=>Nn(ae(t)),dv=(t,s)=>t.length>0?Fs.svalue(Eo(s,Dd.apply(void 0,t))):Fs.svalue(s),s1=t=>Sn(Fs.serror,Wt)(t),mv={consolidateObj:(t,s)=>{const a=Fs.partition(t);return a.errors.length>0?s1(a.errors):dv(a.values,s)},consolidateArr:t=>{const s=Fs.partition(t);return s.errors.length>0?s1(s.errors):Fs.svalue(s.values)}},Gg=t=>J(t)&&ns(t).length>100?" removed due to size":JSON.stringify(t,null,2),r1=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:ae("... (only showing first ten failures)")}]):t;return Ke(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},_=(t,s)=>Fs.serror([{path:t,getErrorInfo:s}]),B=(t,s,a)=>_(t,()=>'Could not find valid *required* value for "'+s+'" in '+Gg(a)),U=(t,s)=>_(t,()=>'Choice schema did not contain choice key: "'+s+'"'),oe=(t,s,a)=>_(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+Gg(s)),de=(t,s)=>_(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),tt=(t,s)=>_(t,ae(s)),It=t=>{const s=(c,d)=>Fs.bindError(t(d),h=>tt(c,h)),a=ae("val");return{extract:s,toString:a}},pn=It(Fs.svalue),hn=(t,s,a,c)=>vt(s,a).fold(()=>B(t,a,s),c),sn=(t,s,a,c)=>{const d=vt(t,s).getOrThunk(()=>a(t));return c(d)},hs=(t,s,a)=>a(vt(t,s)),Rr=(t,s,a,c)=>{const d=vt(t,s).map(h=>h===!0?a(t):h);return c(d)},zi=(t,s,a,c,d)=>{const h=E=>d.extract(s.concat([c]),E),v=E=>E.fold(()=>Fs.svalue(R.none()),T=>{const D=d.extract(s.concat([c]),T);return Fs.map(D,R.some)});switch(t.tag){case"required":return hn(s,a,c,h);case"defaultedThunk":return sn(a,c,t.process,h);case"option":return hs(a,c,v);case"defaultedOptionThunk":return Rr(a,c,t.process,v);case"mergeWithThunk":return sn(a,c,ae({}),E=>{const T=Eo(t.process(a),E);return h(T)})}},jl=(t,s,a)=>{const c={},d=[];for(const h of a)Nf(h,(v,E,T,D)=>{const N=zi(T,t,s,v,D);Fs.fold(N,L=>{d.push(...L)},L=>{c[E]=L})},(v,E)=>{c[v]=E(s)});return d.length>0?Fs.serror(d):Fs.svalue(c)},Wr=t=>({extract:(c,d)=>t().extract(c,d),toString:()=>t().toString()}),D2=t=>ns(Rc(t,Je)),Wo=t=>{const s=Vt(t),a=Ns(t,(d,h)=>Nf(h,v=>Eo(d,{[v]:!0}),ae(d)),{});return{extract:(d,h)=>{const v=Oe(h)?[]:D2(h),E=ko(v,T=>!Qr(a,T));return E.length===0?s.extract(d,h):de(d,E)},toString:s.toString}},Vt=t=>({extract:(c,d)=>jl(c,d,t),toString:()=>`obj{
`+Ke(t,d=>Nf(d,(h,v,E,T)=>h+" -> "+T.toString(),(h,v)=>"state("+h+")")).join(`
`)+"}"}),Gl=t=>({extract:(c,d)=>{const h=Ke(d,(v,E)=>t.extract(c.concat(["["+E+"]"]),v));return mv.consolidateArr(h)},toString:()=>"array("+t.toString()+")"}),Mt=(t,s)=>{const a=s!==void 0?s:yt;return{extract:(h,v)=>{const E=[];for(const T of t){const D=T.extract(h,v);if(D.stype===ni.Value)return{stype:ni.Value,svalue:a(D.svalue)};E.push(D)}return mv.consolidateArr(E)},toString:()=>"oneOf("+Ke(t,h=>h.toString()).join(", ")+")"}},Om=(t,s)=>{const a=(h,v)=>Gl(It(t)).extract(h,v);return{extract:(h,v)=>{const E=ns(v),T=a(h,E);return Fs.bind(T,D=>{const N=Ke(D,L=>lr(L,L,fo(),s));return Vt(N).extract(h,v)})},toString:()=>"setOf("+s.toString()+")"}},HM=(t,s)=>{const a=fs(s);return{extract:(h,v)=>a().extract(h,v),toString:()=>a().toString()}},Rd=Sn(Gl,Vt),ur=ae(pn),Bf=(t,s)=>It(a=>{const c=typeof a;return t(a)?Fs.svalue(a):Fs.serror(`Expected type: ${s} but got: ${c}`)}),a1=Bf(en,"number"),Zr=Bf(W,"string"),ql=Bf(Oe,"boolean"),fv=Bf(Ye,"function"),Bu=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>Bu(t[s]));default:return!1}},R2=It(t=>Bu(t)?Fs.svalue(t):Fs.serror("Expected value to be acceptable for sending via postMessage")),gv=(t,s,a,c)=>vt(a,c).fold(()=>oe(t,a,c),h=>h.extract(t.concat(["branch: "+c]),s)),nt=(t,s)=>({extract:(d,h)=>vt(h,t).fold(()=>U(d,t),E=>gv(d,h,s,E)),toString:()=>"chooseOn("+t+"). Possible values: "+ns(s)}),M2=()=>Gl(pn),Am=t=>It(s=>t(s).fold(Fs.serror,Fs.svalue)),Md=(t,s)=>Om(a=>Fs.fromResult(t(a)),s),i1=(t,s,a)=>{const c=s.extract([t],a);return Fs.mapError(c,d=>({input:a,errors:d}))},Cs=(t,s,a)=>Fs.toResult(i1(t,s,a)),Mo=t=>t.fold(s=>{throw new Error(Ia(s))},yt),oi=(t,s,a)=>Mo(Cs(t,s,a)),Ia=t=>`Errors: 
`+r1(t.errors).join(`
`)+`

Input object: `+Gg(t.input),Vn=(t,s)=>nt(t,Jo(s,Vt)),c1=(t,s)=>HM(t,s),ra=lr,Ls=Vc,hv=t=>Am(s=>yo(t,s)?xn.value(s):xn.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),We=t=>ra(t,t,fo(),ur()),Vi=(t,s)=>ra(t,t,fo(),s),l1=t=>Vi(t,a1),so=t=>Vi(t,Zr),Kl=(t,s)=>ra(t,t,fo(),hv(s)),Hk=t=>Vi(t,ql),Yl=t=>Vi(t,fv),Qy=(t,s)=>ra(t,t,Pf(),It(a=>Fs.serror("The field: "+t+" is forbidden. "+s))),Xl=(t,s)=>ra(t,t,fo(),Vt(s)),ew=(t,s)=>ra(t,t,fo(),Rd(s)),ic=(t,s)=>ra(t,t,fo(),Gl(s)),go=t=>ra(t,t,Pf(),ur()),$u=(t,s)=>ra(t,t,Pf(),s),$f=t=>$u(t,a1),aa=t=>$u(t,Zr),tw=(t,s)=>$u(t,hv(s)),If=t=>$u(t,fv),Ff=(t,s)=>$u(t,Gl(s)),pi=(t,s)=>$u(t,Vt(s)),Dm=(t,s)=>$u(t,Wo(s)),xe=(t,s)=>ra(t,t,jg(s),ur()),Ui=(t,s,a)=>ra(t,t,jg(s),a),Iu=(t,s)=>Ui(t,s,a1),Fu=(t,s)=>Ui(t,s,Zr),Wi=(t,s,a)=>Ui(t,s,hv(a)),yr=(t,s)=>Ui(t,s,ql),Mr=(t,s)=>Ui(t,s,fv),zM=(t,s)=>Ui(t,s,R2),bi=(t,s,a)=>Ui(t,s,Gl(a)),Lu=(t,s,a)=>Ui(t,s,Vt(a)),Jt=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},Zi={generate:t=>{if(!me(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return St(t,(c,d)=>{const h=ns(c);if(h.length!==1)throw new Error("one and only one name per case");const v=h[0],E=c[v];if(a[v]!==void 0)throw new Error("duplicate key detected:"+v);if(v==="cata")throw new Error("cannot have a case named cata (sorry)");if(!me(E))throw new Error("case arguments must be an array");s.push(v),a[v]=(...T)=>{const D=T.length;if(D!==E.length)throw new Error("Wrong number of arguments to case "+v+". Expected "+E.length+" ("+E+"), got "+D);return{fold:(...L)=>{if(L.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+L.length);return L[d].apply(null,T)},match:L=>{const V=ns(L);if(s.length!==V.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+V.join(","));if(!uo(s,Y=>yo(V,Y)))throw new Error("Not all branches were specified when using match. Specified: "+V.join(", ")+`
Required: `+s.join(", "));return L[v].apply(null,T)},log:L=>{console.log(L,{constructors:s,constructor:v,params:T})}}}}),a}};Zi.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const cc=t=>{const s=[],a=[];return St(t,c=>{c.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},zk=(t,s)=>{const a={};return Xo(t,(c,d)=>{yo(s,d)||(a[d]=c)}),a},Vk=(t,s)=>({[t]:s}),qg=t=>{const s={};return St(t,a=>{s[a.key]=a.value}),s},u1=(t,s)=>zk(t,s),vi=(t,s)=>Vk(t,s),ia=t=>qg(t),nw=(t,s)=>t.length===0?xn.value(s):xn.value(Eo(s,Dd.apply(void 0,t))),Uk=t=>xn.error(Wt(t)),Hu=(t,s)=>{const a=cc(t);return a.errors.length>0?Uk(a.errors):nw(a.values,s)},pv=t=>Ye(t)?t:Pn,N2=(t,s,a)=>{let c=t.dom;const d=pv(a);for(;c.parentNode;){c=c.parentNode;const h=we.fromDom(c),v=s(h);if(v.isSome())return v;if(d(h))break}return R.none()},Lf=(t,s,a)=>{const c=s(t),d=pv(a);return c.orThunk(()=>d(t)?R.none():N2(t,s,d))},Kg=(t,s)=>wo(t.element,s.event.target),P2={can:Rt,abort:Pn,run:ee},Nd=t=>{if(!Qr(t,"can")&&!Qr(t,"abort")&&!Qr(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...P2,...t}},B2=(t,s)=>(...a)=>Io(t,(c,d)=>c&&s(d).apply(void 0,a),!0),$2=(t,s)=>(...a)=>Io(t,(c,d)=>c||s(d).apply(void 0,a),!1),ow=t=>Ye(t)?{can:Rt,abort:Pn,run:t}:t,sw=t=>{const s=B2(t,d=>d.can),a=$2(t,d=>d.abort);return{can:s,abort:a,run:(...d)=>{St(t,h=>{h.run.apply(void 0,d)})}}},Gr=ae,zu=Gr("touchstart"),Yg=Gr("touchmove"),Hf=Gr("touchend"),I2=Gr("touchcancel"),dr=Gr("mousedown"),Xg=Gr("mousemove"),Jg=Gr("mouseout"),rw=Gr("mouseup"),Pd=Gr("mouseover"),ji=Gr("focusin"),bv=Gr("focusout"),pl=Gr("keydown"),Rm=Gr("keyup"),zf=Gr("input"),Qg=Gr("change"),Bd=Gr("click"),Wk=Gr("transitioncancel"),Vf=Gr("transitionend"),aw=Gr("transitionstart"),F2=Gr("selectstart"),Hs=t=>ae("alloy."+t),eh={tap:Hs("tap")},Jl=Hs("focus"),Mm=Hs("blur.post"),Uf=Hs("paste.post"),Wf=Hs("receive"),Gi=Hs("execute"),Rs=Hs("focus.item"),Ql=eh.tap,iw=Hs("longpress"),d1=Hs("sandbox.close"),vv=Hs("typeahead.cancel"),Nm=Hs("system.init"),m1=Hs("system.touchmove"),yv=Hs("system.touchend"),Vu=Hs("system.scroll"),eu=Hs("system.resize"),lc=Hs("system.attached"),Pm=Hs("system.detached"),Bm=Hs("system.dismissRequested"),L2=Hs("system.repositionRequested"),wv=Hs("focusmanager.shifted"),f1=Hs("slotcontainer.visibility"),Cv=Hs("system.external.element.scroll"),H2=Hs("change.tab"),Sv=Hs("dismiss.tab"),g1=Hs("highlight"),h1=Hs("dehighlight"),Fn=(t,s)=>{p1(t,t.element,s,{})},Gt=(t,s,a)=>{p1(t,t.element,s,a)},$d=t=>{Fn(t,Gi())},xv=(t,s,a)=>{p1(t,s,a,{})},p1=(t,s,a,c)=>{const d={target:s,...c};t.getSystem().triggerEvent(a,s,d)},Zk=(t,s,a,c)=>{const d={...c,target:s};t.getSystem().triggerEvent(a,s,d)},cw=(t,s,a,c)=>{t.getSystem().triggerEvent(a,s,c.event)},Ho=t=>ia(t),lw=(t,s)=>({key:t,value:Nd({abort:s})}),uw=(t,s)=>({key:t,value:Nd({can:s})}),dw=t=>({key:t,value:Nd({run:(s,a)=>{a.event.prevent()}})}),Ve=(t,s)=>({key:t,value:Nd({run:s})}),Ev=(t,s,a)=>({key:t,value:Nd({run:(c,d)=>{s.apply(void 0,[c,d].concat(a))}})}),jk=t=>s=>Ve(t,s),b1=t=>s=>({key:t,value:Nd({run:(a,c)=>{Kg(a,c)&&s(a,c)}})}),Gk=(t,s)=>Ve(t,(a,c)=>{a.getSystem().getByUid(s).each(d=>{cw(d,d.element,t,c)})}),th=(t,s,a)=>{const c=s.partUids[a];return Gk(t,c)},mw=(t,s)=>Ve(t,(a,c)=>{const d=c.event,h=a.getSystem().getByDom(d.target).getOrThunk(()=>Lf(d.target,E=>a.getSystem().getByDom(E).toOptional(),Pn).getOr(a));s(a,h,c)}),Id=t=>Ve(t,(s,a)=>{a.cut()}),qk=t=>Ve(t,(s,a)=>{a.stop()}),Uu=(t,s)=>b1(t)(s),No=b1(lc()),Wu=b1(Pm()),fw=b1(Nm()),bl=jk(Gi()),Fd=(t,s)=>{const c=(s||document).createElement("div");return c.innerHTML=t,di(we.fromDom(c))},gw=t=>t.dom.innerHTML,Zf=(t,s)=>{const c=Pa(t).dom,d=we.fromDom(c.createDocumentFragment()),h=Fd(s,c);Od(d,h),Mf(t),Ca(t,d)},z2=t=>{const s=we.fromTag("div"),a=we.fromDom(t.dom.cloneNode(!0));return Ca(s,a),gw(s)},Tv=(t,s)=>we.fromDom(t.dom.cloneNode(s)),hw=t=>Tv(t,!1),Kk=t=>Tv(t,!0),pw=t=>{if(q(t))return"#shadow-root";{const s=hw(t);return z2(s)}},Zu=t=>pw(t),VM=(t,s,a)=>wo(s,t.element)&&!wo(s,a),bw=Ho([uw(Jl(),(t,s)=>{const a=s.event,c=a.originator,d=a.target;return VM(t,c,d)?(console.warn(Jl()+` did not get interpreted by the desired target. 
Originator: `+Zu(c)+`
Target: `+Zu(d)+`
Check the `+Jl()+" event handlers"),!1):!0})]);var jf=Object.freeze({__proto__:null,events:bw});let ca=0;const Ot=t=>{const a=new Date().getTime(),c=Math.floor(Math.random()*1e9);return ca++,t+"_"+c+ca+String(a)},Yk=ae("alloy-id-"),vw=ae("data-alloy-id"),Xk=Yk(),V2=vw(),Gf=(t,s)=>{const a=Ot(Xk+t);return nh(s,a),a},nh=(t,s)=>{Object.defineProperty(t.dom,V2,{value:s,writable:!0})},v1=t=>{const s=po(t)?t.dom[V2]:null;return R.from(s)},oh=t=>Ot(t),_v=yt,Ld=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+Zu(t().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},c=d=>()=>{console.warn(s(d))};return{debugInfo:ae("fake"),triggerEvent:c("triggerEvent"),triggerFocus:c("triggerFocus"),triggerEscape:c("triggerEscape"),broadcast:c("broadcast"),broadcastOn:c("broadcastOn"),broadcastEvent:c("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:Pn}},tu=Ld(),y1=(t,s,a)=>{const c=a.toString(),d=c.indexOf(")")+1,h=c.indexOf("("),v=c.substring(h+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Wc(v.slice(0,1).concat(v.slice(3)))}),t},Wc=t=>Ke(t,s=>Ii(s,"/*")?s.substring(0,s.length-2):s),kv=(t,s)=>{const a=t.toString(),c=a.indexOf(")")+1,d=a.indexOf("("),h=a.substring(d+1,c-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Wc(h)}),t},U2=(t,s)=>{const a=s.toString(),c=a.indexOf(")")+1,d=a.indexOf("("),h=a.substring(d+1,c-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Wc(h.slice(1))}),t},sh=Ot("alloy-premade"),Hd=t=>(Object.defineProperty(t.element.dom,sh,{value:t.uid,writable:!0}),vi(sh,t)),Jk=t=>no(t.dom,sh),rh=t=>vt(t,sh),qf=t=>U2((s,...a)=>t(s.getApis(),s,...a),t),vl={init:()=>qi({readState:ae("No State required")})},qi=t=>t,Qk=(t,s)=>{const a=Ke(s,d=>pi(d.name(),[We("config"),xe("state",vl)])),c=Cs("component.behaviours",Vt(a),t.behaviours).fold(d=>{throw new Error(Ia(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},yt);return{list:s,data:Jo(c,d=>{const h=d.map(v=>({config:v.config,state:v.state.init(v.config)}));return ae(h)})}},W2=t=>t.list,Z2=t=>t.data,yw=(t,s)=>{const a={};return Xo(t,(c,d)=>{Xo(c,(h,v)=>{const E=vt(a,v).getOr([]);a[v]=E.concat([s(d,h)])})}),a},Ki=t=>({classes:je(t.classes)?[]:t.classes,attributes:je(t.attributes)?{}:t.attributes,styles:je(t.styles)?{}:t.styles}),ah=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),Ov=(t,s,a,c)=>{const d={...s};St(a,N=>{d[N.name()]=N.exhibit(t,c)});const h=yw(d,(N,L)=>({name:N,modification:L})),v=N=>Ns(N,(L,V)=>({...V.modification,...L}),{}),E=Ns(h.classes,(N,L)=>L.modification.concat(N),[]),T=v(h.attributes),D=v(h.styles);return Ki({classes:E,attributes:T,styles:D})},Av=(t,s,a,c)=>{try{const d=Eu(a,(h,v)=>{const E=h[s],T=v[s],D=c.indexOf(E),N=c.indexOf(T);if(D===-1)throw new Error("The ordering for "+t+" does not have an entry for "+E+`.
Order specified: `+JSON.stringify(c,null,2));if(N===-1)throw new Error("The ordering for "+t+" does not have an entry for "+T+`.
Order specified: `+JSON.stringify(c,null,2));return D<N?-1:N<D?1:0});return xn.value(d)}catch(d){return xn.error([d])}},eO=(t,s)=>({handler:t,purpose:s}),j2=(t,s)=>({cHandler:t,purpose:s}),ww=(t,s)=>j2(Ht.apply(void 0,[t.handler].concat(s)),t.purpose),ih=t=>t.cHandler,ch=(t,s)=>({name:t,handler:s}),Dv=(t,s)=>{const a={};return St(t,c=>{a[c.name()]=c.handlers(s)}),a},tO=(t,s,a)=>{const c={...a,...Dv(s,t)};return yw(c,ch)},Rv=(t,s,a,c)=>{const d=tO(t,a,c);return Cw(d,s)},lh=t=>{const s=ow(t);return(a,c,...d)=>{const h=[a,c].concat(d);s.abort.apply(void 0,h)?c.stop():s.can.apply(void 0,h)&&s.run.apply(void 0,h)}},nO=(t,s)=>xn.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Ke(s,a=>a.name),null,2)]),w1=(t,s,a)=>{const c=s[a];return c?Av("Event: "+a,"name",t,c).map(d=>{const h=Ke(d,v=>v.handler);return sw(h)}):nO(a,t)},Cw=(t,s)=>{const a=Cd(t,(c,d)=>(c.length===1?xn.value(c[0].handler):w1(c,s,d)).map(v=>{const E=lh(v),T=c.length>1?ko(s[d],D=>kr(c,N=>N.name===D)).join(" > "):c[0].name;return vi(d,eO(E,T))}));return Hu(a,{})},Yi="alloy.base.behaviour",Mv=Vt([ra("dom","dom",fo(),Vt([We("tag"),xe("styles",{}),xe("classes",[]),xe("attributes",{}),go("value"),go("innerHtml")])),We("components"),We("uid"),xe("events",{}),xe("apis",{}),ra("eventOrder","eventOrder",km({[Gi()]:["disabling",Yi,"toggling","typeaheadevents"],[Jl()]:[Yi,"focusing","keying"],[Nm()]:[Yi,"disabling","toggling","representing"],[zf()]:[Yi,"representing","streaming","invalidating"],[Pm()]:[Yi,"representing","item-events","tooltipping"],[dr()]:["focusing",Yi,"item-type-events"],[zu()]:["focusing",Yi,"item-type-events"],[Pd()]:["item-type-events","tooltipping"],[Wf()]:["receiving","reflecting","tooltipping"]}),ur()),go("domModification")]),G2=t=>Cs("custom.definition",Mv,t),Nv=t=>({...t.dom,uid:t.uid,domChildren:Ke(t.components,s=>s.element)}),UM=t=>t.domModification.fold(()=>Ki({}),Ki),Pv=t=>t.events,$m=(t,s)=>{const a=As(t,s);return a===void 0||a===""?[]:a.split(" ")},ju=(t,s,a)=>{const d=$m(t,s).concat([a]);return xt(t,s,d.join(" ")),!0},Sw=(t,s,a)=>{const c=ko($m(t,s),d=>d!==a);return c.length>0?xt(t,s,c.join(" ")):ys(t,s),!1},uh=t=>t.dom.classList!==void 0,Bv=t=>$m(t,"class"),q2=(t,s)=>ju(t,"class",s),Zo=(t,s)=>Sw(t,"class",s),oO=(t,s)=>yo(Bv(t),s)?Zo(t,s):q2(t,s),zs=(t,s)=>{uh(t)?t.dom.classList.add(s):q2(t,s)},K2=t=>{(uh(t)?t.dom.classList:Bv(t)).length===0&&ys(t,"class")},ps=(t,s)=>{uh(t)?t.dom.classList.remove(s):Zo(t,s),K2(t)},dh=(t,s)=>{const a=uh(t)?t.dom.classList.toggle(s):oO(t,s);return K2(t),a},mr=(t,s)=>uh(t)&&t.dom.classList.contains(s),Ss=(t,s)=>{St(s,a=>{zs(t,a)})},uc=(t,s)=>{St(s,a=>{ps(t,a)})},xw=(t,s)=>{St(s,a=>{dh(t,a)})},la=(t,s)=>uo(s,a=>mr(t,a)),C1=t=>{const s=t.dom.classList,a=new Array(s.length);for(let c=0;c<s.length;c++){const d=s.item(c);d!==null&&(a[c]=d)}return a},mh=t=>uh(t)?C1(t):Bv(t),Gu=t=>t.dom.value,fh=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},Im=(t,s,a)=>zl(t,s).map(d=>{if(a.exists(v=>!wo(v,d))){const v=a.map(Ja).getOr("span"),E=we.fromTag(v);return Hc(d,E),E}else return d}),zd=(t,s,a)=>{a.fold(()=>Ca(t,s),c=>{wo(c,s)||(Hc(c,s),zc(c))})},sO=(t,s,a)=>{const c=Ke(s,a),d=di(t);return St(d.slice(c.length),zc),c},Y2=(t,s,a,c)=>{const d=zl(t,s),h=c(a,d),v=Im(t,s,d);return zd(t,h.element,v),h},WM=(t,s,a)=>sO(t,s,(c,d)=>Y2(t,d,c,a)),ZM=(t,s)=>sO(t,s,(a,c)=>{const d=zl(t,c);return zd(t,a,d),a}),yl=(t,s)=>{const a=ns(t),c=ns(s),d=Zt(c,a),h=Or(t,(v,E)=>!no(s,E)||v!==s[E]).t;return{toRemove:d,toSet:h}},Fa=(t,s)=>{const{class:a,style:c,...d}=Hy(s),{toSet:h,toRemove:v}=yl(t.attributes,d),E=()=>{St(v,_e=>ys(s,_e)),_f(s,h)},T=Dr(s),{toSet:D,toRemove:N}=yl(t.styles,T),L=()=>{St(N,_e=>eo(s,_e)),ei(s,D)},V=mh(s),j=Zt(V,t.classes),Y=Zt(t.classes,V),ie=()=>{Ss(s,Y),uc(s,j)},Ee=_e=>{Zf(s,_e)},he=()=>{const _e=t.domChildren;ZM(s,_e)},fe=()=>{const _e=s,Xe=t.value.getOrUndefined();Xe!==Gu(_e)&&fh(_e,Xe??"")};return E(),ie(),L(),t.innerHtml.fold(he,Ee),fe(),s},rO=t=>{const s=we.fromTag(t.tag);_f(s,t.attributes),Ss(s,t.classes),ei(s,t.styles),t.innerHtml.each(c=>Zf(s,c));const a=t.domChildren;return Od(s,a),t.value.each(c=>{fh(s,c)}),s},aO=(t,s)=>{try{const a=Fa(t,s);return R.some(a)}catch{return R.none()}},Fm=t=>t.innerHtml.isSome()&&t.domChildren.length>0,S1=(t,s)=>{const a=d=>Ja(d)===t.tag&&!Fm(t)&&!Jk(d),c=s.filter(a).bind(d=>aO(t,d)).getOrThunk(()=>rO(t));return nh(c,t.uid),c},$v=t=>{const s=vt(t,"behaviours").getOr({});return Ie(ns(s),a=>{const c=s[a];return Je(c)?[c.me]:[]})},Iv=(t,s)=>Qk(t,s),qu=t=>{const s=$v(t);return Iv(t,s)},gh=(t,s,a)=>{const c=Nv(t),d=UM(t),h={"alloy.base.modification":d},v=s.length>0?Ov(a,h,s,c):d;return ah(c,v)},hh=(t,s,a)=>{const c={"alloy.base.behaviour":Pv(t)};return Rv(a,t.eventOrder,s,c).getOrDie()},ph=(t,s)=>{const a=()=>_e,c=Jt(tu),d=Mo(G2(t)),h=qu(t),v=W2(h),E=Z2(h),T=gh(d,v,E),D=S1(T,s),N=hh(d,v,E),L=Jt(d.components),V=Xe=>{c.set(Xe)},j=()=>{c.set(Ld(a))},Y=()=>{const Xe=di(D),Le=Ie(Xe,$e=>c.get().getByDom($e).fold(()=>[],ss));L.set(Le)},ie=Xe=>{const Le=E;return(Ye(Le[Xe.name()])?Le[Xe.name()]:()=>{throw new Error("Could not find "+Xe.name()+" in "+JSON.stringify(t,null,2))})()},Ee=Xe=>Ye(E[Xe.name()]),he=()=>d.apis,fe=Xe=>E[Xe]().map(Le=>Le.state.readState()).getOr("not enabled"),_e={uid:t.uid,getSystem:c.get,config:ie,hasConfigured:Ee,spec:t,readState:fe,getApis:he,connect:V,disconnect:j,element:D,syncComponents:Y,components:L.get,events:N};return _e},Kf=(t,s)=>{const a=vt(t,"components").getOr([]);return s.fold(()=>Ke(a,xa),c=>Ke(a,(d,h)=>Fv(d,zl(c,h))))},X2=(t,s)=>{const{events:a,...c}=_v(t),d=Kf(c,s),h={...c,events:{...jf,...a},components:d};return xn.value(ph(h,s))},$s=t=>{const s=we.fromText(t);return J2({element:s})},J2=t=>{const s=oi("external.component",Wo([We("element"),go("uid")]),t),a=Jt(Ld()),c=E=>{a.set(E)},d=()=>{a.set(Ld(()=>v))},h=s.uid.getOrThunk(()=>oh("external"));nh(s.element,h);const v={uid:h,getSystem:a.get,config:R.none,hasConfigured:Pn,connect:c,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:ae("No state"),syncComponents:ee,components:ae([]),events:{}};return Hd(v)},bh=oh,Q2=t=>no(t,"uid"),Fv=(t,s)=>rh(t).getOrThunk(()=>{const a=Q2(t)?t:{uid:bh(""),...t};return X2(a,s).getOrDie()}),xa=t=>Fv(t,R.none()),dc=Hd;var ex=(t,s,a,c,d)=>t(a,c)?R.some(a):Ye(d)&&d(a)?R.none():s(a,c,d);const Lv=(t,s,a)=>{let c=t.dom;const d=Ye(a)?a:Pn;for(;c.parentNode;){c=c.parentNode;const h=we.fromDom(c);if(s(h))return R.some(h);if(d(h))break}return R.none()},Yf=(t,s,a)=>ex((d,h)=>h(d),Lv,t,s,a),iO=(t,s)=>{const a=d=>s(we.fromDom(d));return fn(t.dom.childNodes,a).map(we.fromDom)},tx=(t,s)=>{const a=c=>{for(let d=0;d<c.childNodes.length;d++){const h=we.fromDom(c.childNodes[d]);if(s(h))return R.some(h);const v=a(c.childNodes[d]);if(v.isSome())return v}return R.none()};return a(t.dom)},Ew=(t,s,a)=>Yf(t,s,a).isSome(),Xi=(t,s,a)=>Lv(t,c=>Gs(c,s),a),Hv=(t,s)=>iO(t,a=>Gs(a,s)),Vs=(t,s)=>xf(s,t),nu=(t,s,a)=>ex((d,h)=>Gs(d,h),Xi,t,s,a),vh="aria-controls",Lm=t=>Yf(t,a=>{if(!po(a))return!1;const c=As(a,"id");return c!==void 0&&c.indexOf(vh)>-1}).bind(a=>{const c=As(a,"id"),d=Be(a);return Vs(d,`[${vh}="${c}"]`)}),Xf=()=>{const t=Ot(vh);return{id:t,link:c=>{xt(c,vh,t)},unlink:c=>{ys(c,vh)}}},Jf=(t,s)=>Lm(s).exists(a=>Vd(t,a)),Vd=(t,s)=>Ew(s,a=>wo(a,t.element),Pn)||Jf(t,s),nx="unknown";var Qf;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(Qf||(Qf={}));const Hm=Jt({}),eg=(t,s)=>{const a=[],c=new Date().getTime();return{logEventCut:(d,h,v)=>{a.push({outcome:"cut",target:h,purpose:v})},logEventStopped:(d,h,v)=>{a.push({outcome:"stopped",target:h,purpose:v})},logNoParent:(d,h,v)=>{a.push({outcome:"no-parent",target:h,purpose:v})},logEventNoHandlers:(d,h)=>{a.push({outcome:"no-handlers-left",target:h})},logEventResponse:(d,h,v)=>{a.push({outcome:"response",purpose:v,target:h})},write:()=>{const d=new Date().getTime();yo(["mousemove","mouseover","mouseout",Nm()],t)||console.log(t,{event:t,time:d-c,target:s.dom,sequence:Ke(a,h=>yo(["cut","stopped","response"],h.outcome)?"{"+h.purpose+"} "+h.outcome+" at ("+Zu(h.target)+")":h.outcome)})}}},ox=(t,s,a)=>{switch(vt(Hm.get(),t).orThunk(()=>{const d=ns(Hm.get());return Js(d,h=>t.indexOf(h)>-1?R.some(Hm.get()[h]):R.none())}).getOr(Qf.NORMAL)){case Qf.NORMAL:return a(_w());case Qf.LOGGING:{const d=eg(t,s),h=a(d);return d.write(),h}case Qf.STOP:return!0}},cO=["alloy/data/Fields","alloy/debugging/Debugging"],Tw=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return fn(s,a=>a.indexOf("alloy")>0&&!kr(cO,c=>a.indexOf(c)>-1)).getOr(nx)}else return nx},lO={logEventCut:ee,logEventStopped:ee,logNoParent:ee,logEventNoHandlers:ee,logEventResponse:ee,write:ee},zv=(t,s,a)=>ox(t,s,a),_w=ae(lO),Ji=ae([We("menu"),We("selectedMenu")]),sx=ae([We("item"),We("selectedItem")]);ae(Vt(sx().concat(Ji())));const yh=ae(Vt(sx())),rx=Xl("initSize",[We("numColumns"),We("numRows")]),uO=()=>Vi("markers",yh()),x1=()=>Xl("markers",[We("backgroundMenu")].concat(Ji()).concat(sx())),zm=t=>Xl("markers",Ke(t,We)),Vv=(t,s,a)=>(Tw(),ra(s,s,a,Am(c=>xn.value((...d)=>c.apply(void 0,d))))),Un=t=>Vv("onHandler",t,jg(ee)),Qi=t=>Vv("onKeyboardHandler",t,jg(R.none)),ou=t=>Vv("onHandler",t,fo()),kw=t=>Vv("onKeyboardHandler",t,fo()),To=(t,s)=>Ls(t,ae(s)),E1=t=>Ls(t,yt),Ow=ae(rx),wr=(t,s,a,c,d,h,v,E=!1)=>({x:t,y:s,bubble:a,direction:c,placement:d,restriction:h,label:`${v}-${d}`,alwaysFit:E}),Ku=Zi.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Vm=(t,s,a,c,d,h,v,E,T)=>t.fold(s,a,c,d,h,v,E,T),Aw=(t,s,a,c)=>t.fold(s,s,c,c,s,c,a,a),Uv=(t,s,a,c)=>t.fold(s,c,s,c,a,a,s,c),T1=Ku.southeast,Dw=Ku.southwest,Wv=Ku.northeast,Yu=Ku.northwest,Ud=Ku.south,dO=Ku.north,Ae=Ku.east,_1=Ku.west,wh=(t,s,a,c)=>{const d=t+s;return d>c?a:d<a?c:d},mc=(t,s,a)=>Math.min(Math.max(t,s),a),Rw=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},rs=(t,s)=>$l(["left","right","top","bottom"],a=>vt(s,a).map(c=>Rw(t,c))),Zv=(t,s,a)=>{const c=(T,D)=>s[T].map(N=>{const L=T==="top"||T==="bottom",V=L?a.top:a.left,Y=(T==="left"||T==="top"?Math.max:Math.min)(N,D)+V;return L?mc(Y,t.y,t.bottom):mc(Y,t.x,t.right)}).getOr(D),d=c("left",t.x),h=c("top",t.y),v=c("right",t.right),E=c("bottom",t.bottom);return gs(d,h,v-d,E-h)},Wd="layout",Mw=t=>t.x,jv=(t,s)=>t.x+t.width/2-s.width/2,Nw=(t,s)=>t.x+t.width-s.width,k1=(t,s)=>t.y-s.height,Ch=t=>t.y+t.height,Pw=(t,s)=>t.y+t.height/2-s.height/2,mO=t=>t.x+t.width,si=(t,s)=>t.x-s.width,Cr=(t,s,a)=>wr(Mw(t),Ch(t),a.southeast(),T1(),"southeast",rs(t,{left:1,top:3}),Wd),ua=(t,s,a)=>wr(Nw(t,s),Ch(t),a.southwest(),Dw(),"southwest",rs(t,{right:0,top:3}),Wd),ri=(t,s,a)=>wr(Mw(t),k1(t,s),a.northeast(),Wv(),"northeast",rs(t,{left:1,bottom:2}),Wd),Ea=(t,s,a)=>wr(Nw(t,s),k1(t,s),a.northwest(),Yu(),"northwest",rs(t,{right:0,bottom:2}),Wd),La=(t,s,a)=>wr(jv(t,s),k1(t,s),a.north(),dO(),"north",rs(t,{bottom:2}),Wd),Sr=(t,s,a)=>wr(jv(t,s),Ch(t),a.south(),Ud(),"south",rs(t,{top:3}),Wd),Bw=(t,s,a)=>wr(mO(t),Pw(t,s),a.east(),Ae(),"east",rs(t,{left:0}),Wd),O1=(t,s,a)=>wr(si(t,s),Pw(t,s),a.west(),_1(),"west",rs(t,{right:1}),Wd),$w=()=>[Cr,ua,ri,Ea,Sr,La,Bw,O1],A1=()=>[ua,Cr,Ea,ri,Sr,La,Bw,O1],Iw=()=>[ri,Ea,Cr,ua,La,Sr],ax=()=>[Ea,ri,ua,Cr,La,Sr],Gv=()=>[Cr,ua,ri,Ea,Sr,La],Fw=()=>[ua,Cr,Ea,ri,Sr,La],fO=(t,s)=>s.universal?t:ko(t,a=>yo(s.channels,a));var ix=Object.freeze({__proto__:null,events:t=>Ho([Ve(Wf(),(s,a)=>{const c=t.channels,d=ns(c),h=a,v=fO(d,h);St(v,E=>{const T=c[E],D=T.schema,N=oi("channel["+E+`] data
Receiver: `+Zu(s.element),D,h.data);T.onReceive(s,N)})})])}),hO=[Vi("channels",Md(xn.value,Wo([ou("onReceive"),xe("schema",ur())])))];const Sh=(t,s,a)=>bl(c=>{a(c,t,s)}),qv=(t,s,a)=>fw((c,d)=>{a(c,t,s)}),cx=(t,s,a,c,d,h)=>{const v=Wo(t),E=pi(s,[Dm("config",t)]);return su(v,E,s,a,c,d,h)},jM=(t,s,a,c,d,h)=>{const v=t,E=pi(s,[$u("config",t)]);return su(v,E,s,a,c,d,h)},yi=(t,s,a)=>y1((d,...h)=>{const v=[d].concat(h);return d.config({name:ae(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},E=>{const T=Array.prototype.slice.call(v,1);return s.apply(void 0,[d,E.config,E.state].concat(T))})},a,s),GM=t=>({key:t,value:void 0}),su=(t,s,a,c,d,h,v)=>{const E=L=>Qr(L,a)?L[a]():R.none(),T=Jo(d,(L,V)=>yi(a,L,V)),N={...Jo(h,(L,V)=>kv(L,V)),...T,revoke:Ht(GM,a),config:L=>{const V=oi(a+"-config",t,L);return{key:a,value:{config:V,me:N,configAsRaw:fs(()=>oi(a+"-config",t,L)),initialConfig:L,state:v}}},schema:ae(s),exhibit:(L,V)=>$i(E(L),vt(c,"exhibit"),(j,Y)=>Y(V,j.config,j.state)).getOrThunk(()=>Ki({})),name:ae(a),handlers:L=>E(L).map(V=>vt(c,"events").getOr(()=>({}))(V.config,V.state)).getOr({})};return N},lt=t=>ia(t),Lw=Wo([We("fields"),We("name"),xe("active",{}),xe("apis",{}),xe("state",vl),xe("extra",{})]),xr=t=>{const s=oi("Creating behaviour: "+t.name,Lw,t);return cx(s.fields,s.name,s.active,s.apis,s.extra,s.state)},lx=Wo([We("branchKey"),We("branches"),We("name"),xe("active",{}),xe("apis",{}),xe("state",vl),xe("extra",{})]),Kv=t=>{const s=oi("Creating behaviour: "+t.name,lx,t);return jM(Vn(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},Hw=ae(void 0),wi=xr({fields:hO,name:"receiving",active:ix});var ux=Object.freeze({__proto__:null,exhibit:(t,s)=>Ki({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const Ci=(t,s=!1)=>t.dom.focus({preventScroll:s}),xh=t=>t.dom.blur(),D1=t=>{const s=Be(t).dom;return t.dom===s.activeElement},Xu=(t=xm())=>R.from(t.dom.activeElement).map(we.fromDom),wl=t=>Xu(Be(t)).filter(s=>t.dom.contains(s.dom)),_t=(t,s)=>{const a=Be(s),c=Xu(a).bind(h=>{const v=E=>wo(h,E);return v(s)?R.some(s):tx(s,v)}),d=t(s);return c.each(h=>{Xu(a).filter(v=>wo(v,h)).fold(()=>{Ci(h)},ee)}),d},fc=(t,s,a,c,d)=>{const h=v=>v+"px";return{position:t,left:s.map(h),top:a.map(h),right:c.map(h),bottom:d.map(h)}},dx=t=>({...t,position:R.some(t.position)}),mx=(t,s)=>{at(t,dx(s))},zw=Zi.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),fx=(t,s,a,c,d,h)=>{const v=s.rect,E=v.x-a,T=v.y-c,D=v.width,N=v.height,L=d-(E+D),V=h-(T+N),j=R.some(E),Y=R.some(T),ie=R.some(L),Ee=R.some(V),he=R.none();return Vm(s.direction,()=>fc(t,j,Y,he,he),()=>fc(t,he,Y,ie,he),()=>fc(t,j,he,he,Ee),()=>fc(t,he,he,ie,Ee),()=>fc(t,j,Y,he,he),()=>fc(t,j,he,he,Ee),()=>fc(t,j,Y,he,he),()=>fc(t,he,Y,ie,he))},Vw=(t,s)=>t.fold(()=>{const a=s.rect;return fc("absolute",R.some(a.x),R.some(a.y),R.none(),R.none())},(a,c,d,h)=>fx("absolute",s,a,c,d,h),(a,c,d,h)=>fx("fixed",s,a,c,d,h)),Uw=(t,s)=>{const a=Ht(Ad,s),c=t.fold(a,a,()=>{const v=$a();return Ad(s).translate(-v.left,-v.top)}),d=Ba(s),h=_d(s);return gs(c.left,c.top,d,h)},bO=(t,s)=>s.fold(()=>t.fold(Ur,Ur,gs),a=>t.fold(ae(a),ae(a),()=>{const c=Ww(t,a.x,a.y);return gs(c.left,c.top,a.width,a.height)})),Ww=(t,s,a)=>{const c=io(s,a),d=()=>{const h=$a();return c.translate(-h.left,-h.top)};return t.fold(ae(c),ae(c),d)},vO=(t,s,a,c)=>t.fold(s,a,c);zw.none;const Ha=zw.relative,R1=zw.fixed,yO=(t,s)=>({anchorBox:t,origin:s}),wO=(t,s)=>yO(t,s),Zw="data-alloy-placement",CO=(t,s)=>{xt(t,Zw,s)},gx=t=>Hr(t,Zw),hx=t=>ys(t,Zw),M1=Zi.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),px=(t,s)=>{const{x:a,y:c,right:d,bottom:h}=s,{x:v,y:E,right:T,bottom:D,width:N,height:L}=t,V=v>=a&&v<=d,j=E>=c&&E<=h,Y=V&&j,ie=T<=d&&T>=a,Ee=D<=h&&D>=c,he=ie&&Ee,fe=Math.min(N,v>=a?d-v:T-a),_e=Math.min(L,E>=c?h-E:D-c);return{originInBounds:Y,sizeInBounds:he,visibleW:fe,visibleH:_e}},jw=(t,s)=>{const{x:a,y:c,right:d,bottom:h}=s,{x:v,y:E,width:T,height:D}=t,N=Math.max(a,d-T),L=Math.max(c,h-D),V=mc(v,a,N),j=mc(E,c,L),Y=Math.min(V+T,d)-V,ie=Math.min(j+D,h)-j;return gs(V,j,Y,ie)},tg=(t,s,a)=>{const c=ae(s.bottom-a.y),d=ae(a.bottom-s.y),h=Aw(t,d,d,c),v=ae(s.right-a.x),E=ae(a.right-s.x);return{maxWidth:Uv(t,E,E,v),maxHeight:h}},SO=(t,s,a,c)=>{const d=t.bubble,h=d.offset,v=Zv(c,t.restriction,h),E=t.x+h.left,T=t.y+h.top,D=gs(E,T,s,a),{originInBounds:N,sizeInBounds:L,visibleW:V,visibleH:j}=px(D,v),Y=N&&L,ie=Y?D:jw(D,v),Ee=ie.width>0&&ie.height>0,{maxWidth:he,maxHeight:fe}=tg(t.direction,ie,c),_e={rect:ie,maxHeight:fe,maxWidth:he,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:T};return Y||t.alwaysFit?M1.fit(_e):M1.nofit(_e,V,j,Ee)},xO=(t,s,a,c,d,h)=>{const v=c.width,E=c.height,T=(N,L,V,j,Y)=>{const ie=N(a,c,d,t,h),Ee=SO(ie,v,E,h);return Ee.fold(ae(Ee),(he,fe,_e,Xe)=>(Y===Xe?_e>j||fe>V:!Y&&Xe)?Ee:M1.nofit(L,V,j,Y))};return Io(s,(N,L)=>{const V=Ht(T,L);return N.fold(ae(N),V)},M1.nofit({rect:a,maxHeight:c.height,maxWidth:c.width,direction:T1(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(yt,yt)},Gw=t=>{const s=Jt(R.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(R.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:E=>{a(),s.set(R.some(E))}}},EO=()=>Gw(t=>t.destroy()),Zd=()=>Gw(t=>t.unbind()),Dn=()=>{const t=Gw(ee);return{...t,on:a=>t.get().each(a)}},qw=Rt,za=(t,s,a)=>Zl(t,s,qw,a),Yv=(t,s,a)=>sv(t,s,qw,a),Kw=Mu,Yw=["top","bottom","right","left"],Xv="data-alloy-transition-timer",bx=(t,s)=>la(t,s.classes),TO=(t,s,a)=>a.exists(c=>{const d=t.mode;return d==="all"?!0:c[d]!==s[d]}),_O=(t,s)=>{const a=c=>parseFloat(c).toFixed(3);return Ar(s,(c,d)=>{const h=t[d].map(a),v=c.map(a);return!vm(h,v)}).isSome()},Eh=t=>{const s=h=>{const E=Ds(t,h).split(/\s*,\s*/);return ko(E,Na)},a=h=>{if(W(h)&&/^[\d.]+/.test(h)){const v=parseFloat(h);return Ii(h,"ms")?v:v*1e3}else return 0},c=s("transition-delay"),d=s("transition-duration");return Io(d,(h,v,E)=>{const T=a(c[E])+a(v);return Math.max(h,T)},0)},vx=(t,s)=>{const a=Zd(),c=Zd();let d;const h=D=>{var N;const L=(N=D.raw.pseudoElement)!==null&&N!==void 0?N:"";return wo(D.target,t)&&vs(L)&&yo(Yw,D.raw.propertyName)},v=D=>{if(De(D)||h(D)){a.clear(),c.clear();const N=D==null?void 0:D.raw.type;(De(N)||N===Vf())&&(clearTimeout(d),ys(t,Xv),uc(t,s.classes))}},E=za(t,aw(),D=>{h(D)&&(E.unbind(),a.set(za(t,Vf(),v)),c.set(za(t,Wk(),v)))}),T=Eh(t);requestAnimationFrame(()=>{d=setTimeout(v,T+17),xt(t,Xv,d)})},qM=(t,s)=>{Ss(t,s.classes),Hr(t,Xv).each(a=>{clearTimeout(parseInt(a,10)),ys(t,Xv)}),vx(t,s)},Um=(t,s,a,c,d,h)=>{const v=TO(c,d,h);if(v||bx(t,c)){bn(t,"position",a.position);const E=Uw(s,t),T=Vw(s,{...d,rect:E}),D=$l(Yw,N=>T[N]);_O(a,D)&&(at(t,D),v&&qM(t,c),mi(t))}else uc(t,c.classes)},kO=t=>({width:Ba(t),height:_d(t)}),Th=(t,s,a,c)=>{eo(s,"max-height"),eo(s,"max-width");const d=kO(s);return xO(s,c.preference,t,d,a,c.bounds)},OO=(t,s)=>{const a=s.classes;uc(t,a.off),Ss(t,a.on)},Xw=(t,s,a)=>{const c=a.maxHeightFunction;c(t,s.maxHeight)},yx=(t,s,a)=>{const c=a.maxWidthFunction;c(t,s.maxWidth)},ng=(t,s,a)=>{const c=Vw(a.origin,s);a.transition.each(d=>{Um(t,a.origin,c,d,s,a.lastPlacement)}),mx(t,c)},AO=(t,s)=>{CO(t,s.placement)},wx=(t,s)=>{Gp(t,Math.floor(s))},Cx=ae((t,s)=>{wx(t,s),ei(t,{"overflow-x":"hidden","overflow-y":"auto"})}),_h=ae((t,s)=>{wx(t,s)}),Sx=(t,s,a)=>t[s]===void 0?a:t[s],Jw=(t,s,a,c,d,h,v,E)=>{const T=Sx(v,"maxHeightFunction",Cx()),D=Sx(v,"maxWidthFunction",ee),N=t.anchorBox,L=t.origin,V={bounds:bO(L,h),origin:L,preference:c,maxHeightFunction:T,maxWidthFunction:D,lastPlacement:d,transition:E};return DO(N,s,a,V)},DO=(t,s,a,c)=>{const d=Th(t,s,a,c);return ng(s,d,c),AO(s,d),OO(s,d),Xw(s,d,c),yx(s,d,c),{layout:d.layout,placement:d.placement}},xx=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Ju=(t,s,a,c=1)=>{const d=t*c,h=s*c,v=T=>vt(a,T).getOr([]),E=(T,D,N)=>{const L=Zt(xx,N);return{offset:io(T,D),classesOn:Ie(N,v),classesOff:Ie(L,v)}};return{southeast:()=>E(-t,s,["top","alignLeft"]),southwest:()=>E(t,s,["top","alignRight"]),south:()=>E(-t/2,s,["top","alignCentre"]),northeast:()=>E(-t,-s,["bottom","alignLeft"]),northwest:()=>E(t,-s,["bottom","alignRight"]),north:()=>E(-t/2,-s,["bottom","alignCentre"]),east:()=>E(t,-s/2,["valignCentre","left"]),west:()=>E(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>E(d,h,["top","alignLeft","inset"]),insetNorthwest:()=>E(-d,h,["top","alignRight","inset"]),insetNorth:()=>E(-d/2,h,["top","alignCentre","inset"]),insetSoutheast:()=>E(d,-h,["bottom","alignLeft","inset"]),insetSouthwest:()=>E(-d,-h,["bottom","alignRight","inset"]),insetSouth:()=>E(-d/2,-h,["bottom","alignCentre","inset"]),insetEast:()=>E(-d,-h/2,["valignCentre","right","inset"]),insetWest:()=>E(d,-h/2,["valignCentre","left","inset"])}},N1=()=>Ju(0,0,{}),P1=yt,Jv=(t,s)=>a=>B1(a)==="rtl"?s:t,B1=t=>Ds(t,"direction")==="rtl"?"rtl":"ltr";var Zc;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(Zc||(Zc={}));const kh="data-alloy-vertical-dir",$1=t=>Ew(t,s=>po(s)&&As(s,"data-alloy-vertical-dir")===Zc.BottomToTop),Wm=()=>pi("layouts",[We("onLtr"),We("onRtl"),go("onBottomLtr"),go("onBottomRtl")]),Qv=(t,s,a,c,d,h,v)=>{const E=v.map($1).getOr(!1),T=s.layouts.map(j=>j.onLtr(t)),D=s.layouts.map(j=>j.onRtl(t)),N=E?s.layouts.bind(j=>j.onBottomLtr.map(Y=>Y(t))).or(T).getOr(d):T.getOr(a),L=E?s.layouts.bind(j=>j.onBottomRtl.map(Y=>Y(t))).or(D).getOr(h):D.getOr(c);return Jv(N,L)(t)},RO=(t,s,a)=>{const c=s.hotspot,d=Uw(a,c.element),h=Qv(t.element,s,Gv(),Fw(),Iw(),ax(),R.some(s.hotspot.element));return R.some(P1({anchorBox:d,bubble:s.bubble.getOr(N1()),overrides:s.overrides,layouts:h}))};var MO=[We("hotspot"),go("bubble"),xe("overrides",{}),Wm(),To("placement",RO)];const Ex=(t,s,a)=>{const c=Ww(a,s.x,s.y),d=gs(c.left,c.top,s.width,s.height),h=Qv(t.element,s,$w(),A1(),$w(),A1(),R.none());return R.some(P1({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:h}))};var NO=[We("x"),We("y"),xe("height",0),xe("width",0),xe("bubble",N1()),xe("overrides",{}),Wm(),To("placement",Ex)];const Qw=Zi.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),PO=t=>t.fold(yt,(s,a,c)=>s.translate(-a,-c)),BO=t=>t.fold(yt,yt),Tx=t=>Io(t,(s,a)=>s.translate(a.left,a.top),io(0,0)),$O=t=>{const s=Ke(t,PO);return Tx(s)},_x=t=>{const s=Ke(t,BO);return Tx(s)},IO=Qw.screen,e0=Qw.absolute,FO=(t,s,a)=>{const c=Pc(a.root).dom,d=h=>{const v=Pa(h),E=Pa(t.element);return wo(v,E)};return R.from(c.frameElement).map(we.fromDom).filter(d).map(ac)},kx=(t,s,a)=>{const c=Pa(t.element),d=$a(c),h=FO(t,s,a).getOr(d);return e0(h,d.left,d.top)},Oh=(t,s,a,c)=>{const d=IO(io(t,s));return R.some(e1(d,a,c))},eC=(t,s,a,c,d)=>t.map(h=>{const v=[s,h.point],E=vO(c,()=>_x(v),()=>_x(v),()=>$O(v)),T=Em(E.left,E.top,h.width,h.height),D=a.showAbove?Iw():Gv(),N=a.showAbove?ax():Fw(),L=Qv(d,a,D,N,D,N,R.none());return P1({anchorBox:T,bubble:a.bubble.getOr(N1()),overrides:a.overrides,layouts:L})}),tC=(t,s,a)=>{const c=kx(t,a,s);return s.node.filter(Xn).bind(d=>{const h=d.dom.getBoundingClientRect(),v=Oh(h.left,h.top,h.width,h.height),E=s.node.getOr(t.element);return eC(v,c,s,a,E)})};var nC=[We("node"),We("root"),go("bubble"),Wm(),xe("overrides",{}),xe("showAbove",!1),To("placement",tC)];const Ox="\uFEFF",oC=" ",t0={create:(t,s,a,c)=>({start:t,soffset:s,finish:a,foffset:c})},n0=Zi.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),HO=(t,s,a,c)=>t.fold(s,a,c),sC=t=>t.fold(yt,yt,yt),Ax=n0.before,zO=n0.on,rC=n0.after,VO={before:Ax,on:zO,after:rC,cata:HO,getStart:sC},Ah=Zi.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),UO=t=>Ah.exact(t.start,t.soffset,t.finish,t.foffset),aC=t=>t.match({domRange:s=>we.fromDom(s.startContainer),relative:(s,a)=>VO.getStart(s),exact:(s,a,c,d)=>s}),WO=Ah.domRange,ZO=Ah.relative,jO=Ah.exact,Dx=t=>{const s=aC(t);return Pc(s)},GO=t0.create,qr={domRange:WO,relative:ZO,exact:jO,exactFromRange:UO,getWin:Dx,range:GO},KM=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,c)=>{t.setStart(a.dom,c)},a=>{t.setStartAfter(a.dom)})},Dh=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,c)=>{t.setEnd(a.dom,c)},a=>{t.setEndAfter(a.dom)})},o0=(t,s,a)=>{const c=t.document.createRange();return KM(c,s),Dh(c,a),c},Rx=(t,s,a,c,d)=>{const h=t.document.createRange();return h.setStart(s.dom,a),h.setEnd(c.dom,d),h},iC=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),Mx=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?R.some(a).map(iC):R.none()},Nx=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?R.some(s).map(iC):R.none()},og=Zi.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),I1=(t,s,a)=>s(we.fromDom(a.startContainer),a.startOffset,we.fromDom(a.endContainer),a.endOffset),qO=(t,s)=>s.match({domRange:a=>({ltr:ae(a),rtl:R.none}),relative:(a,c)=>({ltr:fs(()=>o0(t,a,c)),rtl:fs(()=>R.some(o0(t,c,a)))}),exact:(a,c,d,h)=>({ltr:fs(()=>Rx(t,a,c,d,h)),rtl:fs(()=>R.some(Rx(t,d,h,a,c)))})}),KO=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>og.rtl(we.fromDom(d.endContainer),d.endOffset,we.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>I1(t,og.ltr,a)):I1(t,og.ltr,a)},F1=(t,s)=>{const a=qO(t,s);return KO(t,a)},cC=(t,s)=>F1(t,s).match({ltr:(c,d,h,v)=>{const E=t.document.createRange();return E.setStart(c.dom,d),E.setEnd(h.dom,v),E},rtl:(c,d,h,v)=>{const E=t.document.createRange();return E.setStart(h.dom,v),E.setEnd(c.dom,d),E}});og.ltr,og.rtl;const Px=(t,s,a)=>ko($g(t,a),s),Er=(t,s)=>va(s,t),Bx=(t,s,a,c)=>{const h=Pa(t).dom.createRange();return h.setStart(t.dom,s),h.setEnd(a.dom,c),h},lC=(t,s,a,c)=>{const d=Bx(t,s,a,c),h=wo(t,a)&&s===c;return d.collapsed&&!h},YM=t=>R.from(t.getSelection()),Rh=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return R.some(t0.create(we.fromDom(s.startContainer),s.startOffset,we.fromDom(a.endContainer),a.endOffset))}else return R.none()},YO=t=>{if(t.anchorNode===null||t.focusNode===null)return Rh(t);{const s=we.fromDom(t.anchorNode),a=we.fromDom(t.focusNode);return lC(s,t.anchorOffset,a,t.focusOffset)?R.some(t0.create(s,t.anchorOffset,a,t.focusOffset)):Rh(t)}},$x=t=>YM(t).filter(s=>s.rangeCount>0).bind(YO),uC=(t,s)=>{const a=cC(t,s);return Mx(a)},L1=(t,s)=>{const a=cC(t,s);return Nx(a)},Mh=((t,s)=>{const a=h=>{if(!t(h))throw new Error("Can only get "+s+" value of a "+s+" node");return c(h).getOr("")},c=h=>t(h)?R.from(h.dom.nodeValue):R.none();return{get:a,getOption:c,set:(h,v)=>{if(!t(h))throw new Error("Can only set raw "+s+" value of a "+s+" node");h.dom.nodeValue=v}}})(na,"text"),XO=t=>Mh.get(t),Zm=(t,s)=>({element:t,offset:s}),Ix=(t,s)=>{const a=di(t);if(a.length===0)return Zm(t,s);if(s<a.length)return Zm(a[s],0);{const c=a[a.length-1],d=na(c)?XO(c).length:di(c).length;return Zm(c,d)}},jm=(t,s)=>na(t)?Zm(t,s):Ix(t,s),Gm=t=>t.foffset!==void 0,dC=(t,s)=>s.getSelection.getOrThunk(()=>()=>$x(t))().map(c=>{if(Gm(c)){const d=jm(c.start,c.soffset),h=jm(c.finish,c.foffset);return qr.range(d.element,d.offset,h.element,h.offset)}else return c}),Fx=(t,s,a)=>{const c=Pc(s.root).dom,d=kx(t,a,s),h=dC(c,s).bind(T=>{if(Gm(T))return L1(c,qr.exactFromRange(T)).orThunk(()=>{const N=we.fromText(Ox);Hc(T.start,N);const L=uC(c,qr.exact(N,0,N,1));return zc(N),L}).bind(N=>Oh(N.left,N.top,N.width,N.height));{const D=Jo(T,L=>L.dom.getBoundingClientRect()),N={left:Math.min(D.firstCell.left,D.lastCell.left),right:Math.max(D.firstCell.right,D.lastCell.right),top:Math.min(D.firstCell.top,D.lastCell.top),bottom:Math.max(D.firstCell.bottom,D.lastCell.bottom)};return Oh(N.left,N.top,N.right-N.left,N.bottom-N.top)}}),E=dC(c,s).bind(T=>Gm(T)?po(T.start)?R.some(T.start):Fi(T.start):R.some(T.firstCell)).getOr(t.element);return eC(h,d,s,a,E)};var XM=[go("getSelection"),We("root"),go("bubble"),Wm(),xe("overrides",{}),xe("showAbove",!1),To("placement",Fx)];const mC="link-layout",qm=t=>t.x+t.width,Qu=(t,s)=>t.x-s.width,H1=(t,s)=>t.y-s.height+t.height,Nh=t=>t.y,fC=(t,s,a)=>wr(qm(t),Nh(t),a.southeast(),T1(),"southeast",rs(t,{left:0,top:2}),mC),jd=(t,s,a)=>wr(Qu(t,s),Nh(t),a.southwest(),Dw(),"southwest",rs(t,{right:1,top:2}),mC),ru=(t,s,a)=>wr(qm(t),H1(t,s),a.northeast(),Wv(),"northeast",rs(t,{left:0,bottom:3}),mC),z1=(t,s,a)=>wr(Qu(t,s),H1(t,s),a.northwest(),Yu(),"northwest",rs(t,{right:1,bottom:3}),mC),r0=()=>[fC,jd,ru,z1],V1=()=>[jd,fC,z1,ru],gC=(t,s,a)=>{const c=Uw(a,s.item.element),d=Qv(t.element,s,r0(),V1(),r0(),V1(),R.none());return R.some(P1({anchorBox:c,bubble:N1(),overrides:s.overrides,layouts:d}))};var Ph=[We("item"),Wm(),xe("overrides",{}),To("placement",gC)],U1=Vn("type",{selection:XM,node:nC,hotspot:MO,submenu:Ph,makeshift:NO});const hC=[ic("classes",Zr),Wi("mode","all",["all","layout","placement"])],Lx=[xe("useFixed",Pn),go("getBounds")],Km=[Vi("anchor",U1),pi("transition",hC)],a0=()=>{const t=document.documentElement;return R1(0,0,t.clientWidth,t.clientHeight)},JO=t=>{const s=ac(t.element),a=t.element.dom.getBoundingClientRect();return Ha(s.left,s.top,a.width,a.height)},Hx=(t,s,a,c,d,h)=>{const v=wO(s.anchorBox,t);return Jw(v,c.element,s.bubble,s.layouts,d,a,s.overrides,h)},pC=(t,s,a,c,d)=>{const h=R.none();Us(t,s,a,c,d,h)},Us=(t,s,a,c,d,h)=>{const v=oi("placement.info",Vt(Km),d),E=v.anchor,T=c.element,D=a.get(c.uid);_t(()=>{bn(T,"position","fixed");const N=qs(T,"visibility");bn(T,"visibility","hidden");const L=s.useFixed()?a0():JO(t);E.placement(t,E,L).each(V=>{const j=h.orThunk(()=>s.getBounds.map(Yn)),Y=Hx(L,V,j,c,D,v.transition);a.set(c.uid,Y)}),N.fold(()=>{eo(T,"visibility")},V=>{bn(T,"visibility",V)}),qs(T,"left").isNone()&&qs(T,"top").isNone()&&qs(T,"right").isNone()&&qs(T,"bottom").isNone()&&Ma(qs(T,"position"),"fixed")&&eo(T,"position")},T)};var zx=Object.freeze({__proto__:null,position:pC,positionWithinBounds:Us,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,c)=>{const d=c.element;St(["position","left","right","top","bottom"],h=>eo(d,h)),hx(d),a.clear(c.uid)}}),Ym=Object.freeze({__proto__:null,init:()=>{let t={};return qi({readState:()=>t,clear:d=>{Je(d)?delete t[d]:t={}},set:(d,h)=>{t[d]=h},get:d=>vt(t,d)})}});const Ta=xr({fields:Lx,name:"positioning",active:ux,apis:zx,state:Ym}),Bh=t=>t.getSystem().isConnected(),W1=t=>{Fn(t,Pm());const s=t.components();St(s,W1)},$h=t=>{const s=t.components();St(s,$h),Fn(t,lc())},bC=(t,s)=>{t.getSystem().addToWorld(s),Xn(t.element)&&$h(s)},Ih=t=>{W1(t),t.getSystem().removeFromWorld(t)},sg=(t,s)=>{Ca(t.element,s.element)},au=t=>{St(t.components(),s=>zc(s.element)),Mf(t.element),t.syncComponents()},QO=(t,s,a)=>{const c=t.components();au(t);const d=a(s),h=Zt(c,d);St(h,v=>{W1(v),t.getSystem().removeFromWorld(v)}),St(d,v=>{Bh(v)?sg(t,v):(t.getSystem().addToWorld(v),sg(t,v),Xn(t.element)&&$h(v))}),t.syncComponents()},eA=(t,s,a)=>{const c=t.components(),d=Ie(s,E=>rh(E).toArray());St(c,E=>{yo(d,E)||Ih(E)});const h=a(s),v=Zt(c,h);St(v,E=>{Bh(E)&&Ih(E)}),St(h,E=>{Bh(E)||bC(t,E)}),t.syncComponents()},Xm=(t,s)=>{Fh(t,s,Ca)},Fh=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),Xn(t.element)&&$h(s),t.syncComponents()},c0=t=>{W1(t),zc(t.element),t.getSystem().removeFromWorld(t)},ed=t=>{const s=oa(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());c0(t),s.each(a=>{a.syncComponents()})},vC=t=>{const s=t.components();St(s,c0),Mf(t.element),t.syncComponents()},Kr=(t,s)=>{Cl(t,s,Ca)},qd=(t,s)=>{Cl(t,s,fl)},Cl=(t,s,a)=>{a(t,s.element);const c=di(s.element);St(c,d=>{s.getByDom(d).each($h)})},Lh=t=>{const s=di(t.element);St(s,a=>{t.getByDom(a).each(W1)}),zc(t.element)},Va=(t,s,a,c)=>{a.get().each(v=>{vC(t)});const d=s.getAttachPoint(t);Xm(d,t);const h=t.getSystem().build(c);return Xm(t,h),a.set(h),h},Si=(t,s,a,c)=>{const d=Va(t,s,a,c);return s.onOpen(t,d),d},ai=(t,s,a,c)=>a.get().map(()=>Va(t,s,a,c)),Sl=(t,s,a,c,d)=>{Z1(t,s),Si(t,s,a,c),d(),j1(t,s)},l0=(t,s,a)=>{a.get().each(c=>{vC(t),ed(t),s.onClose(t,c),a.clear()})},gc=(t,s,a)=>a.isOpen(),rg=(t,s,a,c)=>gc(t,s,a)&&a.get().exists(d=>s.isPartOf(t,d,c)),yC=(t,s,a)=>a.get(),tA=(t,s,a,c)=>{qs(t.element,s).fold(()=>{ys(t.element,a)},d=>{xt(t.element,a,d)}),bn(t.element,s,c)},Vx=(t,s,a)=>{Hr(t.element,a).fold(()=>eo(t.element,s),c=>bn(t.element,s,c))},Z1=(t,s,a)=>{const c=s.getAttachPoint(t);bn(t.element,"position",Ta.getMode(c)),tA(t,"visibility",s.cloakVisibilityAttr,"hidden")},Ux=t=>kr(["top","left","right","bottom"],s=>qs(t,s).isSome()),j1=(t,s,a)=>{Ux(t.element)||eo(t.element,"position"),Vx(t,"visibility",s.cloakVisibilityAttr)};var u0=Object.freeze({__proto__:null,cloak:Z1,decloak:j1,open:Si,openWhileCloaked:Sl,close:l0,isOpen:gc,isPartOf:rg,getState:yC,setContent:ai}),Wx=Object.freeze({__proto__:null,events:(t,s)=>Ho([Ve(d1(),(a,c)=>{l0(a,t,s)})])}),oA=[Un("onOpen"),Un("onClose"),We("isPartOf"),We("getAttachPoint"),xe("cloakVisibilityAttr","data-precloak-visibility")],Zx=Object.freeze({__proto__:null,init:()=>{const t=Dn(),s=ae("not-implemented");return qi({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const Ln=xr({fields:oA,name:"sandboxing",active:Wx,apis:u0,state:Zx}),iu=ae("dismiss.popups"),ag=ae("reposition.popups"),wC=ae("mouse.released"),jx=Wo([xe("isExtraPart",Pn),pi("fireEventInstead",[xe("event",Bm())])]),G1=t=>{const s=oi("Dismissal",jx,t);return{[iu()]:{schema:Wo([We("target")]),onReceive:(a,c)=>{Ln.isOpen(a)&&(Ln.isPartOf(a,c.target)||s.isExtraPart(a,c.target)||s.fireEventInstead.fold(()=>Ln.close(a),h=>Fn(a,h.event)))}}}},sA=Wo([pi("fireEventInstead",[xe("event",L2())]),Yl("doReposition")]),Hh=t=>{const s=oi("Reposition",sA,t);return{[ag()]:{onReceive:a=>{Ln.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),c=>Fn(a,c.event))}}}},d0=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},hc=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var Jm=Object.freeze({__proto__:null,onLoad:d0,onUnload:hc,setValue:(t,s,a,c)=>{s.store.manager.setValue(t,s,a,c)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),g0=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[No((c,d)=>{d0(c,t,s)}),Wu((c,d)=>{hc(c,t,s)})]:[qv(t,s,d0)];return Ho(a)}});const ig=()=>{const t=Jt(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,c=()=>{t.set(null)};return qi({set:t.set,get:t.get,isNotSet:a,clear:c,readState:s})},rA=()=>qi({readState:ee}),Gx=()=>{const t=Jt({}),s=Jt({});return qi({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:v=>vt(t.get(),v).orThunk(()=>vt(s.get(),v)),update:v=>{const E=t.get(),T=s.get(),D={},N={};St(v,L=>{D[L.value]=L,vt(L,"meta").each(V=>{vt(V,"text").each(j=>{N[j]=L})})}),t.set({...E,...D}),s.set({...T,...N})},clear:()=>{t.set({}),s.set({})}})};var Vh=Object.freeze({__proto__:null,memory:ig,dataset:Gx,manual:rA,init:t=>t.store.manager.state(t)});const Kd=(t,s,a,c)=>{const d=s.store;a.update([c]),d.setValue(t,c),s.onSetValue(t,c)},iA=(t,s,a)=>{const c=s.store,d=c.getDataKey(t);return a.lookup(d).getOrThunk(()=>c.getFallbackEntry(d))},cA=(t,s,a)=>{s.store.initialValue.each(d=>{Kd(t,s,a,d)})},qx=(t,s,a)=>{a.clear()};var CC=[go("initialValue"),We("getFallbackEntry"),We("getDataKey"),We("setValue"),To("manager",{setValue:Kd,getValue:iA,onLoad:cA,onUnload:qx,state:Gx})];const SC=(t,s,a)=>s.store.getValue(t),xC=(t,s,a,c)=>{s.store.setValue(t,c),s.onSetValue(t,c)},h0=(t,s,a)=>{s.store.initialValue.each(c=>{s.store.setValue(t,c)})};var Qm=[We("getValue"),xe("setValue",ee),go("initialValue"),To("manager",{setValue:xC,getValue:SC,onLoad:h0,onUnload:ee,state:vl.init})];const Kx=(t,s,a,c)=>{a.set(c),s.onSetValue(t,c)},q1=(t,s,a)=>a.get(),EC=(t,s,a)=>{s.store.initialValue.each(c=>{a.isNotSet()&&a.set(c)})},lA=(t,s,a)=>{a.clear()};var K1=[go("initialValue"),To("manager",{setValue:Kx,getValue:q1,onLoad:EC,onUnload:lA,state:ig})],uA=[Ui("store",{mode:"memory"},Vn("mode",{memory:K1,manual:Qm,dataset:CC})),Un("onSetValue"),xe("resetOnDom",!1)];const wt=xr({fields:uA,name:"representing",active:g0,apis:Jm,extra:{setValueFrom:(t,s)=>{const a=wt.getValue(s);wt.setValue(t,a)}},state:Vh}),fr=(t,s)=>Lu(t,{},Ke(s,a=>Qy(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([Ls("dump",yt)])),Yd=t=>t.dump,Ys=(t,s)=>({...lt(s),...t.dump}),jc={field:fr,augment:Ys,get:Yd},p0="placeholder",Y1=Zi.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),cu=t=>no(t,"uiType"),b0=(t,s,a,c)=>t.exists(d=>d!==a.owner)?Y1.single(!0,ae(a)):vt(c,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+ns(c)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),v0=(t,s,a,c)=>cu(a)&&a.uiType===p0?b0(t,s,a,c):Y1.single(!1,ae(a)),Uh=(t,s,a,c)=>v0(t,s,a,c).fold((h,v)=>{const E=cu(a)?v(s,a.config,a.validated):v(s),T=vt(E,"components").getOr([]),D=Ie(T,N=>Uh(t,s,N,c));return[{...E,components:D}]},(h,v)=>{if(cu(a)){const E=v(s,a.config,a.validated);return a.validated.preprocess.getOr(yt)(E)}else return v(s)}),Yx=(t,s,a,c)=>Ie(a,d=>Uh(t,s,d,c)),X1=(t,s)=>{let a=!1;const c=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},h=()=>s.fold((v,E)=>v,(v,E)=>v);return{name:ae(t),required:h,used:c,replace:d}},TC=(t,s,a,c)=>{const d=Jo(c,(v,E)=>X1(E,v)),h=Yx(t,s,a,d);return Xo(d,v=>{if(v.used()===!1&&v.required())throw new Error("Placeholder: "+v.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),h},_C=Y1.single,dA=Y1.multiple,lu=ae(p0),y0=Zi.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Wh=xe("factory",{sketch:yt}),da=xe("schema",[]),tr=We("name"),w0=ra("pname","pname",Uc(t=>"<alloy."+Ot(t.name)+">"),ur()),J1=Ls("schema",()=>[go("preprocess")]),C0=xe("defaults",ae({})),Q1=xe("overrides",ae({})),eb=Vt([Wh,da,tr,w0,C0,Q1]),Zh=Vt([Wh,da,tr,C0,Q1]),Xx=Vt([Wh,da,tr,w0,C0,Q1]),tb=Vt([Wh,J1,tr,We("unit"),w0,C0,Q1]),Jx=t=>t.fold(R.some,R.none,R.some,R.some),Qx=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},eE=t=>t.fold(yt,yt,yt,yt),Gc=(t,s)=>a=>{const c=oi("Converting part type",s,a);return t(c)},_a=Gc(y0.required,eb),xl=Gc(y0.external,Zh),xi=Gc(y0.optional,Xx),nb=Gc(y0.group,tb),S0=ae("entirety");var tE=Object.freeze({__proto__:null,required:_a,external:xl,optional:xi,group:nb,asNamedPart:Jx,name:Qx,asCommon:eE,original:S0});const ob=(t,s,a,c)=>Eo(s.defaults(t,a,c),a,{uid:t.partUids[s.name]},s.overrides(t,a,c)),mA=(t,s,a)=>{const c={},d={};return St(a,h=>{h.fold(v=>{c[v.pname]=_C(!0,(E,T,D)=>v.factory.sketch(ob(E,v,T,D)))},v=>{const E=s.parts[v.name];d[v.name]=ae(v.factory.sketch(ob(s,v,E[S0()]),E))},v=>{c[v.pname]=_C(!1,(E,T,D)=>v.factory.sketch(ob(E,v,T,D)))},v=>{c[v.pname]=dA(!0,(E,T,D)=>{const N=E[v.name];return Ke(N,L=>v.factory.sketch(Eo(v.defaults(E,L,D),L,v.overrides(E,L))))})})}),{internals:ae(c),externals:ae(d)}},Xd=(t,s)=>{const a={};return St(s,c=>{Jx(c).each(d=>{const h=sb(t,d.pname);a[d.name]=v=>{const E=oi("Part: "+d.name+" in "+t,Vt(d.schema),v);return{...h,config:v,validated:E}}})}),a},sb=(t,s)=>({uiType:lu(),owner:t,name:s}),kC=(t,s,a)=>({uiType:lu(),owner:t,name:s,config:a,validated:{}}),nE=t=>Ie(t,s=>s.fold(R.none,R.some,R.none,R.none).map(a=>Xl(a.name,a.schema.concat([E1(S0())]))).toArray()),oE=t=>Ke(t,Qx),OC=(t,s,a)=>mA(t,s,a),x0=(t,s,a)=>TC(R.some(t),s,s.components,a),Po=(t,s,a)=>{const c=s.partUids[a];return t.getSystem().getByUid(c).toOptional()},Jd=(t,s,a)=>Po(t,s,a).getOrDie("Could not find part: "+a),sE=(t,s,a)=>{const c={},d=s.partUids,h=t.getSystem();return St(a,v=>{c[v]=ae(h.getByUid(d[v]))}),c},AC=(t,s)=>{const a=t.getSystem();return Jo(s.partUids,(c,d)=>ae(a.getByUid(c)))},DC=t=>ns(t.partUids),cg=(t,s,a)=>{const c={},d=s.partUids,h=t.getSystem();return St(a,v=>{c[v]=ae(h.getByUid(d[v]).getOrDie())}),c},RC=(t,s)=>{const a=oE(s);return ia(Ke(a,c=>({key:c,value:t+"-"+c})))},MC=t=>ra("partUids","partUids",Nn(s=>RC(s.uid,t)),ur());var fA=Object.freeze({__proto__:null,generate:Xd,generateOne:kC,schemas:nE,names:oE,substitutes:OC,components:x0,defaultUids:RC,defaultUidsSchema:MC,getAllParts:AC,getAllPartNames:DC,getPart:Po,getPartOrDie:Jd,getParts:sE,getPartsOrDie:cg});const jh=(t,s)=>(t.length>0?[Xl("parts",t)]:[]).concat([We("uid"),xe("dom",{}),xe("components",[]),E1("originalSpec"),xe("debug.sketcher",{})]).concat(s),Gh=(t,s,a,c,d)=>{const h=jh(c,d);return oi(t+" [SpecSchema]",Wo(h.concat(s)),a)},NC=(t,s,a,c)=>{const d=ef(c),h=Gh(t,s,d,[],[]);return a(h,d)},PC=(t,s,a,c,d)=>{const h=ef(d),v=nE(a),E=MC(a),T=Gh(t,s,h,v,[E]),D=OC(t,T,a),N=x0(t,T,D.internals());return c(T,N,h,D.externals())},El=t=>no(t,"uid"),ef=t=>El(t)?t:{...t,uid:oh("uid")},gA=t=>t.uid!==void 0,rb=Wo([We("name"),We("factory"),We("configFields"),xe("apis",{}),xe("extraApis",{})]),hA=Wo([We("name"),We("factory"),We("configFields"),We("partFields"),xe("apis",{}),xe("extraApis",{})]),ec=t=>{const s=oi("Sketcher for "+t.name,rb,t),a=h=>NC(s.name,s.configFields,s.factory,h),c=Jo(s.apis,qf),d=Jo(s.extraApis,(h,v)=>kv(h,v));return{name:s.name,configFields:s.configFields,sketch:a,...c,...d}},ka=t=>{const s=oi("Sketcher for "+t.name,hA,t),a=v=>PC(s.name,s.configFields,s.partFields,s.factory,v),c=Xd(s.name,s.partFields),d=Jo(s.apis,qf),h=Jo(s.extraApis,(v,E)=>kv(v,E));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:c,...d,...h}},lg=t=>ui("input")(t)&&As(t,"type")!=="radio"||ui("textarea")(t);var rE=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const pA=[We("find")],Bn=xr({fields:pA,name:"composing",apis:rE}),BC=["input","button","textarea","select"],aE=(t,s,a)=>{(s.disabled()?cE:ab)(t,s)},$C=(t,s)=>s.useNative===!0&&yo(BC,Ja(t.element)),bA=t=>jp(t.element,"disabled"),vA=t=>{xt(t.element,"disabled","disabled")},iE=t=>{ys(t.element,"disabled")},yA=t=>As(t.element,"aria-disabled")==="true",kt=t=>{xt(t.element,"aria-disabled","true")},tf=t=>{xt(t.element,"aria-disabled","false")},cE=(t,s,a)=>{s.disableClass.each(d=>{zs(t.element,d)}),($C(t,s)?vA:kt)(t),s.onDisabled(t)},ab=(t,s,a)=>{s.disableClass.each(d=>{ps(t.element,d)}),($C(t,s)?iE:tf)(t),s.onEnabled(t)},ib=(t,s)=>$C(t,s)?bA(t):yA(t);var tN=Object.freeze({__proto__:null,enable:ab,disable:cE,isDisabled:ib,onLoad:aE,set:(t,s,a,c)=>{(c?cE:ab)(t,s)}}),CA=Object.freeze({__proto__:null,exhibit:(t,s)=>Ki({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>Ho([lw(Gi(),(a,c)=>ib(a,t)),qv(t,s,aE)])}),lE=[Mr("disabled",Pn),xe("useNative",!0),go("disableClass"),Un("onDisabled"),Un("onEnabled")];const on=xr({fields:lE,name:"disabling",active:CA,apis:tN}),Qd=(t,s,a,c)=>{const d=Er(t.element,"."+s.highlightClass);St(d,h=>{kr(c,E=>wo(E.element,h))||(ps(h,s.highlightClass),t.getSystem().getByDom(h).each(E=>{s.onDehighlight(t,E),Fn(E,h1())}))})},uE=(t,s,a)=>Qd(t,s,a,[]),SA=(t,s,a,c)=>{E0(t,s,a,c)&&(ps(c.element,s.highlightClass),s.onDehighlight(t,c),Fn(c,h1()))},cb=(t,s,a,c)=>{Qd(t,s,a,[c]),E0(t,s,a,c)||(zs(c.element,s.highlightClass),s.onHighlight(t,c),Fn(c,g1()))},xA=(t,s,a)=>{qh(t,s).each(c=>{cb(t,s,a,c)})},dE=(t,s,a)=>{FC(t,s).each(c=>{cb(t,s,a,c)})},IC=(t,s,a,c)=>{TA(t,s,a,c).fold(d=>{throw d},d=>{cb(t,s,a,d)})},mE=(t,s,a,c)=>{const d=T0(t,s);fn(d,c).each(v=>{cb(t,s,a,v)})},E0=(t,s,a,c)=>mr(c.element,s.highlightClass),EA=(t,s,a)=>Vs(t.element,"."+s.highlightClass).bind(c=>t.getSystem().getByDom(c).toOptional()),TA=(t,s,a,c)=>{const d=Er(t.element,"."+s.itemClass);return R.from(d[c]).fold(()=>xn.error(new Error("No element found with index "+c)),t.getSystem().getByDom)},qh=(t,s,a)=>Vs(t.element,"."+s.itemClass).bind(c=>t.getSystem().getByDom(c).toOptional()),FC=(t,s,a)=>{const c=Er(t.element,"."+s.itemClass);return(c.length>0?R.some(c[c.length-1]):R.none()).bind(h=>t.getSystem().getByDom(h).toOptional())},fE=(t,s,a,c)=>{const d=Er(t.element,"."+s.itemClass);return Yo(d,v=>mr(v,s.highlightClass)).bind(v=>{const E=wh(v,c,0,d.length-1);return t.getSystem().getByDom(d[E]).toOptional()})},_A=(t,s,a)=>fE(t,s,a,-1),kA=(t,s,a)=>fE(t,s,a,1),T0=(t,s,a)=>{const c=Er(t.element,"."+s.itemClass);return Bi(Ke(c,d=>t.getSystem().getByDom(d).toOptional()))};var td=Object.freeze({__proto__:null,dehighlightAll:uE,dehighlight:SA,highlight:cb,highlightFirst:xA,highlightLast:dE,highlightAt:IC,highlightBy:mE,isHighlighted:E0,getHighlighted:EA,getFirst:qh,getLast:FC,getPrevious:_A,getNext:kA,getCandidates:T0}),_0=[We("highlightClass"),We("itemClass"),Un("onHighlight"),Un("onDehighlight")];const ro=xr({fields:_0,name:"highlighting",apis:td}),OA=[8],em=[9],nd=[13],k0=[27],pc=[32],O0=[37],tm=[38],Kh=[39],lb=[40],LC=(t,s,a)=>{const c=sr(t.slice(0,s)),d=sr(t.slice(s+1));return fn(c.concat(d),a)},AA=(t,s,a)=>{const c=sr(t.slice(0,s));return fn(c,a)},HC=(t,s,a)=>{const c=t.slice(0,s),d=t.slice(s+1);return fn(d.concat(c),a)},DA=(t,s,a)=>{const c=t.slice(s+1);return fn(c,a)},Hn=t=>s=>{const a=s.raw;return yo(t,a.which)},bc=t=>s=>uo(t,a=>a(s)),nm=t=>t.raw.shiftKey===!0,RA=t=>t.raw.ctrlKey===!0,Yh=Te(nm),Qn=(t,s)=>({matches:t,classification:s}),MA=(t,s)=>fn(t,c=>c.matches(s)).map(c=>c.classification),zC=(t,s,a)=>{s.exists(d=>a.exists(h=>wo(h,d)))||Gt(t,wv(),{prevFocus:s,newFocus:a})},l=()=>{const t=a=>wl(a.element);return{get:t,set:(a,c)=>{const d=t(a);a.getSystem().triggerFocus(c,a.element);const h=t(a);zC(a,d,h)}}},m=()=>{const t=a=>ro.getHighlighted(a).map(c=>c.element);return{get:t,set:(a,c)=>{const d=t(a);a.getSystem().getByDom(c).fold(ee,v=>{ro.highlight(a,v)});const h=t(a);zC(a,d,h)}}};var b;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(b||(b={}));const S=(t,s,a,c,d)=>{const h=()=>t.concat([xe("focusManager",l()),Ui("focusInside","onFocus",Am(D=>yo(["onFocus","onEnterOrSpace","onApi"],D)?xn.value(D):xn.error("Invalid value for focusInside"))),To("handler",T),To("state",s),To("sendFocusIn",d)]),v=(D,N,L,V,j)=>{const Y=L(D,N,V,j);return MA(Y,N.event).bind(ie=>ie(D,N,V,j))},T={schema:h,processKey:v,toEvents:(D,N)=>{const L=D.focusInside!==b.OnFocusMode?R.none():d(D).map(Y=>Ve(Jl(),(ie,Ee)=>{Y(ie,D,N),Ee.stop()})),V=(Y,ie)=>{const Ee=Hn(pc.concat(nd))(ie.event);D.focusInside===b.OnEnterOrSpaceMode&&Ee&&Kg(Y,ie)&&d(D).each(he=>{he(Y,D,N),ie.stop()})},j=[Ve(pl(),(Y,ie)=>{v(Y,ie,a,D,N).fold(()=>{V(Y,ie)},Ee=>{ie.stop()})}),Ve(Rm(),(Y,ie)=>{v(Y,ie,c,D,N).each(Ee=>{ie.stop()})})];return Ho(L.toArray().concat(j))}};return T},k=t=>{const s=[go("onEscape"),go("onEnter"),xe("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),xe("firstTabstop",0),xe("useTabstopAt",Rt),go("visibilitySelector")].concat([t]),a=(he,fe)=>{const _e=he.visibilitySelector.bind(Xe=>nu(fe,Xe)).getOr(fe);return ms(_e)>0},c=(he,fe)=>{const _e=Er(he.element,fe.selector),Xe=ko(_e,Le=>a(fe,Le));return R.from(Xe[fe.firstTabstop])},d=(he,fe)=>fe.focusManager.get(he).bind(_e=>nu(_e,fe.selector)),h=(he,fe)=>a(he,fe)&&he.useTabstopAt(fe),v=(he,fe,_e)=>{c(he,fe).each(Xe=>{fe.focusManager.set(he,Xe)})},E=(he,fe,_e,Xe,Le)=>Le(fe,_e,$e=>h(Xe,$e)).fold(()=>Xe.cyclic?R.some(!0):R.none(),$e=>(Xe.focusManager.set(he,$e),R.some(!0))),T=(he,fe,_e,Xe)=>{const Le=Er(he.element,_e.selector);return d(he,_e).bind($e=>Yo(Le,Ht(wo,$e)).bind(mt=>E(he,Le,mt,_e,Xe)))},D=(he,fe,_e)=>{const Xe=_e.cyclic?LC:AA;return T(he,fe,_e,Xe)},N=(he,fe,_e)=>{const Xe=_e.cyclic?HC:DA;return T(he,fe,_e,Xe)},L=he=>Bc(he).bind(Ef).exists(fe=>wo(fe,he)),V=(he,fe,_e)=>d(he,_e).filter(Xe=>!_e.useTabstopAt(Xe)).bind(Xe=>(L(Xe)?D:N)(he,fe,_e)),j=(he,fe,_e)=>_e.onEnter.bind(Xe=>Xe(he,fe)),Y=(he,fe,_e)=>_e.onEscape.bind(Xe=>Xe(he,fe)),ie=ae([Qn(bc([nm,Hn(em)]),D),Qn(Hn(em),N),Qn(bc([Yh,Hn(nd)]),j)]),Ee=ae([Qn(Hn(k0),Y),Qn(Hn(em),V)]);return S(s,vl.init,ie,Ee,()=>R.some(v))};var M=k(Ls("cyclic",Pn)),H=k(Ls("cyclic",Rt));const G=(t,s,a)=>(xv(t,a,Gi()),R.some(!0)),Q=(t,s,a)=>lg(a)&&Hn(pc)(s.event)?R.none():G(t,s,a),ce=(t,s)=>R.some(!0),Ce=[xe("execute",Q),xe("useSpace",!1),xe("useEnter",!0),xe("useControlEnter",!1),xe("useDown",!1)],et=(t,s,a)=>a.execute(t,s,t.element),pt=(t,s,a,c)=>{const d=a.useSpace&&!lg(t.element)?pc:[],h=a.useEnter?nd:[],v=a.useDown?lb:[],E=d.concat(h).concat(v);return[Qn(Hn(E),et)].concat(a.useControlEnter?[Qn(bc([RA,Hn(nd)]),et)]:[])},ht=(t,s,a,c)=>a.useSpace&&!lg(t.element)?[Qn(Hn(pc),ce)]:[];var Ue=S(Ce,vl.init,pt,ht,()=>R.none());const bt=()=>{const t=Dn();return qi({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,h)=>{t.set({numRows:d,numColumns:h})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var Pt=Object.freeze({__proto__:null,flatgrid:bt,init:t=>t.state(t)});const dn=t=>(s,a,c,d)=>{const h=t(s.element);return Is(h,s,a,c,d)},_n=(t,s)=>{const a=Jv(t,s);return dn(a)},os=(t,s)=>{const a=Jv(s,t);return dn(a)},Tr=t=>(s,a,c,d)=>Is(t,s,a,c,d),Is=(t,s,a,c,d)=>c.focusManager.get(s).bind(v=>t(s.element,v,c,d)).map(v=>(c.focusManager.set(s,v),!0)),Ei=Tr,ug=Tr,dg=Tr,VC=t=>t.offsetWidth<=0&&t.offsetHeight<=0,A0=t=>!VC(t.dom),Ao=(t,s)=>Yo(t,s).map(a=>({index:a,candidates:t})),Ua=(t,s,a)=>{const c=v=>wo(v,s),d=Er(t,a),h=ko(d,A0);return Ao(h,c)},ma=(t,s)=>Yo(t,a=>wo(s,a)),vc=(t,s,a,c)=>{const d=Math.floor(s/a),h=s%a;return c(d,h).bind(v=>{const E=v.row*a+v.column;return E>=0&&E<t.length?R.some(t[E]):R.none()})},tc=(t,s,a,c,d)=>vc(t,s,c,(h,v)=>{const T=h===a-1?t.length-h*c:c,D=wh(v,d,0,T-1);return R.some({row:h,column:D})}),nf=(t,s,a,c,d)=>vc(t,s,c,(h,v)=>{const E=wh(h,d,0,a-1),D=E===a-1?t.length-E*c:c,N=mc(v,0,D-1);return R.some({row:E,column:N})}),ii=(t,s,a,c)=>tc(t,s,a,c,1),UC=(t,s,a,c)=>tc(t,s,a,c,-1),ub=(t,s,a,c)=>nf(t,s,a,c,-1),od=(t,s,a,c)=>nf(t,s,a,c,1),Oa=[We("selector"),xe("execute",Q),Qi("onEscape"),xe("captureTab",!1),Ow()],db=(t,s,a)=>{Vs(t.element,s.selector).each(c=>{s.focusManager.set(t,c)})},gE=(t,s)=>s.focusManager.get(t).bind(a=>nu(a,s.selector)),hE=(t,s,a,c)=>gE(t,a).bind(d=>a.execute(t,s,d)),Xh=t=>(s,a,c,d)=>Ua(s,a,c.selector).bind(h=>t(h.candidates,h.index,d.getNumRows().getOr(c.initSize.numRows),d.getNumColumns().getOr(c.initSize.numColumns))),pE=(t,s,a)=>a.captureTab?R.some(!0):R.none(),D0=(t,s,a)=>a.onEscape(t,s),bE=Xh(UC),mg=Xh(ii),oN=Xh(ub),T8=Xh(od),_8=ae([Qn(Hn(O0),_n(bE,mg)),Qn(Hn(Kh),os(bE,mg)),Qn(Hn(tm),Ei(oN)),Qn(Hn(lb),ug(T8)),Qn(bc([nm,Hn(em)]),pE),Qn(bc([Yh,Hn(em)]),pE),Qn(Hn(pc.concat(nd)),hE)]),k8=ae([Qn(Hn(k0),D0),Qn(Hn(pc),ce)]);var O8=S(Oa,bt,_8,k8,()=>R.some(db));const sN=(t,s,a,c,d)=>{const h=E=>Ja(E)==="button"&&As(E,"disabled")==="disabled",v=(E,T,D)=>d(E,T,c,0,D.length-1,D[T],N=>h(D[N])?v(E,N,D):R.from(D[N]));return Ua(t,a,s).bind(E=>{const T=E.index,D=E.candidates;return v(T,T,D)})},rN=(t,s,a,c)=>sN(t,s,a,c,(d,h,v,E,T,D,N)=>{const L=mc(h+v,E,T);return L===d?R.from(D):N(L)}),R0=(t,s,a,c)=>sN(t,s,a,c,(d,h,v,E,T,D,N)=>{const L=wh(h,v,E,T);return L===d?R.none():N(L)}),NA=[We("selector"),xe("getInitial",R.none),xe("execute",Q),Qi("onEscape"),xe("executeOnMove",!1),xe("allowVertical",!0),xe("allowHorizontal",!0),xe("cycles",!0)],A8=(t,s)=>s.focusManager.get(t).bind(a=>nu(a,s.selector)),aN=(t,s,a)=>A8(t,a).bind(c=>a.execute(t,s,c)),iN=(t,s,a)=>{s.getInitial(t).orThunk(()=>Vs(t.element,s.selector)).each(c=>{s.focusManager.set(t,c)})},cN=(t,s,a)=>(a.cycles?R0:rN)(t,a.selector,s,-1),lN=(t,s,a)=>(a.cycles?R0:rN)(t,a.selector,s,1),Tl=t=>(s,a,c,d)=>t(s,a,c,d).bind(()=>c.executeOnMove?aN(s,a,c):R.some(!0)),D8=(t,s,a)=>a.onEscape(t,s),R8=(t,s,a,c)=>{const d=[...a.allowHorizontal?O0:[]].concat(a.allowVertical?tm:[]),h=[...a.allowHorizontal?Kh:[]].concat(a.allowVertical?lb:[]);return[Qn(Hn(d),Tl(_n(cN,lN))),Qn(Hn(h),Tl(os(cN,lN))),Qn(Hn(nd),aN),Qn(Hn(pc),aN)]},M8=ae([Qn(Hn(pc),ce),Qn(Hn(k0),D8)]);var N8=S(NA,vl.init,R8,M8,()=>R.some(iN));const vE=(t,s,a)=>R.from(t[s]).bind(c=>R.from(c[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),mb=(t,s,a,c)=>{const h=t[s].length,v=wh(a,c,0,h-1);return vE(t,s,v)},yE=(t,s,a,c)=>{const d=wh(a,c,0,t.length-1),h=t[d].length,v=mc(s,0,h-1);return vE(t,d,v)},uN=(t,s,a,c)=>{const h=t[s].length,v=mc(a+c,0,h-1);return vE(t,s,v)},wE=(t,s,a,c)=>{const d=mc(a+c,0,t.length-1),h=t[d].length,v=mc(s,0,h-1);return vE(t,d,v)},CE=(t,s,a)=>mb(t,s,a,1),PA=(t,s,a)=>mb(t,s,a,-1),P8=(t,s,a)=>yE(t,a,s,-1),B8=(t,s,a)=>yE(t,a,s,1),$8=(t,s,a)=>uN(t,s,a,-1),I8=(t,s,a)=>uN(t,s,a,1),F8=(t,s,a)=>wE(t,a,s,-1),L8=(t,s,a)=>wE(t,a,s,1),dN=[Xl("selectors",[We("row"),We("cell")]),xe("cycles",!0),xe("previousSelector",R.none),xe("execute",Q)],BA=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return Vs(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},H8=(t,s,a)=>wl(t.element).bind(c=>a.execute(t,s,c)),z8=(t,s)=>Ke(t,a=>Er(a,s.selectors.cell)),SE=(t,s)=>(a,c,d)=>{const h=d.cycles?t:s;return nu(c,d.selectors.row).bind(v=>{const E=Er(v,d.selectors.cell);return ma(E,c).bind(T=>{const D=Er(a,d.selectors.row);return ma(D,v).bind(N=>{const L=z8(D,d);return h(L,N,T).map(V=>V.cell)})})})},mN=SE(PA,$8),Jh=SE(CE,I8),fN=SE(P8,F8),V8=SE(B8,L8),$A=ae([Qn(Hn(O0),_n(mN,Jh)),Qn(Hn(Kh),os(mN,Jh)),Qn(Hn(tm),Ei(fN)),Qn(Hn(lb),ug(V8)),Qn(Hn(pc.concat(nd)),H8)]),U8=ae([Qn(Hn(pc),ce)]);var gN=S(dN,vl.init,$A,U8,()=>R.some(BA));const hN=[We("selector"),xe("execute",Q),xe("moveOnTab",!1)],IA=(t,s,a)=>a.focusManager.get(t).bind(c=>a.execute(t,s,c)),pN=(t,s,a)=>{Vs(t.element,s.selector).each(c=>{s.focusManager.set(t,c)})},FA=(t,s,a)=>R0(t,a.selector,s,-1),bN=(t,s,a)=>R0(t,a.selector,s,1),W8=(t,s,a,c)=>a.moveOnTab?dg(FA)(t,s,a,c):R.none(),Z8=(t,s,a,c)=>a.moveOnTab?dg(bN)(t,s,a,c):R.none(),LA=ae([Qn(Hn(tm),dg(FA)),Qn(Hn(lb),dg(bN)),Qn(bc([nm,Hn(em)]),W8),Qn(bc([Yh,Hn(em)]),Z8),Qn(Hn(nd),IA),Qn(Hn(pc),IA)]),j8=ae([Qn(Hn(pc),ce)]);var G8=S(hN,vl.init,LA,j8,()=>R.some(pN));const q8=[Qi("onSpace"),Qi("onEnter"),Qi("onShiftEnter"),Qi("onLeft"),Qi("onRight"),Qi("onTab"),Qi("onShiftTab"),Qi("onUp"),Qi("onDown"),Qi("onEscape"),xe("stopSpaceKeyup",!1),go("focusIn")],K8=(t,s,a)=>[Qn(Hn(pc),a.onSpace),Qn(bc([Yh,Hn(nd)]),a.onEnter),Qn(bc([nm,Hn(nd)]),a.onShiftEnter),Qn(bc([nm,Hn(em)]),a.onShiftTab),Qn(bc([Yh,Hn(em)]),a.onTab),Qn(Hn(tm),a.onUp),Qn(Hn(lb),a.onDown),Qn(Hn(O0),a.onLeft),Qn(Hn(Kh),a.onRight),Qn(Hn(pc),a.onSpace)],vN=(t,s,a)=>[...a.stopSpaceKeyup?[Qn(Hn(pc),ce)]:[],Qn(Hn(k0),a.onEscape)];var Y8=S(q8,vl.init,K8,vN,t=>t.focusIn);const X8=M.schema(),J8=H.schema(),yN=N8.schema(),Q8=O8.schema(),e7=gN.schema(),wN=Ue.schema(),t7=G8.schema(),n7=Y8.schema();var xE=Object.freeze({__proto__:null,acyclic:X8,cyclic:J8,flow:yN,flatgrid:Q8,matrix:e7,execution:wN,menu:t7,special:n7});const o7=t=>Qr(t,"setGridSize"),qt=Kv({branchKey:"mode",branches:xE,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},c=>{c(t,s,a)})},setGridSize:(t,s,a,c,d)=>{o7(a)?a.setGridSize(c,d):console.error("Layout does not support setGridSize")}},state:Pt}),Ti=(t,s)=>{_t(()=>{QO(t,s,()=>Ke(s,t.getSystem().build))},t.element)},CN=(t,s)=>{_t(()=>{eA(t,s,()=>WM(t.element,s,t.getSystem().buildOrPatch))},t.element)},SN=(t,s,a,c)=>{Ih(s);const d=Y2(t.element,a,c,t.getSystem().buildOrPatch);bC(t,d),t.syncComponents()},EE=(t,s,a)=>{const c=t.getSystem().build(a);Fh(t,c,s)},s7=(t,s,a,c)=>{ed(s),EE(t,(d,h)=>cr(d,h,a),c)},xN=(t,s,a,c)=>(s.reuseDom?CN:Ti)(t,c),EN=(t,s,a,c)=>{EE(t,Ca,c)},r7=(t,s,a,c)=>{EE(t,Qp,c)},a7=(t,s,a,c)=>{const d=TE(t);fn(d,v=>wo(c.element,v.element)).each(ed)},TE=(t,s)=>t.components(),TN=(t,s,a,c,d)=>{const h=TE(t);return R.from(h[c]).map(v=>(d.fold(()=>ed(v),E=>{(s.reuseDom?SN:s7)(t,v,c,E)}),v))};var c7=Object.freeze({__proto__:null,append:EN,prepend:r7,remove:a7,replaceAt:TN,replaceBy:(t,s,a,c,d)=>{const h=TE(t);return Yo(h,c).bind(v=>TN(t,s,a,v,d))},set:xN,contents:TE});const vn=xr({fields:[yr("reuseDom",!0)],name:"replacing",apis:c7}),_N=(t,s)=>{const a=Ho(s);return xr({fields:[We("enabled")],name:t,active:{events:ae(a)}})},En=(t,s)=>{const a=_N(t,s);return{key:t,value:{config:{},me:a,configAsRaw:ae({}),initialConfig:{},state:vl}}},HA=(t,s)=>{s.ignore||(Ci(t.element),s.onFocus(t))};var l7=Object.freeze({__proto__:null,focus:HA,blur:(t,s)=>{s.ignore||xh(t.element)},isFocused:t=>D1(t.element)}),kN=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return Ki(a)},events:t=>Ho([Ve(Jl(),(s,a)=>{HA(s,t),a.stop()})].concat(t.stopMousedown?[Ve(dr(),(s,a)=>{a.event.prevent()})]:[]))}),Qh=[Un("onFocus"),xe("stopMousedown",!1),xe("ignore",!1)];const cn=xr({fields:Qh,name:"focusing",active:kN,apis:l7}),ON=t=>({init:()=>{const a=Jt(t);return{get:()=>a.get(),set:E=>a.set(E),clear:()=>a.set(t),readState:()=>a.get()}}}),zA=(t,s,a)=>{const c=s.aria;c.update(t,c,a.get())},d7=(t,s,a)=>{s.toggleClass.each(c=>{a.get()?zs(t.element,c):ps(t.element,c)})},WC=(t,s,a,c)=>{const d=a.get();a.set(c),d7(t,s,a),zA(t,s,a),d!==c&&s.onToggled(t,c)},AN=(t,s,a)=>{WC(t,s,a,!a.get())},m7=(t,s,a)=>{WC(t,s,a,!0)},DN=(t,s,a)=>{WC(t,s,a,!1)},VA=(t,s,a)=>a.get(),_E=(t,s,a)=>{WC(t,s,a,s.selected)};var f7=Object.freeze({__proto__:null,onLoad:_E,toggle:AN,isOn:VA,on:m7,off:DN,set:WC}),RN=Object.freeze({__proto__:null,exhibit:()=>Ki({}),events:(t,s)=>{const a=Sh(t,s,AN),c=qv(t,s,_E);return Ho(Wt([t.toggleOnExecute?[a]:[],[c]]))}});const h7=(t,s,a)=>{xt(t.element,"aria-pressed",a),s.syncWithExpanded&&M0(t,s,a)},p7=(t,s,a)=>{xt(t.element,"aria-selected",a)},ZC=(t,s,a)=>{xt(t.element,"aria-checked",a)},M0=(t,s,a)=>{xt(t.element,"aria-expanded",a)};var MN=[xe("selected",!1),go("toggleClass"),xe("toggleOnExecute",!0),Un("onToggled"),Ui("aria",{mode:"none"},Vn("mode",{pressed:[xe("syncWithExpanded",!1),To("update",h7)],checked:[To("update",ZC)],expanded:[To("update",M0)],selected:[To("update",p7)],none:[To("update",ee)]}))];const kn=xr({fields:MN,name:"toggling",active:RN,apis:f7,state:ON(!1)}),fg=()=>{const t=(s,a)=>{a.stop(),$d(s)};return[Ve(Bd(),t),Ve(Ql(),t),Id(zu()),Id(dr())]},om=t=>{const s=a=>bl((c,d)=>{a(c),d.stop()});return Ho(Wt([t.map(s).toArray(),fg()]))},NN="alloy.item-hover",PN="alloy.item-focus",UA="alloy.item-toggled",of=t=>{(wl(t.element).isNone()||cn.isFocused(t))&&(cn.isFocused(t)||cn.focus(t),Gt(t,NN,{item:t}))},kE=t=>{Gt(t,PN,{item:t})},b7=(t,s)=>{Gt(t,UA,{item:t,state:s})},WA=ae(NN),BN=ae(PN),$N=ae(UA),ZA=t=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),IN=t=>({aria:{mode:"checked"},...Rc(t,(s,a)=>a!=="exclusive"),onToggled:(s,a)=>{Ye(t.onToggled)&&t.onToggled(s,a),b7(s,a)}}),v7=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:ZA(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:jc.augment(t.itemBehaviours,[t.toggling.fold(kn.revoke,s=>kn.config(IN(s))),cn.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{kE(s)}}),qt.config({mode:"execution"}),wt.config({store:{mode:"memory",initialValue:t.data}}),En("item-type-events",[...fg(),Ve(Pd(),of),Ve(Rs(),cn.focus)])]),components:t.components,eventOrder:t.eventOrder}),y7=[We("data"),We("components"),We("dom"),xe("hasSubmenu",!1),go("toggling"),jc.field("itemBehaviours",[kn,cn,qt,wt]),xe("ignoreFocus",!1),xe("domModification",{}),To("builder",v7),xe("eventOrder",{})],w7=t=>({dom:t.dom,components:t.components,events:Ho([qk(Rs())])}),OE=[We("dom"),We("components"),To("builder",w7)],jC=ae("item-widget"),GC=ae([_a({name:"widget",overrides:t=>({behaviours:lt([wt.config({store:{mode:"manual",getValue:s=>t.data,setValue:ee}})])})})]),C7=t=>{const s=OC(jC(),t,GC()),a=x0(jC(),t,s.internals()),c=h=>Po(h,t,"widget").map(v=>(qt.focusIn(v),v)),d=(h,v)=>lg(v.event.target)?R.none():(t.autofocus&&v.setSource(h.element),R.none());return{dom:t.dom,components:a,domModification:t.domModification,events:Ho([bl((h,v)=>{c(h).each(E=>{v.stop()})}),Ve(Pd(),of),Ve(Rs(),(h,v)=>{t.autofocus?c(h):cn.focus(h)})]),behaviours:jc.augment(t.widgetBehaviours,[wt.config({store:{mode:"memory",initialValue:t.data}}),cn.config({ignore:t.ignoreFocus,onFocus:h=>{kE(h)}}),qt.config({mode:"special",focusIn:t.autofocus?h=>{c(h)}:Hw(),onLeft:d,onRight:d,onEscape:(h,v)=>!cn.isFocused(h)&&!t.autofocus?(cn.focus(h),R.some(!0)):(t.autofocus&&v.setSource(h.element),R.none())})])}},S7=[We("uid"),We("data"),We("components"),We("dom"),xe("autofocus",!1),xe("ignoreFocus",!1),jc.field("widgetBehaviours",[wt,cn,qt]),xe("domModification",{}),MC(GC()),To("builder",C7)],FN=Vn("type",{widget:S7,item:y7,separator:OE}),LN=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),HN=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),zN=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),x7=ae([nb({factory:{sketch:t=>{const s=oi("menu.spec item",FN,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>no(s,"uid")?s:{...s,uid:oh("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),jA=ae([We("value"),We("items"),We("dom"),We("components"),xe("eventOrder",{}),fr("menuBehaviours",[ro,wt,Bn,qt]),Ui("movement",{mode:"menu",moveOnTab:!0},Vn("mode",{grid:[Ow(),To("config",LN)],matrix:[To("config",HN),We("rowSelector"),xe("previousSelector",R.none)],menu:[xe("moveOnTab",!0),To("config",zN)]})),uO(),xe("fakeFocus",!1),xe("focusManager",l()),Un("onHighlight"),Un("onDehighlight")]),VN=ae("alloy.menu-focus"),E7=(t,s)=>{const a=Er(t.element,'[role="menuitemradio"][aria-checked="true"]');St(a,c=>{wo(c,s.element)||t.getSystem().getByDom(c).each(d=>{kn.off(d)})})},T7=(t,s,a,c)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Ys(t.menuBehaviours,[ro.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),wt.config({store:{mode:"memory",initialValue:t.value}}),Bn.config({find:R.some}),qt.config(t.movement.config(t,t.movement))]),events:Ho([Ve(BN(),(d,h)=>{const v=h.event;d.getSystem().getByDom(v.target).each(E=>{ro.highlight(d,E),h.stop(),Gt(d,VN(),{menu:d,item:E})})}),Ve(WA(),(d,h)=>{const v=h.event.item;ro.highlight(d,v)}),Ve($N(),(d,h)=>{const{item:v,state:E}=h.event;E&&As(v.element,"role")==="menuitemradio"&&E7(d,v)})]),components:s,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}),gb=ka({name:"Menu",configFields:jA(),partFields:x7(),factory:T7}),UN=t=>ol(t,(s,a)=>({k:s,v:a})),WN=(t,s,a,c)=>vt(a,c).bind(d=>vt(t,d).bind(h=>{const v=WN(t,s,a,h);return R.some([h].concat(v))})).getOr([]),_7=(t,s)=>{const a={};Xo(t,(v,E)=>{St(v,T=>{a[T]=E})});const c=s,d=UN(s),h=Jo(d,(v,E)=>[E].concat(WN(a,c,d,E)));return Jo(a,v=>vt(h,v).getOr([v]))},ZN=()=>{const t=Jt({}),s=Jt({}),a=Jt({}),c=Dn(),d=Jt({}),h=()=>{t.set({}),s.set({}),a.set({}),c.clear()},v=()=>c.get().isNone(),E=(Le,$e)=>{s.set({...s.get(),[Le]:{type:"prepared",menu:$e}})},T=(Le,$e,ct,mt)=>{c.set(Le),t.set(ct),s.set($e),d.set(mt);const Tn=_7(mt,ct);a.set(Tn)},D=Le=>Ar(t.get(),($e,ct)=>$e===Le),N=(Le,$e,ct)=>ie(Le).bind(mt=>D(Le).bind(Tn=>$e(Tn).map($t=>({triggeredMenu:mt,triggeringItem:$t,triggeringPath:ct})))),L=(Le,$e)=>{const ct=ko(he(Le).toArray(),mt=>ie(mt).isSome());return vt(a.get(),Le).bind(mt=>{const Tn=sr(ct.concat(mt)),$t=Ie(Tn,(Qt,ln)=>N(Qt,$e,Tn.slice(0,ln+1)).fold(()=>Ma(c.get(),Qt)?[]:[R.none()],ho=>[R.some(ho)]));return Uo($t)})},V=Le=>vt(t.get(),Le).map($e=>{const ct=vt(a.get(),Le).getOr([]);return[$e].concat(ct)}),j=Le=>vt(a.get(),Le).bind($e=>$e.length>1?R.some($e.slice(1)):R.none()),Y=Le=>vt(a.get(),Le),ie=Le=>Ee(Le).bind(N0),Ee=Le=>vt(s.get(),Le),he=Le=>vt(t.get(),Le);return{setMenuBuilt:E,setContents:T,expand:V,refresh:Y,collapse:j,lookupMenu:Ee,lookupItem:he,otherMenus:Le=>{const $e=d.get();return Zt(ns($e),Le)},getPrimary:()=>c.get().bind(ie),getMenus:()=>s.get(),clear:h,isClear:v,getTriggeringPath:L}},N0=t=>t.type==="prepared"?R.some(t.menu):R.none(),jN={init:ZN,extractPreparedMenu:N0},P0=Ot("tiered-menu-item-highlight"),AE=Ot("tiered-menu-item-dehighlight");var _i;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(_i||(_i={}));const GN=(t,s)=>{const a=Dn(),c=(ft,Bt,mn)=>Jo(mn,($n,nn)=>{const wn=()=>gb.sketch({...$n,value:nn,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:($o,ao)=>{Gt($o,P0,{menuComp:$o,itemComp:ao})},onDehighlight:($o,ao)=>{Gt($o,AE,{menuComp:$o,itemComp:ao})},focusManager:t.fakeFocus?m():l()});return nn===Bt?{type:"prepared",menu:ft.getSystem().build(wn())}:{type:"notbuilt",nbMenu:wn}}),d=jN.init(),h=ft=>{const Bt=c(ft,t.data.primary,t.data.menus),mn=T();return d.setContents(t.data.primary,Bt,t.data.expansions,mn),d.getPrimary()},v=ft=>wt.getValue(ft).value,E=(ft,Bt,mn)=>Js(Bt,$n=>{if(!$n.getSystem().isConnected())return R.none();const nn=ro.getCandidates($n);return fn(nn,wn=>v(wn)===mn)}),T=ft=>Jo(t.data.menus,(Bt,mn)=>Ie(Bt.items,$n=>$n.type==="separator"?[]:[$n.data.value])),D=ro.highlight,N=(ft,Bt)=>{D(ft,Bt),ro.getHighlighted(Bt).orThunk(()=>ro.getFirst(Bt)).each(mn=>{t.fakeFocus?ro.highlight(Bt,mn):xv(ft,mn.element,Rs())})},L=(ft,Bt)=>Bi(Ke(Bt,mn=>ft.lookupMenu(mn).bind($n=>$n.type==="prepared"?R.some($n.menu):R.none()))),V=(ft,Bt,mn)=>{const $n=L(Bt,Bt.otherMenus(mn));St($n,nn=>{uc(nn.element,[t.markers.backgroundMenu]),t.stayInDom||vn.remove(ft,nn)})},j=ft=>a.get().getOrThunk(()=>{const Bt={},mn=Er(ft.element,`.${t.markers.item}`),$n=ko(mn,nn=>As(nn,"aria-haspopup")==="true");return St($n,nn=>{ft.getSystem().getByDom(nn).each(wn=>{const $o=v(wn);Bt[$o]=wn})}),a.set(Bt),Bt}),Y=(ft,Bt)=>{const mn=j(ft);Xo(mn,($n,nn)=>{const wn=yo(Bt,nn);xt($n.element,"aria-expanded",wn)})},ie=(ft,Bt,mn)=>R.from(mn[0]).bind($n=>Bt.lookupMenu($n).bind(nn=>{if(nn.type==="notbuilt")return R.none();{const wn=nn.menu,$o=L(Bt,mn.slice(1));return St($o,ao=>{zs(ao.element,t.markers.backgroundMenu)}),Xn(wn.element)||vn.append(ft,dc(wn)),uc(wn.element,[t.markers.backgroundMenu]),N(ft,wn),V(ft,Bt,mn),R.some(wn)}}));let Ee;(function(ft){ft[ft.HighlightSubmenu=0]="HighlightSubmenu",ft[ft.HighlightParent=1]="HighlightParent"})(Ee||(Ee={}));const he=(ft,Bt,mn)=>{if(mn.type==="notbuilt"){const $n=ft.getSystem().build(mn.nbMenu());return d.setMenuBuilt(Bt,$n),$n}else return mn.menu},fe=(ft,Bt,mn=Ee.HighlightSubmenu)=>{if(Bt.hasConfigured(on)&&on.isDisabled(Bt))return R.some(Bt);{const $n=v(Bt);return d.expand($n).bind(nn=>(Y(ft,nn),R.from(nn[0]).bind(wn=>d.lookupMenu(wn).bind($o=>{const ao=he(ft,wn,$o);return Xn(ao.element)||vn.append(ft,dc(ao)),t.onOpenSubmenu(ft,Bt,ao,sr(nn)),mn===Ee.HighlightSubmenu?(ro.highlightFirst(ao),ie(ft,d,nn)):(ro.dehighlightAll(ao),R.some(Bt))}))))}},_e=(ft,Bt)=>{const mn=v(Bt);return d.collapse(mn).bind($n=>(Y(ft,$n),ie(ft,d,$n).map(nn=>(t.onCollapseMenu(ft,Bt,nn),nn))))},Xe=(ft,Bt)=>{const mn=v(Bt);return d.refresh(mn).bind($n=>(Y(ft,$n),ie(ft,d,$n)))},Le=(ft,Bt)=>lg(Bt.element)?R.none():fe(ft,Bt,Ee.HighlightSubmenu),$e=(ft,Bt)=>lg(Bt.element)?R.none():_e(ft,Bt),ct=(ft,Bt)=>_e(ft,Bt).orThunk(()=>t.onEscape(ft,Bt).map(()=>ft)),mt=ft=>(Bt,mn)=>nu(mn.getSource(),`.${t.markers.item}`).bind($n=>Bt.getSystem().getByDom($n).toOptional().bind(nn=>ft(Bt,nn).map(Rt))),Tn=Ho([Ve(VN(),(ft,Bt)=>{const mn=Bt.event.item;d.lookupItem(v(mn)).each(()=>{const $n=Bt.event.menu;ro.highlight(ft,$n);const nn=v(Bt.event.item);d.refresh(nn).each(wn=>V(ft,d,wn))})}),bl((ft,Bt)=>{const mn=Bt.event.target;ft.getSystem().getByDom(mn).each($n=>{v($n).indexOf("collapse-item")===0&&_e(ft,$n),fe(ft,$n,Ee.HighlightSubmenu).fold(()=>{t.onExecute(ft,$n)},ee)})}),No((ft,Bt)=>{h(ft).each(mn=>{vn.append(ft,dc(mn)),t.onOpenMenu(ft,mn),t.highlightOnOpen===_i.HighlightMenuAndItem?N(ft,mn):t.highlightOnOpen===_i.HighlightJustMenu&&D(ft,mn)})}),Ve(P0,(ft,Bt)=>{t.onHighlightItem(ft,Bt.event.menuComp,Bt.event.itemComp)}),Ve(AE,(ft,Bt)=>{t.onDehighlightItem(ft,Bt.event.menuComp,Bt.event.itemComp)}),...t.navigateOnHover?[Ve(WA(),(ft,Bt)=>{const mn=Bt.event.item;Xe(ft,mn),fe(ft,mn,Ee.HighlightParent),t.onHover(ft,mn)})]:[]]),$t=ft=>ro.getHighlighted(ft).bind(ro.getHighlighted),Qt=ft=>{$t(ft).each(Bt=>{_e(ft,Bt)})},ln=ft=>{d.getPrimary().each(Bt=>{N(ft,Bt)})},ho=ft=>R.from(ft.components()[0]).filter(Bt=>As(Bt.element,"role")==="menu"),qn={collapseMenu:Qt,highlightPrimary:ln,repositionMenus:ft=>{d.getPrimary().bind(mn=>$t(ft).bind($n=>{const nn=v($n),wn=bm(d.getMenus()),$o=Bi(Ke(wn,jN.extractPreparedMenu));return d.getTriggeringPath(nn,ao=>E(ft,$o,ao))}).map($n=>({primary:mn,triggeringPath:$n}))).fold(()=>{ho(ft).each(mn=>{t.onRepositionMenu(ft,mn,[])})},({primary:mn,triggeringPath:$n})=>{t.onRepositionMenu(ft,mn,$n)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Ys(t.tmenuBehaviours,[qt.config({mode:"special",onRight:mt(Le),onLeft:mt($e),onEscape:mt(ct),focusIn:(ft,Bt)=>{d.getPrimary().each(mn=>{xv(ft,mn.element,Rs())})}}),ro.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Bn.config({find:ft=>ro.getHighlighted(ft)}),vn.config({})]),eventOrder:t.eventOrder,apis:qn,events:Tn}},k7=ae("collapse-item"),O7=(t,s,a)=>({primary:t,menus:s,expansions:a}),qN=(t,s)=>({primary:t,menus:vi(t,s),expansions:{}}),A7=t=>({value:Ot(k7()),meta:{text:t}}),ep=ec({name:"TieredMenu",configFields:[kw("onExecute"),kw("onEscape"),ou("onOpenMenu"),ou("onOpenSubmenu"),Un("onRepositionMenu"),Un("onCollapseMenu"),xe("highlightOnOpen",_i.HighlightMenuAndItem),Xl("data",[We("primary"),We("menus"),We("expansions")]),xe("fakeFocus",!1),Un("onHighlightItem"),Un("onDehighlightItem"),Un("onHover"),x1(),We("dom"),xe("navigateOnHover",!0),xe("stayInDom",!1),fr("tmenuBehaviours",[qt,ro,Bn,vn]),xe("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:GN,extraApis:{tieredData:O7,singleData:qN,collapseItem:A7}}),D7=(t,s,a,c,d)=>{const h=()=>t.lazySink(s),v=c.type==="horizontal"?{layouts:{onLtr:()=>Gv(),onRtl:()=>Fw()}}:{},E=D=>D.length===2,T=D=>E(D)?v:{};return ep.sketch({dom:{tag:"div"},data:c.data,markers:c.menu.markers,highlightOnOpen:c.menu.highlightOnOpen,fakeFocus:c.menu.fakeFocus,onEscape:()=>(Ln.close(s),t.onEscape.map(D=>D(s)),R.some(!0)),onExecute:()=>R.some(!0),onOpenMenu:(D,N)=>{Ta.positionWithinBounds(h().getOrDie(),N,a,d())},onOpenSubmenu:(D,N,L,V)=>{const j=h().getOrDie();Ta.position(j,L,{anchor:{type:"submenu",item:N,...T(V)}})},onRepositionMenu:(D,N,L)=>{const V=h().getOrDie();Ta.positionWithinBounds(V,N,a,d()),St(L,j=>{const Y=T(j.triggeringPath);Ta.position(V,j.triggeredMenu,{anchor:{type:"submenu",item:j.triggeringItem,...Y}})})}})},R7=(t,s)=>{const a=(V,j)=>t.getRelated(V).exists(ie=>Vd(ie,j)),c=(V,j)=>{Ln.setContent(V,j)},d=(V,j,Y)=>{const ie=R.none;h(V,j,Y,ie)},h=(V,j,Y,ie)=>{const Ee=t.lazySink(V).getOrDie();Ln.openWhileCloaked(V,j,()=>Ta.positionWithinBounds(Ee,V,Y,ie())),wt.setValue(V,R.some({mode:"position",config:Y,getBounds:ie}))},v=(V,j,Y)=>{E(V,j,Y,R.none)},E=(V,j,Y,ie)=>{const Ee=D7(t,V,j,Y,ie);Ln.open(V,Ee),wt.setValue(V,R.some({mode:"menu",menu:Ee}))},T=V=>{Ln.isOpen(V)&&(wt.setValue(V,R.none()),Ln.close(V))},D=V=>Ln.getState(V),N=V=>{Ln.isOpen(V)&&wt.getValue(V).each(j=>{switch(j.mode){case"menu":Ln.getState(V).each(ep.repositionMenus);break;case"position":const Y=t.lazySink(V).getOrDie();Ta.positionWithinBounds(Y,V,j.config,j.getBounds());break}})},L={setContent:c,showAt:d,showWithinBounds:h,showMenuAt:v,showMenuWithinBounds:E,hide:T,getContent:D,reposition:N,isOpen:Ln.isOpen};return{uid:t.uid,dom:t.dom,behaviours:Ys(t.inlineBehaviours,[Ln.config({isPartOf:(V,j,Y)=>Vd(j,Y)||a(V,Y),getAttachPoint:V=>t.lazySink(V).getOrDie(),onOpen:V=>{t.onShow(V)},onClose:V=>{t.onHide(V)}}),wt.config({store:{mode:"memory",initialValue:R.none()}}),wi.config({channels:{...G1({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(V=>({fireEventInstead:{event:V.event}})).getOr({})}),...Hh({...t.fireRepositionEventInstead.map(V=>({fireEventInstead:{event:V.event}})).getOr({}),doReposition:N})}})]),eventOrder:t.eventOrder,apis:L}},xs=ec({name:"InlineView",configFields:[We("lazySink"),Un("onShow"),Un("onHide"),If("onEscape"),fr("inlineBehaviours",[Ln,wt,wi]),pi("fireDismissalEventInstead",[xe("event",Bm())]),pi("fireRepositionEventInstead",[xe("event",L2())]),xe("getRelated",R.none),xe("isExtraPart",Pn),xe("eventOrder",R.none)],factory:R7,apis:{showAt:(t,s,a,c)=>{t.showAt(s,a,c)},showWithinBounds:(t,s,a,c,d)=>{t.showWithinBounds(s,a,c,d)},showMenuAt:(t,s,a,c)=>{t.showMenuAt(s,a,c)},showMenuWithinBounds:(t,s,a,c,d)=>{t.showMenuWithinBounds(s,a,c,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}});var hb=tinymce.util.Tools.resolve("tinymce.util.Delay");const Yr=ec({name:"Button",factory:t=>{const s=om(t.action),a=t.dom.tag,c=h=>vt(t.dom,"attributes").bind(v=>vt(v,h)),d=()=>{if(a==="button"){const h=c("type").getOr("button"),v=c("role").map(E=>({role:E})).getOr({});return{type:h,...v}}else return{role:t.role.getOr(c("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:jc.augment(t.buttonBehaviours,[cn.config({}),qt.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[xe("uid",void 0),We("dom"),xe("components",[]),jc.field("buttonBehaviours",[cn,qt]),go("action"),go("role"),xe("eventOrder",{})]}),M7=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return Io(s,(a,c)=>c.name==="class"?a:{...a,[c.name]:c.value},{})},N7=t=>Array.prototype.slice.call(t.dom.classList,0),gg=t=>{const s=we.fromHtml(t),a=di(s),c=M7(s),d=N7(s),h=a.length===0?{}:{innerHtml:gw(s)};return{tag:Ja(s),classes:d,attributes:c,...h}},bo=t=>{const s=gA(t)&&Qr(t,"uid")?t.uid:oh("memento");return{get:h=>h.getSystem().getByUid(s).getOrDie(),getOpt:h=>h.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:GA,setPrototypeOf:qA,isFrozen:P7,getPrototypeOf:B7,getOwnPropertyDescriptor:$7}=Object;let{freeze:qc,seal:sd,create:YN}=Object,{apply:DE,construct:KA}=typeof Reflect<"u"&&Reflect;qc||(qc=function(s){return s}),sd||(sd=function(s){return s}),DE||(DE=function(s,a,c){return s.apply(a,c)}),KA||(KA=function(s,a){return new s(...a)});const RE=uu(Array.prototype.forEach),XN=uu(Array.prototype.pop),qC=uu(Array.prototype.push),ME=uu(String.prototype.toLowerCase),hg=uu(String.prototype.toString),JN=uu(String.prototype.match),KC=uu(String.prototype.replace),pb=uu(String.prototype.indexOf),QN=uu(String.prototype.trim),sm=uu(Object.prototype.hasOwnProperty),fa=uu(RegExp.prototype.test),YC=du(TypeError);function uu(t){return function(s){for(var a=arguments.length,c=new Array(a>1?a-1:0),d=1;d<a;d++)c[d-1]=arguments[d];return DE(t,s,c)}}function du(t){return function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return KA(t,a)}}function zo(t,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ME;qA&&qA(t,null);let c=s.length;for(;c--;){let d=s[c];if(typeof d=="string"){const h=a(d);h!==d&&(P7(s)||(s[c]=h),d=h)}t[d]=!0}return t}function eP(t){for(let s=0;s<t.length;s++)sm(t,s)||(t[s]=null);return t}function tp(t){const s=YN(null);for(const[a,c]of GA(t))sm(t,a)&&(Array.isArray(c)?s[a]=eP(c):c&&typeof c=="object"&&c.constructor===Object?s[a]=tp(c):s[a]=c);return s}function XC(t,s){for(;t!==null;){const c=$7(t,s);if(c){if(c.get)return uu(c.get);if(typeof c.value=="function")return uu(c.value)}t=B7(t)}function a(){return null}return a}const NE=qc(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),YA=qc(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),XA=qc(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),I7=qc(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),B0=qc(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),JA=qc(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),QA=qc(["#text"]),e4=qc(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),PE=qc(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),tP=qc(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),BE=qc(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),nP=sd(/\{\{[\w\W]*|[\w\W]*\}\}/gm),F7=sd(/<%[\w\W]*|[\w\W]*%>/gm),t4=sd(/\${[\w\W]*}/gm),oP=sd(/^data-[\-\w.\u00B7-\uFFFF]/),L7=sd(/^aria-[\-\w]+$/),sP=sd(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),H7=sd(/^(?:\w+script|data):/i),n4=sd(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),rP=sd(/^html$/i),JC=sd(/^[a-z][.\w]*(-[.\w]+)+$/i);var QC=Object.freeze({__proto__:null,MUSTACHE_EXPR:nP,ERB_EXPR:F7,TMPLIT_EXPR:t4,DATA_ATTR:oP,ARIA_ATTR:L7,IS_ALLOWED_URI:sP,IS_SCRIPT_OR_DATA:H7,ATTR_WHITESPACE:n4,DOCTYPE_NAME:rP,CUSTOM_ELEMENT:JC});const $0={element:1,text:3,progressingInstruction:7,comment:8,document:9},aP=function(){return typeof window>"u"?null:window},z7=function(s,a){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let c=null;const d="data-tt-policy-suffix";a&&a.hasAttribute(d)&&(c=a.getAttribute(d));const h="dompurify"+(c?"#"+c:"");try{return s.createPolicy(h,{createHTML(v){return v},createScriptURL(v){return v}})}catch{return console.warn("TrustedTypes policy "+h+" could not be created."),null}};function iP(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:aP();const s=In=>iP(In);if(s.version="3.1.7",s.removed=[],!t||!t.document||t.document.nodeType!==$0.document)return s.isSupported=!1,s;let{document:a}=t;const c=a,d=c.currentScript,{DocumentFragment:h,HTMLTemplateElement:v,Node:E,Element:T,NodeFilter:D,NamedNodeMap:N=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:L,DOMParser:V,trustedTypes:j}=t,Y=T.prototype,ie=XC(Y,"cloneNode"),Ee=XC(Y,"remove"),he=XC(Y,"nextSibling"),fe=XC(Y,"childNodes"),_e=XC(Y,"parentNode");if(typeof v=="function"){const In=a.createElement("template");In.content&&In.content.ownerDocument&&(a=In.content.ownerDocument)}let Xe,Le="";const{implementation:$e,createNodeIterator:ct,createDocumentFragment:mt,getElementsByTagName:Tn}=a,{importNode:$t}=c;let Qt={};s.isSupported=typeof GA=="function"&&typeof _e=="function"&&$e&&$e.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ln,ERB_EXPR:ho,TMPLIT_EXPR:Yt,DATA_ATTR:qn,ARIA_ATTR:ft,IS_SCRIPT_OR_DATA:Bt,ATTR_WHITESPACE:mn,CUSTOM_ELEMENT:$n}=QC;let{IS_ALLOWED_URI:nn}=QC,wn=null;const $o=zo({},[...NE,...YA,...XA,...B0,...QA]);let ao=null;const li=zo({},[...e4,...PE,...tP,...BE]);let is=Object.seal(YN(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),kc=null,pd=null,Mp=!0,Np=!0,Wb=!1,vk=!0,Pp=!1,dM=!0,Zb=!1,mM=!1,Lq=!1,yk=!1,I6=!1,F6=!1,IY=!0,FY=!1;const jJ="user-content-";let Hq=!0,fM=!1,wk={},Ck=null;const LY=zo({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let HY=null;const zY=zo({},["audio","video","img","source","image","track"]);let zq=null;const VY=zo({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),L6="http://www.w3.org/1998/Math/MathML",H6="http://www.w3.org/2000/svg",jb="http://www.w3.org/1999/xhtml";let Sk=jb,Vq=!1,Uq=null;const GJ=zo({},[L6,H6,jb],hg);let gM=null;const qJ=["application/xhtml+xml","text/html"],KJ="text/html";let Oc=null,xk=null;const YJ=a.createElement("form"),UY=function(Pe){return Pe instanceof RegExp||Pe instanceof Function},Wq=function(){let Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(xk&&xk===Pe)){if((!Pe||typeof Pe!="object")&&(Pe={}),Pe=tp(Pe),gM=qJ.indexOf(Pe.PARSER_MEDIA_TYPE)===-1?KJ:Pe.PARSER_MEDIA_TYPE,Oc=gM==="application/xhtml+xml"?hg:ME,wn=sm(Pe,"ALLOWED_TAGS")?zo({},Pe.ALLOWED_TAGS,Oc):$o,ao=sm(Pe,"ALLOWED_ATTR")?zo({},Pe.ALLOWED_ATTR,Oc):li,Uq=sm(Pe,"ALLOWED_NAMESPACES")?zo({},Pe.ALLOWED_NAMESPACES,hg):GJ,zq=sm(Pe,"ADD_URI_SAFE_ATTR")?zo(tp(VY),Pe.ADD_URI_SAFE_ATTR,Oc):VY,HY=sm(Pe,"ADD_DATA_URI_TAGS")?zo(tp(zY),Pe.ADD_DATA_URI_TAGS,Oc):zY,Ck=sm(Pe,"FORBID_CONTENTS")?zo({},Pe.FORBID_CONTENTS,Oc):LY,kc=sm(Pe,"FORBID_TAGS")?zo({},Pe.FORBID_TAGS,Oc):{},pd=sm(Pe,"FORBID_ATTR")?zo({},Pe.FORBID_ATTR,Oc):{},wk=sm(Pe,"USE_PROFILES")?Pe.USE_PROFILES:!1,Mp=Pe.ALLOW_ARIA_ATTR!==!1,Np=Pe.ALLOW_DATA_ATTR!==!1,Wb=Pe.ALLOW_UNKNOWN_PROTOCOLS||!1,vk=Pe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Pp=Pe.SAFE_FOR_TEMPLATES||!1,dM=Pe.SAFE_FOR_XML!==!1,Zb=Pe.WHOLE_DOCUMENT||!1,yk=Pe.RETURN_DOM||!1,I6=Pe.RETURN_DOM_FRAGMENT||!1,F6=Pe.RETURN_TRUSTED_TYPE||!1,Lq=Pe.FORCE_BODY||!1,IY=Pe.SANITIZE_DOM!==!1,FY=Pe.SANITIZE_NAMED_PROPS||!1,Hq=Pe.KEEP_CONTENT!==!1,fM=Pe.IN_PLACE||!1,nn=Pe.ALLOWED_URI_REGEXP||sP,Sk=Pe.NAMESPACE||jb,is=Pe.CUSTOM_ELEMENT_HANDLING||{},Pe.CUSTOM_ELEMENT_HANDLING&&UY(Pe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(is.tagNameCheck=Pe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Pe.CUSTOM_ELEMENT_HANDLING&&UY(Pe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(is.attributeNameCheck=Pe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Pe.CUSTOM_ELEMENT_HANDLING&&typeof Pe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(is.allowCustomizedBuiltInElements=Pe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Pp&&(Np=!1),I6&&(yk=!0),wk&&(wn=zo({},QA),ao=[],wk.html===!0&&(zo(wn,NE),zo(ao,e4)),wk.svg===!0&&(zo(wn,YA),zo(ao,PE),zo(ao,BE)),wk.svgFilters===!0&&(zo(wn,XA),zo(ao,PE),zo(ao,BE)),wk.mathMl===!0&&(zo(wn,B0),zo(ao,tP),zo(ao,BE))),Pe.ADD_TAGS&&(wn===$o&&(wn=tp(wn)),zo(wn,Pe.ADD_TAGS,Oc)),Pe.ADD_ATTR&&(ao===li&&(ao=tp(ao)),zo(ao,Pe.ADD_ATTR,Oc)),Pe.ADD_URI_SAFE_ATTR&&zo(zq,Pe.ADD_URI_SAFE_ATTR,Oc),Pe.FORBID_CONTENTS&&(Ck===LY&&(Ck=tp(Ck)),zo(Ck,Pe.FORBID_CONTENTS,Oc)),Hq&&(wn["#text"]=!0),Zb&&zo(wn,["html","head","body"]),wn.table&&(zo(wn,["tbody"]),delete kc.tbody),Pe.TRUSTED_TYPES_POLICY){if(typeof Pe.TRUSTED_TYPES_POLICY.createHTML!="function")throw YC('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Pe.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw YC('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Xe=Pe.TRUSTED_TYPES_POLICY,Le=Xe.createHTML("")}else Xe===void 0&&(Xe=z7(j,d)),Xe!==null&&typeof Le=="string"&&(Le=Xe.createHTML(""));qc&&qc(Pe),xk=Pe}},WY=zo({},["mi","mo","mn","ms","mtext"]),ZY=zo({},["annotation-xml"]),XJ=zo({},["title","style","font","a","script"]),jY=zo({},[...YA,...XA,...I7]),GY=zo({},[...B0,...JA]),JJ=function(Pe){let jt=_e(Pe);(!jt||!jt.tagName)&&(jt={namespaceURI:Sk,tagName:"template"});const An=ME(Pe.tagName),Ir=ME(jt.tagName);return Uq[Pe.namespaceURI]?Pe.namespaceURI===H6?jt.namespaceURI===jb?An==="svg":jt.namespaceURI===L6?An==="svg"&&(Ir==="annotation-xml"||WY[Ir]):!!jY[An]:Pe.namespaceURI===L6?jt.namespaceURI===jb?An==="math":jt.namespaceURI===H6?An==="math"&&ZY[Ir]:!!GY[An]:Pe.namespaceURI===jb?jt.namespaceURI===H6&&!ZY[Ir]||jt.namespaceURI===L6&&!WY[Ir]?!1:!GY[An]&&(XJ[An]||!jY[An]):!!(gM==="application/xhtml+xml"&&Uq[Pe.namespaceURI]):!1},Bp=function(Pe){qC(s.removed,{element:Pe});try{_e(Pe).removeChild(Pe)}catch{Ee(Pe)}},hM=function(Pe,jt){try{qC(s.removed,{attribute:jt.getAttributeNode(Pe),from:jt})}catch{qC(s.removed,{attribute:null,from:jt})}if(jt.removeAttribute(Pe),Pe==="is"&&!ao[Pe])if(yk||I6)try{Bp(jt)}catch{}else try{jt.setAttribute(Pe,"")}catch{}},qY=function(Pe){let jt=null,An=null;if(Lq)Pe="<remove></remove>"+Pe;else{const Ac=JN(Pe,/^[\r\n\t ]+/);An=Ac&&Ac[0]}gM==="application/xhtml+xml"&&Sk===jb&&(Pe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Pe+"</body></html>");const Ir=Xe?Xe.createHTML(Pe):Pe;if(Sk===jb)try{jt=new V().parseFromString(Ir,gM)}catch{}if(!jt||!jt.documentElement){jt=$e.createDocument(Sk,"template",null);try{jt.documentElement.innerHTML=Vq?Le:Ir}catch{}}const Nl=jt.body||jt.documentElement;return Pe&&An&&Nl.insertBefore(a.createTextNode(An),Nl.childNodes[0]||null),Sk===jb?Tn.call(jt,Zb?"html":"body")[0]:Zb?jt.documentElement:Nl},KY=function(Pe){return ct.call(Pe.ownerDocument||Pe,Pe,D.SHOW_ELEMENT|D.SHOW_COMMENT|D.SHOW_TEXT|D.SHOW_PROCESSING_INSTRUCTION|D.SHOW_CDATA_SECTION,null)},YY=function(Pe){return Pe instanceof L&&(typeof Pe.nodeName!="string"||typeof Pe.textContent!="string"||typeof Pe.removeChild!="function"||!(Pe.attributes instanceof N)||typeof Pe.removeAttribute!="function"||typeof Pe.setAttribute!="function"||typeof Pe.namespaceURI!="string"||typeof Pe.insertBefore!="function"||typeof Pe.hasChildNodes!="function")},XY=function(Pe){return typeof E=="function"&&Pe instanceof E},Gb=function(Pe,jt,An){Qt[Pe]&&RE(Qt[Pe],Ir=>{Ir.call(s,jt,An,xk)})},JY=function(Pe){let jt=null;if(Gb("beforeSanitizeElements",Pe,null),YY(Pe))return Bp(Pe),!0;const An=Oc(Pe.nodeName);if(Gb("uponSanitizeElement",Pe,{tagName:An,allowedTags:wn}),Pe.hasChildNodes()&&!XY(Pe.firstElementChild)&&fa(/<[/\w]/g,Pe.innerHTML)&&fa(/<[/\w]/g,Pe.textContent)||Pe.nodeType===$0.progressingInstruction||dM&&Pe.nodeType===$0.comment&&fa(/<[/\w]/g,Pe.data))return Bp(Pe),!0;if(!wn[An]||kc[An]){if(!kc[An]&&eX(An)&&(is.tagNameCheck instanceof RegExp&&fa(is.tagNameCheck,An)||is.tagNameCheck instanceof Function&&is.tagNameCheck(An)))return!1;if(Hq&&!Ck[An]){const Ir=_e(Pe)||Pe.parentNode,Nl=fe(Pe)||Pe.childNodes;if(Nl&&Ir){const Ac=Nl.length;for(let bd=Ac-1;bd>=0;--bd){const $p=ie(Nl[bd],!0);$p.__removalCount=(Pe.__removalCount||0)+1,Ir.insertBefore($p,he(Pe))}}}return Bp(Pe),!0}return Pe instanceof T&&!JJ(Pe)||(An==="noscript"||An==="noembed"||An==="noframes")&&fa(/<\/no(script|embed|frames)/i,Pe.innerHTML)?(Bp(Pe),!0):(Pp&&Pe.nodeType===$0.text&&(jt=Pe.textContent,RE([ln,ho,Yt],Ir=>{jt=KC(jt,Ir," ")}),Pe.textContent!==jt&&(qC(s.removed,{element:Pe.cloneNode()}),Pe.textContent=jt)),Gb("afterSanitizeElements",Pe,null),!1)},QY=function(Pe,jt,An){if(IY&&(jt==="id"||jt==="name")&&(An in a||An in YJ))return!1;if(!(Np&&!pd[jt]&&fa(qn,jt))){if(!(Mp&&fa(ft,jt))){if(!ao[jt]||pd[jt]){if(!(eX(Pe)&&(is.tagNameCheck instanceof RegExp&&fa(is.tagNameCheck,Pe)||is.tagNameCheck instanceof Function&&is.tagNameCheck(Pe))&&(is.attributeNameCheck instanceof RegExp&&fa(is.attributeNameCheck,jt)||is.attributeNameCheck instanceof Function&&is.attributeNameCheck(jt))||jt==="is"&&is.allowCustomizedBuiltInElements&&(is.tagNameCheck instanceof RegExp&&fa(is.tagNameCheck,An)||is.tagNameCheck instanceof Function&&is.tagNameCheck(An))))return!1}else if(!zq[jt]){if(!fa(nn,KC(An,mn,""))){if(!((jt==="src"||jt==="xlink:href"||jt==="href")&&Pe!=="script"&&pb(An,"data:")===0&&HY[Pe])){if(!(Wb&&!fa(Bt,KC(An,mn,"")))){if(An)return!1}}}}}}return!0},eX=function(Pe){return Pe!=="annotation-xml"&&JN(Pe,$n)},tX=function(Pe){Gb("beforeSanitizeAttributes",Pe,null);const{attributes:jt}=Pe;if(!jt)return;const An={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ao};let Ir=jt.length;for(;Ir--;){const Nl=jt[Ir],{name:Ac,namespaceURI:bd,value:$p}=Nl,pM=Oc(Ac);let el=Ac==="value"?$p:QN($p);const eQ=el;if(An.attrName=pM,An.attrValue=el,An.keepAttr=!0,An.forceKeepAttr=void 0,Gb("uponSanitizeAttribute",Pe,An),el=An.attrValue,An.forceKeepAttr)continue;if(!An.keepAttr){hM(Ac,Pe);continue}if(!vk&&fa(/\/>/i,el)){hM(Ac,Pe);continue}Pp&&RE([ln,ho,Yt],oX=>{el=KC(el,oX," ")});const nX=Oc(Pe.nodeName);if(!QY(nX,pM,el)){hM(Ac,Pe);continue}if(FY&&(pM==="id"||pM==="name")&&(hM(Ac,Pe),el=jJ+el),dM&&fa(/((--!?|])>)|<\/(style|title)/i,el)){hM(Ac,Pe);continue}if(Xe&&typeof j=="object"&&typeof j.getAttributeType=="function"&&!bd)switch(j.getAttributeType(nX,pM)){case"TrustedHTML":{el=Xe.createHTML(el);break}case"TrustedScriptURL":{el=Xe.createScriptURL(el);break}}if(el!==eQ)try{bd?Pe.setAttributeNS(bd,Ac,el):Pe.setAttribute(Ac,el),YY(Pe)?Bp(Pe):XN(s.removed)}catch{}}Gb("afterSanitizeAttributes",Pe,null)},QJ=function In(Pe){let jt=null;const An=KY(Pe);for(Gb("beforeSanitizeShadowDOM",Pe,null);jt=An.nextNode();)Gb("uponSanitizeShadowNode",jt,null),!JY(jt)&&(jt.content instanceof h&&In(jt.content),tX(jt));Gb("afterSanitizeShadowDOM",Pe,null)};return s.sanitize=function(In){let Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},jt=null,An=null,Ir=null,Nl=null;if(Vq=!In,Vq&&(In="<!-->"),typeof In!="string"&&!XY(In))if(typeof In.toString=="function"){if(In=In.toString(),typeof In!="string")throw YC("dirty is not a string, aborting")}else throw YC("toString is not a function");if(!s.isSupported)return In;if(mM||Wq(Pe),s.removed=[],typeof In=="string"&&(fM=!1),fM){if(In.nodeName){const $p=Oc(In.nodeName);if(!wn[$p]||kc[$p])throw YC("root node is forbidden and cannot be sanitized in-place")}}else if(In instanceof E)jt=qY("<!---->"),An=jt.ownerDocument.importNode(In,!0),An.nodeType===$0.element&&An.nodeName==="BODY"||An.nodeName==="HTML"?jt=An:jt.appendChild(An);else{if(!yk&&!Pp&&!Zb&&In.indexOf("<")===-1)return Xe&&F6?Xe.createHTML(In):In;if(jt=qY(In),!jt)return yk?null:F6?Le:""}jt&&Lq&&Bp(jt.firstChild);const Ac=KY(fM?In:jt);for(;Ir=Ac.nextNode();)JY(Ir)||(Ir.content instanceof h&&QJ(Ir.content),tX(Ir));if(fM)return In;if(yk){if(I6)for(Nl=mt.call(jt.ownerDocument);jt.firstChild;)Nl.appendChild(jt.firstChild);else Nl=jt;return(ao.shadowroot||ao.shadowrootmode)&&(Nl=$t.call(c,Nl,!0)),Nl}let bd=Zb?jt.outerHTML:jt.innerHTML;return Zb&&wn["!doctype"]&&jt.ownerDocument&&jt.ownerDocument.doctype&&jt.ownerDocument.doctype.name&&fa(rP,jt.ownerDocument.doctype.name)&&(bd="<!DOCTYPE "+jt.ownerDocument.doctype.name+`>
`+bd),Pp&&RE([ln,ho,Yt],$p=>{bd=KC(bd,$p," ")}),Xe&&F6?Xe.createHTML(bd):bd},s.setConfig=function(){let In=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Wq(In),mM=!0},s.clearConfig=function(){xk=null,mM=!1},s.isValidAttribute=function(In,Pe,jt){xk||Wq({});const An=Oc(In),Ir=Oc(Pe);return QY(An,Ir,jt)},s.addHook=function(In,Pe){typeof Pe=="function"&&(Qt[In]=Qt[In]||[],qC(Qt[In],Pe))},s.removeHook=function(In){if(Qt[In])return XN(Qt[In])},s.removeHooks=function(In){Qt[In]&&(Qt[In]=[])},s.removeAllHooks=function(){Qt={}},s}var V7=iP();const cP=t=>V7().sanitize(t);var yc=tinymce.util.Tools.resolve("tinymce.util.I18n");const lP={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},o4="temporary-placeholder",eS=t=>()=>vt(t,o4).getOr("!not found!"),s4=(t,s)=>{const a=t.toLowerCase();if(yc.isRtl()){const c=ea(a,"-rtl");return no(s,c)?c:a}else return a},r4=(t,s)=>vt(s,s4(t,s)),uP=(t,s)=>{const a=s();return r4(t,a).getOrThunk(eS(a))},U7=(t,s,a)=>{const c=s();return r4(t,c).or(a).getOrThunk(eS(c))},W7=t=>yc.isRtl()?no(lP,t):!1,$E=()=>En("add-focusable",[No(t=>{Hv(t.element,"svg").each(s=>xt(s,"focusable","false"))})]),dP=(t,s,a,c)=>{var d,h;const v=W7(s)?["tox-icon--flip"]:[],E=vt(a,s4(s,a)).or(c).getOrThunk(eS(a));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(v),innerHtml:E},behaviours:lt([...(h=t.behaviours)!==null&&h!==void 0?h:[],$E()])}},rd=(t,s,a,c=R.none())=>dP(s,t,a(),c),a4=(t,s,a)=>{const c=a(),d=fn(t,h=>no(c,s4(h,c)));return dP(s,d.getOr(o4),c,R.none())},mP={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},i4=ec({name:"Notification",factory:t=>{const s=bo({dom:gg(`<p>${cP(t.translationProvider(t.text))}</p>`),behaviours:lt([vn.config({})])}),a=j=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${j}%`}}}),c=j=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${j}%`}}),d=bo({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(0)]},c(0)],behaviours:lt([vn.config({})])}),E={updateProgress:(j,Y)=>{j.getSystem().isConnected()&&d.getOpt(j).each(ie=>{vn.set(ie,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(Y)]},c(Y)])})},updateText:(j,Y)=>{if(j.getSystem().isConnected()){const ie=s.get(j);vn.set(ie,[$s(Y)])}}},T=Wt([t.icon.toArray(),t.level.toArray(),t.level.bind(j=>R.from(mP[j])).toArray()]),D=bo(Yr.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[rd("close",{tag:"span",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:j=>{t.onAction(j)}})),N=a4(T,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),L={dom:{tag:"div",classes:["tox-notification__body"]},components:[s.asSpec()],behaviours:lt([vn.config({})])},V=[N,L];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(j=>["tox-notification","tox-notification--in",`tox-notification--${j}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:lt([cn.config({}),En("notification-events",[Ve(ji(),j=>{D.getOpt(j).each(cn.focus)})])]),components:V.concat(t.progress?[d.asSpec()]:[]).concat(t.closeButton?[D.asSpec()]:[]),apis:E}},configFields:[go("level"),We("progress"),go("icon"),We("onAction"),We("text"),We("iconProvider"),We("translationProvider"),yr("closeButton",!0)],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var c4=(t,s,a)=>{const c=s.backstage.shared,d=()=>{const T=ws(we.fromDom(t.getContentAreaContainer())),D=Ur(),N=mc(D.x,T.x,T.right),L=mc(D.y,T.y,T.bottom),V=Math.max(T.right,D.right),j=Math.max(T.bottom,D.bottom);return R.some(gs(N,L,V-N,j-L))};return{open:(T,D)=>{const N=()=>{D(),xs.hide(V)},L=xa(i4.sketch({text:T.text,level:yo(["success","error","warning","warn","info"],T.type)?T.type:void 0,progress:T.progressBar===!0,icon:T.icon,closeButton:T.closeButton,onAction:N,iconProvider:c.providers.icons,translationProvider:c.providers.translate})),V=xa(xs.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:c.getSink,fireDismissalEventInstead:{},...c.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));a.add(V),en(T.timeout)&&T.timeout>0&&hb.setEditorTimeout(t,()=>{N()},T.timeout);const Y={close:N,reposition:()=>{const ie=dc(L),Ee={maxHeightFunction:_h()},he=t.notificationManager.getNotifications();if(he[0]===Y){const fe={...c.anchors.banner(),overrides:Ee};xs.showWithinBounds(V,ie,{anchor:fe},d)}else Ge(he,Y).each(fe=>{const _e=he[fe-1].getEl(),Xe={type:"node",root:Os(),node:R.some(we.fromDom(_e)),overrides:Ee,layouts:{onRtl:()=>[Sr],onLtr:()=>[Sr]}};xs.showWithinBounds(V,ie,{anchor:Xe},d)})},text:ie=>{i4.updateText(L,ie)},settings:T,getEl:()=>L.element.dom,progressBar:{value:ie=>{i4.updateProgress(L,ie)}}};return Y},close:T=>{T.close()},getArgs:T=>T.settings}},I0=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),j7=tinymce.util.Tools.resolve("tinymce.EditorManager"),F0=tinymce.util.Tools.resolve("tinymce.Env"),mu;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(mu||(mu={}));var tS;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(tS||(tS={}));const Bo=t=>s=>s.options.get(t),bb=t=>s=>R.from(t(s)),fP=t=>{const s=F0.deviceType.isPhone(),a=F0.deviceType.isTablet()||s,c=t.options.register,d=v=>W(v)||v===!1,h=v=>W(v)||en(v);c("skin",{processor:v=>W(v)||v===!1,default:"oxide"}),c("skin_url",{processor:"string"}),c("height",{processor:h,default:Math.max(t.getElement().offsetHeight,400)}),c("width",{processor:h,default:I0.DOM.getStyle(t.getElement(),"width")}),c("min_height",{processor:"number",default:100}),c("min_width",{processor:"number"}),c("max_height",{processor:"number"}),c("max_width",{processor:"number"}),c("style_formats",{processor:"object[]"}),c("style_formats_merge",{processor:"boolean",default:!1}),c("style_formats_autohide",{processor:"boolean",default:!1}),c("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),c("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),c("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),c("font_size_input_default_unit",{processor:"string",default:"pt"}),c("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),c("content_langs",{processor:"object[]"}),c("removed_menuitems",{processor:"string",default:""}),c("menubar",{processor:v=>W(v)||Oe(v),default:!s}),c("menu",{processor:"object",default:{}}),c("toolbar",{processor:v=>Oe(v)||W(v)||me(v)?{value:v,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),us(9,v=>{c("toolbar"+(v+1),{processor:"string"})}),c("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),c("toolbar_groups",{processor:"object",default:{}}),c("toolbar_location",{processor:"string",default:tS.auto}),c("toolbar_persist",{processor:"boolean",default:!1}),c("toolbar_sticky",{processor:"boolean",default:t.inline}),c("toolbar_sticky_offset",{processor:"number",default:0}),c("fixed_toolbar_container",{processor:"string",default:""}),c("fixed_toolbar_container_target",{processor:"object"}),c("ui_mode",{processor:"string",default:"combined"}),c("file_picker_callback",{processor:"function"}),c("file_picker_validator_handler",{processor:"function"}),c("file_picker_types",{processor:"string"}),c("typeahead_urls",{processor:"boolean",default:!0}),c("anchor_top",{processor:d,default:"#top"}),c("anchor_bottom",{processor:d,default:"#bottom"}),c("draggable_modal",{processor:"boolean",default:!1}),c("statusbar",{processor:"boolean",default:!0}),c("elementpath",{processor:"boolean",default:!0}),c("branding",{processor:"boolean",default:!0}),c("promotion",{processor:"boolean",default:!0}),c("resize",{processor:v=>v==="both"||Oe(v),default:!F0.deviceType.isTouch()}),c("sidebar_show",{processor:"string"}),c("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),c("default_font_stack",{processor:"string[]",default:[]})},nS=Bo("readonly"),l4=Bo("height"),u4=Bo("width"),d4=bb(Bo("min_width")),m4=bb(Bo("min_height")),IE=bb(Bo("max_width")),f4=bb(Bo("max_height")),g4=bb(Bo("style_formats")),gP=Bo("style_formats_merge"),hP=Bo("style_formats_autohide"),FE=Bo("content_langs"),np=Bo("removed_menuitems"),L0=Bo("toolbar_mode"),pP=Bo("toolbar_groups"),oS=Bo("toolbar_location"),bP=Bo("fixed_toolbar_container"),G7=Bo("fixed_toolbar_container_target"),vP=Bo("toolbar_persist"),h4=Bo("toolbar_sticky_offset"),yP=Bo("menubar"),sS=Bo("toolbar"),p4=Bo("file_picker_callback"),LE=Bo("file_picker_validator_handler"),wP=Bo("font_size_input_default_unit"),b4=Bo("file_picker_types"),CP=Bo("typeahead_urls"),H0=Bo("anchor_top"),SP=Bo("anchor_bottom"),xP=Bo("draggable_modal"),HE=Bo("statusbar"),zE=Bo("elementpath"),v4=Bo("branding"),VE=Bo("resize"),EP=Bo("paste_as_text"),TP=Bo("sidebar_show"),UE=Bo("promotion"),_P=Bo("help_accessibility"),kP=Bo("default_font_stack"),y4=t=>t.options.get("skin")===!1,WE=t=>t.options.get("menubar")!==!1,ZE=t=>{const s=t.options.get("skin_url");if(y4(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return j7.baseURL+"/skins/ui/"+a}},jE=t=>R.from(t.options.get("skin_url")),OP=t=>t.options.get("line_height_formats").split(" "),GE=t=>{const s=sS(t),a=W(s),c=me(s)&&s.length>0;return!rS(t)&&(c||a||s===!0)},w4=t=>{const s=us(9,c=>t.options.get("toolbar"+(c+1))),a=ko(s,W);return an(a.length>0,a)},rS=t=>w4(t).fold(()=>{const s=sS(t);return ze(s,W)&&s.length>0},Rt),C4=t=>oS(t)===tS.bottom,AP=t=>{var s;if(!t.inline)return R.none();const a=(s=bP(t))!==null&&s!==void 0?s:"";if(a.length>0)return Vs(Os(),a);const c=G7(t);return Je(c)?R.some(we.fromDom(c)):R.none()},op=t=>t.inline&&AP(t).isSome(),S4=t=>AP(t).getOrThunk(()=>ot(Be(we.fromDom(t.getElement())))),x4=t=>t.inline&&!WE(t)&&!GE(t)&&!rS(t),aS=t=>(t.options.get("toolbar_sticky")||t.inline)&&!op(t)&&!x4(t),pg=t=>!op(t)&&t.options.get("ui_mode")==="split",DP=t=>{const s=t.options.get("menu");return Jo(s,a=>({...a,items:a.items}))};var q7=Object.freeze({__proto__:null,get ToolbarMode(){return mu},get ToolbarLocation(){return tS},register:fP,getSkinUrl:ZE,getSkinUrlOption:jE,isReadOnly:nS,isSkinDisabled:y4,getHeightOption:l4,getWidthOption:u4,getMinWidthOption:d4,getMinHeightOption:m4,getMaxWidthOption:IE,getMaxHeightOption:f4,getUserStyleFormats:g4,shouldMergeStyleFormats:gP,shouldAutoHideStyleFormats:hP,getLineHeightFormats:OP,getContentLanguages:FE,getRemovedMenuItems:np,isMenubarEnabled:WE,isMultipleToolbars:rS,isToolbarEnabled:GE,isToolbarPersist:vP,getMultipleToolbarsOption:w4,getUiContainer:S4,useFixedContainer:op,isSplitUiMode:pg,getToolbarMode:L0,isDraggableModal:xP,isDistractionFree:x4,isStickyToolbar:aS,getStickyToolbarOffset:h4,getToolbarLocation:oS,isToolbarLocationBottom:C4,getToolbarGroups:pP,getMenus:DP,getMenubar:yP,getToolbar:sS,getFilePickerCallback:p4,getFilePickerTypes:b4,useTypeaheadUrls:CP,getAnchorTop:H0,getAnchorBottom:SP,getFilePickerValidatorHandler:LE,getFontSizeInputDefaultUnit:wP,useStatusBar:HE,useElementPath:zE,promotionEnabled:UE,useBranding:v4,getResize:VE,getPasteAsText:EP,getSidebarShow:TP,useHelpAccessibility:_P,getDefaultFontStack:kP});const RP="[data-mce-autocompleter]",MP=t=>nu(t,RP),K7=t=>Vs(t,RP),E4={setup:(t,s)=>{const a=(d,h)=>{Gt(d,pl(),{raw:h})},c=()=>t.getMenu().bind(ro.getHighlighted);s.on("keydown",d=>{const h=d.which;t.isActive()&&(t.isMenuOpen()?h===13?(c().each($d),d.preventDefault()):h===40?(c().fold(()=>{t.getMenu().each(ro.highlightFirst)},v=>{a(v,d)}),d.preventDefault(),d.stopImmediatePropagation()):(h===37||h===38||h===39)&&c().each(v=>{a(v,d),d.preventDefault(),d.stopImmediatePropagation()}):(h===13||h===38||h===40)&&t.cancelIfNecessary())}),s.on("NodeChange",d=>{t.isActive()&&!t.isProcessingAction()&&MP(we.fromDom(d.element)).isNone()&&t.cancelIfNecessary()})}};var T4;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(T4||(T4={}));var rm=T4;const _4="tox-menu-nav__js",qE="tox-collection__item",k4="tox-swatch",Y7={normal:_4,color:k4},NP="tox-collection__item--enabled",X7="tox-collection__group-heading",PP="tox-collection__item-icon",O4="tox-collection__item-label",J7="tox-collection__item-accessory",BP="tox-collection__item-caret",Q7="tox-collection__item-checkmark",sp="tox-collection__item--active",$P="tox-collection__item-container",A4="tox-collection__item-container--column",IP="tox-collection__item-container--row",eH="tox-collection__item-container--align-right",tH="tox-collection__item-container--align-left",FP="tox-collection__item-container--valign-top",nH="tox-collection__item-container--valign-middle",D4="tox-collection__item-container--valign-bottom",KE=t=>vt(Y7,t).getOr(_4),LP=t=>t==="color"?"tox-swatches":"tox-menu",iS=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:LP(t),tieredMenu:"tox-tiered-menu"}),sf=t=>{const s=iS(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:KE(t)}},HP=(t,s,a)=>{const c=iS(a);return{tag:"div",classes:Wt([[c.menu,`tox-menu-${s}-column`],t?[c.hasIcons]:[]])}},rf=[gb.parts.items({})],z0=(t,s,a)=>{const c=iS(a);return{dom:{tag:"div",classes:Wt([[c.tieredMenu]])},markers:sf(a)}},zP=ae([go("data"),xe("inputAttributes",{}),xe("inputStyles",{}),xe("tag","input"),xe("inputClasses",[]),Un("onSetValue"),xe("styles",{}),xe("eventOrder",{}),fr("inputBehaviours",[wt,cn]),xe("selectOnFocus",!0)]),VP=t=>lt([cn.config({onFocus:t.selectOnFocus?s=>{const a=s.element,c=Gu(a);a.dom.setSelectionRange(0,c.length)}:ee})]),oH=t=>({...VP(t),...Ys(t.inputBehaviours,[wt.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>Gu(s.element),setValue:(s,a)=>{Gu(s.element)!==a&&fh(s.element,a)}},onSetValue:t.onSetValue})])}),UP=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),cS=(t,s)=>({uid:t.uid,dom:UP(t),components:[],behaviours:oH(t),eventOrder:t.eventOrder}),vb=ec({name:"Input",configFields:zP(),factory:cS}),R4=Ot("refetch-trigger-event"),YE=Ot("redirect-menu-item-interaction"),WP="tox-menu__searcher",V0=t=>Vs(t.element,`.${WP}`).bind(s=>t.getSystem().getByDom(s).toOptional()),XE=V0,sH=(t,s)=>{wt.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},M4=t=>{const s=wt.getValue(t),a=t.element.dom.selectionStart,c=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:c}},ZP=(t,s)=>{Hr(s.element,"id").each(a=>xt(t.element,"aria-activedescendant",a))},rH=t=>{const s=(d,h)=>(h.cut(),R.none()),a=(d,h)=>{const v={interactionEvent:h.event,eventType:h.event.raw.type};return Gt(d,YE,v),R.some(!0)},c="searcher-events";return{dom:{tag:"div",classes:[qE]},components:[vb.sketch({inputClasses:[WP,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:lt([En(c,[Ve(zf(),d=>{Fn(d,R4)}),Ve(pl(),(d,h)=>{h.event.raw.key==="Escape"&&h.stop()})]),qt.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[c,qt.name()]}})]}},JE="tox-collection--results__js",jP=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:Ot("aria-item-search-result-id"),"aria-selected":"false"}}}:t},N4=(t,s)=>a=>{const c=Fr(a,s);return Ke(c,d=>({dom:t,components:d}))},aH=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[gb.parts.items({preprocess:t!=="auto"?N4({tag:"div",classes:["tox-swatches__row"]},t):yt})]}]}),iH=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[gb.parts.items({preprocess:N4({tag:"div",classes:["tox-collection__group"]},t)})]}),P4=(t,s)=>{const a=[];let c=[];return St(t,(d,h)=>{s(d,h)?(c.length>0&&a.push(c),c=[],(no(d.dom,"innerHtml")||d.components&&d.components.length>0)&&c.push(d)):c.push(d)}),c.length>0&&a.push(c),Ke(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},QE=(t,s,a)=>gb.parts.items({preprocess:c=>{const d=Ke(c,a);return t!=="auto"&&t>1?N4({tag:"div",classes:["tox-collection__group"]},t)(d):P4(d,(h,v)=>s[v].type==="separator")}}),GP=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[QE(t,s,yt)]}),qP=(t,s,a=!0)=>{const c=Ot("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",JE].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:c}},components:[QE(t,s,jP)]}},lS=(t,s,a)=>{const c=Ot("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[rH({i18n:yc.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],JE],attributes:{id:c}},components:[QE(t,s,jP)]}]}},KP=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[gb.parts.items({preprocess:a=>P4(a,(c,d)=>t[d].type==="separator")})]}),eT=t=>kr(t,s=>"icon"in s&&s.icon!==void 0),bg=t=>(console.error(Ia(t)),console.log(t),R.none()),YP=(t,s,a,c,d)=>{const h=KP(a);return{value:t,dom:h.dom,components:h.components,items:a}},B4=(t,s,a,c,d)=>{const h=()=>d.menuType!=="searchable"?GP(c,a):d.searchMode.searchMode==="search-with-field"?lS(c,a,d.searchMode):qP(c,a);if(d.menuType==="color"){const v=aH(c);return{value:t,dom:v.dom,components:v.components,items:a}}else if(d.menuType==="normal"&&c==="auto"){const v=GP(c,a);return{value:t,dom:v.dom,components:v.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const v=h();return{value:t,dom:v.dom,components:v.components,items:a}}else if(d.menuType==="listpreview"&&c!=="auto"){const v=iH(c);return{value:t,dom:v.dom,components:v.components,items:a}}else return{value:t,dom:HP(s,c,d.menuType),components:rf,items:a}},nr=so("type"),tT=so("name"),nT=so("label"),af=so("text"),$4=so("title"),XP=so("icon"),uS=so("value"),JP=Yl("fetch"),I4=Yl("getSubmenuItems"),rp=Yl("onAction"),QP=Yl("onItemAction"),ap=Mr("onSetup",()=>ee),eB=aa("name"),ip=aa("text"),Kc=aa("icon"),oT=aa("tooltip"),sT=aa("label"),tB=aa("shortcut"),yb=If("select"),rT=yr("active",!1),F4=yr("borderless",!1),Yc=yr("enabled",!0),aT=yr("primary",!1),L4=t=>xe("columns",t),iT=xe("meta",{}),cT=Mr("onAction",ee),vg=t=>Fu("type",t),lT=t=>ra("name","name",Uc(()=>Ot(`${t}-name`)),Zr),cH=t=>ra("value","value",Uc(()=>Ot(`${t}-value`)),ur()),H4=Vt([nr,ip]),nB=t=>Cs("separatormenuitem",H4,t),oB=Vt([vg("autocompleteitem"),rT,Yc,iT,uS,ip,Kc]),sB=t=>Cs("Autocompleter.Separator",H4,t),lH=t=>Cs("Autocompleter.Item",oB,t),U0=[Yc,oT,Kc,ip,ap],uH=Vt([nr,rp].concat(U0)),rB=t=>Cs("toolbarbutton",uH,t),z4=[rT].concat(U0),dH=Vt(z4.concat([nr,rp])),V4=t=>Cs("ToggleButton",dH,t),W0=[Mr("predicate",Pn),Wi("scope","node",["node","editor"]),Wi("position","selection",["node","selection","line"])],aB=U0.concat([vg("contextformbutton"),aT,rp,Ls("original",yt)]),mH=z4.concat([vg("contextformbutton"),aT,rp,Ls("original",yt)]),fH=U0.concat([vg("contextformbutton")]),gH=z4.concat([vg("contextformtogglebutton")]),hH=Vn("type",{contextformbutton:aB,contextformtogglebutton:mH}),pH=Vt([vg("contextform"),Mr("initValue",ae("")),sT,ic("commands",hH),$u("launch",Vn("type",{contextformbutton:fH,contextformtogglebutton:gH}))].concat(W0)),uT=t=>Cs("ContextForm",pH,t),bH=Vt([vg("contexttoolbar"),so("items")].concat(W0)),iB=t=>Cs("ContextToolbar",bH,t),vH=[nr,so("src"),aa("alt"),bi("classes",[],Zr)],cB=Vt(vH),lB=[nr,af,eB,bi("classes",["tox-collection__item-label"],Zr)],yH=Vt(lB),U4=Wr(()=>nt("type",{cardimage:cB,cardtext:yH,cardcontainer:uB})),uB=Vt([nr,Fu("direction","horizontal"),Fu("align","left"),Fu("valign","middle"),ic("items",U4)]),wb=[Yc,ip,tB,cH("menuitem"),iT],dB=Vt([nr,sT,ic("items",U4),ap,cT].concat(wb)),wH=t=>Cs("cardmenuitem",dB,t),CH=Vt([nr,rT,Kc].concat(wb)),SH=t=>Cs("choicemenuitem",CH,t),mB=[nr,so("fancytype"),cT],fB=[xe("initData",{})].concat(mB),gB=[If("select"),Lu("initData",{},[yr("allowCustomColors",!0),Fu("storageKey","default"),Ff("colors",ur())])].concat(mB),xH=Vn("fancytype",{inserttable:fB,colorswatch:gB}),EH=t=>Cs("fancymenuitem",xH,t),TH=Vt([nr,ap,cT,Kc].concat(wb)),_H=t=>Cs("menuitem",TH,t),kH=Vt([nr,I4,ap,Kc].concat(wb)),hB=t=>Cs("nestedmenuitem",kH,t),OH=Vt([nr,Kc,rT,ap,rp].concat(wb)),AH=t=>Cs("togglemenuitem",OH,t),dS=(t,s,a)=>{const c=Er(t.element,"."+a);if(c.length>0){const d=Yo(c,h=>{const v=h.dom.getBoundingClientRect().top,E=c[0].dom.getBoundingClientRect().top;return Math.abs(v-E)>s}).getOr(c.length);return R.some({numColumns:d,numRows:Math.ceil(c.length/d)})}else return R.none()},W4=(t,s)=>lt([En(t,s)]),mS={namedEvents:W4,unnamedEvents:t=>W4(Ot("unnamed-events"),t)},Z4=Ot("tooltip.exclusive"),fS=Ot("tooltip.show"),gS=Ot("tooltip.hide"),j4=(t,s,a)=>{t.getSystem().broadcastOn([Z4],{})};var pB=Object.freeze({__proto__:null,hideAllExclusive:j4,setComponents:(t,s,a,c)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&vn.set(d,c)})}}),RH=Object.freeze({__proto__:null,events:(t,s)=>{const a=d=>{s.getTooltip().each(h=>{ed(h),t.onHide(d,h),s.clearTooltip()}),s.clearTimer()},c=d=>{if(!s.isShowing()){j4(d);const h=t.lazySink(d).getOrDie(),v=d.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:Ho(t.mode==="normal"?[Ve(Pd(),E=>{Fn(d,fS)}),Ve(Jg(),E=>{Fn(d,gS)})]:[]),behaviours:lt([vn.config({})])});s.setTooltip(v),Xm(h,v),t.onShow(d,v),Ta.position(h,v,{anchor:t.anchor(d)})}};return Ho(Wt([[Ve(fS,d=>{s.resetTimer(()=>{c(d)},t.delay)}),Ve(gS,d=>{s.resetTimer(()=>{a(d)},t.delay)}),Ve(Wf(),(d,h)=>{const v=h;v.universal||yo(v.channels,Z4)&&a(d)}),Wu(d=>{a(d)})],t.mode==="normal"?[Ve(ji(),d=>{Fn(d,fS)}),Ve(Mm(),d=>{Fn(d,gS)}),Ve(Pd(),d=>{Fn(d,fS)}),Ve(Jg(),d=>{Fn(d,gS)})]:[Ve(g1(),(d,h)=>{Fn(d,fS)}),Ve(h1(),d=>{Fn(d,gS)})]]))}}),MH=[We("lazySink"),We("tooltipDom"),xe("exclusive",!0),xe("tooltipComponents",[]),xe("delay",300),Wi("mode","normal",["normal","follow-highlight"]),xe("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:ae([Sr,La,Cr,ri,ua,Ea]),onRtl:ae([Sr,La,Cr,ri,ua,Ea])}})),Un("onHide"),Un("onShow")],G4=Object.freeze({__proto__:null,init:()=>{const t=Dn(),s=Dn(),a=()=>{t.on(clearTimeout)},c=(h,v)=>{a(),t.set(setTimeout(h,v))},d=ae("not-implemented");return qi({getTooltip:s.get,isShowing:s.isSet,setTooltip:s.set,clearTooltip:s.clear,clearTimer:a,resetTimer:c,readState:d})}});const bB=xr({fields:MH,name:"tooltipping",active:RH,state:G4,apis:pB}),NH=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),q4="silver.readonly",vB=Vt([Hk("readonly")]),dT=(t,s)=>{const c=t.mainUi.outerContainer.element,d=[t.mainUi.mothership,...t.uiMotherships];s&&St(d,h=>{h.broadcastOn([iu()],{target:c})}),St(d,h=>{h.broadcastOn([q4],{readonly:s})})},yB=(t,s)=>{t.on("init",()=>{t.mode.isReadOnly()&&dT(s,!0)}),t.on("SwitchMode",()=>dT(s,t.mode.isReadOnly())),nS(t)&&t.mode.set("readonly")},Nr=()=>wi.config({channels:{[q4]:{schema:vB,onReceive:(t,s)=>{on.set(t,s.readonly)}}}}),kl={item:t=>on.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>on.config({disabled:t}),splitButton:t=>on.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>on.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},Cb=(t,s)=>{const a=t.getApi(s);return c=>{c(a)}},yg=(t,s)=>No(a=>{Cb(t,a)(d=>{const h=t.onSetup(d);Ye(h)&&s.set(h)})}),ad=(t,s)=>Wu(a=>Cb(t,a)(s.get())),mT=(t,s)=>bl((a,c)=>{Cb(t,a)(t.onAction),!t.triggersSubmenu&&s===rm.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&Fn(a,d1()),c.stop())}),K4={[Gi()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Sb=Bi,cf=(t,s,a,c)=>{const d=Jt(ee);return{type:"item",dom:s.dom,components:Sb(s.optComponents),data:t.data,eventOrder:K4,hasSubmenu:t.triggersSubmenu,itemBehaviours:lt([En("item-events",[mT(t,a),yg(t,d),ad(t,d)]),kl.item(()=>!t.enabled||c.isDisabled()),Nr(),vn.config({})].concat(t.itemBehaviours))}},Z0=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),CB=t=>{const s=F0.os.isMacOS()||F0.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},h=t.split("+"),v=Ke(h,E=>{const T=E.toLowerCase().trim();return no(d,T)?d[T]:E});return s?v.join(""):v.join("+")},fu=(t,s,a=[PP])=>rd(t,{tag:"div",classes:a},s),wc=t=>({dom:{tag:"div",classes:[O4]},components:[$s(yc.translate(t))]}),j0=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),gu=(t,s)=>({dom:{tag:"div",classes:[O4]},components:[{dom:{tag:t.tag,styles:t.styles},components:[$s(yc.translate(s))]}]}),BH=t=>({dom:{tag:"div",classes:[J7]},components:[$s(CB(t))]}),Vo=t=>fu("checkmark",t,[Q7]),$H=t=>fu("chevron-right",t,[BP]),xb=t=>fu("chevron-down",t,[BP]),hS=(t,s)=>{const a=t.direction==="vertical"?A4:IP,c=t.align==="left"?tH:eH;return{dom:{tag:"div",classes:[$P,a,c,(()=>{switch(t.valign){case"top":return FP;case"middle":return nH;case"bottom":return D4}})()]},components:s}},SB=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),Y4=(t,s,a)=>{const c="custom",d="remove",h=t.ariaLabel,v=t.value,E=t.iconContent.map(D=>U7(D,s.icons,a));return{dom:(()=>{const D=k4,N=E.getOr(""),V={tag:"div",attributes:h.map(j=>({title:s.translate(j)})).getOr({}),classes:[D]};return v===c?{...V,tag:"button",classes:[...V.classes,"tox-swatches__picker-btn"],innerHtml:N}:v===d?{...V,classes:[...V.classes,"tox-swatch--remove"],innerHtml:N}:Je(v)?{...V,attributes:{...V.attributes,"data-mce-color":v},styles:{"background-color":v},innerHtml:N}:V})(),optComponents:[]}},fT=t=>{const s=t.map(a=>({attributes:{title:yc.translate(a),id:Ot("menu-item")}})).getOr({});return{tag:"div",classes:[_4,qE],...s}},IH=(t,s,a,c)=>{const d={tag:"div",classes:[PP]},h=V=>rd(V,d,s.icons,c),v=()=>R.some({dom:d}),E=a?t.iconContent.map(h).orThunk(v):R.none(),T=t.checkMark,D=R.from(t.meta).fold(()=>wc,V=>no(V,"style")?Ht(gu,V.style):wc),N=t.htmlContent.fold(()=>t.textContent.map(D),V=>R.some(j0(V,[O4])));return{dom:fT(t.ariaLabel),optComponents:[E,N,t.shortcutContent.map(BH),T,t.caret]}},Eb=(t,s,a,c=R.none())=>t.presets==="color"?Y4(t,s,c):IH(t,s,a,c),xB=(t,s)=>vt(t,"tooltipWorker").map(a=>[bB.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:c=>({type:"submenu",item:c,overrides:{maxHeightFunction:_h}}),mode:"follow-highlight",onShow:(c,d)=>{a(h=>{bB.setComponents(c,[J2({element:we.fromDom(h)})])})}})]).getOr([]),EB=t=>I0.DOM.encode(t),X4=(t,s)=>{const a=yc.translate(t),c=EB(a);if(s.length>0){const d=new RegExp(NH(s),"gi");return c.replace(d,h=>`<span class="tox-autocompleter-highlight">${h}</span>`)}else return c},J4=(t,s,a,c,d,h,v,E=!0)=>{const T=Eb({presets:c,textContent:R.none(),htmlContent:a?t.text.map(D=>X4(D,s)):R.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:R.none(),checkMark:R.none(),caret:R.none(),value:t.value},v.providers,E,t.icon);return cf({data:Z0(t),enabled:t.enabled,getApi:ae({}),onAction:D=>d(t.value,t.meta),onSetup:ae(ee),triggersSubmenu:!1,itemBehaviours:xB(t.meta,v)},T,h,v.providers)},Q4=(t,s)=>Ke(t,a=>{switch(a.type){case"cardcontainer":return hS(a,Q4(a.items,s));case"cardimage":return SB(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(h=>yo(s.cardText.highlightOn,h))?R.from(s.cardText.matchText).getOr(""):"";return j0(X4(a.text,d),a.classes)}}),gT=(t,s,a,c)=>{const d=v=>({isEnabled:()=>!on.isDisabled(v),setEnabled:E=>{on.set(v,!E),St(Er(v.element,"*"),T=>{v.getSystem().getByDom(T).each(D=>{D.hasConfigured(on)&&on.set(D,!E)})})}}),h={dom:fT(t.label),optComponents:[R.some({dom:{tag:"div",classes:[$P,IP]},components:Q4(t.items,c)})]};return cf({data:Z0({text:R.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:R.from(c.itemBehaviours).getOr([])},h,s,a.providers)},FH=(t,s,a,c,d,h,v,E=!0)=>{const T=N=>({setActive:L=>{kn.set(N,L)},isActive:()=>kn.isOn(N),isEnabled:()=>!on.isDisabled(N),setEnabled:L=>on.set(N,!L)}),D=Eb({presets:a,textContent:s?t.text:R.none(),htmlContent:R.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:R.none(),checkMark:s?R.some(Vo(v.icons)):R.none(),caret:R.none(),value:t.value},v,E);return Eo(cf({data:Z0(t),enabled:t.enabled,getApi:T,onAction:N=>c(t.value),onSetup:N=>(N.setActive(d),ee),triggersSubmenu:!1,itemBehaviours:[]},D,h,v),{toggling:{toggleClass:NP,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},TB=Xd(jC(),GC()),_B=t=>({value:AB(t)}),kB=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,OB=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,eD=t=>kB.test(t)||OB.test(t),AB=t=>ym(t,"#").toUpperCase(),LH=t=>eD(t)?R.some({value:AB(t)}):R.none(),DB=t=>({value:t.value.replace(kB,(a,c,d,h)=>c+c+d+d+h+h)}),HH=t=>{const s=DB(t),a=OB.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},hT=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},wg=t=>{const s=hT(t.red)+hT(t.green)+hT(t.blue);return _B(s)},RB=Math.min,MB=Math.max,pS=Math.round,NB=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,PB=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,cp=(t,s,a,c)=>({red:t,green:s,blue:a,alpha:c}),tD=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},BB=t=>{let s,a,c;const d=(t.hue||0)%360;let h=t.saturation/100,v=t.value/100;if(h=MB(0,RB(h,1)),v=MB(0,RB(v,1)),h===0)return s=a=c=pS(255*v),cp(s,a,c,1);const E=d/60,T=v*h,D=T*(1-Math.abs(E%2-1)),N=v-T;switch(Math.floor(E)){case 0:s=T,a=D,c=0;break;case 1:s=D,a=T,c=0;break;case 2:s=0,a=T,c=D;break;case 3:s=0,a=D,c=T;break;case 4:s=D,a=0,c=T;break;case 5:s=T,a=0,c=D;break;default:s=a=c=0}return s=pS(255*(s+N)),a=pS(255*(a+N)),c=pS(255*(c+N)),cp(s,a,c,1)},bS=t=>{const s=HH(t),a=parseInt(s[1],16),c=parseInt(s[2],16),d=parseInt(s[3],16);return cp(a,c,d,1)},$B=(t,s,a,c)=>{const d=parseInt(t,10),h=parseInt(s,10),v=parseInt(a,10),E=parseFloat(c);return cp(d,h,v,E)},nD=t=>{if(t==="transparent")return R.some(cp(0,0,0,0));const s=NB.exec(t);if(s!==null)return R.some($B(s[1],s[2],s[3],"1"));const a=PB.exec(t);return a!==null?R.some($B(a[1],a[2],a[3],a[4])):R.none()},oD=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,hu=cp(255,0,0,1),zH=t=>{t.dispatch("SkinLoaded")},sD=(t,s)=>{t.dispatch("SkinLoadError",s)},IB=t=>{t.dispatch("ResizeEditor")},pT=(t,s)=>{t.dispatch("ResizeContent",s)},VH=(t,s)=>{t.dispatch("ScrollContent",s)},rD=(t,s)=>{t.dispatch("TextColorChange",s)},FB=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},LB=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),UH=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},WH=(t,s)=>{t.dispatch("StylesTextUpdate",s)},ZH=(t,s)=>{t.dispatch("AlignTextUpdate",s)},jH=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},GH=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},HB=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},zB=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},vS=(t,s)=>()=>{t(),s()},ki=t=>id(t,"NodeChange",s=>{s.setEnabled(t.selection.isEditable())}),qH=(t,s)=>a=>{const c=Zd(),d=()=>{a.setActive(t.formatter.match(s));const h=t.formatter.formatChanged(s,a.setActive);c.set(h)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),c.clear()}},bT=(t,s)=>a=>{const c=ki(t)(a),d=qH(t,s)(a);return()=>{c(),d()}},id=(t,s,a)=>c=>{const d=()=>a(c),h=()=>{a(c),t.on(s,d)};return t.initialized?h():t.once("init",h),()=>{t.off("init",h),t.off(s,d)}},VB=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},Cc=(t,s)=>()=>t.execCommand(s);var lp=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const aD={},iD=(t,s=10)=>{const a=lp.getItem(t),c=W(a)?JSON.parse(a):[],h=(D=>s-D.length<0?D.slice(0,s):D)(c),v=D=>{Ge(h,D).each(E),h.unshift(D),h.length>s&&h.pop(),lp.setItem(t,JSON.stringify(h))},E=D=>{h.splice(D,1)};return{add:v,state:()=>h.slice(0)}},vT=t=>vt(aD,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=lp.getItem(s);if(De(a)){const d=lp.getItem("tinymce-custom-colors");lp.setItem(s,Je(d)?d:"[]")}const c=iD(s,10);return aD[t]=c,c}),cD=t=>Ke(vT(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),lD=(t,s)=>{vT(t).add(s)},yS=(t,s,a)=>({hue:t,saturation:s,value:a}),yT=t=>{let s=0,a=0,c=0;const d=t.red/255,h=t.green/255,v=t.blue/255,E=Math.min(d,Math.min(h,v)),T=Math.max(d,Math.max(h,v));if(E===T)return c=E,yS(0,0,c*100);const D=d===E?h-v:v===E?d-h:v-d;return s=d===E?3:v===E?1:5,s=60*(s-D/(T-E)),a=(T-E)/T,c=T,yS(Math.round(s),Math.round(a*100),Math.round(c*100))},KH=t=>yT(bS(t)),UB=t=>wg(BB(t)),YH=t=>LH(t).orThunk(()=>nD(t).map(wg)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const c=a.getImageData(0,0,1,1).data,d=c[0],h=c[1],v=c[2],E=c[3];return wg(cp(d,h,v,E))}),wT="forecolor",CT="hilitecolor",WB=5,XH=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:"#"+YH(t[a]).value,icon:"checkmark",type:"choiceitem"});return s},lf=t=>s=>s.options.get(t),uD="#000000",JH=t=>{const s=t.options.register,a=d=>ze(d,W)?{value:XH(d),valid:!0}:{valid:!1,message:"Must be an array of strings."},c=d=>en(d)&&d>0?{value:d,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:c,default:dD(t)}),s("color_cols_foreground",{processor:c,default:ZB(t,wT)}),s("color_cols_background",{processor:c,default:ZB(t,CT)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:uD}),s("color_default_background",{processor:"string",default:uD})},ST=(t,s)=>s===wT&&t.options.isSet("color_map_foreground")?lf("color_map_foreground")(t):s===CT&&t.options.isSet("color_map_background")?lf("color_map_background")(t):lf("color_map")(t),dD=(t,s="default")=>Math.max(WB,Math.ceil(Math.sqrt(ST(t,s).length))),ZB=(t,s)=>{const a=lf("color_cols")(t),c=dD(t,s);return a===dD(t)?c:a},jB=(t,s="default")=>Math.round(s===wT?lf("color_cols_foreground")(t):s===CT?lf("color_cols_background")(t):lf("color_cols")(t)),GB=lf("custom_colors"),QH=lf("color_default_foreground"),ez=lf("color_default_background"),qB="rgba(0, 0, 0, 0)",tz=t=>nD(t).exists(s=>s.alpha!==0),nz=t=>Lf(t,s=>{if(po(s)){const a=Ds(s,"background-color");return an(tz(a),a)}else return R.none()}).getOr(qB),KB=(t,s)=>{const a=we.fromDom(t.selection.getStart()),c=s==="hilitecolor"?nz(a):Ds(a,"color");return nD(c).map(d=>"#"+wg(d).value)},oz=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},sz=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},xT=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{oz(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{sz(t,s)})},mD=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},fD=(t,s,a,c)=>{a==="custom"?QB(t)(h=>{h.each(v=>{lD(s,v),t.execCommand("mceApplyTextcolor",s,v),c(v)})},KB(t,s).getOr(uD)):a==="remove"?(c(""),t.execCommand("mceRemoveTextcolor",s)):(c(a),t.execCommand("mceApplyTextcolor",s,a))},gD=(t,s,a)=>t.concat(cD(s).concat(mD(a))),YB=(t,s,a)=>c=>{c(gD(t,s,a))},hD=(t,s,a)=>{const c=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(c,a)},XB=(t,s)=>{t.setTooltip(s)},JB=(t,s)=>a=>{const c=KB(t,s);return Ma(c,a.toUpperCase())},wS=(t,s,a)=>{if(vs(a))return s==="forecolor"?"Text color":"Background color";const c=s==="forecolor"?"Text color {0}":"Background color {0}",d=gD(ST(t,s),s,!1),h=fn(d,v=>v.value===a).getOr({text:""}).text;return t.translate([c,t.translate(h)])},pD=(t,s,a,c)=>{t.ui.registry.addSplitButton(s,{tooltip:wS(t,a,c.get()),presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:JB(t,a),columns:jB(t,a),fetch:YB(ST(t,a),a,GB(t)),onAction:d=>{fD(t,a,c.get(),ee)},onItemAction:(d,h)=>{fD(t,a,h,v=>{c.set(v),rD(t,{name:s,color:v})})},onSetup:d=>{hD(d,s,c.get());const h=v=>{v.name===s&&(hD(d,v.name,v.color),XB(d,wS(t,a,v.color)))};return t.on("TextColorChange",h),vS(ki(t)(d),()=>{t.off("TextColorChange",h)})}})},bD=(t,s,a,c,d)=>{t.ui.registry.addNestedMenuItem(s,{text:c,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:h=>(XB(h,wS(t,a,d.get())),hD(h,s,d.get()),ki(t)(h)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:JB(t,a),initData:{storageKey:a},onAction:h=>{fD(t,a,h.value,v=>{d.set(v),rD(t,{name:s,color:v})})}}]})},QB=t=>(s,a)=>{let c=!1;const d=E=>{const D=E.getData().colorpicker;c?(s(R.from(D)),E.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",D]))},h=(E,T)=>{T.name==="hex-valid"&&(c=T.value)},v={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:v,onAction:h,onSubmit:d,onClose:ee,onCancel:()=>{s(R.none())}})},e$=t=>{xT(t);const s=QH(t),a=ez(t),c=Jt(s),d=Jt(a);pD(t,"forecolor","forecolor",c),pD(t,"backcolor","hilitecolor",d),bD(t,"forecolor","forecolor","Text color",c),bD(t,"backcolor","hilitecolor","Background color",d)},vD=(t,s,a,c,d,h,v,E)=>{const T=eT(s),N=rz(s,a,c,d!=="color"?"normal":"color",h,v,E);return B4(t,T,N,c,{menuType:d})},rz=(t,s,a,c,d,h,v)=>Bi(Ke(t,E=>E.type==="choiceitem"?SH(E).fold(bg,T=>R.some(FH(T,a===1,c,s,h(T.value),d,v,eT(t)))):R.none())),ET=(t,s)=>{const a=sf(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?Vs(d.element,"[aria-checked=true]"):R.none()}},az=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${k4}`:`.${qE}`}},iz=(t,s)=>{const a=cz(t,s),c=s.colorinput.getColorCols(t.initData.storageKey),d="color",v={...vD(Ot("menu-value"),a,E=>{t.onAction({value:E})},c,d,rm.CLOSE_ON_EXECUTE,t.select.getOr(Pn),s.shared.providers),markers:sf(d),movement:ET(c,d)};return{type:"widget",data:{value:Ot("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[TB.widget(gb.sketch(v))]}},cz=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>gD(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),c=>c.concat(mD(a)))},t$=Ot("cell-over"),n$=Ot("cell-execute"),lz=t=>(s,a)=>t.shared.providers.translate(["{0} columns, {1} rows",a,s]),uz=(t,s,a)=>{const c=v=>Gt(v,t$,{row:t,col:s}),d=v=>Gt(v,n$,{row:t,col:s}),h=(v,E)=>{E.stop(),d(v)};return xa({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:lt([En("insert-table-picker-cell",[Ve(Pd(),cn.focus),Ve(Gi(),d),Ve(Bd(),h),Ve(Ql(),h)]),kn.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),cn.config({onFocus:c})])})},TT=(t,s,a)=>{const c=[];for(let d=0;d<s;d++){const h=[];for(let v=0;v<a;v++){const E=t(d+1,v+1);h.push(uz(d,v,E))}c.push(h)}return c},yD=(t,s,a,c,d)=>{for(let h=0;h<c;h++)for(let v=0;v<d;v++)kn.set(t[h][v],h<=s&&v<=a)},wD=t=>Ie(t,s=>Ke(s,dc)),CD=(t,s)=>$s(`${s}x${t}`),dz={inserttable:(t,s)=>{const d=lz(s),h=TT(d,10,10),v=CD(0,0),E=bo({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[v],behaviours:lt([vn.config({})])});return{type:"widget",data:{value:Ot("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[TB.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:wD(h).concat(E.asSpec()),behaviours:lt([En("insert-table-picker",[No(T=>{vn.set(E.get(T),[v])}),mw(t$,(T,D,N)=>{const{row:L,col:V}=N.event;yD(h,L,V,10,10),vn.set(E.get(T),[CD(L+1,V+1)])}),mw(n$,(T,D,N)=>{const{row:L,col:V}=N.event;t.onAction({numRows:L+1,numColumns:V+1}),Fn(T,d1())})]),qt.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:iz},SD=(t,s)=>vt(dz,t.fancytype).map(a=>a(t,s)),xD=(t,s,a,c=!0,d=!1)=>{const h=d?xb(a.icons):$H(a.icons),v=T=>({isEnabled:()=>!on.isDisabled(T),setEnabled:D=>on.set(T,!D),setIconFill:(D,N)=>{Vs(T.element,`svg path[class="${D}"], rect[class="${D}"]`).each(L=>{xt(L,"fill",N)})},setTooltip:D=>{const N=a.translate(D);_f(T.element,{"aria-label":N,title:N})}}),E=Eb({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:R.none(),ariaLabel:t.text,caret:R.some(h),checkMark:R.none(),shortcutContent:t.shortcut},a,c);return cf({data:Z0(t),getApi:v,enabled:t.enabled,onAction:ee,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},E,s,a)},_T=(t,s,a,c=!0)=>{const d=v=>({isEnabled:()=>!on.isDisabled(v),setEnabled:E=>on.set(v,!E)}),h=Eb({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:R.none(),ariaLabel:t.text,caret:R.none(),checkMark:R.none(),shortcutContent:t.shortcut},a,c);return cf({data:Z0(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},h,s,a)},o$=t=>({type:"separator",dom:{tag:"div",classes:[qE,X7]},components:t.text.map($s).toArray()}),mz=(t,s,a,c=!0)=>{const d=v=>({setActive:E=>{kn.set(v,E)},isActive:()=>kn.isOn(v),isEnabled:()=>!on.isDisabled(v),setEnabled:E=>on.set(v,!E)}),h=Eb({iconContent:t.icon,textContent:t.text,htmlContent:R.none(),ariaLabel:t.text,checkMark:R.some(Vo(a.icons)),caret:R.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,c);return Eo(cf({data:Z0(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},h,s,a),{toggling:{toggleClass:NP,toggleOnExecute:!1,selected:t.active}})},fz=J4,s$=o$,gz=_T,hz=xD,pz=mz,bz=SD,vz=gT;var yz=Object.freeze({__proto__:null,getCoupled:(t,s,a,c)=>a.getOrCreate(t,s,c),getExistingCoupled:(t,s,a,c)=>a.getExisting(t,s,c)}),wz=[Vi("others",Md(xn.value,ur()))],r$=Object.freeze({__proto__:null,init:()=>{const t={},s=(h,v)=>{if(ns(h.others).length===0)throw new Error("Cannot find any known coupled components");return vt(t,v)},a=(h,v,E)=>s(v,E).getOrThunk(()=>{const D=vt(v.others,E).getOrDie("No information found for coupled component: "+E)(h),N=h.getSystem().build(D);return t[E]=N,N}),c=(h,v,E)=>s(v,E).orThunk(()=>(vt(v.others,E).getOrDie("No information found for coupled component: "+E),R.none())),d=ae({});return qi({readState:d,getExisting:c,getOrCreate:a})}});const Ws=xr({fields:wz,name:"coupling",apis:yz,state:r$}),ED=t=>{let s=R.none(),a=[];const c=D=>ED(N=>{d(L=>{N(D(L))})}),d=D=>{v()?T(D):a.push(D)},h=D=>{v()||(s=R.some(D),E(a),a=[])},v=()=>s.isSome(),E=D=>{St(D,T)},T=D=>{s.each(N=>{setTimeout(()=>{D(N)},0)})};return t(h),{get:d,map:c,isReady:v}},Cz={nu:ED,pure:t=>ED(s=>{s(t)})},Sz=t=>{setTimeout(()=>{throw t},0)},up=t=>{const s=T=>{t().then(T,Sz)};return{map:T=>up(()=>t().then(T)),bind:T=>up(()=>t().then(D=>T(D).toPromise())),anonBind:T=>up(()=>t().then(()=>T.toPromise())),toLazy:()=>Cz.nu(s),toCached:()=>{let T=null;return up(()=>(T===null&&(T=t()),T))},toPromise:t,get:s}},Wa={nu:t=>up(()=>new Promise(t)),pure:t=>up(()=>Promise.resolve(t))},a$=ae("sink"),i$=ae(xi({name:a$(),overrides:ae({dom:{tag:"div"},behaviours:lt([Ta.config({useFixed:Rt})]),events:Ho([Id(pl()),Id(dr()),Id(Bd())])})})),c$=(t,s)=>{const a=t.getHotspot(s).getOr(s),c="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:c,hotspot:a,overrides:d}),h=>({type:c,hotspot:a,overrides:d,layouts:h}))},xz=(t,s,a)=>{const c=t.fetch;return c(a).map(s)},Ez=(t,s,a,c,d,h,v)=>{const E=xz(t,s,c),T=l$(c,t);return E.map(D=>D.bind(N=>R.from(ep.sketch({...h.menu(),uid:oh(""),data:N,highlightOnOpen:v,onOpenMenu:(L,V)=>{const j=T().getOrDie();Ta.position(j,V,{anchor:a}),Ln.decloak(d)},onOpenSubmenu:(L,V,j)=>{const Y=T().getOrDie();Ta.position(Y,j,{anchor:{type:"submenu",item:V}}),Ln.decloak(d)},onRepositionMenu:(L,V,j)=>{const Y=T().getOrDie();Ta.position(Y,V,{anchor:a}),St(j,ie=>{Ta.position(Y,ie.triggeredMenu,{anchor:{type:"submenu",item:ie.triggeringItem}})})},onEscape:()=>(cn.focus(c),Ln.close(d),R.some(!0))}))))},kT=(t,s,a,c,d,h,v)=>{const E=c$(t,a);return Ez(t,s,E,a,c,d,v).map(D=>(D.fold(()=>{Ln.isOpen(c)&&Ln.close(c)},N=>{Ln.cloak(c),Ln.open(c,N),h(c)}),c))},Tz=(t,s,a,c,d,h,v)=>(Ln.close(c),Wa.pure(c)),TD=(t,s,a,c,d,h)=>{const v=Ws.getCoupled(a,"sandbox");return(Ln.isOpen(v)?Tz:kT)(t,s,a,v,c,d,h)},_z=(t,s,a)=>{const c=Bn.getCurrent(s).getOr(s),d=ir(t.element);a?bn(c.element,"min-width",d+"px"):Jn(c.element,d)},l$=(t,s)=>t.getSystem().getByUid(s.uid+"-"+a$()).map(a=>()=>xn.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>xn.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),u$=t=>{Ln.getState(t).each(s=>{ep.repositionMenus(s)})},_D=(t,s,a)=>{const c=Xf(),d=(E,T)=>{const D=c$(t,s);c.link(s.element),t.matchWidth&&_z(D.hotspot,T,t.useMinWidth),t.onOpen(D,E,T),a!==void 0&&a.onOpen!==void 0&&a.onOpen(E,T)},h=(E,T)=>{c.unlink(s.element),a!==void 0&&a.onClose!==void 0&&a.onClose(E,T)},v=l$(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:c.id,role:"listbox"}},behaviours:jc.augment(t.sandboxBehaviours,[wt.config({store:{mode:"memory",initialValue:s}}),Ln.config({onOpen:d,onClose:h,isPartOf:(E,T,D)=>Vd(T,D)||Vd(s,D),getAttachPoint:()=>v().getOrDie()}),Bn.config({find:E=>Ln.getState(E).bind(T=>Bn.getCurrent(T))}),wi.config({channels:{...G1({isExtraPart:Pn}),...Hh({doReposition:u$})}})])}},d$=t=>{const s=Ws.getCoupled(t,"sandbox");u$(s)},kD=()=>[xe("sandboxClasses",[]),jc.field("sandboxBehaviours",[Bn,wi,Ln,wt])],kz=ae([We("dom"),We("fetch"),Un("onOpen"),Qi("onExecute"),xe("getHotspot",R.some),xe("getAnchorOverrides",ae({})),Wm(),fr("dropdownBehaviours",[kn,Ws,qt,cn]),We("toggleClass"),xe("eventOrder",{}),go("lazySink"),xe("matchWidth",!1),xe("useMinWidth",!1),go("role")].concat(kD())),Oz=ae([xl({schema:[x1(),xe("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),i$()]),Az=(t,s,a,c)=>{const d=N=>vt(t.dom,"attributes").bind(L=>vt(L,N)),h=N=>{Ln.getState(N).each(L=>{ep.highlightPrimary(L)})},v=(N,L,V)=>TD(t,yt,N,c,L,V),E=N=>{v(N,h,_i.HighlightMenuAndItem).get(ee)},T={expand:N=>{kn.isOn(N)||v(N,ee,_i.HighlightNone).get(ee)},open:N=>{kn.isOn(N)||v(N,ee,_i.HighlightMenuAndItem).get(ee)},refetch:N=>Ws.getExistingCoupled(N,"sandbox").fold(()=>v(N,ee,_i.HighlightMenuAndItem).map(ee),V=>kT(t,yt,N,V,c,ee,_i.HighlightMenuAndItem).map(ee)),isOpen:kn.isOn,close:N=>{kn.isOn(N)&&v(N,ee,_i.HighlightMenuAndItem).get(ee)},repositionMenus:N=>{kn.isOn(N)&&d$(N)}},D=(N,L)=>($d(N),R.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:Ys(t.dropdownBehaviours,[kn.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),Ws.config({others:{sandbox:N=>_D(t,N,{onOpen:()=>kn.on(N),onClose:()=>kn.off(N)})}}),qt.config({mode:"special",onSpace:D,onEnter:D,onDown:(N,L)=>{if(pu.isOpen(N)){const V=Ws.getCoupled(N,"sandbox");h(V)}else pu.open(N);return R.some(!0)},onEscape:(N,L)=>pu.isOpen(N)?(pu.close(N),R.some(!0)):R.none()}),cn.config({})]),events:om(R.some(E)),eventOrder:{...t.eventOrder,[Gi()]:["disabling","toggling","alloy.base.behaviour"]},apis:T,domModification:{attributes:{"aria-haspopup":"true",...t.role.fold(()=>({}),N=>({role:N})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},pu=ka({name:"Dropdown",configFields:kz(),partFields:Oz(),factory:Az,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),Dz=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},Rz=t=>{const s=wt.getValue(t),a=V0(t).map(M4);pu.refetch(s).get(()=>{const c=Ws.getCoupled(s,"sandbox");a.each(d=>V0(c).each(h=>sH(h,d)))})},Mz=(t,s)=>{Nz(t).each(a=>{Zk(t,a.element,s.event.eventType,s.event.interactionEvent)})},Nz=t=>Ln.getState(t).bind(ro.getHighlighted).bind(ro.getHighlighted),Pz=t=>mr(t.element,JE)?R.some(t.element):Vs(t.element,"."+JE),OD=(t,s,a)=>{XE(t).each(c=>{ZP(c,a),Pz(s).each(h=>{Hr(h,"id").each(v=>xt(c.element,"aria-controls",v))})}),xt(a.element,"aria-selected","true")},Bz=(t,s,a)=>{xt(a.element,"aria-selected","false")},$z=t=>{XE(t).each(s=>cn.focus(s))},Iz=t=>Ws.getExistingCoupled(t,"sandbox").bind(V0).map(M4).map(a=>a.fetchPattern).getOr("");var CS;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(CS||(CS={}));const Fz=(t,s,a,c,d)=>{const h=a.shared.providers,v=E=>d?{...E,shortcut:R.none(),icon:E.text.isSome()?R.none():E.icon}:E;switch(t.type){case"menuitem":return _H(t).fold(bg,E=>R.some(gz(v(E),s,h,c)));case"nestedmenuitem":return hB(t).fold(bg,E=>R.some(hz(v(E),s,h,c,d)));case"togglemenuitem":return AH(t).fold(bg,E=>R.some(pz(v(E),s,h,c)));case"separator":return nB(t).fold(bg,E=>R.some(s$(E)));case"fancymenuitem":return EH(t).fold(bg,E=>bz(E,a));default:return console.error("Unknown item in general menu",t),R.none()}},Lz=(t,s,a,c,d,h,v)=>{const E=c===1,T=!E||eT(t);return Bi(Ke(t,D=>{switch(D.type){case"separator":return sB(D).fold(bg,N=>R.some(s$(N)));case"cardmenuitem":return wH(D).fold(bg,N=>R.some(vz({...N,onAction:L=>{N.onAction(L),a(N.value,N.meta)}},d,h,{itemBehaviours:xB(N.meta,h),cardText:{matchText:s,highlightOn:v}})));case"autocompleteitem":default:return lH(D).fold(bg,N=>R.some(fz(N,s,E,"normal",a,d,h,T)))}}))},m$=(t,s,a,c,d,h)=>{const v=eT(s),E=Bi(Ke(s,N=>{const L=j=>d?!no(j,"text"):v,V=j=>Fz(j,a,c,L(j),d);return N.type==="nestedmenuitem"&&N.getSubmenuItems().length<=0?V({...N,enabled:!1}):V(N)})),T=Dz(h);return(d?YP:B4)(t,v,E,1,T)},OT=t=>ep.singleData(t.value,t),Hz=(t,s,a,c)=>{const d=ET(s,c),h=sf(c);return{data:OT({...t,movement:d,menuBehaviours:mS.unnamedEvents(s!=="auto"?[]:[No((v,E)=>{dS(v,4,h.item).each(({numColumns:T,numRows:D})=>{qt.setGridSize(v,D,T)})})])}),menu:{markers:sf(c),fakeFocus:a===CS.ContentFocus}}},zz=(t,s)=>MP(we.fromDom(s.startContainer)).map(a=>{const c=t.createRng();return c.selectNode(a.dom),c}),Vz={register:(t,s)=>{const a=Ot("autocompleter"),c=Jt(!1),d=Jt(!1),h=xa(xs.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:lt([En("dismissAutocompleter",[Ve(Bm(),()=>N()),Ve(g1(),(Ee,he)=>{Hr(he.event.target,"id").each(fe=>xt(we.fromDom(t.getBody()),"aria-activedescendant",fe))})])]),lazySink:s.getSink})),v=()=>xs.isOpen(h),E=d.get,T=()=>{if(v()){xs.hide(h),t.dom.remove(a,!1);const Ee=we.fromDom(t.getBody());Hr(Ee,"aria-owns").filter(he=>he===a).each(()=>{ys(Ee,"aria-owns"),ys(Ee,"aria-activedescendant")})}},D=()=>xs.getContent(h).bind(Ee=>_s(Ee.components(),0)),N=()=>t.execCommand("mceAutocompleterClose"),L=Ee=>{const he=Js(Ee,fe=>R.from(fe.columns)).getOr(1);return Ie(Ee,fe=>{const _e=fe.items;return Lz(_e,fe.matchText,(Xe,Le)=>{const $e=t.selection.getRng();zz(t.dom,$e).each(ct=>{const mt={hide:()=>N(),reload:Tn=>{T(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:Tn})}};c.set(!0),fe.onAction(mt,ct,Xe,Le),c.set(!1)})},he,rm.BUBBLE_TO_SANDBOX,s,fe.highlightOn)})},V=(Ee,he)=>{K7(we.fromDom(t.getBody())).each(fe=>{const _e=Js(Ee,Xe=>R.from(Xe.columns)).getOr(1);xs.showMenuAt(h,{anchor:{type:"node",root:we.fromDom(t.getBody()),node:R.from(fe)}},Hz(B4("autocompleter-value",!0,he,_e,{menuType:"normal"}),_e,CS.ContentFocus,"normal"))}),D().each(ro.highlightFirst)},j=Ee=>{const he=L(Ee);he.length>0?(V(Ee,he),xt(we.fromDom(t.getBody()),"aria-owns",a),t.inline||Y()):T()},Y=()=>{t.dom.get(a)&&t.dom.remove(a,!1);const Ee=t.getDoc().documentElement,he=t.selection.getNode(),fe=Kk(h.element);ei(fe,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${he.offsetTop}px`,left:`${he.offsetLeft}px`}),t.dom.add(Ee,fe.dom),Vs(fe,'[role="menu"]').each(_e=>{eo(_e,"position"),eo(_e,"max-height")})};t.on("AutocompleterStart",({lookupData:Ee})=>{d.set(!0),c.set(!1),j(Ee)}),t.on("AutocompleterUpdate",({lookupData:Ee})=>j(Ee)),t.on("AutocompleterEnd",()=>{T(),d.set(!1),c.set(!1)});const ie={cancelIfNecessary:N,isMenuOpen:v,isActive:E,isProcessingAction:c.get,getMenu:D};E4.setup(ie,t)}},f$=["visible","hidden","clip"],g$=t=>al(t).length>0&&!yo(f$,t),AD=t=>{if(ku(t)){const s=Ds(t,"overflow-x"),a=Ds(t,"overflow-y");return g$(s)||g$(a)}else return!1},Uz=t=>{const s=Px(t,AD),a=s.length===0?Oo(t).map(es).map(c=>Px(c,AD)).getOr([]):s;return Jr(a).map(c=>({element:c,others:a.slice(1)}))},dp=(t,s)=>pg(t)?Uz(s):R.none(),G0=t=>{const s=[...Ke(t.others,ws),Ur()];return Yy(ws(t.element),s)},SS=(t,s,a)=>nu(t,s,a).isSome(),h$=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...h)=>{a=setTimeout(()=>{t.apply(null,h),a=null},s)}}},p$=5,Wz=400,b$=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?R.none():R.some(s.touches[0])},Zz=(t,s)=>{const a=Math.abs(t.clientX-s.x),c=Math.abs(t.clientY-s.y);return a>p$||c>p$},jz=t=>{const s=Dn(),a=Jt(!1),c=h$(D=>{t.triggerEvent(iw(),D),a.set(!0)},Wz),d=D=>(b$(D).each(N=>{c.cancel();const L={x:N.clientX,y:N.clientY,target:D.target};c.schedule(D),a.set(!1),s.set(L)}),R.none()),h=D=>(c.cancel(),b$(D).each(N=>{s.on(L=>{Zz(N,L)&&s.clear()})}),R.none()),v=D=>{c.cancel();const N=L=>wo(L.target,D.target);return s.get().filter(N).map(L=>a.get()?(D.prevent(),!1):t.triggerEvent(Ql(),D))},E=ia([{key:zu(),value:d},{key:Yg(),value:h},{key:Hf(),value:v}]);return{fireIfReady:(D,N)=>vt(E,N).bind(L=>L(D))}},Gz=t=>t.raw.which===OA[0]&&!yo(["input","textarea"],Ja(t.target))&&!SS(t.target,'[contenteditable="true"]'),qz=(t,s)=>{const a={stopBackspace:!0,...s},c=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=jz(a),h=Ke(c.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),j=>za(t,j,Y=>{d.fireIfReady(Y,j).each(Ee=>{Ee&&Y.kill()}),a.triggerEvent(j,Y)&&Y.kill()})),v=Dn(),E=za(t,"paste",j=>{d.fireIfReady(j,"paste").each(ie=>{ie&&j.kill()}),a.triggerEvent("paste",j)&&j.kill(),v.set(setTimeout(()=>{a.triggerEvent(Uf(),j)},0))}),T=za(t,"keydown",j=>{a.triggerEvent("keydown",j)?j.kill():a.stopBackspace&&Gz(j)&&j.prevent()}),D=za(t,"focusin",j=>{a.triggerEvent("focusin",j)&&j.kill()}),N=Dn(),L=za(t,"focusout",j=>{a.triggerEvent("focusout",j)&&j.kill(),N.set(setTimeout(()=>{a.triggerEvent(Mm(),j)},0))});return{unbind:()=>{St(h,j=>{j.unbind()}),T.unbind(),D.unbind(),L.unbind(),E.unbind(),v.on(clearTimeout),N.on(clearTimeout)}}},v$=(t,s)=>{const a=vt(t,"target").getOr(s);return Jt(a)},Kz=(t,s)=>{const a=Jt(!1),c=Jt(!1);return{stop:()=>{a.set(!0)},cut:()=>{c.set(!0)},isStopped:a.get,isCut:c.get,event:t,setSource:s.set,getSource:s.get}},y$=t=>{const s=Jt(!1);return{stop:()=>{s.set(!0)},cut:ee,isStopped:s.get,isCut:Pn,event:t,setSource:ue("Cannot set source of a broadcasted event"),getSource:ue("Cannot get source of a broadcasted event")}},xS=Zi.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),w$=(t,s,a,c,d,h)=>{const v=t(s,c),E=Kz(a,d);return v.fold(()=>(h.logEventNoHandlers(s,c),xS.complete()),T=>{const D=T.descHandler;return ih(D)(E),E.isStopped()?(h.logEventStopped(s,T.element,D.purpose),xS.stopped()):E.isCut()?(h.logEventCut(s,T.element,D.purpose),xS.complete()):oa(T.element).fold(()=>(h.logNoParent(s,T.element,D.purpose),xS.complete()),L=>(h.logEventResponse(s,T.element,D.purpose),xS.resume(L)))})},C$=(t,s,a,c,d,h)=>w$(t,s,a,c,d,h).fold(Rt,v=>C$(t,s,a,v,d,h),Pn),Yz=(t,s,a,c,d)=>{const h=v$(a,c);return w$(t,s,a,c,h,d)},Xz=(t,s,a)=>{const c=y$(s);return St(t,d=>{const h=d.descHandler;ih(h)(c)}),c.isStopped()},DD=(t,s,a,c)=>S$(t,s,a,a.target,c),S$=(t,s,a,c,d)=>{const h=v$(a,c);return C$(t,s,a,c,h,d)},Jz=(t,s)=>({element:t,descHandler:s}),Qz=(t,s)=>({id:t,descHandler:s}),x$=()=>{const t={},s=(v,E,T)=>{Xo(T,(D,N)=>{const L=t[N]!==void 0?t[N]:{};L[E]=ww(D,v),t[N]=L})},a=(v,E)=>v1(E).bind(T=>vt(v,T)).map(T=>Jz(E,T));return{registerId:s,unregisterId:v=>{Xo(t,(E,T)=>{no(E,v)&&delete E[v]})},filterByType:v=>vt(t,v).map(E=>Cd(E,(T,D)=>Qz(D,T))).getOr([]),find:(v,E,T)=>vt(t,E).bind(D=>Lf(T,N=>a(D,N),v))}},E$=()=>{const t=x$(),s={},a=D=>{const N=D.element;return v1(N).getOrThunk(()=>Gf("uid-",D.element))},c=(D,N)=>{const L=s[N];if(L===D)h(D);else throw new Error('The tagId "'+N+'" is already used by: '+Zu(L.element)+`
Cannot use it for: `+Zu(D.element)+`
The conflicting element is`+(Xn(L.element)?" ":" not ")+"already in the DOM")},d=D=>{const N=a(D);Qr(s,N)&&c(D,N);const L=[D];t.registerId(L,N,D.events),s[N]=D},h=D=>{v1(D.element).each(N=>{delete s[N],t.unregisterId(N)})};return{find:(D,N,L)=>t.find(D,N,L),filter:D=>t.filterByType(D),register:d,unregister:h,getById:D=>vt(s,D)}},im=ec({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:Yd(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[xe("components",[]),fr("containerBehaviours",[]),xe("events",{}),xe("domModification",{}),xe("eventOrder",{})]}),AT=t=>{const s=he=>oa(t.element).fold(Rt,fe=>wo(he,fe)),a=E$(),c=(he,fe)=>a.find(s,he,fe),d=qz(t.element,{triggerEvent:(he,fe)=>zv(he,fe.target,_e=>DD(c,he,fe,_e))}),h={debugInfo:ae("real"),triggerEvent:(he,fe,_e)=>{zv(he,fe,Xe=>S$(c,he,_e,fe,Xe))},triggerFocus:(he,fe)=>{v1(he).fold(()=>{Ci(he)},_e=>{zv(Jl(),he,Xe=>(Yz(c,Jl(),{originator:fe,kill:ee,prevent:ee,target:he},he,Xe),!1))})},triggerEscape:(he,fe)=>{h.triggerEvent("keydown",he.element,fe.event)},getByUid:he=>ie(he),getByDom:he=>Ee(he),build:xa,buildOrPatch:Fv,addToGui:he=>{T(he)},removeFromGui:he=>{D(he)},addToWorld:he=>{v(he)},removeFromWorld:he=>{E(he)},broadcast:he=>{V(he)},broadcastOn:(he,fe)=>{j(he,fe)},broadcastEvent:(he,fe)=>{Y(he,fe)},isConnected:Rt},v=he=>{he.connect(h),na(he.element)||(a.register(he),St(he.components(),v),h.triggerEvent(Nm(),he.element,{target:he.element}))},E=he=>{na(he.element)||(St(he.components(),E),a.unregister(he)),he.disconnect()},T=he=>{Xm(t,he)},D=he=>{ed(he)},N=()=>{d.unbind(),zc(t.element)},L=he=>{const fe=a.filter(Wf());St(fe,_e=>{const Xe=_e.descHandler;ih(Xe)(he)})},V=he=>{L({universal:!0,data:he})},j=(he,fe)=>{L({universal:!1,channels:he,data:fe})},Y=(he,fe)=>{const _e=a.filter(he);return Xz(_e,fe)},ie=he=>a.getById(he).fold(()=>xn.error(new Error('Could not find component with uid: "'+he+'" in system.')),xn.value),Ee=he=>{const fe=v1(he).getOr("not found");return ie(fe)};return v(t),{root:t,element:t.element,destroy:N,add:T,remove:D,getByUid:ie,getByDom:Ee,addToWorld:v,removeFromWorld:E,broadcast:V,broadcastOn:j,broadcastEvent:Y}},eV=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Ke(t.items,s.interpreter)}),tV=ae([xe("prefix","form-field"),fr("fieldBehaviours",[Bn,wt])]),nV=ae([xi({schema:[We("dom")],name:"label"}),xi({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[We("text")],name:"aria-descriptor"}),_a({factory:{sketch:t=>{const s=u1(t,["factory"]);return t.factory.sketch(s)}},schema:[We("factory")],name:"field"})]),oV=(t,s,a,c)=>{const d=Ys(t.fieldBehaviours,[Bn.config({find:E=>Po(E,t,"field")}),wt.config({store:{mode:"manual",getValue:E=>Bn.getCurrent(E).bind(wt.getValue),setValue:(E,T)=>{Bn.getCurrent(E).each(D=>{wt.setValue(D,T)})}}})]),h=Ho([No((E,T)=>{const D=sE(E,t,["label","field","aria-descriptor"]);D.field().each(N=>{const L=Ot(t.prefix);D.label().each(V=>{xt(V.element,"for",L),xt(N.element,"id",L)}),D["aria-descriptor"]().each(V=>{const j=Ot(t.prefix);xt(V.element,"id",j),xt(N.element,"aria-describedby",j)})})})]),v={getField:E=>Po(E,t,"field"),getLabel:E=>Po(E,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:h,apis:v}},vo=ka({name:"FormField",configFields:tV(),partFields:nV(),factory:oV,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var DT=Object.freeze({__proto__:null,exhibit:(t,s)=>Ki({attributes:ia([{key:s.tabAttr,value:"true"}])})}),sV=[xe("tabAttr","data-alloy-tabstop")];const as=xr({fields:sV,name:"tabstopping",active:DT});var rV=tinymce.util.Tools.resolve("tinymce.html.Entities");const ES=(t,s,a,c)=>{const d=iV(t,s,a,c);return vo.sketch(d)},aV=(t,s)=>ES(t,s,[],[]),iV=(t,s,a,c)=>({dom:TS(a),components:t.toArray().concat([s]),fieldBehaviours:lt(c)}),XK=()=>TS([]),TS=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),bu=(t,s)=>vo.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[$s(s.translate(t))]}),Sc=Ot("form-component-change"),q0=Ot("form-close"),mp=Ot("form-cancel"),uf=Ot("form-action"),_S=Ot("form-submit"),RD=Ot("form-block"),MD=Ot("form-unblock"),T$=Ot("form-tabchange"),_$=Ot("form-resize"),cV=(t,s,a)=>{const c=t.label.map(j=>bu(j,s)),d=s.icons(),h=j=>{var Y;return(Y=d[j])!==null&&Y!==void 0?Y:j},v=j=>(Y,ie)=>{nu(ie.event.target,"[data-collection-item-value]").each(Ee=>{j(Y,ie,Ee,As(Ee,"data-collection-item-value"))})},E=(j,Y)=>{const ie=Ke(Y,fe=>{const _e=yc.translate(fe.text),Xe=t.columns===1?`<div class="tox-collection__item-label">${_e}</div>`:"",Le=`<div class="tox-collection__item-icon">${h(fe.icon)}</div>`,$e={_:" "," - ":" ","-":" "},ct=_e.replace(/\_| \- |\-/g,Tn=>$e[Tn]);return`<div class="tox-collection__item${s.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${rV.encodeAllRaw(fe.value)}" title="${ct}" aria-label="${ct}">${Le}${Xe}</div>`}),Ee=t.columns!=="auto"&&t.columns>1?Fr(ie,t.columns):[ie],he=Ke(Ee,fe=>`<div class="tox-collection__group">${fe.join("")}</div>`);Zf(j.element,he.join(""))},T=v((j,Y,ie,Ee)=>{Y.stop(),s.isDisabled()||Gt(j,uf,{name:t.name,value:Ee})}),D=[Ve(Pd(),v((j,Y,ie)=>{Ci(ie)})),Ve(Bd(),T),Ve(Ql(),T),Ve(ji(),v((j,Y,ie)=>{Vs(j.element,"."+sp).each(Ee=>{ps(Ee,sp)}),zs(ie,sp)})),Ve(bv(),v(j=>{Vs(j.element,"."+sp).each(Y=>{ps(Y,sp)})})),bl(v((j,Y,ie,Ee)=>{Gt(j,uf,{name:t.name,value:Ee})}))],N=(j,Y)=>Ke(Er(j.element,".tox-collection__item"),Y),L=vo.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:yt},behaviours:lt([on.config({disabled:s.isDisabled,onDisabled:j=>{N(j,Y=>{zs(Y,"tox-collection__item--state-disabled"),xt(Y,"aria-disabled",!0)})},onEnabled:j=>{N(j,Y=>{ps(Y,"tox-collection__item--state-disabled"),ys(Y,"aria-disabled")})}}),Nr(),vn.config({}),wt.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(j,Y)=>{E(j,Y),t.columns==="auto"&&dS(j,5,"tox-collection__item").each(({numRows:ie,numColumns:Ee})=>{qt.setGridSize(j,ie,Ee)}),Fn(j,_$)}}),as.config({}),qt.config(az(t.columns,"normal")),En("collection-events",D)]),eventOrder:{[Gi()]:["disabling","alloy.base.behaviour","collection-events"]}});return ES(c,L,["tox-form__group--collection"],[])},lV=["input","textarea"],k$=t=>{const s=Ja(t);return yo(lV,s)},O$=(t,s)=>{const a=s.getRoot(t).getOr(t.element);ps(a,s.invalidClass),s.notify.each(c=>{k$(t.element)&&xt(t.element,"aria-invalid",!1),c.getContainer(t).each(d=>{Zf(d,c.validHtml)}),c.onValid(t)})},ND=(t,s,a,c)=>{const d=s.getRoot(t).getOr(t.element);zs(d,s.invalidClass),s.notify.each(h=>{k$(t.element)&&xt(t.element,"aria-invalid",!0),h.getContainer(t).each(v=>{Zf(v,c)}),h.onInvalid(t,c)})},Tb=(t,s,a)=>s.validator.fold(()=>Wa.pure(xn.value(!0)),c=>c.validate(t)),Sg=(t,s,a)=>(s.notify.each(c=>{c.onValidate(t)}),Tb(t,s).map(c=>t.getSystem().isConnected()?c.fold(d=>(ND(t,s,a,d),xn.error(d)),d=>(O$(t,s),xn.value(d))):xn.error("No longer in system")));var A$=Object.freeze({__proto__:null,markValid:O$,markInvalid:ND,query:Tb,run:Sg,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return mr(a,s.invalidClass)}}),RT=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>Ho([Ve(a.onEvent,c=>{Sg(c,t,s).get(yt)})].concat(a.validateOnLoad?[No(c=>{Sg(c,t,s).get(ee)})]:[]))).getOr({})}),dV=[We("invalidClass"),xe("getRoot",R.none),pi("notify",[xe("aria","alert"),xe("getContainer",R.none),xe("validHtml",""),Un("onValid"),Un("onInvalid"),Un("onValidate")]),pi("validator",[We("validate"),xe("onEvent","input"),xe("validateOnLoad",!0)])];const Ol=xr({fields:dV,name:"invalidating",active:RT,apis:A$,extra:{validation:t=>s=>{const a=wt.getValue(s);return Wa.pure(t(a))}}});var mV=Object.freeze({__proto__:null,events:()=>Ho([lw(F2(),Rt)]),exhibit:()=>Ki({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const kS=xr({fields:[],name:"unselecting",active:mV}),fV=(t,s)=>pu.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:lt([kl.button(s.providers.isDisabled),Nr(),kS.config({}),as.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>Wa.nu(c=>t.fetch(c)).map(c=>R.from(OT(Eo(vD(Ot("menu-value"),c,d=>{t.onItemAction(a,d)},t.columns,t.presets,rm.CLOSE_ON_EXECUTE,Pn,s.providers),{movement:ET(t.columns,t.presets)})))),parts:{menu:z0(!1,1,t.presets)}}),D$=Ot("color-input-change"),R$=Ot("color-swatch-change"),OS=Ot("color-picker-cancel"),gV=(t,s,a,c)=>{const d=vo.parts.field({factory:vb,inputClasses:["tox-textfield"],data:c,onSetValue:D=>Ol.run(D).get(ee),inputBehaviours:lt([on.config({disabled:s.providers.isDisabled}),Nr(),as.config({}),Ol.config({invalidClass:"tox-textbox-field-invalid",getRoot:D=>Fi(D.element),notify:{onValid:D=>{const N=wt.getValue(D);Gt(D,D$,{color:N})}},validator:{validateOnLoad:!1,validate:D=>{const N=wt.getValue(D);if(N.length===0)return Wa.pure(xn.value(!0));{const L=we.fromTag("span");bn(L,"background-color",N);const V=qs(L,"background-color").fold(()=>xn.error("blah"),j=>xn.value(N));return Wa.pure(V)}}}})]),selectOnFocus:!1}),h=t.label.map(D=>bu(D,s.providers)),v=(D,N)=>{Gt(D,R$,{value:N})},E=(D,N)=>{T.getOpt(D).each(L=>{N==="custom"?a.colorPicker(V=>{V.fold(()=>Fn(L,OS),j=>{v(L,j),lD(t.storageKey,j)})},"#ffffff"):N==="remove"?v(L,""):v(L,N)})},T=bo(fV({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[ua,Cr,Sr],onLtr:()=>[Cr,ua,Sr]},components:[],fetch:YB(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:E},s));return vo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:h.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,T.asSpec()]}]),fieldBehaviours:lt([En("form-field-events",[Ve(D$,(D,N)=>{T.getOpt(D).each(L=>{bn(L.element,"background-color",N.event.color)}),Gt(D,Sc,{name:t.name})}),Ve(R$,(D,N)=>{vo.getField(D).each(L=>{wt.setValue(L,N.event.value),Bn.getCurrent(D).each(cn.focus)})}),Ve(OS,(D,N)=>{vo.getField(D).each(L=>{Bn.getCurrent(D).each(cn.focus)})})])])})},PD=xi({schema:[We("dom")],name:"label"}),fp=t=>xi({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),c=>({events:Ho([Ev(zu(),(d,h,v)=>c(d,v),[s]),Ev(dr(),(d,h,v)=>c(d,v),[s]),Ev(Xg(),(d,h,v)=>{v.mouseIsDown.get()&&c(d,v)},[s])])}))}),hV=fp("top-left"),pV=fp("top"),M$=fp("top-right"),bV=fp("right"),vV=fp("bottom-right"),yV=fp("bottom"),N$=fp("bottom-left"),wV=fp("left"),CV=_a({name:"thumb",defaults:ae({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:Ho([th(zu(),t,"spectrum"),th(Yg(),t,"spectrum"),th(Hf(),t,"spectrum"),th(dr(),t,"spectrum"),th(Xg(),t,"spectrum"),th(rw(),t,"spectrum")])})}),NT=t=>nm(t.event),SV=_a({schema:[Ls("mouseIsDown",()=>Jt(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,c=(d,h)=>a.getValueFromEvent(h).map(v=>a.setValueFrom(d,t,v));return{behaviours:lt([qt.config({mode:"special",onLeft:(d,h)=>a.onLeft(d,t,NT(h)),onRight:(d,h)=>a.onRight(d,t,NT(h)),onUp:(d,h)=>a.onUp(d,t,NT(h)),onDown:(d,h)=>a.onDown(d,t,NT(h))}),as.config({}),cn.config({})]),events:Ho([Ve(zu(),c),Ve(Yg(),c),Ve(dr(),c),Ve(Xg(),(d,h)=>{t.mouseIsDown.get()&&c(d,h)})])}}});var xV=[PD,wV,bV,pV,yV,hV,M$,N$,vV,CV,SV];const K0=ae("slider.change.value"),TV=t=>t.type.indexOf("touch")!==-1,BD=t=>{const s=t.event.raw;if(TV(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?R.some(a.touches[0]).map(c=>io(c.clientX,c.clientY)):R.none()}else{const a=s;return a.clientX!==void 0?R.some(a).map(c=>io(c.clientX,c.clientY)):R.none()}},_V="top",kV="right",OV="bottom",P$="left",cd=t=>t.model.minX,_b=t=>t.model.minY,PT=t=>t.model.minX-1,BT=t=>t.model.minY-1,df=t=>t.model.maxX,ci=t=>t.model.maxY,Y0=t=>t.model.maxX+1,AS=t=>t.model.maxY+1,B$=(t,s,a)=>s(t)-a(t),$D=t=>B$(t,df,cd),ID=t=>B$(t,ci,_b),$$=t=>$D(t)/2,FD=t=>ID(t)/2,kb=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,I$=t=>t.snapToGrid,F$=t=>t.snapStart,LD=t=>t.rounded,$T=(t,s)=>t[s+"-edge"]!==void 0,HD=t=>$T(t,P$),zD=t=>$T(t,kV),VD=t=>$T(t,_V),L$=t=>$T(t,OV),xg=t=>t.model.value.get(),gp=(t,s)=>({x:t,y:s}),ld=(t,s)=>{Gt(t,K0(),{value:s})},AV=(t,s)=>{ld(t,gp(PT(s),BT(s)))},DV=(t,s)=>{ld(t,BT(s))},UD=(t,s)=>{ld(t,gp($$(s),BT(s)))},RV=(t,s)=>{ld(t,gp(Y0(s),BT(s)))},H$=(t,s)=>{ld(t,Y0(s))},MV=(t,s)=>{ld(t,gp(Y0(s),FD(s)))},NV=(t,s)=>{ld(t,gp(Y0(s),AS(s)))},PV=(t,s)=>{ld(t,AS(s))},BV=(t,s)=>{ld(t,gp($$(s),AS(s)))},$V=(t,s)=>{ld(t,gp(PT(s),AS(s)))},IV=(t,s)=>{ld(t,PT(s))},FV=(t,s)=>{ld(t,gp(PT(s),FD(s)))},IT=(t,s,a,c)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-c),FT=(t,s,a,c)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+c),z$=(t,s,a)=>Math.max(s,Math.min(a,t)),LV=(t,s,a,c,d)=>d.fold(()=>{const h=t-s,v=Math.round(h/c)*c;return z$(s+v,s-1,a+1)},h=>{const v=(t-h)%c,E=Math.round(v/c),T=Math.floor((t-h)/c),D=Math.floor((a-h)/c),N=Math.min(D,T+E),L=h+N*c;return Math.max(h,L)}),HV=(t,s,a)=>Math.min(a,Math.max(t,s))-s,V$=t=>{const{min:s,max:a,range:c,value:d,step:h,snap:v,snapStart:E,rounded:T,hasMinEdge:D,hasMaxEdge:N,minBound:L,maxBound:V,screenRange:j}=t,Y=D?s-1:s,ie=N?a+1:a;if(d<L)return Y;if(d>V)return ie;{const Ee=HV(d,L,V),he=z$(Ee/j*c+s,Y,ie);return v&&he>=s&&he<=a?LV(he,s,a,h,E):T?Math.round(he):he}},U$=t=>{const{min:s,max:a,range:c,value:d,hasMinEdge:h,hasMaxEdge:v,maxBound:E,maxOffset:T,centerMinEdge:D,centerMaxEdge:N}=t;return d<s?h?0:D:d>a?v?E:N:(d-s)/c*T},WD="top",ZD="right",jD="bottom",LT="left",GD="width",zV="height",cm=t=>t.element.dom.getBoundingClientRect(),ud=(t,s)=>t[s],HT=t=>{const s=cm(t);return ud(s,LT)},W$=t=>{const s=cm(t);return ud(s,ZD)},zT=t=>{const s=cm(t);return ud(s,WD)},VT=t=>{const s=cm(t);return ud(s,jD)},mf=t=>{const s=cm(t);return ud(s,GD)},Z$=t=>{const s=cm(t);return ud(s,zV)},X0=(t,s,a)=>(t+s)/2-a,j$=(t,s)=>{const a=cm(t),c=cm(s),d=ud(a,LT),h=ud(a,ZD),v=ud(c,LT);return X0(d,h,v)},UT=(t,s)=>{const a=cm(t),c=cm(s),d=ud(a,WD),h=ud(a,jD),v=ud(c,WD);return X0(d,h,v)},WT=(t,s)=>{Gt(t,K0(),{value:s})},qD=(t,s,a)=>{const c={min:cd(s),max:df(s),range:$D(s),value:a,step:kb(s),snap:I$(s),snapStart:F$(s),rounded:LD(s),hasMinEdge:HD(s),hasMaxEdge:zD(s),minBound:HT(t),maxBound:W$(t),screenRange:mf(t)};return V$(c)},VV=(t,s,a)=>{const c=qD(t,s,a);return WT(t,c),c},G$=(t,s)=>{const a=cd(s);WT(t,a)},UV=(t,s)=>{const a=df(s);WT(t,a)},KD=(t,s,a,c)=>{const h=(t>0?FT:IT)(xg(a),cd(a),df(a),kb(a,c));return WT(s,h),R.some(h)},ZT=t=>(s,a,c)=>KD(t,s,a,c).map(Rt),YD=t=>BD(t).map(a=>a.left),WV=(t,s,a,c,d)=>{const v=mf(t),E=c.bind(N=>R.some(j$(N,t))).getOr(0),T=d.bind(N=>R.some(j$(N,t))).getOr(v),D={min:cd(s),max:df(s),range:$D(s),value:a,hasMinEdge:HD(s),hasMaxEdge:zD(s),minBound:HT(t),maxBound:W$(t),maxOffset:v,centerMinEdge:E,centerMaxEdge:T};return U$(D)},xc=(t,s,a,c,d,h)=>{const v=WV(s,h,a,c,d);return HT(s)-HT(t)+v},ZV=(t,s,a,c)=>{const d=xg(a),h=xc(t,c.getSpectrum(t),d,c.getLeftEdge(t),c.getRightEdge(t),a),v=ir(s.element)/2;bn(s.element,"left",h-v+"px")},jV=ZT(-1),q$=ZT(1),K$=R.none,GV=R.none,qV={"top-left":R.none(),top:R.none(),"top-right":R.none(),right:R.some(H$),"bottom-right":R.none(),bottom:R.none(),"bottom-left":R.none(),left:R.some(IV)};var KV=Object.freeze({__proto__:null,setValueFrom:VV,setToMin:G$,setToMax:UV,findValueOfOffset:qD,getValueFromEvent:YD,findPositionOfValue:xc,setPositionFromValue:ZV,onLeft:jV,onRight:q$,onUp:K$,onDown:GV,edgeActions:qV});const jT=(t,s)=>{Gt(t,K0(),{value:s})},XD=(t,s,a)=>{const c={min:_b(s),max:ci(s),range:ID(s),value:a,step:kb(s),snap:I$(s),snapStart:F$(s),rounded:LD(s),hasMinEdge:VD(s),hasMaxEdge:L$(s),minBound:zT(t),maxBound:VT(t),screenRange:Z$(t)};return V$(c)},YV=(t,s,a)=>{const c=XD(t,s,a);return jT(t,c),c},XV=(t,s)=>{const a=_b(s);jT(t,a)},Y$=(t,s)=>{const a=ci(s);jT(t,a)},JV=(t,s,a,c)=>{const h=(t>0?FT:IT)(xg(a),_b(a),ci(a),kb(a,c));return jT(s,h),R.some(h)},X$=t=>(s,a,c)=>JV(t,s,a,c).map(Rt),QV=t=>BD(t).map(a=>a.top),J$=(t,s,a,c,d)=>{const v=Z$(t),E=c.bind(N=>R.some(UT(N,t))).getOr(0),T=d.bind(N=>R.some(UT(N,t))).getOr(v),D={min:_b(s),max:ci(s),range:ID(s),value:a,hasMinEdge:VD(s),hasMaxEdge:L$(s),minBound:zT(t),maxBound:VT(t),maxOffset:v,centerMinEdge:E,centerMaxEdge:T};return U$(D)},DS=(t,s,a,c,d,h)=>{const v=J$(s,h,a,c,d);return zT(s)-zT(t)+v},e9=(t,s,a,c)=>{const d=xg(a),h=DS(t,c.getSpectrum(t),d,c.getTopEdge(t),c.getBottomEdge(t),a),v=ms(s.element)/2;bn(s.element,"top",h-v+"px")},JD=R.none,J0=R.none,Q$=X$(-1),eI=X$(1),tI={"top-left":R.none(),top:R.some(DV),"top-right":R.none(),right:R.none(),"bottom-right":R.none(),bottom:R.some(PV),"bottom-left":R.none(),left:R.none()};var t9=Object.freeze({__proto__:null,setValueFrom:YV,setToMin:XV,setToMax:Y$,findValueOfOffset:XD,getValueFromEvent:QV,findPositionOfValue:DS,setPositionFromValue:e9,onLeft:JD,onRight:J0,onUp:Q$,onDown:eI,edgeActions:tI});const GT=(t,s)=>{Gt(t,K0(),{value:s})},Ob=(t,s)=>({x:t,y:s}),n9=(t,s,a)=>{const c=qD(t,s,a.left),d=XD(t,s,a.top),h=Ob(c,d);return GT(t,h),h},o9=(t,s,a,c,d)=>{const h=t>0?FT:IT,v=s?xg(c).x:h(xg(c).x,cd(c),df(c),kb(c,d)),E=s?h(xg(c).y,_b(c),ci(c),kb(c,d)):xg(c).y;return GT(a,Ob(v,E)),R.some(v)},RS=(t,s)=>(a,c,d)=>o9(t,s,a,c,d).map(Rt),nI=(t,s)=>{const a=cd(s),c=_b(s);GT(t,Ob(a,c))},QD=(t,s)=>{const a=df(s),c=ci(s);GT(t,Ob(a,c))},oI=t=>BD(t),nc=(t,s,a,c)=>{const d=xg(a),h=xc(t,c.getSpectrum(t),d.x,c.getLeftEdge(t),c.getRightEdge(t),a),v=DS(t,c.getSpectrum(t),d.y,c.getTopEdge(t),c.getBottomEdge(t),a),E=ir(s.element)/2,T=ms(s.element)/2;bn(s.element,"left",h-E+"px"),bn(s.element,"top",v-T+"px")},sI=RS(-1,!1),s9=RS(1,!1),r9=RS(-1,!0),rI=RS(1,!0),a9={"top-left":R.some(AV),top:R.some(UD),"top-right":R.some(RV),right:R.some(MV),"bottom-right":R.some(NV),bottom:R.some(BV),"bottom-left":R.some($V),left:R.some(FV)};var i9=Object.freeze({__proto__:null,setValueFrom:n9,setToMin:nI,setToMax:QD,getValueFromEvent:oI,setPositionFromValue:nc,onLeft:sI,onRight:s9,onUp:r9,onDown:rI,edgeActions:a9});const c9=[xe("stepSize",1),xe("speedMultiplier",10),xe("onChange",ee),xe("onChoose",ee),xe("onInit",ee),xe("onDragStart",ee),xe("onDragEnd",ee),xe("snapToGrid",!1),xe("rounded",!0),go("snapStart"),Vi("model",Vn("mode",{x:[xe("minX",0),xe("maxX",100),Ls("value",t=>Jt(t.mode.minX)),We("getInitialValue"),To("manager",KV)],y:[xe("minY",0),xe("maxY",100),Ls("value",t=>Jt(t.mode.minY)),We("getInitialValue"),To("manager",t9)],xy:[xe("minX",0),xe("maxX",100),xe("minY",0),xe("maxY",100),Ls("value",t=>Jt({x:t.mode.minX,y:t.mode.minY})),We("getInitialValue"),To("manager",i9)]})),fr("sliderBehaviours",[qt,wt]),Ls("mouseIsDown",()=>Jt(!1))],Aa=ka({name:"Slider",configFields:c9,partFields:xV,factory:(t,s,a,c)=>{const d=Le=>Jd(Le,t,"thumb"),h=Le=>Jd(Le,t,"spectrum"),v=Le=>Po(Le,t,"left-edge"),E=Le=>Po(Le,t,"right-edge"),T=Le=>Po(Le,t,"top-edge"),D=Le=>Po(Le,t,"bottom-edge"),N=t.model,L=N.manager,V=(Le,$e)=>{L.setPositionFromValue(Le,$e,t,{getLeftEdge:v,getRightEdge:E,getTopEdge:T,getBottomEdge:D,getSpectrum:h})},j=(Le,$e)=>{N.value.set($e);const ct=d(Le);V(Le,ct)},Y=(Le,$e)=>{j(Le,$e);const ct=d(Le);return t.onChange(Le,ct,$e),R.some(!0)},ie=Le=>{L.setToMin(Le,t)},Ee=Le=>{L.setToMax(Le,t)},he=Le=>{const $e=()=>{Po(Le,t,"thumb").each(mt=>{const Tn=N.value.get();t.onChoose(Le,mt,Tn)})},ct=t.mouseIsDown.get();t.mouseIsDown.set(!1),ct&&$e()},fe=(Le,$e)=>{$e.stop(),t.mouseIsDown.set(!0),t.onDragStart(Le,d(Le))},_e=(Le,$e)=>{$e.stop(),t.onDragEnd(Le,d(Le)),he(Le)},Xe=Le=>{Po(Le,t,"spectrum").map(qt.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Ys(t.sliderBehaviours,[qt.config({mode:"special",focusIn:Xe}),wt.config({store:{mode:"manual",getValue:Le=>N.value.get(),setValue:j}}),wi.config({channels:{[wC()]:{onReceive:he}}})]),events:Ho([Ve(K0(),(Le,$e)=>{Y(Le,$e.event.value)}),No((Le,$e)=>{const ct=N.getInitialValue();N.value.set(ct);const mt=d(Le);V(Le,mt);const Tn=h(Le);t.onInit(Le,mt,Tn,N.value.get())}),Ve(zu(),fe),Ve(Hf(),_e),Ve(dr(),(Le,$e)=>{Xe(Le),fe(Le,$e)}),Ve(rw(),_e)]),apis:{resetToMin:ie,resetToMax:Ee,setValue:j,refresh:V},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),MS=Ot("rgb-hex-update"),e3=Ot("slider-update"),NS=Ot("palette-update"),t3=(t,s)=>{const a=Aa.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),c=Aa.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return Aa.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:ae(0)},components:[a,c],sliderBehaviours:lt([cn.config({})]),onChange:(d,h,v)=>{xt(d.element,"aria-valuenow",Math.floor(360-v*3.6)),Gt(d,e3,{value:v})}})},aI="form",u9=[fr("formBehaviours",[wt])],iI=t=>"<alloy.field."+t+">",d9=t=>{const s=(()=>{const h=[];return{field:(E,T)=>(h.push(E),kC(aI,iI(E),T)),record:ae(h)}})(),a=t(s),c=s.record(),d=Ke(c,h=>_a({name:h,pname:iI(h)}));return PC(aI,u9,d,f9,a)},m9=(t,s)=>t.fold(()=>xn.error(s),xn.value),f9=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Ys(t.formBehaviours,[wt.config({store:{mode:"manual",getValue:a=>{const c=AC(a,t);return Jo(c,(d,h)=>d().bind(v=>{const E=Bn.getCurrent(v);return m9(E,new Error(`Cannot find a current component to extract the value from for form part '${h}': `+Zu(v.element)))}).map(wt.getValue))},setValue:(a,c)=>{Xo(c,(d,h)=>{Po(a,t,h).each(v=>{Bn.getCurrent(v).each(E=>{wt.setValue(E,d)})})})}}})]),apis:{getField:(a,c)=>Po(a,t,c).bind(Bn.getCurrent)}}),Q0={getField:qf((t,s,a)=>t.getField(s,a)),sketch:d9},n3=Ot("valid-input"),cI=Ot("invalid-input"),lm=Ot("validating-input"),ey="colorcustom.rgb.",g9=(t,s,a,c)=>{const d=(V,j)=>Ol.config({invalidClass:s("invalid"),notify:{onValidate:Y=>{Gt(Y,lm,{type:V})},onValid:Y=>{Gt(Y,n3,{type:V,value:wt.getValue(Y)})},onInvalid:Y=>{Gt(Y,cI,{type:V,value:wt.getValue(Y)})}},validator:{validate:Y=>{const ie=wt.getValue(Y),Ee=j(ie)?xn.value(!0):xn.error(t("aria.input.invalid"));return Wa.pure(Ee)},validateOnLoad:!1}}),h=(V,j,Y,ie,Ee)=>{const he=t(ey+"range"),fe=vo.parts.label({dom:{tag:"label",attributes:{"aria-label":ie}},components:[$s(Y)]}),_e=vo.parts.field({data:Ee,factory:vb,inputAttributes:{type:"text",...j==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:lt([d(j,V),as.config({})]),onSetValue:ct=>{Ol.isInvalid(ct)&&Ol.run(ct).get(ee)}}),Xe=[fe,_e],Le=j!=="hex"?[vo.parts["aria-descriptor"]({text:he})]:[],$e=Xe.concat(Le);return{dom:{tag:"div",attributes:{role:"presentation"}},components:$e}},v=(V,j)=>{const Y=wg(j);return Q0.getField(V,"hex").each(ie=>{cn.isFocused(ie)||wt.setValue(V,{hex:Y.value})}),Y},E=(V,j)=>{const Y=j.red,ie=j.green,Ee=j.blue;wt.setValue(V,{red:Y,green:ie,blue:Ee})},T=bo({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),D=(V,j)=>{T.getOpt(V).each(Y=>{bn(Y.element,"background-color","#"+j.value)})};return ec({factory:()=>{const V={red:Jt(R.some(255)),green:Jt(R.some(255)),blue:Jt(R.some(255)),hex:Jt(R.some("ffffff"))},j=(ln,ho)=>{const Yt=bS(ho);E(ln,Yt),he(Yt)},Y=ln=>V[ln].get(),ie=(ln,ho)=>{V[ln].set(ho)},Ee=()=>Y("red").bind(ln=>Y("green").bind(ho=>Y("blue").map(Yt=>cp(ln,ho,Yt,1)))),he=ln=>{const ho=ln.red,Yt=ln.green,qn=ln.blue;ie("red",R.some(ho)),ie("green",R.some(Yt)),ie("blue",R.some(qn))},fe=(ln,ho)=>{const Yt=ho.event;Yt.type!=="hex"?ie(Yt.type,R.none()):c(ln)},_e=(ln,ho)=>{a(ln);const Yt=_B(ho);ie("hex",R.some(Yt.value));const qn=bS(Yt);E(ln,qn),he(qn),Gt(ln,MS,{hex:Yt}),D(ln,Yt)},Xe=(ln,ho,Yt)=>{const qn=parseInt(Yt,10);ie(ho,R.some(qn)),Ee().each(ft=>{const Bt=v(ln,ft);Gt(ln,MS,{hex:Bt}),D(ln,Bt)})},Le=ln=>ln.type==="hex",$e=(ln,ho)=>{const Yt=ho.event;Le(Yt)?_e(ln,Yt.value):Xe(ln,Yt.type,Yt.value)},ct=ln=>({label:t(ey+ln+".label"),description:t(ey+ln+".description")}),mt=ct("red"),Tn=ct("green"),$t=ct("blue"),Qt=ct("hex");return Eo(Q0.sketch(ln=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[ln.field("red",vo.sketch(h(tD,"red",mt.label,mt.description,255))),ln.field("green",vo.sketch(h(tD,"green",Tn.label,Tn.description,255))),ln.field("blue",vo.sketch(h(tD,"blue",$t.label,$t.description,255))),ln.field("hex",vo.sketch(h(eD,"hex",Qt.label,Qt.description,"ffffff"))),T.asSpec()],formBehaviours:lt([Ol.config({invalidClass:s("form-invalid")}),En("rgb-form-events",[Ve(n3,$e),Ve(cI,fe),Ve(lm,fe)])])})),{apis:{updateHex:(ln,ho)=>{wt.setValue(ln,{hex:ho.value}),j(ln,ho),D(ln,ho)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(V,j,Y)=>{V.updateHex(j,Y)}},extraApis:{}})},h9=(t,s)=>{const a=Aa.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),c=Aa.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(D,N)=>{const{width:L,height:V}=D,j=D.getContext("2d");if(j===null)return;j.fillStyle=N,j.fillRect(0,0,L,V);const Y=j.createLinearGradient(0,0,L,0);Y.addColorStop(0,"rgba(255,255,255,1)"),Y.addColorStop(1,"rgba(255,255,255,0)"),j.fillStyle=Y,j.fillRect(0,0,L,V);const ie=j.createLinearGradient(0,0,0,V);ie.addColorStop(0,"rgba(0,0,0,0)"),ie.addColorStop(1,"rgba(0,0,0,1)"),j.fillStyle=ie,j.fillRect(0,0,L,V)},h=(D,N)=>{const L=D.components()[0].element.dom,V=yS(N,100,100),j=BB(V);d(L,oD(j))},v=(D,N)=>{const L=yT(bS(N));Aa.setValue(D,{x:L.saturation,y:100-L.value}),xt(D.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",L.saturation,L.value]))};return ec({factory:D=>{const N=ae({x:0,y:0}),L=(Y,ie,Ee)=>{en(Ee)||xt(Y.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(Ee.x),Math.floor(100-Ee.y)])),Gt(Y,NS,{value:Ee})},V=(Y,ie,Ee,he)=>{d(Ee.element.dom,oD(hu))},j=lt([Bn.config({find:R.some}),cn.config({})]);return Aa.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:N},rounded:!1,components:[a,c],onChange:L,onInit:V,sliderBehaviours:j})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(D,N,L)=>{h(N,L)},setThumb:(D,N,L)=>{v(N,L)}},extraApis:{}})},lI=(t,s)=>{const a=d=>{const h=g9(t,s,d.onValidHex,d.onInvalidHex),v=h9(t,s),E=$e=>(100-$e)/100*360,T=$e=>100-$e/360*100,D={paletteRgba:Jt(hu),paletteHue:Jt(0)},N=bo(t3(t,s)),L=bo(v.sketch({})),V=bo(h.sketch({})),j=($e,ct,mt)=>{L.getOpt($e).each(Tn=>{v.setHue(Tn,mt)})},Y=($e,ct)=>{V.getOpt($e).each(mt=>{h.updateHex(mt,ct)})},ie=($e,ct,mt)=>{N.getOpt($e).each(Tn=>{Aa.setValue(Tn,T(mt))})},Ee=($e,ct)=>{L.getOpt($e).each(mt=>{v.setThumb(mt,ct)})},he=($e,ct)=>{const mt=bS($e);D.paletteRgba.set(mt),D.paletteHue.set(ct)},fe=($e,ct,mt,Tn)=>{he(ct,mt),St(Tn,$t=>{$t($e,ct,mt)})},_e=()=>{const $e=[Y];return(ct,mt)=>{const Tn=mt.event.value,$t=D.paletteHue.get(),Qt=yS($t,Tn.x,100-Tn.y),ln=UB(Qt);fe(ct,ln,$t,$e)}},Xe=()=>{const $e=[j,Y];return(ct,mt)=>{const Tn=E(mt.event.value),$t=D.paletteRgba.get(),Qt=yT($t),ln=yS(Tn,Qt.saturation,Qt.value),ho=UB(ln);fe(ct,ho,Tn,$e)}},Le=()=>{const $e=[j,ie,Ee];return(ct,mt)=>{const Tn=mt.event.hex,$t=KH(Tn);fe(ct,Tn,$t.hue,$e)}};return{uid:d.uid,dom:d.dom,components:[L.asSpec(),N.asSpec(),V.asSpec()],behaviours:lt([En("colour-picker-events",[Ve(MS,Le()),Ve(NS,_e()),Ve(e3,Xe())]),Bn.config({find:$e=>V.getOpt($e)}),qt.config({mode:"acyclic"})])}};return ec({name:"ColourPicker",configFields:[We("dom"),xe("onValidHex",ee),xe("onInvalidHex",ee)],factory:a})},Ec={self:()=>Bn.config({find:R.some}),memento:t=>Bn.config({find:t.getOpt}),childAt:t=>Bn.config({find:s=>zl(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},PS=Vt([xe("preprocess",yt),xe("postprocess",yt)]),dI=(t,s)=>{const a=oi("RepresentingConfigs.memento processors",PS,s);return wt.config({store:{mode:"manual",getValue:c=>{const d=t.get(c),h=wt.getValue(d);return a.postprocess(h)},setValue:(c,d)=>{const h=a.preprocess(d),v=t.get(c);wt.setValue(v,h)}}})},hp=(t,s,a)=>wt.config({store:{mode:"manual",...t.map(c=>({initialValue:c})).getOr({}),getValue:s,setValue:a}}),s3=(t,s,a)=>hp(t,c=>s(c.element),(c,d)=>a(c.element,d)),mI=t=>s3(t,gw,Zf),qT=t=>wt.config({store:{mode:"memory",initialValue:t}}),b9={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},v9=t=>s=>W(s)?t.translate(b9[s]):t.translate(s),y9=(t,s,a)=>{const c=T=>"tox-"+T,d=lI(v9(s),c),h=T=>{Gt(T,uf,{name:"hex-valid",value:!0})},v=T=>{Gt(T,uf,{name:"hex-valid",value:!1})},E=bo(d.sketch({dom:{tag:"div",classes:[c("color-picker-container")],attributes:{role:"presentation"}},onValidHex:h,onInvalidHex:v}));return{dom:{tag:"div"},components:[E.asSpec()],behaviours:lt([hp(a,T=>{const D=E.get(T);return Bn.getCurrent(D).bind(V=>wt.getValue(V).hex).map(V=>"#"+ym(V,"#")).getOr("")},(T,D)=>{const N=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,L=R.from(N.exec(D)).bind(Y=>_s(Y,1)),V=E.get(T);Bn.getCurrent(V).fold(()=>{console.log("Can not find form")},Y=>{wt.setValue(Y,{hex:L.getOr("")}),Q0.getField(Y,"hex").each(ie=>{Fn(ie,zf())})})}),Ec.self()])}};var w9=tinymce.util.Tools.resolve("tinymce.Resource");const fI=t=>no(t,"init"),gI=t=>{const s=Dn(),a=bo({dom:{tag:t.tag}}),c=Dn();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:lt([En("custom-editor-events",[No(d=>{a.getOpt(d).each(h=>{(fI(t)?t.init(h.element.dom):w9.load(t.scriptId,t.scriptUrl).then(v=>v(h.element.dom,t.settings))).then(v=>{c.on(E=>{v.setValue(E)}),c.clear(),s.set(v)})})})]),hp(R.none(),()=>s.get().fold(()=>c.get().getOr(""),d=>d.getValue()),(d,h)=>{s.get().fold(()=>c.set(h),v=>v.setValue(h))}),Ec.self()]),components:[a.asSpec()]}};var Eg=tinymce.util.Tools.resolve("tinymce.util.Tools");const hI=(t,s)=>{const a=Eg.explode(s.getOption("images_file_types")),c=d=>kr(a,h=>Ii(d.name.toLowerCase(),`.${h.toLowerCase()}`));return ko(Ka(t),c)},C9=(t,s,a)=>{const c=(V,j)=>{j.stop()},d=V=>(j,Y)=>{St(V,ie=>{ie(j,Y)})},h=(V,j)=>{var Y;if(!on.isDisabled(V)){const ie=j.event.raw;E(V,(Y=ie.dataTransfer)===null||Y===void 0?void 0:Y.files)}},v=(V,j)=>{const Y=j.event.raw.target;E(V,Y.files)},E=(V,j)=>{j&&(wt.setValue(V,hI(j,s)),Gt(V,Sc,{name:t.name}))},T=bo({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:lt([En("input-file-events",[Id(Bd()),Id(Ql())])])}),D=V=>({uid:V.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:lt([qT(a.getOr([])),Ec.self(),on.config({}),kn.config({toggleClass:"dragenter",toggleOnExecute:!1}),En("dropzone-events",[Ve("dragenter",d([c,kn.toggle])),Ve("dragleave",d([c,kn.toggle])),Ve("dragover",c),Ve("drop",d([c,h])),Ve(Qg(),v)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[$s(s.translate("Drop an image here"))]},Yr.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[$s(s.translate("Browse for an image")),T.asSpec()],action:j=>{T.get(j).element.dom.click()},buttonBehaviours:lt([as.config({}),kl.button(s.isDisabled),Nr()])})]}]}),N=t.label.map(V=>bu(V,s)),L=vo.parts.field({factory:{sketch:D}});return ES(N,L,["tox-form__group--stretched"],[])},pI=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:Ke(t.items,s.interpreter)}),BS=(t,s)=>{let a=null,c=null;return{cancel:()=>{pe(a)||(clearTimeout(a),a=null,c=null)},throttle:(...v)=>{c=v,pe(a)&&(a=setTimeout(()=>{const E=c;a=null,c=null,t.apply(null,E)},s))}}},S9=(t,s)=>{let a=null;return{cancel:()=>{pe(a)||(clearTimeout(a),a=null)},throttle:(...h)=>{pe(a)&&(a=setTimeout(()=>{a=null,t.apply(null,h)},s))}}},KT=(t,s)=>{let a=null;const c=()=>{pe(a)||(clearTimeout(a),a=null)};return{cancel:c,throttle:(...h)=>{c(),a=setTimeout(()=>{a=null,t.apply(null,h)},s)}}},r3=Ot("alloy-fake-before-tabstop"),a3=Ot("alloy-fake-after-tabstop"),bI=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:lt([cn.config({ignore:!0}),as.config({})])}),vI=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[bI([r3]),s,bI([a3])],behaviours:lt([Ec.childAt(1)])}),i3=(t,s)=>{Gt(t,pl(),{raw:{which:9,shiftKey:s}})},x9=(t,s)=>{const a=s.element;mr(a,r3)?i3(t,!0):mr(a,a3)&&i3(t,!1)},ty=t=>SS(t,["."+r3,"."+a3].join(","),Pn),ny=Ot("update-dialog"),ff=Ot("update-title"),YT=Ot("update-body"),c3=Ot("update-footer"),l3=Ot("body-send-message"),oy=Ot("dialog-focus-shifted"),XT=dl().browser,pp=XT.isSafari(),yI=XT.isFirefox(),u3=pp||yI,E9=XT.isChromium(),T9=({scrollTop:t,scrollHeight:s,clientHeight:a})=>Math.ceil(t)+a>=s,wI=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),_9=(t,s)=>{const a=t.body;return R.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!E9&&!pp||Je(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:t.documentElement)},CI=(t,s,a)=>{const c=t.dom;R.from(c.contentDocument).fold(a,d=>{let h=0;const v=_9(d,s).map(T=>(h=T.scrollTop,T)).forall(T9),E=()=>{const T=c.contentWindow;Je(T)&&(v?wI(T,"bottom"):!v&&u3&&h!==0&&wI(T,h))};pp&&c.addEventListener("load",E,{once:!0}),d.open(),d.write(s),d.close(),pp||E()})},SI=an(u3,pp?500:200).map(t=>BS(CI,t)),O9=(t,s)=>{const a=Jt(t.getOr(""));return{getValue:c=>a.get(),setValue:(c,d)=>{if(a.get()!==d){const h=c.element,v=()=>xt(h,"srcdoc",d);s?SI.fold(ae(CI),E=>E.throttle)(h,d,v):v()}a.set(d)}}},A9=(t,s,a)=>{const c="tox-dialog__iframe",d=t.transparent?[]:[`${c}--opaque`],h=t.border?["tox-navobj-bordered"]:[],v={...t.label.map(L=>({title:L})).getOr({}),...a.map(L=>({srcdoc:L})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},E=O9(a,t.streamContent),T=t.label.map(L=>bu(L,s)),D=L=>vI(R.from(h),{uid:L.uid,dom:{tag:"iframe",attributes:v,classes:[c,...d]},behaviours:lt([as.config({}),cn.config({}),hp(a,E.getValue,E.setValue),wi.config({channels:{[oy]:{onReceive:(V,j)=>{j.newFocus.each(Y=>{Fi(V.element).each(ie=>{(wo(V.element,Y)?zs:ps)(ie,"tox-navobj-bordered-focus")})})}}}})])}),N=vo.parts.field({factory:{sketch:D}});return ES(T,N,["tox-form__group--stretched"],[])},D9=t=>new Promise((s,a)=>{const c=()=>{h(),s(t)},d=[za(t,"load",c),za(t,"error",()=>{h(),a("Unable to load data from image: "+t.dom.src)})],h=()=>St(d,v=>v.unbind());t.dom.complete&&c()}),JT=(t,s,a,c,d)=>{const h=a*d,v=c*d,E=Math.max(0,t/2-h/2),T=Math.max(0,s/2-v/2);return{left:E.toString()+"px",top:T.toString()+"px",width:h.toString()+"px",height:v.toString()+"px"}},R9=(t,s,a)=>{const c=ir(t),d=ms(t);return Math.min(c/s,d/a,1)},M9=(t,s)=>{const a=Jt(s.getOr({url:""})),c=bo({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(T=>({src:T.url})).getOr({})}}),d=bo({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[c.asSpec()]}),h=(T,D)=>{const N={url:D.url};D.zoom.each(V=>N.zoom=V),D.cachedWidth.each(V=>N.cachedWidth=V),D.cachedHeight.each(V=>N.cachedHeight=V),a.set(N);const L=()=>{const{cachedWidth:V,cachedHeight:j,zoom:Y}=N;if(!je(V)&&!je(j)){if(je(Y)){const Ee=R9(T.element,V,j);N.zoom=Ee}const ie=JT(ir(T.element),ms(T.element),V,j,N.zoom);d.getOpt(T).each(Ee=>{ei(Ee.element,ie)})}};c.getOpt(T).each(V=>{const j=V.element;D.url!==As(j,"src")&&(xt(j,"src",D.url),ps(T.element,"tox-imagepreview__loaded")),L(),D9(j).then(Y=>{T.getSystem().isConnected()&&(zs(T.element,"tox-imagepreview__loaded"),N.cachedWidth=Y.dom.naturalWidth,N.cachedHeight=Y.dom.naturalHeight,L())})})},v={};t.height.each(T=>v.height=T);const E=s.map(T=>({url:T.url,zoom:R.from(T.zoom),cachedWidth:R.from(T.cachedWidth),cachedHeight:R.from(T.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:v,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:lt([Ec.self(),hp(E,()=>a.get(),h)])}},xI=(t,s)=>{const a="tox-label",c=t.align==="center"?[`${a}--center`]:[],d=t.align==="end"?[`${a}--end`]:[],h={dom:{tag:"label",classes:[a,...c,...d]},components:[$s(s.providers.translate(t.label))]},v=Ke(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[h,...v],behaviours:lt([Ec.self(),vn.config({}),mI(R.none()),qt.config({mode:"acyclic"})])}},d3=Ot("toolbar.button.execute"),N9=t=>bl((s,a)=>{Cb(t,s)(c=>{Gt(s,d3,{buttonApi:c}),t.onAction(c)})}),Ab=Ot("common-button-display-events"),QT={[Gi()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],[lc()]:["toolbar-button-events",Ab],[dr()]:["focusing","alloy.base.behaviour",Ab]},m3=t=>bn(t.element,"width",Ds(t.element,"width")),f3=(t,s,a)=>rd(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),g3=(t,s)=>f3(t,s,[]),bp=(t,s)=>f3(t,s,[vn.config({})]),EI=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[$s(a.translate(t))],behaviours:lt([vn.config({})])}),Al=Ot("update-menu-text"),vp=Ot("update-menu-icon"),h3=(t,s,a)=>{const c=Jt(ee),d=t.text.map(V=>bo(EI(V,s,a.providers))),h=t.icon.map(V=>bo(bp(V,a.providers.icons))),v=(V,j)=>{const Y=wt.getValue(V);return cn.focus(Y),Gt(Y,"keydown",{raw:j.event.raw}),pu.close(Y),R.some(!0)},E=t.role.fold(()=>({}),V=>({role:V})),T=t.tooltip.fold(()=>({}),V=>{const j=a.providers.translate(V);return{title:j,"aria-label":j}}),D=rd("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),N=Ot("common-button-display-events");return bo(pu.sketch({...t.uid?{uid:t.uid}:{},...E,dom:{tag:"button",classes:[s,`${s}--select`].concat(Ke(t.classes,V=>`${s}--${V}`)),attributes:{...T}},components:Sb([h.map(V=>V.asSpec()),d.map(V=>V.asSpec()),R.some(D)]),matchWidth:!0,useMinWidth:!0,onOpen:(V,j,Y)=>{t.searchable&&$z(Y)},dropdownBehaviours:lt([...t.dropdownBehaviours,kl.button(()=>t.disabled||a.providers.isDisabled()),Nr(),kS.config({}),vn.config({}),En("dropdown-events",[yg(t,c),ad(t,c)]),En(N,[No((V,j)=>m3(V))]),En("menubutton-update-display-text",[Ve(Al,(V,j)=>{d.bind(Y=>Y.getOpt(V)).each(Y=>{vn.set(Y,[$s(a.providers.translate(j.event.text))])})}),Ve(vp,(V,j)=>{h.bind(Y=>Y.getOpt(V)).each(Y=>{vn.set(Y,[bp(j.event.icon,a.providers.icons)])})})])]),eventOrder:Eo(QT,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[lc()]:["toolbar-button-events","dropdown-events",N]}),sandboxBehaviours:lt([qt.config({mode:"special",onLeft:v,onRight:v}),En("dropdown-sandbox-events",[Ve(R4,(V,j)=>{Rz(V),j.stop()}),Ve(YE,(V,j)=>{Mz(V,j),j.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...z0(!1,t.columns,t.presets),fakeFocus:t.searchable,onHighlightItem:OD,onCollapseMenu:(V,j,Y)=>{ro.getHighlighted(Y).each(ie=>{OD(V,Y,ie)})},onDehighlightItem:Bz}},getAnchorOverrides:()=>({maxHeightFunction:(V,j)=>{Cx()(V,j-10)}}),fetch:V=>Wa.nu(Ht(t.fetch,V))})).asSpec()},P9=t=>W(t),TI=t=>t.type==="separator",B9=t=>no(t,"getSubmenuItems"),_I={type:"separator"},$9=(t,s)=>{const a=Io(t,(c,d)=>P9(d)?d===""?c:d==="|"?c.length>0&&!TI(c[c.length-1])?c.concat([_I]):c:no(s,d.toLowerCase())?c.concat([s[d.toLowerCase()]]):c:c.concat([d]),[]);return a.length>0&&TI(a[a.length-1])&&a.pop(),a},kI=(t,s)=>{const a=t.getSubmenuItems(),c=OI(a,s),d=Eo(c.menus,{[t.value]:c.items}),h=Eo(c.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:h}},I9=t=>{const s=vt(t,"value").getOrThunk(()=>Ot("generated-menu-item"));return Eo({value:s},t)},OI=(t,s)=>{const a=$9(W(t)?t.split(" "):t,s);return Ns(a,(c,d)=>{if(B9(d)){const h=I9(d),v=kI(h,s);return{menus:Eo(c.menus,v.menus),items:[v.item,...c.items],expansions:Eo(c.expansions,v.expansions)}}else return{...c,items:[d,...c.items]}},{menus:{},expansions:{},items:[]})},F9=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),L9=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),sy=(t,s,a,c)=>{const d=Ot("primary-menu"),h=OI(t,a.shared.providers.menuItems());if(h.items.length===0)return R.none();const v=F9(c),E=m$(d,h.items,s,a,c.isHorizontalMenu,v),T=L9(c),D=Jo(h.menus,(L,V)=>m$(V,L,s,a,!1,T)),N=Eo(D,vi(d,E));return R.from(ep.tieredData(d,N,h.expansions))},p3=t=>!no(t,"items"),AI="data-value",DI=(t,s,a,c)=>Ke(a,d=>p3(d)?{type:"togglemenuitem",text:d.text,value:d.value,active:d.value===c,onAction:()=>{wt.setValue(t,d.value),Gt(t,Sc,{name:s}),cn.focus(t)}}:{type:"nestedmenuitem",text:d.text,getSubmenuItems:()=>DI(t,s,d.items,c)}),b3=(t,s)=>Js(t,a=>p3(a)?an(a.value===s,a):b3(a.items,s)),v3=(t,s,a)=>{const c=s.shared.providers,d=a.bind(T=>b3(t.items,T)).orThunk(()=>Jr(t.items).filter(p3)),h=t.label.map(T=>bu(T,c)),v=vo.parts.field({dom:{},factory:{sketch:T=>h3({uid:T.uid,text:d.map(D=>D.text),icon:R.none(),tooltip:t.label,role:R.none(),fetch:(D,N)=>{const L=DI(D,t.name,t.items,wt.getValue(D));N(sy(L,rm.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:R.none()}))},onSetup:ae(ee),getApi:ae({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[as.config({}),hp(d.map(D=>D.value),D=>As(D.element,AI),(D,N)=>{b3(t.items,N).each(L=>{xt(D.element,AI,L.value),Gt(D,Al,{text:L.text})})})]},"tox-listbox",s.shared)}}),E={dom:{tag:"div",classes:["tox-listboxfield"]},components:[v]};return vo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Wt([h.toArray(),[E]]),fieldBehaviours:lt([on.config({disabled:ae(!t.enabled),onDisabled:T=>{vo.getField(T).each(on.disable)},onEnabled:T=>{vo.getField(T).each(on.enable)}})])})},H9=(t,s)=>({dom:{tag:"div",classes:t.classes},components:Ke(t.items,s.shared.interpreter)}),z9=(t,s)=>{const a=Ke(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),c=t.data.map(d=>vi("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:Ys(t.selectBehaviours,[cn.config({}),wt.config({store:{mode:"manual",getValue:d=>Gu(d.element),setValue:(d,h)=>{const v=Jr(t.options);fn(t.options,T=>T.value===h).isSome()?fh(d.element,h):d.element.dom.selectedIndex===-1&&h===""&&v.each(T=>fh(d.element,T.value))},...c}})])}},V9=ec({name:"HtmlSelect",configFields:[We("options"),fr("selectBehaviours",[cn,wt]),xe("selectClasses",[]),xe("selectAttributes",{}),go("data")],factory:z9}),$S=(t,s,a)=>{const c=Ke(t.items,T=>({text:s.translate(T.text),value:T.value})),d=t.label.map(T=>bu(T,s)),h=vo.parts.field({dom:{},...a.map(T=>({data:T})).getOr({}),selectAttributes:{size:t.size},options:c,factory:V9,selectBehaviours:lt([on.config({disabled:()=>!t.enabled||s.isDisabled()}),as.config({}),En("selectbox-change",[Ve(Qg(),(T,D)=>{Gt(T,Sc,{name:t.name})})])])}),v=t.size>1?R.none():R.some(rd("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),E={dom:{tag:"div",classes:["tox-selectfield"]},components:Wt([[h],v.toArray()])};return vo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Wt([d.toArray(),[E]]),fieldBehaviours:lt([on.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:T=>{vo.getField(T).each(on.disable)},onEnabled:T=>{vo.getField(T).each(on.enable)}}),Nr()])})},y3=ae([xe("field1Name","field1"),xe("field2Name","field2"),ou("onLockedChange"),zm(["lockClass"]),xe("locked",!1),jc.field("coupledFieldBehaviours",[Bn,wt])]),U9=(t,s,a)=>Po(t,s,a).bind(Bn.getCurrent),RI=(t,s)=>_a({factory:vo,name:t,overrides:a=>({fieldBehaviours:lt([En("coupled-input-behaviour",[Ve(zf(),c=>{U9(c,a,s).each(d=>{Po(c,a,"lock").each(h=>{kn.isOn(h)&&a.onLockedChange(c,d,h)})})})])])})}),w3=ae([RI("field1","field2"),RI("field2","field1"),_a({factory:Yr,schema:[We("dom")],name:"lock",overrides:t=>({buttonBehaviours:lt([kn.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),W9=(t,s,a,c)=>({uid:t.uid,dom:t.dom,components:s,behaviours:jc.augment(t.coupledFieldBehaviours,[Bn.config({find:R.some}),wt.config({store:{mode:"manual",getValue:d=>{const h=cg(d,t,["field1","field2"]);return{[t.field1Name]:wt.getValue(h.field1()),[t.field2Name]:wt.getValue(h.field2())}},setValue:(d,h)=>{const v=cg(d,t,["field1","field2"]);Qr(h,t.field1Name)&&wt.setValue(v.field1(),h[t.field1Name]),Qr(h,t.field2Name)&&wt.setValue(v.field2(),h[t.field2Name])}}})]),apis:{getField1:d=>Po(d,t,"field1"),getField2:d=>Po(d,t,"field2"),getLock:d=>Po(d,t,"lock")}}),Tc=ka({name:"FormCoupledInputs",configFields:y3(),partFields:w3(),factory:W9,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),MI=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let c=t.value.toFixed(a(t.unit));return c.indexOf(".")!==-1&&(c=c.replace(/\.?0*$/,"")),c+t.unit},C3=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const c=parseFloat(a[1]),d=a[2];return xn.value({value:c,unit:d})}else return xn.error(t)},NI=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},c=d=>no(a,d);return t.unit===s?R.some(t.value):c(t.unit)&&c(s)?a[t.unit]===a[s]?R.some(t.value):R.some(t.value/a[t.unit]*a[s]):R.none()},e_=t=>R.none(),PI=(t,s)=>a=>NI(a,s).map(c=>({value:c*t,unit:s})),Z9=(t,s)=>{const a=C3(t).toOptional(),c=C3(s).toOptional();return $i(a,c,(d,h)=>NI(d,h.unit).map(v=>h.value/v).map(v=>PI(v,h.unit)).getOr(e_)).getOr(e_)},BI=(t,s)=>{let a=e_;const c=Ot("ratio-event"),d=L=>rd(L,{tag:"span",classes:["tox-icon","tox-lock-icon__"+L]},s.icons),h=Tc.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:s.translate(t.label.getOr("Constrain proportions"))}},components:[d("lock"),d("unlock")],buttonBehaviours:lt([on.config({disabled:()=>!t.enabled||s.isDisabled()}),Nr(),as.config({})])}),v=L=>({dom:{tag:"div",classes:["tox-form__group"]},components:L}),E=L=>vo.parts.field({factory:vb,inputClasses:["tox-textfield"],inputBehaviours:lt([on.config({disabled:()=>!t.enabled||s.isDisabled()}),Nr(),as.config({}),En("size-input-events",[Ve(ji(),(V,j)=>{Gt(V,c,{isField1:L})}),Ve(Qg(),(V,j)=>{Gt(V,Sc,{name:t.name})})])]),selectOnFocus:!1}),T=L=>({dom:{tag:"label",classes:["tox-label"]},components:[$s(s.translate(L))]}),D=Tc.parts.field1(v([vo.parts.label(T("Width")),E(!0)])),N=Tc.parts.field2(v([vo.parts.label(T("Height")),E(!1)]));return Tc.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[D,N,v([T(oC),h])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(L,V,j)=>{C3(wt.getValue(L)).each(Y=>{a(Y).each(ie=>{wt.setValue(V,MI(ie))})})},coupledFieldBehaviours:lt([on.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:L=>{Tc.getField1(L).bind(vo.getField).each(on.disable),Tc.getField2(L).bind(vo.getField).each(on.disable),Tc.getLock(L).each(on.disable)},onEnabled:L=>{Tc.getField1(L).bind(vo.getField).each(on.enable),Tc.getField2(L).bind(vo.getField).each(on.enable),Tc.getLock(L).each(on.enable)}}),Nr(),En("size-input-events2",[Ve(c,(L,V)=>{const j=V.event.isField1,Y=j?Tc.getField1(L):Tc.getField2(L),ie=j?Tc.getField2(L):Tc.getField1(L),Ee=Y.map(wt.getValue).getOr(""),he=ie.map(wt.getValue).getOr("");a=Z9(Ee,he)})])])})},$I=(t,s,a)=>{const c=Aa.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[$s(s.translate(t.label))]}),d=Aa.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),h=Aa.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Aa.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:ae(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[c,d,h],sliderBehaviours:lt([Ec.self(),cn.config({})]),onChoose:(v,E,T)=>{Gt(v,Sc,{name:t.name,value:T})}})},j9=(t,s)=>{const a=E=>({dom:{tag:"th",innerHtml:s.translate(E)}}),c=E=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Ke(E,a)}]}),d=E=>({dom:{tag:"td",innerHtml:s.translate(E)}}),h=E=>({dom:{tag:"tr"},components:Ke(E,d)}),v=E=>({dom:{tag:"tbody"},components:Ke(E,h)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[c(t.header),v(t.cells)],behaviours:lt([as.config({}),cn.config({})])}},S3=(t,s)=>{const a=t.label.map(j=>bu(j,s)),c=[on.config({disabled:()=>t.disabled||s.isDisabled()}),Nr(),qt.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:j=>(Fn(j,_S),R.some(!0))}),En("textfield-change",[Ve(zf(),(j,Y)=>{Gt(j,Sc,{name:t.name})}),Ve(Uf(),(j,Y)=>{Gt(j,Sc,{name:t.name})})]),as.config({})],d=t.validation.map(j=>Ol.config({getRoot:Y=>Fi(Y.element),invalidClass:"tox-invalid",validator:{validate:Y=>{const ie=wt.getValue(Y),Ee=j.validator(ie);return Wa.pure(Ee===!0?xn.value(ie):xn.error(Ee))},validateOnLoad:j.validateOnLoad}})).toArray(),h=t.placeholder.fold(ae({}),j=>({placeholder:s.translate(j)})),v=t.inputMode.fold(ae({}),j=>({inputmode:j})),E={...h,...v},T=vo.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(j=>({data:j})).getOr({}),inputAttributes:E,inputClasses:[t.classname],inputBehaviours:lt(Wt([c,d])),selectOnFocus:!1,factory:vb}),D=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[T]}:T,L=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),V=[on.config({disabled:()=>t.disabled||s.isDisabled(),onDisabled:j=>{vo.getField(j).each(on.disable)},onEnabled:j=>{vo.getField(j).each(on.enable)}}),Nr()];return ES(a,D,L,V)},II=(t,s,a)=>S3({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:R.none(),maximized:t.maximized,data:a},s),FI=(t,s,a)=>S3({name:t.name,multiline:!0,label:t.label,inputMode:R.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:R.none(),maximized:t.maximized,data:a},s),IS=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),Tg=t=>t.dimension.property,Db=(t,s)=>t.dimension.getDimension(s),FS=(t,s)=>{const a=IS(t,s);uc(a,[s.shrinkingClass,s.growingClass])},x3=(t,s)=>{ps(t.element,s.openClass),zs(t.element,s.closedClass),bn(t.element,Tg(s),"0px"),mi(t.element)},t_=(t,s)=>{ps(t.element,s.closedClass),zs(t.element,s.openClass),eo(t.element,Tg(s))},LI=(t,s,a,c)=>{a.setCollapsed(),bn(t.element,Tg(s),Db(s,t.element)),FS(t,s),x3(t,s),s.onStartShrink(t),s.onShrunk(t)},G9=(t,s,a,c)=>{const d=c.getOrThunk(()=>Db(s,t.element));a.setCollapsed(),bn(t.element,Tg(s),d),mi(t.element);const h=IS(t,s);ps(h,s.growingClass),zs(h,s.shrinkingClass),x3(t,s),s.onStartShrink(t)},n_=(t,s,a)=>{const c=Db(s,t.element);(c==="0px"?LI:G9)(t,s,a,R.some(c))},HI=(t,s,a)=>{const c=IS(t,s),d=mr(c,s.shrinkingClass),h=Db(s,t.element);t_(t,s);const v=Db(s,t.element);(d?()=>{bn(t.element,Tg(s),h),mi(t.element)}:()=>{x3(t,s)})(),ps(c,s.shrinkingClass),zs(c,s.growingClass),t_(t,s),bn(t.element,Tg(s),v),a.setExpanded(),s.onStartGrow(t)},q9=(t,s,a)=>{if(a.isExpanded()){eo(t.element,Tg(s));const c=Db(s,t.element);bn(t.element,Tg(s),c)}},K9=(t,s,a)=>{a.isExpanded()||HI(t,s,a)},zI=(t,s,a)=>{a.isExpanded()&&n_(t,s,a)},Y9=(t,s,a)=>{a.isExpanded()&&LI(t,s,a)},VI=(t,s,a)=>a.isExpanded(),X9=(t,s,a)=>a.isCollapsed(),E3=(t,s,a)=>{const c=IS(t,s);return mr(c,s.growingClass)===!0},UI=(t,s,a)=>{const c=IS(t,s);return mr(c,s.shrinkingClass)===!0};var J9=Object.freeze({__proto__:null,refresh:q9,grow:K9,shrink:zI,immediateShrink:Y9,hasGrown:VI,hasShrunk:X9,isGrowing:E3,isShrinking:UI,isTransitioning:(t,s,a)=>E3(t,s)||UI(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?n_:HI)(t,s,a)},disableTransitions:FS,immediateGrow:(t,s,a)=>{a.isExpanded()||(t_(t,s),bn(t.element,Tg(s),Db(s,t.element)),FS(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),eU=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const c=s.expanded;return Ki(c?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:vi(s.dimension.property,"0px")})},events:(t,s)=>Ho([Uu(Vf(),(a,c)=>{c.event.raw.propertyName===t.dimension.property&&(FS(a,t),s.isExpanded()&&eo(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),WI=[We("closedClass"),We("openClass"),We("shrinkingClass"),We("growingClass"),go("getAnimationRoot"),Un("onShrunk"),Un("onStartShrink"),Un("onGrown"),Un("onStartGrow"),xe("expanded",!1),Vi("dimension",Vn("property",{width:[To("property","width"),To("getDimension",t=>ir(t)+"px")],height:[To("property","height"),To("getDimension",t=>ms(t)+"px")]}))],tU=Object.freeze({__proto__:null,init:t=>{const s=Jt(t.expanded),a=()=>"expanded: "+s.get();return qi({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:Ht(s.set,!1),setExpanded:Ht(s.set,!0),readState:a})}});const Xc=xr({fields:WI,name:"sliding",active:eU,apis:J9,state:tU}),T3=t=>({isEnabled:()=>!on.isDisabled(t),setEnabled:s=>on.set(t,!s),setActive:s=>{const a=t.element;s?(zs(a,"tox-tbtn--enabled"),xt(a,"aria-pressed",!0)):(ps(a,"tox-tbtn--enabled"),ys(a,"aria-pressed"))},isActive:()=>mr(t.element,"tox-tbtn--enabled"),setText:s=>{Gt(t,Al,{text:s})},setIcon:s=>Gt(t,vp,{icon:s})}),LS=(t,s,a,c,d=!0)=>h3({text:t.text,icon:t.icon,tooltip:t.tooltip,searchable:t.search.isSome(),role:c,fetch:(h,v)=>{const E={pattern:t.search.isSome()?Iz(h):""};t.fetch(T=>{v(sy(T,rm.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},E,T3(h))},onSetup:t.onSetup,getApi:T3,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[as.config({})]:[]]},s,a.shared),nU=(t,s,a)=>{const c=h=>v=>{const E=!v.isActive();v.setActive(E),h.storage.set(E),a.shared.getSink().each(T=>{s().getOpt(T).each(D=>{Ci(D.element),Gt(D,uf,{name:h.name,value:h.storage.get()})})})},d=h=>v=>{v.setActive(h.storage.get())};return h=>{h(Ke(t,v=>{const E=v.text.fold(()=>({}),T=>({text:T}));return{type:v.type,active:!1,...E,onAction:c(v),onSetup:d(v)}}))}},ZI=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{title:t,"aria-label":t}},components:[$s(t)]}),_3=Ot("leaf-label-event-id"),o_=({leaf:t,onLeafAction:s,visible:a,treeId:c,selectedId:d,backstage:h})=>{const v=t.menu.map(T=>LS(T,"tox-mbtn",h,R.none(),a)),E=[ZI(t.title)];return v.each(T=>E.push(T)),Yr.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:E,role:"treeitem",action:T=>{s(t.id),T.getSystem().broadcastOn([`update-active-item-${c}`],{value:t.id})},eventOrder:{[pl()]:[_3,"keying"]},buttonBehaviours:lt([...a?[as.config({})]:[],kn.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),wi.config({channels:{[`update-active-item-${c}`]:{onReceive:(T,D)=>{(D.value===t.id?kn.on:kn.off)(T)}}}}),En(_3,[No((T,D)=>{d.each(N=>{(N===t.id?kn.on:kn.off)(T)})}),Ve(pl(),(T,D)=>{const N=D.event.raw.code==="ArrowLeft",L=D.event.raw.code==="ArrowRight";N?(Xi(T.element,".tox-tree--directory").each(V=>{T.getSystem().getByDom(V).each(j=>{Hv(V,".tox-tree--directory__label").each(Y=>{j.getSystem().getByDom(Y).each(cn.focus)})})}),D.stop()):L&&D.stop()})])])})},jI=(t,s,a)=>rd(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:a},s),s_=(t,s)=>jI(t,s,[]),GI=Ot("directory-label-event-id"),oU=({directory:t,visible:s,noChildren:a,backstage:c})=>{const d=t.menu.map(E=>LS(E,"tox-mbtn",c,R.none())),h=[{dom:{tag:"div",classes:["tox-chevron"]},components:[s_("chevron-right",c.shared.providers.icons)]},ZI(t.title)];d.each(E=>{h.push(E)});const v=E=>{Xi(E.element,".tox-tree--directory").each(T=>{E.getSystem().getByDom(T).each(D=>{const N=!kn.isOn(D);kn.toggle(D),Gt(E,"expand-tree-node",{expanded:N,node:t.id})})})};return Yr.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:h,action:v,eventOrder:{[pl()]:[GI,"keying"]},buttonBehaviours:lt([...s?[as.config({})]:[],En(GI,[Ve(pl(),(E,T)=>{const D=T.event.raw.code==="ArrowRight",N=T.event.raw.code==="ArrowLeft";D&&a&&T.stop(),(D||N)&&Xi(E.element,".tox-tree--directory").each(L=>{E.getSystem().getByDom(L).each(V=>{!kn.isOn(V)&&D||kn.isOn(V)&&N?(v(E),T.stop()):N&&!kn.isOn(V)&&(Xi(V.element,".tox-tree--directory").each(j=>{Hv(j,".tox-tree--directory__label").each(Y=>{V.getSystem().getByDom(Y).each(cn.focus)})}),T.stop())})})})])])})},sU=({children:t,onLeafAction:s,visible:a,treeId:c,expandedIds:d,selectedId:h,backstage:v})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(E=>E.type==="leaf"?o_({leaf:E,selectedId:h,onLeafAction:s,visible:a,treeId:c,backstage:v}):r_({directory:E,expandedIds:d,selectedId:h,onLeafAction:s,labelTabstopping:a,treeId:c,backstage:v})),behaviours:lt([Xc.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),vn.config({})])}),rU=Ot("directory-event-id"),r_=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:c,backstage:d,expandedIds:h,selectedId:v})=>{const{children:E}=t,T=Jt(h),D=L=>E.map(V=>V.type==="leaf"?o_({leaf:V,selectedId:v,onLeafAction:s,visible:L,treeId:c,backstage:d}):r_({directory:V,expandedIds:T.get(),selectedId:v,onLeafAction:s,labelTabstopping:L,treeId:c,backstage:d})),N=h.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[oU({directory:t,visible:a,noChildren:t.children.length===0,backstage:d}),sU({children:E,expandedIds:h,selectedId:v,onLeafAction:s,visible:N,treeId:c,backstage:d})],behaviours:lt([En(rU,[No((L,V)=>{kn.set(L,N)}),Ve("expand-tree-node",(L,V)=>{const{expanded:j,node:Y}=V.event;T.set(j?[...T.get(),Y]:T.get().filter(ie=>ie!==Y))})]),kn.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(L,V)=>{const j=L.components()[1],Y=D(V);V?Xc.grow(j):Xc.shrink(j),vn.set(j,Y)}})])}},aU=Ot("tree-event-id"),iU=(t,s)=>{const a=t.onLeafAction.getOr(ee),c=t.onToggleExpand.getOr(ee),d=t.defaultExpandedIds,h=Jt(d),v=Jt(t.defaultSelectedId),E=Ot("tree-id"),T=(D,N)=>t.items.map(L=>L.type==="leaf"?o_({leaf:L,selectedId:D,onLeafAction:a,visible:!0,treeId:E,backstage:s}):r_({directory:L,selectedId:D,onLeafAction:a,expandedIds:N,labelTabstopping:!0,treeId:E,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:T(v.get(),h.get()),behaviours:lt([qt.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),En(aU,[Ve("expand-tree-node",(D,N)=>{const{expanded:L,node:V}=N.event;h.set(L?[...h.get(),V]:h.get().filter(j=>j!==V)),c(h.get(),{expanded:L,node:V})})]),wi.config({channels:{[`update-active-item-${E}`]:{onReceive:(D,N)=>{v.set(R.some(N.value)),vn.set(D,T(R.some(N.value),h.get()))}}}}),vn.config({})])}};var qI=Object.freeze({__proto__:null,events:(t,s)=>{const c=t.stream.streams.setup(t,s);return Ho([Ve(t.event,c),Wu(()=>s.cancel())].concat(t.cancelEvent.map(d=>[Ve(d,()=>s.cancel())]).getOr([])))}});const k3=t=>{const s=Jt(null);return qi({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:h=>{s.set(h)},cancel:()=>{const h=s.get();h!==null&&h.cancel()}})};var cU=Object.freeze({__proto__:null,throttle:k3,init:t=>t.stream.streams.state(t)});const KI=(t,s)=>{const a=t.stream,c=KT(t.onStream,a.delay);return s.setTimer(c),(d,h)=>{c.throttle(d,h),a.stopEvent&&h.stop()}};var lU=[Vi("stream",Vn("mode",{throttle:[We("delay"),xe("stopEvent",!0),To("streams",{setup:KI,state:k3})]})),xe("event","input"),go("cancelEvent"),ou("onStream")];const O3=xr({fields:lU,name:"streaming",active:qI,state:cU}),un=(t,s,a)=>{const c=wt.getValue(a);wt.setValue(s,c),A3(s)},ry=(t,s)=>{const a=t.element,c=Gu(a),d=a.dom;As(a,"type")!=="number"&&s(d,c)},A3=t=>{ry(t,(s,a)=>s.setSelectionRange(a.length,a.length))},YI=(t,s)=>{ry(t,(a,c)=>a.setSelectionRange(s,c.length))},XI=(t,s,a)=>{if(t.selectsOver){const c=wt.getValue(s),d=t.getDisplayText(c),h=wt.getValue(a);return t.getDisplayText(h).indexOf(d)===0?R.some(()=>{un(t,s,a),YI(s,d.length)}):R.none()}else return R.none()},a_=ae("alloy.typeahead.itemexecute"),JI=(t,s,a,c)=>{const d=(L,V,j)=>{t.previewing.set(!1);const Y=Ws.getCoupled(L,"sandbox");if(Ln.isOpen(Y))Bn.getCurrent(Y).each(ie=>{ro.getHighlighted(ie).fold(()=>{j(ie)},()=>{cw(Y,ie.element,"keydown",V)})});else{const ie=Ee=>{Bn.getCurrent(Ee).each(j)};kT(t,v(L),L,Y,c,ie,_i.HighlightMenuAndItem).get(ee)}},h=VP(t),v=L=>V=>V.map(j=>{const Y=bm(j.menus),ie=Ie(Y,he=>ko(he.items,fe=>fe.type==="item"));return wt.getState(L).update(Ke(ie,he=>he.data)),j}),E=L=>Bn.getCurrent(L),T="typeaheadevents",D=[cn.config({}),wt.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:L=>Gu(L.element),getFallbackEntry:L=>({value:L,meta:{}}),setValue:(L,V)=>{fh(L.element,t.model.getDisplayText(V))},...t.initialData.map(L=>vi("initialValue",L)).getOr({})}}),O3.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(L,V)=>{const j=Ws.getCoupled(L,"sandbox");if(cn.isFocused(L)&&Gu(L.element).length>=t.minChars){const ie=E(j).bind(he=>ro.getHighlighted(he).map(wt.getValue));t.previewing.set(!0);const Ee=he=>{E(j).each(fe=>{ie.fold(()=>{t.model.selectsOver&&ro.highlightFirst(fe)},_e=>{ro.highlightBy(fe,Xe=>wt.getValue(Xe).value===_e.value),ro.getHighlighted(fe).orThunk(()=>(ro.highlightFirst(fe),R.none()))})})};kT(t,v(L),L,j,c,Ee,_i.HighlightJustMenu).get(ee)}},cancelEvent:vv()}),qt.config({mode:"special",onDown:(L,V)=>(d(L,V,ro.highlightFirst),R.some(!0)),onEscape:L=>{const V=Ws.getCoupled(L,"sandbox");return Ln.isOpen(V)?(Ln.close(V),R.some(!0)):R.none()},onUp:(L,V)=>(d(L,V,ro.highlightLast),R.some(!0)),onEnter:L=>{const V=Ws.getCoupled(L,"sandbox"),j=Ln.isOpen(V);if(j&&!t.previewing.get())return E(V).bind(Y=>ro.getHighlighted(Y)).map(Y=>(Gt(L,a_(),{item:Y}),!0));{const Y=wt.getValue(L);return Fn(L,vv()),t.onExecute(V,L,Y),j&&Ln.close(V),R.some(!0)}}}),kn.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),Ws.config({others:{sandbox:L=>_D(t,L,{onOpen:()=>kn.on(L),onClose:()=>{t.lazyTypeaheadComp.get().each(V=>ys(V.element,"aria-activedescendant")),kn.off(L)}})}}),En(T,[No(L=>{t.lazyTypeaheadComp.set(R.some(L))}),Wu(L=>{t.lazyTypeaheadComp.set(R.none())}),bl(L=>{const V=ee;TD(t,v(L),L,c,V,_i.HighlightMenuAndItem).get(ee)}),Ve(a_(),(L,V)=>{const j=Ws.getCoupled(L,"sandbox");un(t.model,L,V.event.item),Fn(L,vv()),t.onItemExecute(L,j,V.event.item,wt.getValue(L)),Ln.close(j),A3(L)})].concat(t.dismissOnBlur?[Ve(Mm(),L=>{const V=Ws.getCoupled(L,"sandbox");wl(V.element).isNone()&&Ln.close(V)})]:[]))],N={[Pm()]:[wt.name(),O3.name(),T],...t.eventOrder};return{uid:t.uid,dom:UP(Eo(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...h,...Ys(t.typeaheadBehaviours,D)},eventOrder:N}},iY=ae([go("lazySink"),We("fetch"),xe("minChars",5),xe("responseTime",1e3),Un("onOpen"),xe("getHotspot",R.some),xe("getAnchorOverrides",ae({})),xe("layouts",R.none()),xe("eventOrder",{}),Lu("model",{},[xe("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),xe("selectsOver",!0),xe("populateFromBrowse",!0)]),Un("onSetValue"),Qi("onExecute"),Un("onItemExecute"),xe("inputClasses",[]),xe("inputAttributes",{}),xe("inputStyles",{}),xe("matchWidth",!0),xe("useMinWidth",!1),xe("dismissOnBlur",!0),zm(["openClass"]),go("initialData"),fr("typeaheadBehaviours",[cn,wt,O3,qt,kn,Ws]),Ls("lazyTypeaheadComp",()=>Jt(R.none)),Ls("previewing",()=>Jt(!0))].concat(zP()).concat(kD())),HS=ae([xl({schema:[x1()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,c)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{XI(t.model,d,c).fold(()=>{t.model.selectsOver?(ro.dehighlight(a,c),t.previewing.set(!0)):t.previewing.set(!1)},h=>{h(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&un(t.model,d,c),Hr(c.element,"id").each(h=>xt(d.element,"aria-activedescendant",h))})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(c=>(Gt(c,a_(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(c=>{t.model.populateFromBrowse&&un(t.model,c,a)})}})})]),uU=ka({name:"Typeahead",configFields:iY(),partFields:HS(),factory:JI}),vu=t=>({...t,toCached:()=>vu(t.toCached()),bindFuture:T=>vu(t.bind(D=>D.fold(N=>Wa.pure(xn.error(N)),N=>T(N)))),bindResult:T=>vu(t.map(D=>D.bind(T))),mapResult:T=>vu(t.map(D=>D.map(T))),mapError:T=>vu(t.map(D=>D.mapError(T))),foldResult:(T,D)=>t.map(N=>N.fold(T,D)),withTimeout:(T,D)=>vu(Wa.nu(N=>{let L=!1;const V=setTimeout(()=>{L=!0,N(xn.error(D()))},T);t.get(j=>{L||(clearTimeout(V),N(j))})}))}),QI=t=>vu(Wa.nu(t)),eF=t=>vu(Wa.pure(xn.value(t))),fU={nu:QI,wrap:vu,pure:eF,value:eF,error:t=>vu(Wa.pure(xn.error(t))),fromResult:t=>vu(Wa.pure(t)),fromFuture:t=>vu(t.map(xn.value)),fromPromise:t=>QI(s=>{t.then(a=>{s(xn.value(a))},a=>{s(xn.error(a))})})},i_=(t,s,a=[],c,d,h)=>{const v=s.fold(()=>({}),D=>({action:D})),E={buttonBehaviours:lt([kl.button(()=>!t.enabled||h.isDisabled()),Nr(),as.config({}),En("button press",[dw("click"),dw("mousedown")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...v},T=Eo(E,{dom:c});return Eo(T,{components:d})},gU=(t,s,a,c=[])=>{const d=t.tooltip.map(T=>({"aria-label":a.translate(T),title:a.translate(T)})).getOr({}),h={tag:"button",classes:["tox-tbtn"],attributes:d},v=t.icon.map(T=>g3(T,a.icons)),E=Sb([v]);return i_(t,s,c,h,E,a)},D3=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},nF=(t,s,a,c=[],d=[])=>{const h=a.translate(t.text),v=t.icon.map(V=>g3(V,a.icons)),E=[v.getOrThunk(()=>$s(h))],T=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),L={tag:"button",classes:[...D3(T),...v.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{title:h}};return i_(t,s,c,L,E,a)},R3=(t,s,a,c=[],d=[])=>{const h=nF(t,R.some(s),a,c,d);return Yr.sketch(h)},oF=(t,s)=>a=>{s==="custom"?Gt(a,uf,{name:t,value:{}}):s==="submit"?Fn(a,_S):s==="cancel"?Fn(a,mp):console.error("Unknown button type: ",s)},hU=(t,s)=>s==="menu",pU=(t,s)=>s==="custom"||s==="cancel"||s==="submit",bU=(t,s)=>s==="togglebutton",vU=(t,s)=>{var a,c;const d=t.icon.map(fe=>bp(fe,s.icons)).map(bo),h=fe=>{Gt(fe,uf,{name:t.name,value:{setIcon:_e=>{d.map(Xe=>Xe.getOpt(fe).each(Le=>{vn.set(Le,[bp(_e,s.icons)])}))}}})},v=t.buttonType.getOr(t.primary?"primary":"secondary"),E={...t,name:(a=t.name)!==null&&a!==void 0?a:"",tooltip:R.from(t.tooltip),enabled:(c=t.enabled)!==null&&c!==void 0?c:!1},T=E.tooltip.map(fe=>({"aria-label":s.translate(fe),title:s.translate(fe)})).getOr({}),D=D3(v??"secondary"),N=t.icon.isSome()&&t.text.isSome(),L={tag:"button",classes:[...D.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...N?["tox-button--icon-and-text"]:[]],attributes:T},V=[],j=s.translate(t.text.getOr("")),Y=$s(j),Ee=[...Sb([d.map(fe=>fe.asSpec())]),...t.text.isSome()?[Y]:[]],he=i_(E,R.some(h),V,L,Ee,s);return Yr.sketch(he)},c_=(t,s,a)=>{if(hU(t,s)){const c=()=>v,d=t,h={...t,type:"menubutton",search:R.none(),onSetup:E=>(E.setEnabled(t.enabled),ee),fetch:nU(d.items,c,a)},v=bo(LS(h,"tox-tbtn",a,R.none()));return v.asSpec()}else if(pU(t,s)){const c=oF(t.name,s),d={...t,borderless:!1};return R3(d,c,a.shared.providers,[])}else{if(bU(t,s))return vU(t,a.shared.providers);throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},yU=(t,s)=>{const a=oF(t.name,"custom");return aV(R.none(),vo.parts.field({factory:Yr,...nF(t,R.some(a),s,[qT(""),Ec.self()])}))},wU={type:"separator"},CU=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:ee}),M3=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:ee}),SU=t=>Ke(t,CU),sF=(t,s)=>ko(s,a=>a.type===t),rF=(t,s)=>SU(sF(t,s)),xU=t=>rF("header",t.targets),EU=t=>rF("anchor",t.targets),TU=t=>R.from(t.anchorTop).map(s=>M3("<top>",s)).toArray(),_U=t=>R.from(t.anchorBottom).map(s=>M3("<bottom>",s)).toArray(),kU=t=>Ke(t,s=>M3(s,s)),aF=t=>Io(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(wU,a),[]),N3=(t,s)=>{const a=t.toLowerCase();return ko(s,c=>{var d;const h=c.meta!==void 0&&c.meta.text!==void 0?c.meta.text:c.text,v=(d=c.value)!==null&&d!==void 0?d:"";return rr(h.toLowerCase(),a)||rr(v.toLowerCase(),a)})},iF=(t,s,a)=>{var c,d;const h=wt.getValue(s),v=(d=(c=h==null?void 0:h.meta)===null||c===void 0?void 0:c.text)!==null&&d!==void 0?d:h.value;return a.getLinkInformation().fold(()=>[],T=>{const D=N3(v,kU(a.getHistory(t)));return t==="file"?aF([D,N3(v,xU(T)),N3(v,Wt([TU(T),EU(T),_U(T)]))]):D})},cF=Ot("aria-invalid"),lF=(t,s,a,c)=>{const d=s.shared.providers,h=fe=>{const _e=wt.getValue(fe);a.addToHistory(_e.value,t.filetype)},v={...c.map(fe=>({initialData:fe})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":cF,type:"url"},minChars:0,responseTime:0,fetch:fe=>{const _e=iF(t.filetype,fe,a),Xe=sy(_e,rm.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:R.none()});return Wa.pure(Xe)},getHotspot:fe=>Y.getOpt(fe),onSetValue:(fe,_e)=>{fe.hasConfigured(Ol)&&Ol.run(fe).get(ee)},typeaheadBehaviours:lt([...a.getValidationHandler().map(fe=>Ol.config({getRoot:_e=>Fi(_e.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(_e,Xe)=>{N.getOpt(_e).each(Le=>{xt(Le.element,"title",d.translate(Xe))})}},validator:{validate:_e=>{const Xe=wt.getValue(_e);return fU.nu(Le=>{fe({type:t.filetype,url:Xe.value},$e=>{if($e.status==="invalid"){const ct=xn.error($e.message);Le(ct)}else{const ct=xn.value($e.message);Le(ct)}})})},validateOnLoad:!1}})).toArray(),on.config({disabled:()=>!t.enabled||d.isDisabled()}),as.config({}),En("urlinput-events",[Ve(zf(),fe=>{const _e=Gu(fe.element),Xe=_e.trim();Xe!==_e&&fh(fe.element,Xe),t.filetype==="file"&&Gt(fe,Sc,{name:t.name})}),Ve(Qg(),fe=>{Gt(fe,Sc,{name:t.name}),h(fe)}),Ve(Uf(),fe=>{Gt(fe,Sc,{name:t.name}),h(fe)})])]),eventOrder:{[zf()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:fe=>fe.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:z0(!1,1,"normal")},onExecute:(fe,_e,Xe)=>{Gt(_e,_S,{})},onItemExecute:(fe,_e,Xe,Le)=>{h(fe),Gt(fe,Sc,{name:t.name})}},E=vo.parts.field({...v,factory:uU}),T=t.label.map(fe=>bu(fe,d)),N=bo(((fe,_e,Xe=fe,Le=fe)=>rd(Xe,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+fe],attributes:{title:d.translate(Le),"aria-live":"polite",..._e.fold(()=>({}),$e=>({id:$e}))}},d.icons))("invalid",R.some(cF),"warning")),L=bo({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[N.asSpec()]}),V=a.getUrlPicker(t.filetype),j=Ot("browser.url.event"),Y=bo({dom:{tag:"div",classes:["tox-control-wrap"]},components:[E,L.asSpec()],behaviours:lt([on.config({disabled:()=>!t.enabled||d.isDisabled()})])}),ie=bo(R3({name:t.name,icon:R.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:R.none(),borderless:!0},fe=>Fn(fe,j),d,[],["tox-browse-url"])),Ee=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Wt([[Y.asSpec()],V.map(()=>ie.asSpec()).toArray()])}),he=fe=>{Bn.getCurrent(fe).each(_e=>{const Xe=wt.getValue(_e),Le={fieldname:t.name,...Xe};V.each($e=>{$e(Le).get(ct=>{wt.setValue(_e,ct),Gt(fe,Sc,{name:t.name})})})})};return vo.sketch({dom:XK(),components:T.toArray().concat([Ee()]),fieldBehaviours:lt([on.config({disabled:()=>!t.enabled||d.isDisabled(),onDisabled:fe=>{vo.getField(fe).each(on.disable),ie.getOpt(fe).each(on.disable)},onEnabled:fe=>{vo.getField(fe).each(on.enable),ie.getOpt(fe).each(on.enable)}}),Nr(),En("url-input-events",[Ve(j,he)])])})},uF=(t,s)=>{const a=uP(t.icon,s.icons);return im.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:a},components:t.url?[Yr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(t.iconTooltip)}},action:c=>Gt(c,uf,{name:"alert-banner",value:t.url}),buttonBehaviours:lt([$E()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},P3=(t,s)=>{t.dom.checked=s},OU=t=>t.dom.checked,dF=(t,s,a)=>{const c=T=>(T.element.dom.click(),R.some(!0)),d=vo.parts.field({factory:{sketch:yt},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:lt([Ec.self(),on.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:T=>{Fi(T.element).each(D=>zs(D,"tox-checkbox--disabled"))},onEnabled:T=>{Fi(T.element).each(D=>ps(D,"tox-checkbox--disabled"))}}),as.config({}),cn.config({}),s3(a,OU,P3),qt.config({mode:"special",onEnter:c,onSpace:c,stopSpaceKeyup:!0}),En("checkbox-events",[Ve(Qg(),(T,D)=>{Gt(T,Sc,{name:t.name})})])])}),h=vo.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[$s(s.translate(t.label))],behaviours:lt([kS.config({})])}),v=T=>rd(T==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+T]},s.icons),E=bo({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[v("checked"),v("unchecked")]});return vo.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,E.asSpec(),h],fieldBehaviours:lt([on.config({disabled:()=>!t.enabled||s.isDisabled()}),Nr()])})},mF=t=>t.presets==="presentation"?im.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):im.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:lt([as.config({}),cn.config({})])}),Br=t=>(s,a,c,d)=>vt(a,"name").fold(()=>t(a,d,R.none()),h=>s.field(h,t(a,d,vt(c,h)))),fF=t=>(s,a,c,d)=>{const h=Eo(a,{source:"dynamic"});return Br(t)(s,h,c,d)},AU={bar:Br((t,s)=>eV(t,s.shared)),collection:Br((t,s,a)=>cV(t,s.shared.providers,a)),alertbanner:Br((t,s)=>uF(t,s.shared.providers)),input:Br((t,s,a)=>II(t,s.shared.providers,a)),textarea:Br((t,s,a)=>FI(t,s.shared.providers,a)),label:Br((t,s)=>xI(t,s.shared)),iframe:fF((t,s,a)=>A9(t,s.shared.providers,a)),button:Br((t,s)=>yU(t,s.shared.providers)),checkbox:Br((t,s,a)=>dF(t,s.shared.providers,a)),colorinput:Br((t,s,a)=>gV(t,s.shared,s.colorinput,a)),colorpicker:Br((t,s,a)=>y9(t,s.shared.providers,a)),dropzone:Br((t,s,a)=>C9(t,s.shared.providers,a)),grid:Br((t,s)=>pI(t,s.shared)),listbox:Br((t,s,a)=>v3(t,s,a)),selectbox:Br((t,s,a)=>$S(t,s.shared.providers,a)),sizeinput:Br((t,s)=>BI(t,s.shared.providers)),slider:Br((t,s,a)=>$I(t,s.shared.providers,a)),urlinput:Br((t,s,a)=>lF(t,s,s.urlinput,a)),customeditor:Br(gI),htmlpanel:Br(mF),imagepreview:Br((t,s,a)=>M9(t,a)),table:Br((t,s)=>j9(t,s.shared.providers)),tree:Br((t,s)=>iU(t,s)),panel:Br((t,s)=>H9(t,s))},DU={field:(t,s)=>s,record:ae([])},dd=(t,s,a,c)=>{const d=Eo(c,{shared:{interpreter:h=>ay(t,h,a,d)}});return ay(t,s,a,d)},ay=(t,s,a,c)=>vt(AU,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),d=>d(t,s,a,c)),zS=(t,s,a)=>ay(DU,t,s,a),yp="layout-inset",VS=t=>t.x,gF=(t,s)=>t.x+t.width/2-s.width/2,US=(t,s)=>t.x+t.width-s.width,l_=t=>t.y,WS=(t,s)=>t.y+t.height-s.height,hF=(t,s)=>t.y+t.height/2-s.height/2,ZS=(t,s,a)=>wr(US(t,s),WS(t,s),a.insetSouthwest(),Yu(),"southwest",rs(t,{right:0,bottom:3}),yp),jS=(t,s,a)=>wr(VS(t),WS(t,s),a.insetSoutheast(),Wv(),"southeast",rs(t,{left:1,bottom:3}),yp),Rb=(t,s,a)=>wr(US(t,s),l_(t),a.insetNorthwest(),Dw(),"northwest",rs(t,{right:0,top:2}),yp),GS=(t,s,a)=>wr(VS(t),l_(t),a.insetNortheast(),T1(),"northeast",rs(t,{left:1,top:2}),yp),md=(t,s,a)=>wr(gF(t,s),l_(t),a.insetNorth(),Ud(),"north",rs(t,{top:2}),yp),iy=(t,s,a)=>wr(gF(t,s),WS(t,s),a.insetSouth(),dO(),"south",rs(t,{bottom:3}),yp),pF=(t,s,a)=>wr(US(t,s),hF(t,s),a.insetEast(),_1(),"east",rs(t,{right:0}),yp),bF=(t,s,a)=>wr(VS(t),hF(t,s),a.insetWest(),Ae(),"west",rs(t,{left:1}),yp),vF=t=>{switch(t){case"north":return md;case"northeast":return GS;case"northwest":return Rb;case"south":return iy;case"southeast":return jS;case"southwest":return ZS;case"east":return pF;case"west":return bF}},B3=(t,s,a,c,d)=>gx(c).map(vF).getOr(md)(t,s,a,c,d),RU=t=>{switch(t){case"north":return iy;case"northeast":return jS;case"northwest":return ZS;case"south":return md;case"southeast":return GS;case"southwest":return Rb;case"east":return bF;case"west":return pF}},MU=(t,s,a,c,d)=>gx(c).map(RU).getOr(md)(t,s,a,c,d),qS={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},NU=(t,s,a)=>{const d={maxHeightFunction:_h()},h=()=>({type:"node",root:ot(Be(t())),node:R.from(t()),bubble:Ju(12,12,qS),layouts:{onRtl:()=>[GS],onLtr:()=>[Rb]},overrides:d}),v=()=>({type:"hotspot",hotspot:s(),bubble:Ju(-12,12,qS),layouts:{onRtl:()=>[Cr,ua,Sr],onLtr:()=>[ua,Cr,Sr]},overrides:d});return()=>a()?h():v()},yF=(t,s,a,c)=>{const h={maxHeightFunction:_h()},v=()=>({type:"node",root:ot(Be(s())),node:R.from(s()),bubble:Ju(12,12,qS),layouts:{onRtl:()=>[md],onLtr:()=>[md]},overrides:h}),E=()=>t?{type:"node",root:ot(Be(s())),node:R.from(s()),bubble:Ju(0,-_d(s()),qS),layouts:{onRtl:()=>[La],onLtr:()=>[La]},overrides:h}:{type:"hotspot",hotspot:a(),bubble:Ju(0,0,qS),layouts:{onRtl:()=>[La],onLtr:()=>[La]},overrides:h};return()=>c()?v():E()},um=(t,s,a)=>{const c=()=>({type:"node",root:ot(Be(t())),node:R.from(t()),layouts:{onRtl:()=>[md],onLtr:()=>[md]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[Sr],onLtr:()=>[Sr]}});return()=>a()?c():d()},$3=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng(),c=t.model.table.getSelectedCells();if(c.length>1){const d=c[0],h=c[c.length-1],v={firstCell:we.fromDom(d),lastCell:we.fromDom(h)};return R.some(v)}return R.some(qr.range(we.fromDom(a.startContainer),a.startOffset,we.fromDom(a.endContainer),a.endOffset))}}),PU=t=>s=>({type:"node",root:t(),node:s}),BU=(t,s,a,c)=>{const d=op(t),h=()=>we.fromDom(t.getBody()),v=()=>we.fromDom(t.getContentAreaContainer()),E=()=>d||!c();return{inlineDialog:NU(v,s,E),inlineBottomDialog:yF(t.inline,v,a,E),banner:um(v,s,E),cursor:$3(t,h),node:PU(h)}},$U=t=>(s,a)=>{QB(t)(s,a)},IU=t=>()=>GB(t),FU=t=>s=>ST(t,s),wF=t=>s=>jB(t,s),CF=t=>({colorPicker:$U(t),hasCustomColors:IU(t),getColors:FU(t),getColorCols:wF(t)}),lY=t=>()=>xP(t),uY=t=>({isDraggableModal:lY(t)}),Za=t=>{const s=Jt(C4(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},u_=t=>Qr(t,"items"),SF=t=>Qr(t,"format"),KS=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],LU=t=>no(t,"items"),HU=t=>no(t,"block"),zU=t=>no(t,"inline"),VU=t=>no(t,"selector"),xF=t=>Io(t,(s,a)=>{if(LU(a)){const c=xF(a.items);return{customFormats:s.customFormats.concat(c.customFormats),formats:s.formats.concat([{title:a.title,items:c.formats}])}}else if(zU(a)||HU(a)||VU(a)){const d=`custom-${W(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),UU=(t,s)=>{const a=xF(s),c=d=>{St(d,h=>{t.formatter.has(h.name)||t.formatter.register(h.name,h.format)})};return t.formatter?c(a.customFormats):t.on("init",()=>{c(a.customFormats)}),a.formats},EF=t=>g4(t).map(s=>{const a=UU(t,s);return gP(t)?KS.concat(a):a}).getOr(KS),WU=t=>{const s=ns(t);return s.length===1&&yo(s,"title")},I3=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),YS=(t,s,a,c)=>{const d=T=>I3(T,a,c),h=T=>{const D=E(T.items);return{...T,type:"submenu",getStyleItems:ae(D)}},v=T=>{const D=W(T.name)?T.name:Ot(T.title),N=`custom-${D}`,L={...T,type:"formatter",format:N,isSelected:a(N),getStylePreview:c(N)};return t.formatter.register(D,L),L},E=T=>Ke(T,D=>u_(D)?h(D):SF(D)?d(D):WU(D)?{...D,type:"separator"}:v(D));return E(s)},ZU=t=>{const s=E=>()=>t.formatter.match(E),a=E=>()=>{const T=t.formatter.get(E);return T!==void 0?R.some({tag:T.length>0&&(T[0].inline||T[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(E))}):R.none()},c=Jt([]),d=Jt([]),h=Jt(!1);return t.on("PreInit",E=>{const T=EF(t),D=YS(t,T,s,a);c.set(D)}),t.on("addStyleModifications",E=>{const T=YS(t,E.items,s,a);d.set(T),h.set(E.replace)}),{getData:()=>{const E=h.get()?[]:c.get(),T=d.get();return E.concat(T)}}},TF=t=>Je(t)&&t.nodeType===1,jU=Eg.trim,F3=t=>s=>!!(TF(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),GU=F3("true"),qU=F3("false"),L3=(t,s,a,c,d)=>({type:t,title:s,url:a,level:c,attach:d}),dY=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return GU(s)}return!1},mY=(t,s)=>Ke(Er(we.fromDom(s),t),a=>a.dom),_F=t=>t.innerText||t.textContent,KU=t=>t.id?t.id:Ot("h"),YU=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,kF=t=>YU(t)&&OF(t),d_=t=>t&&/^(H[1-6])$/.test(t.nodeName),OF=t=>dY(t)&&!qU(t),XU=t=>d_(t)&&OF(t),AF=t=>d_(t)?parseInt(t.nodeName.substr(1),10):0,JU=t=>{var s;const a=KU(t),c=()=>{t.id=a};return L3("header",(s=_F(t))!==null&&s!==void 0?s:"","#"+a,AF(t),c)},QU=t=>{const s=t.id||t.name,a=_F(t);return L3("anchor",a||"#"+s,"#"+s,0,ee)},eW=t=>Ke(ko(t,XU),JU),tW=t=>Ke(ko(t,kF),QU),H3=t=>mY("h1,h2,h3,h4,h5,h6,a:not([href])",t),DF=t=>jU(t.title).length>0,nW={find:t=>{const s=H3(t);return ko(eW(s).concat(tW(s)),DF)}},m_="tinymce-url-history",RF=5,z3=t=>W(t)&&/^https?/.test(t),oW=t=>me(t)&&t.length<=RF&&uo(t,z3),XS=t=>J(t)&&Ar(t,s=>!oW(s)).isNone(),MF=()=>{const t=lp.getItem(m_);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+m_+" was not valid JSON",a),{};throw a}return XS(s)?s:(console.log("Local storage "+m_+" was not valid format",s),{})},f_=t=>{if(!XS(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));lp.setItem(m_,JSON.stringify(t))},sW=t=>{const s=MF();return vt(s,t).getOr([])},V3=(t,s)=>{if(!z3(t))return;const a=MF(),c=vt(a,s).getOr([]),d=ko(c,h=>h!==t);a[s]=[t].concat(d).slice(0,RF),f_(a)},cy=t=>!!t,NF=t=>Jo(Eg.makeMap(t,/[, ]/),cy),U3=t=>R.from(p4(t)),PF=t=>{const s=R.from(b4(t)).filter(cy).map(NF);return U3(t).fold(Pn,a=>s.fold(Rt,c=>ns(c).length>0?c:!1))},BF=(t,s)=>{const a=PF(t);return Oe(a)?a?U3(t):R.none():a[s]?U3(t):R.none()},$F=(t,s)=>BF(t,s).map(a=>c=>Wa.nu(d=>{const h=(E,T)=>{if(!W(E))throw new Error("Expected value to be string");if(T!==void 0&&!J(T))throw new Error("Expected meta to be a object");d({value:E,meta:T})},v={filetype:s,fieldname:c.fieldname,...R.from(c.meta).getOr({})};a.call(t,h,c.value,v)})),IF=t=>R.from(t).filter(W).getOrUndefined(),W3=t=>CP(t)?R.some({targets:nW.find(t.getBody()),anchorTop:IF(H0(t)),anchorBottom:IF(SP(t))}):R.none(),g_=t=>R.from(LE(t)),rW=t=>({getHistory:sW,addToHistory:V3,getLinkInformation:()=>W3(t),getValidationHandler:()=>g_(t),getUrlPicker:s=>$F(t,s)}),aW=(t,s,a,c)=>{const d=Jt(!1),h=Za(s),v={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:yc.translate,isDisabled:()=>s.mode.isReadOnly()||!s.ui.isEnabled(),getOption:s.options.get},E=rW(s),T=ZU(s),D=CF(s),N=uY(s),L=()=>d.get(),V=Ee=>d.set(Ee),j={shared:{providers:v,anchors:BU(s,a,c,h.isPositionedAtTop),header:h},urlinput:E,styles:T,colorinput:D,dialog:N,isContextMenuOpen:L,setContextMenuState:V},Y={...j,shared:{...j.shared,interpreter:Ee=>zS(Ee,{},Y),getSink:t.popup}},ie={...j,shared:{...j.shared,interpreter:Ee=>zS(Ee,{},ie),getSink:t.dialog}};return{popup:Y,dialog:ie}},ly=(t,s,a)=>{const c=($e,ct)=>{St([s,...a],mt=>{mt.broadcastEvent($e,ct)})},d=($e,ct)=>{St([s,...a],mt=>{mt.broadcastOn([$e],ct)})},h=$e=>d(iu(),{target:$e.target}),v=xm(),E=za(v,"touchstart",h),T=za(v,"touchmove",$e=>c(m1(),$e)),D=za(v,"touchend",$e=>c(yv(),$e)),N=za(v,"mousedown",h),L=za(v,"mouseup",$e=>{$e.raw.button===0&&d(wC(),{target:$e.target})}),V=$e=>d(iu(),{target:we.fromDom($e.target)}),j=$e=>{$e.button===0&&d(wC(),{target:we.fromDom($e.target)})},Y=()=>{St(t.editorManager.get(),$e=>{t!==$e&&$e.dispatch("DismissPopups",{relatedTarget:t})})},ie=$e=>c(Vu(),Kw($e)),Ee=$e=>{d(ag(),{}),c(eu(),Kw($e))},he=Be(we.fromDom(t.getElement())),fe=Yv(he,"scroll",$e=>{requestAnimationFrame(()=>{const ct=t.getContainer();if(ct!=null){const Tn=dp(t,s.element).map($t=>[$t.element,...$t.others]).getOr([]);kr(Tn,$t=>wo($t,$e.target))&&(t.dispatch("ElementScroll",{target:$e.target.dom}),c(Cv(),$e))}})}),_e=()=>d(ag(),{}),Xe=$e=>{$e.state&&d(iu(),{target:we.fromDom(t.getContainer())})},Le=$e=>{d(iu(),{target:we.fromDom($e.relatedTarget.getContainer())})};t.on("PostRender",()=>{t.on("click",V),t.on("tap",V),t.on("mouseup",j),t.on("mousedown",Y),t.on("ScrollWindow",ie),t.on("ResizeWindow",Ee),t.on("ResizeEditor",_e),t.on("AfterProgressState",Xe),t.on("DismissPopups",Le)}),t.on("remove",()=>{t.off("click",V),t.off("tap",V),t.off("mouseup",j),t.off("mousedown",Y),t.off("ScrollWindow",ie),t.off("ResizeWindow",Ee),t.off("ResizeEditor",_e),t.off("AfterProgressState",Xe),t.off("DismissPopups",Le),N.unbind(),E.unbind(),T.unbind(),D.unbind(),L.unbind(),fe.unbind()}),t.on("detach",()=>{St([s,...a],Lh),St([s,...a],$e=>$e.destroy())})},$r=fA,gf=tE,FF=ae([xe("shell",!1),We("makeItem"),xe("setupItem",ee),jc.field("listBehaviours",[vn])]),Z3=xi({name:"items",overrides:()=>({behaviours:lt([vn.config({})])})}),iW=ae([Z3]),cW=ae("CustomList"),lW=(t,s,a,c)=>{const d=(E,T)=>{v(E).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},D=>{const N=vn.contents(D),L=T.length,V=L-N.length,j=V>0?us(V,()=>t.makeItem()):[],Y=N.slice(L);St(Y,Ee=>vn.remove(D,Ee)),St(j,Ee=>vn.append(D,Ee));const ie=vn.contents(D);St(ie,(Ee,he)=>{t.setupItem(E,Ee,T[he],he)})})},h=t.shell?{behaviours:[vn.config({})],components:[]}:{behaviours:[],components:s},v=E=>t.shell?R.some(E):Po(E,t,"items");return{uid:t.uid,dom:t.dom,components:h.components,behaviours:Ys(t.listBehaviours,h.behaviours),apis:{setItems:d}}},h_=ka({name:cW(),configFields:FF(),partFields:iW(),factory:lW,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),uy=ae([We("dom"),xe("shell",!0),fr("toolbarBehaviours",[vn])]),uW=ae([xi({name:"groups",overrides:()=>({behaviours:lt([vn.config({})])})})]),dW=(t,s,a,c)=>{const d=(E,T)=>{h(E).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},D=>{vn.set(D,T)})},h=E=>t.shell?R.some(E):Po(E,t,"groups"),v=t.shell?{behaviours:[vn.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:v.components,behaviours:Ys(t.toolbarBehaviours,v.behaviours),apis:{setGroups:d,refresh:ee},domModification:{attributes:{role:"group"}}}},dm=ka({name:"Toolbar",configFields:uy(),partFields:uW(),factory:dW,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),mW=ee,fW=Pn,j3=ae([]);var gW=Object.freeze({__proto__:null,setup:mW,isDocked:fW,getBehaviours:j3});const Mb=t=>(Ma(qs(t,"position"),"fixed")?R.none():$c(t)).orThunk(()=>{const c=we.fromTag("span");return oa(t).bind(d=>{Ca(d,c);const h=$c(c);return zc(c),h})}),HF=t=>Mb(t).map(ac).getOrThunk(()=>io(0,0)),hW=(t,s)=>{const a=t.element;zs(a,s.transitionClass),ps(a,s.fadeOutClass),zs(a,s.fadeInClass),s.onShow(t)},G3=(t,s)=>{const a=t.element;zs(a,s.transitionClass),ps(a,s.fadeInClass),zs(a,s.fadeOutClass),s.onHide(t)},zF=(t,s)=>t.y<s.bottom&&t.bottom>s.y,VF=(t,s)=>t.y>=s.y,UF=(t,s)=>t.bottom<=s.bottom,q3=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),K3=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),Y3=t=>t.box.x-t.win.x,pW=(t,s,a)=>{const c=s.win,d=s.box,h=Y3(s);return Js(t,v=>{switch(v){case"bottom":return UF(d,a.bounds)?R.none():R.some(K3(c,h,a));case"top":return VF(d,a.bounds)?R.none():R.some(q3(c,h,a));default:return R.none()}}).getOr({location:"no-dock"})},bW=(t,s,a)=>uo(t,c=>{switch(c){case"bottom":return UF(s,a.bounds);case"top":return VF(s,a.bounds)}}),vW=(t,s)=>{const a=s.optScrollEnv.fold(ae(t.bounds.y),c=>c.scrollElmTop+(t.bounds.y-c.currentScrollTop));return io(t.bounds.x,a)},yW=(t,s)=>{const a=s.optScrollEnv.fold(ae(t.y),c=>t.y+c.currentScrollTop-c.scrollElmTop);return io(t.x,a)},WF=(t,s,a)=>a.getInitialPos().map(c=>{const d=vW(c,s);return{box:gs(d.left,d.top,ir(t),ms(t)),location:c.location}}),ZF=(t,s,a,c,d)=>{const h=yW(s,a),v=gs(h.left,h.top,s.width,s.height);c.setInitialPos({style:Dr(t),position:Ds(t,"position")||"static",bounds:v,location:d.location})},jF=(t,s,a,c,d)=>{c.getInitialPos().fold(()=>ZF(t,s,a,c,d),()=>ee)},X3=(t,s,a)=>a.getInitialPos().bind(c=>{var d;switch(a.clearInitialPos(),c.position){case"static":return R.some({morph:"static"});case"absolute":const h=Mb(t).getOr(Os()),v=ws(h),E=(d=h.dom.scrollTop)!==null&&d!==void 0?d:0;return R.some({morph:"absolute",positionCss:fc("absolute",vt(c.style,"left").map(T=>s.x-v.x),vt(c.style,"top").map(T=>s.y-v.y+E),vt(c.style,"right").map(T=>v.right-s.right),vt(c.style,"bottom").map(T=>v.bottom-s.bottom))});default:return R.none()}}),p_=(t,s,a)=>WF(t,s,a).filter(({box:c})=>bW(a.getModes(),c,s)).bind(({box:c})=>X3(t,c,a)),b_=t=>{switch(t.location){case"top":return R.some({morph:"fixed",positionCss:fc("fixed",R.some(t.leftX),R.some(t.topY),R.none(),R.none())});case"bottom":return R.some({morph:"fixed",positionCss:fc("fixed",R.some(t.leftX),R.none(),R.none(),R.some(t.bottomY))});default:return R.none()}},wW=(t,s,a)=>{const c=ws(t),d=Ur(),h=pW(a.getModes(),{win:d,box:c},s);return h.location==="top"||h.location==="bottom"?(ZF(t,c,s,a,h),b_(h)):R.none()},CW=(t,s,a)=>p_(t,s,a).orThunk(()=>s.optScrollEnv.bind(c=>WF(t,s,a)).bind(({box:c,location:d})=>{const h=Ur(),v=Y3({win:h,box:c}),E=d==="top"?q3(h,v,s):K3(h,v,s);return b_(E)})),SW=(t,s,a)=>{const c=t.element;return Ma(qs(c,"position"),"fixed")?CW(c,s,a):wW(c,s,a)},xW=(t,s,a)=>{const c=t.element;return WF(c,s,a).bind(({box:d})=>X3(c,d,a))},EW=(t,s,a,c)=>{const d=ws(t),h=Ur(),v=Y3({win:h,box:d}),E=c(h,v,s);return E.location==="bottom"||E.location==="top"?(jF(t,d,s,a,E),b_(E)):R.none()},GF=(t,s,a)=>{a.setDocked(!1),St(["left","right","top","bottom","position"],c=>eo(t.element,c)),s.onUndocked(t)},J3=(t,s,a,c)=>{const d=c.position==="fixed";a.setDocked(d),mx(t.element,c),(d?s.onDocked:s.onUndocked)(t)},Q3=(t,s,a,c,d=!1)=>{s.contextual.each(h=>{h.lazyContext(t).each(v=>{const E=zF(v,c.bounds);E!==a.isVisible()&&(a.setVisible(E),d&&!E?(Ss(t.element,[h.fadeOutClass]),h.onHide(t)):(E?hW:G3)(t,h))})})},eR=(t,s,a,c,d)=>{Q3(t,s,a,c,!0),J3(t,s,a,d.positionCss)},TW=(t,s,a,c,d)=>{switch(d.morph){case"static":return GF(t,s,a);case"absolute":return J3(t,s,a,d.positionCss);case"fixed":return eR(t,s,a,c,d)}},qF=(t,s,a)=>{const c=s.lazyViewport(t);Q3(t,s,a,c),SW(t,c,a).each(d=>{TW(t,s,a,c,d)})},_W=(t,s,a)=>{const c=t.element;a.setDocked(!1);const d=s.lazyViewport(t);xW(t,d,a).each(h=>{switch(h.morph){case"static":{GF(t,s,a);break}case"absolute":{J3(t,s,a,h.positionCss);break}}}),a.setVisible(!0),s.contextual.each(h=>{uc(c,[h.fadeInClass,h.fadeOutClass,h.transitionClass]),h.onShow(t)}),v_(t,s,a)},v_=(t,s,a)=>{t.getSystem().isConnected()&&qF(t,s,a)},KF=(t,s,a)=>{a.isDocked()&&_W(t,s,a)},wp=t=>(s,a,c)=>{const d=a.lazyViewport(s);EW(s.element,d,c,t).each(v=>{eR(s,a,c,d,v)})},YF=wp(q3),JS=wp(K3);var XF=Object.freeze({__proto__:null,refresh:v_,reset:KF,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,c)=>a.setModes(c),forceDockToTop:YF,forceDockToBottom:JS}),AW=Object.freeze({__proto__:null,events:(t,s)=>Ho([Uu(Vf(),(a,c)=>{t.contextual.each(d=>{mr(a.element,d.transitionClass)&&(uc(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),c.stop()})}),Ve(Vu(),(a,c)=>{v_(a,t,s)}),Ve(Cv(),(a,c)=>{v_(a,t,s)}),Ve(eu(),(a,c)=>{KF(a,t,s)})])}),DW=[pi("contextual",[so("fadeInClass"),so("fadeOutClass"),so("transitionClass"),Yl("lazyContext"),Un("onShow"),Un("onShown"),Un("onHide"),Un("onHidden")]),Mr("lazyViewport",()=>({bounds:Ur(),optScrollEnv:R.none()})),bi("modes",["top","bottom"],Zr),Un("onDocked"),Un("onUndocked")],RW=Object.freeze({__proto__:null,init:t=>{const s=Jt(!1),a=Jt(!0),c=Dn(),d=Jt(t.modes),h=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return qi({isDocked:s.get,setDocked:s.set,getInitialPos:c.get,setInitialPos:c.set,clearInitialPos:c.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:h})}});const Xs=xr({fields:DW,name:"docking",active:AW,apis:XF,state:RW}),Cp=ae(Ot("toolbar-height-change")),Dl={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},y_="tox-tinymce--toolbar-sticky-on",JF="tox-tinymce--toolbar-sticky-off",MW=(t,s)=>{const a=Pa(s),d=Pc(s).dom.innerHeight,h=$a(a),v=we.fromDom(t.elm),E=fi(v),T=ms(v),D=E.y,N=D+T,L=ac(s),V=ms(s),j=L.top,Y=j+V,ie=Math.abs(j-h.top)<2,Ee=Math.abs(Y-(h.top+d))<2;if(ie&&D<Y)av(h.left,D-V,a);else if(Ee&&N>j){const he=D-d+T+V;av(h.left,he,a)}},dy=(t,s)=>yo(Xs.getModes(t),s),nR=t=>{const s=c=>_d(c)+(parseInt(Ds(c,"margin-top"),10)||0)+(parseInt(Ds(c,"margin-bottom"),10)||0),a=t.element;Fi(a).each(c=>{const d="padding-"+Xs.getModes(t)[0];if(Xs.isDocked(t)){const h=ir(c);bn(a,"width",h+"px"),bn(c,d,s(a)+"px")}else eo(a,"width"),eo(c,d)})},my=(t,s)=>{s?(ps(t,Dl.fadeOutClass),Ss(t,[Dl.transitionClass,Dl.fadeInClass])):(ps(t,Dl.fadeInClass),Ss(t,[Dl.fadeOutClass,Dl.transitionClass]))},oR=(t,s)=>{const a=we.fromDom(t.getContainer());s?(zs(a,y_),ps(a,JF)):(zs(a,JF),ps(a,y_))},NW=(t,s)=>{const a=Pa(s);Xu(a).filter(c=>!wo(s,c)).filter(c=>wo(c,we.fromDom(a.dom.body))||Lr(t,c)).each(()=>Ci(s))},PW=(t,s)=>wl(t).orThunk(()=>s().toOptional().bind(a=>wl(a.element))),BW=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(Xs.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(nR)}),t.on("SkinLoaded",()=>{a().each(c=>{Xs.isDocked(c)?Xs.reset(c):Xs.refresh(c)})}),t.on("FullscreenStateChanged",()=>{a().each(Xs.reset)})),t.on("AfterScrollIntoView",c=>{a().each(d=>{Xs.refresh(d);const h=d.element;A0(h)&&MW(c,h)})}),t.on("PostRender",()=>{oR(t,!1)})},$W=t=>t().map(Xs.isDocked).getOr(!1),IW=()=>[wi.config({channels:{[Cp()]:{onReceive:nR}}})],QF=(t,s)=>{const a=Dn(),c=s.getSink,d=E=>{c().each(T=>E(T.element))},h=E=>{t.inline||nR(E),oR(t,Xs.isDocked(E)),E.getSystem().broadcastOn([ag()],{}),c().each(T=>T.getSystem().broadcastOn([ag()],{}))},v=t.inline?[]:IW();return[cn.config({}),Xs.config({contextual:{lazyContext:E=>{const T=_d(E.element),D=t.inline?t.getContentAreaContainer():t.getContainer();return R.from(D).map(N=>{const L=ws(we.fromDom(N));return dp(t,E.element).fold(()=>{const j=L.height-T,Y=L.y+(dy(E,"top")?0:T);return gs(L.x,Y,L.width,j)},j=>{const Y=t1(L,G0(j)),ie=dy(E,"top")?Y.y:Y.y+T;return gs(Y.x,ie,Y.width,Y.height-T)})})},onShow:()=>{d(E=>my(E,!0))},onShown:E=>{d(T=>uc(T,[Dl.transitionClass,Dl.fadeInClass])),a.get().each(T=>{NW(E.element,T),a.clear()})},onHide:E=>{PW(E.element,c).fold(a.clear,a.set),d(T=>my(T,!1))},onHidden:()=>{d(E=>uc(E,[Dl.transitionClass]))},...Dl},lazyViewport:E=>dp(t,E.element).fold(()=>{const D=Ur(),N=h4(t),L=D.y+(dy(E,"top")?N:0),V=D.height-(dy(E,"bottom")?N:0);return{bounds:gs(D.x,L,D.width,V),optScrollEnv:R.none()}},D=>({bounds:G0(D),optScrollEnv:R.some({currentScrollTop:D.element.dom.scrollTop,scrollElmTop:ac(D.element).top})})),modes:[s.header.getDockingMode()],onDocked:h,onUndocked:h}),...v]};var eL=Object.freeze({__proto__:null,setup:BW,isDocked:$W,getBehaviours:QF});const tL=t=>{const s=t.editor,a=t.sticky?QF:j3;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:lt(a(s,t.sharedBackstage))}},sR=Vt([nr,Vi("items",Mt([Rd([tT,ic("items",Zr)]),Zr]))].concat(U0)),FW=t=>Cs("GroupToolbarButton",sR,t),w_=[aa("text"),aa("tooltip"),aa("icon"),Ui("search",!1,Mt([ql,Vt([aa("placeholder")])],t=>Oe(t)?t?R.some({placeholder:R.none()}):R.none():R.some(t))),Yl("fetch"),Mr("onSetup",()=>ee)],QS=Vt([nr,...w_]),rR=t=>Cs("menubutton",QS,t),LW=Vt([nr,oT,Kc,ip,yb,JP,ap,Wi("presets","normal",["normal","color","listpreview"]),L4(1),rp,QP]),HW=t=>Cs("SplitButton",LW,t);var aR=ec({factory:(t,s)=>{const a=(d,h)=>{const v=Ke(h,E=>{const T={type:"menubutton",text:E.text,fetch:N=>{N(E.getItems())}},D=rR(T).mapError(N=>Ia(N)).getOrDie();return LS(D,"tox-mbtn",s.backstage,R.some("menuitem"))});vn.set(d,v)},c={focus:qt.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:lt([vn.config({}),En("menubar-events",[No(d=>{t.onSetup(d)}),Ve(Pd(),(d,h)=>{Vs(d.element,".tox-mbtn--active").each(v=>{nu(h.event.target,".tox-mbtn").each(E=>{wo(v,E)||d.getSystem().getByDom(v).each(T=>{d.getSystem().getByDom(E).each(D=>{pu.expand(D),pu.close(T),cn.focus(D)})})})})}),Ve(wv(),(d,h)=>{h.event.prevFocus.bind(v=>d.getSystem().getByDom(v).toOptional()).each(v=>{h.event.newFocus.bind(E=>d.getSystem().getByDom(E).toOptional()).each(E=>{pu.isOpen(v)&&(pu.expand(E),pu.close(v))})})})]),qt.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),R.some(!0))}),as.config({})]),apis:c,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[We("dom"),We("uid"),We("onEscape"),We("backstage"),xe("onSetup",ee)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const iR="⚡️Upgrade",cR="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",zW=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:cR,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:iR}}]}),C_="container",VW=[fr("slotBehaviours",[])],nL=t=>"<alloy.field."+t+">",UW=t=>{const s=(()=>{const h=[];return{slot:(E,T)=>(h.push(E),kC(C_,nL(E),T)),record:ae(h)}})(),a=t(s),c=s.record(),d=Ke(c,h=>_a({name:h,pname:nL(h)}));return PC(C_,VW,d,WW,a)},WW=(t,s)=>{const a=ie=>DC(t),c=(ie,Ee)=>Po(ie,t,Ee),d=(ie,Ee)=>(he,fe)=>Po(he,t,fe).map(_e=>ie(_e,fe)).getOr(Ee),h=ie=>(Ee,he)=>{St(he,fe=>ie(Ee,fe))},v=(ie,Ee)=>As(ie.element,"aria-hidden")!=="true",E=(ie,Ee)=>{if(!v(ie)){const he=ie.element;eo(he,"display"),ys(he,"aria-hidden"),Gt(ie,f1(),{name:Ee,visible:!0})}},T=(ie,Ee)=>{if(v(ie)){const he=ie.element;bn(he,"display","none"),xt(he,"aria-hidden","true"),Gt(ie,f1(),{name:Ee,visible:!1})}},D=d(v,!1),N=d(T),L=h(N),V=ie=>L(ie,a()),j=d(E),Y={getSlotNames:a,getSlot:c,isShowing:D,hideSlot:N,hideAllSlots:V,showSlot:j};return{uid:t.uid,dom:t.dom,components:s,behaviours:Yd(t.slotBehaviours),apis:Y}},Oi={...Jo({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>qf(t)),sketch:UW},vY=Vt([Kc,oT,Mr("onShow",ee),Mr("onHide",ee),ap]),oL=t=>Cs("sidebar",vY,t),ZW=t=>{const{sidebars:s}=t.ui.registry.getAll();St(ns(s),a=>{const c=s[a],d=()=>Ma(R.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:c.icon,tooltip:c.tooltip,onAction:h=>{t.execCommand("ToggleSidebar",!1,a),h.setActive(d())},onSetup:h=>{h.setActive(d());const v=()=>h.setActive(d());return t.on("ToggleSidebar",v),()=>{t.off("ToggleSidebar",v)}}})})},sL=t=>({element:()=>t.element.dom}),jW=(t,s)=>{const a=Ke(ns(s),c=>{const d=s[c],h=Mo(oL(d));return{name:c,getApi:sL,onSetup:h.onSetup,onShow:h.onShow,onHide:h.onHide}});return Ke(a,c=>{const d=Jt(ee);return t.slot(c.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:mS.unnamedEvents([yg(c,d),ad(c,d),Ve(f1(),(h,v)=>{const E=v.event;fn(a,D=>D.name===E.name).each(D=>{(E.visible?D.onShow:D.onHide)(D.getApi(h))})})])})})},GW=t=>Oi.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:jW(s,t),slotBehaviours:mS.unnamedEvents([No(a=>Oi.hideAllSlots(a))])})),qW=(t,s,a)=>{Bn.getCurrent(t).each(d=>{vn.set(d,[GW(s)]);const h=a==null?void 0:a.toLowerCase();W(h)&&no(s,h)&&Bn.getCurrent(d).each(v=>{Oi.showSlot(v,h),Xc.immediateGrow(d),eo(d.element,"width"),S_(t.element,"region")})})},S_=(t,s)=>{xt(t,"role",s)},KW=(t,s)=>{Bn.getCurrent(t).each(c=>{Bn.getCurrent(c).each(h=>{Xc.hasGrown(c)?Oi.isShowing(h,s)?(Xc.shrink(c),S_(t.element,"presentation")):(Oi.hideAllSlots(h),Oi.showSlot(h,s),S_(t.element,"region")):(Oi.hideAllSlots(h),Oi.showSlot(h,s),Xc.grow(c),S_(t.element,"region"))})})},rL=t=>Bn.getCurrent(t).bind(a=>Xc.isGrowing(a)||Xc.hasGrown(a)?Bn.getCurrent(a).bind(h=>fn(Oi.getSlotNames(h),v=>Oi.isShowing(h,v))):R.none()),lR=Ot("FixSizeEvent"),uR=Ot("AutoSizeEvent"),YW=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:lt([as.config({}),cn.config({}),Xc.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Bn.getCurrent(s).each(Oi.hideAllSlots),Fn(s,uR)},onGrown:s=>{Fn(s,uR)},onStartGrow:s=>{Gt(s,lR,{width:qs(s.element,"width").getOr("")})},onStartShrink:s=>{Gt(s,lR,{width:ir(s.element)+"px"})}}),vn.config({}),Bn.config({find:s=>{const a=vn.contents(s);return Jr(a)}})])}],behaviours:lt([Ec.childAt(0),En("sidebar-sliding-events",[Ve(lR,(s,a)=>{bn(s.element,"width",a.event.width)}),Ve(uR,(s,a)=>{eo(s.element,"width")})])])});var aL=Object.freeze({__proto__:null,block:(t,s,a,c)=>{xt(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),h=lt([qt.config({mode:"special",onTab:()=>R.some(!0),onShiftTab:()=>R.some(!0)}),cn.config({})]),v=c(d,h),E=d.getSystem().build(v);vn.append(d,dc(E)),E.hasConfigured(qt)&&s.focus&&qt.focusIn(E),a.isBlocked()||s.onBlock(t),a.blockWith(()=>vn.remove(d,E))},unblock:(t,s,a)=>{ys(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()},isBlocked:(t,s,a)=>a.isBlocked()}),JW=[Mr("getRoot",R.none),yr("focus",!0),Un("onBlock"),Un("onUnblock")],Rl=Object.freeze({__proto__:null,init:()=>{const t=EO(),s=a=>{t.set({destroy:a})};return qi({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const mm=xr({fields:JW,name:"blocking",apis:aL,state:Rl}),iL=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:gg('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),dR=t=>Bn.getCurrent(t).each(s=>Ci(s.element,!0)),QW=(t,s)=>{const a="tabindex",c=`data-mce-${a}`;R.from(t.iframeElement).map(we.fromDom).each(d=>{s?(Hr(d,a).each(h=>xt(d,c,h)),xt(d,a,-1)):(ys(d,a),Hr(d,c).each(h=>{xt(d,a,h),ys(d,c)}))})},e2=(t,s,a,c)=>{const d=s.element;if(QW(t,a),a)mm.block(s,iL(c)),eo(d,"display"),ys(d,"aria-hidden"),t.hasFocus()&&dR(s);else{const h=Bn.getCurrent(s).exists(v=>D1(v.element));mm.unblock(s),bn(d,"display","none"),xt(d,"aria-hidden","true"),h&&t.focus()}},eZ=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:lt([vn.config({}),mm.config({focus:!1}),Bn.config({find:s=>Jr(s.components())})]),components:[]}),x_=t=>t.type==="focusin",tZ=t=>x_(t)?(t.composed?Jr(t.composedPath()):R.from(t.target)).map(we.fromDom).filter(po).exists(a=>mr(a,"mce-pastebin")):!1,E_=(t,s,a)=>{const c=Jt(!1),d=Dn(),h=E=>{c.get()&&!tZ(E)&&(E.preventDefault(),dR(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",h),t.on("BeforeExecCommand",E=>{E.command.toLowerCase()==="mcefocus"&&E.value!==!0&&h(E)})});const v=E=>{E!==c.get()&&(c.set(E),e2(t,s(),E,a.providers),FB(t,E))};t.on("ProgressState",E=>{if(d.on(clearTimeout),en(E.time)){const T=hb.setEditorTimeout(t,()=>v(E.state),E.time);d.set(T)}else v(E.state),d.clear()})},nZ=(t,s)=>Io(t,(d,h)=>s(h,d.len).fold(ae(d),E=>({len:E.finish,list:d.list.concat([E])})),{len:0,list:[]}).list,mR=(t,s,a)=>({within:t,extra:s,withinWidth:a}),Ml=(t,s,a)=>{const c=nZ(t,(E,T)=>{const D=a(E);return R.some({element:E,start:T,finish:T+D,width:D})}),d=ko(c,E=>E.finish<=s),h=Ns(d,(E,T)=>E+T.width,0),v=c.slice(d.length);return{within:d,extra:v,withinWidth:h}},T_=t=>Ke(t,s=>s.element),__=(t,s,a)=>{const c=T_(t.concat(s));return mR(c,[],a)},cL=(t,s,a,c)=>{const d=T_(t).concat([a]);return mR(d,T_(s),c)},lL=(t,s,a)=>mR(T_(t),[],a),oZ=(t,s,a)=>{const c=Ml(s,t,a);return c.extra.length===0?R.some(c):R.none()},uL=(t,s,a,c)=>{const d=oZ(t,s,a).getOrThunk(()=>Ml(s,t-a(c),a)),h=d.within,v=d.extra,E=d.withinWidth;return v.length===1&&v[0].width<=a(c)?__(h,v,E):v.length>=1?cL(h,v,c,E):lL(h,v,E)},dL=(t,s)=>{const a=Ke(s,c=>dc(c));dm.setGroups(t,a)},sZ=t=>Js(t,s=>wl(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),mL=(t,s,a)=>{const c=s.builtGroups.get();if(c.length===0)return;const d=Jd(t,s,"primary"),h=Ws.getCoupled(t,"overflowGroup");bn(d.element,"visibility","hidden");const v=c.concat([h]),E=sZ(v);a([]),dL(d,v);const T=ir(d.element),D=uL(T,s.builtGroups.get(),N=>ir(N.element),h);D.extra.length===0?(vn.remove(d,h),a([])):(dL(d,D.within),a(D.extra)),eo(d.element,"visibility"),mi(d.element),E.each(cn.focus)},fL=ae([fr("splitToolbarBehaviours",[Ws]),Ls("builtGroups",()=>Jt([]))]),rZ=ae([zm(["overflowToggledClass"]),If("getOverflowBounds"),We("lazySink"),Ls("overflowGroups",()=>Jt([])),Un("onOpened"),Un("onClosed")].concat(fL())),aZ=ae([_a({factory:dm,schema:uy(),name:"primary"}),xl({schema:uy(),name:"overflow"}),xl({name:"overflow-button"}),xl({name:"overflow-group"})]),fR=ae((t,s)=>{Qb(t,Math.floor(s))}),gL=ae([zm(["toggledClass"]),We("lazySink"),Yl("fetch"),If("getBounds"),pi("fireDismissalEventInstead",[xe("event",Bm())]),Wm(),Un("onToggled")]),hL=ae([xl({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:lt([kn.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),xl({factory:dm,schema:uy(),name:"toolbar",overrides:t=>({toolbarBehaviours:lt([qt.config({mode:"cyclic",onEscape:s=>(Po(s,t,"button").each(cn.focus),R.none())})])})})]),t2=Dn(),iZ=(t,s)=>{t2.set(!0),gR(t,s),t2.clear()},gR=(t,s)=>{const a=Ws.getCoupled(t,"toolbarSandbox");Ln.isOpen(a)?Ln.close(a):Ln.open(a,s.toolbar())},k_=(t,s,a,c)=>{const d=a.getBounds.map(v=>v()),h=a.lazySink(t).getOrDie();Ta.positionWithinBounds(h,s,{anchor:{type:"hotspot",hotspot:t,layouts:c,overrides:{maxWidthFunction:fR()}}},d)},hR=(t,s,a,c,d)=>{dm.setGroups(s,d),k_(t,s,a,c),kn.on(t)},pL=(t,s,a)=>{const c=Xf(),d=(v,E)=>{const T=t2.get().getOr(!1);a.fetch().get(D=>{hR(t,E,a,s.layouts,D),c.link(t.element),T||qt.focusIn(E)})},h=()=>{kn.off(t),t2.get().getOr(!1)||cn.focus(t),c.unlink(t.element)};return{dom:{tag:"div",attributes:{id:c.id}},behaviours:lt([qt.config({mode:"special",onEscape:v=>(Ln.close(v),R.some(!0))}),Ln.config({onOpen:d,onClose:h,isPartOf:(v,E,T)=>Vd(E,T)||Vd(t,T),getAttachPoint:()=>a.lazySink(t).getOrDie()}),wi.config({channels:{...G1({isExtraPart:Pn,...a.fireDismissalEventInstead.map(v=>({fireEventInstead:{event:v.event}})).getOr({})}),...Hh({doReposition:()=>{Ln.getState(Ws.getCoupled(t,"toolbarSandbox")).each(v=>{k_(t,v,a,s.layouts)})}})}})])}},Sp=ka({name:"FloatingToolbarButton",factory:(t,s,a,c)=>({...Yr.sketch({...c.button(),action:d=>{gR(d,c)},buttonBehaviours:jc.augment({dump:c.button().buttonBehaviours},[Ws.config({others:{toolbarSandbox:d=>pL(d,a,t)}})])}),apis:{setGroups:(d,h)=>{Ln.getState(Ws.getCoupled(d,"toolbarSandbox")).each(v=>{hR(d,v,t,a.layouts,h)})},reposition:d=>{Ln.getState(Ws.getCoupled(d,"toolbarSandbox")).each(h=>{k_(d,h,t,a.layouts)})},toggle:d=>{gR(d,c)},toggleWithoutFocusing:d=>{iZ(d,c)},getToolbar:d=>Ln.getState(Ws.getCoupled(d,"toolbarSandbox")),isOpen:d=>Ln.isOpen(Ws.getCoupled(d,"toolbarSandbox"))}}),configFields:gL(),partFields:hL(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),cZ=ae([We("items"),zm(["itemSelector"]),fr("tgroupBehaviours",[qt])]),bL=ae([nb({name:"items",unit:"item"})]),lZ=(t,s,a,c)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Ys(t.tgroupBehaviours,[qt.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),O_=ka({name:"ToolbarGroup",configFields:cZ(),partFields:bL(),factory:lZ}),vL=t=>Ke(t,s=>dc(s)),yL=(t,s,a)=>{mL(t,a,c=>{a.overflowGroups.set(c),s.getOpt(t).each(d=>{Sp.setGroups(d,vL(c))})})},uZ=(t,s,a,c)=>{const d=bo(Sp.sketch({fetch:()=>Wa.nu(h=>{h(vL(t.overflowGroups.get()))}),layouts:{onLtr:()=>[ua,Cr],onRtl:()=>[Cr,ua],onBottomLtr:()=>[Ea,ri],onBottomRtl:()=>[ri,Ea]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:c["overflow-button"](),toolbar:c.overflow()},onToggled:(h,v)=>t[v?"onOpened":"onClosed"](h)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:Ys(t.splitToolbarBehaviours,[Ws.config({others:{overflowGroup:()=>O_.sketch({...c["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(h,v)=>{t.builtGroups.set(Ke(v,h.getSystem().build)),yL(h,d,t)},refresh:h=>yL(h,d,t),toggle:h=>{d.getOpt(h).each(v=>{Sp.toggle(v)})},toggleWithoutFocusing:h=>{d.getOpt(h).each(Sp.toggleWithoutFocusing)},isOpen:h=>d.getOpt(h).map(Sp.isOpen).getOr(!1),reposition:h=>{d.getOpt(h).each(v=>{Sp.reposition(v)})},getOverflow:h=>d.getOpt(h).bind(Sp.getToolbar)},domModification:{attributes:{role:"group"}}}},wL=ka({name:"SplitFloatingToolbar",configFields:rZ(),partFields:aZ(),factory:uZ,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),dZ=ae([zm(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Un("onOpened"),Un("onClosed")].concat(fL())),mZ=ae([_a({factory:dm,schema:uy(),name:"primary"}),_a({factory:dm,schema:uy(),name:"overflow",overrides:t=>({toolbarBehaviours:lt([Xc.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{Po(s,t,"overflow-button").each(a=>{kn.off(a),cn.focus(a)}),t.onClosed(s)},onGrown:s=>{qt.focusIn(s),t.onOpened(s)},onStartGrow:s=>{Po(s,t,"overflow-button").each(kn.on)}}),qt.config({mode:"acyclic",onEscape:s=>(Po(s,t,"overflow-button").each(cn.focus),R.some(!0))})])})}),xl({name:"overflow-button",overrides:t=>({buttonBehaviours:lt([kn.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),xl({name:"overflow-group"})]),fZ=(t,s)=>Po(t,s,"overflow").map(Xc.hasGrown).getOr(!1),CL=(t,s)=>{Po(t,s,"overflow-button").bind(()=>Po(t,s,"overflow")).each(a=>{A_(t,s),Xc.toggleGrow(a)})},A_=(t,s)=>{Po(t,s,"overflow").each(a=>{mL(t,s,c=>{const d=Ke(c,h=>dc(h));dm.setGroups(a,d)}),Po(t,s,"overflow-button").each(c=>{Xc.hasGrown(a)&&kn.on(c)}),Xc.refresh(a)})},gZ=(t,s,a,c)=>{const d="alloy.toolbar.toggle",h=(v,E)=>{const T=Ke(E,v.getSystem().build);t.builtGroups.set(T)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Ys(t.splitToolbarBehaviours,[Ws.config({others:{overflowGroup:v=>O_.sketch({...c["overflow-group"](),items:[Yr.sketch({...c["overflow-button"](),action:E=>{Fn(v,d)}})]})}}),En("toolbar-toggle-events",[Ve(d,v=>{CL(v,t)})])]),apis:{setGroups:(v,E)=>{h(v,E),A_(v,t)},refresh:v=>A_(v,t),toggle:v=>CL(v,t),isOpen:v=>fZ(v,t)},domModification:{attributes:{role:"group"}}}},pR=ka({name:"SplitSlidingToolbar",configFields:dZ(),partFields:mZ(),factory:gZ,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),D_=t=>{const s=t.title.fold(()=>({}),a=>({attributes:{title:a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...s},components:[O_.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:lt([as.config({}),cn.config({})])}},R_=t=>O_.sketch(D_(t)),n2=(t,s)=>{const a=No(c=>{const d=Ke(t.initGroups,R_);dm.setGroups(c,d)});return lt([kl.toolbarButton(t.providers.isDisabled),Nr(),qt.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),En("toolbar-events",[a])])},SL=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":D_({title:R.none(),items:[]}),"overflow-button":gU({icon:R.some("more-drawer"),enabled:!0,tooltip:R.some("Reveal or hide additional toolbar items")},R.none(),t.providers)},splitToolbarBehaviours:n2(t,s)}},xL=t=>{const s=SL(t),a=4,c=wL.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return wL.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,h=fi(d),v=Nc(d),E=fi(v),T=Math.max(v.dom.scrollHeight,E.height);return gs(h.x+a,E.y,h.width-a*2,T)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[c],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},hZ=t=>{const s=pR.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=pR.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),c=SL(t);return pR.sketch({...c,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([Cp()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([Cp()],{type:"closed"}),t.onToggled(d,!1)}})},M_=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return dm.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===mu.scrolling?["tox-toolbar--scrolling"]:[])},components:[dm.parts.groups({})],toolbarBehaviours:n2(t,s)})},pZ=[ip,Kc,aa("tooltip"),Wi("buttonType","secondary",["primary","secondary"]),yr("borderless",!1),Yl("onAction")],bZ=[...pZ,af,Kl("type",["button"])],vZ=[...pZ,yr("active",!1),Kl("type",["togglebutton"])],N_={button:bZ,togglebutton:vZ},yZ=[Kl("type",["group"]),bi("buttons",[],Vn("type",N_))],P_=Vn("type",{...N_,group:yZ}),EL=Vt([bi("buttons",[],P_),Yl("onShow"),Yl("onHide")]),TL=t=>Cs("view",EL,t),bR=(t,s)=>{var a,c;const d=t.type==="togglebutton",h=t.icon.map(_e=>bp(_e,s.icons)).map(bo),E=_e=>{const Xe=ct=>{h.map(mt=>mt.getOpt(_e).each(Tn=>{vn.set(Tn,[bp(ct,s.icons)])}))},Le=ct=>{const mt=_e.element;ct?(zs(mt,"tox-button--enabled"),xt(mt,"aria-pressed",!0)):(ps(mt,"tox-button--enabled"),ys(mt,"aria-pressed"))},$e=()=>mr(_e.element,"tox-button--enabled");if(d)return t.onAction({setIcon:Xe,setActive:Le,isActive:$e});if(t.type==="button")return t.onAction({setIcon:Xe})},T={...t,name:d?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:R.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},D=D3((c=t.buttonType)!==null&&c!==void 0?c:"secondary"),N=d?t.text.map(s.translate):R.some(s.translate(t.text)),L=N.map($s),V=T.tooltip.or(N).map(_e=>({"aria-label":s.translate(_e),title:s.translate(_e)})).getOr({}),j=h.map(_e=>_e.asSpec()),Y=Sb([j,L]),ie=t.icon.isSome()&&L.isSome(),Ee={tag:"button",classes:D.concat(...t.icon.isSome()&&!ie?["tox-button--icon"]:[]).concat(...ie?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:V},he=[],fe=i_(T,R.some(E),he,Ee,Y,s);return Yr.sketch(fe)},_L=(t,s)=>bR(t,s),kL=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Ke(t.buttons,a=>_L(a,s))}),Nb=dl().deviceType,OL=Nb.isPhone(),wZ=Nb.isTablet(),CZ=t=>{let s=!1;const a=Ke(t.buttons,c=>c.type==="group"?(s=!0,kL(c,t.providers)):_L(c,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...OL||wZ?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:lt([cn.config({}),qt.config({mode:"flow",selector:"button, .tox-button",focusInside:b.OnEnterOrSpaceMode})]),components:s?a:[im.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),im.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},SZ=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-view__pane"]}}),vR=(t,s,a,c)=>{const d={getPane:h=>$r.getPart(h,t,"pane"),getOnShow:h=>t.viewConfig.onShow,getOnHide:h=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,apis:d}};var fy=ka({name:"silver.View",configFields:[We("viewConfig")],partFields:[xi({factory:{sketch:CZ},schema:[We("buttons"),We("providers")],name:"header"}),xi({factory:{sketch:SZ},schema:[],name:"pane"})],factory:vR,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const xZ=(t,s,a)=>Cd(s,(c,d)=>{const h=Mo(TL(c));return t.slot(d,fy.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:h,components:[...h.buttons.length>0?[fy.parts.header({buttons:h.buttons,providers:a})]:[],fy.parts.pane({})]}))}),AL=(t,s)=>Oi.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:xZ(a,t,s),slotBehaviours:mS.unnamedEvents([No(c=>Oi.hideAllSlots(c))])})),yR=t=>fn(Oi.getSlotNames(t),s=>Oi.isShowing(t,s)),B_=t=>{const s=t.element;bn(s,"display","none"),xt(s,"aria-hidden","true")},wR=t=>{const s=t.element;eo(s,"display"),ys(s,"aria-hidden")},EZ=t=>({getContainer:ae(t)}),DL=(t,s,a)=>{Oi.getSlot(t,s).each(c=>{fy.getPane(c).each(d=>{a(c)(EZ(d.element.dom))})})},RL=(t,s)=>DL(t,s,fy.getOnShow),TZ=(t,s)=>DL(t,s,fy.getOnHide);var $_=ec({factory:(t,s)=>{const h={setViews:(v,E)=>{vn.set(v,[AL(E,s.backstage.shared.providers)])},whichView:v=>Bn.getCurrent(v).bind(yR),toggleView:(v,E,T,D)=>Bn.getCurrent(v).exists(N=>{const L=yR(N),V=L.exists(Y=>D===Y),j=Oi.getSlot(N,D).isSome();return j&&(Oi.hideAllSlots(N),V?(B_(v),E()):(T(),wR(v),Oi.showSlot(N,D),RL(N,D)),L.each(Y=>TZ(N,Y))),j})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:lt([vn.config({}),Bn.config({find:v=>{const E=vn.contents(v);return Jr(E)}})]),apis:h}},name:"silver.ViewWrapper",configFields:[We("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,c,d)=>t.toggleView(s,a,c,d),whichView:(t,s)=>t.whichView(s)}});const ML=(t,s,a)=>{let c=!1;const d={getSocket:h=>$r.getPart(h,t,"socket"),setSidebar:(h,v,E)=>{$r.getPart(h,t,"sidebar").each(T=>qW(T,v,E))},toggleSidebar:(h,v)=>{$r.getPart(h,t,"sidebar").each(E=>KW(E,v))},whichSidebar:h=>$r.getPart(h,t,"sidebar").bind(rL).getOrNull(),getHeader:h=>$r.getPart(h,t,"header"),getToolbar:h=>$r.getPart(h,t,"toolbar"),setToolbar:(h,v)=>{$r.getPart(h,t,"toolbar").each(E=>{const T=Ke(v,R_);E.getApis().setGroups(E,T)})},setToolbars:(h,v)=>{$r.getPart(h,t,"multiple-toolbar").each(E=>{const T=Ke(v,D=>Ke(D,R_));h_.setItems(E,T)})},refreshToolbar:h=>{$r.getPart(h,t,"toolbar").each(E=>E.getApis().refresh(E))},toggleToolbarDrawer:h=>{$r.getPart(h,t,"toolbar").each(v=>{Fo(v.getApis().toggle,E=>E(v))})},toggleToolbarDrawerWithoutFocusing:h=>{$r.getPart(h,t,"toolbar").each(v=>{Fo(v.getApis().toggleWithoutFocusing,E=>E(v))})},isToolbarDrawerToggled:h=>$r.getPart(h,t,"toolbar").bind(v=>R.from(v.getApis().isOpen).map(E=>E(v))).getOr(!1),getThrobber:h=>$r.getPart(h,t,"throbber"),focusToolbar:h=>{$r.getPart(h,t,"toolbar").orThunk(()=>$r.getPart(h,t,"multiple-toolbar")).each(E=>{qt.focusIn(E)})},setMenubar:(h,v)=>{$r.getPart(h,t,"menubar").each(E=>{aR.setMenus(E,v)})},focusMenubar:h=>{$r.getPart(h,t,"menubar").each(v=>{aR.focus(v)})},setViews:(h,v)=>{$r.getPart(h,t,"viewWrapper").each(E=>{$_.setViews(E,v)})},toggleView:(h,v)=>$r.getPart(h,t,"viewWrapper").exists(E=>$_.toggleView(E,()=>d.showMainView(h),()=>d.hideMainView(h),v)),whichView:h=>$r.getPart(h,t,"viewWrapper").bind($_.whichView).getOrNull(),hideMainView:h=>{c=d.isToolbarDrawerToggled(h),c&&d.toggleToolbarDrawer(h),$r.getPart(h,t,"editorContainer").each(v=>{const E=v.element;bn(E,"display","none"),xt(E,"aria-hidden","true")})},showMainView:h=>{c&&d.toggleToolbarDrawer(h),$r.getPart(h,t,"editorContainer").each(v=>{const E=v.element;eo(E,"display"),ys(E,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:d,behaviours:t.behaviours}},_Z=gf.optional({factory:aR,name:"menubar",schema:[We("backstage")]}),kZ=t=>t.type===mu.sliding?hZ:t.type===mu.floating?xL:M_,CR=gf.optional({factory:{sketch:t=>h_.sketch({uid:t.uid,dom:t.dom,listBehaviours:lt([qt.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>M_({type:t.type,uid:Ot("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),R.some(!0))}),setupItem:(s,a,c,d)=>{dm.setGroups(a,c)},shell:!0})},name:"multiple-toolbar",schema:[We("dom"),We("onEscape")]}),OZ=gf.optional({factory:{sketch:t=>{const s=kZ(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),R.some(!0)),onToggled:(c,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[We("dom"),We("onEscape"),We("getSink")]}),AZ=gf.optional({factory:{sketch:tL},name:"header",schema:[We("dom")]}),NL=gf.optional({factory:{sketch:zW},name:"promotion",schema:[We("dom")]}),DZ=gf.optional({name:"socket",schema:[We("dom")]}),PL=gf.optional({factory:{sketch:YW},name:"sidebar",schema:[We("dom")]}),RZ=gf.optional({factory:{sketch:eZ},name:"throbber",schema:[We("dom")]}),BL=gf.optional({factory:$_,name:"viewWrapper",schema:[We("backstage")]}),MZ=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),NZ=gf.optional({factory:{sketch:MZ},name:"editorContainer",schema:[]});var jo=ka({name:"OuterContainer",factory:ML,configFields:[We("dom"),We("behaviours")],partFields:[AZ,_Z,OZ,CR,DZ,PL,NL,RZ,BL,NZ],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,c)=>{t.setSidebar(s,a,c)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const $L="file edit view insert format tools table help",IL={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template inserttemplate codesample inserttable accordion | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},PZ=(t,s,a)=>{const c=np(a).split(/[ ,]/);return{text:t.title,getItems:()=>Ie(t.items,d=>{const h=d.toLowerCase();return h.trim().length===0?[]:kr(c,v=>v===h)?[]:h==="separator"||h==="|"?[{type:"separator"}]:s.menuItems[h]?[s.menuItems[h]]:[]})}},SR=t=>t.split(" "),I_=(t,s)=>{const a={...IL,...s.menus},c=ns(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?SR($L):SR(s.menubar===!1?"":s.menubar),h=ko(d,E=>{const T=no(IL,E);return c?T||vt(s.menus,E).exists(D=>no(D,"items")):T}),v=Ke(h,E=>{const T=a[E];return PZ({title:T.title,items:SR(T.items)},s,t)});return ko(v,E=>{const T=D=>W(D)||D.type!=="separator";return E.getItems().length>0&&kr(E.getItems(),T)})},xR=t=>{const s=()=>{t._skinLoaded=!0,zH(t)};return()=>{t.initialized?s():t.on("init",s)}},BZ=(t,s)=>()=>sD(t,{message:s}),FL=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),ER=(t,s,a,c)=>(t.on("remove",()=>c.unloadRawCss(s)),c.loadRawCss(s,a)),$Z=async(t,s)=>{const c="ui/"+jE(t).getOr("default")+"/skin.css",d=tinymce.Resource.get(c);if(W(d))return Promise.resolve(ER(t,c,d,t.ui.styleSheetLoader));{const h=s+"/skin.min.css";return FL(t,h,t.ui.styleSheetLoader)}},IZ=async(t,s)=>{if(rn(we.fromDom(t.getElement()))){const d="ui/"+jE(t).getOr("default")+"/skin.shadowdom.css",h=tinymce.Resource.get(d);if(W(h))return ER(t,d,h,I0.DOM.styleSheetLoader),Promise.resolve();{const v=s+"/skin.shadowdom.min.css";return FL(t,v,I0.DOM.styleSheetLoader)}}},FZ=async(t,s)=>{jE(s).fold(()=>{const c=ZE(s);c&&s.contentCSS.push(c+(t?"/content.inline":"/content")+".min.css")},c=>{const d="ui/"+c+(t?"/content.inline":"/content")+".css",h=tinymce.Resource.get(d);if(W(h))ER(s,d,h,s.ui.styleSheetLoader);else{const v=ZE(s);v&&s.contentCSS.push(v+(t?"/content.inline":"/content")+".min.css")}});const a=ZE(s);if(!y4(s)&&W(a))return Promise.all([$Z(s,a),IZ(s,a)]).then()},LL=(t,s)=>FZ(t,s).then(xR(s),BZ(s,"Skin could not be loaded")),LZ=Ht(LL,!1),HZ=Ht(LL,!0),Pb=(t,s,a)=>t.translate([s,t.translate(a)]),F_=(t,s)=>{const a=(v,E,T,D)=>{const N=t.shared.providers.translate(v.title);if(v.type==="separator")return R.some({type:"separator",text:N});if(v.type==="submenu"){const L=Ie(v.getStyleItems(),V=>c(V,E,D));return E===0&&L.length<=0?R.none():R.some({type:"nestedmenuitem",text:N,enabled:L.length>0,getSubmenuItems:()=>Ie(v.getStyleItems(),V=>c(V,E,D))})}else return R.some({type:"togglemenuitem",text:N,icon:v.icon,active:v.isSelected(D),enabled:!T,onAction:s.onAction(v),...v.getStylePreview().fold(()=>({}),L=>({meta:{style:L}}))})},c=(v,E,T)=>{const D=v.type==="formatter"&&s.isInvalid(v);return E===0?D?[]:a(v,E,!1,T).toArray():a(v,E,D,T).toArray()},d=v=>{const E=s.getCurrentValue(),T=s.shouldHide?0:1;return Ie(v,D=>c(D,T,E))};return{validateItems:d,getFetch:(v,E)=>(T,D)=>{const N=E(),L=d(N),V=sy(L,rm.CLOSE_ON_EXECUTE,v,{isHorizontalMenu:!1,search:R.none()});D(V)}}},xp=(t,s,a)=>{const c=a.dataset,d=c.type==="basic"?()=>Ke(c.data,h=>I3(h,a.isSelectedFor,a.getPreviewFor)):c.getData;return{items:F_(s,a),getStyleItems:d}},gy=(t,s,a,c,d)=>{const{items:h,getStyleItems:v}=xp(t,s,a),E=D=>({getComponent:ae(D),setTooltip:N=>{const L=s.shared.providers.translate(N);_f(D.element,{"aria-label":L,title:L})}}),T=D=>{const N=L=>D.setTooltip(Pb(t,c,L.value));return t.on(d,N),vS(id(t,"NodeChange",L=>{const V=L.getComponent();a.updateText(V),on.set(L.getComponent(),!t.selection.isEditable())})(D),()=>t.off(d,N))};return h3({text:a.icon.isSome()?R.none():a.text,icon:a.icon,tooltip:R.from(a.tooltip),role:R.none(),fetch:h.getFetch(s,v),onSetup:T,getApi:E,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",s.shared)},Ep=t=>Ke(t,s=>{let a=s,c=s;const d=s.split("=");return d.length>1&&(a=d[0],c=d[1]),{title:a,format:c}}),HL=t=>({type:"basic",data:t});var hy;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(hy||(hy={}));const zZ=(t,s)=>s===hy.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),TR=(t,s,a)=>{const c=t.options.get(s);return{type:"basic",data:Ep(zZ(c,a))}},VZ="Align",zL="Alignment {0}",VL="left",_R=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],kR=t=>{const s=()=>fn(_R,E=>t.formatter.match(E.format)),a=E=>()=>t.formatter.match(E),c=E=>R.none,d=E=>{const D=s().fold(ae(VL),N=>N.title.toLowerCase());Gt(E,vp,{icon:`align-${D}`}),ZH(t,{value:D})},h=HL(_R),v=E=>()=>fn(_R,T=>T.format===E.format).each(T=>t.execCommand(T.command));return{tooltip:Pb(t,zL,VL),text:R.none(),icon:R.some("align-left"),isSelectedFor:a,getCurrentValue:R.none,getPreviewFor:c,onAction:v,updateText:d,dataset:h,shouldHide:!1,isInvalid:E=>!t.formatter.canApply(E.format)}},UZ=(t,s)=>gy(t,s,kR(t),zL,"AlignTextUpdate"),WZ=(t,s)=>{const a=xp(t,s,kR(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(VZ),onSetup:ki(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},L_=(t,s)=>{const a=s(),c=Ke(a,d=>d.format);return R.from(t.formatter.closest(c)).bind(d=>fn(a,h=>h.format===d)).orThunk(()=>an(t.formatter.match("p"),{title:"Paragraph",format:"p"}))},ZZ="Blocks",UL="Block {0}",OR="Paragraph",WL=t=>{const s=h=>()=>t.formatter.match(h),a=h=>()=>{const v=t.formatter.get(h);return v?R.some({tag:v.length>0&&(v[0].inline||v[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(h))}):R.none()},c=h=>{const E=L_(t,()=>d.data).fold(ae(OR),T=>T.title);Gt(h,Al,{text:E}),HB(t,{value:E})},d=TR(t,"block_formats",hy.SemiColon);return{tooltip:Pb(t,UL,OR),text:R.some(OR),icon:R.none(),isSelectedFor:s,getCurrentValue:R.none,getPreviewFor:a,onAction:VB(t),updateText:c,dataset:d,shouldHide:!1,isInvalid:h=>!t.formatter.canApply(h.format)}},jZ=(t,s)=>gy(t,s,WL(t),UL,"BlocksTextUpdate"),GZ=(t,s)=>{const a=xp(t,s,WL(t));t.ui.registry.addNestedMenuItem("blocks",{text:ZZ,onSetup:ki(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},ZL="Fonts",AR="Font {0}",H_="System Font",qZ=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],DR=t=>{const s=t.split(/\s*,\s*/);return Ke(s,a=>a.replace(/^['"]+|['"]+$/g,""))},jL=(t,s)=>s.length>0&&uo(s,a=>t.indexOf(a.toLowerCase())>-1),KZ=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const a=DR(t.toLowerCase());return jL(a,qZ)||jL(a,s)}else return!1},GL=t=>{const s=()=>{const T=Y=>Y?DR(Y)[0]:"",D=t.queryCommandValue("FontName"),N=E.data,L=D?D.toLowerCase():"",V=kP(t);return{matchOpt:fn(N,Y=>{const ie=Y.format;return ie.toLowerCase()===L||T(ie).toLowerCase()===T(L).toLowerCase()}).orThunk(()=>an(KZ(L,V),{title:H_,format:L})),font:D}},a=T=>D=>D.exists(N=>N.format===T),c=()=>{const{matchOpt:T}=s();return T},d=T=>()=>R.some({tag:"div",styles:T.indexOf("dings")===-1?{"font-family":T}:{}}),h=T=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,T.format)})},v=T=>{const{matchOpt:D,font:N}=s(),L=D.fold(ae(N),V=>V.title);Gt(T,Al,{text:L}),zB(t,{value:L})},E=TR(t,"font_family_formats",hy.SemiColon);return{tooltip:Pb(t,AR,H_),text:R.some(H_),icon:R.none(),isSelectedFor:a,getCurrentValue:c,getPreviewFor:d,onAction:h,updateText:v,dataset:E,shouldHide:!1,isInvalid:Pn}},qL=(t,s)=>gy(t,s,GL(t),AR,"FontFamilyTextUpdate"),YZ=(t,s)=>{const a=xp(t,s,GL(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(ZL),onSetup:ki(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},KL={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},XZ=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),c="\\.",d=E=>`(?:${E})?`,v=`[+-]?(?:${["Infinity",t+c+d(t)+d(a),c+t+d(a),t+d(a)].join("|")})`;return new RegExp(`^(${v})(.*)$`)})(),JZ=(t,s)=>kr(s,a=>kr(KL[a],c=>t===c)),z_=(t,s)=>R.from(XZ.exec(t)).bind(c=>{const d=Number(c[1]),h=c[2];return JZ(h,s)?R.some({value:d,unit:h}):R.none()}),QZ=(t,s)=>z_(t,s).map(({value:a,unit:c})=>a+c),YL={tab:ae(9),escape:ae(27),enter:ae(13),backspace:ae(8),delete:ae(46),left:ae(37),up:ae(38),right:ae(39),down:ae(40),space:ae(32),home:ae(36),end:ae(35),pageUp:ae(33),pageDown:ae(34)},ej=(t,s,a)=>{let c=R.none();const d=fe=>fe.map(_e=>wt.getValue(_e)).getOr(""),h=id(t,"NodeChange SwitchMode",fe=>{const _e=fe.getComponent();c=R.some(_e),a.updateInputValue(_e),on.set(_e,!t.selection.isEditable())}),v=fe=>({getComponent:ae(fe)}),E=Jt(ee),T=Ot("custom-number-input-events"),D=(fe,_e,Xe)=>{const Le=d(c),$e=a.getNewValue(Le,fe),ct=Le.length-`${$e}`.length,mt=c.map($t=>$t.element.dom.selectionStart-ct),Tn=c.map($t=>$t.element.dom.selectionEnd-ct);a.onAction($e,Xe),c.each($t=>{wt.setValue($t,$e),_e&&(mt.each(Qt=>$t.element.dom.selectionStart=Qt),Tn.each(Qt=>$t.element.dom.selectionEnd=Qt))})},N=(fe,_e)=>D((Xe,Le)=>Xe-Le,fe,_e),L=(fe,_e)=>D((Xe,Le)=>Xe+Le,fe,_e),V=fe=>Fi(fe.element).fold(R.none,_e=>(Ci(_e),R.some(!0))),j=fe=>D1(fe.element)?(Ef(fe.element).each(_e=>Ci(_e)),R.some(!0)):R.none(),Y=(fe,_e,Xe,Le)=>{const $e=Jt(ee),ct=s.shared.providers.translate(Xe),mt=Ot("altExecuting"),Tn=id(t,"NodeChange SwitchMode",Qt=>{on.set(Qt.getComponent(),!t.selection.isEditable())}),$t=Qt=>{on.isDisabled(Qt)||fe(!0)};return Yr.sketch({dom:{tag:"button",attributes:{title:ct,"aria-label":ct},classes:Le.concat(_e)},components:[g3(_e,s.shared.providers.icons)],buttonBehaviours:lt([on.config({}),En(mt,[yg({onSetup:Tn,getApi:v},$e),ad({getApi:v},$e),Ve(pl(),(Qt,ln)=>{(ln.event.raw.keyCode===YL.space()||ln.event.raw.keyCode===YL.enter())&&(on.isDisabled(Qt)||fe(!1))}),Ve(Bd(),$t),Ve(Hf(),$t)])]),eventOrder:{[pl()]:[mt,"keying"],[Bd()]:[mt,"alloy.base.behaviour"],[Hf()]:[mt,"alloy.base.behaviour"]}})},ie=bo(Y(fe=>N(!1,fe),"minus","Decrease font size",[])),Ee=bo(Y(fe=>L(!1,fe),"plus","Increase font size",[])),he=bo({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[vb.sketch({inputBehaviours:lt([on.config({}),En(T,[yg({onSetup:h,getApi:v},E),ad({getApi:v},E)]),En("input-update-display-text",[Ve(Al,(fe,_e)=>{wt.setValue(fe,_e.event.text)}),Ve(bv(),fe=>{a.onAction(wt.getValue(fe))}),Ve(Qg(),fe=>{a.onAction(wt.getValue(fe))})]),qt.config({mode:"special",onEnter:fe=>(D(yt,!0,!0),R.some(!0)),onEscape:V,onUp:fe=>(L(!0,!1),R.some(!0)),onDown:fe=>(N(!0,!1),R.some(!0)),onLeft:(fe,_e)=>(_e.cut(),R.none()),onRight:(fe,_e)=>(_e.cut(),R.none())})])})],behaviours:lt([cn.config({}),qt.config({mode:"special",onEnter:j,onSpace:j,onEscape:V}),En("input-wrapper-events",[Ve(Pd(),fe=>{St([ie,Ee],_e=>{const Xe=we.fromDom(_e.get(fe).element.dom);D1(Xe)&&xh(Xe)})})])])});return{dom:{tag:"div",classes:["tox-number-input"]},components:[ie.asSpec(),he.asSpec(),Ee.asSpec()],behaviours:lt([cn.config({}),qt.config({mode:"flow",focusInside:b.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:fe=>D1(fe.element)?R.none():(Ci(fe.element),R.some(!0))})])}},tj="Font sizes",RR="Font size {0}",XL="12pt",nj={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},oj={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},sj=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},rj=(t,s)=>/[0-9.]+px$/.test(t)?sj(parseInt(t,10)*72/96,s||0)+"pt":vt(oj,t).getOr(t),aj=t=>vt(nj,t).getOr(""),JL=t=>{const s=()=>{let T=R.none();const D=E.data,N=t.queryCommandValue("FontSize");if(N)for(let L=3;T.isNone()&&L>=0;L--){const V=rj(N,L),j=aj(V);T=fn(D,Y=>Y.format===N||Y.format===V||Y.format===j)}return{matchOpt:T,size:N}},a=T=>D=>D.exists(N=>N.format===T),c=()=>{const{matchOpt:T}=s();return T},d=ae(R.none),h=T=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,T.format)})},v=T=>{const{matchOpt:D,size:N}=s(),L=D.fold(ae(N),V=>V.title);Gt(T,Al,{text:L}),jH(t,{value:L})},E=TR(t,"font_size_formats",hy.Space);return{tooltip:Pb(t,RR,XL),text:R.some(XL),icon:R.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:c,onAction:h,updateText:v,dataset:E,shouldHide:!1,isInvalid:Pn}},QL=(t,s)=>gy(t,s,JL(t),RR,"FontSizeTextUpdate"),ij=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},cj=16,e5=t=>t>=0,lj=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:c=>Gt(c,Al,{text:s()}),onAction:(c,d)=>t.execCommand("FontSize",!1,c,{skip_focus:!d}),getNewValue:(c,d)=>{z_(c,["unsupportedLength","empty"]);const h=s(),v=z_(c,["unsupportedLength","empty"]).or(z_(h,["unsupportedLength","empty"])),E=v.map(V=>V.value).getOr(cj),T=wP(t),D=v.map(V=>V.unit).filter(V=>V!=="").getOr(T),N=d(E,ij(D).step),L=`${e5(N)?N:E}${D}`;return L!==h&&GH(t,{value:L}),L}}},t5=(t,s)=>ej(t,s,lj(t)),n5=(t,s)=>{const a=xp(t,s,JL(t));t.ui.registry.addNestedMenuItem("fontsize",{text:tj,onSetup:ki(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},uj="Formats",o5="Format {0}",s5=(t,s)=>{const a="Paragraph",c=v=>()=>t.formatter.match(v),d=v=>()=>{const E=t.formatter.get(v);return E!==void 0?R.some({tag:E.length>0&&(E[0].inline||E[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(v))}):R.none()},h=v=>{const E=L=>u_(L)?Ie(L.items,E):SF(L)?[{title:L.title,format:L.format}]:[],T=Ie(EF(t),E),N=L_(t,ae(T)).fold(ae(a),L=>L.title);Gt(v,Al,{text:N}),WH(t,{value:N})};return{tooltip:Pb(t,o5,a),text:R.some(a),icon:R.none(),isSelectedFor:c,getCurrentValue:R.none,getPreviewFor:d,onAction:VB(t),updateText:h,shouldHide:hP(t),isInvalid:v=>!t.formatter.canApply(v.format),dataset:s}},py=(t,s)=>{const a={type:"advanced",...s.styles};return gy(t,s,s5(t,a),o5,"StylesTextUpdate")},dj=(t,s)=>{const a={type:"advanced",...s.styles},c=xp(t,s,s5(t,a));t.ui.registry.addNestedMenuItem("styles",{text:uj,onSetup:ki(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},mj=ae([We("toggleClass"),We("fetch"),ou("onExecute"),xe("getHotspot",R.some),xe("getAnchorOverrides",ae({})),Wm(),ou("onItemExecute"),go("lazySink"),We("dom"),Un("onOpen"),fr("splitDropdownBehaviours",[Ws,qt,cn]),xe("matchWidth",!1),xe("useMinWidth",!1),xe("eventOrder",{}),go("role")].concat(kD())),fj=_a({factory:Yr,schema:[We("dom")],name:"arrow",defaults:()=>({buttonBehaviours:lt([cn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each($d)},buttonBehaviours:lt([kn.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),gj=_a({factory:Yr,schema:[We("dom")],name:"button",defaults:()=>({buttonBehaviours:lt([cn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),hj=ae([fj,gj,xi({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[We("text")],name:"aria-descriptor"}),xl({schema:[x1()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(c=>{t.onItemExecute(c,s,a)})}})}),i$()]),pj=(t,s,a,c)=>{const d=N=>{Bn.getCurrent(N).each(L=>{ro.highlightFirst(L),qt.focusIn(L)})},h=N=>{TD(t,yt,N,c,d,_i.HighlightMenuAndItem).get(ee)},v=N=>(h(N),R.some(!0)),E=N=>{const L=Jd(N,t,"button");return $d(L),R.some(!0)},T={...Ho([No((N,L)=>{Po(N,t,"aria-descriptor").each(j=>{const Y=Ot("aria");xt(j.element,"id",Y),xt(N.element,"aria-describedby",Y)})})]),...om(R.some(h))},D={repositionMenus:N=>{kn.isOn(N)&&d$(N)}};return{uid:t.uid,dom:t.dom,components:s,apis:D,eventOrder:{...t.eventOrder,[Gi()]:["disabling","toggling","alloy.base.behaviour"]},events:T,behaviours:Ys(t.splitDropdownBehaviours,[Ws.config({others:{sandbox:N=>{const L=Jd(N,t,"arrow");return _D(t,N,{onOpen:()=>{kn.on(L),kn.on(N)},onClose:()=>{kn.off(L),kn.off(N)}})}}}),qt.config({mode:"special",onSpace:E,onEnter:E,onDown:v}),cn.config({}),kn.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},V_=ka({name:"SplitDropdown",configFields:mj(),partFields:hj(),factory:pj,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),r5=t=>({isEnabled:()=>!on.isDisabled(t),setEnabled:s=>on.set(t,!s),setText:s=>Gt(t,Al,{text:s}),setIcon:s=>Gt(t,vp,{icon:s})}),MR=t=>({setActive:s=>{kn.set(t,s)},isActive:()=>kn.isOn(t),isEnabled:()=>!on.isDisabled(t),setEnabled:s=>on.set(t,!s),setText:s=>Gt(t,Al,{text:s}),setIcon:s=>Gt(t,vp,{icon:s})}),a5=(t,s)=>t.map(a=>({"aria-label":s.translate(a),title:s.translate(a)})).getOr({}),i5=Ot("focus-button"),U_=(t,s,a,c,d)=>{const h=s.map(E=>bo(EI(E,"tox-tbtn",d))),v=t.map(E=>bo(bp(E,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:a5(a,d)},components:Sb([v.map(E=>E.asSpec()),h.map(E=>E.asSpec())]),eventOrder:{[dr()]:["focusing","alloy.base.behaviour",Ab],[lc()]:[Ab,"toolbar-group-button-events"]},buttonBehaviours:lt([kl.toolbarButton(d.isDisabled),Nr(),En(Ab,[No((E,T)=>m3(E)),Ve(Al,(E,T)=>{h.bind(D=>D.getOpt(E)).each(D=>{vn.set(D,[$s(d.translate(T.event.text))])})}),Ve(vp,(E,T)=>{v.bind(D=>D.getOpt(E)).each(D=>{vn.set(D,[bp(T.event.icon,d.icons)])})}),Ve(dr(),(E,T)=>{T.event.prevent(),Fn(E,i5)})])].concat(c.getOr([])))}},c5=(t,s,a,c)=>{const d=s.shared,h=Jt(ee),v={toolbarButtonBehaviours:[],getApi:r5,onSetup:t.onSetup},E=[En("toolbar-group-button-events",[yg(v,h),ad(v,h)])];return Sp.sketch({lazySink:d.getSink,fetch:()=>Wa.nu(T=>{T(Ke(a(t.items),R_))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:U_(t.icon,t.text,t.tooltip,R.some(E),d.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:c}}}})},l5=(t,s,a)=>{var c;const d=Jt(ee),h=U_(t.icon,t.text,t.tooltip,R.none(),a);return Yr.sketch({dom:h.dom,components:h.components,eventOrder:QT,buttonBehaviours:{...lt([En("toolbar-button-events",[N9({onAction:t.onAction,getApi:s.getApi}),yg(s,d),ad(s,d)]),kl.toolbarButton(()=>!t.enabled||a.isDisabled()),Nr()].concat(s.toolbarButtonBehaviours)),[Ab]:(c=h.buttonBehaviours)===null||c===void 0?void 0:c[Ab]}})},bj=(t,s)=>u5(t,s,[]),u5=(t,s,a)=>l5(t,{toolbarButtonBehaviours:a.length>0?[En("toolbarButtonWith",a)]:[],getApi:r5,onSetup:t.onSetup},s),vj=(t,s)=>d5(t,s,[]),d5=(t,s,a)=>l5(t,{toolbarButtonBehaviours:[vn.config({}),kn.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[En("toolbarToggleButtonWith",a)]:[]),getApi:MR,onSetup:t.onSetup},s),yj=(t,s,a)=>c=>Wa.nu(d=>s.fetch(d)).map(d=>R.from(OT(Eo(vD(Ot("menu-value"),d,h=>{s.onItemAction(t(c),h)},s.columns,s.presets,rm.CLOSE_ON_EXECUTE,s.select.getOr(Pn),a),{movement:ET(s.columns,s.presets),menuBehaviours:mS.unnamedEvents(s.columns!=="auto"?[]:[No((h,v)=>{dS(h,4,KE(s.presets)).each(({numRows:E,numColumns:T})=>{qt.setGridSize(h,E,T)})})])})))),m5=(t,s)=>{const a=h=>({isEnabled:()=>!on.isDisabled(h),setEnabled:v=>on.set(h,!v),setIconFill:(v,E)=>{Vs(h.element,`svg path[class="${v}"], rect[class="${v}"]`).each(T=>{xt(T,"fill",E)})},setActive:v=>{xt(h.element,"aria-pressed",v),Vs(h.element,"span").each(E=>{h.getSystem().getByDom(E).each(T=>kn.set(T,v))})},isActive:()=>Vs(h.element,"span").exists(v=>h.getSystem().getByDom(v).exists(kn.isOn)),setText:v=>Vs(h.element,"span").each(E=>h.getSystem().getByDom(E).each(T=>Gt(T,Al,{text:v}))),setIcon:v=>Vs(h.element,"span").each(E=>h.getSystem().getByDom(E).each(T=>Gt(T,vp,{icon:v}))),setTooltip:v=>{const E=s.providers.translate(v);_f(h.element,{"aria-label":E,title:E})}}),c=Jt(ee),d={getApi:a,onSetup:t.onSetup};return V_.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...a5(t.tooltip,s.providers)}},onExecute:h=>{const v=a(h);v.isEnabled()&&t.onAction(v)},onItemExecute:(h,v,E)=>{},splitDropdownBehaviours:lt([kl.splitButton(s.providers.isDisabled),Nr(),En("split-dropdown-events",[No((h,v)=>m3(h)),Ve(i5,cn.focus),yg(d,c),ad(d,c)]),kS.config({})]),eventOrder:{[lc()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:yj(a,t,s.providers),parts:{menu:z0(!1,t.columns,t.presets)},components:[V_.parts.button(U_(t.icon,t.text,R.none(),R.some([kn.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),s.providers)),V_.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:uP("chevron-down",s.providers.icons)},buttonBehaviours:lt([kl.splitButton(s.providers.isDisabled),Nr(),$E()])}),V_.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},wj=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],o2=(t,s)=>(a,c,d)=>{const h=t(a).mapError(v=>Ia(v)).getOrDie();return s(h,c,d)},Cj={button:o2(rB,(t,s)=>bj(t,s.shared.providers)),togglebutton:o2(V4,(t,s)=>vj(t,s.shared.providers)),menubutton:o2(rR,(t,s)=>LS(t,"tox-tbtn",s,R.none(),!1)),splitbutton:o2(HW,(t,s)=>m5(t,s.shared)),grouptoolbarbutton:o2(FW,(t,s,a)=>{const c=a.ui.registry.getAll().buttons,d=v=>j_(a,{buttons:c,toolbar:v,allowToolbarGroups:!1},s,R.none()),h={[kh]:s.shared.header.isPositionedAtTop()?Zc.TopToBottom:Zc.BottomToTop};switch(L0(a)){case mu.floating:return c5(t,s,d,h);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},Sj=(t,s,a)=>vt(Cj,t.type).fold(()=>(console.error("skipping button defined by",t),R.none()),c=>R.some(c(t,s,a))),s2={styles:py,fontsize:QL,fontsizeinput:t5,fontfamily:qL,blocks:jZ,align:UZ},xj=t=>{const s=Ke(wj,a=>{const c=ko(a.items,d=>no(t,d)||no(s2,d));return{name:a.name,items:c}});return ko(s,a=>a.items.length>0)},W_=t=>{const s=t.split("|");return Ke(s,a=>({items:a.trim().split(" ")}))},Z_=t=>ze(t,s=>no(s,"name")&&no(s,"items")),f5=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?xj(a):W(s)?W_(s):Z_(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},Ej=(t,s,a,c,d,h)=>vt(s,a.toLowerCase()).orThunk(()=>h.bind(v=>Js(v,E=>vt(s,E+a.toLowerCase())))).fold(()=>vt(s2,a.toLowerCase()).map(v=>v(t,d)),v=>v.type==="grouptoolbarbutton"&&!c?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),R.none()):Sj(v,d,t)),j_=(t,s,a,c)=>{const d=f5(s),h=Ke(d,v=>{const E=Ie(v.items,T=>T.trim().length===0?[]:Ej(t,s.buttons,T,s.allowToolbarGroups,a,c).toArray());return{title:R.from(t.translate(v.name)),items:E}});return ko(h,v=>v.items.length>0)},g5=(t,s,a,c)=>{const d=s.mainUi.outerContainer,h=a.toolbar,v=a.buttons;if(ze(h,W)){const E=h.map(T=>{const D={toolbar:T,buttons:v,allowToolbarGroups:a.allowToolbarGroups};return j_(t,D,c,R.none())});jo.setToolbars(d,E)}else jo.setToolbar(d,j_(t,a,c,R.none()))},h5=dl(),Tj=h5.os.isiOS()&&h5.os.version.major<=12,G_=(t,s)=>{const{uiMotherships:a}=s,c=t.dom;let d=t.getWin();const h=t.getDoc().documentElement,v=Jt(io(d.innerWidth,d.innerHeight)),E=Jt(io(h.offsetWidth,h.offsetHeight)),T=()=>{const V=v.get();(V.left!==d.innerWidth||V.top!==d.innerHeight)&&(v.set(io(d.innerWidth,d.innerHeight)),pT(t))},D=()=>{const V=t.getDoc().documentElement,j=E.get();(j.left!==V.offsetWidth||j.top!==V.offsetHeight)&&(E.set(io(V.offsetWidth,V.offsetHeight)),pT(t))},N=V=>{VH(t,V)};c.bind(d,"resize",T),c.bind(d,"scroll",N);const L=Yv(we.fromDom(t.getBody()),"load",D);t.on("hide",()=>{St(a,V=>{bn(V.element,"display","none")})}),t.on("show",()=>{St(a,V=>{eo(V.element,"display")})}),t.on("NodeChange",D),t.on("remove",()=>{L.unbind(),c.unbind(d,"resize",T),c.unbind(d,"scroll",N),d=null})},p5=(t,s,a)=>{pg(t)&&qd(a.mainUi.mothership.element,a.popupUi.mothership),Kr(s,a.dialogUi.mothership)};var b5=Object.freeze({__proto__:null,render:(t,s,a,c,d)=>{const{mainUi:h,uiMotherships:v}=s,E=Jt(0),T=h.outerContainer;LZ(t);const D=we.fromDom(d.targetNode),N=ot(Be(D));qd(D,h.mothership),p5(t,N,s),t.on("SkinLoaded",()=>{jo.setSidebar(T,a.sidebar,TP(t)),g5(t,s,a,c),E.set(t.getWin().innerWidth),jo.setMenubar(T,I_(t,a)),jo.setViews(T,a.views),G_(t,s)});const L=jo.getSocket(T).getOrDie("Could not find expected socket element");if(Tj){ei(L.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const ie=S9(()=>{t.dispatch("ScrollContent")},20),Ee=za(L.element,"scroll",ie.throttle);t.on("remove",Ee.unbind)}yB(t,s),t.addCommand("ToggleSidebar",(ie,Ee)=>{jo.toggleSidebar(T,Ee),t.dispatch("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",()=>{var ie;return(ie=jo.whichSidebar(T))!==null&&ie!==void 0?ie:""}),t.addCommand("ToggleView",(ie,Ee)=>{if(jo.toggleView(T,Ee)){const he=T.element;h.mothership.broadcastOn([iu()],{target:he}),St(v,fe=>{fe.broadcastOn([iu()],{target:he})}),pe(jo.whichView(T))&&(t.focus(),t.nodeChanged(),jo.refreshToolbar(T))}}),t.addQueryValueHandler("ToggleView",()=>{var ie;return(ie=jo.whichView(T))!==null&&ie!==void 0?ie:""});const V=L0(t),j=()=>{jo.refreshToolbar(s.mainUi.outerContainer)};(V===mu.sliding||V===mu.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const ie=t.getWin().innerWidth;ie!==E.get()&&(j(),E.set(ie))});const Y={setEnabled:ie=>{dT(s,!ie)},isEnabled:()=>!on.isDisabled(T)};return{iframeContainer:L.element.dom,editorContainer:T.element.dom,api:Y}}});const q_=t=>/^[0-9\.]+(|px)$/i.test(""+t)?R.some(parseInt(""+t,10)):R.none(),NR=t=>en(t)?t+"px":t,r2=(t,s,a)=>{const c=s.filter(h=>t<h),d=a.filter(h=>t>h);return c.or(d).getOr(t)},kj=t=>{const s=l4(t),a=m4(t),c=f4(t);return q_(s).map(d=>r2(d,a,c))},Oj=t=>kj(t).getOr(l4(t)),v5=t=>{const s=u4(t),a=d4(t),c=IE(t);return q_(s).map(d=>r2(d,a,c))},Aj=t=>v5(t).getOr(u4(t)),{ToolbarLocation:PR,ToolbarMode:by}=q7,Dj=40,Rj=(t,s,a,c,d)=>{const{mainUi:h,uiMotherships:v}=a,E=I0.DOM,T=op(t),D=aS(t),N=IE(t).or(v5(t)),L=c.shared.header,V=L.isPositionedAtTop,j=L0(t),Y=j===by.sliding||j===by.floating,ie=Jt(!1),Ee=()=>ie.get()&&!t.removed,he=Yt=>Y?Yt.fold(ae(0),qn=>qn.components().length>1?ms(qn.components()[1].element):0):0,fe=Yt=>{switch(oS(t)){case PR.auto:const qn=jo.getToolbar(h.outerContainer),ft=he(qn),Bt=ms(Yt.element)-ft,mn=ws(s);if(mn.y>Bt)return"top";{const nn=Nc(s),wn=Math.max(nn.dom.scrollHeight,ms(nn));return mn.bottom<wn-Bt||Ur().bottom<mn.bottom-Bt?"bottom":"top"}case PR.bottom:return"bottom";case PR.top:default:return"top"}},_e=Yt=>{d.on(qn=>{Xs.setModes(qn,[Yt]),L.setDockingMode(Yt);const ft=V()?Zc.TopToBottom:Zc.BottomToTop;xt(qn.element,kh,ft)})},Xe=()=>{d.on(Yt=>{const qn=N.getOrThunk(()=>{const ft=q_(Ds(Os(),"margin-left")).getOr(0);return ir(Os())-ac(s).left+ft});bn(Yt.element,"max-width",qn+"px")})},Le=Yt=>{d.on(qn=>{const ft=jo.getToolbar(h.outerContainer),Bt=he(ft),mn=ws(s),{top:$n,left:nn}=$e(t,h.outerContainer.element).fold(()=>({top:V()?Math.max(mn.y-ms(qn.element)+Bt,0):mn.bottom,left:mn.x}),ao=>{var li;const is=ws(ao),kc=(li=ao.dom.scrollTop)!==null&&li!==void 0?li:0,pd=wo(ao,Os()),Mp=pd?Math.max(mn.y-ms(qn.element)+Bt,0):mn.y-is.y+kc-ms(qn.element)+Bt;return{top:V()?Mp:mn.bottom,left:pd?mn.x:mn.x-is.x}}),wn={position:"absolute",left:Math.round(nn)+"px",top:Math.round($n)+"px"},$o=Yt.map(ao=>{const li=$a(),is=150,kc=window.innerWidth-(nn-li.left);return{width:Math.max(Math.min(ao,kc),is)+"px"}}).getOr({});ei(h.outerContainer.element,{...wn,...$o})})},$e=(Yt,qn)=>pg(Yt)?Mb(qn):R.none(),ct=()=>{St(v,Yt=>{Yt.broadcastOn([ag()],{})})},mt=()=>{if(T)return R.none();if(ac(h.outerContainer.element).left+Ba(h.outerContainer.element)>=window.innerWidth-Dj||qs(h.outerContainer.element,"width").isSome()){bn(h.outerContainer.element,"position","absolute"),bn(h.outerContainer.element,"left","0px"),eo(h.outerContainer.element,"width");const qn=Ba(h.outerContainer.element);return R.some(qn)}else return R.none()},Tn=Yt=>{if(!Ee())return;T||Xe();const qn=T?R.none():mt();Y&&jo.refreshToolbar(h.outerContainer),T||Le(qn),D&&d.on(Yt),ct()},$t=()=>T||!D||!Ee()?!1:d.get().exists(Yt=>{const qn=L.getDockingMode(),ft=fe(Yt);return ft!==qn?(_e(ft),!0):!1});return{isVisible:Ee,isPositionedAtTop:V,show:()=>{ie.set(!0),bn(h.outerContainer.element,"display","flex"),E.addClass(t.getBody(),"mce-edit-focus"),St(v,Yt=>{eo(Yt.element,"display")}),$t(),pg(t)?Tn(Yt=>Xs.isDocked(Yt)?Xs.reset(Yt):Xs.refresh(Yt)):Tn(Xs.refresh)},hide:()=>{ie.set(!1),bn(h.outerContainer.element,"display","none"),E.removeClass(t.getBody(),"mce-edit-focus"),St(v,Yt=>{bn(Yt.element,"display","none")})},update:Tn,updateMode:()=>{$t()&&Tn(Xs.reset)},repositionPopups:ct}},y5=(t,s)=>{const a=ws(t);return{pos:s?a.y:a.bottom,bounds:a}},w5=(t,s,a,c)=>{const d=Jt(y5(s,a.isPositionedAtTop())),h=D=>{const{pos:N,bounds:L}=y5(s,a.isPositionedAtTop()),{pos:V,bounds:j}=d.get(),Y=L.height!==j.height||L.width!==j.width;d.set({pos:N,bounds:L}),Y&&pT(t,D),a.isVisible()&&(V!==N?a.update(Xs.reset):Y&&(a.updateMode(),a.repositionPopups()))};c||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(Xs.reset)),t.on("NodeChange keydown",D=>{requestAnimationFrame(()=>h(D))});let v=0;const E=KT(()=>a.update(Xs.refresh),33);t.on("ScrollWindow",()=>{const D=$a().left;D!==v&&(v=D,E.throttle()),a.updateMode()}),pg(t)&&t.on("ElementScroll",D=>{a.update(Xs.refresh)});const T=Zd();T.set(Yv(we.fromDom(t.getBody()),"load",D=>h(D.raw))),t.on("remove",()=>{T.clear()})};var C5=Object.freeze({__proto__:null,render:(t,s,a,c,d)=>{const{mainUi:h}=s,v=Dn(),E=we.fromDom(d.targetNode),T=Rj(t,E,s,c,v),D=vP(t);HZ(t);const N=()=>{if(v.isSet()){T.show();return}v.set(jo.getHeader(h.outerContainer).getOrDie());const V=S4(t);pg(t)?(qd(E,h.mothership),qd(E,s.popupUi.mothership)):Kr(V,h.mothership),Kr(V,s.dialogUi.mothership),g5(t,s,a,c),jo.setMenubar(h.outerContainer,I_(t,a)),T.show(),w5(t,E,T,D),t.nodeChanged()};t.on("show",N),t.on("hide",T.hide),D||(t.on("focus",N),t.on("blur",T.hide)),t.on("init",()=>{(t.hasFocus()||D)&&N()}),yB(t,s);const L={show:N,hide:T.hide,setEnabled:V=>{dT(s,!V)},isEnabled:()=>!on.isDisabled(h.outerContainer)};return{editorContainer:h.outerContainer.element.dom,api:L}}});const Mj=()=>{const t=Dn(),s=Dn(),a=Dn();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const h=t.get().map(E=>E.mothership),v=s.get().map(E=>E.mothership);return h.fold(()=>v.toArray(),E=>v.fold(()=>[E],T=>wo(E.element,T.element)?[E]:[E,T]))},lazyGetInOuterOrDie:(h,v)=>()=>a.get().bind(E=>v(E.outerContainer)).getOrDie(`Could not find ${h} element in OuterContainer`)}},Nj="contexttoolbar-show",S5="contexttoolbar-hide",Pj=t=>({hide:()=>Fn(t,d1()),getValue:()=>wt.getValue(t)}),x5=(t,s)=>Ve(d3,(a,c)=>{const d=t.get(a),h=Pj(d);s.onAction(h,c.event.buttonApi)}),a2=(t,s,a)=>{const{primary:c,...d}=s.original,h=Mo(rB({...d,type:"button",onAction:ee}));return u5(h,a,[x5(t,s)])},E5=(t,s,a)=>{const{primary:c,...d}=s.original,h=Mo(V4({...d,type:"togglebutton",onAction:ee}));return d5(h,a,[x5(t,s)])},Bj=t=>t.type==="contextformtogglebutton",$j=(t,s,a)=>Bj(s)?E5(t,s,a):a2(t,s,a),T5=(t,s,a)=>{const c=Ke(s,v=>bo($j(t,v,a)));return{asSpecs:()=>Ke(c,v=>v.asSpec()),findPrimary:v=>Js(s,(E,T)=>E.primary?R.from(c[T]).bind(D=>D.getOpt(v)).filter(Te(on.isDisabled)):R.none())}},K_=(t,s)=>{const a=t.label.fold(()=>({}),h=>({"aria-label":h})),c=bo(vb.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:lt([qt.config({mode:"special",onEnter:h=>d.findPrimary(h).map(v=>($d(v),!0)),onLeft:(h,v)=>(v.cut(),R.none()),onRight:(h,v)=>(v.cut(),R.none())})])})),d=T5(c,t.commands,s);return[{title:R.none(),items:[c.asSpec()]},{title:R.none(),items:d.asSpecs()}]},_5={renderContextForm:(t,s,a)=>M_({type:t,uid:Ot("context-toolbar"),initGroups:K_(s,a),onEscape:R.none,cyclicKeying:!0,providers:a}),buildInitGroups:K_},k5=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,vy=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=Fg(we.fromDom(t.startContainer),t.startOffset).element;return(na(a)?oa(a):R.some(a)).filter(po).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},yy=t=>{const s=t.selection.getRng(),a=vy(s);if(t.inline){const c=$a();return gs(c.left+a.left,c.top+a.top,a.width,a.height)}else{const c=fi(we.fromDom(t.getBody()));return gs(c.x+a.left,c.y+a.top,a.width,a.height)}},BR=(t,s)=>s.filter(a=>Xn(a)&&ku(a)).map(fi).getOrThunk(()=>yy(t)),O5=(t,s,a)=>{const c=Math.max(t.x+a,s.x),d=Math.min(t.right-a,s.right);return{x:c,width:d-c}},A5=(t,s,a,c,d,h)=>{const v=we.fromDom(t.getContainer()),E=Vs(v,".tox-editor-header").getOr(v),T=ws(E),D=T.y>=s.bottom,N=c&&!D;if(t.inline&&N)return{y:Math.max(T.bottom+h,a.y),bottom:a.bottom};if(t.inline&&!N)return{y:a.y,bottom:Math.min(T.y-h,a.bottom)};const L=d==="line"?ws(v):s;return N?{y:Math.max(T.bottom+h,a.y),bottom:Math.min(L.bottom-h,a.bottom)}:{y:Math.max(L.y+h,a.y),bottom:Math.min(T.y-h,a.bottom)}},D5=(t,s,a,c=0)=>{const d=Wg(window),h=ws(we.fromDom(t.getContentAreaContainer())),v=WE(t)||GE(t)||rS(t),{x:E,width:T}=O5(h,d,c);if(t.inline&&!v)return gs(E,d.y,T,d.height);{const D=s.header.isPositionedAtTop(),{y:N,bottom:L}=A5(t,h,d,D,a,c);return gs(E,N,T,L-N)}},i2=12,R5={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},M5={maxHeightFunction:_h(),maxWidthFunction:fR()},Fj=(t,s)=>{const a=t.selection.getRng(),c=Fg(we.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&wo(c.element,s)},Lj=(t,s,a)=>{const c=qs(t,"position");bn(t,"position",s);const d=a(t);return c.each(h=>bn(t,"position",h)),d},N5=t=>t==="node",P5=(t,s,a,c,d)=>{const h=yy(t),v=c.lastElement().exists(E=>wo(a,E));if(Fj(t,a))return v?B3:md;if(v)return Lj(s,c.getMode(),()=>k5(h,ws(s),-20)&&!c.isReposition()?MU:B3);{const E=c.getMode()==="fixed"?d.y+$a().top:d.y,T=ms(s)+i2;return E+T<=h.y?md:iy}},Y_=(t,s,a,c)=>{const d=T=>(D,N,L,V,j)=>{const Y=P5(t,V,T,a,j),ie={...D,y:j.y,height:j.height};return{...Y(ie,N,L,V,j),alwaysFit:!0}},h=T=>N5(c)?[d(T)]:[];return s?{onLtr:T=>[Sr,Cr,ua,ri,Ea,La].concat(h(T)),onRtl:T=>[Sr,ua,Cr,Ea,ri,La].concat(h(T))}:{onLtr:T=>[La,Sr,ri,Cr,Ea,ua].concat(h(T)),onRtl:T=>[La,Sr,Ea,ua,ri,Cr].concat(h(T))}},B5=(t,s,a,c)=>s==="line"?{bubble:Ju(i2,0,R5),layouts:{onLtr:()=>[Bw],onRtl:()=>[O1]},overrides:M5}:{bubble:Ju(0,i2,R5,1/i2),layouts:Y_(t,a,c,s),overrides:M5},X_=(t,s)=>{const a=ko(s,h=>h.predicate(t.dom)),{pass:c,fail:d}=Dc(a,h=>h.type==="contexttoolbar");return{contextToolbars:c,contextForms:d}},$R=t=>{if(t.length<=1)return t;{const s=h=>kr(t,v=>v.position===h),a=h=>ko(t,v=>v.position===h),c=s("selection"),d=s("node");if(c||d)if(d&&c){const h=a("node"),v=Ke(a("selection"),E=>({...E,position:"node"}));return h.concat(v)}else return a(c?"selection":"node");else return a("line")}},Hj=t=>{if(t.length<=1)return t;{const s=c=>fn(t,d=>d.position===c);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(c=>c.position).fold(()=>[],c=>ko(t,d=>d.position===c))}},$5=(t,s,a)=>{const c=X_(t,s);if(c.contextForms.length>0)return R.some({elem:t,toolbars:[c.contextForms[0]]});{const d=X_(t,a);if(d.contextForms.length>0)return R.some({elem:t,toolbars:[d.contextForms[0]]});if(c.contextToolbars.length>0||d.contextToolbars.length>0){const h=$R(c.contextToolbars.concat(d.contextToolbars));return R.some({elem:t,toolbars:h})}else return R.none()}},zj=(t,s,a)=>t(s)?R.none():N2(s,c=>{if(po(c)){const{contextToolbars:d,contextForms:h}=X_(c,a.inNodeScope),v=h.length>0?h:Hj(d);return v.length>0?R.some({elem:c,toolbars:v}):R.none()}else return R.none()},t),Vj=(t,s)=>{const a=we.fromDom(s.getBody()),c=v=>wo(v,a),d=v=>!c(v)&&!Lr(a,v),h=we.fromDom(s.selection.getNode());return d(h)?R.none():$5(h,t.inNodeScope,t.inEditorScope).orThunk(()=>zj(c,h,t))},J_=(t,s)=>{const a={},c=[],d=[],h={},v={},E=(N,L)=>{const V=Mo(uT(L));a[N]=V,V.launch.map(j=>{h["form:"+N]={...L.launch,type:j.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(V)}}}),V.scope==="editor"?d.push(V):c.push(V),v[N]=V},T=(N,L)=>{iB(L).each(V=>{L.scope==="editor"?d.push(V):c.push(V),v[N]=V})},D=ns(t);return St(D,N=>{const L=t[N];L.type==="contextform"?E(N,L):L.type==="contexttoolbar"&&T(N,L)}),{forms:a,inNodeScope:c,inEditorScope:d,lookupTable:v,formNavigators:h}},IR=Ot("forward-slide"),I5=Ot("backward-slide"),FR=Ot("change-slide-event"),LR="tox-pop--resizing",Uj=t=>{const s=Jt([]);return xs.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:a=>{s.set([]),xs.getContent(a).each(c=>{eo(c.element,"visibility")}),ps(a.element,LR),eo(a.element,"width")},inlineBehaviours:lt([En("context-toolbar-events",[Uu(Vf(),(a,c)=>{c.event.raw.propertyName==="width"&&(ps(a.element,LR),eo(a.element,"width"))}),Ve(FR,(a,c)=>{const d=a.element;eo(d,"width");const h=ir(d);xs.setContent(a,c.event.contents),zs(d,LR);const v=ir(d);bn(d,"width",h+"px"),xs.getContent(a).each(E=>{c.event.focus.bind(T=>(Ci(T),wl(d))).orThunk(()=>(qt.focusIn(E),Xu(Be(d))))}),setTimeout(()=>{bn(a.element,"width",v+"px")},0)}),Ve(IR,(a,c)=>{xs.getContent(a).each(d=>{s.set(s.get().concat([{bar:d,focus:Xu(Be(a.element))}]))}),Gt(a,FR,{contents:c.event.forwardContents,focus:R.none()})}),Ve(I5,(a,c)=>{pm(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),Gt(a,FR,{contents:dc(d.bar),focus:d.focus})})})]),qt.config({mode:"special",onEscape:a=>pm(s.get()).fold(()=>t.onEscape(),c=>(Fn(a,I5),R.some(!0)))})]),lazySink:()=>xn.value(t.sink)})},HR="tox-pop--transition",F5=(t,s,a,c)=>{const d=c.backstage,h=d.shared,v=dl().deviceType.isTouch,E=Dn(),T=Dn(),D=Dn(),N=xa(Uj({sink:a,onEscape:()=>(t.focus(),R.some(!0))})),L=()=>{const $t=D.get().getOr("node"),Qt=N5($t)?1:0;return D5(t,h,$t,Qt)},V=()=>!t.removed&&!(v()&&d.isContextMenuOpen()),j=$t=>Ma($i($t,E.get(),wo),!0),Y=()=>{if(V()){const $t=L(),Qt=Ma(D.get(),"node")?BR(t,E.get()):yy(t);return $t.height<=0||!k5(Qt,$t,.01)}else return!0},ie=()=>{E.clear(),T.clear(),D.clear(),xs.hide(N)},Ee=()=>{if(xs.isOpen(N)){const $t=N.element;eo($t,"display"),Y()?bn($t,"display","none"):(T.set(0),xs.reposition(N))}},he=$t=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[$t],behaviours:lt([qt.config({mode:"acyclic"}),En("pop-dialog-wrap-events",[No(Qt=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>qt.focusIn(Qt))}),Wu(Qt=>{t.shortcuts.remove("ctrl+F9")})])])}),fe=fs(()=>J_(s,$t=>{const Qt=Le([$t]);Gt(N,IR,{forwardContents:he(Qt)})})),_e=($t,Qt)=>j_(t,{buttons:$t,toolbar:Qt.items,allowToolbarGroups:!1},c.backstage,R.some(["form:"])),Xe=($t,Qt)=>_5.buildInitGroups($t,Qt),Le=$t=>{const{buttons:Qt}=t.ui.registry.getAll(),ln=fe(),ho={...Qt,...ln.formNavigators},Yt=L0(t)===mu.scrolling?mu.scrolling:mu.default,qn=Wt(Ke($t,ft=>ft.type==="contexttoolbar"?_e(ho,ft):Xe(ft,h.providers)));return M_({type:Yt,uid:Ot("context-toolbar"),initGroups:qn,onEscape:R.none,cyclicKeying:!0,providers:h.providers})},$e=($t,Qt)=>{const ln=$t==="node"?h.anchors.node(Qt):h.anchors.cursor(),ho=B5(t,$t,v(),{lastElement:E.get,isReposition:()=>Ma(T.get(),0),getMode:()=>Ta.getMode(a)});return Eo(ln,ho)},ct=($t,Qt)=>{if(Tn.cancel(),!V())return;const ln=Le($t),ho=$t[0].position,Yt=$e(ho,Qt);D.set(ho),T.set(1);const qn=N.element;eo(qn,"display"),j(Qt)||(ps(qn,HR),Ta.reset(a,N)),xs.showWithinBounds(N,he(ln),{anchor:Yt,transition:{classes:[HR],mode:"placement"}},()=>R.some(L())),Qt.fold(E.clear,E.set),Y()&&bn(qn,"display","none")};let mt=!1;const Tn=KT(()=>{if(!(!t.hasFocus()||t.removed||mt))if(mr(N.element,HR))Tn.throttle();else{const $t=fe();Vj($t,t).fold(ie,Qt=>{ct(Qt.toolbars,R.some(Qt.elem))})}},17);t.on("init",()=>{t.on("remove",ie),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",Ee),t.on("click keyup focus SetContent",Tn.throttle),t.on(S5,ie),t.on(Nj,$t=>{const Qt=fe();vt(Qt.lookupTable,$t.toolbarKey).each(ln=>{ct([ln],an($t.target!==t,$t.target)),xs.getContent(N).each(qt.focusIn)})}),t.on("focusout",$t=>{hb.setEditorTimeout(t,()=>{wl(a.element).isNone()&&wl(N.element).isNone()&&ie()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&ie()}),t.on("AfterProgressState",$t=>{$t.state?ie():t.hasFocus()&&Tn.throttle()}),t.on("dragstart",()=>{mt=!0}),t.on("dragend drop",()=>{mt=!1}),t.on("NodeChange",$t=>{wl(N.element).fold(Tn.throttle,ee)})})},L5=t=>{St([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:Cc(t,a.cmd),onSetup:bT(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:ki(t),onAction:Cc(t,"JustifyNone")})},H5=(t,s)=>{const a=()=>{const c=s.getOptions(t),d=s.getCurrent(t).map(s.hash),h=Dn();return Ke(c,v=>({type:"togglemenuitem",text:s.display(v),onSetup:E=>{const T=N=>{N&&(h.on(L=>L.setActive(!1)),h.set(E)),E.setActive(N)};T(Ma(d,s.hash(v)));const D=s.watcher(t,v,T);return()=>{h.clear(),D()}},onAction:()=>s.setCurrent(t,v)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:c=>c(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},Wj=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:OP,hash:s=>QZ(s,["fixed","relative","empty"]).getOr(s),display:yt,watcher:(s,a,c)=>s.formatter.formatChanged("lineheight",c,!1,{value:a}).unbind,getCurrent:s=>R.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:ki(t),onMenuSetup:ki(t)}),z5=t=>R.from(FE(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:ae(a),hash:c=>je(c.customCode)?c.code:`${c.code}/${c.customCode}`,display:c=>c.title,watcher:(c,d,h)=>{var v;return c.formatter.formatChanged("lang",h,!1,{value:d.code,customValue:(v=d.customCode)!==null&&v!==void 0?v:null}).unbind},getCurrent:c=>{const d=we.fromDom(c.selection.getNode());return Lf(d,h=>R.some(h).filter(po).bind(v=>Hr(v,"lang").map(T=>{const D=Hr(v,"data-mce-lang").getOrUndefined();return{code:T,customCode:D,title:""}})))},setCurrent:(c,d)=>c.execCommand("Lang",!1,d),onToolbarSetup:c=>{const d=Zd();return c.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",c.setActive,!0)),vS(d.clear,ki(t)(c))},onMenuSetup:ki(t)})),Zj=t=>{H5(t,Wj(t)),z5(t).each(s=>H5(t,s))},jj=(t,s)=>{WZ(t,s),YZ(t,s),dj(t,s),GZ(t,s),n5(t,s)},Gj=t=>id(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),qj=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:Gj(t),onAction:Cc(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:ki(t),onAction:Cc(t,"indent")})},Kj=t=>{qj(t)},Q_=(t,s)=>a=>{a.setActive(s.get());const c=d=>{s.set(d.state),a.setActive(d.state)};return t.on("PastePlainTextToggle",c),vS(()=>t.off("PastePlainTextToggle",c),ki(t)(a))},Yj=t=>{const s=Jt(EP(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:Q_(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:Q_(t,s)})},zR=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},VR=t=>{Eg.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:bT(t,s.name),onAction:zR(t,s.name)})});for(let s=1;s<=6;s++){const a="h"+s;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:bT(t,a),onAction:zR(t,a)})}},V5=t=>{Eg.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Cc(t,s.action)})}),Eg.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:ki(t),onAction:Cc(t,s.action)})})},U5=t=>{Eg.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Cc(t,s.action),onSetup:bT(t,s.name)})})},Xj=t=>{VR(t),V5(t),U5(t)},Jj=t=>{Eg.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:Cc(t,s.action)})}),Eg.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:ki(t),onAction:Cc(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:ki(t),onAction:zR(t,"code")})},Qj=t=>{Xj(t),Jj(t)},ek=(t,s)=>id(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),eG=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:ek(t,"hasUndo"),onAction:Cc(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:ek(t,"hasRedo"),onAction:Cc(t,"redo")})},UR=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:ek(t,"hasUndo"),onAction:Cc(t,"undo")}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:ek(t,"hasRedo"),onAction:Cc(t,"redo")})},tG=t=>{eG(t),UR(t)},W5=t=>id(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),nG=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:W5(t),onAction:Cc(t,"mceToggleVisualAid")})},oG=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Cc(t,"mceToggleVisualAid")})},WR=t=>{oG(t),nG(t)},sG=(t,s)=>{L5(t),Qj(t),jj(t,s),tG(t),e$(t),WR(t),Kj(t),Zj(t),Yj(t)},Z5=t=>W(t)?t.split(/[ ,]/):t,j5=t=>s=>s.options.get(t),rG=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:W(a)||ze(a,W)?{value:Z5(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},tk=j5("contextmenu_never_use_native"),aG=j5("contextmenu_avoid_overlap"),iG=t=>G5(t).length===0,G5=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:ko(a,c=>no(s,c))},c2=(t,s)=>({type:"makeshift",x:t,y:s}),cG=(t,s,a)=>c2(t.x+s,t.y+a),ZR=t=>t.type==="longpress"||t.type.indexOf("touch")===0,lG=t=>{if(ZR(t)){const s=t.touches[0];return c2(s.pageX,s.pageY)}else return c2(t.pageX,t.pageY)},uG=t=>{if(ZR(t)){const s=t.touches[0];return c2(s.clientX,s.clientY)}else return c2(t.clientX,t.clientY)},dG=(t,s)=>{const a=I0.DOM.getPos(t);return cG(s,a.x,a.y)},mG=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?lG(s):dG(t.getContentAreaContainer(),uG(s)):q5(t),q5=t=>({type:"selection",root:we.fromDom(t.selection.getNode())}),fG=t=>({type:"node",node:R.some(we.fromDom(t.selection.getNode())),root:we.fromDom(t.getBody())}),K5=(t,s,a)=>{switch(a){case"node":return fG(t);case"point":return mG(t,s);case"selection":return q5(t)}},gG=(t,s,a,c,d,h)=>{const v=a(),E=K5(t,s,h);sy(v,rm.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!1,search:R.none()}).map(T=>{s.preventDefault(),xs.showMenuAt(d,{anchor:E},{menu:{markers:sf("normal")},data:T})})},Y5={onLtr:()=>[Sr,Cr,ua,ri,Ea,La,md,iy,GS,jS,Rb,ZS],onRtl:()=>[Sr,ua,Cr,Ea,ri,La,md,iy,Rb,ZS,GS,jS]},hG=12,X5={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},pG=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const c=s.touches[0],d=a.getRng();return uC(t.getWin(),qr.domRange(d)).exists(v=>v.left<=c.clientX&&v.right>=c.clientX&&v.top<=c.clientY&&v.bottom>=c.clientY)}},bG=t=>{const s=t.selection.getRng(),a=()=>{hb.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),h()};t.once("touchend",a);const c=v=>{v.preventDefault(),v.stopImmediatePropagation()};t.on("mousedown",c,!0);const d=()=>h();t.once("longpresscancel",d);const h=()=>{t.off("touchend",a),t.off("longpresscancel",d),t.off("mousedown",c)}},vG=(t,s,a)=>{const c=K5(t,s,a);return{bubble:Ju(0,a==="point"?hG:0,X5),layouts:Y5,overrides:{maxWidthFunction:fR(),maxHeightFunction:_h()},...c}},Bb=(t,s,a,c,d,h,v)=>{const E=vG(t,s,h);sy(a,rm.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!0,search:R.none()}).map(T=>{s.preventDefault();const D=v?_i.HighlightMenuAndItem:_i.HighlightNone;xs.showMenuWithinBounds(d,{anchor:E},{menu:{markers:sf("normal"),highlightOnOpen:D},data:T,type:"horizontal"},()=>R.some(D5(t,c.shared,h==="node"?"node":"selection"))),t.dispatch(S5)})},J5=(t,s,a,c,d,h)=>{const v=dl(),E=v.os.isiOS(),T=v.os.isMacOS(),D=v.os.isAndroid(),N=v.deviceType.isTouch(),L=()=>!(D||E||T&&N),V=()=>{const j=a();Bb(t,s,j,c,d,h,L())};if((T||E)&&h!=="node"){const j=()=>{bG(t),V()};pG(t,s)?j():(t.once("selectionchange",j),t.once("touchend",()=>t.off("selectionchange",j)))}else V()},Q5=t=>W(t)?t==="|":t.type==="separator",jR={type:"separator"},e6=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(W(t))return t;switch(t.type){case"separator":return jR;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const c=t.getSubmenuItems();return W(c)?c:Ke(c,e6)}};default:const a=t;return{type:"menuitem",...s(a),onAction:qe(a.onAction)}}},t6=(t,s)=>{if(s.length===0)return t;const c=pm(t).filter(d=>!Q5(d)).fold(()=>[],d=>[jR]);return t.concat(c).concat(s).concat([jR])},n6=(t,s,a)=>{const c=Io(s,(d,h)=>vt(t,h.toLowerCase()).map(v=>{const E=v.update(a);if(W(E)&&Na(al(E)))return t6(d,E.split(" "));if(me(E)&&E.length>0){const T=Ke(E,e6);return t6(d,T)}else return d}).getOrThunk(()=>d.concat([h])),[]);return c.length>0&&Q5(c[c.length-1])&&c.pop(),c},yG=(t,s)=>s.ctrlKey&&!tk(t),wG=t=>t.type==="longpress"||no(t,"touches"),o6=(t,s)=>!wG(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),s6=(t,s)=>o6(t,s)?t.selection.getStart(!0):s.target,CG=(t,s)=>{const a=aG(t),c=o6(t,s)?"selection":"point";if(Na(a)){const d=s6(t,s);return SS(we.fromDom(d),a)?"node":c}else return c},SG=(t,s,a)=>{const d=dl().deviceType.isTouch,h=xa(xs.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:lt([En("dismissContextMenu",[Ve(Bm(),(T,D)=>{Ln.close(T),t.focus()})])])})),v=()=>xs.hide(h),E=T=>{if(tk(t)&&T.preventDefault(),yG(t,T)||iG(t))return;const D=CG(t,T),N=()=>{const V=s6(t,T),j=t.ui.registry.getAll(),Y=G5(t);return n6(j.contextMenus,Y,V)};(d()?J5:gG)(t,T,N,a,h,D)};t.on("init",()=>{const T="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(T,v),t.on("longpress contextmenu",E)})},GR=Zi.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),nk=t=>s=>s.translate(-t.left,-t.top),ok=t=>s=>s.translate(t.left,t.top),_g=t=>(s,a)=>Io(t,(c,d)=>d(c),io(s,a)),l2=(t,s,a)=>t.fold(_g([ok(a),nk(s)]),_g([nk(s)]),_g([])),$b=(t,s,a)=>t.fold(_g([ok(a)]),_g([]),_g([ok(s)])),r6=(t,s,a)=>t.fold(_g([]),_g([nk(a)]),_g([ok(s),nk(a)])),u2=(t,s,a,c,d,h)=>{const v=$b(t,d,h),E=$b(s,d,h);return Math.abs(v.left-E.left)<=a&&Math.abs(v.top-E.top)<=c},xG=(t,s,a,c,d,h)=>{const v=$b(t,d,h),E=$b(s,d,h),T=Math.abs(v.left-E.left),D=Math.abs(v.top-E.top);return io(T,D)},a6=(t,s,a)=>{const c=t.fold((d,h)=>({position:R.some("absolute"),left:R.some(d+"px"),top:R.some(h+"px")}),(d,h)=>({position:R.some("absolute"),left:R.some(d-a.left+"px"),top:R.some(h-a.top+"px")}),(d,h)=>({position:R.some("fixed"),left:R.some(d+"px"),top:R.some(h+"px")}));return{right:R.none(),bottom:R.none(),...c}},qR=(t,s,a)=>t.fold((c,d)=>sk(c+s,d+a),(c,d)=>Tp(c+s,d+a),(c,d)=>Ib(c+s,d+a)),KR=(t,s,a,c)=>{const d=(h,v)=>(E,T)=>{const D=h(s,a,c);return v(E.getOr(D.left),T.getOr(D.top))};return t.fold(d(r6,sk),d($b,Tp),d(l2,Ib))},sk=GR.offset,Tp=GR.absolute,Ib=GR.fixed,i6=(t,s)=>{const a=As(t,s);return je(a)?NaN:parseInt(a,10)},EG=(t,s)=>{const a=t.element,c=i6(a,s.leftAttr),d=i6(a,s.topAttr);return isNaN(c)||isNaN(d)?R.none():R.some(io(c,d))},TG=(t,s,a)=>{const c=t.element;xt(c,s.leftAttr,a.left+"px"),xt(c,s.topAttr,a.top+"px")},_G=(t,s)=>{const a=t.element;ys(a,s.leftAttr),ys(a,s.topAttr)},kG=(t,s,a,c)=>EG(t,s).fold(()=>a,d=>Ib(d.left+c.left,d.top+c.top)),OG=(t,s,a,c,d,h)=>{const v=kG(t,s,a,c),E=s.mustSnap?DG(t,s,v,d,h):RG(t,s,v,d,h),T=l2(v,d,h);return TG(t,s,T),E.fold(()=>({coord:Ib(T.left,T.top),extra:R.none()}),D=>({coord:D.output,extra:D.extra}))},AG=(t,s)=>{_G(t,s)},c6=(t,s,a,c)=>Js(t,d=>{const h=d.sensor;return u2(s,h,d.range.left,d.range.top,a,c)?R.some({output:KR(d.output,s,a,c),extra:d.extra}):R.none()}),DG=(t,s,a,c,d)=>{const h=s.getSnapPoints(t);return c6(h,a,c,d).orThunk(()=>Io(h,(T,D)=>{const N=D.sensor,L=xG(a,N,D.range.left,D.range.top,c,d);return T.deltas.fold(()=>({deltas:R.some(L),snap:R.some(D)}),V=>{const j=(L.left+L.top)/2,Y=(V.left+V.top)/2;return j<=Y?{deltas:R.some(L),snap:R.some(D)}:T})},{deltas:R.none(),snap:R.none()}).snap.map(T=>({output:KR(T.output,a,c,d),extra:T.extra})))},RG=(t,s,a,c,d)=>{const h=s.getSnapPoints(t);return c6(h,a,c,d)},MG=(t,s,a)=>({coord:KR(t.output,t.output,s,a),extra:t.extra});var NG=Object.freeze({__proto__:null,snapTo:(t,s,a,c)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const h=Pa(t.element),v=$a(h),E=HF(d),T=MG(c,v,E),D=a6(T.coord,v,E);at(d,D)}}});const wy="data-initial-z-index",PG=t=>{oa(t.element).filter(po).each(s=>{Hr(s,wy).fold(()=>eo(s,"z-index"),a=>bn(s,"z-index",a)),ys(s,wy)})},BG=t=>{oa(t.element).filter(po).each(s=>{qs(s,"z-index").each(a=>{xt(s,wy,a)}),bn(s,"z-index",Ds(t.element,"z-index"))})},l6=(t,s)=>{t.getSystem().addToGui(s),BG(s)},$G=t=>{PG(t),t.getSystem().removeFromGui(t)},u6=(t,s,a)=>t.getSystem().build(im.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var IG=pi("snaps",[We("getSnapPoints"),Un("onSensor"),We("leftAttr"),We("topAttr"),xe("lazyViewport",Ur),xe("mustSnap",!1)]);const rk=[xe("useFixed",Pn),We("blockerClass"),xe("getTarget",yt),xe("onDrag",ee),xe("repositionTarget",!0),xe("onDrop",ee),Mr("getBounds",Ur),IG],FG=t=>sl(qs(t,"left"),qs(t,"top"),qs(t,"position"),(s,a,c)=>(c==="fixed"?Ib:sk)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=ac(t);return Tp(s.left,s.top)}),LG=(t,s,a,c,d)=>{const h=d.bounds,v=$b(s,a,c),E=mc(v.left,h.x,h.x+h.width-d.width),T=mc(v.top,h.y,h.y+h.height-d.height),D=Tp(E,T);return s.fold(()=>{const N=r6(D,a,c);return sk(N.left,N.top)},ae(D),()=>{const N=l2(D,a,c);return Ib(N.left,N.top)})},HG=(t,s,a,c,d,h,v)=>{const E=s.fold(()=>{const T=qR(a,h.left,h.top),D=l2(T,c,d);return Ib(D.left,D.top)},T=>{const D=OG(t,T,a,h,c,d);return D.extra.each(N=>{T.onSensor(t,N)}),D.coord});return LG(t,E,c,d,v)},zG=(t,s,a,c)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const h=Pa(t.element),v=$a(h),E=HF(d),T=FG(d),D=HG(t,s.snaps,T,v,E,c,a),N=a6(D,v,E);at(d,N)}s.onDrag(t,d,c)},d6=(t,s)=>({bounds:t.getBounds(),height:_d(s.element),width:Ba(s.element)}),d2=(t,s,a,c,d)=>{const h=a.update(c,d),v=a.getStartData().getOrThunk(()=>d6(s,t));h.each(E=>{zG(t,s,v,E)})},YR=(t,s,a,c)=>{s.each($G),a.snaps.each(h=>{AG(t,h)});const d=a.getTarget(t.element);c.reset(),a.onDrop(t,d)},XR=t=>(s,a)=>{const c=d=>{a.setStartData(d6(s,d))};return Ho([Ve(Vu(),d=>{a.getStartData().each(()=>c(d))}),...t(s,a,c)])},VG=t=>Ho([Ve(dr(),t.forceDrop),Ve(rw(),t.drop),Ve(Xg(),(s,a)=>{t.move(a.event)}),Ve(Jg(),t.delayDrop)]);var UG=Object.freeze({__proto__:null,getData:t=>R.from(io(t.x,t.y)),getDelta:(t,s)=>io(s.left-t.left,s.top-t.top)});const m6=(t,s,a)=>[Ve(dr(),(c,d)=>{if(d.event.raw.button!==0)return;d.stop();const v=()=>YR(c,R.some(D),t,s),E=h$(v,200),T={drop:v,delayDrop:E.schedule,forceDrop:v,move:L=>{E.cancel(),d2(c,t,s,UG,L)}},D=u6(c,t.blockerClass,VG(T));(()=>{a(c),l6(c,D)})()})],WG=[...rk,To("dragger",{handlers:XR(m6)})],ZG=t=>Ho([Ve(zu(),t.forceDrop),Ve(Hf(),t.drop),Ve(I2(),t.drop),Ve(Yg(),(s,a)=>{t.move(a.event)})]),jG=t=>{const s=t[0];return R.some(io(s.clientX,s.clientY))};var f6=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?jG(a):R.none()},getDelta:(t,s)=>io(s.left-t.left,s.top-t.top)});const g6=(t,s,a)=>{const c=Dn(),d=h=>{YR(h,c.get(),t,s),c.clear()};return[Ve(zu(),(h,v)=>{v.stop();const E=()=>d(h),T={drop:E,delayDrop:ee,forceDrop:E,move:L=>{d2(h,t,s,f6,L)}},D=u6(h,t.blockerClass,ZG(T));c.set(D),(()=>{a(h),l6(h,D)})()}),Ve(Yg(),(h,v)=>{v.stop(),d2(h,t,s,f6,v.event)}),Ve(Hf(),(h,v)=>{v.stop(),d(h)}),Ve(I2(),d)]},GG=[...rk,To("dragger",{handlers:XR(g6)})],qG=(t,s,a)=>[...m6(t,s,a),...g6(t,s,a)],KG=[...rk,To("dragger",{handlers:XR(qG)})];var XG=Object.freeze({__proto__:null,mouse:WG,touch:GG,mouseOrTouch:KG}),JG=Object.freeze({__proto__:null,init:()=>{let t=R.none(),s=R.none();const a=()=>{t=R.none(),s=R.none()},c=(T,D)=>{const N=t.map(L=>T.getDelta(L,D));return t=R.some(D),N},d=(T,D)=>T.getData(D).bind(N=>c(T,N)),h=T=>{s=R.some(T)},v=()=>s,E=ae({});return qi({readState:E,reset:a,update:d,getStartData:v,setStartData:h})}});const Fb=Kv({branchKey:"mode",branches:XG,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:R.from(t.extra)})},state:JG,apis:NG}),JR=40,ak=JR/2,h6=(t,s,a,c,d,h)=>t.fold(()=>Fb.snap({sensor:Tp(a-ak,c-ak),range:io(d,h),output:Tp(R.some(a),R.some(c)),extra:{td:s}}),v=>{const E=a-ak,T=c-ak,D=JR,N=JR,L=v.element.dom.getBoundingClientRect();return Fb.snap({sensor:Tp(E,T),range:io(D,N),output:Tp(R.some(a-L.width/2),R.some(c-L.height/2)),extra:{td:s}})}),QR=(t,s,a)=>{const c=(d,h)=>d.exists(v=>wo(v,h));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,h)=>{const v=h.td;c(s.get(),v)||(s.set(v),a(v))},mustSnap:!0}},eM=t=>bo(Yr.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:lt([Fb.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),kS.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),Lb=(t,s)=>{const a=Jt([]),c=Jt([]),d=Jt(!1),h=Dn(),v=Dn(),E=ct=>{const mt=fi(ct);return h6(j.getOpt(s),ct,mt.x,mt.y,mt.width,mt.height)},T=()=>Ke(a.get(),ct=>E(ct)),D=ct=>{const mt=fi(ct);return h6(Y.getOpt(s),ct,mt.right,mt.bottom,mt.width,mt.height)},N=()=>Ke(c.get(),ct=>D(ct)),L=QR(T,h,ct=>{v.get().each(mt=>{t.dispatch("TableSelectorChange",{start:ct,finish:mt})})}),V=QR(N,v,ct=>{h.get().each(mt=>{t.dispatch("TableSelectorChange",{start:mt,finish:ct})})}),j=eM(L),Y=eM(V),ie=xa(j.asSpec()),Ee=xa(Y.asSpec()),he=(ct,mt,Tn,$t)=>{const Qt=mt.dom.getBoundingClientRect();eo(ct.element,"display");const ln=Pc(we.fromDom(t.getBody())).dom.innerHeight,ho=Tn(Qt),Yt=$t(Qt,ln);(ho||Yt)&&bn(ct.element,"display","none")},fe=(ct,mt,Tn,$t)=>{const Qt=Tn(mt);Fb.snapTo(ct,Qt),he(ct,mt,Yt=>Yt[$t]<0,(Yt,qn)=>Yt[$t]>qn)},_e=ct=>fe(ie,ct,E,"top"),Xe=()=>h.get().each(_e),Le=ct=>fe(Ee,ct,D,"bottom"),$e=()=>v.get().each(Le);dl().deviceType.isTouch()&&(t.on("TableSelectionChange",ct=>{d.get()||(Xm(s,ie),Xm(s,Ee),d.set(!0)),h.set(ct.start),v.set(ct.finish),ct.otherCells.each(mt=>{a.set(mt.upOrLeftCells),c.set(mt.downOrRightCells),_e(ct.start),Le(ct.finish)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{Xe(),$e()}),t.on("TableSelectionClear",()=>{d.get()&&(ed(ie),ed(Ee),d.set(!1)),h.clear(),v.clear()}))};var QG=`<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>
</svg>
`;const tM=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",ik=(t,s,a)=>{var c;const d=(c=s.delimiter)!==null&&c!==void 0?c:"›",h=(D,N,L)=>Yr.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":L,"aria-level":L+1}},components:[$s(D)],action:V=>{t.focus(),t.selection.select(N),t.nodeChanged()},buttonBehaviours:lt([kl.button(a.isDisabled),Nr()])}),v=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[$s(` ${d} `)]}),E=D=>Io(D,(N,L,V)=>{const j=h(L.name,L.element,V);return V===0?N.concat([j]):N.concat([v(),j])},[]),T=D=>{const N=[];let L=D.length;for(;L-- >0;){const V=D[L];if(V.nodeType===1&&!tM(V)){const j=LB(t,V);if(j.isDefaultPrevented()||N.push({name:j.name,element:V}),j.isPropagationStopped())break}}return N};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:lt([qt.config({mode:"flow",selector:"div[role=button]"}),on.config({disabled:a.isDisabled}),Nr(),as.config({}),vn.config({}),En("elementPathEvents",[No((D,N)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>qt.focusIn(D)),t.on("NodeChange",L=>{const V=T(L.parents),j=V.length>0?E(V):[];vn.set(D,j)})})])]),components:[]}};var _p;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(_p||(_p={}));const eq=(t,s,a,c,d)=>{const h={height:r2(c+s.top,m4(t),f4(t))};return a===_p.Both&&(h.width=r2(d+s.left,d4(t),IE(t))),h},p6=(t,s,a)=>{const c=we.fromDom(t.getContainer()),d=eq(t,s,a,ms(c),ir(c));Xo(d,(h,v)=>{en(h)&&bn(c,v,NR(h))}),IB(t)},tq=t=>{const s=VE(t);return s===!1?_p.None:s==="both"?_p.Both:_p.Vertical},ck=(t,s,a,c)=>{const h=io(a*20,c*20);return p6(t,h,s),R.some(!0)},Hb=(t,s)=>{const a=tq(t);if(a===_p.None)return R.none();const c=a===_p.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return R.some(rd("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:s.translate("Resize"),"aria-label":s.translate(c)},behaviours:[Fb.config({mode:"mouse",repositionTarget:!1,onDrag:(d,h,v)=>p6(t,v,a),blockerClass:"tox-blocker"}),qt.config({mode:"special",onLeft:()=>ck(t,a,-1,0),onRight:()=>ck(t,a,1,0),onUp:()=>ck(t,a,0,-1),onDown:()=>ck(t,a,0,1)}),as.config({}),cn.config({})]},s.icons))},b6=(t,s)=>{const a=(c,d,h)=>vn.set(c,[$s(s.translate(["{0} "+h,d[h]]))]);return Yr.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:lt([kl.button(s.isDisabled),Nr(),as.config({}),vn.config({}),wt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),En("wordcount-events",[bl(c=>{const d=wt.getValue(c),h=d.mode==="words"?"characters":"words";wt.setValue(c,{mode:h,count:d.count}),a(c,d.count,h)}),No(c=>{t.on("wordCountUpdate",d=>{const{mode:h}=wt.getValue(c);wt.setValue(c,{mode:h,count:d.wordCount}),a(c,d.wordCount,h)})})])]),eventOrder:{[Gi()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},nq=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v6",rel:"noopener",target:"_blank","aria-label":yc.translate(["Powered by {0}","Tiny"])},innerHtml:QG.trim()},behaviours:lt([cn.config({})])}]}),c=()=>{const E=CB("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[$s(yc.translate(["Press {0} for help",E]))]}},d=()=>{const E=[];return t.hasPlugin("wordcount")&&E.push(b6(t,s)),v4(t)&&E.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:E}},h=()=>{const E=[],T=_P(t),D=zE(t),N=v4(t)||t.hasPlugin("wordcount"),L=()=>{const V="tox-statusbar__text-container--flex-start",j="tox-statusbar__text-container--flex-end",Y="tox-statusbar__text-container--space-around";if(T){const ie="tox-statusbar__text-container-3-cols";return!N&&!D?[ie,Y]:N&&!D?[ie,j]:[ie,V]}return[N&&!D?j:V]};return D&&E.push(ik(t,{},s)),T&&E.push(c()),N&&E.push(d()),E.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...L()]},components:E}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const E=h(),T=Hb(t,s);return E.concat(T.toArray())})()}},v6=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),oq=(t,s)=>{const a=t.inline,c=a?C5:b5,d=aS(t)?eL:gW,h=Mj(),v=Dn(),E=Dn(),T=Dn(),V=dl().deviceType.isTouch()?["tox-platform-touch"]:[],j=C4(t),Y=L0(t),ie=bo({dom:{tag:"div",classes:["tox-anchorbar"]}}),Ee=bo({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),he=()=>h.mainUi.get().map(nn=>nn.outerContainer).bind(jo.getHeader),fe=()=>xn.fromOption(h.dialogUi.get().map(nn=>nn.sink),"UI has not been rendered"),_e=()=>xn.fromOption(h.popupUi.get().map(nn=>nn.sink),"(popup) UI has not been rendered"),Xe=h.lazyGetInOuterOrDie("anchor bar",ie.getOpt),Le=h.lazyGetInOuterOrDie("bottom anchor bar",Ee.getOpt),$e=h.lazyGetInOuterOrDie("toolbar",jo.getToolbar),ct=h.lazyGetInOuterOrDie("throbber",jo.getThrobber),mt=aW({popup:_e,dialog:fe},t,Xe,Le),Tn=()=>{const nn={attributes:{[kh]:j?Zc.BottomToTop:Zc.TopToBottom}},wn=jo.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:mt.popup,onEscape:()=>{t.focus()}}),$o=jo.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:mt.popup.shared.getSink,providers:mt.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:Pp=>{UH(t,Pp)},type:Y,lazyToolbar:$e,lazyHeader:()=>he().getOrDie("Could not find header element"),...nn}),ao=jo.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:mt.popup.shared.providers,onEscape:()=>{t.focus()},type:Y}),li=rS(t),is=GE(t),kc=WE(t),pd=UE(t),Mp=$t(),Np=li||is||kc,Wb=()=>li?[ao]:is?[$o]:[],vk=pd?[Mp,wn]:[wn];return jo.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Np?[]:["tox-editor-header--empty"]),...nn},components:Wt([kc?vk:[],Wb(),op(t)?[]:[ie.asSpec()]]),sticky:aS(t),editor:t,sharedBackstage:mt.popup.shared})},$t=()=>jo.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),Qt=()=>{const nn=jo.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),wn=jo.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[nn,wn]}},ln=()=>{const nn=S4(t),wn=wo(Os(),nn)&&Ds(nn,"display")==="grid",$o={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(V),attributes:{...yc.isRtl()?{dir:"rtl"}:{}}},behaviours:lt([Ta.config({useFixed:()=>d.isDocked(he)})])},ao={dom:{styles:{width:document.body.clientWidth+"px"}},events:Ho([Ve(eu(),kc=>{bn(kc.element,"width",document.body.clientWidth+"px")})])},li=xa(Eo($o,wn?ao:{})),is=AT(li);return E.set(is),{sink:li,mothership:is}},ho=()=>{const nn={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(V),attributes:{...yc.isRtl()?{dir:"rtl"}:{}}},behaviours:lt([Ta.config({useFixed:()=>d.isDocked(he),getBounds:()=>s.getPopupSinkBounds()})])},wn=xa(nn),$o=AT(wn);return T.set($o),{sink:wn,mothership:$o}},Yt=()=>{const nn=Tn(),wn=Qt(),$o=jo.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:mt.popup}),ao=jo.parts.viewWrapper({backstage:mt.popup}),li=HE(t)&&!a?R.some(nq(t,mt.popup.shared.providers)):R.none(),is=Wt([j?[]:[nn],a?[]:[wn],j?[nn]:[]]),kc=jo.parts.editorContainer({components:Wt([is,a?[]:[Ee.asSpec(),...li.toArray()]])}),pd=x4(t),Mp={role:"application",...yc.isRtl()?{dir:"rtl"}:{},...pd?{"aria-hidden":"true"}:{}},Np=xa(jo.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(j?["tox-tinymce--toolbar-bottom"]:[]).concat(V),styles:{visibility:"hidden",...pd?{opacity:"0",border:"0"}:{}},attributes:Mp},components:[kc,...a?[]:[ao],$o],behaviours:lt([Nr(),on.config({disableClass:"tox-tinymce--disabled"}),qt.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Wb=AT(Np);return v.set(Wb),{mothership:Wb,outerContainer:Np}},qn=nn=>{const wn=NR(Oj(t)),$o=NR(Aj(t));return t.inline||(Ul("div","width",$o)&&bn(nn.element,"width",$o),Ul("div","height",wn)?bn(nn.element,"height",wn):bn(nn.element,"height","400px")),wn},ft=nn=>{t.addShortcut("alt+F9","focus menubar",()=>{jo.focusMenubar(nn)}),t.addShortcut("alt+F10","focus toolbar",()=>{jo.focusToolbar(nn)}),t.addCommand("ToggleToolbarDrawer",(wn,$o)=>{$o!=null&&$o.skipFocus?jo.toggleToolbarDrawerWithoutFocusing(nn):jo.toggleToolbarDrawer(nn)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>jo.isToolbarDrawerToggled(nn))},Bt=nn=>{const{mainUi:wn,popupUi:$o,uiMotherships:ao}=nn;Jo(pP(t),(Zb,mM)=>{t.ui.registry.addGroupToolbarButton(mM,Zb)});const{buttons:li,menuItems:is,contextToolbars:kc,sidebars:pd,views:Mp}=t.ui.registry.getAll(),Np=w4(t),Wb={menuItems:is,menus:DP(t),menubar:yP(t),toolbar:Np.getOrThunk(()=>sS(t)),allowToolbarGroups:Y===mu.floating,buttons:li,sidebar:pd,views:Mp};ft(wn.outerContainer),ly(t,wn.mothership,ao),d.setup(t,mt.popup.shared,he),sG(t,mt.popup),SG(t,mt.popup.shared.getSink,mt.popup),ZW(t),E_(t,ct,mt.popup.shared),F5(t,kc,$o.sink,{backstage:mt.popup}),Lb(t,$o.sink);const vk=t.getElement(),Pp=qn(wn.outerContainer),dM={targetNode:vk,height:Pp};return c.render(t,nn,Wb,mt.popup,dM)},mn=nn=>(T.set(nn.mothership),nn),$n=()=>{const nn=Yt(),wn=ln(),$o=pg(t)?ho():mn(wn);h.dialogUi.set(wn),h.popupUi.set($o),h.mainUi.set(nn);const ao={popupUi:$o,dialogUi:wn,mainUi:nn,uiMotherships:h.getUiMotherships()};return Bt(ao)};return{popups:{backstage:mt.popup,getMothership:()=>v6("popups",T)},dialogs:{backstage:mt.dialog,getMothership:()=>v6("dialogs",E)},renderUI:$n}},sq=(t,s)=>{const a=Hr(t,"id").fold(()=>{const c=Ot("dialog-label");return xt(s,"id",c),c},yt);xt(t,"aria-labelledby",a)},rq=ae([We("lazySink"),go("dragBlockClass"),Mr("getBounds",Ur),xe("useTabstopAt",Rt),xe("firstTabstop",0),xe("eventOrder",{}),fr("modalBehaviours",[qt]),Qi("onExecute"),kw("onEscape")]),nM={sketch:yt},aq=ae([xi({name:"draghandle",overrides:(t,s)=>({behaviours:lt([Fb.config({mode:"mouse",getTarget:a=>Xi(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),_a({schema:[We("dom")],name:"title"}),_a({factory:nM,schema:[We("dom")],name:"close"}),_a({factory:nM,schema:[We("dom")],name:"body"}),xi({factory:nM,schema:[We("dom")],name:"footer"}),xl({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[xe("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),xe("components",[])],name:"blocker"})]),iq=(t,s,a,c)=>{const d=Dn(),h=j=>{d.set(j);const Y=t.lazySink(j).getOrDie(),ie=c.blocker(),Ee=Y.getSystem().build({...ie,components:ie.components.concat([dc(j)]),behaviours:lt([cn.config({}),En("dialog-blocker-events",[Uu(ji(),()=>{mm.isBlocked(j)?ee():qt.focusIn(j)})])])});Xm(Y,Ee),qt.focusIn(j)},v=j=>{d.clear(),oa(j.element).each(Y=>{j.getSystem().getByDom(Y).each(ie=>{ed(ie)})})},E=j=>Jd(j,t,"body"),T=j=>Po(j,t,"footer"),D=(j,Y)=>{mm.block(j,Y)},N=j=>{mm.unblock(j)},L=Ot("modal-events"),V={...t.eventOrder,[lc()]:[L].concat(t.eventOrder["alloy.system.attached"]||[])};return{uid:t.uid,dom:t.dom,components:s,apis:{show:h,hide:v,getBody:E,getFooter:T,setIdle:N,setBusy:D},eventOrder:V,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Ys(t.modalBehaviours,[vn.config({}),qt.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),mm.config({getRoot:d.get}),En(L,[No(j=>{sq(j.element,Jd(j,t,"title").element)})])])}},gr=ka({name:"ModalDialog",configFields:rq(),partFields:aq(),factory:iq,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),m2=Vt([nr,tT].concat(wb)),oM=ql,Cy=[lT("button"),Kc,Wi("align","end",["start","end"]),aT,Yc,tw("buttonType",["primary","secondary"])],kp=[...Cy,af],Sy=[Kl("type",["submit","cancel","custom"]),...kp],cq=[Kl("type",["menu"]),ip,oT,Kc,ic("items",m2),...Cy],y6=[...Cy,Kl("type",["togglebutton"]),so("tooltip"),Kc,ip,yr("active",!1)],w6=Vn("type",{submit:Sy,cancel:Sy,custom:Sy,menu:cq,togglebutton:y6}),C6=[nr,af,Kl("level",["info","warn","error","success"]),XP,xe("url","")],lq=Vt(C6),uq=t=>[nr,t],dq=[nr,af,Yc,lT("button"),Kc,F4,tw("buttonType",["primary","secondary","toolbar"]),aT],S6=Vt(dq),zb=[nr,tT],yu=zb.concat([sT]),mq=zb.concat([nT,Yc]),fq=Vt(mq),gq=ql,x6=yu.concat([L4("auto")]),hq=Vt(x6),pq=Rd([uS,af,XP]),bq=yu.concat([Fu("storageKey","default")]),sM=Vt(bq),rM=Zr,E6=Vt(yu),vq=Zr,yq=zb.concat([Fu("tag","textarea"),so("scriptId"),so("scriptUrl"),zM("settings",void 0)]),T6=zb.concat([Fu("tag","textarea"),Yl("init")]),wq=Am(t=>Cs("customeditor.old",Wo(T6),t).orThunk(()=>Cs("customeditor.new",Wo(yq),t))),Cq=Zr,_6=Vt(yu),Sq=M2(),lk=t=>[nr,l1("columns"),t],Ey=[nr,so("html"),Wi("presets","presentation",["presentation","document"])],uk=Vt(Ey),k6=yu.concat([yr("border",!1),yr("sandboxed",!0),yr("streamContent",!1),yr("transparent",!0)]),dk=Vt(k6),_c=Zr,mk=Vt(zb.concat([aa("height")])),O6=Vt([so("url"),$f("zoom"),$f("cachedWidth"),$f("cachedHeight")]),A6=yu.concat([aa("inputMode"),aa("placeholder"),yr("maximized",!1),Yc]),xq=Vt(A6),Eq=Zr,Op=t=>[nr,nT,t,Wi("align","start",["start","center","end"])],MY=[af,uS],Tq=[af,ic("items",c1("items",()=>aM))],aM=Mt([Vt(MY),Vt(Tq)]),Ty=yu.concat([ic("items",aM),Yc]),fk=Vt(Ty),D6=Zr,_q=yu.concat([ew("items",[af,uS]),Iu("size",1),Yc]),kq=Vt(_q),Oq=Zr,Aq=yu.concat([yr("constrain",!0),Yc]),_y=Vt(Aq),Dq=Vt([so("width"),so("height")]),Rq=zb.concat([nT,Iu("min",0),Iu("max",0)]),Mq=Vt(Rq),NY=a1,Nq=[nr,ic("header",Zr),ic("cells",Gl(Zr))],Pq=Vt(Nq),f2=yu.concat([aa("placeholder"),yr("maximized",!1),Yc]),Bq=Vt(f2),$q=Zr,iM=[Kl("type",["directory","leaf"]),$4,so("id"),$u("menu",QS)],Iq=Vt(iM),e=iM.concat([ic("children",c1("children",()=>nt("type",{directory:n,leaf:Iq})))]),n=Vt(e),o=nt("type",{directory:n,leaf:Iq}),r=[nr,ic("items",o),If("onLeafAction"),If("onToggleExpand"),bi("defaultExpandedIds",[],Zr),aa("defaultSelectedId")],i=Vt(r),u=yu.concat([Wi("filetype","file",["image","media","file"]),Yc,aa("picker_text")]),g=Vt(u),y=Vt([uS,iT]),x=t=>ra("items","items",fo(),Gl(Am(s=>Cs(`Checking item of ${t}`,A,s).fold(a=>xn.error(Ia(a)),a=>xn.value(a))))),A=Wr(()=>nt("type",{alertbanner:lq,bar:Vt(uq(x("bar"))),button:S6,checkbox:fq,colorinput:sM,colorpicker:E6,dropzone:_6,grid:Vt(lk(x("grid"))),iframe:dk,input:xq,listbox:fk,selectbox:kq,sizeinput:_y,slider:Mq,textarea:Bq,urlinput:g,customeditor:wq,htmlpanel:uk,imagepreview:mk,collection:hq,label:Vt(Op(x("label"))),table:Pq,tree:i,panel:F})),I=[nr,xe("classes",[]),ic("items",A)],F=Vt(I),z=[lT("tab"),$4,ic("items",A)],X=[nr,ew("tabs",z)],te=Vt(X),K=kp,ne=w6,ge=Vt([so("title"),Vi("body",nt("type",{panel:F,tabpanel:te})),Fu("size","normal"),bi("buttons",[],ne),xe("initialData",{}),Mr("onAction",ee),Mr("onChange",ee),Mr("onSubmit",ee),Mr("onClose",ee),Mr("onCancel",ee),Mr("onTabChange",ee)]),be=t=>Cs("dialog",ge,t),ve=Vt([Kl("type",["cancel","custom"]),...K]),Se=Vt([so("title"),so("url"),$f("height"),$f("width"),Ff("buttons",ve),Mr("onAction",ee),Mr("onCancel",ee),Mr("onClose",ee),Mr("onMessage",ee)]),Ze=t=>Cs("dialog",Se,t),st=t=>J(t)?[t].concat(Ie(bm(t),st)):me(t)?Ie(t,st):[],Ct=t=>W(t.type)&&W(t.name),Fe={checkbox:gq,colorinput:rM,colorpicker:vq,dropzone:Sq,input:Eq,iframe:_c,imagepreview:O6,selectbox:Oq,sizeinput:Dq,slider:NY,listbox:D6,size:Dq,textarea:$q,urlinput:y,customeditor:Cq,collection:pq,togglemenuitem:oM},Me=t=>R.from(Fe[t.type]),Qe=t=>ko(st(t),Ct),Et=t=>{const s=Qe(t),a=Ie(s,c=>Me(c).fold(()=>[],d=>[Vi(c.name,d)]));return Vt(a)},Ut=t=>{var s;const a=Mo(be(t)),c=Et(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:c,initialData:d}},Cn={open:(t,s)=>{const a=Ut(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=Mo(Ze(s));return t(a)},redial:t=>Ut(t)};var _o=Object.freeze({__proto__:null,events:(t,s)=>{const a=(c,d)=>{t.updateState.each(h=>{const v=h(c,d);s.set(v)}),t.renderComponents.each(h=>{const v=h(d,s.get());(t.reuseDom?CN:Ti)(c,v)})};return Ho([Ve(Wf(),(c,d)=>{const h=d;if(!h.universal){const v=t.channel;yo(h.channels,v)&&a(c,h.data)}}),No((c,d)=>{t.initialData.each(h=>{a(c,h)})})])}}),Zs=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),Da=[We("channel"),go("renderComponents"),go("updateState"),go("initialData"),yr("reuseDom",!0)],dt=Object.freeze({__proto__:null,init:()=>{const t=Jt(R.none()),s=()=>t.set(R.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const Tt=xr({fields:Da,name:"reflecting",active:_o,apis:Zs,state:dt}),to=t=>{const s=[],a={};return Xo(t,(c,d)=>{c.fold(()=>{s.push(d)},h=>{a[d]=h})}),s.length>0?xn.error(s):xn.value(a)},Gn=(t,s,a)=>{const c=bo(Q0.sketch(d=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:Ke(t.items,h=>dd(d,h,s,a))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[c.asSpec()]}],behaviours:lt([qt.config({mode:"acyclic",useTabstopAt:Te(ty)}),Ec.memento(c),dI(c,{postprocess:d=>to(d).fold(h=>(console.error(h),{}),yt)}),En("dialog-body-panel",[Ve(ji(),(d,h)=>{d.getSystem().broadcastOn([oy],{newFocus:R.some(h.event.target)})})])])}},Ft=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:om(t.action),behaviours:Ys(t.tabButtonBehaviours,[cn.config({}),qt.config({mode:"execution",useSpace:!0,useEnter:!0}),wt.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),Lt=ec({name:"TabButton",configFields:[xe("uid",void 0),We("value"),ra("dom","dom",Nn(()=>({attributes:{role:"tab",id:Ot("aria"),"aria-selected":"false"}})),ur()),go("action"),xe("domModification",{}),fr("tabButtonBehaviours",[cn,qt,wt]),We("view")],factory:Ft}),it=ae([We("tabs"),We("dom"),xe("clickToDismiss",!1),fr("tabbarBehaviours",[ro,qt]),zm(["tabClass","selectedClass"])]),gn=nb({factory:Lt,name:"tabs",unit:"tab",overrides:t=>{const s=(c,d)=>{ro.dehighlight(c,d),Gt(c,Sv(),{tabbar:c,button:d})},a=(c,d)=>{ro.highlight(c,d),Gt(c,H2(),{tabbar:c,button:d})};return{action:c=>{const d=c.getSystem().getByUid(t.uid).getOrDie(),h=ro.isHighlighted(d,c);(h&&t.clickToDismiss?s:h?ee:a)(d,c)},domModification:{classes:[t.markers.tabClass]}}}}),Wn=ae([gn]),Do=(t,s,a,c)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Ys(t.tabbarBehaviours,[ro.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,h)=>{xt(h.element,"aria-selected","true")},onDehighlight:(d,h)=>{xt(h.element,"aria-selected","false")}}),qt.config({mode:"flow",getInitial:d=>ro.getHighlighted(d).map(h=>h.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),qo=ka({name:"Tabbar",configFields:it(),partFields:Wn(),factory:Do}),Ai=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:Ys(t.tabviewBehaviours,[vn.config({})]),domModification:{attributes:{role:"tabpanel"}}}),Jc=ec({name:"Tabview",configFields:[fr("tabviewBehaviours",[vn])],factory:Ai}),hf=ae([xe("selectFirst",!0),Un("onChangeTab"),Un("onDismissTab"),xe("tabs",[]),fr("tabSectionBehaviours",[])]),Di=_a({factory:qo,schema:[We("dom"),Xl("markers",[We("tabClass"),We("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),fd=_a({factory:Jc,name:"tabview"}),yn=ae([Di,fd]),Zn=(t,s,a,c)=>{const d=v=>{const E=wt.getValue(v);Po(v,t,"tabview").each(T=>{fn(t.tabs,N=>N.value===E).each(N=>{const L=N.view();Hr(v.element,"id").each(V=>{xt(T.element,"aria-labelledby",V)}),vn.set(T,L),t.onChangeTab(T,v,L)})})},h=(v,E)=>{Po(v,t,"tabbar").each(T=>{E(T).each($d)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:Yd(t.tabSectionBehaviours),events:Ho(Wt([t.selectFirst?[No((v,E)=>{h(v,ro.getFirst)})]:[],[Ve(H2(),(v,E)=>{const T=E.event.button;d(T)}),Ve(Sv(),(v,E)=>{const T=E.event.button;t.onDismissTab(v,T)})]])),apis:{getViewItems:v=>Po(v,t,"tabview").map(E=>vn.contents(E)).getOr([]),showTab:(v,E)=>{h(v,D=>{const N=ro.getCandidates(D);return fn(N,V=>wt.getValue(V)===E).filter(V=>!ro.isHighlighted(D,V))})}}}},mo=ka({name:"TabSection",configFields:hf(),partFields:yn(),factory:Zn,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),Es=(t,s,a)=>Ke(t,(c,d)=>{vn.set(a,t[d].view());const h=s.dom.getBoundingClientRect();return vn.set(a,[]),h.height}),Ms=t=>Jr(Eu(t,(s,a)=>s>a?-1:s<a?1:0)),wu=(t,s,a)=>{const c=Nc(t).dom,d=Xi(t,".tox-dialog-wrap").getOr(t),h=Ds(d,"position")==="fixed";let v;h?v=Math.max(c.clientHeight,window.innerHeight):v=Math.max(c.offsetHeight,c.scrollHeight);const E=ms(s),D=s.dom.offsetLeft>=a.dom.offsetLeft+ir(a)?Math.max(ms(a),E):E,N=parseInt(Ds(t,"margin-top"),10)||0,L=parseInt(Ds(t,"margin-bottom"),10)||0,j=ms(t)+N+L-D;return v-j},ky=(t,s)=>{Jr(t).each(a=>mo.showTab(s,a.value))},Oy=(t,s)=>{bn(t,"height",s+"px"),bn(t,"flex-basis",s+"px")},pf=(t,s,a)=>{Xi(t,'[role="dialog"]').each(c=>{Vs(c,'[role="tablist"]').each(d=>{a.get().map(h=>(bn(s,"height","0"),bn(s,"flex-basis","0"),Math.min(h,wu(c,s,d)))).each(h=>{Oy(s,h)})})})},bf=t=>Vs(t,'[role="tabpanel"]'),Ap=t=>{const s=Dn();return{extraEvents:[No(d=>{const h=d.element;bf(h).each(v=>{bn(v,"visibility","hidden"),d.getSystem().getByDom(v).toOptional().each(E=>{const T=Es(t,v,E);Ms(T).fold(s.clear,s.set)}),pf(h,v,s),eo(v,"visibility"),ky(t,d),requestAnimationFrame(()=>{pf(h,v,s)})})}),Ve(eu(),d=>{const h=d.element;bf(h).each(v=>{pf(h,v,s)})}),Ve(_$,(d,h)=>{const v=d.element;bf(v).each(E=>{const T=Xu(Be(E));bn(E,"visibility","hidden");const D=qs(E,"height").map(V=>parseInt(V,10));eo(E,"height"),eo(E,"flex-basis");const N=E.dom.getBoundingClientRect().height;D.forall(V=>N>V)?(s.set(N),pf(v,E,s)):D.each(V=>{Oy(E,V)}),eo(E,"visibility"),T.each(Ci)})})],selectFirst:!1}},Ay="send-data-to-section",g2="send-data-to-view",gk=(t,s,a)=>{const c=Jt({}),d=D=>{const N=wt.getValue(D),L=to(N).getOr({}),V=c.get(),j=Eo(V,L);c.set(j)},h=D=>{const N=c.get();wt.setValue(D,N)},v=Jt(null),E=Ke(t.tabs,D=>({value:D.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[$s(a.shared.providers.translate(D.title))],view:()=>[Q0.sketch(N=>({dom:{tag:"div",classes:["tox-form"]},components:Ke(D.items,L=>dd(N,L,s,a)),formBehaviours:lt([qt.config({mode:"acyclic",useTabstopAt:Te(ty)}),En("TabView.form.events",[No(h),Wu(d)]),wi.config({channels:ia([{key:Ay,value:{onReceive:d}},{key:g2,value:{onReceive:h}}])})])}))]})),T=Ap(E);return mo.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(D,N,L)=>{const V=wt.getValue(N);Gt(D,T$,{name:V,oldName:v.get()}),v.set(V)},tabs:E,components:[mo.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[qo.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:lt([as.config({})])}),mo.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:T.selectFirst,tabSectionBehaviours:lt([En("tabpanel",T.extraEvents),qt.config({mode:"acyclic"}),Bn.config({find:D=>Jr(mo.getViewItems(D))}),hp(R.none(),D=>(D.getSystem().broadcastOn([Ay],{}),c.get()),(D,N)=>{c.set(N),D.getSystem().broadcastOn([g2],{})})])})},Vb=(t,s,a,c,d)=>{const h=T=>{const D=T.body;switch(D.type){case"tabpanel":return[gk(D,T.initialData,c)];default:return[Gn(D,T.initialData,c)]}},v=(T,D)=>R.some({isTabPanel:()=>D.body.type==="tabpanel"}),E={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(T=>({id:T})).getOr({}),...d?E:{}}},components:[],behaviours:lt([Ec.childAt(0),Tt.config({channel:`${YT}-${s}`,updateState:v,renderComponents:h,initialData:t})])}},hk=(t,s,a,c,d)=>Vb(t,s,R.some(a),c,d),Dp=(t,s,a)=>{const c=Vb(t,s,R.none(),a,!1);return gr.parts.body(c)},Dy=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[vI(R.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:lt([as.config({}),cn.config({})])})]}],behaviours:lt([qt.config({mode:"acyclic",useTabstopAt:Te(ty)})])};return gr.parts.body(s)},gd=F0.deviceType.isTouch(),vf=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),Ry=(t,s)=>gr.parts.close(Yr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:lt([as.config({})])})),My=()=>gr.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),h2=(t,s)=>gr.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:gg(`<p>${cP(s.translate(t))}</p>`)}]}]}),Ub=t=>gr.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),cM=(t,s)=>[im.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),im.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],pk=t=>{const s="tox-dialog",a=s+"-wrap",c=a+"__backdrop",d=s+"__disable-scroll";return gr.sketch({lazySink:t.lazySink,onEscape:h=>(t.onEscape(h),R.some(!0)),useTabstopAt:h=>!ty(h),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:gg(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:gd?[c,c+"--opaque"]:[c]}}]}},dragBlockClass:a,modalBehaviours:lt([cn.config({}),En("dialog-events",t.dialogEvents.concat([Uu(ji(),(h,v)=>{mm.isBlocked(h)?ee():qt.focusIn(h)}),Ve(wv(),(h,v)=>{h.getSystem().broadcastOn([oy],{newFocus:v.event.newFocus})})])),En("scroll-lock",[No(()=>{zs(Os(),d)}),Wu(()=>{ps(Os(),d)})]),...t.extraBehaviours]),eventOrder:{[Gi()]:["dialog-events"],[lc()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Pm()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},ja=t=>Yr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},buttonBehaviours:lt([as.config({})]),components:[rd("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{Fn(s,mp)}}),Rp=(t,s,a,c)=>{const d=h=>[$s(c.translate(h.title))];return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:{...a.map(h=>({id:h})).getOr({})}},components:[],behaviours:lt([Tt.config({channel:`${ff}-${s}`,initialData:t,renderComponents:d})])}},kg=()=>({dom:gg('<div class="tox-dialog__draghandle"></div>')}),p2=(t,s,a,c)=>im.sketch({dom:gg('<div class="tox-dialog__header"></div>'),components:[Rp(t,s,R.some(a),c),kg(),ja(c)],containerBehaviours:lt([Fb.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>nu(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),ke=(t,s,a)=>{const c=gr.parts.title(Rp(t,s,R.none(),a)),d=gr.parts.draghandle(kg()),h=gr.parts.close(ja(a)),v=[c].concat(t.draggable?[d]:[]).concat([h]);return im.sketch({dom:gg('<div class="tox-dialog__header"></div>'),components:v})},Re=(t,s,a)=>ke({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),ut=(t,s,a,c)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${c.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:gg('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),rt=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:c=>{const d=Vs(t().element,".tox-dialog__header").map(h=>ms(h));gr.setBusy(t(),(h,v)=>ut(c.message,v,s,d))},onUnblock:()=>{gr.setIdle(t())}}),Kt="tox-dialog--fullscreen",zn="tox-dialog--width-lg",Ts="tox-dialog--width-md",hr=t=>{switch(t){case"large":return R.some(zn);case"medium":return R.some(Ts);default:return R.none()}},_r=(t,s)=>{const a=we.fromDom(s.element.dom);mr(a,Kt)||(uc(a,[zn,Ts]),hr(t).each(c=>zs(a,c)))},Ny=(t,s)=>{const a=we.fromDom(t.element.dom),c=mh(a),d=fn(c,h=>h===zn||h===Ts).or(hr(s));xw(a,[Kt,...d.toArray()])},Py=(t,s,a)=>xa(pk({...t,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[qT({}),...t.extraBehaviours],onEscape:c=>{Fn(c,mp)},dialogEvents:s,eventOrder:{[Wf()]:[Tt.name(),wi.name()],[lc()]:["scroll-lock",Tt.name(),"messages","dialog-events","alloy.base.behaviour"],[Pm()]:["alloy.base.behaviour","dialog-events","messages",Tt.name(),"scroll-lock"]}})),bk=(t,s={})=>{const a=c=>{const d=Ke(c.items,h=>{const v=vt(s,h.name).getOr(Jt(!1));return{...h,storage:v}});return{...c,items:d}};return Ke(t,c=>c.type==="menu"?a(c):c)},lM=t=>Io(t,(s,a)=>a.type==="menu"?Io(a.items,(d,h)=>(d[h.name]=h.storage,d),s):s,{}),yf=(t,s)=>[mw(ji(),x9),t(q0,(a,c,d,h)=>{Xu(Be(h.element)).fold(ee,xh),s.onClose(),c.onClose()}),t(mp,(a,c,d,h)=>{c.onCancel(a),Fn(h,q0)}),Ve(MD,(a,c)=>s.onUnblock()),Ve(RD,(a,c)=>s.onBlock(c.event))],R6=(t,s)=>{const a=(d,h)=>Ve(d,(v,E)=>{c(v,(T,D)=>{h(t(),T,E.event,v)})}),c=(d,h)=>{Tt.getState(d).get().each(v=>{h(v,d)})};return[...yf(a,s),a(uf,(d,h,v)=>{h.onAction(d,{name:v.name})})]},uM=(t,s,a)=>{const c=(h,v)=>Ve(h,(E,T)=>{d(E,(D,N)=>{v(t(),D,T.event,E)})}),d=(h,v)=>{Tt.getState(h).get().each(E=>{v(E.internalDialog,h)})};return[...yf(c,s),c(_S,(h,v)=>v.onSubmit(h)),c(Sc,(h,v,E)=>{v.onChange(h,{name:E.name})}),c(uf,(h,v,E,T)=>{const D=()=>T.getSystem().isConnected()?qt.focusIn(T):void 0,N=j=>jp(j,"disabled")||Hr(j,"aria-disabled").exists(Y=>Y==="true"),L=Be(T.element),V=Xu(L);v.onAction(h,{name:E.name,value:E.value}),Xu(L).fold(D,j=>{N(j)||V.exists(Y=>Lr(j,Y)&&N(Y))?D():a().toOptional().filter(Y=>!Lr(Y.element,j)).each(D)})}),c(T$,(h,v,E)=>{v.onTabChange(h,{newTabName:E.name,oldTabName:E.oldName})}),Wu(h=>{const v=t();wt.setValue(h,v.getData())})]},M6=(t,s)=>c_(t,t.type,s),N6=(t,s,a)=>fn(s,c=>c.name===a).bind(c=>c.memento.getOpt(t)),Fq=(t,s)=>{const a=s.map(E=>E.footerButtons).getOr([]),c=Dc(a,E=>E.align==="start"),d=(E,T)=>im.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${E}`]},components:Ke(T,D=>D.memento.asSpec())}),h=d("start",c.pass),v=d("end",c.fail);return[h,v]},Mn=(t,s,a)=>{const c=(d,h)=>{const v=Ke(h.buttons,T=>{const D=bo(M6(T,a));return{name:T.name,align:T.align,memento:D}}),E=T=>N6(d,v,T);return R.some({lookupByName:E,footerButtons:v})};return{dom:gg('<div class="tox-dialog__footer"></div>'),components:[],behaviours:lt([Tt.config({channel:`${c3}-${s}`,initialData:t,updateState:c,renderComponents:Fq})])}},Ne=(t,s,a)=>Mn(t,s,a),zt=(t,s,a)=>gr.parts.footer(Mn(t,s,a)),On=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const c=Bn.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return Q0.getField(c,s).orThunk(()=>t.getFooter().bind(v=>Tt.getState(v).get()).bind(v=>v.lookupByName(s)))}else return R.none()},pr=(t,s)=>{const a=t.getRoot();return Tt.getState(a).get().map(c=>Mo(Cs("data",c.dataValidator,s))).getOr(s)},oc=(t,s,a)=>{const c=Y=>{const ie=t.getRoot();ie.getSystem().isConnected()&&Y(ie)},j={getData:()=>{const Y=t.getRoot(),ie=Y.getSystem().isConnected()?t.getFormWrapper():Y,Ee=wt.getValue(ie),he=Jo(a,fe=>fe.get());return{...Ee,...he}},setData:Y=>{c(ie=>{const Ee=j.getData(),he=Eo(Ee,Y),fe=pr(t,he),_e=t.getFormWrapper();wt.setValue(_e,fe),Xo(a,(Xe,Le)=>{no(he,Le)&&Xe.set(he[Le])})})},setEnabled:(Y,ie)=>{On(t,Y).each(ie?on.enable:on.disable)},focus:Y=>{On(t,Y).each(cn.focus)},block:Y=>{if(!W(Y))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");c(ie=>{Gt(ie,RD,{message:Y})})},unblock:()=>{c(Y=>{Fn(Y,MD)})},showTab:Y=>{c(ie=>{const Ee=t.getBody();Tt.getState(Ee).get().exists(fe=>fe.isTabPanel())&&Bn.getCurrent(Ee).each(fe=>{mo.showTab(fe,Y)})})},redial:Y=>{c(ie=>{const Ee=t.getId(),he=s(Y),fe=bk(he.internalDialog.buttons,a);ie.getSystem().broadcastOn([`${ny}-${Ee}`],he),ie.getSystem().broadcastOn([`${ff}-${Ee}`],he.internalDialog),ie.getSystem().broadcastOn([`${YT}-${Ee}`],he.internalDialog),ie.getSystem().broadcastOn([`${c3}-${Ee}`],{...he.internalDialog,buttons:fe}),j.setData(he.initialData)})},close:()=>{c(Y=>{Fn(Y,q0)})},toggleFullscreen:t.toggleFullscreen};return j},Ri=(t,s,a)=>{const c=Ot("dialog"),d=t.internalDialog,h=Re(d.title,c,a),v=Jt(d.size),E=hr(v.get()).toArray(),T=(fe,_e)=>(v.set(_e.internalDialog.size),_r(_e.internalDialog.size,fe),R.some(_e)),D=Dp({body:d.body,initialData:d.initialData},c,a),N=bk(d.buttons),L=lM(N),V=an(N.length!==0,zt({buttons:N},c,a)),j=uM(()=>he,rt(()=>ie,a.shared.providers,s),a.shared.getSink),Y={id:c,header:h,body:D,footer:V,extraClasses:E,extraBehaviours:[Tt.config({channel:`${ny}-${c}`,updateState:T,initialData:t})],extraStyles:{}},ie=Py(Y,j,a),Ee=(()=>{const fe=()=>{const Xe=gr.getBody(ie);return Bn.getCurrent(Xe).getOr(Xe)},_e=()=>{Ny(ie,v.get())};return{getId:ae(c),getRoot:ae(ie),getBody:()=>gr.getBody(ie),getFooter:()=>gr.getFooter(ie),getFormWrapper:fe,toggleFullscreen:_e}})(),he=oc(Ee,s.redial,L);return{dialog:ie,instanceApi:he}},Qc=(t,s,a,c=!1,d)=>{const h=Ot("dialog"),v=Ot("dialog-label"),E=Ot("dialog-content"),T=t.internalDialog,D=Jt(T.size),N=hr(D.get()).toArray(),L=($e,ct)=>(D.set(ct.internalDialog.size),_r(ct.internalDialog.size,$e),d(),R.some(ct)),V=bo(p2({title:T.title,draggable:!0},h,v,a.shared.providers)),j=bo(hk({body:T.body,initialData:T.initialData},h,E,a,c)),Y=bk(T.buttons),ie=lM(Y),Ee=an(Y.length!==0,bo(Ne({buttons:Y},h,a))),he=uM(()=>Le,{onBlock:$e=>{mm.block(_e,(ct,mt)=>{const Tn=V.getOpt(_e).map($t=>ms($t.element));return ut($e.message,mt,a.shared.providers,Tn)})},onUnblock:()=>{mm.unblock(_e)},onClose:()=>s.closeWindow()},a.shared.getSink),_e=xa({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline",...N],attributes:{role:"dialog","aria-labelledby":v}},eventOrder:{[Wf()]:[Tt.name(),wi.name()],[Gi()]:["execute-on-form"],[lc()]:["reflecting","execute-on-form"]},behaviours:lt([qt.config({mode:"cyclic",onEscape:$e=>(Fn($e,q0),R.some(!0)),useTabstopAt:$e=>!ty($e)&&(Ja($e)!=="button"||As($e,"disabled")!=="disabled"),firstTabstop:1}),Tt.config({channel:`${ny}-${h}`,updateState:L,initialData:t}),cn.config({}),En("execute-on-form",he.concat([Uu(ji(),($e,ct)=>{qt.focusIn($e)}),Ve(wv(),($e,ct)=>{$e.getSystem().broadcastOn([oy],{newFocus:ct.event.newFocus})})])),mm.config({getRoot:()=>R.some(_e)}),vn.config({}),qT({})]),components:[V.asSpec(),j.asSpec(),...Ee.map($e=>$e.asSpec()).toArray()]}),Xe=()=>{Ny(_e,D.get())},Le=oc({getId:ae(h),getRoot:ae(_e),getFooter:()=>Ee.map($e=>$e.get(_e)),getBody:()=>j.get(_e),getFormWrapper:()=>{const $e=j.get(_e);return Bn.getCurrent($e).getOr($e)},toggleFullscreen:Xe},s.redial,ie);return{dialog:_e,instanceApi:Le}};var hd=tinymce.util.Tools.resolve("tinymce.util.URI");const b2=t=>{const s=v=>{t.getSystem().isConnected()&&v(t)};return{block:v=>{if(!W(v))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(E=>{Gt(E,RD,{message:v})})},unblock:()=>{s(v=>{Fn(v,MD)})},close:()=>{s(v=>{Fn(v,q0)})},sendMessage:v=>{s(E=>{E.getSystem().broadcastOn([l3],v)})}}},sc=["insertContent","setContent","execCommand","close","block","unblock"],P6=t=>J(t)&&sc.indexOf(t.mceAction)!==-1,B6=t=>!P6(t)&&J(t)&&no(t,"mceAction"),$6=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const c=Oe(a.ui)?a.ui:!1;t.execCommand(a.cmd,c,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},LJ=(t,s,a,c)=>{const d=Ot("dialog"),h=Re(t.title,d,c),v=Dy(t),E=t.buttons.bind(_e=>_e.length===0?R.none():R.some(zt({buttons:_e},d,c))),T=R6(()=>fe,rt(()=>he,c.shared.providers,s)),D={...t.height.fold(()=>({}),_e=>({height:_e+"px","max-height":_e+"px"})),...t.width.fold(()=>({}),_e=>({width:_e+"px","max-width":_e+"px"}))},N=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],L=new hd(t.url,{base_uri:new hd(window.location.href)}),V=`${L.protocol}://${L.host}${L.port?":"+L.port:""}`,j=Zd(),Y=(_e,Xe)=>R.some(Xe),ie=[Tt.config({channel:`${ny}-${d}`,updateState:Y,initialData:t}),En("messages",[No(()=>{const _e=za(we.fromDom(window),"message",Xe=>{if(L.isSameOrigin(new hd(Xe.raw.origin))){const Le=Xe.raw.data;P6(Le)?$6(a,fe,Le):B6(Le)&&t.onMessage(fe,Le)}});j.set(_e)}),Wu(j.clear)]),wi.config({channels:{[l3]:{onReceive:(_e,Xe)=>{Vs(_e.element,"iframe").each(Le=>{const $e=Le.dom.contentWindow;Je($e)&&$e.postMessage(Xe,V)})}}}})],he=Py({id:d,header:h,body:v,footer:E,extraClasses:N,extraBehaviours:ie,extraStyles:D},T,c),fe=b2(he);return{dialog:he,instanceApi:fe}},HJ=t=>{const s=t.shared;return{open:(c,d)=>{const h=()=>{gr.hide(D),d()},v=bo(c_({name:"close-alert",text:"OK",primary:!0,buttonType:R.some("primary"),align:"end",enabled:!0,icon:R.none()},"cancel",t)),E=My(),T=Ry(h,s.providers),D=xa(pk({lazySink:()=>s.getSink(),header:vf(E,T),body:h2(c,s.providers),footer:R.some(Ub(cM([],[v.asSpec()]))),onEscape:h,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Ve(mp,h)],eventOrder:{}}));gr.show(D);const N=v.get(D);cn.focus(N)}}},zJ=t=>{const s=t.shared;return{open:(c,d)=>{const h=V=>{gr.hide(N),d(V)},v=bo(c_({name:"yes",text:"Yes",primary:!0,buttonType:R.some("primary"),align:"end",enabled:!0,icon:R.none()},"submit",t)),E=c_({name:"no",text:"No",primary:!1,buttonType:R.some("secondary"),align:"end",enabled:!0,icon:R.none()},"cancel",t),T=My(),D=Ry(()=>h(!1),s.providers),N=xa(pk({lazySink:()=>s.getSink(),header:vf(T,D),body:h2(c,s.providers),footer:R.some(Ub(cM([],[E,v.asSpec()]))),onEscape:()=>h(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Ve(mp,()=>h(!1)),Ve(_S,()=>h(!0))],eventOrder:{}}));gr.show(N);const L=v.get(N);cn.focus(L)}}},BY=(t,s)=>Mo(Cs("data",s,t)),$Y=t=>SS(t,".tox-alert-dialog")||SS(t,".tox-confirm-dialog"),VJ=(t,s,a)=>s&&a?[]:[Xs.config({contextual:{lazyContext:()=>R.some(ws(we.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:c=>dp(t,c.element).map(h=>({bounds:G0(h),optScrollEnv:R.some({currentScrollTop:h.element.dom.scrollTop,scrollElmTop:ac(h.element).top})})).getOrThunk(()=>({bounds:Ur(),optScrollEnv:R.none()}))})],UJ=t=>{const s=t.editor,a=aS(s),c=HJ(t.backstages.dialog),d=zJ(t.backstages.dialog),h=(Y,ie,Ee)=>{if(!je(ie)){if(ie.inline==="toolbar")return D(Y,t.backstages.popup.shared.anchors.inlineDialog(),Ee,ie);if(ie.inline==="bottom")return N(Y,t.backstages.popup.shared.anchors.inlineBottomDialog(),Ee,ie);if(ie.inline==="cursor")return D(Y,t.backstages.popup.shared.anchors.cursor(),Ee,ie)}return T(Y,Ee)},v=(Y,ie)=>E(Y,ie),E=(Y,ie)=>{const Ee=he=>{const fe=LJ(he,{closeWindow:()=>{gr.hide(fe.dialog),ie(fe.instanceApi)}},s,t.backstages.dialog);return gr.show(fe.dialog),fe.instanceApi};return Cn.openUrl(Ee,Y)},T=(Y,ie)=>{const Ee=(he,fe,_e)=>{const Xe=fe,$e=Ri({dataValidator:_e,initialData:Xe,internalDialog:he},{redial:Cn.redial,closeWindow:()=>{gr.hide($e.dialog),ie($e.instanceApi)}},t.backstages.dialog);return gr.show($e.dialog),$e.instanceApi.setData(Xe),$e.instanceApi};return Cn.open(Ee,Y)},D=(Y,ie,Ee,he)=>{const fe=(_e,Xe,Le)=>{const $e=BY(Xe,Le),ct=Dn(),mt=t.backstages.popup.shared.header.isPositionedAtTop(),Tn={dataValidator:Le,initialData:$e,internalDialog:_e},$t=()=>ct.on(Yt=>{xs.reposition(Yt),(!a||!mt)&&Xs.refresh(Yt)}),Qt=Qc(Tn,{redial:Cn.redial,closeWindow:()=>{ct.on(xs.hide),s.off("ResizeEditor",$t),ct.clear(),Ee(Qt.instanceApi)}},t.backstages.popup,he.ariaAttrs,$t),ln=xa(xs.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:he.persistent?{event:"doNotDismissYet"}:{},...mt?{}:{fireRepositionEventInstead:{}},inlineBehaviours:lt([En("window-manager-inline-events",[Ve(Bm(),(Yt,qn)=>{Fn(Qt.dialog,mp)})]),...VJ(s,a,mt)]),isExtraPart:(Yt,qn)=>$Y(qn)}));ct.set(ln);const ho=()=>{const Yt=s.inline?Os():we.fromDom(s.getContainer()),qn=ws(Yt);return R.some(qn)};return xs.showWithinBounds(ln,dc(Qt.dialog),{anchor:ie},ho),(!a||!mt)&&(Xs.refresh(ln),s.on("ResizeEditor",$t)),Qt.instanceApi.setData($e),qt.focusIn(Qt.dialog),Qt.instanceApi};return Cn.open(fe,Y)},N=(Y,ie,Ee,he)=>{const fe=(_e,Xe,Le)=>{const $e=BY(Xe,Le),ct=Dn(),mt=t.backstages.popup.shared.header.isPositionedAtTop(),Tn={dataValidator:Le,initialData:$e,internalDialog:_e},$t=()=>ct.on(Yt=>{xs.reposition(Yt),Xs.refresh(Yt)}),Qt=Qc(Tn,{redial:Cn.redial,closeWindow:()=>{ct.on(xs.hide),s.off("ResizeEditor ScrollWindow ElementScroll",$t),ct.clear(),Ee(Qt.instanceApi)}},t.backstages.popup,he.ariaAttrs,$t),ln=xa(xs.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:he.persistent?{event:"doNotDismissYet"}:{},...mt?{}:{fireRepositionEventInstead:{}},inlineBehaviours:lt([En("window-manager-inline-events",[Ve(Bm(),(Yt,qn)=>{Fn(Qt.dialog,mp)})]),Xs.config({contextual:{lazyContext:()=>R.some(ws(we.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:Yt=>dp(s,Yt.element).map(ft=>({bounds:G0(ft),optScrollEnv:R.some({currentScrollTop:ft.element.dom.scrollTop,scrollElmTop:ac(ft.element).top})})).getOrThunk(()=>({bounds:Ur(),optScrollEnv:R.none()}))})]),isExtraPart:(Yt,qn)=>$Y(qn)}));ct.set(ln);const ho=()=>t.backstages.popup.shared.getSink().toOptional().bind(Yt=>{const qn=dp(s,Yt.element),ft=15,Bt=qn.map(nn=>G0(nn)).getOr(Ur()),mn=ws(we.fromDom(s.getContentAreaContainer())),$n=t1(mn,Bt);return R.some(gs($n.x,$n.y,$n.width,$n.height-ft))});return xs.showWithinBounds(ln,dc(Qt.dialog),{anchor:ie},ho),Xs.refresh(ln),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",$t),Qt.instanceApi.setData($e),qt.focusIn(Qt.dialog),Qt.instanceApi};return Cn.open(fe,Y)};return{open:h,openUrl:v,alert:(Y,ie)=>{c.open(Y,ie)},close:Y=>{Y.close()},confirm:(Y,ie)=>{d.open(Y,ie)}}},WJ=t=>{fP(t),JH(t),rG(t)};var ZJ=()=>{Nu.add("silver",t=>{WJ(t);let s=()=>Ur();const{dialogs:a,popups:c,renderUI:d}=oq(t,{getPopupSinkBounds:()=>s()}),h=()=>{const T=d();return dp(t,c.getMothership().element).each(N=>{s=()=>G0(N)}),T};Vz.register(t,c.backstage.shared);const v=UJ({editor:t,backstages:{popup:c.backstage,dialog:a.backstage}}),E=()=>c4(t,{backstage:c.backstage},c.getMothership());return{renderUI:h,getWindowManagerImpl:ae(v),getNotificationManagerImpl:E}})};ZJ()})();(function(){var w=tinymce.util.Tools.resolve("tinymce.PluginManager");const f=(q,le,ye)=>{var Be;return ye(q,le.prototype)?!0:((Be=q.constructor)===null||Be===void 0?void 0:Be.name)===le.name},p=q=>{const le=typeof q;return q===null?"null":le==="object"&&Array.isArray(q)?"array":le==="object"&&f(q,String,(ye,Be)=>Be.isPrototypeOf(ye))?"string":le},C=q=>le=>p(le)===q,O=q=>le=>typeof le===q,$=q=>le=>q===le,P=C("string"),W=C("object"),J=C("array"),re=$(null),me=O("boolean"),pe=q=>q==null,Oe=q=>!pe(q),je=O("function"),De=(q,le)=>{if(J(q)){for(let ye=0,Be=q.length;ye<Be;++ye)if(!le(q[ye]))return!1;return!0}return!1},Je=()=>{},Ye=q=>()=>q,en=(q,le)=>q===le;class ze{constructor(le,ye){this.tag=le,this.value=ye}static some(le){return new ze(!0,le)}static none(){return ze.singletonNone}fold(le,ye){return this.tag?ye(this.value):le()}isSome(){return this.tag}isNone(){return!this.tag}map(le){return this.tag?ze.some(le(this.value)):ze.none()}bind(le){return this.tag?le(this.value):ze.none()}exists(le){return this.tag&&le(this.value)}forall(le){return!this.tag||le(this.value)}filter(le){return!this.tag||le(this.value)?this:ze.none()}getOr(le){return this.tag?this.value:le}or(le){return this.tag?this:le}getOrThunk(le){return this.tag?this.value:le()}orThunk(le){return this.tag?this:le()}getOrDie(le){if(this.tag)return this.value;throw new Error(le??"Called getOrDie on None")}static from(le){return Oe(le)?ze.some(le):ze.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(le){this.tag&&le(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ze.singletonNone=new ze(!1);const ee=Array.prototype.indexOf,qe=Array.prototype.push,Sn=(q,le)=>ee.call(q,le),At=(q,le)=>Sn(q,le)>-1,ae=(q,le)=>{const ye=q.length,Be=new Array(ye);for(let ot=0;ot<ye;ot++){const rn=q[ot];Be[ot]=le(rn,ot)}return Be},yt=(q,le)=>{for(let ye=0,Be=q.length;ye<Be;ye++){const ot=q[ye];le(ot,ye)}},Dt=(q,le,ye)=>(yt(q,(Be,ot)=>{ye=le(ye,Be,ot)}),ye),Ht=q=>{const le=[];for(let ye=0,Be=q.length;ye<Be;++ye){if(!J(q[ye]))throw new Error("Arr.flatten item "+ye+" was not an array, input: "+q);qe.apply(le,q[ye])}return le},Te=(q,le)=>Ht(ae(q,le)),ue=(q,le)=>{for(let ye=0;ye<q.length;ye++){const Be=le(q[ye],ye);if(Be.isSome())return Be}return ze.none()},Yn=(q,le,ye=en)=>q.exists(Be=>ye(Be,le)),Pn=q=>{const le=[],ye=Be=>{le.push(Be)};for(let Be=0;Be<q.length;Be++)q[Be].each(ye);return le},Rt=(q,le)=>q?ze.some(le):ze.none(),R=q=>le=>le.options.get(q),So=q=>{const le=q.options.register;le("link_assume_external_targets",{processor:ye=>{const Be=P(ye)||me(ye);return Be?ye===!0?{value:1,valid:Be}:ye==="http"||ye==="https"?{value:ye,valid:Be}:{value:0,valid:Be}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),le("link_context_toolbar",{processor:"boolean",default:!1}),le("link_list",{processor:ye=>P(ye)||je(ye)||De(ye,W)}),le("link_default_target",{processor:"string"}),le("link_default_protocol",{processor:"string",default:"https"}),le("link_target_list",{processor:ye=>me(ye)||De(ye,W),default:!0}),le("link_rel_list",{processor:"object[]",default:[]}),le("link_class_list",{processor:"object[]",default:[]}),le("link_title",{processor:"boolean",default:!0}),le("allow_unsafe_link_target",{processor:"boolean",default:!1}),le("link_quicklink",{processor:"boolean",default:!1})},gt=R("link_assume_external_targets"),Ro=R("link_context_toolbar"),tn=R("link_list"),Ge=R("link_default_target"),yo=R("link_default_protocol"),kr=R("link_target_list"),us=R("link_rel_list"),Fr=R("link_class_list"),Ke=R("link_title"),St=R("allow_unsafe_link_target"),Z=R("link_quicklink");var Dc=tinymce.util.Tools.resolve("tinymce.util.Tools");const ko=q=>P(q.value)?q.value:"",Ns=q=>P(q.text)?q.text:P(q.title)?q.title:"",Io=(q,le)=>{const ye=[];return Dc.each(q,Be=>{const ot=Ns(Be);if(Be.menu!==void 0){const rn=Io(Be.menu,le);ye.push({text:ot,items:rn})}else{const rn=le(Be);ye.push({text:ot,value:rn})}}),ye},Pg=(q=ko)=>le=>ze.from(le).map(ye=>Io(ye,q)),Wt={sanitize:q=>Pg(ko)(q),sanitizeWith:Pg,createUi:(q,le)=>ye=>({name:q,type:"listbox",label:le,items:ye}),getValue:ko},Ie=Object.keys,uo=Object.hasOwnProperty,sr=(q,le)=>{const ye=Ie(q);for(let Be=0,ot=ye.length;Be<ot;Be++){const rn=ye[Be],Oo=q[rn];le(Oo,rn)}},Zt=q=>(le,ye)=>{q[ye]=le},$l=(q,le,ye,Be)=>{sr(q,(ot,rn)=>{(le(ot,rn)?ye:Be)(ot,rn)})},ss=(q,le)=>{const ye={};return $l(q,le,Zt(ye),Je),ye},Eu=(q,le)=>uo.call(q,le),_s=(q,le)=>Eu(q,le)&&q[le]!==void 0&&q[le]!==null;var Jr=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),pm=tinymce.util.Tools.resolve("tinymce.util.URI");const Ka=q=>Oe(q)&&q.nodeName.toLowerCase()==="a",Js=q=>Ka(q)&&!!Xo(q),ns=(q,le)=>{if(q.collapsed)return[];{const ye=q.cloneContents(),Be=ye.firstChild,ot=new Jr(Be,ye),rn=[];let Oo=Be;do le(Oo)&&rn.push(Oo);while(Oo=ot.next());return rn}},wd=q=>/^\w+:/i.test(q),Xo=q=>{var le,ye;return(ye=(le=q.getAttribute("data-mce-href"))!==null&&le!==void 0?le:q.getAttribute("href"))!==null&&ye!==void 0?ye:""},Jo=(q,le)=>{const ye=["noopener"],Be=q?q.split(/\s+/):[],ot=xo=>Dc.trim(xo.sort().join(" ")),rn=xo=>(xo=Oo(xo),xo.length>0?xo.concat(ye):ye),Oo=xo=>xo.filter(ds=>Dc.inArray(ye,ds)===-1),es=le?rn(Be):Oo(Be);return es.length>0?ot(es):""},ol=q=>q.replace(/\uFEFF/g,""),js=(q,le)=>(le=le||Rc(q.selection.getRng())[0]||q.selection.getNode(),no(le)?ze.from(q.dom.select("a[href]",le)[0]):ze.from(q.dom.getParent(le,"a[href]"))),Pi=(q,le)=>js(q,le).isSome(),Or=(q,le)=>{const ye=le.fold(()=>q.getContent({format:"text"}),Be=>Be.innerText||Be.textContent||"");return ol(ye)},Rc=q=>ns(q,Js),Cd=q=>Dc.grep(q,Js),Ar=q=>Cd(q).length>0,bm=q=>Rc(q).length>0,vt=q=>{const le=q.schema.getTextInlineElements(),ye=rn=>rn.nodeType===1&&!Ka(rn)&&!Eu(le,rn.nodeName.toLowerCase());if(js(q).exists(rn=>rn.hasAttribute("data-mce-block")))return!1;const ot=q.selection.getRng();return ot.collapsed?!0:ns(ot,ye).length===0},no=q=>Oe(q)&&q.nodeName==="FIGURE"&&/\bimage\b/i.test(q.className),Qr=q=>Dt(["title","rel","class","target"],(ye,Be)=>(q[Be].each(ot=>{ye[Be]=ot.length>0?ot:null}),ye),{href:q.href}),Ma=(q,le)=>(le==="http"||le==="https")&&!wd(q)?le+"://"+q:q,vm=(q,le)=>{const ye={...le};if(us(q).length===0&&!St(q)){const Be=Jo(ye.rel,ye.target==="_blank");ye.rel=Be||null}return ze.from(ye.target).isNone()&&kr(q)===!1&&(ye.target=Ge(q)),ye.href=Ma(ye.href,gt(q)),ye},Bi=(q,le,ye,Be)=>{ye.each(ot=>{Eu(le,"innerText")?le.innerText=ot:le.textContent=ot}),q.dom.setAttribs(le,Be),q.selection.select(le)},Uo=(q,le,ye,Be)=>{const ot=q.dom;no(le)?ea(ot,le,Be):ye.fold(()=>{q.execCommand("mceInsertLink",!1,Be)},rn=>{q.insertContent(ot.createHTML("a",Be,ot.encode(rn)))})},$i=(q,le,ye)=>{const Be=q.selection.getNode(),ot=js(q,Be),rn=vm(q,Qr(ye));q.undoManager.transact(()=>{ye.href===le.href&&le.attach(),ot.fold(()=>{Uo(q,Be,ye.text,rn)},Oo=>{q.focus(),Bi(q,Oo,ye.text,rn)})})},sl=q=>{const le=q.dom,ye=q.selection,Be=ye.getBookmark(),ot=ye.getRng().cloneRange(),rn=le.getParent(ot.startContainer,"a[href]",q.getBody()),Oo=le.getParent(ot.endContainer,"a[href]",q.getBody());rn&&ot.setStartBefore(rn),Oo&&ot.setEndAfter(Oo),ye.setRng(ot),q.execCommand("unlink"),ye.moveToBookmark(Be)},Fo=q=>{q.undoManager.transact(()=>{const le=q.selection.getNode();no(le)?ym(q,le):sl(q),q.focus()})},an=q=>{const{class:le,href:ye,rel:Be,target:ot,text:rn,title:Oo}=q;return ss({class:le.getOrNull(),href:ye,rel:Be.getOrNull(),target:ot.getOrNull(),text:rn.getOrNull(),title:Oo.getOrNull()},(es,xo)=>re(es)===!1)},ba=(q,le)=>{const ye=q.options.get,Be={allow_html_data_urls:ye("allow_html_data_urls"),allow_script_urls:ye("allow_script_urls"),allow_svg_data_urls:ye("allow_svg_data_urls")},ot=le.href;return{...le,href:pm.isDomSafe(ot,"a",Be)?ot:""}},rl=(q,le,ye)=>{const Be=ba(q,ye);q.hasPlugin("rtc",!0)?q.execCommand("createlink",!1,an(Be)):$i(q,le,Be)},Il=q=>{q.hasPlugin("rtc",!0)?q.execCommand("unlink"):Fo(q)},ym=(q,le)=>{var ye;const Be=q.dom.select("img",le)[0];if(Be){const ot=q.dom.getParents(Be,"a[href]",le)[0];ot&&((ye=ot.parentNode)===null||ye===void 0||ye.insertBefore(Be,ot),q.dom.remove(ot))}},ea=(q,le,ye)=>{var Be;const ot=q.select("img",le)[0];if(ot){const rn=q.create("a",ye);(Be=ot.parentNode)===null||Be===void 0||Be.insertBefore(rn,ot),rn.appendChild(ot)}},rr=q=>_s(q,"items"),ks=(q,le)=>ue(le,ye=>rr(ye)?ks(q,ye.items):Rt(ye.value===q,ye)),Ii=(q,le,ye,Be)=>{const ot=Be[le],rn=q.length>0;return ot!==void 0?ks(ot,ye).map(Oo=>({url:{value:Oo.value,meta:{text:rn?q:Oo.text,attach:Je}},text:rn?q:Oo.text})):ze.none()},wm=(q,le)=>le==="link"?q.link:le==="anchor"?q.anchor:ze.none(),Na={init:(q,le)=>{const ye={text:q.text,title:q.title},Be=xo=>{var ds;return Rt(ye.title.length<=0,ze.from((ds=xo.meta)===null||ds===void 0?void 0:ds.title).getOr(""))},ot=xo=>{var ds;return Rt(ye.text.length<=0,ze.from((ds=xo.meta)===null||ds===void 0?void 0:ds.text).getOr(xo.value))},rn=xo=>{const ds=ot(xo.url),Xn=Be(xo.url);return ds.isSome()||Xn.isSome()?ze.some({...ds.map(Os=>({text:Os})).getOr({}),...Xn.map(Os=>({title:Os})).getOr({})}):ze.none()},Oo=(xo,ds)=>{const Xn=wm(le,ds).getOr([]);return Ii(ye.text,ds,Xn,xo)};return{onChange:(xo,ds)=>{const Xn=ds.name;return Xn==="url"?rn(xo()):At(["anchor","link"],Xn)?Oo(xo(),Xn):((Xn==="text"||Xn==="title")&&(ye[Xn]=xo()[Xn]),ze.none())}}},getDelta:Ii};var vs=tinymce.util.Tools.resolve("tinymce.util.Delay");const Ya=(q,le,ye)=>{const Be=q.selection.getRng();vs.setEditorTimeout(q,()=>{q.windowManager.confirm(le,ot=>{q.selection.setRng(Be),ye(ot)})})},Fl=q=>{const le=q.href;return le.indexOf("@")>0&&le.indexOf("/")===-1&&le.indexOf("mailto:")===-1?ze.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Be=>({...Be,href:"mailto:"+le})}):ze.none()},Wp=(q,le)=>ye=>{const Be=ye.href;return q===1&&!wd(Be)||q===0&&/^\s*www(\.|\d\.)/i.test(Be)?ze.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${le}:// prefix?`,preprocess:rn=>({...rn,href:le+"://"+Be})}):ze.none()},Mc={preprocess:(q,le)=>ue([Fl,Wp(gt(q),yo(q))],ye=>ye(le)).fold(()=>Promise.resolve(le),ye=>new Promise(Be=>{Ya(q,ye.message,ot=>{Be(ot?ye.preprocess(le):le)})}))},we={getAnchors:q=>{const le=q.dom.select("a:not([href])"),ye=Te(le,Be=>{const ot=Be.name||Be.id;return ot?[{text:ot,value:"#"+ot}]:[]});return ye.length>0?ze.some([{text:"None",value:""}].concat(ye)):ze.none()}},Ll={getClasses:q=>{const le=Fr(q);return le.length>0?Wt.sanitize(le):ze.none()}},Cf=q=>{try{return ze.some(JSON.parse(q))}catch{return ze.none()}},Lo={getLinks:q=>{const le=Be=>q.convertURL(Be.value||Be.url||"","href"),ye=tn(q);return new Promise(Be=>{P(ye)?fetch(ye).then(ot=>ot.ok?ot.text().then(Cf):Promise.reject()).then(Be,()=>Be(ze.none())):je(ye)?ye(ot=>Be(ze.some(ot))):Be(ze.from(ye))}).then(Be=>Be.bind(Wt.sanitizeWith(le)).map(ot=>ot.length>0?[{text:"None",value:""}].concat(ot):ot))}},Sf={getRels:(q,le)=>{const ye=us(q);if(ye.length>0){const Be=Yn(le,"_blank"),ot=St(q)===!1,rn=es=>Jo(Wt.getValue(es),Be);return(ot?Wt.sanitizeWith(rn):Wt.sanitize)(ye)}return ze.none()}},_u=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],br={getTargets:q=>{const le=kr(q);return J(le)?Wt.sanitize(le).orThunk(()=>ze.some(_u)):le===!1?ze.none():ze.some(_u)}},Ps=(q,le,ye)=>{const Be=q.getAttrib(le,ye);return Be!==null&&Be.length>0?ze.some(Be):ze.none()},Xa=(q,le)=>{const ye=q.dom,ot=vt(q)?ze.some(Or(q.selection,le)):ze.none(),rn=le.bind(Xn=>ze.from(ye.getAttrib(Xn,"href"))),Oo=le.bind(Xn=>ze.from(ye.getAttrib(Xn,"target"))),es=le.bind(Xn=>Ps(ye,Xn,"rel")),xo=le.bind(Xn=>Ps(ye,Xn,"class")),ds=le.bind(Xn=>Ps(ye,Xn,"title"));return{url:rn,text:ot,title:ds,target:Oo,rel:es,linkClass:xo}},Hl={collect:(q,le)=>Lo.getLinks(q).then(ye=>{const Be=Xa(q,le);return{anchor:Be,catalogs:{targets:br.getTargets(q),rels:Sf.getRels(q,Be.target),classes:Ll.getClasses(q),anchor:we.getAnchors(q),link:ye},optNode:le,flags:{titleEnabled:Ke(q)}}})},Ed=(q,le)=>ye=>{const Be=ye.getData();if(!Be.url.value){Il(q),ye.close();return}const ot=es=>ze.from(Be[es]).filter(xo=>!Yn(le.anchor[es],xo)),rn={href:Be.url.value,text:ot("text"),target:ot("target"),rel:ot("rel"),class:ot("linkClass"),title:ot("title")},Oo={href:Be.url.value,attach:Be.url.meta!==void 0&&Be.url.meta.attach?Be.url.meta.attach:Je};Mc.preprocess(q,rn).then(es=>{rl(q,Oo,es)}),ye.close()},ku=q=>{const le=js(q);return Hl.collect(q,le)},po=(q,le)=>{const ye=q.anchor,Be=ye.url.getOr("");return{url:{value:Be,meta:{original:{value:Be}}},text:ye.text.getOr(""),title:ye.title.getOr(""),anchor:Be,link:Be,rel:ye.rel.getOr(""),target:ye.target.or(le).getOr(""),linkClass:ye.linkClass.getOr("")}},na=(q,le,ye)=>{const Be=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],ot=q.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),rn=q.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],Oo=ze.from(Ge(ye)),es=po(q,Oo),xo=q.catalogs,ds=Na.init(es,xo);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:Ht([Be,ot,rn,Pn([xo.anchor.map(Wt.createUi("anchor","Anchors")),xo.rels.map(Wt.createUi("rel","Rel")),xo.targets.map(Wt.createUi("target","Open link in...")),xo.link.map(Wt.createUi("link","Link list")),xo.classes.map(Wt.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:es,onChange:(Os,{name:Qa})=>{ds.onChange(Os.getData,{name:Qa}).each(Lg=>{Os.setData(Lg)})},onSubmit:le}},rc=q=>{ku(q).then(ye=>{const Be=Ed(q,ye);return na(ye,Be,q)}).then(ye=>{q.windowManager.open(ye)})},il=q=>{q.addCommand("mceLink",(le,ye)=>{(ye==null?void 0:ye.dialog)===!0||!Z(q)?rc(q):q.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})};var ui=tinymce.util.Tools.resolve("tinymce.util.VK");const Gs=(q,le)=>{document.body.appendChild(q),q.dispatchEvent(le),document.body.removeChild(q)},Qo=q=>{const le=document.createElement("a");le.target="_blank",le.href=q,le.rel="noreferrer noopener";const ye=document.createEvent("MouseEvents");ye.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),Gs(le,ye)},va=(q,le)=>q.dom.getParent(le,"a[href]"),xf=q=>va(q,q.selection.getStart()),wo=q=>q.altKey===!0&&q.shiftKey===!1&&q.ctrlKey===!1&&q.metaKey===!1,Lr=(q,le)=>{if(le){const ye=Xo(le);if(/^#/.test(ye)){const Be=q.dom.select(ye);Be.length&&q.selection.scrollIntoView(Be[0],!0)}else Qo(le.href)}},Pa=q=>()=>{q.execCommand("mceLink",!1,{dialog:!0})},ar=q=>()=>{Lr(q,xf(q))},Nc=q=>{q.on("click",le=>{const ye=va(q,le.target);ye&&ui.metaKeyPressed(le)&&(le.preventDefault(),Lr(q,ye))}),q.on("keydown",le=>{if(!le.isDefaultPrevented()&&le.keyCode===13&&wo(le)){const ye=xf(q);ye&&(le.preventDefault(),Lr(q,ye))}})},Pc=(q,le)=>(q.on("NodeChange",le),()=>q.off("NodeChange",le)),oa=q=>le=>{const ye=()=>{le.setActive(!q.mode.isReadOnly()&&Pi(q,q.selection.getNode())),le.setEnabled(q.selection.isEditable())};return ye(),Pc(q,ye)},Bc=q=>le=>{const ye=()=>{le.setEnabled(q.selection.isEditable())};return ye(),Pc(q,ye)},Fi=q=>(q.selection.isCollapsed()?Cd(q.dom.getParents(q.selection.getStart())):Rc(q.selection.getRng())).length===1,$g=q=>le=>{const ye=()=>le.setEnabled(Fi(q));return ye(),Pc(q,ye)},$c=q=>le=>{const ye=rn=>Ar(rn)||bm(q.selection.getRng()),Be=q.dom.getParents(q.selection.getStart()),ot=rn=>{le.setEnabled(ye(rn)&&q.selection.isEditable())};return ot(Be),Pc(q,rn=>ot(rn.parents))},Ig=q=>{q.addShortcut("Meta+K","",()=>{q.execCommand("mceLink")})},di=q=>{q.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Pa(q),onSetup:oa(q)}),q.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:ar(q),onSetup:$g(q)}),q.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Il(q),onSetup:$c(q)})},zl=q=>{q.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:ar(q),onSetup:$g(q)}),q.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onSetup:Bc(q),onAction:Pa(q)}),q.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Il(q),onSetup:$c(q)})},Ef=q=>{const le="link unlink openlink",ye="link";q.ui.registry.addContextMenu("link",{update:Be=>q.dom.isEditable(Be)?Ar(q.dom.getParents(Be,"a"))?le:ye:""})},Tf=q=>{const le=ot=>{ot.selection.collapse(!1)},ye=ot=>{const rn=q.selection.getNode();return ot.setEnabled(Pi(q,rn)),Je},Be=ot=>{const rn=js(q),Oo=vt(q);if(rn.isNone()&&Oo){const es=Or(q.selection,rn);return Rt(es.length===0,ot)}else return ze.none()};q.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:oa(q)},label:"Link",predicate:ot=>Ro(q)&&Pi(q,ot),initValue:()=>js(q).fold(Ye(""),Xo),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:ot=>{const rn=q.selection.getNode();return ot.setActive(Pi(q,rn)),oa(q)(ot)},onAction:ot=>{const rn=ot.getValue(),Oo=Be(rn);rl(q,{href:rn,attach:Je},{href:rn,text:Oo,title:ze.none(),rel:ze.none(),target:ze.none(),class:ze.none()}),le(q),ot.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:ye,onAction:ot=>{Il(q),ot.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:ye,onAction:ot=>{ar(q)(),ot.hide()}}]})};var Fg=()=>{w.add("link",q=>{So(q),di(q),zl(q),Ef(q),Tf(q),Nc(q),il(q),Ig(q)})};Fg()})();(function(){var w=tinymce.util.Tools.resolve("tinymce.PluginManager");const f=(_,B,U)=>{var oe;return U(_,B.prototype)?!0:((oe=_.constructor)===null||oe===void 0?void 0:oe.name)===B.name},p=_=>{const B=typeof _;return _===null?"null":B==="object"&&Array.isArray(_)?"array":B==="object"&&f(_,String,(U,oe)=>oe.isPrototypeOf(U))?"string":B},C=_=>B=>p(B)===_,O=_=>B=>typeof B===_,$=C("string"),P=C("object"),W=C("array"),J=O("boolean"),re=_=>_==null,me=_=>!re(_),pe=O("function"),Oe=O("number"),je=()=>{},De=(_,B)=>U=>_(B(U)),Je=_=>()=>_,Ye=(_,B)=>_===B;function en(_,...B){return(...U)=>{const oe=B.concat(U);return _.apply(null,oe)}}const ze=_=>B=>!_(B),ee=Je(!1);class qe{constructor(B,U){this.tag=B,this.value=U}static some(B){return new qe(!0,B)}static none(){return qe.singletonNone}fold(B,U){return this.tag?U(this.value):B()}isSome(){return this.tag}isNone(){return!this.tag}map(B){return this.tag?qe.some(B(this.value)):qe.none()}bind(B){return this.tag?B(this.value):qe.none()}exists(B){return this.tag&&B(this.value)}forall(B){return!this.tag||B(this.value)}filter(B){return!this.tag||B(this.value)?this:qe.none()}getOr(B){return this.tag?this.value:B}or(B){return this.tag?this:B}getOrThunk(B){return this.tag?this.value:B()}orThunk(B){return this.tag?this:B()}getOrDie(B){if(this.tag)return this.value;throw new Error(B??"Called getOrDie on None")}static from(B){return me(B)?qe.some(B):qe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(B){this.tag&&B(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}qe.singletonNone=new qe(!1);const Sn=Array.prototype.slice,At=Array.prototype.indexOf,ae=Array.prototype.push,yt=(_,B)=>At.call(_,B),Dt=(_,B)=>yt(_,B)>-1,Ht=(_,B)=>{for(let U=0,oe=_.length;U<oe;U++){const de=_[U];if(B(de,U))return!0}return!1},Te=(_,B)=>{const U=_.length,oe=new Array(U);for(let de=0;de<U;de++){const tt=_[de];oe[de]=B(tt,de)}return oe},ue=(_,B)=>{for(let U=0,oe=_.length;U<oe;U++){const de=_[U];B(de,U)}},Yn=(_,B)=>{const U=[];for(let oe=0,de=_.length;oe<de;oe++){const tt=_[oe];B(tt,oe)&&U.push(tt)}return U},Pn=(_,B)=>{if(_.length===0)return[];{let U=B(_[0]);const oe=[];let de=[];for(let tt=0,It=_.length;tt<It;tt++){const pn=_[tt],hn=B(pn);hn!==U&&(oe.push(de),de=[]),U=hn,de.push(pn)}return de.length!==0&&oe.push(de),oe}},Rt=(_,B,U)=>(ue(_,(oe,de)=>{U=B(U,oe,de)}),U),R=(_,B,U)=>{for(let oe=0,de=_.length;oe<de;oe++){const tt=_[oe];if(B(tt,oe))return qe.some(tt);if(U(tt,oe))break}return qe.none()},So=(_,B)=>R(_,B,ee),gt=_=>{const B=[];for(let U=0,oe=_.length;U<oe;++U){if(!W(_[U]))throw new Error("Arr.flatten item "+U+" was not an array, input: "+_);ae.apply(B,_[U])}return B},Ro=(_,B)=>gt(Te(_,B)),tn=_=>{const B=Sn.call(_,0);return B.reverse(),B},Ge=(_,B)=>B>=0&&B<_.length?qe.some(_[B]):qe.none(),yo=_=>Ge(_,0),kr=_=>Ge(_,_.length-1),us=(_,B)=>{const U=[],oe=pe(B)?de=>Ht(U,tt=>B(tt,de)):de=>Dt(U,de);for(let de=0,tt=_.length;de<tt;de++){const It=_[de];oe(It)||U.push(It)}return U},Fr=(_,B,U=Ye)=>_.exists(oe=>U(oe,B)),Ke=(_,B,U=Ye)=>St(_,B,U).getOr(_.isNone()&&B.isNone()),St=(_,B,U)=>_.isSome()&&B.isSome()?qe.some(U(_.getOrDie(),B.getOrDie())):qe.none(),Z=8,Dc=9,ko=11,Ns=1,Io=3,Pg=(_,B)=>{const oe=(B||document).createElement("div");if(oe.innerHTML=_,!oe.hasChildNodes()||oe.childNodes.length>1){const de="HTML does not have a single root node";throw console.error(de,_),new Error(de)}return Wt(oe.childNodes[0])},fn=(_,B)=>{const oe=(B||document).createElement(_);return Wt(oe)},Yo=(_,B)=>{const oe=(B||document).createTextNode(_);return Wt(oe)},Wt=_=>{if(_==null)throw new Error("Node cannot be null or undefined");return{dom:_}},uo={fromHtml:Pg,fromTag:fn,fromText:Yo,fromDom:Wt,fromPoint:(_,B,U)=>qe.from(_.dom.elementFromPoint(B,U)).map(Wt)},sr=(_,B)=>{const U=_.dom;if(U.nodeType!==Ns)return!1;{const oe=U;if(oe.matches!==void 0)return oe.matches(B);if(oe.msMatchesSelector!==void 0)return oe.msMatchesSelector(B);if(oe.webkitMatchesSelector!==void 0)return oe.webkitMatchesSelector(B);if(oe.mozMatchesSelector!==void 0)return oe.mozMatchesSelector(B);throw new Error("Browser lacks native selectors")}},Zt=(_,B)=>_.dom===B.dom,$l=(_,B)=>{const U=_.dom,oe=B.dom;return U===oe?!1:U.contains(oe)},ss=sr,Eu=typeof window<"u"?window:Function("return this;")(),_s=(_,B)=>{let U=B??Eu;for(let oe=0;oe<_.length&&U!==void 0&&U!==null;++oe)U=U[_[oe]];return U},Jr=(_,B)=>{const U=_.split(".");return _s(U,B)},pm=(_,B)=>Jr(_,B),Ka=(_,B)=>{const U=pm(_,B);if(U==null)throw new Error(_+" not available on this browser");return U},Js=Object.getPrototypeOf,ns=_=>Ka("HTMLElement",_),wd=_=>{const B=Jr("ownerDocument.defaultView",_);return P(_)&&(ns(B).prototype.isPrototypeOf(_)||/^HTML\w*Element$/.test(Js(_).constructor.name))},Xo=_=>_.dom.nodeName.toLowerCase(),Jo=_=>_.dom.nodeType,ol=_=>B=>Jo(B)===_,js=_=>Jo(_)===Z||Xo(_)==="#comment",Pi=_=>Or(_)&&wd(_.dom),Or=ol(Ns),Rc=ol(Io),Cd=ol(Dc),Ar=ol(ko),bm=_=>B=>Or(B)&&Xo(B)===_,vt=_=>uo.fromDom(_.dom.ownerDocument),no=_=>Cd(_)?_:vt(_),Qr=_=>qe.from(_.dom.parentNode).map(uo.fromDom),Ma=_=>qe.from(_.dom.parentElement).map(uo.fromDom),vm=_=>qe.from(_.dom.nextSibling).map(uo.fromDom),Bi=_=>Te(_.dom.childNodes,uo.fromDom),Uo=(_,B)=>{const U=_.dom.childNodes;return qe.from(U[B]).map(uo.fromDom)},$i=_=>Uo(_,0),sl=_=>Uo(_,_.dom.childNodes.length-1),Fo=_=>Ar(_)&&me(_.dom.host),ba=pe(Element.prototype.attachShadow)&&pe(Node.prototype.getRootNode)?_=>uo.fromDom(_.dom.getRootNode()):no,rl=_=>{const B=ba(_);return Fo(B)?qe.some(B):qe.none()},Il=_=>uo.fromDom(_.dom.host),ym=_=>{const B=Rc(_)?_.dom.parentNode:_.dom;if(B==null||B.ownerDocument===null)return!1;const U=B.ownerDocument;return rl(uo.fromDom(B)).fold(()=>U.body.contains(B),De(ym,Il))};var ea=(_,B,U,oe,de)=>_(U,oe)?qe.some(U):pe(de)&&de(U)?qe.none():B(U,oe,de);const rr=(_,B,U)=>{let oe=_.dom;const de=pe(U)?U:ee;for(;oe.parentNode;){oe=oe.parentNode;const tt=uo.fromDom(oe);if(B(tt))return qe.some(tt);if(de(tt))break}return qe.none()},ks=(_,B,U)=>ea((de,tt)=>tt(de),rr,_,B,U),Ii=(_,B,U)=>rr(_,oe=>sr(oe,B),U),wm=(_,B,U)=>ea((de,tt)=>sr(de,tt),Ii,_,B,U),al=_=>wm(_,"[contenteditable]"),Na=(_,B=!1)=>ym(_)?_.dom.isContentEditable:al(_).fold(Je(B),U=>vs(U)==="true"),vs=_=>_.dom.contentEditable,Ya=(_,B)=>{Qr(_).each(oe=>{oe.dom.insertBefore(B.dom,_.dom)})},Fl=(_,B)=>{vm(_).fold(()=>{Qr(_).each(de=>{Tu(de,B)})},oe=>{Ya(oe,B)})},Wp=(_,B)=>{$i(_).fold(()=>{Tu(_,B)},oe=>{_.dom.insertBefore(B.dom,oe.dom)})},Tu=(_,B)=>{_.dom.appendChild(B.dom)},Mc=(_,B)=>{ue(B,U=>{Ya(_,U)})},Zp=(_,B)=>{ue(B,U=>{Tu(_,U)})},we=_=>{_.dom.textContent="",ue(Bi(_),B=>{ta(B)})},ta=_=>{const B=_.dom;B.parentNode!==null&&B.parentNode.removeChild(B)};var Ll=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Cf=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Sd=tinymce.util.Tools.resolve("tinymce.util.VK");const Lo=_=>Te(_,uo.fromDom),Bg=Object.keys,Sf=(_,B)=>{const U=Bg(_);for(let oe=0,de=U.length;oe<de;oe++){const tt=U[oe],It=_[tt];B(It,tt)}},_u=_=>(B,U)=>{_[U]=B},xd=(_,B,U,oe)=>{Sf(_,(de,tt)=>{(B(de,tt)?U:oe)(de,tt)})},br=(_,B)=>{const U={};return xd(_,B,_u(U),je),U},Ps=(_,B,U)=>{if($(U)||J(U)||Oe(U))_.setAttribute(B,U+"");else throw console.error("Invalid call to Attribute.set. Key ",B,":: Value ",U,":: Element ",_),new Error("Attribute value was not simple")},Xa=(_,B)=>{const U=_.dom;Sf(B,(oe,de)=>{Ps(U,de,oe)})},Ja=_=>Rt(_.dom.attributes,(B,U)=>(B[U.name]=U.value,B),{}),Hl=(_,B)=>uo.fromDom(_.dom.cloneNode(B)),Ed=_=>Hl(_,!0),ku=(_,B)=>{const U=uo.fromTag(B),oe=Ja(_);return Xa(U,oe),U},po=(_,B)=>{const U=ku(_,B);Fl(_,U);const oe=Bi(_);return Zp(U,oe),ta(_),U};var na=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),rc=tinymce.util.Tools.resolve("tinymce.util.Tools");const il=_=>B=>me(B)&&B.nodeName.toLowerCase()===_,ui=_=>B=>me(B)&&_.test(B.nodeName),Gs=_=>me(_)&&_.nodeType===3,Qo=_=>me(_)&&_.nodeType===1,va=ui(/^(OL|UL|DL)$/),xf=ui(/^(OL|UL)$/),wo=il("ol"),Lr=ui(/^(LI|DT|DD)$/),Pa=ui(/^(DT|DD)$/),ar=ui(/^(TH|TD)$/),Nc=il("br"),Pc=_=>{var B;return((B=_.parentNode)===null||B===void 0?void 0:B.firstChild)===_},oa=(_,B)=>me(B)&&B.nodeName in _.schema.getTextBlockElements(),Bc=(_,B)=>me(_)&&_.nodeName in B,Fi=(_,B)=>me(B)&&B.nodeName in _.schema.getVoidElements(),$g=(_,B)=>Nc(B)?_.isBlock(B.nextSibling)&&!Nc(B.previousSibling):!1,$c=(_,B,U)=>{const oe=_.isEmpty(B);return U&&_.select("span[data-mce-type=bookmark]",B).length>0?!1:oe},Ig=(_,B)=>_.isChildOf(B,_.getRoot()),di=_=>B=>B.options.get(_),zl=_=>{const B=_.options.register;B("lists_indent_on_tab",{processor:"boolean",default:!0})},Ef=di("lists_indent_on_tab"),Tf=di("forced_root_block"),Fg=di("forced_root_block_attrs"),q=(_,B)=>{const U=_.dom,oe=_.schema.getBlockElements(),de=U.createFragment(),tt=Tf(_),It=Fg(_);let pn,hn,sn=!1;for(hn=U.create(tt,It),Bc(B.firstChild,oe)||de.appendChild(hn);pn=B.firstChild;){const hs=pn.nodeName;!sn&&(hs!=="SPAN"||pn.getAttribute("data-mce-type")!=="bookmark")&&(sn=!0),Bc(pn,oe)?(de.appendChild(pn),hn=null):(hn||(hn=U.create(tt,It),de.appendChild(hn)),hn.appendChild(pn))}return!sn&&hn&&hn.appendChild(U.create("br",{"data-mce-bogus":"1"})),de},le=na.DOM,ye=(_,B,U)=>{const oe=sn=>{const hs=sn.parentNode;hs&&rc.each(de,Rr=>{hs.insertBefore(Rr,U.parentNode)}),le.remove(sn)},de=le.select('span[data-mce-type="bookmark"]',B),tt=q(_,U),It=le.createRng();It.setStartAfter(U),It.setEndAfter(B);const pn=It.extractContents();for(let sn=pn.firstChild;sn;sn=sn.firstChild)if(sn.nodeName==="LI"&&_.dom.isEmpty(sn)){le.remove(sn);break}_.dom.isEmpty(pn)||le.insertAfter(pn,B),le.insertAfter(tt,B);const hn=U.parentElement;hn&&$c(_.dom,hn)&&oe(hn),le.remove(U),$c(_.dom,B)&&le.remove(B)},Be=bm("dd"),ot=bm("dt"),rn=(_,B)=>{Be(B)?po(B,"dt"):ot(B)&&Ma(B).each(U=>ye(_,U.dom,B.dom))},Oo=_=>{ot(_)&&po(_,"dd")},es=(_,B,U)=>{B==="Indent"?ue(U,Oo):ue(U,oe=>rn(_,oe))},xo=(_,B)=>{if(Gs(_))return{container:_,offset:B};const U=Ll.getNode(_,B);return Gs(U)?{container:U,offset:B>=_.childNodes.length?U.data.length:0}:U.previousSibling&&Gs(U.previousSibling)?{container:U.previousSibling,offset:U.previousSibling.data.length}:U.nextSibling&&Gs(U.nextSibling)?{container:U.nextSibling,offset:0}:{container:_,offset:B}},ds=_=>{const B=_.cloneRange(),U=xo(_.startContainer,_.startOffset);B.setStart(U.container,U.offset);const oe=xo(_.endContainer,_.endOffset);return B.setEnd(oe.container,oe.offset),B},Xn=["OL","UL","DL"],Os=Xn.join(","),Qa=(_,B)=>{const U=B||_.selection.getStart(!0);return _.dom.getParent(U,Os,Vl(_,U))},Lg=(_,B)=>me(_)&&B.length===1&&B[0]===_,xt=_=>Yn(_.querySelectorAll(Os),va),_f=_=>{const B=Qa(_),U=_.selection.getSelectedBlocks();return Lg(B,U)?xt(B):Yn(U,oe=>va(oe)&&B!==oe)},As=(_,B)=>{const U=rc.map(B,oe=>{const de=_.dom.getParent(oe,"li,dd,dt",Vl(_,oe));return de||oe});return us(U)},Hr=_=>{const B=_.selection.getSelectedBlocks();return Yn(As(_,B),Lr)},jp=_=>Yn(Hr(_),Pa),ys=(_,B)=>{const U=_.dom.getParents(B,"TD,TH");return U.length>0?U[0]:_.getBody()},Hy=(_,B)=>!va(B)&&!Lr(B)&&Ht(Xn,U=>_.isValidChild(B.nodeName,U)),Vl=(_,B)=>{const U=_.dom.getParents(B,_.dom.isBlock);return So(U,de=>Hy(_.schema,de)).getOr(_.getBody())},kf=_=>Qr(_).exists(B=>Lr(B.dom)&&$i(B).exists(U=>!va(U.dom))&&sl(B).exists(U=>!va(U.dom))),bn=(_,B)=>{const U=_.dom.getParents(B,"ol,ul",Vl(_,B));return kr(U)},ei=_=>{const B=bn(_,_.selection.getStart()),U=Yn(_.selection.getSelectedBlocks(),xf);return B.toArray().concat(U)},at=_=>{const B=_.selection.getStart();return _.dom.getParents(B,"ol,ul",Vl(_,B))},Ds=_=>{const B=ei(_),U=at(_);return So(U,oe=>kf(uo.fromDom(oe))).fold(()=>Of(_,B),oe=>[oe])},Of=(_,B)=>{const U=Te(B,oe=>bn(_,oe).getOr(oe));return us(U)},qs=_=>/\btox\-/.test(_.className),Dr=(_,B)=>R(_,va,ar).exists(U=>U.nodeName===B&&!qs(U)),Ul=(_,B)=>B!==null&&!_.dom.isEditable(B),eo=_=>{const B=Qa(_);return Ul(_,B)},mi=(_,B)=>{const U=_.dom.getParent(B,"ol,ul,dl");return Ul(_,U)},vr=(_,B)=>{const U=_.selection.getNode();return B({parents:_.dom.getParents(U),element:U}),_.on("NodeChange",B),()=>_.off("NodeChange",B)},Td=(_,B)=>{const oe=document.createDocumentFragment();return ue(_,de=>{oe.appendChild(de.dom)}),uo.fromDom(oe)},ms=(_,B,U)=>_.dispatch("ListMutation",{action:B,element:U}),Gp=(_=>B=>B.replace(_,""))(/^\s+|\s+$/g),qp=_=>_.length>0,io=_=>!qp(_),Kp=_=>_.style!==void 0&&pe(_.style.getPropertyValue),Ou=(_,B,U)=>{if(!$(U))throw console.error("Invalid call to CSS.set. Property ",B,":: Value ",U,":: Element ",_),new Error("CSS value must be a string: "+U);Kp(_)&&_.style.setProperty(B,U)},ac=(_,B,U)=>{const oe=_.dom;Ou(oe,B,U)},Ic=_=>ss(_,"OL,UL"),Af=_=>ss(_,"LI"),Jn=_=>$i(_).exists(Ic),ir=_=>sl(_).exists(Ic),Ba=_=>"listAttributes"in _,Qb=_=>"isComment"in _,fs=_=>"isFragment"in _,zr=_=>_.depth>0,Vr=_=>_.isSelected,ev=_=>{const B=Bi(_),U=ir(_)?B.slice(0,-1):B;return Te(U,Ed)},Yp=(_,B,U)=>Qr(_).filter(Or).map(oe=>({depth:B,dirty:!1,isSelected:U,content:ev(_),itemAttributes:Ja(_),listAttributes:Ja(oe),listType:Xo(oe),isInPreviousLi:!1})),Li=(_,B)=>{Tu(_.item,B.list)},Hg=_=>{for(let B=1;B<_.length;B++)Li(_[B-1],_[B])},ts=(_,B)=>{St(kr(_),yo(B),Li)},Fc=(_,B)=>{const U={list:uo.fromTag(B,_),item:uo.fromTag("li",_)};return Tu(U.list,U.item),U},ya=(_,B,U)=>{const oe=[];for(let de=0;de<U;de++)oe.push(Fc(_,Ba(B)?B.listType:B.parentListType));return oe},cl=(_,B)=>{for(let U=0;U<_.length-1;U++)ac(_[U].item,"list-style-type","none");kr(_).each(U=>{Ba(B)&&(Xa(U.list,B.listAttributes),Xa(U.item,B.itemAttributes)),Zp(U.item,B.content)})},Au=(_,B)=>{Xo(_.list)!==B.listType&&(_.list=po(_.list,B.listType)),Xa(_.list,B.listAttributes)},Bs=(_,B,U)=>{const oe=uo.fromTag("li",_);return Xa(oe,B),Zp(oe,U),oe},Lc=(_,B)=>{Tu(_.list,B),_.item=B},Cm=(_,B,U)=>{const oe=B.slice(0,U.depth);return kr(oe).each(de=>{if(Ba(U)){const tt=Bs(_,U.itemAttributes,U.content);Lc(de,tt),Au(de,U)}else if(fs(U))Zp(de.item,U.content);else{const tt=uo.fromHtml(`<!--${U.content}-->`);Tu(de.list,tt)}}),oe},Df=(_,B,U)=>{const oe=ya(_,U,U.depth-B.length);return Hg(oe),cl(oe,U),ts(B,oe),B.concat(oe)},tv=(_,B)=>{let U=qe.none();const oe=Rt(B,(de,tt,It)=>Qb(tt)?It===0?(U=qe.some(tt),de):Cm(_,de,tt):tt.depth>de.length?Df(_,de,tt):Cm(_,de,tt),[]);return U.each(de=>{const tt=uo.fromHtml(`<!--${de.content}-->`);yo(oe).each(It=>{Wp(It.list,tt)})}),yo(oe).map(de=>de.list)},nv=(_,B)=>{switch(_){case"Indent":B.depth++;break;case"Outdent":B.depth--;break;case"Flatten":B.depth=0}B.dirty=!0},ll=(_,B)=>{Ba(_)&&Ba(B)&&(_.listType=B.listType,_.listAttributes={...B.listAttributes})},zg=_=>{_.listAttributes=br(_.listAttributes,(B,U)=>U!=="start")},ti=(_,B)=>{const U=_[B].depth,oe=tt=>tt.depth===U&&!tt.dirty,de=tt=>tt.depth<U;return R(tn(_.slice(0,B)),oe,de).orThunk(()=>R(_.slice(B+1),oe,de))},Vg=_=>(ue(_,(B,U)=>{ti(_,U).fold(()=>{B.dirty&&Ba(B)&&zg(B)},oe=>ll(B,oe))}),_),ov=_=>{let B=_;return{get:()=>B,set:de=>{B=de}}},Du=(_,B,U,oe)=>{var de;if(js(oe))return[{depth:_+1,content:(de=oe.dom.nodeValue)!==null&&de!==void 0?de:"",dirty:!1,isSelected:!1,isComment:!0}];B.each(pn=>{Zt(pn.start,oe)&&U.set(!0)});const tt=Yp(oe,_,U.get());B.each(pn=>{Zt(pn.end,oe)&&U.set(!1)});const It=sl(oe).filter(Ic).map(pn=>ul(_,B,U,pn)).getOr([]);return tt.toArray().concat(It)},Xp=(_,B,U,oe)=>$i(oe).filter(Ic).fold(()=>Du(_,B,U,oe),de=>{const tt=Rt(Bi(oe),(It,pn,hn)=>{if(hn===0)return It;if(Af(pn))return It.concat(Du(_,B,U,pn));{const sn={isFragment:!0,depth:_,content:[pn],isSelected:!1,dirty:!1,parentListType:Xo(de)};return It.concat(sn)}},[]);return ul(_,B,U,de).concat(tt)}),ul=(_,B,U,oe)=>Ro(Bi(oe),de=>{const tt=Ic(de)?ul:Xp,It=_+1;return tt(It,B,U,de)}),zy=(_,B)=>{const U=ov(!1),oe=0;return Te(_,de=>({sourceList:de,entries:ul(oe,B,U,de)}))},kd=(_,B)=>{const U=Vg(B);return Te(U,oe=>{const de=Qb(oe)?Td([uo.fromHtml(`<!--${oe.content}-->`)]):Td(oe.content);return uo.fromDom(q(_,de.dom))})},Vy=(_,B)=>{const U=Vg(B);return tv(_.contentDocument,U).toArray()},Uy=(_,B)=>Ro(Pn(B,zr),U=>yo(U).exists(zr)?Vy(_,U):kd(_,U)),Wy=(_,B)=>{ue(Yn(_,Vr),U=>nv(B,U))},Rf=_=>{const B=Te(Hr(_),uo.fromDom);return St(So(B,ze(Jn)),So(tn(B),ze(Jn)),(U,oe)=>({start:U,end:oe}))},Zy=(_,B,U)=>{const oe=zy(B,Rf(_));ue(oe,de=>{Wy(de.entries,U);const tt=Uy(_,de.entries);ue(tt,It=>{ms(_,U==="Indent"?"IndentList":"OutdentList",It.dom)}),Mc(de.sourceList,tt),ta(de.sourceList)})},se=(_,B)=>{const U=Lo(Ds(_)),oe=Lo(jp(_));let de=!1;if(U.length||oe.length){const tt=_.selection.getBookmark();Zy(_,U,B),es(_,B,oe),_.selection.moveToBookmark(tt),_.selection.setRng(ds(_.selection.getRng())),_.nodeChanged(),de=!0}return de},Ru=(_,B)=>!eo(_)&&se(_,B),Hi=_=>Ru(_,"Indent"),Sm=_=>Ru(_,"Outdent"),Jp=_=>Ru(_,"Flatten"),jy="\uFEFF",oo=_=>_===jy,wa=(_,B,U)=>rr(_,B,U).isSome(),dl=(_,B)=>wa(_,en(Zt,B));var Wl=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const Mu=na.DOM,ml=_=>{const B={},U=oe=>{let de=_[oe?"startContainer":"endContainer"],tt=_[oe?"startOffset":"endOffset"];if(Qo(de)){const It=Mu.create("span",{"data-mce-type":"bookmark"});de.hasChildNodes()?(tt=Math.min(tt,de.childNodes.length-1),oe?de.insertBefore(It,de.childNodes[tt]):Mu.insertAfter(It,de.childNodes[tt])):de.appendChild(It),de=It,tt=0}B[oe?"startContainer":"endContainer"]=de,B[oe?"startOffset":"endOffset"]=tt};return U(!0),_.collapsed||U(),B},sa=_=>{const B=oe=>{const de=pn=>{var hn;let sn=(hn=pn.parentNode)===null||hn===void 0?void 0:hn.firstChild,hs=0;for(;sn;){if(sn===pn)return hs;(!Qo(sn)||sn.getAttribute("data-mce-type")!=="bookmark")&&hs++,sn=sn.nextSibling}return-1};let tt=_[oe?"startContainer":"endContainer"],It=_[oe?"startOffset":"endOffset"];if(tt){if(Qo(tt)&&tt.parentNode){const pn=tt;It=de(tt),tt=tt.parentNode,Mu.remove(pn),!tt.hasChildNodes()&&Mu.isBlock(tt)&&tt.appendChild(Mu.create("br"))}_[oe?"startContainer":"endContainer"]=tt,_[oe?"startOffset":"endOffset"]=It}};B(!0),B();const U=Mu.createRng();return U.setStart(_.startContainer,_.startOffset),_.endContainer&&U.setEnd(_.endContainer,_.endOffset),ds(U)},Zl=_=>{switch(_){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},sv=(_,B,U)=>{const oe=U["list-style-type"]?U["list-style-type"]:null;_.setStyle(B,"list-style-type",oe)},rv=(_,B)=>{rc.each(B,(U,oe)=>{_.setAttribute(oe,U)})},Hc=(_,B,U)=>{rv(B,U["list-attributes"]),rc.each(_.select("li",B),oe=>{rv(oe,U["list-item-attributes"])})},fl=(_,B,U)=>{sv(_,B,U),Hc(_,B,U)},Qp=(_,B,U)=>{rc.each(U,oe=>_.setStyle(B,oe,""))},Ca=(_,B)=>me(B)&&!Bc(B,_.schema.getBlockElements()),cr=(_,B,U,oe)=>{let de=B[U?"startContainer":"endContainer"];const tt=B[U?"startOffset":"endOffset"];Qo(de)&&(de=de.childNodes[Math.min(tt,de.childNodes.length-1)]||de),!U&&Nc(de.nextSibling)&&(de=de.nextSibling);const It=hn=>{for(;!_.dom.isBlock(hn)&&hn.parentNode&&oe!==hn;)hn=hn.parentNode;return hn},pn=(hn,sn)=>{var hs;const Rr=new Cf(hn,It(hn)),zi=sn?"next":"prev";let jl;for(;jl=Rr[zi]();)if(!(Fi(_,jl)||oo(jl.textContent)||((hs=jl.textContent)===null||hs===void 0?void 0:hs.length)===0))return qe.some(jl);return qe.none()};if(U&&Gs(de))if(oo(de.textContent))de=pn(de,!1).getOr(de);else for(de.parentNode!==null&&Ca(_,de.parentNode)&&(de=de.parentNode);de.previousSibling!==null&&(Ca(_,de.previousSibling)||Gs(de.previousSibling));)de=de.previousSibling;if(!U&&Gs(de))if(oo(de.textContent))de=pn(de,!0).getOr(de);else for(de.parentNode!==null&&Ca(_,de.parentNode)&&(de=de.parentNode);de.nextSibling!==null&&(Ca(_,de.nextSibling)||Gs(de.nextSibling));)de=de.nextSibling;for(;de.parentNode!==oe;){const hn=de.parentNode;if(oa(_,de)||/^(TD|TH)$/.test(hn.nodeName))return de;de=hn}return de},Od=(_,B,U)=>{const oe=[],de=_.dom,tt=cr(_,B,!0,U),It=cr(_,B,!1,U);let pn;const hn=[];for(let sn=tt;sn&&(hn.push(sn),sn!==It);sn=sn.nextSibling);return rc.each(hn,sn=>{var hs;if(oa(_,sn)){oe.push(sn),pn=null;return}if(de.isBlock(sn)||Nc(sn)){Nc(sn)&&de.remove(sn),pn=null;return}const Rr=sn.nextSibling;if(Wl.isBookmarkNode(sn)&&(va(Rr)||oa(_,Rr)||!Rr&&sn.parentNode===U)){pn=null;return}pn||(pn=de.create("p"),(hs=sn.parentNode)===null||hs===void 0||hs.insertBefore(pn,sn),oe.push(pn)),pn.appendChild(sn)}),oe},Mf=(_,B,U)=>{const oe=_.getStyle(B,"list-style-type");let de=U?U["list-style-type"]:"";return de=de===null?"":de,oe===de},zc=(_,B)=>{const U=_.selection.getStart(!0),oe=cr(_,B,!0,_.getBody());return dl(uo.fromDom(oe),uo.fromDom(B.commonAncestorContainer))?B.commonAncestorContainer:U},$a=(_,B,U)=>{const oe=_.selection.getRng();let de="LI";const tt=Vl(_,zc(_,oe)),It=_.dom;if(It.getContentEditable(_.selection.getNode())==="false")return;B=B.toUpperCase(),B==="DL"&&(de="DT");const pn=ml(oe),hn=Yn(Od(_,oe,tt),_.dom.isEditable);rc.each(hn,sn=>{let hs;const Rr=sn.previousSibling,zi=sn.parentNode;Lr(zi)||(Rr&&va(Rr)&&Rr.nodeName===B&&Mf(It,Rr,U)?(hs=Rr,sn=It.rename(sn,de),Rr.appendChild(sn)):(hs=It.create(B),zi.insertBefore(hs,sn),hs.appendChild(sn),sn=It.rename(sn,de)),Qp(It,sn,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),fl(It,hs,U),xm(_.dom,hs))}),_.selection.setRng(sa(pn))},av=(_,B)=>va(_)&&_.nodeName===(B==null?void 0:B.nodeName),Gy=(_,B,U)=>{const oe=_.getStyle(B,"list-style-type",!0),de=_.getStyle(U,"list-style-type",!0);return oe===de},Ug=(_,B)=>_.className===B.className,Wg=(_,B,U)=>av(B,U)&&Gy(_,B,U)&&Ug(B,U),xm=(_,B)=>{let U,oe=B.nextSibling;if(Wg(_,B,oe)){const de=oe;for(;U=de.firstChild;)B.appendChild(U);_.remove(de)}if(oe=B.previousSibling,Wg(_,B,oe)){const de=oe;for(;U=de.lastChild;)B.insertBefore(U,B.firstChild);_.remove(de)}},gl=(_,B,U,oe)=>{if(B.nodeName!==U){const de=_.dom.rename(B,U);fl(_.dom,de,oe),ms(_,Zl(U),de)}else fl(_.dom,B,oe),ms(_,Zl(U),B)},iv=(_,B,U,oe)=>{if(B.classList.forEach((de,tt,It)=>{de.startsWith("tox-")&&(It.remove(de),It.length===0&&B.removeAttribute("class"))}),B.nodeName!==U){const de=_.dom.rename(B,U);fl(_.dom,de,oe),ms(_,Zl(U),de)}else fl(_.dom,B,oe),ms(_,Zl(U),B)},A2=(_,B,U,oe,de)=>{const tt=va(B);if(tt&&B.nodeName===oe&&!qy(de)&&!qs(B))Jp(_);else{$a(_,oe,de);const It=ml(_.selection.getRng()),pn=tt?[B,...U]:U,hn=tt&&qs(B)?iv:gl;rc.each(pn,sn=>{hn(_,sn,oe,de)}),_.selection.setRng(sa(It))}},qy=_=>"list-style-type"in _,Ky=(_,B,U,oe)=>{if(B!==_.getBody())if(B)if(B.nodeName===U&&!qy(oe)&&!qs(B))Jp(_);else{const de=ml(_.selection.getRng());qs(B)&&B.classList.forEach((It,pn,hn)=>{It.startsWith("tox-")&&(hn.remove(It),hn.length===0&&B.removeAttribute("class"))}),fl(_.dom,B,oe);const tt=_.dom.rename(B,U);xm(_.dom,tt),_.selection.setRng(sa(de)),$a(_,U,oe),ms(_,Zl(U),tt)}else $a(_,U,oe),ms(_,Zl(U),B)},Ad=(_,B,U)=>{const oe=Qa(_);if(mi(_,oe))return;const de=_f(_),tt=P(U)?U:{};de.length>0?A2(_,oe,de,B,tt):Ky(_,oe,B,tt)},e1=na.DOM,Em=(_,B)=>{const U=B.parentElement;if(U&&U.nodeName==="LI"&&U.firstChild===B){const oe=U.previousSibling;oe&&oe.nodeName==="LI"?(oe.appendChild(B),$c(_,U)&&e1.remove(U)):e1.setStyle(U,"listStyleType","none")}if(va(U)){const oe=U.previousSibling;oe&&oe.nodeName==="LI"&&oe.appendChild(B)}},gs=(_,B)=>{const U=rc.grep(_.select("ol,ul",B));rc.each(U,oe=>{Em(_,oe)})},ws=(_,B,U,oe)=>{let de=B.startContainer;const tt=B.startOffset;if(Gs(de)&&(U?tt<de.data.length:tt>0))return de;const It=_.schema.getNonEmptyElements();Qo(de)&&(de=Ll.getNode(de,tt));const pn=new Cf(de,oe);U&&$g(_.dom,de)&&pn.next();const hn=U?pn.next.bind(pn):pn.prev2.bind(pn);for(;de=hn();)if(de.nodeName==="LI"&&!de.hasChildNodes()||It[de.nodeName]||Gs(de)&&de.data.length>0)return de;return null},fi=(_,B)=>{const U=B.childNodes;return U.length===1&&!va(U[0])&&_.isBlock(U[0])},t1=_=>qe.from(_).map(uo.fromDom).filter(Pi).exists(B=>Na(B)&&!Dt(["details"],Xo(B))),Yy=(_,B)=>{fi(_,B)&&t1(B.firstChild)&&_.remove(B.firstChild,!0)},Ur=(_,B,U)=>{let oe;const de=fi(_,U)?U.firstChild:U;if(Yy(_,B),!$c(_,B,!0))for(;oe=B.firstChild;)de.appendChild(oe)},Nu=(_,B,U)=>{let oe;const de=B.parentNode;if(!Ig(_,B)||!Ig(_,U))return;va(U.lastChild)&&(oe=U.lastChild),de===U.lastChild&&Nc(de.previousSibling)&&_.remove(de.previousSibling);const tt=U.lastChild;tt&&Nc(tt)&&B.hasChildNodes()&&_.remove(tt),$c(_,U,!0)&&we(uo.fromDom(U)),Ur(_,B,U),oe&&U.appendChild(oe);const pn=$l(uo.fromDom(U),uo.fromDom(B))?_.getParents(B,va,U):[];_.remove(B),ue(pn,hn=>{$c(_,hn)&&hn!==_.getRoot()&&_.remove(hn)})},gi=(_,B,U)=>{we(uo.fromDom(U)),Nu(_.dom,B,U),_.selection.setCursorLocation(U,0)},hl=(_,B,U,oe)=>{const de=_.dom;if(de.isEmpty(oe))gi(_,U,oe);else{const tt=ml(B);Nu(de,U,oe),_.selection.setRng(sa(tt))}},cv=(_,B,U,oe)=>{const de=ml(B);Nu(_.dom,U,oe);const tt=sa(de);_.selection.setRng(tt)},xn=(_,B)=>{const U=_.dom,oe=_.selection,de=oe.getStart(),tt=ys(_,de),It=U.getParent(oe.getStart(),"LI",tt);if(It){const pn=It.parentElement;if(pn===_.getBody()&&$c(U,pn))return!0;const hn=ds(oe.getRng()),sn=U.getParent(ws(_,hn,B,tt),"LI",tt),hs=sn&&(B?U.isChildOf(It,sn):U.isChildOf(sn,It));if(sn&&sn!==It&&!hs)return _.undoManager.transact(()=>{B?hl(_,hn,sn,It):Pc(It)?Sm(_):cv(_,hn,It,sn)}),!0;if(hs&&!B&&sn!==It)return _.undoManager.transact(()=>{if(hn.commonAncestorContainer.parentElement){const Rr=ml(hn),zi=hn.commonAncestorContainer.parentElement;Ur(U,hn.commonAncestorContainer.parentElement,sn),zi.remove();const jl=sa(Rr);_.selection.setRng(jl)}}),!0;if(!sn&&!B&&hn.startOffset===0&&hn.endOffset===0)return _.undoManager.transact(()=>{Jp(_)}),!0}return!1},ni=(_,B,U)=>{const oe=_.getParent(B.parentNode,_.isBlock,U);_.remove(B),oe&&_.isEmpty(oe)&&_.remove(oe)},Pu=(_,B)=>{const U=_.dom,oe=_.selection.getStart(),de=ys(_,oe),tt=U.getParent(oe,U.isBlock,de);if(tt&&U.isEmpty(tt)){const It=ds(_.selection.getRng()),pn=U.getParent(ws(_,It,B,de),"LI",de);if(pn){const hn=zi=>Dt(["td","th","caption"],Xo(zi)),sn=zi=>zi.dom===de,hs=ks(uo.fromDom(pn),hn,sn),Rr=ks(uo.fromDom(It.startContainer),hn,sn);return Ke(hs,Rr,Zt)?(_.undoManager.transact(()=>{const zi=pn.parentNode;ni(U,tt,de),xm(U,zi),_.selection.select(pn,!0),_.selection.collapse(B)}),!0):!1}}return!1},Tm=(_,B)=>xn(_,B)||Pu(_,B),n1=_=>{const B=_.selection.getStart(),U=ys(_,B);return _.dom.getParent(B,"LI,DT,DD",U)||Hr(_).length>0},lv=_=>n1(_)?(_.undoManager.transact(()=>{_.execCommand("Delete"),gs(_.dom,_.getBody())}),!0):!1,Sa=(_,B)=>{const U=_.selection;return!mi(_,U.getNode())&&(U.isCollapsed()?Tm(_,B):lv(_))},Qs=_=>{_.on("ExecCommand",B=>{const U=B.command.toLowerCase();(U==="delete"||U==="forwarddelete")&&n1(_)&&gs(_.dom,_.getBody())}),_.on("keydown",B=>{B.keyCode===Sd.BACKSPACE?Sa(_,!1)&&B.preventDefault():B.keyCode===Sd.DELETE&&Sa(_,!0)&&B.preventDefault()})},hi=_=>({backspaceDelete:B=>{Sa(_,B)}}),er=(_,B)=>{const U=Qa(_);U===null||mi(_,U)||_.undoManager.transact(()=>{P(B.styles)&&_.dom.setStyles(U,B.styles),P(B.attrs)&&Sf(B.attrs,(oe,de)=>_.dom.setAttrib(U,de,oe))})},Zg=_=>{const B=tn(Gp(_).split("")),U=Te(B,(oe,de)=>{const tt=oe.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,de)*tt});return Rt(U,(oe,de)=>oe+de,0)},_m=_=>{if(_--,_<0)return"";{const B=_%26,U=Math.floor(_/26),oe=_m(U),de=String.fromCharCode(65+B);return oe+de}},Fs=_=>/^[A-Z]+$/.test(_),lr=_=>/^[a-z]+$/.test(_),Vc=_=>/^[0-9]+$/.test(_),Nf=_=>Vc(_)?2:Fs(_)?0:lr(_)?1:io(_)?3:4,Ks=_=>{switch(Nf(_)){case 2:return qe.some({listStyleType:qe.none(),start:_});case 0:return qe.some({listStyleType:qe.some("upper-alpha"),start:Zg(_).toString()});case 1:return qe.some({listStyleType:qe.some("lower-alpha"),start:Zg(_).toString()});case 3:return qe.some({listStyleType:qe.none(),start:""});case 4:return qe.none()}},o1=_=>{const B=parseInt(_.start,10);return Fr(_.listStyleType,"upper-alpha")?_m(B):Fr(_.listStyleType,"lower-alpha")?_m(B).toLowerCase():_.start},uv=_=>{const B=Qa(_);!wo(B)||mi(_,B)||_.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:o1({start:_.dom.getAttrib(B,"start","1"),listStyleType:qe.from(_.dom.getStyle(B,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:U=>{const oe=U.getData();Ks(oe.start).each(de=>{_.execCommand("mceListUpdate",!1,{attrs:{start:de.start==="1"?"":de.start},styles:{"list-style-type":de.listStyleType.getOr("")}})}),U.close()}})},Eo=(_,B)=>()=>{const U=Qa(_);return me(U)&&U.nodeName===B},Dd=_=>{_.addCommand("mceListProps",()=>{uv(_)})},fo=_=>{_.on("BeforeExecCommand",B=>{const U=B.command.toLowerCase();U==="indent"?Hi(_):U==="outdent"&&Sm(_)}),_.addCommand("InsertUnorderedList",(B,U)=>{Ad(_,"UL",U)}),_.addCommand("InsertOrderedList",(B,U)=>{Ad(_,"OL",U)}),_.addCommand("InsertDefinitionList",(B,U)=>{Ad(_,"DL",U)}),_.addCommand("RemoveList",()=>{Jp(_)}),Dd(_),_.addCommand("mceListUpdate",(B,U)=>{P(U)&&er(_,U)}),_.addQueryStateHandler("InsertUnorderedList",Eo(_,"UL")),_.addQueryStateHandler("InsertOrderedList",Eo(_,"OL")),_.addQueryStateHandler("InsertDefinitionList",Eo(_,"DL"))};var Uc=tinymce.util.Tools.resolve("tinymce.html.Node");const jg=_=>_.type===3,Pf=_=>_.length===0,Nn=_=>{const B=(de,tt)=>{const It=Uc.create("li");ue(de,pn=>It.append(pn)),tt?_.insert(It,tt,!0):_.append(It)},U=(de,tt)=>jg(tt)?[...de,tt]:!Pf(de)&&!jg(tt)?(B(de,tt),[]):de,oe=Rt(_.children(),U,[]);Pf(oe)||B(oe)},km=_=>{_.on("PreInit",()=>{const{parser:B}=_;B.addNodeFilter("ul,ol",U=>ue(U,Nn))})},dv=_=>{_.on("keydown",B=>{B.keyCode!==Sd.TAB||Sd.metaKeyPressed(B)||_.undoManager.transact(()=>{(B.shiftKey?Sm(_):Hi(_))&&B.preventDefault()})})},s1=_=>{Ef(_)&&dv(_),Qs(_)},Xy=(_,B)=>U=>{const oe=de=>{U.setActive(Dr(de.parents,B)),U.setEnabled(!mi(_,de.element)&&_.selection.isEditable())};return U.setEnabled(_.selection.isEditable()),vr(_,oe)},Jy=_=>{const B=U=>()=>_.execCommand(U);_.hasPlugin("advlist")||(_.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:B("InsertOrderedList"),onSetup:Xy(_,"OL")}),_.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:B("InsertUnorderedList"),onSetup:Xy(_,"UL")}))},mv=(_,B)=>U=>vr(_,de=>U.setEnabled(Dr(de.parents,B)&&!mi(_,de.element))),Gg=_=>{const B={text:"List properties...",icon:"ordered-list",onAction:()=>_.execCommand("mceListProps"),onSetup:mv(_,"OL")};_.ui.registry.addMenuItem("listprops",B),_.ui.registry.addContextMenu("lists",{update:U=>{const oe=Qa(_,U);return wo(oe)?["listprops"]:[]}})};var r1=()=>{w.add("lists",_=>(zl(_),km(_),_.hasPlugin("rtc",!0)?Dd(_):(s1(_),fo(_)),Jy(_),Gg(_),hi(_)))};r1()})();(function(){const w=ee=>{let qe=ee;return{get:()=>qe,set:ae=>{qe=ae}}};var f=tinymce.util.Tools.resolve("tinymce.PluginManager");const p=ee=>()=>ee;var C=tinymce.util.Tools.resolve("tinymce.Env");const O=ee=>ee.dispatch("ResizeEditor"),$=ee=>qe=>qe.options.get(ee),P=ee=>{const qe=ee.options.register;qe("autoresize_overflow_padding",{processor:"number",default:1}),qe("autoresize_bottom_margin",{processor:"number",default:50})},W=$("min_height"),J=$("max_height"),re=$("autoresize_overflow_padding"),me=$("autoresize_bottom_margin"),pe=ee=>ee.plugins.fullscreen&&ee.plugins.fullscreen.isFullscreen(),Oe=(ee,qe)=>{const Sn=ee.getBody();Sn&&(Sn.style.overflowY=qe?"":"hidden",qe||(Sn.scrollTop=0))},je=(ee,qe,Sn,At)=>{var ae;const yt=parseInt((ae=ee.getStyle(qe,Sn,At))!==null&&ae!==void 0?ae:"",10);return isNaN(yt)?0:yt},De=ee=>{if((ee==null?void 0:ee.type.toLowerCase())==="setcontent"){const qe=ee;return qe.selection===!0||qe.paste===!0}else return!1},Je=(ee,qe,Sn,At)=>{var ae;const yt=ee.dom,Dt=ee.getDoc();if(!Dt)return;if(pe(ee)){Oe(ee,!0);return}const Ht=Dt.documentElement,Te=At?At():re(ee),ue=(ae=W(ee))!==null&&ae!==void 0?ae:ee.getElement().offsetHeight;let Yn=ue;const Pn=je(yt,Ht,"margin-top",!0),Rt=je(yt,Ht,"margin-bottom",!0);let R=Ht.offsetHeight+Pn+Rt+Te;R<0&&(R=0);const So=ee.getContainer().offsetHeight,gt=ee.getContentAreaContainer().offsetHeight,Ro=So-gt;R+Ro>ue&&(Yn=R+Ro);const tn=J(ee);if(tn&&Yn>tn?(Yn=tn,Oe(ee,!0)):Oe(ee,!1),Yn!==qe.get()){const Ge=Yn-qe.get();if(yt.setStyle(ee.getContainer(),"height",Yn+"px"),qe.set(Yn),O(ee),C.browser.isSafari()&&(C.os.isMacOS()||C.os.isiOS())){const yo=ee.getWin();yo.scrollTo(yo.pageXOffset,yo.pageYOffset)}ee.hasFocus()&&De(Sn)&&ee.selection.scrollIntoView(),(C.browser.isSafari()||C.browser.isChromium())&&Ge<0&&Je(ee,qe,Sn,At)}},Ye=(ee,qe)=>{let Sn=()=>me(ee),At,ae;ee.on("init",yt=>{At=0;const Dt=re(ee),Ht=ee.dom;Ht.setStyles(ee.getDoc().documentElement,{height:"auto"}),C.browser.isEdge()||C.browser.isIE()?Ht.setStyles(ee.getBody(),{paddingLeft:Dt,paddingRight:Dt,"min-height":0}):Ht.setStyles(ee.getBody(),{paddingLeft:Dt,paddingRight:Dt}),Je(ee,qe,yt,Sn),At+=1}),ee.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",yt=>{if(At===1)ae=ee.getContainer().offsetHeight,Je(ee,qe,yt,Sn),At+=1;else if(At===2){const Dt=ae<ee.getContainer().offsetHeight;if(Dt){const Ht=ee.dom,Te=ee.getDoc();Ht.setStyles(Te.documentElement,{"min-height":0}),Ht.setStyles(ee.getBody(),{"min-height":"inherit"})}Sn=Dt?p(0):Sn,At+=1}else Je(ee,qe,yt,Sn)})},en=(ee,qe)=>{ee.addCommand("mceAutoResize",()=>{Je(ee,qe)})};var ze=()=>{f.add("autoresize",ee=>{if(P(ee),ee.options.isSet("resize")||ee.options.set("resize",!1),!ee.inline){const qe=w(0);en(ee,qe),Ye(ee,qe)}})};ze()})();(function(){var w=tinymce.util.Tools.resolve("tinymce.ModelManager");const f=(l,m,b)=>{var S;return b(l,m.prototype)?!0:((S=l.constructor)===null||S===void 0?void 0:S.name)===m.name},p=l=>{const m=typeof l;return l===null?"null":m==="object"&&Array.isArray(l)?"array":m==="object"&&f(l,String,(b,S)=>S.isPrototypeOf(b))?"string":m},C=l=>m=>p(m)===l,O=l=>m=>typeof m===l,$=l=>m=>l===m,P=C("string"),W=C("object"),J=C("array"),re=$(null),me=O("boolean"),pe=$(void 0),Oe=l=>l==null,je=l=>!Oe(l),De=O("function"),Je=O("number"),Ye=()=>{},en=(l,m)=>(...b)=>l(m.apply(null,b)),ze=(l,m)=>b=>l(m(b)),ee=l=>()=>l,qe=l=>l,Sn=(l,m)=>l===m;function At(l,...m){return(...b)=>{const S=m.concat(b);return l.apply(null,S)}}const ae=l=>m=>!l(m),yt=l=>()=>{throw new Error(l)},Dt=l=>l(),Ht=ee(!1),Te=ee(!0);class ue{constructor(m,b){this.tag=m,this.value=b}static some(m){return new ue(!0,m)}static none(){return ue.singletonNone}fold(m,b){return this.tag?b(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?ue.some(m(this.value)):ue.none()}bind(m){return this.tag?m(this.value):ue.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:ue.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return je(m)?ue.some(m):ue.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ue.singletonNone=new ue(!1);const Yn=Array.prototype.slice,Pn=Array.prototype.indexOf,Rt=Array.prototype.push,R=(l,m)=>Pn.call(l,m),So=(l,m)=>R(l,m)>-1,gt=(l,m)=>{for(let b=0,S=l.length;b<S;b++){const k=l[b];if(m(k,b))return!0}return!1},Ro=(l,m)=>{const b=[];for(let S=0;S<l;S++)b.push(m(S));return b},tn=(l,m)=>{const b=l.length,S=new Array(b);for(let k=0;k<b;k++){const M=l[k];S[k]=m(M,k)}return S},Ge=(l,m)=>{for(let b=0,S=l.length;b<S;b++){const k=l[b];m(k,b)}},yo=(l,m)=>{for(let b=l.length-1;b>=0;b--){const S=l[b];m(S,b)}},kr=(l,m)=>{const b=[],S=[];for(let k=0,M=l.length;k<M;k++){const H=l[k];(m(H,k)?b:S).push(H)}return{pass:b,fail:S}},us=(l,m)=>{const b=[];for(let S=0,k=l.length;S<k;S++){const M=l[S];m(M,S)&&b.push(M)}return b},Fr=(l,m,b)=>(yo(l,(S,k)=>{b=m(b,S,k)}),b),Ke=(l,m,b)=>(Ge(l,(S,k)=>{b=m(b,S,k)}),b),St=(l,m,b)=>{for(let S=0,k=l.length;S<k;S++){const M=l[S];if(m(M,S))return ue.some(M);if(b(M,S))break}return ue.none()},Z=(l,m)=>St(l,m,Ht),Dc=(l,m)=>{for(let b=0,S=l.length;b<S;b++){const k=l[b];if(m(k,b))return ue.some(b)}return ue.none()},ko=l=>{const m=[];for(let b=0,S=l.length;b<S;++b){if(!J(l[b]))throw new Error("Arr.flatten item "+b+" was not an array, input: "+l);Rt.apply(m,l[b])}return m},Ns=(l,m)=>ko(tn(l,m)),Io=(l,m)=>{for(let b=0,S=l.length;b<S;++b){const k=l[b];if(m(k,b)!==!0)return!1}return!0},Pg=l=>{const m=Yn.call(l,0);return m.reverse(),m},fn=(l,m)=>{const b={};for(let S=0,k=l.length;S<k;S++){const M=l[S];b[String(M)]=m(M,S)}return b},Yo=(l,m)=>{const b=Yn.call(l,0);return b.sort(m),b},Wt=(l,m)=>m>=0&&m<l.length?ue.some(l[m]):ue.none(),Ie=l=>Wt(l,0),uo=l=>Wt(l,l.length-1),sr=(l,m)=>{for(let b=0;b<l.length;b++){const S=m(l[b],b);if(S.isSome())return S}return ue.none()},Zt=Object.keys,$l=Object.hasOwnProperty,ss=(l,m)=>{const b=Zt(l);for(let S=0,k=b.length;S<k;S++){const M=b[S],H=l[M];m(H,M)}},Eu=(l,m)=>_s(l,(b,S)=>({k:S,v:m(b,S)})),_s=(l,m)=>{const b={};return ss(l,(S,k)=>{const M=m(S,k);b[M.k]=M.v}),b},Jr=l=>(m,b)=>{l[b]=m},pm=(l,m,b,S)=>{ss(l,(k,M)=>{(m(k,M)?b:S)(k,M)})},Ka=(l,m)=>{const b={};return pm(l,m,Jr(b),Ye),b},Js=(l,m)=>{const b=[];return ss(l,(S,k)=>{b.push(m(S,k))}),b},ns=l=>Js(l,qe),wd=(l,m)=>Xo(l,m)?ue.from(l[m]):ue.none(),Xo=(l,m)=>$l.call(l,m),Jo=(l,m)=>Xo(l,m)&&l[m]!==void 0&&l[m]!==null,ol=l=>{for(const m in l)if($l.call(l,m))return!1;return!0},js=typeof window<"u"?window:Function("return this;")(),Pi=(l,m)=>{let b=m??js;for(let S=0;S<l.length&&b!==void 0&&b!==null;++S)b=b[l[S]];return b},Or=(l,m)=>{const b=l.split(".");return Pi(b,m)},Rc=(l,m)=>Or(l,m),Cd=(l,m)=>{const b=Rc(l,m);if(b==null)throw new Error(l+" not available on this browser");return b},Ar=Object.getPrototypeOf,bm=l=>Cd("HTMLElement",l),vt=l=>{const m=Or("ownerDocument.defaultView",l);return W(l)&&(bm(m).prototype.isPrototypeOf(l)||/^HTML\w*Element$/.test(Ar(l).constructor.name))},no=8,Qr=9,Ma=11,vm=1,Bi=3,Uo=l=>l.dom.nodeName.toLowerCase(),$i=l=>l.dom.nodeType,sl=l=>m=>$i(m)===l,Fo=l=>$i(l)===no||Uo(l)==="#comment",an=l=>ba(l)&&vt(l.dom),ba=sl(vm),rl=sl(Bi),Il=sl(Qr),ym=sl(Ma),ea=l=>m=>ba(m)&&Uo(m)===l,rr=(l,m,b)=>{if(P(b)||me(b)||Je(b))l.setAttribute(m,b+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",b,":: Element ",l),new Error("Attribute value was not simple")},ks=(l,m,b)=>{rr(l.dom,m,b)},Ii=(l,m)=>{const b=l.dom;ss(m,(S,k)=>{rr(b,k,S)})},wm=(l,m)=>{ss(m,(b,S)=>{b.fold(()=>{vs(l,S)},k=>{rr(l.dom,S,k)})})},al=(l,m)=>{const b=l.dom.getAttribute(m);return b===null?void 0:b},Na=(l,m)=>ue.from(al(l,m)),vs=(l,m)=>{l.dom.removeAttribute(m)},Ya=l=>Ke(l.dom.attributes,(m,b)=>(m[b.name]=b.value,m),{}),Fl=(l,m)=>{const S=(m||document).createElement("div");if(S.innerHTML=l,!S.hasChildNodes()||S.childNodes.length>1){const k="HTML does not have a single root node";throw console.error(k,l),new Error(k)}return Mc(S.childNodes[0])},Wp=(l,m)=>{const S=(m||document).createElement(l);return Mc(S)},Tu=(l,m)=>{const S=(m||document).createTextNode(l);return Mc(S)},Mc=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},we={fromHtml:Fl,fromTag:Wp,fromText:Tu,fromDom:Mc,fromPoint:(l,m,b)=>ue.from(l.dom.elementFromPoint(m,b)).map(Mc)},ta=(l,m)=>{const b=l.dom;if(b.nodeType!==vm)return!1;{const S=b;if(S.matches!==void 0)return S.matches(m);if(S.msMatchesSelector!==void 0)return S.msMatchesSelector(m);if(S.webkitMatchesSelector!==void 0)return S.webkitMatchesSelector(m);if(S.mozMatchesSelector!==void 0)return S.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},Ll=l=>l.nodeType!==vm&&l.nodeType!==Qr&&l.nodeType!==Ma||l.childElementCount===0,Cf=(l,m)=>{const b=m===void 0?document:m.dom;return Ll(b)?[]:tn(b.querySelectorAll(l),we.fromDom)},Sd=(l,m)=>{const b=m===void 0?document:m.dom;return Ll(b)?ue.none():ue.from(b.querySelector(l)).map(we.fromDom)},Lo=(l,m)=>l.dom===m.dom,Bg=(l,m)=>{const b=l.dom,S=m.dom;return b===S?!1:b.contains(S)},Sf=ta,_u=l=>we.fromDom(l.dom.ownerDocument),xd=l=>Il(l)?l:_u(l),br=l=>we.fromDom(xd(l).dom.documentElement),Ps=l=>we.fromDom(xd(l).dom.defaultView),Xa=l=>ue.from(l.dom.parentNode).map(we.fromDom),Ja=l=>ue.from(l.dom.parentElement).map(we.fromDom),Hl=(l,m)=>{const b=De(m)?m:Ht;let S=l.dom;const k=[];for(;S.parentNode!==null&&S.parentNode!==void 0;){const M=S.parentNode,H=we.fromDom(M);if(k.push(H),b(H)===!0)break;S=M}return k},Ed=l=>ue.from(l.dom.previousSibling).map(we.fromDom),ku=l=>ue.from(l.dom.nextSibling).map(we.fromDom),po=l=>tn(l.dom.childNodes,we.fromDom),na=(l,m)=>{const b=l.dom.childNodes;return ue.from(b[m]).map(we.fromDom)},rc=l=>na(l,0),il=(l,m)=>{Xa(l).each(S=>{S.dom.insertBefore(m.dom,l.dom)})},ui=(l,m)=>{ku(l).fold(()=>{Xa(l).each(k=>{Qo(k,m)})},S=>{il(S,m)})},Gs=(l,m)=>{rc(l).fold(()=>{Qo(l,m)},S=>{l.dom.insertBefore(m.dom,S.dom)})},Qo=(l,m)=>{l.dom.appendChild(m.dom)},va=(l,m,b)=>{na(l,b).fold(()=>{Qo(l,m)},S=>{il(S,m)})},xf=(l,m)=>{il(l,m),Qo(m,l)},wo=(l,m)=>{Ge(m,(b,S)=>{const k=S===0?l:m[S-1];ui(k,b)})},Lr=(l,m)=>{Ge(m,b=>{Qo(l,b)})},Pa=l=>{l.dom.textContent="",Ge(po(l),m=>{ar(m)})},ar=l=>{const m=l.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},Nc=l=>{const m=po(l);m.length>0&&wo(l,m),ar(l)},Pc=(l,m)=>we.fromDom(l.dom.cloneNode(m)),oa=l=>Pc(l,!1),Bc=l=>Pc(l,!0),Fi=(l,m)=>{const b=we.fromTag(m),S=Ya(l);return Ii(b,S),b},$g=(l,m)=>{const b=Fi(l,m),S=po(Bc(l));return Lr(b,S),b},$c=(l,m)=>{const b=Fi(l,m);ui(l,b);const S=po(l);return Lr(b,S),ar(l),b},Ig=["tfoot","thead","tbody","colgroup"],di=l=>So(Ig,l),zl=(l,m)=>({rows:l,columns:m}),Ef=(l,m)=>({row:l,column:m}),Tf=(l,m,b)=>({element:l,rowspan:m,colspan:b}),Fg=(l,m,b,S)=>({element:l,rowspan:m,colspan:b,isNew:S}),q=(l,m,b,S,k,M)=>({element:l,rowspan:m,colspan:b,row:S,column:k,isLocked:M}),le=(l,m,b)=>({element:l,cells:m,section:b}),ye=(l,m,b,S)=>({element:l,cells:m,section:b,isNew:S}),Be=(l,m,b)=>({element:l,isNew:m,isLocked:b}),ot=(l,m,b,S)=>({element:l,cells:m,section:b,isNew:S}),rn=(l,m,b,S)=>({startRow:l,startCol:m,finishRow:b,finishCol:S}),Oo=(l,m,b)=>({element:l,colspan:m,column:b}),es=(l,m)=>({element:l,columns:m}),xo=l=>ym(l)&&je(l.dom.host),ds=De(Element.prototype.attachShadow)&&De(Node.prototype.getRootNode),Xn=ee(ds),Os=ds?l=>we.fromDom(l.dom.getRootNode()):xd,Qa=l=>{const m=Os(l);return xo(m)?ue.some(m):ue.none()},Lg=l=>we.fromDom(l.dom.host),xt=l=>{if(Xn()&&je(l.target)){const m=we.fromDom(l.target);if(ba(m)&&_f(m)&&l.composed&&l.composedPath){const b=l.composedPath();if(b)return Ie(b)}}return ue.from(l.target)},_f=l=>je(l.dom.shadowRoot),As=l=>{const m=rl(l)?l.dom.parentNode:l.dom;if(m==null||m.ownerDocument===null)return!1;const b=m.ownerDocument;return Qa(we.fromDom(m)).fold(()=>b.body.contains(m),ze(As,Lg))},Hr=()=>jp(we.fromDom(document)),jp=l=>{const m=l.dom.body;if(m==null)throw new Error("Body is not available yet");return we.fromDom(m)},ys=(l,m,b)=>us(Hl(l,b),m),Hy=(l,m)=>us(po(l),m),Vl=(l,m)=>{let b=[];return Ge(po(l),S=>{m(S)&&(b=b.concat([S])),b=b.concat(Vl(S,m))}),b},kf=(l,m,b)=>ys(l,S=>ta(S,m),b),bn=(l,m)=>Hy(l,b=>ta(b,m)),ei=(l,m)=>Cf(m,l);var at=(l,m,b,S,k)=>l(b,S)?ue.some(b):De(k)&&k(b)?ue.none():m(b,S,k);const Ds=(l,m,b)=>{let S=l.dom;const k=De(b)?b:Ht;for(;S.parentNode;){S=S.parentNode;const M=we.fromDom(S);if(m(M))return ue.some(M);if(k(M))break}return ue.none()},Of=(l,m,b)=>at((k,M)=>M(k),Ds,l,m,b),qs=(l,m)=>{const b=k=>m(we.fromDom(k));return Z(l.dom.childNodes,b).map(we.fromDom)},Dr=(l,m)=>{const b=S=>{for(let k=0;k<S.childNodes.length;k++){const M=we.fromDom(S.childNodes[k]);if(m(M))return ue.some(M);const H=b(S.childNodes[k]);if(H.isSome())return H}return ue.none()};return b(l.dom)},Ul=(l,m,b)=>Ds(l,S=>ta(S,m),b),eo=(l,m)=>qs(l,b=>ta(b,m)),mi=(l,m)=>Sd(m,l),vr=(l,m,b)=>at((k,M)=>ta(k,M),Ul,l,m,b),Td=(l,m,b=Sn)=>l.exists(S=>b(S,m)),ms=l=>{const m=[],b=S=>{m.push(S)};for(let S=0;S<l.length;S++)l[S].each(b);return m},_d=(l,m)=>l!=null?m(l):ue.none(),Gp=(l,m)=>l?ue.some(m):ue.none(),qp=(l,m,b)=>m===""||l.length>=m.length&&l.substr(b,b+m.length)===m,io=(l,m,b=0,S)=>{const k=l.indexOf(m,b);return k!==-1?pe(S)?!0:k+m.length<=S:!1},Kp=(l,m)=>qp(l,m,0),Ou=(l,m)=>qp(l,m,l.length-m.length),Ic=(l=>m=>m.replace(l,""))(/^\s+|\s+$/g),Af=l=>l.length>0,Jn=l=>{const m=parseFloat(l);return isNaN(m)?ue.none():ue.some(m)},ir=l=>l.style!==void 0&&De(l.style.getPropertyValue),Ba=(l,m,b)=>{if(!P(b))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",b,":: Element ",l),new Error("CSS value must be a string: "+b);ir(l)&&l.style.setProperty(m,b)},Qb=(l,m)=>{ir(l)&&l.style.removeProperty(m)},fs=(l,m,b)=>{const S=l.dom;Ba(S,m,b)},zr=(l,m)=>{const b=l.dom;ss(m,(S,k)=>{Ba(b,k,S)})},Vr=(l,m)=>{const b=l.dom,k=window.getComputedStyle(b).getPropertyValue(m);return k===""&&!As(l)?ev(b,m):k},ev=(l,m)=>ir(l)?l.style.getPropertyValue(m):"",Yp=(l,m)=>{const b=l.dom,S=ev(b,m);return ue.from(S).filter(k=>k.length>0)},Li=(l,m)=>{const b=l.dom;Qb(b,m),Td(Na(l,"style").map(Ic),"")&&vs(l,"style")},Hg=(l,m)=>{const b=l.dom,S=m.dom;ir(b)&&ir(S)&&(S.style.cssText=b.style.cssText)},ts=(l,m,b=0)=>Na(l,m).map(S=>parseInt(S,10)).getOr(b),Fc=(l,m)=>ts(l,m,1),ya=l=>ea("col")(l)?ts(l,"span",1)>1:Fc(l,"colspan")>1,cl=l=>Fc(l,"rowspan")>1,Au=(l,m)=>parseInt(Vr(l,m),10),Bs=ee(10),Lc=ee(10),Cm=(l,m)=>Df(l,m,Te),Df=(l,m,b)=>Ns(po(l),S=>ta(S,m)?b(S)?[S]:[]:Df(S,m,b)),tv=(l,m,b=Ht)=>{if(b(m))return ue.none();if(So(l,Uo(m)))return ue.some(m);const S=k=>ta(k,"table")||b(k);return Ul(m,l.join(","),S)},nv=(l,m)=>tv(["td","th"],l,m),ll=l=>Cm(l,"th,td"),zg=l=>ta(l,"colgroup")?bn(l,"col"):Ns(ov(l),m=>bn(m,"col")),ti=(l,m)=>vr(l,"table",m),Vg=l=>Cm(l,"tr"),ov=l=>ti(l).fold(ee([]),m=>bn(m,"colgroup")),Du=(l,m)=>tn(l,b=>{if(Uo(b)==="colgroup"){const S=tn(zg(b),k=>{const M=ts(k,"span",1);return Tf(k,1,M)});return le(b,S,"colgroup")}else{const S=tn(ll(b),k=>{const M=ts(k,"rowspan",1),H=ts(k,"colspan",1);return Tf(k,M,H)});return le(b,S,m(b))}}),Xp=l=>Xa(l).map(m=>{const b=Uo(m);return di(b)?b:"tbody"}).getOr("tbody"),ul=l=>{const m=Vg(l),S=[...ov(l),...m];return Du(S,Xp)},zy=(l,m)=>Du(l,()=>m),kd=l=>{let m=!1,b;return(...S)=>(m||(m=!0,b=l.apply(null,S)),b)},Vy=(l,m,b,S)=>{const k=l.isiOS()&&/ipad/i.test(b)===!0,M=l.isiOS()&&!k,H=l.isiOS()||l.isAndroid(),G=H||S("(pointer:coarse)"),Q=k||!M&&H&&S("(min-device-width:768px)"),ce=M||H&&!Q,Ce=m.isSafari()&&l.isiOS()&&/safari/i.test(b)===!1,et=!ce&&!Q&&!Ce;return{isiPad:ee(k),isiPhone:ee(M),isTablet:ee(Q),isPhone:ee(ce),isTouch:ee(G),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:ee(Ce),isDesktop:ee(et)}},Uy=(l,m)=>{for(let b=0;b<l.length;b++){const S=l[b];if(S.test(m))return S}},Wy=(l,m)=>{const b=Uy(l,m);if(!b)return{major:0,minor:0};const S=k=>Number(m.replace(b,"$"+k));return se(S(1),S(2))},Rf=(l,m)=>{const b=String(m).toLowerCase();return l.length===0?Zy():Wy(l,b)},Zy=()=>se(0,0),se=(l,m)=>({major:l,minor:m}),Ru={nu:se,detect:Rf,unknown:Zy},Hi=(l,m)=>sr(m.brands,b=>{const S=b.brand.toLowerCase();return Z(l,k=>{var M;return S===((M=k.brand)===null||M===void 0?void 0:M.toLowerCase())}).map(k=>({current:k.name,version:Ru.nu(parseInt(b.version,10),0)}))}),Sm=(l,m)=>{const b=String(m).toLowerCase();return Z(l,S=>S.search(b))},Jp=(l,m)=>Sm(l,m).map(b=>{const S=Ru.detect(b.versionRegexes,m);return{current:b.name,version:S}}),jy=(l,m)=>Sm(l,m).map(b=>{const S=Ru.detect(b.versionRegexes,m);return{current:b.name,version:S}}),oo=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,wa=l=>m=>io(m,l),dl=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>io(l,"edge/")&&io(l,"chrome")&&io(l,"safari")&&io(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,oo],search:l=>io(l,"chrome")&&!io(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>io(l,"msie")||io(l,"trident")},{name:"Opera",versionRegexes:[oo,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:wa("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:wa("firefox")},{name:"Safari",versionRegexes:[oo,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(io(l,"safari")||io(l,"mobile/"))&&io(l,"applewebkit")}],Wl=[{name:"Windows",search:wa("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>io(l,"iphone")||io(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:wa("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:wa("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:wa("linux"),versionRegexes:[]},{name:"Solaris",search:wa("sunos"),versionRegexes:[]},{name:"FreeBSD",search:wa("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:wa("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Mu={browsers:ee(dl),oses:ee(Wl)},ml="Edge",sa="Chromium",Zl="IE",sv="Opera",rv="Firefox",Hc="Safari",fl=()=>Qp({current:void 0,version:Ru.unknown()}),Qp=l=>{const m=l.current,b=l.version,S=k=>()=>m===k;return{current:m,version:b,isEdge:S(ml),isChromium:S(sa),isIE:S(Zl),isOpera:S(sv),isFirefox:S(rv),isSafari:S(Hc)}},Ca={unknown:fl,nu:Qp},cr="Windows",Od="iOS",Mf="Android",zc="Linux",$a="macOS",av="Solaris",Gy="FreeBSD",Ug="ChromeOS",Wg=()=>xm({current:void 0,version:Ru.unknown()}),xm=l=>{const m=l.current,b=l.version,S=k=>()=>m===k;return{current:m,version:b,isWindows:S(cr),isiOS:S(Od),isAndroid:S(Mf),isMacOS:S($a),isLinux:S(zc),isSolaris:S(av),isFreeBSD:S(Gy),isChromeOS:S(Ug)}},gl={unknown:Wg,nu:xm},A2={detect:(l,m,b)=>{const S=Mu.browsers(),k=Mu.oses(),M=m.bind(Q=>Hi(S,Q)).orThunk(()=>Jp(S,l)).fold(Ca.unknown,Ca.nu),H=jy(k,l).fold(gl.unknown,gl.nu),G=Vy(H,M,l,b);return{browser:M,os:H,deviceType:G}}},qy=l=>window.matchMedia(l).matches;let Ky=kd(()=>A2.detect(navigator.userAgent,ue.from(navigator.userAgentData),qy));const Ad=()=>Ky(),e1=(l,m)=>{const b=(G,Q)=>{if(!Je(Q)&&!Q.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+Q);const ce=G.dom;ir(ce)&&(ce.style[l]=Q+"px")},S=G=>{const Q=m(G);if(Q<=0||Q===null){const ce=Vr(G,l);return parseFloat(ce)||0}return Q},k=S,M=(G,Q)=>Ke(Q,(ce,Ce)=>{const et=Vr(G,Ce),pt=et===void 0?0:parseInt(et,10);return isNaN(pt)?ce:ce+pt},0);return{set:b,get:S,getOuter:k,aggregate:M,max:(G,Q,ce)=>{const Ce=M(G,ce);return Q>Ce?Q-Ce:0}}},Em=(l,m)=>Jn(l).getOr(m),gs=(l,m,b)=>Em(Vr(l,m),b),ws=(l,m,b,S)=>{const k=gs(l,`padding-${b}`,0),M=gs(l,`padding-${S}`,0),H=gs(l,`border-${b}-width`,0),G=gs(l,`border-${S}-width`,0);return m-k-M-H-G},fi=(l,m)=>{const b=l.dom,S=b.getBoundingClientRect().width||b.offsetWidth;return ws(l,S,"left","right")},t1=l=>gs(l,"height",l.dom.offsetHeight),Yy=l=>gs(l,"width",l.dom.offsetWidth),Ur=l=>fi(l),Nu=e1("width",l=>l.dom.offsetWidth),gi=l=>Nu.get(l),hl=l=>Nu.getOuter(l),cv=Ur,xn=Yy,ni=(l,m,b)=>{const S=l.cells,k=S.slice(0,m),M=S.slice(m),H=k.concat(b).concat(M);return n1(l,H)},Pu=(l,m,b)=>ni(l,m,[b]),Tm=(l,m,b)=>{const S=l.cells;S[m]=b},n1=(l,m)=>ot(l.element,m,l.section,l.isNew),lv=(l,m)=>{const b=l.cells,S=tn(b,m);return ot(l.element,S,l.section,l.isNew)},Sa=(l,m)=>l.cells[m],Qs=(l,m)=>Sa(l,m).element,hi=l=>l.cells.length,er=l=>{const m=kr(l,b=>b.section==="colgroup");return{rows:m.fail,cols:m.pass}},Zg=(l,m,b)=>{const S=tn(l.cells,b);return ot(m(l.element),S,l.section,!0)},_m="data-snooker-locked-cols",Fs=l=>Na(l,_m).bind(m=>ue.from(m.match(/\d+/g))).map(m=>fn(m,Te)),lr=l=>{const m=Ke(er(l).rows,(S,k)=>(Ge(k.cells,(M,H)=>{M.isLocked&&(S[H]=!0)}),S),{}),b=Js(m,(S,k)=>parseInt(k,10));return Yo(b)},Vc=(l,m)=>l+","+m,Nf=(l,m,b)=>ue.from(l.access[Vc(m,b)]),Ks=(l,m,b)=>{const S=o1(l,k=>b(m,k.element));return S.length>0?ue.some(S[0]):ue.none()},o1=(l,m)=>{const b=Ns(l.all,S=>S.cells);return us(b,m)},uv=l=>{const m={};let b=0;return Ge(l.cells,S=>{const k=S.colspan;Ro(k,M=>{const H=b+M;m[H]=Oo(S.element,k,H)}),b+=k}),m},Eo=l=>{const m={},b=[],k=Ie(l).map(ht=>ht.element).bind(ti).bind(Fs).getOr({});let M=0,H=0,G=0;const{pass:Q,fail:ce}=kr(l,ht=>ht.section==="colgroup");Ge(ce,ht=>{const Ue=[];Ge(ht.cells,bt=>{let He=0;for(;m[Vc(G,He)]!==void 0;)He++;const Pt=Jo(k,He.toString()),dn=q(bt.element,bt.rowspan,bt.colspan,G,He,Pt);for(let _n=0;_n<bt.colspan;_n++)for(let os=0;os<bt.rowspan;os++){const Tr=G+os,Is=He+_n,Ei=Vc(Tr,Is);m[Ei]=dn,H=Math.max(H,Is+1)}Ue.push(dn)}),M++,b.push(le(ht.element,Ue,ht.section)),G++});const{columns:Ce,colgroups:et}=uo(Q).map(ht=>{const Ue=uv(ht);return{colgroups:[es(ht.element,ns(Ue))],columns:Ue}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:zl(M,H),access:m,all:b,columns:Ce,colgroups:et}},Nn={fromTable:l=>{const m=ul(l);return Eo(m)},generate:Eo,getAt:Nf,findItem:Ks,filterItems:o1,justCells:l=>Ns(l.all,m=>m.cells),justColumns:l=>ns(l.columns),hasColumns:l=>Zt(l.columns).length>0,getColumnAt:(l,m)=>ue.from(l.columns[m])},km=(l,m=Te)=>{const b=l.grid,S=Ro(b.columns,qe),k=Ro(b.rows,qe);return tn(S,M=>dv(()=>Ns(k,ce=>Nn.getAt(l,ce,M).filter(Ce=>Ce.column===M).toArray()),ce=>ce.colspan===1&&m(ce.element),()=>Nn.getAt(l,0,M)))},dv=(l,m,b)=>{const S=l();return Z(S,m).orThunk(()=>ue.from(S[0]).orThunk(b)).map(H=>H.element)},s1=l=>{const m=l.grid,b=Ro(m.rows,qe),S=Ro(m.columns,qe);return tn(b,k=>dv(()=>Ns(S,Q=>Nn.getAt(l,k,Q).filter(ce=>ce.row===k).fold(ee([]),ce=>[ce])),Q=>Q.rowspan===1,()=>Nn.getAt(l,k,0)))},Xy=(l,m)=>{if(m<0||m>=l.length-1)return ue.none();const b=l[m].fold(()=>{const k=Pg(l.slice(0,m));return sr(k,(M,H)=>M.map(G=>({value:G,delta:H+1})))},k=>ue.some({value:k,delta:0})),S=l[m+1].fold(()=>{const k=l.slice(m+1);return sr(k,(M,H)=>M.map(G=>({value:G,delta:H+1})))},k=>ue.some({value:k,delta:1}));return b.bind(k=>S.map(M=>{const H=M.delta+k.delta;return Math.abs(M.value-k.value)/H}))},Jy=(l,m)=>b=>mv(b)==="rtl"?m:l,mv=l=>Vr(l,"direction")==="rtl"?"rtl":"ltr",Gg=e1("height",l=>{const m=l.dom;return As(l)?m.getBoundingClientRect().height:m.offsetHeight}),r1=l=>Gg.get(l),_=l=>Gg.getOuter(l),B=t1,U=(l,m)=>({left:l,top:m,translate:(S,k)=>U(l+S,m+k)}),oe=U,de=l=>{const m=l.getBoundingClientRect();return oe(m.left,m.top)},tt=(l,m)=>l!==void 0?l:m!==void 0?m:0,It=l=>{const m=l.dom.ownerDocument,b=m.body,S=m.defaultView,k=m.documentElement;if(b===l.dom)return oe(b.offsetLeft,b.offsetTop);const M=tt(S==null?void 0:S.pageYOffset,k.scrollTop),H=tt(S==null?void 0:S.pageXOffset,k.scrollLeft),G=tt(k.clientTop,b.clientTop),Q=tt(k.clientLeft,b.clientLeft);return pn(l).translate(H-Q,M-G)},pn=l=>{const m=l.dom,S=m.ownerDocument.body;return S===m?oe(S.offsetLeft,S.offsetTop):As(l)?de(m):oe(0,0)},hn=(l,m)=>({row:l,y:m}),sn=(l,m)=>({col:l,x:m}),hs=l=>It(l).left+hl(l),Rr=l=>It(l).left,zi=(l,m)=>sn(l,Rr(m)),jl=(l,m)=>sn(l,hs(m)),Wr=l=>It(l).top,D2=(l,m)=>hn(l,Wr(m)),Wo=(l,m)=>hn(l,Wr(m)+_(m)),Vt=(l,m,b)=>{if(b.length===0)return[];const S=tn(b.slice(1),(M,H)=>M.map(G=>l(H,G))),k=b[b.length-1].map(M=>m(b.length-1,M));return S.concat([k])},Gl=l=>-l,Mt={delta:qe,positions:l=>Vt(D2,Wo,l),edge:Wr},Rd=Jy({delta:qe,edge:Rr,positions:l=>Vt(zi,jl,l)},{delta:Gl,edge:hs,positions:l=>Vt(jl,zi,l)}),ur={delta:(l,m)=>Rd(m).delta(l,m),positions:(l,m)=>Rd(m).positions(l,m),edge:l=>Rd(l).edge(l)},Bf={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},a1=(()=>{const l="[0-9]+",b="[eE]"+("[+-]?"+l),S="\\.",k=G=>`(?:${G})?`,H=`[+-]?(?:${["Infinity",l+S+k(l)+k(b),S+l+k(b),l+k(b)].join("|")})`;return new RegExp(`^(${H})(.*)$`)})(),Zr=(l,m)=>gt(m,b=>gt(Bf[b],S=>l===S)),ql=(l,m)=>ue.from(a1.exec(l)).bind(S=>{const k=Number(S[1]),M=S[2];return Zr(M,m)?ue.some({value:k,unit:M}):ue.none()}),fv=/(\d+(\.\d+)?)%/,Bu=/(\d+(\.\d+)?)px|em/,R2=ea("col"),gv=(l,m,b)=>{const S=Ja(l).getOrThunk(()=>jp(_u(l)));return m(l)/b(S)*100},nt=(l,m)=>{fs(l,"width",m+"px")},M2=(l,m)=>{fs(l,"width",m+"%")},Am=(l,m)=>{fs(l,"height",m+"px")},Md=l=>B(l)+"px",i1=(l,m,b,S)=>{const k=ti(l).map(M=>{const H=b(M);return Math.floor(m/100*H)}).getOr(m);return S(l,k),k},Cs=(l,m,b,S)=>{const k=parseFloat(l);return Ou(l,"%")&&Uo(m)!=="table"?i1(m,k,b,S):k},Mo=l=>{const m=Md(l);return m?Cs(m,l,r1,Am):r1(l)},oi=(l,m,b)=>{const S=b(l),k=Fc(l,m);return S/k},Ia=(l,m)=>Yp(l,m).orThunk(()=>Na(l,m).map(b=>b+"px")),Vn=l=>Ia(l,"width"),c1=l=>Ia(l,"height"),ra=l=>gv(l,gi,cv),Ls=l=>R2(l)?gi(l):xn(l),hv=l=>oi(l,"rowspan",Mo),We=l=>Vn(l).bind(b=>ql(b,["fixed","relative","empty"])),Vi=(l,m,b)=>{fs(l,"width",m+b)},l1=l=>gi(l)+"px",so=l=>gv(l,gi,cv)+"%",Kl=l=>Vn(l).exists(m=>fv.test(m)),Hk=l=>Vn(l).exists(m=>Bu.test(m)),Yl=l=>Vn(l).isNone(),Qy=ee(fv),Xl=ea("col"),ew=l=>Vn(l).getOrThunk(()=>Ls(l)+"px"),ic=l=>c1(l).getOrThunk(()=>hv(l)+"px"),go=l=>tn(Nn.justColumns(l),m=>ue.from(m.element)),$u=l=>{const m=Ad().browser,b=m.isChromium()||m.isFirefox();return Xl(l)?b:!0},$f=(l,m,b,S,k,M)=>l.filter(S).fold(()=>M(Xy(b,m)),H=>k(H)),aa=(l,m,b,S)=>{const k=km(l),M=Nn.hasColumns(l)?go(l):k,H=[ue.some(ur.edge(m))].concat(tn(ur.positions(k,m),Q=>Q.map(ce=>ce.x))),G=ae(ya);return tn(M,(Q,ce)=>$f(Q,ce,H,G,Ce=>{if($u(Ce))return b(Ce);{const et=_d(k[ce],qe);return $f(et,ce,H,G,pt=>S(ue.some(gi(pt))),S)}},S))},tw=l=>l.map(m=>m+"px").getOr(""),If=(l,m)=>aa(l,m,ew,tw),Ff=(l,m,b)=>aa(l,m,ra,S=>S.fold(()=>b.minCellWidth(),k=>k/b.pixelWidth()*100)),pi=(l,m,b)=>aa(l,m,Ls,S=>S.getOrThunk(b.minCellWidth)),Dm=(l,m,b,S,k)=>{const M=s1(l),H=[ue.some(b.edge(m))].concat(tn(b.positions(M,m),G=>G.map(Q=>Q.y)));return tn(M,(G,Q)=>$f(G,Q,H,ae(cl),S,k))},xe=(l,m,b)=>Dm(l,m,b,hv,S=>S.getOrThunk(Lc)),Ui=(l,m,b)=>Dm(l,m,b,ic,tw),Iu=(l,m)=>()=>As(l)?m(l):parseFloat(Yp(l,"width").getOr("0")),Fu=l=>{const m=Iu(l,gi),b=ee(0);return{width:m,pixelWidth:m,getWidths:(k,M)=>pi(k,l,M),getCellDelta:b,singleColumnWidth:ee([0]),minCellWidth:b,setElementWidth:Ye,adjustTableWidth:Ye,isRelative:!0,label:"none"}},Wi=l=>{const m=Iu(l,Q=>parseFloat(so(Q))),b=Iu(l,gi);return{width:m,pixelWidth:b,getWidths:(Q,ce)=>Ff(Q,l,ce),getCellDelta:Q=>Q/b()*100,singleColumnWidth:(Q,ce)=>[100-Q],minCellWidth:()=>Bs()/b()*100,setElementWidth:M2,adjustTableWidth:Q=>{const ce=m(),Ce=Q/100*ce,et=ce+Ce;M2(l,et)},isRelative:!0,label:"percent"}},yr=l=>{const m=Iu(l,gi);return{width:m,pixelWidth:m,getWidths:(H,G)=>pi(H,l,G),getCellDelta:qe,singleColumnWidth:(H,G)=>[Math.max(Bs(),H+G)-H],minCellWidth:Bs,setElementWidth:nt,adjustTableWidth:H=>{const G=m()+H;nt(l,G)},isRelative:!1,label:"pixel"}},Mr=(l,m)=>Qy().exec(m)!==null?Wi(l):yr(l),bi={getTableSize:l=>Vn(l).fold(()=>Fu(l),b=>Mr(l,b)),pixelSize:yr,percentageSize:Wi,noneSize:Fu},Lu=(l,m,b,S,k,M)=>({minRow:l,minCol:m,maxRow:b,maxCol:S,allCells:k,selectedCells:M}),Jt=(l,m)=>{const b=l.grid.columns;let k=l.grid.rows,M=b,H=0,G=0;const Q=[],ce=[];return ss(l.access,Ce=>{if(Q.push(Ce),m(Ce)){ce.push(Ce);const et=Ce.row,pt=et+Ce.rowspan-1,ht=Ce.column,Ue=ht+Ce.colspan-1;et<k?k=et:pt>H&&(H=pt),ht<M?M=ht:Ue>G&&(G=Ue)}}),Lu(k,M,H,G,Q,ce)},jr=(l,m,b)=>{const S=l[b].element,k=we.fromTag("td");Qo(k,we.fromTag("br")),(m?Qo:Gs)(S,k)},Zi=(l,m,b,S)=>{const k=us(l,G=>G.section!=="colgroup"),M=m.grid.columns,H=m.grid.rows;for(let G=0;G<H;G++){let Q=!1;for(let ce=0;ce<M;ce++)G<b.minRow||G>b.maxRow||ce<b.minCol||ce>b.maxCol||(Nn.getAt(m,G,ce).filter(S).isNone()?jr(k,Q,G):Q=!0)}},cc=(l,m,b,S)=>{ss(b.columns,H=>{(H.column<m.minCol||H.column>m.maxCol)&&ar(H.element)});const k=us(Cm(l,"tr"),H=>H.dom.childElementCount===0);Ge(k,ar),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&Ge(Cm(l,"th,td"),H=>{vs(H,"rowspan"),vs(H,"colspan")}),vs(l,_m),vs(l,"data-snooker-col-series"),bi.getTableSize(l).adjustTableWidth(S)},zk=(l,m,b,S)=>{if(S.minCol===0&&m.grid.columns===S.maxCol+1)return 0;const k=pi(m,l,b),M=Ke(k,(ce,Ce)=>ce+Ce,0),Q=Ke(k.slice(S.minCol,S.maxCol+1),(ce,Ce)=>ce+Ce,0)/M*b.pixelWidth()-b.pixelWidth();return b.getCellDelta(Q)},Vk=(l,m)=>{const b=pt=>ta(pt.element,m),S=Bc(l),k=ul(S),M=bi.getTableSize(l),H=Nn.generate(k),G=Jt(H,b),Q="th:not("+m+"),td:not("+m+")",ce=Df(S,"th,td",pt=>ta(pt,Q));Ge(ce,ar),Zi(k,H,G,b);const Ce=Nn.fromTable(l),et=zk(l,Ce,M,G);return cc(S,G,H,et),S},qg=" ",vi=((l,m)=>{const b=M=>{if(!l(M))throw new Error("Can only get "+m+" value of a "+m+" node");return S(M).getOr("")},S=M=>l(M)?ue.from(M.dom.nodeValue):ue.none();return{get:b,getOption:S,set:(M,H)=>{if(!l(M))throw new Error("Can only set raw "+m+" value of a "+m+" node");M.dom.nodeValue=H}}})(rl,"text"),ia=l=>vi.get(l),nw=l=>vi.getOption(l),Uk=(l,m)=>vi.set(l,m),Hu=l=>Uo(l)==="img"?1:nw(l).fold(()=>po(l).length,m=>m.length),pv=l=>nw(l).filter(m=>m.trim().length!==0||m.indexOf(qg)>-1).isSome(),N2=l=>an(l)&&al(l,"contenteditable")==="false",Lf=["img","br"],Kg=l=>pv(l)||So(Lf,Uo(l))||N2(l),P2=l=>Dr(l,Kg),Nd=l=>B2(l,Kg),B2=(l,m)=>{const b=S=>{const k=po(S);for(let M=k.length-1;M>=0;M--){const H=k[M];if(m(H))return ue.some(H);const G=b(H);if(G.isSome())return G}return ue.none()};return b(l)},$2={scope:["row","col"]},ow=l=>()=>{const m=we.fromTag("td",l.dom);return Qo(m,we.fromTag("br",l.dom)),m},sw=l=>()=>we.fromTag("col",l.dom),Gr=l=>()=>we.fromTag("colgroup",l.dom),zu=l=>()=>we.fromTag("tr",l.dom),Yg=(l,m,b)=>{const S=$g(l,m);return ss(b,(k,M)=>{k===null?vs(S,M):ks(S,M,k)}),S},Hf=l=>l,I2=(l,m,b)=>P2(l).map(k=>{const M=b.join(","),H=kf(k,M,G=>Lo(G,l));return Fr(H,(G,Q)=>{const ce=oa(Q);return Qo(G,ce),ce},m)}).getOr(m),dr=(l,m)=>{ss($2,(b,S)=>Na(l,S).filter(k=>So(b,k)).each(k=>ks(m,S,k)))},Xg=(l,m,b)=>{const S=(H,G)=>{Hg(H.element,G),Li(G,"height"),H.colspan!==1&&Li(G,"width")},k=H=>{const G=we.fromTag(Uo(H.element),m.dom),Q=b.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),ce=Q.length>0?I2(H.element,G,Q):G;return Qo(ce,we.fromTag("br")),S(H,G),dr(H.element,G),l(H.element,G),G};return{col:H=>{const G=we.fromTag(Uo(H.element),m.dom);return S(H,G),l(H.element,G),G},colgroup:Gr(m),row:zu(m),cell:k,replace:Yg,colGap:sw(m),gap:ow(m)}},Jg=l=>({col:sw(l),colgroup:Gr(l),row:zu(l),cell:ow(l),replace:Hf,colGap:sw(l),gap:ow(l)}),rw=(l,m)=>{const S=document.createElement("div");return S.innerHTML=l,po(we.fromDom(S))},Pd=l=>tn(l,we.fromDom),ji=l=>m=>m.options.get(l),bv="100%",pl=l=>{var m;const b=l.dom,S=(m=b.getParent(l.selection.getStart(),b.isBlock))!==null&&m!==void 0?m:l.getBody();return cv(we.fromDom(S))+"px"},Rm=(l,m)=>Uf(l)||!Gi(l)?m:Mm(l)?{...m,width:pl(l)}:{...m,width:bv},zf=(l,m)=>Uf(l)||Gi(l)?m:Mm(l)?{...m,width:pl(l)}:{...m,width:bv},Qg=l=>{const m=l.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:b=>{const S=So(["section","cells","sectionCells","auto"],b);return S?{value:b,valid:S}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:b=>{const S=So(["preservetable","resizetable"],b);return S?{value:b,valid:S}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},Bd=l=>ue.from(l.options.get("table_clone_elements")),Wk=l=>{const m=l.options.get("object_resizing");return So(m.split(","),"table")},Vf=ji("table_header_type"),aw=ji("table_column_resizing"),F2=l=>aw(l)==="preservetable",Hs=l=>aw(l)==="resizetable",eh=ji("table_sizing_mode"),Jl=l=>eh(l)==="relative",Mm=l=>eh(l)==="fixed",Uf=l=>eh(l)==="responsive",Wf=ji("table_resize_bars"),Gi=ji("table_style_by_css"),Rs=ji("table_merge_content_on_paste"),Ql=l=>{const m=l.options,b=m.get("table_default_attributes");return m.isSet("table_default_attributes")?b:zf(l,b)},iw=l=>{const m=l.options,b=m.get("table_default_styles");return m.isSet("table_default_styles")?b:Rm(l,b)},d1=ji("table_use_colgroups"),vv=l=>vr(l,"[contenteditable]"),Nm=(l,m=!1)=>As(l)?l.dom.isContentEditable:vv(l).fold(ee(m),b=>m1(b)==="true"),m1=l=>l.dom.contentEditable,yv=l=>we.fromDom(l.getBody()),Vu=l=>m=>Lo(m,yv(l)),eu=l=>{vs(l,"data-mce-style");const m=b=>vs(b,"data-mce-style");Ge(ll(l),m),Ge(zg(l),m),Ge(Vg(l),m)},lc=l=>we.fromDom(l.selection.getStart()),Pm=l=>l.getBoundingClientRect().width,Bm=l=>l.getBoundingClientRect().height,L2=(l,m)=>{const b=l.dom.getStyle(m,"width")||l.dom.getAttrib(m,"width");return ue.from(b).filter(Af)},wv=l=>/^(\d+(\.\d+)?)%$/.test(l),f1=l=>/^(\d+(\.\d+)?)px$/.test(l),Cv=l=>Of(l,ea("table")).exists(Nm),H2=(l,m)=>{const b=m.column,S=m.column+m.colspan-1,k=m.row,M=m.row+m.rowspan-1;return b<=l.finishCol&&S>=l.startCol&&k<=l.finishRow&&M>=l.startRow},Sv=(l,m)=>m.column>=l.startCol&&m.column+m.colspan-1<=l.finishCol&&m.row>=l.startRow&&m.row+m.rowspan-1<=l.finishRow,g1=(l,m)=>{let b=!0;const S=At(Sv,m);for(let k=m.startRow;k<=m.finishRow;k++)for(let M=m.startCol;M<=m.finishCol;M++)b=b&&Nn.getAt(l,k,M).exists(S);return b?ue.some(m):ue.none()},h1=(l,m)=>rn(Math.min(l.row,m.row),Math.min(l.column,m.column),Math.max(l.row+l.rowspan-1,m.row+m.rowspan-1),Math.max(l.column+l.colspan-1,m.column+m.colspan-1)),Fn=(l,m,b)=>{const S=Nn.findItem(l,m,Lo),k=Nn.findItem(l,b,Lo);return S.bind(M=>k.map(H=>h1(M,H)))},Gt=(l,m,b)=>Fn(l,m,b).bind(S=>g1(l,S)),$d=(l,m,b,S)=>Nn.findItem(l,m,Lo).bind(k=>{const M=b>0?k.row+k.rowspan-1:k.row,H=S>0?k.column+k.colspan-1:k.column;return Nn.getAt(l,M+b,H+S).map(Q=>Q.element)}),xv=(l,m,b)=>Fn(l,m,b).map(S=>{const k=Nn.filterItems(l,At(H2,S));return tn(k,M=>M.element)}),p1=(l,m)=>{const b=(S,k)=>Bg(k,S);return Nn.findItem(l,m,b).map(S=>S.element)},Zk=(l,m,b)=>ti(l).bind(S=>{const k=uw(S);return $d(k,l,m,b)}),cw=(l,m,b)=>{const S=uw(l);return xv(S,m,b)},Ho=(l,m,b,S,k)=>{const M=uw(l),H=Lo(l,b)?ue.some(m):p1(M,m),G=Lo(l,k)?ue.some(S):p1(M,S);return H.bind(Q=>G.bind(ce=>xv(M,Q,ce)))},lw=(l,m,b)=>{const S=uw(l);return Gt(S,m,b)},uw=Nn.fromTable;var dw=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Ve=()=>{const l=ce=>we.fromDom(ce.dom.cloneNode(!1)),m=ce=>xd(ce).dom,b=ce=>ba(ce)?Uo(ce)==="body"?!0:So(dw,Uo(ce)):!1,S=ce=>ba(ce)?So(["br","img","hr","input"],Uo(ce)):!1,k=ce=>ba(ce)&&al(ce,"contenteditable")==="false",M=(ce,Ce)=>ce.dom.compareDocumentPosition(Ce.dom),H=(ce,Ce)=>{const et=Ya(ce);Ii(Ce,et)},G=ce=>{const Ce=Uo(ce);return So(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Ce)},Q=ce=>ba(ce)?Na(ce,"lang"):ue.none();return{up:ee({selector:Ul,closest:vr,predicate:Ds,all:Hl}),down:ee({selector:ei,predicate:Vl}),styles:ee({get:Vr,getRaw:Yp,set:fs,remove:Li}),attrs:ee({get:al,set:ks,remove:vs,copyTo:H}),insert:ee({before:il,after:ui,afterAll:wo,append:Qo,appendAll:Lr,prepend:Gs,wrap:xf}),remove:ee({unwrap:Nc,remove:ar}),create:ee({nu:we.fromTag,clone:l,text:we.fromText}),query:ee({comparePosition:M,prevSibling:Ed,nextSibling:ku}),property:ee({children:po,name:Uo,parent:Xa,document:m,isText:rl,isComment:Fo,isElement:ba,isSpecial:G,getLanguage:Q,getText:ia,setText:Uk,isBoundary:b,isEmptyTag:S,isNonEditable:k}),eq:Lo,is:Sf}};const Ev=(l,m,b,S)=>{const k=b[0],M=b.slice(1);return S(l,m,k,M)},jk=(l,m,b)=>b.length>0?Ev(l,m,b,b1):ue.none(),b1=(l,m,b,S)=>{const k=m(l,b);return Fr(S,(M,H)=>{const G=m(l,H);return Gk(l,M,G)},k)},Gk=(l,m,b)=>m.bind(S=>b.filter(At(l.eq,S))),th=(l,m)=>At(l.eq,m),mw=(l,m,b,S=Ht)=>{const k=[m].concat(l.up().all(m)),M=[b].concat(l.up().all(b)),H=Ce=>Dc(Ce,S).fold(()=>Ce,pt=>Ce.slice(0,pt+1)),G=H(k),Q=H(M),ce=Z(G,Ce=>gt(Q,th(l,Ce)));return{firstpath:G,secondpath:Q,shared:ce}},Id=jk,qk=mw,Uu=Ve(),No=(l,m)=>Id(Uu,(b,S)=>l(S),m),Wu=(l,m,b)=>qk(Uu,l,m,b),fw=l=>Ul(l,"table"),bl=(l,m,b)=>{const S=k=>M=>b!==void 0&&b(M)||Lo(M,k);return Lo(l,m)?ue.some({boxes:ue.some([l]),start:l,finish:m}):fw(l).bind(k=>fw(m).bind(M=>{if(Lo(k,M))return ue.some({boxes:cw(k,l,m),start:l,finish:m});if(Bg(k,M)){const H=kf(m,"td,th",S(k)),G=H.length>0?H[H.length-1]:m;return ue.some({boxes:Ho(k,l,k,m,M),start:l,finish:G})}else if(Bg(M,k)){const H=kf(l,"td,th",S(M)),G=H.length>0?H[H.length-1]:l;return ue.some({boxes:Ho(M,l,k,m,M),start:l,finish:G})}else return Wu(l,m).shared.bind(H=>vr(H,"table",b).bind(G=>{const Q=kf(m,"td,th",S(G)),ce=Q.length>0?Q[Q.length-1]:m,Ce=kf(l,"td,th",S(G)),et=Ce.length>0?Ce[Ce.length-1]:l;return ue.some({boxes:Ho(G,l,k,m,M),start:et,finish:ce})}))}))},Fd=(l,m)=>{const b=ei(l,m);return b.length>0?ue.some(b):ue.none()},gw=(l,m)=>Z(l,b=>ta(b,m)),Zf=(l,m,b)=>mi(l,m).bind(S=>mi(l,b).bind(k=>No(fw,[S,k]).map(M=>({first:S,last:k,table:M})))),z2=(l,m)=>Ul(l,"table").bind(b=>mi(b,m).bind(S=>bl(S,l).bind(k=>k.boxes.map(M=>({boxes:M,start:k.start,finish:k.finish}))))),Tv=(l,m,b,S,k)=>gw(l,k).bind(M=>Zk(M,m,b).bind(H=>z2(H,S))),hw=(l,m)=>Fd(l,m),Kk=(l,m,b)=>Zf(l,m,b).bind(S=>{const k=Q=>Lo(l,Q),M="thead,tfoot,tbody,table",H=Ul(S.first,M,k),G=Ul(S.last,M,k);return H.bind(Q=>G.bind(ce=>Lo(Q,ce)?lw(S.table,S.first,S.last):ue.none()))}),pw=qe,Zu=l=>{const m=(S,k)=>Na(S,k).exists(M=>parseInt(M,10)>1),b=S=>m(S,"rowspan")||m(S,"colspan");return l.length>0&&Io(l,b)?ue.some(l):ue.none()},VM=(l,m,b)=>m.length<=1?ue.none():Kk(l,b.firstSelectedSelector,b.lastSelectedSelector).map(S=>({bounds:S,cells:m})),bw="data-mce-selected",jf="td["+bw+"],th["+bw+"]",ca="["+bw+"]",Ot="data-mce-first-selected",Yk="td["+Ot+"],th["+Ot+"]",vw="data-mce-last-selected",Xk="td["+vw+"],th["+vw+"]",V2=ca,Gf={selected:bw,selectedSelector:jf,firstSelected:Ot,firstSelectedSelector:Yk,lastSelected:vw,lastSelectedSelector:Xk},nh=(l,m,b)=>({element:b,mergable:VM(m,l,Gf),unmergable:Zu(l),selection:pw(l)}),v1=(l,m,b)=>({element:l,clipboard:m,generators:b}),oh=(l,m,b,S)=>({selection:pw(l),clipboard:b,generators:S}),_v=l=>ti(l).bind(m=>hw(m,Gf.firstSelectedSelector)).fold(ee(l),m=>m[0]),Ld=l=>(m,b)=>{const S=Uo(m),k=S==="col"||S==="colgroup"?_v(m):m;return vr(k,l,b)},tu=Ld("th,td,caption"),y1=Ld("th,td"),Wc=l=>Pd(l.model.table.getSelectedCells()),kv=l=>us(Wc(l),m=>ta(m,Gf.selectedSelector)),U2=l=>ti(l[0]).map(m=>{const b=Vk(m,V2);return eu(b),[b]}),sh=(l,m)=>tn(m,b=>l.selection.serializer.serialize(b.dom,{})).join(""),Hd=l=>tn(l,m=>m.dom.innerText).join(""),Jk=(l,m)=>{l.on("BeforeGetContent",b=>{const S=k=>{b.preventDefault(),U2(k).each(M=>{b.content=b.format==="text"?Hd(M):sh(l,M)})};if(b.selection===!0){const k=kv(l);k.length>=1&&S(k)}}),l.on("BeforeSetContent",b=>{if(b.selection===!0&&b.paste===!0){const S=Wc(l);Ie(S).each(k=>{ti(k).each(M=>{const H=us(rw(b.content),Q=>Uo(Q)!=="meta"),G=ea("table");if(Rs(l)&&H.length===1&&G(H[0])){b.preventDefault();const Q=we.fromDom(l.getDoc()),ce=Jg(Q),Ce=v1(k,H[0],ce);m.pasteCells(M,Ce).each(()=>{l.focus()})}})})}})},rh=(l,m)=>({element:l,offset:m}),qf=(l,m,b)=>l.property().isText(m)&&l.property().getText(m).trim().length===0||l.property().isComment(m)?b(m).bind(S=>qf(l,S,b).orThunk(()=>ue.some(S))):ue.none(),vl=(l,m)=>l.property().isText(m)?l.property().getText(m).length:l.property().children(m).length,qi=(l,m)=>{const b=qf(l,m,l.query().prevSibling).getOr(m);if(l.property().isText(b))return rh(b,vl(l,b));const S=l.property().children(b);return S.length>0?qi(l,S[S.length-1]):rh(b,vl(l,b))},Qk=qi,W2=Ve(),Z2=l=>Qk(W2,l),yw=(l,m)=>{ya(l)||We(l).each(S=>{const k=S.value/2;Vi(l,k,S.unit),Vi(m,k,S.unit)})},Ki=l=>tn(l,ee(0)),ah=(l,m,b,S,k)=>k(l.slice(0,m)).concat(S).concat(k(l.slice(b))),Ov=l=>(m,b,S,k)=>{if(l(S)){const M=Math.max(k,m[b]-Math.abs(S)),H=Math.abs(M-m[b]);return S>=0?H:-H}else return S},Av=Ov(l=>l<0),eO=Ov(Te),j2=()=>{const l=(G,Q,ce,Ce,et)=>{const pt=Av(G,Q,Ce,et);return ah(G,Q,ce+1,[pt,0],Ki)},m=(G,Q,ce,Ce)=>{const et=(100+ce)/100,pt=Math.max(Ce,(G[Q]+ce)/et);return tn(G,(ht,Ue)=>(Ue===Q?pt:ht/et)-ht)},b=(G,Q,ce,Ce,et,pt)=>pt?m(G,Q,Ce,et):l(G,Q,ce,Ce,et);return{resizeTable:(G,Q)=>G(Q),clampTableDelta:Av,calcLeftEdgeDeltas:b,calcMiddleDeltas:(G,Q,ce,Ce,et,pt,ht)=>b(G,ce,Ce,et,pt,ht),calcRightEdgeDeltas:(G,Q,ce,Ce,et,pt)=>{if(pt)return m(G,ce,Ce,et);{const ht=Av(G,ce,Ce,et);return Ki(G.slice(0,ce)).concat([ht])}},calcRedestributedWidths:(G,Q,ce,Ce)=>{if(Ce){const pt=(Q+ce)/Q,ht=tn(G,Ue=>Ue/pt);return{delta:pt*100-100,newSizes:ht}}else return{delta:ce,newSizes:G}}}},ww=()=>{const l=(H,G,Q,ce,Ce)=>{const et=ce>=0?Q:G,pt=eO(H,et,ce,Ce);return ah(H,G,Q+1,[pt,-pt],Ki)};return{resizeTable:(H,G,Q)=>{Q&&H(G)},clampTableDelta:(H,G,Q,ce,Ce)=>{if(Ce){if(Q>=0)return Q;{const et=Ke(H,(pt,ht)=>pt+ht-ce,0);return Math.max(-et,Q)}}else return Av(H,G,Q,ce)},calcLeftEdgeDeltas:l,calcMiddleDeltas:(H,G,Q,ce,Ce,et)=>l(H,Q,ce,Ce,et),calcRightEdgeDeltas:(H,G,Q,ce,Ce,et)=>{if(et)return Ki(H);{const pt=ce/H.length;return tn(H,ee(pt))}},calcRedestributedWidths:(H,G,Q,ce)=>({delta:0,newSizes:H})}},ih=l=>Nn.fromTable(l).grid,ch=ea("th"),Dv=l=>Io(l,m=>ch(m.element)),tO=(l,m)=>l&&m?"sectionCells":l?"section":"cells",Rv=l=>{const m=l.section==="thead",b=Td(lh(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:m||b?{type:"header",subType:tO(m,b)}:{type:"body"}},lh=l=>{const m=us(l,b=>ch(b.element));return m.length===0?ue.some("td"):m.length===l.length?ue.some("th"):ue.none()},nO=l=>{const m=tn(l,k=>Rv(k).type),b=So(m,"header"),S=So(m,"footer");if(!b&&!S)return ue.some("body");{const k=So(m,"body");return b&&!k&&!S?ue.some("header"):!b&&!k&&S?ue.some("footer"):ue.none()}},w1=l=>sr(l.all,m=>{const b=Rv(m);return b.type==="header"?ue.from(b.subType):ue.none()}),Cw=(l,m,b)=>Be(b(l.element,m),!0,l.isLocked),Yi=(l,m)=>l.section!==m?ot(l.element,l.cells,m,l.isNew):l,Mv=()=>({transformRow:Yi,transformCell:(l,m,b)=>{const S=b(l.element,m),k=Uo(S)!=="td"?$c(S,"td"):S;return Be(k,l.isNew,l.isLocked)}}),G2=()=>({transformRow:Yi,transformCell:Cw}),Nv=()=>({transformRow:(l,m)=>Yi(l,m==="thead"?"tbody":m),transformCell:Cw}),$m={getTableSectionType:(l,m)=>{const b=Nn.fromTable(l);switch(w1(b).getOr(m)){case"section":return Mv();case"sectionCells":return G2();case"cells":return Nv()}},section:Mv,sectionCells:G2,cells:Nv,fallback:()=>({transformRow:qe,transformCell:Cw})},ju=(l,m,b,S)=>{b===S?vs(l,m):ks(l,m,b)},Sw=(l,m,b)=>{uo(bn(l,m)).fold(()=>Gs(l,b),S=>ui(S,b))},uh=(l,m)=>{const b=eo(l,m).getOrThunk(()=>{const S=we.fromTag(m,_u(l).dom);return m==="thead"?Sw(l,"caption,colgroup",S):m==="colgroup"?Sw(l,"caption",S):Qo(l,S),S});return Pa(b),b},Bv=(l,m)=>{const b=[],S=[],k=ht=>tn(ht,Ue=>{Ue.isNew&&b.push(Ue.element);const bt=Ue.element;return Pa(bt),Ge(Ue.cells,He=>{He.isNew&&S.push(He.element),ju(He.element,"colspan",He.colspan,1),ju(He.element,"rowspan",He.rowspan,1),Qo(bt,He.element)}),bt}),M=ht=>Ns(ht,Ue=>tn(Ue.cells,bt=>(ju(bt.element,"span",bt.colspan,1),bt.element))),H=(ht,Ue)=>{const bt=uh(l,Ue),Pt=(Ue==="colgroup"?M:k)(ht);Lr(bt,Pt)},G=ht=>{eo(l,ht).each(ar)},Q=(ht,Ue)=>{ht.length>0?H(ht,Ue):G(Ue)},ce=[],Ce=[],et=[],pt=[];return Ge(m,ht=>{switch(ht.section){case"thead":ce.push(ht);break;case"tbody":Ce.push(ht);break;case"tfoot":et.push(ht);break;case"colgroup":pt.push(ht);break}}),Q(pt,"colgroup"),Q(ce,"thead"),Q(Ce,"tbody"),Q(et,"tfoot"),{newRows:b,newCells:S}},q2=l=>tn(l,m=>{const b=oa(m.element);return Ge(m.cells,S=>{const k=Bc(S.element);ju(k,"colspan",S.colspan,1),ju(k,"rowspan",S.rowspan,1),Qo(b,k)}),b}),Zo=(l,m)=>tn(l,b=>Sa(b,m)),oO=(l,m)=>l[m],zs=(l,m)=>{if(l.length===0)return 0;const b=l[0];return Dc(l,k=>!m(b.element,k.element)).getOr(l.length)},K2=(l,m,b,S)=>{const k=oO(l,m),M=k.section==="colgroup",H=zs(k.cells.slice(b),S),G=M?1:zs(Zo(l.slice(m),b),S);return{colspan:H,rowspan:G}},ps=(l,m)=>{const b=tn(l,k=>tn(k.cells,Ht)),S=(k,M,H,G)=>{for(let Q=k;Q<k+H;Q++)for(let ce=M;ce<M+G;ce++)b[Q][ce]=!0};return tn(l,(k,M)=>{const H=Ns(k.cells,(G,Q)=>{if(b[M][Q]===!1){const ce=K2(l,M,Q,m);return S(M,Q,ce.rowspan,ce.colspan),[Fg(G.element,ce.rowspan,ce.colspan,G.isNew)]}else return[]});return ye(k.element,H,k.section,k.isNew)})},dh=(l,m,b)=>{const S=[];Ge(l.colgroups,k=>{const M=[];for(let H=0;H<l.grid.columns;H++){const G=Nn.getColumnAt(l,H).map(Q=>Be(Q.element,b,!1)).getOrThunk(()=>Be(m.colGap(),!0,!1));M.push(G)}S.push(ot(k.element,M,"colgroup",b))});for(let k=0;k<l.grid.rows;k++){const M=[];for(let Q=0;Q<l.grid.columns;Q++){const ce=Nn.getAt(l,k,Q).map(Ce=>Be(Ce.element,b,Ce.isLocked)).getOrThunk(()=>Be(m.gap(),!0,!1));M.push(ce)}const H=l.all[k],G=ot(H.element,M,H.section,b);S.push(G)}return S},mr=(l,m)=>dh(l,m,!1),Ss=l=>ps(l,Lo),uc=(l,m)=>sr(l.all,b=>Z(b.cells,S=>Lo(m,S.element))),xw=(l,m,b)=>{const S=tn(m.selection,M=>nv(M).bind(H=>uc(l,H)).filter(b)),k=ms(S);return Gp(k.length>0,k)},la=(l,m,b,S,k)=>(M,H,G,Q)=>{const ce=Nn.fromTable(M),Ce=ue.from(Q==null?void 0:Q.section).getOrThunk($m.fallback);return m(ce,H).map(pt=>{const ht=mr(ce,G),Ue=l(ht,pt,Lo,k(G),Ce),bt=lr(Ue.grid),He=Ss(Ue.grid);return{info:pt,grid:He,cursor:Ue.cursor,lockedColumns:bt}}).bind(pt=>{const ht=Bv(M,pt.grid),Ue=ue.from(Q==null?void 0:Q.sizing).getOrThunk(()=>bi.getTableSize(M)),bt=ue.from(Q==null?void 0:Q.resize).getOrThunk(ww);return b(M,pt.grid,pt.info,{sizing:Ue,resize:bt,section:Ce}),S(M),vs(M,_m),pt.lockedColumns.length>0&&ks(M,_m,pt.lockedColumns.join(",")),ue.some({cursor:pt.cursor,newRows:ht.newRows,newCells:ht.newCells})})},C1=(l,m)=>nv(m.element).bind(b=>uc(l,b).map(S=>({...S,generators:m.generators,clipboard:m.clipboard}))),mh=(l,m)=>xw(l,m,Te).map(b=>({cells:b,generators:m.generators,clipboard:m.clipboard})),Gu=(l,m)=>m.mergable,fh=(l,m)=>m.unmergable,Im=(l,m)=>xw(l,m,Te),zd=(l,m)=>xw(l,m,b=>!b.isLocked),sO=(l,m)=>uc(l,m).exists(b=>!b.isLocked),Y2=(l,m)=>Io(m,b=>sO(l,b)),WM=(l,m)=>Gu(l,m).filter(b=>Y2(l,b.cells)),ZM=(l,m)=>fh(l,m).filter(b=>Y2(l,b)),yl=(l,m,b,S)=>{const k=er(l).rows;if(k.length===0)return l;for(let M=m.startRow;M<=m.finishRow;M++)for(let H=m.startCol;H<=m.finishCol;H++){const G=k[M],Q=Sa(G,H).isLocked;Tm(G,H,Be(S(),!1,Q))}return l},Fa=(l,m,b,S)=>{const k=er(l).rows;let M=!0;for(let H=0;H<k.length;H++)for(let G=0;G<hi(k[0]);G++){const Q=k[H],ce=Sa(Q,G),Ce=ce.element,et=b(Ce,m);et&&!M?Tm(Q,G,Be(S(),!0,ce.isLocked)):et&&(M=!1)}return l},rO=(l,m)=>Ke(l,(b,S)=>gt(b,k=>m(k.element,S.element))?b:b.concat([S]),[]),aO=(l,m,b,S)=>(m>0&&m<l[0].cells.length&&Ge(l,k=>{const M=k.cells[m-1];let H=0;const G=S();for(;k.cells.length>m+H&&b(M.element,k.cells[m+H].element);)Tm(k,m+H,Be(G,!0,k.cells[m+H].isLocked)),H++}),l),Fm=(l,m,b,S)=>{const k=er(l).rows;if(m>0&&m<k.length){const M=k[m-1].cells,H=rO(M,b);Ge(H,G=>{let Q=ue.none();for(let ce=m;ce<k.length;ce++)for(let Ce=0;Ce<hi(k[0]);Ce++){const et=k[ce],pt=Sa(et,Ce);b(pt.element,G.element)&&(Q.isNone()&&(Q=ue.some(S())),Q.each(Ue=>{Tm(et,Ce,Be(Ue,!0,pt.isLocked))}))}})}return l},S1=l=>{const m=M=>M(l),b=ee(l),S=()=>k,k={tag:!0,inner:l,fold:(M,H)=>H(l),isValue:Te,isError:Ht,map:M=>qu.value(M(l)),mapError:S,bind:m,exists:m,forall:m,getOr:b,or:S,getOrThunk:b,orThunk:S,getOrDie:b,each:M=>{M(l)},toOptional:()=>ue.some(l)};return k},$v=l=>{const m=()=>b,b={tag:!1,inner:l,fold:(S,k)=>S(l),isValue:Ht,isError:Te,map:m,mapError:S=>qu.error(S(l)),bind:m,exists:Ht,forall:Te,getOr:qe,or:qe,getOrThunk:Dt,orThunk:Dt,getOrDie:yt(String(l)),each:Ye,toOptional:ue.none};return b},qu={value:S1,error:$v,fromOption:(l,m)=>l.fold(()=>$v(m),S1)},gh=(l,m,b)=>{if(l.row>=m.length||l.column>hi(m[0]))return qu.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const S=m.slice(l.row),k=S[0].cells.slice(l.column),M=hi(b[0]),H=b.length;return qu.value({rowDelta:S.length-H,colDelta:k.length-M})},hh=(l,m)=>{const b=hi(l[0]),S=hi(m[0]);return{rowDelta:0,colDelta:b-S}},ph=(l,m)=>{const b=l.length,S=m.length;return{rowDelta:b-S,colDelta:0}},Kf=(l,m,b,S)=>{const k=m.section==="colgroup"?b.col:b.cell;return Ro(l,M=>Be(k(),!0,S(M)))},X2=(l,m,b,S)=>{const k=l[l.length-1];return l.concat(Ro(m,()=>{const M=k.section==="colgroup"?b.colgroup:b.row,H=Zg(k,M,qe),G=Kf(H.cells.length,H,b,Q=>Xo(S,Q.toString()));return n1(H,G)}))},$s=(l,m,b,S)=>tn(l,k=>{const M=Kf(m,k,b,Ht);return ni(k,S,M)}),J2=(l,m,b)=>tn(l,S=>Ke(b,(k,M)=>{const H=Kf(1,S,m,Te)[0];return Pu(k,M,H)},S)),bh=(l,m,b)=>{const S=m.colDelta<0?$s:qe,k=m.rowDelta<0?X2:qe,M=lr(l),H=hi(l[0]),G=gt(M,Ce=>Ce===H-1),Q=S(l,Math.abs(m.colDelta),b,G?H-1:H),ce=lr(Q);return k(Q,Math.abs(m.rowDelta),b,fn(ce,Te))},Q2=(l,m,b,S)=>{const k=Sa(l[m],b),M=At(S,k.element),H=l[m];return l.length>1&&hi(H)>1&&(b>0&&M(Qs(H,b-1))||b<H.cells.length-1&&M(Qs(H,b+1))||m>0&&M(Qs(l[m-1],b))||m<l.length-1&&M(Qs(l[m+1],b)))},Fv=(l,m,b,S,k,M)=>{const H=l.row,G=l.column,Q=b.length,ce=hi(b[0]),Ce=H+Q,et=G+ce+M.length,pt=fn(M,Te);for(let ht=H;ht<Ce;ht++){let Ue=0;for(let bt=G;bt<et;bt++){if(pt[bt]){Ue++;continue}Q2(m,ht,bt,k)&&Fa(m,Qs(m[ht],bt),k,S.cell);const He=bt-G-Ue,Pt=Sa(b[ht-H],He),dn=Pt.element,_n=S.replace(dn);Tm(m[ht],bt,Be(_n,!0,Pt.isLocked))}}return m},xa=(l,m,b)=>{const S=hi(m[0]),k=er(m).cols.length+l.row,M=Ro(S-l.column,G=>G+l.column),H=Z(M,G=>Io(b,Q=>Q!==G)).getOr(S-1);return{row:k,column:H}},dc=(l,m,b)=>us(b,S=>S>=l.column&&S<=hi(m[0])+l.column),ex=(l,m,b,S,k)=>{const M=lr(m),H=xa(l,m,M),G=er(b).rows,Q=dc(H,G,M);return gh(H,m,G).map(Ce=>{const et={...Ce,colDelta:Ce.colDelta-Q.length},pt=bh(m,et,S),ht=lr(pt),Ue=dc(H,G,ht);return Fv(H,pt,G,S,k,Ue)})},Lv=(l,m,b,S,k)=>{aO(m,l,k,S.cell);const M=ph(b,m),H=bh(b,M,S),G=ph(m,H),Q=bh(m,G,S);return tn(Q,(ce,Ce)=>ni(ce,l,H[Ce].cells))},Yf=(l,m,b,S,k)=>{Fm(m,l,k,S.cell);const M=lr(m),H=hh(m,b),G={...H,colDelta:H.colDelta-M.length},Q=bh(m,G,S),{cols:ce,rows:Ce}=er(Q),et=lr(Q),pt=hh(b,m),ht={...pt,colDelta:pt.colDelta+et.length},Ue=J2(b,S,et),bt=bh(Ue,ht,S);return[...ce,...Ce.slice(0,l),...bt,...Ce.slice(l,Ce.length)]},iO=(l,m,b,S)=>Zg(l,k=>S(k,b),m),tx=(l,m,b,S,k)=>{const{rows:M,cols:H}=er(l),G=M.slice(0,m),Q=M.slice(m),ce=iO(M[b],(Ce,et)=>m>0&&m<M.length&&S(Qs(M[m-1],et),Qs(M[m],et))?Sa(M[m],et):Be(k(Ce.element,S),!0,Ce.isLocked),S,k);return[...H,...G,ce,...Q]},Ew=(l,m,b,S,k,M,H)=>{if(b==="colgroup"||!S){const G=Sa(l,k);return Be(H(G.element,M),!0,!1)}else return Sa(l,m)},Xi=(l,m,b,S,k)=>tn(l,M=>{const H=m>0&&m<hi(M)&&S(Qs(M,m-1),Qs(M,m)),G=Ew(M,m,M.section,H,b,S,k);return Pu(M,m,G)}),Hv=(l,m)=>Ns(l,b=>{const S=b.cells,k=Fr(m,(M,H)=>H>=0&&H<M.length?M.slice(0,H).concat(M.slice(H+1)):M,S);return k.length>0?[ot(b.element,k,b.section,b.isNew)]:[]}),Vs=(l,m,b)=>{const{rows:S,cols:k}=er(l);return[...k,...S.slice(0,m),...S.slice(b+1)]},nu=(l,m,b,S)=>Qs(l[m],b)!==void 0&&m>0&&S(Qs(l[m-1],b),Qs(l[m],b)),vh=(l,m,b)=>m>0&&b(Qs(l,m-1),Qs(l,m)),Lm=(l,m,b,S)=>nu(l,m,b,S)||vh(l[m],b,S),Xf=(l,m)=>Io(m,qe)&&Dv(l.cells)?Te:(S,k,M)=>!(Uo(S.element)==="th"&&m[M]),Jf=(l,m)=>Io(m,qe)&&Dv(l)?Te:(S,k,M)=>!(Uo(S.element)==="th"&&m[k]),Vd=(l,m,b,S)=>{const k=H=>H==="row"?cl(m):ya(m),M=H=>k(H)?`${H}group`:H;return l?ch(m)?M(b):null:S&&ch(m)?M(b==="row"?"col":"row"):null},nx=(l,m)=>(b,S,k)=>ue.some(Vd(l,b.element,"col",m[k])),Qf=(l,m)=>(b,S)=>ue.some(Vd(l,b.element,"row",m[S])),Hm=(l,m,b)=>Be(b(l.element,m),!0,l.isLocked),eg=(l,m,b,S,k,M,H)=>{const G=Q=>gt(m,ce=>b(Q.element,ce.element));return tn(l,(Q,ce)=>lv(Q,(Ce,et)=>{if(G(Ce)){const pt=H(Ce,ce,et)?k(Ce,b,S):Ce;return M(pt,ce,et).each(ht=>{wm(pt.element,{scope:ue.from(ht)})}),pt}else return Ce}))},ox=(l,m,b)=>Ns(l,(S,k)=>Lm(l,k,m,b)?[]:[Sa(S,m)]),cO=(l,m,b)=>{const S=l[m];return Ns(S.cells,(k,M)=>Lm(l,m,M,b)?[]:[k])},Tw=(l,m,b,S,k)=>{const M=er(l).rows,H=Ns(m,Ce=>ox(M,Ce,S)),G=tn(M,Ce=>Dv(Ce.cells)),Q=Jf(H,G),ce=Qf(b,G);return eg(l,H,S,k,Hm,ce,Q)},lO=(l,m,b,S,k,M,H)=>{const{cols:G,rows:Q}=er(l),ce=Q[m[0]],Ce=Ns(m,He=>cO(Q,He,k)),et=tn(ce.cells,(He,Pt)=>Dv(ox(Q,Pt,k))),pt=[...Q];Ge(m,He=>{pt[He]=H.transformRow(Q[He],b)});const ht=[...G,...pt],Ue=Xf(ce,et),bt=nx(S,et);return eg(ht,Ce,k,M,H.transformCell,bt,Ue)},zv=(l,m,b,S)=>{const k=er(l).rows,M=tn(m,H=>Sa(k[H.row],H.column));return eg(l,M,b,S,Hm,ue.none,Te)},Ji={generate:l=>{if(!J(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const m=[],b={};return Ge(l,(S,k)=>{const M=Zt(S);if(M.length!==1)throw new Error("one and only one name per case");const H=M[0],G=S[H];if(b[H]!==void 0)throw new Error("duplicate key detected:"+H);if(H==="cata")throw new Error("cannot have a case named cata (sorry)");if(!J(G))throw new Error("case arguments must be an array");m.push(H),b[H]=(...Q)=>{const ce=Q.length;if(ce!==G.length)throw new Error("Wrong number of arguments to case "+H+". Expected "+G.length+" ("+G+"), got "+ce);return{fold:(...et)=>{if(et.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+et.length);return et[k].apply(null,Q)},match:et=>{const pt=Zt(et);if(m.length!==pt.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+pt.join(","));if(!Io(m,Ue=>So(pt,Ue)))throw new Error("Not all branches were specified when using match. Specified: "+pt.join(", ")+`
Required: `+m.join(", "));return et[H].apply(null,Q)},log:et=>{console.log(et,{constructors:m,constructor:H,params:Q})}}}}),b}},yh={...Ji.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},rx=(l,m)=>l.length===0?yh.none():l.length===1?yh.only(0):m===0?yh.left(0,1):m===l.length-1?yh.right(m-1,m):m>0&&m<l.length-1?yh.middle(m-1,m,m+1):yh.none(),uO=(l,m,b,S,k)=>{const M=l.slice(0),H=rx(l,m),G=ee(tn(M,ee(0))),Q=pt=>S.singleColumnWidth(M[pt],b),ce=(pt,ht)=>k.calcLeftEdgeDeltas(M,pt,ht,b,S.minCellWidth(),S.isRelative),Ce=(pt,ht,Ue)=>k.calcMiddleDeltas(M,pt,ht,Ue,b,S.minCellWidth(),S.isRelative),et=(pt,ht)=>k.calcRightEdgeDeltas(M,pt,ht,b,S.minCellWidth(),S.isRelative);return H.fold(G,Q,ce,Ce,et)},x1=(l,m,b)=>{let S=0;for(let k=l;k<m;k++)S+=b[k]!==void 0?b[k]:0;return S},zm=(l,m)=>{const b=Nn.justCells(l);return tn(b,S=>{const k=x1(S.column,S.column+S.colspan,m);return{element:S.element,width:k,colspan:S.colspan}})},Vv=(l,m)=>{const b=Nn.justColumns(l);return tn(b,(S,k)=>({element:S.element,width:m[k],colspan:S.colspan}))},Un=(l,m)=>{const b=Nn.justCells(l);return tn(b,S=>{const k=x1(S.row,S.row+S.rowspan,m);return{element:S.element,height:k,rowspan:S.rowspan}})},Qi=(l,m)=>tn(l.all,(b,S)=>({element:b.element,height:m[S]})),ou=l=>Fr(l,(m,b)=>m+b,0),kw=(l,m)=>Nn.hasColumns(l)?Vv(l,m):zm(l,m),To=(l,m,b)=>{const S=kw(l,m);Ge(S,k=>{b.setElementWidth(k.element,k.width)})},E1=(l,m,b,S,k)=>{const M=Nn.fromTable(l),H=k.getCellDelta(m),G=k.getWidths(M,k),Q=b===M.grid.columns-1,ce=S.clampTableDelta(G,b,H,k.minCellWidth(),Q),Ce=uO(G,b,ce,k,S),et=tn(Ce,(pt,ht)=>pt+G[ht]);To(M,et,k),S.resizeTable(k.adjustTableWidth,ce,Q)},Ow=(l,m,b,S)=>{const k=Nn.fromTable(l),M=xe(k,l,S),H=tn(M,(Ce,et)=>b===et?Math.max(m+Ce,Lc()):Ce),G=Un(k,H),Q=Qi(k,H);Ge(Q,Ce=>{Am(Ce.element,Ce.height)}),Ge(G,Ce=>{Am(Ce.element,Ce.height)});const ce=ou(H);Am(l,ce)},wr=(l,m,b,S,k)=>{const M=Nn.generate(m),H=S.getWidths(M,S),G=S.pixelWidth(),{newSizes:Q,delta:ce}=k.calcRedestributedWidths(H,G,b.pixelDelta,S.isRelative);To(M,Q,S),S.adjustTableWidth(ce)},Ku=(l,m,b,S)=>{const k=Nn.generate(m),M=S.getWidths(k,S);To(k,M,S)},Vm=l=>Ke(l,(b,S)=>gt(b,M=>M.column===S.column)?b:b.concat([S]),[]).sort((b,S)=>b.column-S.column),Aw=ea("col"),Uv=ea("colgroup"),T1=l=>Uo(l)==="tr"||Uv(l),Dw=l=>{const m=ts(l,"colspan",1),b=ts(l,"rowspan",1);return{element:l,colspan:m,rowspan:b}},Wv=(l,m=Dw)=>{const b=G=>Aw(G.element)?l.col(G):l.cell(G),S=G=>Uv(G.element)?l.colgroup(G):l.row(G),k=G=>{if(T1(G))return S({element:G});{const Q=G,ce=b(m(Q));return M=ue.some({item:Q,replacement:ce}),ce}};let M=ue.none();return{getOrInit:(G,Q)=>M.fold(()=>k(G),ce=>Q(G,ce.item)?ce.replacement:k(G))}},Yu=l=>m=>{const b=[],S=(H,G)=>Z(b,Q=>G(Q.item,H)),k=H=>{const G=l==="td"?{scope:null}:{},Q=m.replace(H,l,G);return b.push({item:H,sub:Q}),Q};return{replaceOrInit:(H,G)=>{if(T1(H)||Aw(H))return H;{const Q=H;return S(Q,G).fold(()=>k(Q),ce=>G(H,ce.item)?ce.sub:k(Q))}}}},Ud=l=>Na(l,"scope").map(m=>m.substr(0,3)),Ae={modification:Wv,transform:Yu,merging:l=>({unmerge:S=>{const k=Ud(S);return k.each(M=>ks(S,"scope",M)),()=>{const M=l.cell({element:S,colspan:1,rowspan:1});return Li(M,"width"),Li(S,"width"),k.each(H=>ks(M,"scope",H)),M}},merge:S=>{const k=()=>{const M=ms(tn(S,Ud));if(M.length===0)return ue.none();{const H=M[0],G=["row","col"];return gt(M,ce=>ce!==H&&So(G,ce))?ue.none():ue.from(H)}};return Li(S[0],"width"),k().fold(()=>vs(S[0],"scope"),M=>ks(S[0],"scope",M+"group")),ee(S[0])}})},_1=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],wh=(l,m)=>{const b=l.property().name(m);return So(["ol","ul"],b)},mc=(l,m)=>{const b=l.property().name(m);return So(_1,b)},Rw=(l,m)=>So(["br","img","hr","input"],l.property().name(m)),rs=Ve(),Zv=l=>mc(rs,l),Wd=l=>wh(rs,l),Mw=l=>Rw(rs,l),jv=l=>{const m=ea("br"),b=Q=>Io(Q,ce=>m(ce)||rl(ce)&&ia(ce).trim().length===0),S=Q=>Uo(Q)==="li"||Ds(Q,Wd).isSome(),k=Q=>ku(Q).map(ce=>Zv(ce)?!0:Mw(ce)?Uo(ce)!=="img":!1).getOr(!1),M=Q=>Nd(Q).bind(ce=>{const Ce=k(ce);return Xa(ce).map(et=>Ce===!0||S(et)||m(ce)||Zv(et)&&!Lo(Q,et)?[]:[we.fromTag("br")])}).getOr([]),G=(()=>{const Q=Ns(l,ce=>{const Ce=po(ce);return b(Ce)?[]:Ce.concat(M(ce))});return Q.length===0?[we.fromTag("br")]:Q})();Pa(l[0]),Lr(l[0],G)},Nw=l=>Nm(l,!0),k1=l=>{ll(l).length===0&&ar(l)},Ch=(l,m)=>({grid:l,cursor:m}),Pw=l=>sr(l,m=>sr(m.cells,b=>{const S=b.element;return Gp(Nw(S),S)})),mO=(l,m,b)=>{var S,k;const M=er(l).rows;return ue.from((k=(S=M[m])===null||S===void 0?void 0:S.cells[b])===null||k===void 0?void 0:k.element).filter(Nw).orThunk(()=>Pw(M))},si=(l,m,b)=>{const S=mO(l,m,b);return Ch(l,S)},Cr=l=>Ke(l,(b,S)=>gt(b,M=>M.row===S.row)?b:b.concat([S]),[]).sort((b,S)=>b.row-S.row),ua=(l,m,b,S)=>{const k=m[0].row,M=Cr(m),H=Fr(M,(G,Q)=>({grid:tx(G.grid,k,Q.row+G.delta,b,S.getOrInit),delta:G.delta+1}),{grid:l,delta:0}).grid;return si(H,k,m[0].column)},ri=(l,m,b,S)=>{const k=Cr(m),M=k[k.length-1],H=M.row+M.rowspan,G=Fr(k,(Q,ce)=>tx(Q,H,ce.row,b,S.getOrInit),l);return si(G,H,m[0].column)},Ea=(l,m,b,S)=>{const k=m.details,M=Vm(k),H=M[0].column,G=Fr(M,(Q,ce)=>({grid:Xi(Q.grid,H,ce.column+Q.delta,b,S.getOrInit),delta:Q.delta+1}),{grid:l,delta:0}).grid;return si(G,k[0].row,H)},La=(l,m,b,S)=>{const k=m.details,M=k[k.length-1],H=M.column+M.colspan,G=Vm(k),Q=Fr(G,(ce,Ce)=>Xi(ce,H,Ce.column,b,S.getOrInit),l);return si(Q,k[0].row,H)},Sr=(l,m,b,S)=>{const k=Vm(m),M=tn(k,G=>G.column),H=Tw(l,M,!0,b,S.replaceOrInit);return si(H,m[0].row,m[0].column)},Bw=(l,m,b,S)=>{const k=zv(l,m,b,S.replaceOrInit);return si(k,m[0].row,m[0].column)},O1=(l,m,b,S)=>{const k=Vm(m),M=tn(k,G=>G.column),H=Tw(l,M,!1,b,S.replaceOrInit);return si(H,m[0].row,m[0].column)},$w=(l,m,b,S)=>{const k=zv(l,m,b,S.replaceOrInit);return si(k,m[0].row,m[0].column)},A1=(l,m)=>(b,S,k,M,H)=>{const G=Cr(S),Q=tn(G,Ce=>Ce.row),ce=lO(b,Q,l,m,k,M.replaceOrInit,H);return si(ce,S[0].row,S[0].column)},Iw=A1("thead",!0),ax=A1("tbody",!1),Gv=A1("tfoot",!1),Fw=(l,m,b,S)=>{const k=Vm(m.details),M=Hv(l,tn(k,G=>G.column)),H=M.length>0?M[0].cells.length-1:0;return si(M,k[0].row,Math.min(k[0].column,H))},fO=(l,m,b,S)=>{const k=Cr(m),M=Vs(l,k[0].row,k[k.length-1].row),H=M.length>0?M.length-1:0;return si(M,Math.min(m[0].row,H),m[0].column)},gO=(l,m,b,S)=>{const k=m.cells;jv(k);const M=yl(l,m.bounds,b,S.merge(k));return Ch(M,ue.from(k[0]))},ix=(l,m,b,S)=>{const M=Fr(m,(H,G)=>Fa(H,G,b,S.unmerge(G)),l);return Ch(M,ue.from(m[0]))},hO=(l,m,b,S)=>{const M=((Q,ce)=>{const Ce=Nn.fromTable(Q);return dh(Ce,ce,!0)})(m.clipboard,m.generators),H=Ef(m.row,m.column);return ex(H,l,M,m.generators,b).fold(()=>Ch(l,ue.some(m.element)),Q=>si(Q,m.row,m.column))},Sh=(l,m,b)=>{const S=zy(l,b.section),k=Nn.generate(S);return dh(k,m,!0)},qv=(l,m,b,S)=>{const k=er(l).rows,M=m.cells[0].column,H=k[m.cells[0].row],G=Sh(m.clipboard,m.generators,H),Q=Lv(M,l,G,m.generators,b);return si(Q,m.cells[0].row,m.cells[0].column)},cx=(l,m,b,S)=>{const k=er(l).rows,M=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,H=k[m.cells[0].row],G=Sh(m.clipboard,m.generators,H),Q=Lv(M,l,G,m.generators,b);return si(Q,m.cells[0].row,m.cells[0].column)},jM=(l,m,b,S)=>{const k=er(l).rows,M=m.cells[0].row,H=k[M],G=Sh(m.clipboard,m.generators,H),Q=Yf(M,l,G,m.generators,b);return si(Q,m.cells[0].row,m.cells[0].column)},yi=(l,m,b,S)=>{const k=er(l).rows,M=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,H=k[m.cells[0].row],G=Sh(m.clipboard,m.generators,H),Q=Yf(M,l,G,m.generators,b);return si(Q,m.cells[0].row,m.cells[0].column)},GM=(l,m)=>{const b=Nn.fromTable(l);return Im(b,m).bind(k=>{const M=k[k.length-1],H=k[0].column,G=M.column+M.colspan,Q=ko(tn(b.all,ce=>us(ce.cells,Ce=>Ce.column>=H&&Ce.column<G)));return lh(Q)}).getOr("")},su=(l,m)=>{const b=Nn.fromTable(l);return Im(b,m).bind(lh).getOr("")},lt=(l,m)=>{const b=Nn.fromTable(l);return Im(b,m).bind(k=>{const M=k[k.length-1],H=k[0].row,G=M.row+M.rowspan,Q=b.all.slice(H,G);return nO(Q)}).getOr("")},Lw=(l,m,b,S)=>Ku(l,m,b,S.sizing),xr=(l,m,b,S)=>wr(l,m,b,S.sizing,S.resize),lx=(l,m)=>gt(m,b=>b.column===0&&b.isLocked),Kv=(l,m)=>gt(m,b=>b.column+b.colspan>=l.grid.columns&&b.isLocked),Hw=(l,m)=>{const b=km(l),S=Vm(m);return Ke(S,(k,M)=>{const G=b[M.column].map(hl).getOr(0);return k+G},0)},wi=l=>(m,b)=>Im(m,b).filter(S=>!(l?lx:Kv)(m,S)).map(S=>({details:S,pixelDelta:Hw(m,S)})),pO=(l,m)=>zd(l,m).map(b=>({details:b,pixelDelta:-Hw(l,b)})),ux=l=>(m,b)=>mh(m,b).filter(S=>!(l?lx:Kv)(m,S.cells)),Ci=Ae.transform("th"),xh=Ae.transform("td"),D1=la(ua,Im,Ye,Ye,Ae.modification),Xu=la(ri,Im,Ye,Ye,Ae.modification),wl=la(Ea,wi(!0),xr,Ye,Ae.modification),_t=la(La,wi(!1),xr,Ye,Ae.modification),fc=la(Fw,pO,xr,k1,Ae.modification),dx=la(fO,Im,Ye,k1,Ae.modification),mx=la(Sr,zd,Ye,Ye,Ci),zw=la(O1,zd,Ye,Ye,xh),fx=la(Iw,zd,Ye,Ye,Ci),Vw=la(ax,zd,Ye,Ye,xh),Uw=la(Gv,zd,Ye,Ye,xh),bO=la(Bw,zd,Ye,Ye,Ci),Ww=la($w,zd,Ye,Ye,xh),vO=la(gO,WM,Lw,Ye,Ae.merging),Ha=la(ix,ZM,Lw,Ye,Ae.merging),R1=la(hO,C1,Lw,Ye,Ae.modification),yO=la(qv,ux(!0),Ye,Ye,Ae.modification),wO=la(cx,ux(!1),Ye,Ye,Ae.modification),Zw=la(jM,mh,Ye,Ye,Ae.modification),CO=la(yi,mh,Ye,Ye,Ae.modification),gx=GM,hx=su,M1=lt,px=(l,m)=>l.dispatch("NewRow",{node:m}),jw=(l,m)=>l.dispatch("NewCell",{node:m}),tg=(l,m,b)=>{l.dispatch("TableModified",{...b,table:m})},SO=(l,m,b,S,k)=>{l.dispatch("TableSelectionChange",{cells:m,start:b,finish:S,otherCells:k})},xO=l=>{l.dispatch("TableSelectionClear")},Gw=(l,m,b,S,k)=>{l.dispatch("ObjectResizeStart",{target:m,width:b,height:S,origin:k})},EO=(l,m,b,S,k)=>{l.dispatch("ObjectResized",{target:m,width:b,height:S,origin:k})},Zd={structure:!1,style:!0},Dn={structure:!0,style:!1},qw={structure:!0,style:!0},za=(l,m)=>Jl(l)?bi.percentageSize(m):Mm(l)?bi.pixelSize(m):bi.getTableSize(m),Yv=(l,m,b)=>{const S=ii=>Uo(yv(ii))==="table",k=ii=>!S(l)||ih(ii).rows>1,M=ii=>!S(l)||ih(ii).columns>1,H=Bd(l),G=Hs(l)?Ye:yw,Q=ii=>{switch(Vf(l)){case"section":return $m.section();case"sectionCells":return $m.sectionCells();case"cells":return $m.cells();default:return $m.getTableSectionType(ii,"section")}},ce=(ii,UC)=>UC.cursor.fold(()=>{const ub=ll(ii);return Ie(ub).filter(As).map(od=>{b.clearSelectedCells(ii.dom);const Oa=l.dom.createRng();return Oa.selectNode(od.dom),l.selection.setRng(Oa),ks(od,"data-mce-selected","1"),Oa})},ub=>{const od=Z2(ub),Oa=l.dom.createRng();return Oa.setStart(od.element.dom,od.offset),Oa.setEnd(od.element.dom,od.offset),l.selection.setRng(Oa),b.clearSelectedCells(ii.dom),ue.some(Oa)}),Ce=(ii,UC,ub,od)=>(Oa,db,gE=!1)=>{eu(Oa);const hE=we.fromDom(l.getDoc()),Xh=Xg(ub,hE,H),pE={sizing:za(l,Oa),resize:Hs(l)?j2():ww(),section:Q(Oa)};return UC(Oa)?ii(Oa,db,Xh,pE).bind(D0=>{m.refresh(Oa.dom),Ge(D0.newRows,mg=>{px(l,mg.dom)}),Ge(D0.newCells,mg=>{jw(l,mg.dom)});const bE=ce(Oa,D0);return As(Oa)&&(eu(Oa),gE||tg(l,Oa.dom,od)),bE.map(mg=>({rng:mg,effect:od}))}):ue.none()},et=Ce(dx,k,Ye,Dn),pt=Ce(fc,M,Ye,Dn),ht=Ce(D1,Te,Ye,Dn),Ue=Ce(Xu,Te,Ye,Dn),bt=Ce(wl,Te,G,Dn),He=Ce(_t,Te,G,Dn),Pt=Ce(vO,Te,Ye,Dn),dn=Ce(Ha,Te,Ye,Dn),_n=Ce(yO,Te,Ye,Dn),os=Ce(wO,Te,Ye,Dn),Tr=Ce(Zw,Te,Ye,Dn),Is=Ce(CO,Te,Ye,Dn),Ei=Ce(R1,Te,Ye,qw),ug=Ce(bO,Te,Ye,Dn),dg=Ce(Ww,Te,Ye,Dn),VC=Ce(mx,Te,Ye,Dn),A0=Ce(zw,Te,Ye,Dn),Ao=Ce(fx,Te,Ye,Dn),Ua=Ce(Vw,Te,Ye,Dn),ma=Ce(Uw,Te,Ye,Dn);return{deleteRow:et,deleteColumn:pt,insertRowsBefore:ht,insertRowsAfter:Ue,insertColumnsBefore:bt,insertColumnsAfter:He,mergeCells:Pt,unmergeCells:dn,pasteColsBefore:_n,pasteColsAfter:os,pasteRowsBefore:Tr,pasteRowsAfter:Is,pasteCells:Ei,makeCellsHeader:ug,unmakeCellsHeader:dg,makeColumnsHeader:VC,unmakeColumnsHeader:A0,makeRowsHeader:Ao,makeRowsBody:Ua,makeRowsFooter:ma,getTableRowType:M1,getTableCellType:hx,getTableColType:gx}},Kw=(l,m,b)=>{const S=ts(l,m,1);b===1||S<=1?vs(l,m):ks(l,m,Math.min(b,S))},Yw=(l,m)=>b=>{const S=b.column+b.colspan-1,k=b.column;return S>=l&&k<m},Xv=(l,m,b)=>{if(Nn.hasColumns(l)){const S=us(Nn.justColumns(l),Yw(m,b)),k=tn(S,H=>{const G=Bc(H.element);return Kw(G,"span",b-m),G}),M=we.fromTag("colgroup");return Lr(M,k),[M]}else return[]},bx=(l,m,b)=>tn(l.all,S=>{const k=us(S.cells,Yw(m,b)),M=tn(k,G=>{const Q=Bc(G.element);return Kw(Q,"colspan",b-m),Q}),H=we.fromTag("tr");return Lr(H,M),H}),TO=(l,m)=>{const b=Nn.fromTable(l);return zd(b,m).map(k=>{const M=k[k.length-1],H=k[0].column,G=M.column+M.colspan,Q=Xv(b,H,G),ce=bx(b,H,G);return[...Q,...ce]})},_O=(l,m,b)=>{const S=Nn.fromTable(l);return Im(S,m).bind(M=>{const H=dh(S,b,!1),Q=er(H).rows.slice(M[0].row,M[M.length-1].row+M[M.length-1].rowspan),ce=Ns(Q,et=>{const pt=us(et.cells,ht=>!ht.isLocked);return pt.length>0?[{...et,cells:pt}]:[]}),Ce=Ss(ce);return Gp(Ce.length>0,Ce)}).map(M=>q2(M))},Eh=Ji.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),vx=(l,m,b)=>{const S=b.substring(0,b.length-l.length),k=parseFloat(S);return S===k.toString()?m(k):Eh.invalid(b)},Um={...Eh,from:l=>Ou(l,"%")?vx("%",Eh.percent,l):Ou(l,"px")?vx("px",Eh.pixels,l):Eh.invalid(l)},kO=(l,m)=>tn(l,b=>Um.from(b).fold(()=>b,k=>k/m*100+"%",k=>k+"%")),Th=(l,m,b)=>{const S=b/m;return tn(l,k=>Um.from(k).fold(()=>k,H=>H*S+"px",H=>H/100*b+"px"))},OO=(l,m)=>{const b=l.fold(()=>ee(""),S=>{const k=S/m;return ee(k+"px")},()=>{const S=100/m;return ee(S+"%")});return Ro(m,b)},Xw=(l,m,b)=>l.fold(()=>m,S=>Th(m,b,S),S=>kO(m,b)),yx=(l,m,b)=>{const S=Um.from(b),k=Io(l,M=>M==="0px")?OO(S,l.length):Xw(S,l,m);return Cx(k)},ng=(l,m)=>l.length===0?m:Fr(l,(b,S)=>Um.from(S).fold(ee(0),qe,qe)+b,0),AO=(l,m)=>{const b=Math.floor(l);return{value:b+m,remainder:l-b}},wx=(l,m)=>Um.from(l).fold(ee(l),b=>b+m+"px",b=>b+m+"%"),Cx=l=>{if(l.length===0)return l;const m=Fr(l,(S,k)=>{const M=Um.from(k).fold(()=>({value:k,remainder:0}),H=>AO(H,"px"),H=>({value:H+"%",remainder:0}));return{output:[M.value].concat(S.output),remainder:S.remainder+M.remainder}},{output:[],remainder:0}),b=m.output;return b.slice(0,b.length-1).concat([wx(b[b.length-1],Math.round(m.remainder))])},_h=Um.from,Sx=(l,m,b)=>{Ge(m,S=>{const k=l.slice(S.column,S.colspan+S.column),M=ng(k,Bs());fs(S.element,"width",M+b)})},Jw=(l,m,b)=>{Ge(m,(S,k)=>{const M=ng([l[k]],Bs());fs(S.element,"width",M+b)})},DO=(l,m,b,S)=>{Ge(b,k=>{const M=l.slice(k.row,k.rowspan+k.row),H=ng(M,Lc());fs(k.element,"height",H+S)}),Ge(m,(k,M)=>{fs(k.element,"height",l[M])})},xx=l=>_h(l).fold(ee("px"),ee("px"),ee("%")),Ju=(l,m,b)=>{const S=Nn.fromTable(l),k=S.all,M=Nn.justCells(S),H=Nn.justColumns(S);m.each(G=>{const Q=xx(G),ce=gi(l),Ce=If(S,l),et=yx(Ce,ce,G);Nn.hasColumns(S)?Jw(et,H,Q):Sx(et,M,Q),fs(l,"width",G)}),b.each(G=>{const Q=xx(G),ce=r1(l),Ce=Ui(S,l,Mt),et=yx(Ce,ce,G);DO(et,k,M,Q),fs(l,"height",G)})},N1=Kl,P1=Hk,Jv=Yl,B1=l=>{vs(l,"width")},Zc=l=>{const m=so(l);Ju(l,ue.some(m),ue.none()),B1(l)},kh=l=>{const m=l1(l);Ju(l,ue.some(m),ue.none()),B1(l)},$1=l=>{Li(l,"width");const m=zg(l),b=m.length>0?m:ll(l);Ge(b,S=>{Li(S,"width"),B1(S)}),B1(l)},Wm={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Qv=()=>we.fromTag("th"),RO=()=>we.fromTag("td"),MO=()=>we.fromTag("col"),Ex=(l,m,b,S)=>{const k=we.fromTag("tr");for(let M=0;M<l;M++){const H=S<m||M<b?Qv():RO();M<b&&ks(H,"scope","row"),S<m&&ks(H,"scope","col"),Qo(H,we.fromTag("br")),Qo(k,H)}return k},NO=l=>{const m=we.fromTag("colgroup");return Ro(l,()=>Qo(m,MO())),m},Qw=(l,m,b,S)=>Ro(l,k=>Ex(m,b,S,k)),PO=(l,m,b,S,k,M=Wm)=>{const H=we.fromTag("table"),G=k!=="cells";zr(H,M.styles),Ii(H,M.attributes),M.colGroups&&Qo(H,NO(m));const Q=Math.min(l,b);if(G&&b>0){const ht=we.fromTag("thead");Qo(H,ht);const bt=Qw(b,m,k==="sectionCells"?Q:0,S);Lr(ht,bt)}const ce=we.fromTag("tbody");Qo(H,ce);const Ce=G?l-Q:l,pt=Qw(Ce,m,G?0:b,S);return Lr(ce,pt),H},BO=l=>l.dom.innerHTML,Tx=l=>{const m=we.fromTag("div"),b=we.fromDom(l.dom.cloneNode(!0));return Qo(m,b),BO(m)},$O=(l,m)=>{l.selection.select(m.dom,!0),l.selection.collapse(!0)},_x=(l,m)=>{mi(m,"td,th").each(At($O,l))},IO=(l,m)=>{Ge(ei(m,"tr"),b=>{px(l,b.dom),Ge(ei(b,"th,td"),S=>{jw(l,S.dom)})})},e0=l=>P(l)&&l.indexOf("%")!==-1,FO=(l,m,b,S,k)=>{const M=iw(l),H={styles:M,attributes:Ql(l),colGroups:d1(l)};return l.undoManager.ignore(()=>{const G=PO(b,m,k,S,Vf(l),H);ks(G,"data-mce-id","__mce");const Q=Tx(G);l.insertContent(Q),l.addVisual()}),mi(yv(l),'table[data-mce-id="__mce"]').map(G=>(Mm(l)?kh(G):Uf(l)?$1(G):(Jl(l)||e0(M.width))&&Zc(G),eu(G),vs(G,"data-mce-id"),IO(l,G),_x(l,G),G.dom)).getOrNull()},kx=(l,m,b,S={})=>{const k=M=>Je(M)&&M>0;if(k(m)&&k(b)){const M=S.headerRows||0,H=S.headerColumns||0;return FO(l,b,m,H,M)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var Oh=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const eC="x-tinymce/dom-table-",tC=eC+"rows",nC=eC+"columns",Ox=l=>{const m=Oh.FakeClipboardItem(l);Oh.write([m])},oC=l=>{var m;const b=(m=Oh.read())!==null&&m!==void 0?m:[];return sr(b,S=>ue.from(S.getType(l)))},LO=l=>{oC(l).isSome()&&Oh.clear()},t0=l=>{l.fold(HO,m=>Ox({[tC]:m}))},n0=()=>oC(tC),HO=()=>LO(tC),sC=l=>{l.fold(zO,m=>Ox({[nC]:m}))},Ax=()=>oC(nC),zO=()=>LO(nC),rC=l=>tu(lc(l),Vu(l)).filter(Cv),VO=l=>y1(lc(l),Vu(l)).filter(Cv),Ah=(l,m)=>{const b=Vu(l),S=()=>rC(l).each(He=>{ti(He,b).filter(ae(b)).each(Pt=>{const dn=we.fromText("");if(ui(Pt,dn),ar(Pt),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const _n=l.dom.createRng();_n.setStart(dn.dom,0),_n.setEnd(dn.dom,0),l.selection.setRng(_n),l.nodeChanged()}})}),k=He=>rC(l).each(Pt=>{Uf(l)||Mm(l)||Jl(l)||ti(Pt,b).each(_n=>{He==="relative"&&!N1(_n)?Zc(_n):He==="fixed"&&!P1(_n)?kh(_n):He==="responsive"&&!Jv(_n)&&$1(_n),eu(_n),tg(l,_n.dom,Dn)})}),M=He=>ti(He,b),H=He=>VO(l).bind(Pt=>M(Pt).map(dn=>He(dn,Pt))),G=(He,Pt)=>{H(dn=>{l.formatter.toggle("tableclass",{value:Pt},dn.dom),tg(l,dn.dom,Zd)})},Q=(He,Pt)=>{H(dn=>{const _n=Wc(l),Tr=Io(_n,Is=>l.formatter.match("tablecellclass",{value:Pt},Is.dom))?l.formatter.remove:l.formatter.apply;Ge(_n,Is=>Tr("tablecellclass",{value:Pt},Is.dom)),tg(l,dn.dom,Zd)})},ce=()=>{rC(l).each(He=>{ti(He,b).each(Pt=>{eo(Pt,"caption").fold(()=>{const dn=we.fromTag("caption");Qo(dn,we.fromText("Caption")),va(Pt,dn,0),l.selection.setCursorLocation(dn.dom,0)},dn=>{ea("caption")(He)&&Sd("td",Pt).each(_n=>l.selection.setCursorLocation(_n.dom,0)),ar(dn)}),tg(l,Pt.dom,Dn)})})},Ce=He=>{l.focus()},et=(He,Pt=!1)=>H((dn,_n)=>{const os=nh(Wc(l),dn,_n);He(dn,os,Pt).each(Ce)}),pt=()=>H((He,Pt)=>{const dn=nh(Wc(l),He,Pt),_n=Xg(Ye,we.fromDom(l.getDoc()),ue.none());return _O(He,dn,_n)}),ht=()=>H((He,Pt)=>{const dn=nh(Wc(l),He,Pt);return TO(He,dn)}),Ue=(He,Pt)=>Pt().each(dn=>{const _n=tn(dn,os=>Bc(os));H((os,Tr)=>{const Is=Jg(we.fromDom(l.getDoc())),Ei=oh(Wc(l),Tr,_n,Is);He(os,Ei).each(Ce)})}),bt=He=>(Pt,dn)=>wd(dn,"type").each(_n=>{et(He(_n),dn.no_events)});ss({mceTableSplitCells:()=>et(m.unmergeCells),mceTableMergeCells:()=>et(m.mergeCells),mceTableInsertRowBefore:()=>et(m.insertRowsBefore),mceTableInsertRowAfter:()=>et(m.insertRowsAfter),mceTableInsertColBefore:()=>et(m.insertColumnsBefore),mceTableInsertColAfter:()=>et(m.insertColumnsAfter),mceTableDeleteCol:()=>et(m.deleteColumn),mceTableDeleteRow:()=>et(m.deleteRow),mceTableCutCol:()=>ht().each(He=>{sC(He),et(m.deleteColumn)}),mceTableCutRow:()=>pt().each(He=>{t0(He),et(m.deleteRow)}),mceTableCopyCol:()=>ht().each(He=>sC(He)),mceTableCopyRow:()=>pt().each(He=>t0(He)),mceTablePasteColBefore:()=>Ue(m.pasteColsBefore,Ax),mceTablePasteColAfter:()=>Ue(m.pasteColsAfter,Ax),mceTablePasteRowBefore:()=>Ue(m.pasteRowsBefore,n0),mceTablePasteRowAfter:()=>Ue(m.pasteRowsAfter,n0),mceTableDelete:S,mceTableCellToggleClass:Q,mceTableToggleClass:G,mceTableToggleCaption:ce,mceTableSizingMode:(He,Pt)=>k(Pt),mceTableCellType:bt(He=>He==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:bt(He=>He==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:bt(He=>{switch(He){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(He,Pt)=>l.addCommand(Pt,He)),l.addCommand("mceInsertTable",(He,Pt)=>{kx(l,Pt.rows,Pt.columns,Pt.options)}),l.addCommand("mceTableApplyCellStyle",(He,Pt)=>{const dn=Tr=>"tablecell"+Tr.toLowerCase().replace("-","");if(!W(Pt))return;const _n=us(Wc(l),Cv);if(_n.length===0)return;const os=Ka(Pt,(Tr,Is)=>l.formatter.has(dn(Is))&&P(Tr));ol(os)||(ss(os,(Tr,Is)=>{const Ei=dn(Is);Ge(_n,ug=>{Tr===""?l.formatter.remove(Ei,{value:null},ug.dom,!0):l.formatter.apply(Ei,{value:Tr},ug.dom)})}),M(_n[0]).each(Tr=>tg(l,Tr.dom,Zd)))})},UO=(l,m)=>{const b=Vu(l),S=k=>y1(lc(l)).bind(M=>ti(M,b).map(H=>{const G=nh(Wc(l),H,M);return k(H,G)})).getOr("");ss({mceTableRowType:()=>S(m.getTableRowType),mceTableCellType:()=>S(m.getTableCellType),mceTableColType:()=>S(m.getTableColType)},(k,M)=>l.addQueryValueHandler(M,k))},aC=Ji.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),WO=(l,m,b,S)=>l.fold(m,b,S),ZO=l=>l.fold(qe,qe,qe),jO=aC.before,Dx=aC.on,GO=aC.after,qr={before:jO,on:Dx,after:GO,cata:WO,getStart:ZO},Dh={create:(l,m)=>({selection:l,kill:m})},o0=(l,m)=>{const b=l.document.createRange();return b.selectNode(m.dom),b},Rx=(l,m)=>{const b=l.document.createRange();return iC(b,m),b},iC=(l,m)=>l.selectNodeContents(m.dom),Mx=(l,m)=>{m.fold(b=>{l.setStartBefore(b.dom)},(b,S)=>{l.setStart(b.dom,S)},b=>{l.setStartAfter(b.dom)})},Nx=(l,m)=>{m.fold(b=>{l.setEndBefore(b.dom)},(b,S)=>{l.setEnd(b.dom,S)},b=>{l.setEndAfter(b.dom)})},og=(l,m,b)=>{const S=l.document.createRange();return Mx(S,m),Nx(S,b),S},I1=(l,m,b,S,k)=>{const M=l.document.createRange();return M.setStart(m.dom,b),M.setEnd(S.dom,k),M},qO=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),KO=l=>{const m=l.getClientRects(),b=m.length>0?m[0]:l.getBoundingClientRect();return b.width>0||b.height>0?ue.some(b).map(qO):ue.none()},F1=Ji.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),cC=(l,m,b)=>m(we.fromDom(b.startContainer),b.startOffset,we.fromDom(b.endContainer),b.endOffset),Px=(l,m)=>m.match({domRange:b=>({ltr:ee(b),rtl:ue.none}),relative:(b,S)=>({ltr:kd(()=>og(l,b,S)),rtl:kd(()=>ue.some(og(l,S,b)))}),exact:(b,S,k,M)=>({ltr:kd(()=>I1(l,b,S,k,M)),rtl:kd(()=>ue.some(I1(l,k,M,b,S)))})}),Er=(l,m)=>{const b=m.ltr();return b.collapsed?m.rtl().filter(k=>k.collapsed===!1).map(k=>F1.rtl(we.fromDom(k.endContainer),k.endOffset,we.fromDom(k.startContainer),k.startOffset)).getOrThunk(()=>cC(l,F1.ltr,b)):cC(l,F1.ltr,b)},Bx=(l,m)=>{const b=Px(l,m);return Er(l,b)},lC=(l,m)=>Bx(l,m).match({ltr:(S,k,M,H)=>{const G=l.document.createRange();return G.setStart(S.dom,k),G.setEnd(M.dom,H),G},rtl:(S,k,M,H)=>{const G=l.document.createRange();return G.setStart(M.dom,H),G.setEnd(S.dom,k),G}});F1.ltr,F1.rtl;const Rh={create:(l,m,b,S)=>({start:l,soffset:m,finish:b,foffset:S})},$x={create:(l,m,b,S)=>({start:qr.on(l,m),finish:qr.on(b,S)})},uC=(l,m)=>{const b=lC(l,m);return Rh.create(we.fromDom(b.startContainer),b.startOffset,we.fromDom(b.endContainer),b.endOffset)},L1=$x.create,s0=(l,m,b,S,k,M,H)=>Lo(b,k)&&S===M?ue.none():vr(b,"td,th",m).bind(G=>vr(k,"td,th",m).bind(Q=>Mh(l,m,G,Q,H))),Mh=(l,m,b,S,k)=>Lo(b,S)?ue.none():bl(b,S,m).bind(M=>{const H=M.boxes.getOr([]);return H.length>1?(k(l,H,M.start,M.finish),ue.some(Dh.create(ue.some(L1(b,0,b,Hu(b))),!0))):ue.none()}),XO=(l,m,b,S,k)=>{const M=H=>(k.clearBeforeUpdate(b),k.selectRange(b,H.boxes,H.start,H.finish),H.boxes);return Tv(S,l,m,k.firstSelectedSelector,k.lastSelectedSelector).map(M)},Zm=(l,m)=>({item:l,mode:m}),Ix=(l,m,b,S=jm)=>l.property().parent(m).map(k=>Zm(k,S)),jm=(l,m,b,S=Gm)=>b.sibling(l,m).map(k=>Zm(k,S)),Gm=(l,m,b,S=Gm)=>{const k=l.property().children(m);return b.first(k).map(H=>Zm(H,S))},dC=[{current:Ix,next:jm,fallback:ue.none()},{current:jm,next:Gm,fallback:ue.some(Ix)},{current:Gm,next:Gm,fallback:ue.some(jm)}],Fx=(l,m,b,S,k=dC)=>Z(k,H=>H.current===b).bind(H=>H.current(l,m,S,H.next).orThunk(()=>H.fallback.bind(G=>Fx(l,m,G,S)))),qm={left:()=>({sibling:(b,S)=>b.query().prevSibling(S),first:b=>b.length>0?ue.some(b[b.length-1]):ue.none()}),right:()=>({sibling:(b,S)=>b.query().nextSibling(S),first:b=>b.length>0?ue.some(b[0]):ue.none()})},Qu=(l,m,b,S,k,M)=>Fx(l,m,S,k).bind(G=>M(G.item)?ue.none():b(G.item)?ue.some(G.item):Qu(l,G.item,b,G.mode,k,M)),H1=(l,m,b,S)=>Qu(l,m,b,jm,qm.left(),S),Nh=(l,m,b,S)=>Qu(l,m,b,jm,qm.right(),S),fC=l=>m=>l.property().children(m).length===0,jd=(l,m,b)=>z1(l,m,fC(l),b),ru=(l,m,b)=>r0(l,m,fC(l),b),z1=H1,r0=Nh,V1=Ve(),gC=(l,m)=>jd(V1,l,m),Ph=(l,m)=>ru(V1,l,m),U1=(l,m,b)=>z1(V1,l,m,b),hC=(l,m,b)=>r0(V1,l,m,b),Lx=(l,m,b)=>Ds(l,m,b).isSome(),Km=Ji.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),a0=(l,m,b)=>{const S=l.getRect(m),k=l.getRect(b);return k.right>S.left&&k.left<S.right},JO=l=>vr(l,"tr"),Us={...Km,verify:(l,m,b,S,k,M,H)=>vr(S,"td,th",H).bind(G=>vr(m,"td,th",H).map(Q=>Lo(G,Q)?Lo(S,G)&&Hu(G)===k?M(Q):Km.none("in same cell"):No(JO,[G,Q]).fold(()=>a0(l,Q,G)?Km.success():M(Q),ce=>M(Q)))).getOr(Km.none("default")),cata:(l,m,b,S,k)=>l.fold(m,b,S,k)},JM=(l,m,b,S)=>({parent:l,children:m,element:b,index:S}),Gd=l=>Xa(l).bind(m=>{const b=po(m);return zx(b,l).map(S=>JM(m,b,l,S))}),zx=(l,m)=>Dc(l,At(Lo,m)),i0=ea("br"),Ym=(l,m,b)=>m(l,b).bind(S=>rl(S)&&ia(S).trim().length===0?Ym(S,m,b):ue.some(S)),Ta=(l,m,b)=>b.traverse(m).orThunk(()=>Ym(m,b.gather,l)).map(b.relative),Bh=(l,m)=>na(l,m).filter(i0).orThunk(()=>na(l,m-1).filter(i0)),W1=(l,m,b,S)=>Bh(m,b).bind(k=>S.traverse(k).fold(()=>Ym(k,S.gather,l).map(S.relative),M=>Gd(M).map(H=>qr.on(H.parent,H.index)))),$h=(l,m,b,S)=>(i0(m)?Ta(l,m,S):W1(l,m,b,S)).map(M=>({start:M,finish:M})),bC=l=>Us.cata(l,m=>ue.none(),()=>ue.none(),m=>ue.some(rh(m,0)),m=>ue.some(rh(m,Hu(m)))),Ih=(l,m)=>({left:l.left,top:l.top+m,right:l.right,bottom:l.bottom+m}),sg=(l,m)=>({left:l.left,top:l.top-m,right:l.right,bottom:l.bottom-m}),au=(l,m,b)=>({left:l.left+m,top:l.top+b,right:l.right+m,bottom:l.bottom+b}),QO=l=>l.top,eA=l=>l.bottom,Xm=(l,m,b)=>b>=0&&b<Hu(m)?l.getRangedRect(m,b,m,b+1):b>0?l.getRangedRect(m,b-1,m,b):ue.none(),Fh=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),c0=(l,m)=>ue.some(l.getRect(m)),ed=(l,m,b)=>ba(m)?c0(l,m).map(Fh):rl(m)?Xm(l,m,b).map(Fh):ue.none(),vC=(l,m)=>ba(m)?c0(l,m).map(Fh):rl(m)?l.getRangedRect(m,0,m,Hu(m)).map(Fh):ue.none(),Kr=5,qd=100,Cl=Ji.generate([{none:[]},{retry:["caret"]}]),Lh=(l,m)=>l.left<m.left||Math.abs(m.right-l.left)<1||l.left>m.right,Va=(l,m,b)=>Of(m,Zv).fold(Ht,S=>vC(l,S).exists(k=>Lh(b,k))),Si=(l,m,b,S,k)=>{const M=Ih(k,Kr);return Math.abs(b.bottom-S.bottom)<1||b.top>k.bottom?Cl.retry(M):b.top===k.bottom?Cl.retry(Ih(k,1)):Va(l,m,k)?Cl.retry(au(M,Kr,0)):Cl.none()},Sl={point:QO,adjuster:(l,m,b,S,k)=>{const M=sg(k,Kr);return Math.abs(b.top-S.top)<1||b.bottom<k.top?Cl.retry(M):b.bottom===k.top?Cl.retry(sg(k,1)):Va(l,m,k)?Cl.retry(au(M,Kr,0)):Cl.none()},move:sg,gather:gC},l0={point:eA,adjuster:Si,move:Ih,gather:Ph},gc=(l,m,b)=>l.elementFromPoint(m,b).filter(S=>Uo(S)==="table").isSome(),rg=(l,m,b,S,k)=>yC(l,m,b,m.move(S,Kr),k),yC=(l,m,b,S,k)=>k===0?ue.some(S):gc(l,S.left,m.point(S))?rg(l,m,b,S,k-1):l.situsFromPoint(S.left,m.point(S)).bind(M=>M.start.fold(ue.none,H=>vC(l,H).bind(G=>m.adjuster(l,H,G,b,S).fold(ue.none,Q=>yC(l,m,b,Q,k-1))).orThunk(()=>ue.some(S)),ue.none)),tA=(l,m,b)=>l.point(m)>b.getInnerHeight()?ue.some(l.point(m)-b.getInnerHeight()):l.point(m)<0?ue.some(-l.point(m)):ue.none(),Vx=(l,m,b)=>{const S=l.move(b,Kr),k=yC(m,l,b,S,qd).getOr(S);return tA(l,k,m).fold(()=>m.situsFromPoint(k.left,l.point(k)),M=>(m.scrollBy(0,M),m.situsFromPoint(k.left,l.point(k)-M)))},Z1={tryUp:At(Vx,Sl),tryDown:At(Vx,l0),getJumpSize:ee(Kr)},Ux=20,j1=(l,m,b)=>l.getSelection().bind(S=>$h(m,S.finish,S.foffset,b).fold(()=>ue.some(rh(S.finish,S.foffset)),k=>{const M=l.fromSitus(k),H=Us.verify(l,S.finish,S.foffset,M.finish,M.foffset,b.failure,m);return bC(H)})),u0=(l,m,b,S,k,M)=>M===0?ue.none():oA(l,m,b,S,k).bind(H=>{const G=l.fromSitus(H),Q=Us.verify(l,b,S,G.finish,G.foffset,k.failure,m);return Us.cata(Q,()=>ue.none(),()=>ue.some(H),ce=>Lo(b,ce)&&S===0?nA(l,b,S,sg,k):u0(l,m,ce,0,k,M-1),ce=>Lo(b,ce)&&S===Hu(ce)?nA(l,b,S,Ih,k):u0(l,m,ce,Hu(ce),k,M-1))}),nA=(l,m,b,S,k)=>ed(l,m,b).bind(M=>Wx(l,k,S(M,Z1.getJumpSize()))),Wx=(l,m,b)=>{const S=Ad().browser;return S.isChromium()||S.isSafari()||S.isFirefox()?m.retry(l,b):ue.none()},oA=(l,m,b,S,k)=>ed(l,b,S).bind(M=>Wx(l,k,M)),QM=(l,m,b)=>j1(l,m,b).bind(S=>u0(l,m,S.element,S.offset,b,Ux).map(l.fromSitus)),Zx=(l,m)=>Lx(l,b=>Xa(b).exists(S=>Lo(S,m))),Ln=(l,m,b,S,k)=>vr(S,"td,th",m).bind(M=>vr(M,"table",m).bind(H=>Zx(k,H)?QM(l,m,b).bind(G=>vr(G.finish,"td,th",m).map(Q=>({start:M,finish:Q,range:G}))):ue.none())),iu=(l,m,b,S,k,M)=>M(S,m).orThunk(()=>Ln(l,m,b,S,k).map(H=>{const G=H.range;return Dh.create(ue.some(L1(G.start,G.soffset,G.finish,G.foffset)),!0)})),ag=(l,m)=>vr(l,"tr",m).bind(b=>vr(b,"table",m).bind(S=>{const k=ei(S,"tr");return Lo(b,k[0])?U1(S,M=>Nd(M).isSome(),m).map(M=>{const H=Hu(M);return Dh.create(ue.some(L1(M,H,M,H)),!0)}):ue.none()})),wC=(l,m)=>vr(l,"tr",m).bind(b=>vr(b,"table",m).bind(S=>{const k=ei(S,"tr");return Lo(b,k[k.length-1])?hC(S,M=>P2(M).isSome(),m).map(M=>Dh.create(ue.some(L1(M,0,M,0)),!0)):ue.none()})),jx=(l,m,b,S,k,M,H)=>Ln(l,b,S,k,M).bind(G=>Mh(m,b,G.start,G.finish,H)),G1=l=>{let m=l;return{get:()=>m,set:k=>{m=k}}},sA=l=>{const m=G1(ue.none()),b=()=>m.get().each(l);return{clear:()=>{b(),m.set(ue.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:G=>{b(),m.set(ue.some(G))}}},Hh=()=>{const l=sA(Ye);return{...l,on:b=>l.get().each(b)}},d0=(l,m)=>vr(l,"td,th",m),hc=l=>Ja(l).exists(Nm),x8=(l,m,b,S)=>{const k=Hh(),M=k.clear,H=Ce=>{k.on(et=>{S.clearBeforeUpdate(m),d0(Ce.target,b).each(pt=>{bl(et,pt,b).each(ht=>{const Ue=ht.boxes.getOr([]);if(Ue.length===1){const bt=Ue[0],He=m1(bt)==="false",Pt=Td(vv(Ce.target),bt,Lo);He&&Pt&&(S.selectRange(m,Ue,bt,bt),l.selectContents(bt))}else Ue.length>1&&(S.selectRange(m,Ue,ht.start,ht.finish),l.selectContents(pt))})})})};return{clearstate:M,mousedown:Ce=>{S.clear(m),d0(Ce.target,b).filter(hc).each(k.set)},mouseover:Ce=>{H(Ce)},mouseup:Ce=>{H(Ce),M()}}},m0={traverse:ku,gather:Ph,relative:qr.before,retry:Z1.tryDown,failure:Us.failedDown},zh={traverse:Ed,gather:gC,relative:qr.before,retry:Z1.tryUp,failure:Us.failedUp},Jm=l=>m=>m===l,f0=Jm(38),g0=Jm(40),ig=l=>l>=37&&l<=40,rA={isBackward:Jm(37),isForward:Jm(39)},Gx={isBackward:Jm(39),isForward:Jm(37)},aA=l=>{const m=l!==void 0?l.dom:document,b=m.body.scrollLeft||m.documentElement.scrollLeft,S=m.body.scrollTop||m.documentElement.scrollTop;return oe(b,S)},Vh=(l,m,b)=>{const k=(b!==void 0?b.dom:document).defaultView;k&&k.scrollBy(l,m)},Kd=Ji.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),iA=l=>Kd.exact(l.start,l.soffset,l.finish,l.foffset),cA=l=>l.match({domRange:m=>we.fromDom(m.startContainer),relative:(m,b)=>qr.getStart(m),exact:(m,b,S,k)=>m}),qx=Kd.domRange,CC=Kd.relative,SC=Kd.exact,xC=l=>{const m=cA(l);return Ps(m)},h0=Rh.create,Qm={domRange:qx,relative:CC,exact:SC,exactFromRange:iA,getWin:xC,range:h0},Kx=(l,m,b)=>{var S,k;return ue.from((k=(S=l.dom).caretPositionFromPoint)===null||k===void 0?void 0:k.call(S,m,b)).bind(M=>{if(M.offsetNode===null)return ue.none();const H=l.dom.createRange();return H.setStart(M.offsetNode,M.offset),H.collapse(),ue.some(H)})},q1=(l,m,b)=>{var S,k;return ue.from((k=(S=l.dom).caretRangeFromPoint)===null||k===void 0?void 0:k.call(S,m,b))},EC=document.caretPositionFromPoint?Kx:document.caretRangeFromPoint?q1:ue.none,lA=(l,m,b)=>{const S=we.fromDom(l.document);return EC(S,m,b).map(k=>Rh.create(we.fromDom(k.startContainer),k.startOffset,we.fromDom(k.endContainer),k.endOffset))},K1=(l,m)=>{const b=Uo(l);return b==="input"?qr.after(l):So(["br","img"],b)?m===0?qr.before(l):qr.after(l):qr.on(l,m)},uA=(l,m)=>{const b=l.fold(qr.before,K1,qr.after),S=m.fold(qr.before,K1,qr.after);return Qm.relative(b,S)},wt=(l,m,b,S)=>{const k=K1(l,m),M=K1(b,S);return Qm.relative(k,M)},fr=(l,m,b,S)=>{const M=_u(l).dom.createRange();return M.setStart(l.dom,m),M.setEnd(b.dom,S),M},Yd=(l,m,b,S)=>{const k=fr(l,m,b,S),M=Lo(l,b)&&m===S;return k.collapsed&&!M},Ys=l=>ue.from(l.getSelection()),jc=(l,m)=>{Ys(l).each(b=>{b.removeAllRanges(),b.addRange(m)})},p0=(l,m,b,S,k)=>{const M=I1(l,m,b,S,k);jc(l,M)},Y1=(l,m,b,S,k,M)=>{m.collapse(b.dom,S),m.extend(k.dom,M)},cu=(l,m)=>Bx(l,m).match({ltr:(b,S,k,M)=>{p0(l,b,S,k,M)},rtl:(b,S,k,M)=>{Ys(l).each(H=>{if(H.setBaseAndExtent)H.setBaseAndExtent(b.dom,S,k.dom,M);else if(H.extend)try{Y1(l,H,b,S,k,M)}catch{p0(l,k,M,b,S)}else p0(l,k,M,b,S)})}}),b0=(l,m,b,S,k)=>{const M=wt(m,b,S,k);cu(l,M)},v0=(l,m,b)=>{const S=uA(m,b);cu(l,S)},Uh=l=>{if(l.rangeCount>0){const m=l.getRangeAt(0),b=l.getRangeAt(l.rangeCount-1);return ue.some(Rh.create(we.fromDom(m.startContainer),m.startOffset,we.fromDom(b.endContainer),b.endOffset))}else return ue.none()},Yx=l=>{if(l.anchorNode===null||l.focusNode===null)return Uh(l);{const m=we.fromDom(l.anchorNode),b=we.fromDom(l.focusNode);return Yd(m,l.anchorOffset,b,l.focusOffset)?ue.some(Rh.create(m,l.anchorOffset,b,l.focusOffset)):Uh(l)}},X1=(l,m,b=!0)=>{const k=(b?Rx:o0)(l,m);jc(l,k)},TC=l=>Ys(l).filter(m=>m.rangeCount>0).bind(Yx),_C=l=>TC(l).map(m=>Qm.exact(m.start,m.soffset,m.finish,m.foffset)),dA=(l,m)=>{const b=lC(l,m);return KO(b)},lu=(l,m,b)=>lA(l,m,b),y0=l=>{Ys(l).each(m=>m.removeAllRanges())},Wh=l=>({elementFromPoint:(He,Pt)=>we.fromPoint(we.fromDom(l.document),He,Pt),getRect:He=>He.dom.getBoundingClientRect(),getRangedRect:(He,Pt,dn,_n)=>{const os=Qm.exact(He,Pt,dn,_n);return dA(l,os)},getSelection:()=>_C(l).map(He=>uC(l,He)),fromSitus:He=>{const Pt=Qm.relative(He.start,He.finish);return uC(l,Pt)},situsFromPoint:(He,Pt)=>lu(l,He,Pt).map(dn=>$x.create(dn.start,dn.soffset,dn.finish,dn.foffset)),clearSelection:()=>{y0(l)},collapseSelection:(He=!1)=>{_C(l).each(Pt=>Pt.fold(dn=>dn.collapse(He),(dn,_n)=>{const os=He?dn:_n;v0(l,os,os)},(dn,_n,os,Tr)=>{const Is=He?dn:os,Ei=He?_n:Tr;b0(l,Is,Ei,Is,Ei)}))},setSelection:He=>{b0(l,He.start,He.soffset,He.finish,He.foffset)},setRelativeSelection:(He,Pt)=>{v0(l,He,Pt)},selectNode:He=>{X1(l,He,!1)},selectContents:He=>{X1(l,He)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>aA(we.fromDom(l.document)).top,scrollBy:(He,Pt)=>{Vh(He,Pt,we.fromDom(l.document))}}),da=(l,m)=>({rows:l,cols:m}),tr=(l,m,b,S)=>{const k=Wh(l),M=x8(k,m,b,S);return{clearstate:M.clearstate,mousedown:M.mousedown,mouseover:M.mouseover,mouseup:M.mouseup}},w0=l=>Of(l,an).exists(Nm),J1=(l,m)=>w0(l)||w0(m),C0=(l,m,b,S)=>{const k=Wh(l),M=()=>(S.clear(m),ue.none());return{keydown:(Q,ce,Ce,et,pt,ht)=>{const Ue=Q.raw,bt=Ue.which,He=Ue.shiftKey===!0;return Fd(m,S.selectedSelector).fold(()=>(ig(bt)&&!He&&S.clearBeforeUpdate(m),ig(bt)&&He&&!J1(ce,et)?ue.none:g0(bt)&&He?At(jx,k,m,b,m0,et,ce,S.selectRange):f0(bt)&&He?At(jx,k,m,b,zh,et,ce,S.selectRange):g0(bt)?At(iu,k,b,m0,et,ce,wC):f0(bt)?At(iu,k,b,zh,et,ce,ag):ue.none),dn=>{const _n=os=>()=>sr(os,Is=>XO(Is.rows,Is.cols,m,dn,S)).fold(()=>Zf(m,S.firstSelectedSelector,S.lastSelectedSelector).map(Is=>{const Ei=g0(bt)||ht.isForward(bt)?qr.after:qr.before;return k.setRelativeSelection(qr.on(Is.first,0),Ei(Is.table)),S.clear(m),Dh.create(ue.none(),!0)}),Is=>ue.some(Dh.create(ue.none(),!0)));return ig(bt)&&He&&!J1(ce,et)?ue.none:g0(bt)&&He?_n([da(1,0)]):f0(bt)&&He?_n([da(-1,0)]):ht.isBackward(bt)&&He?_n([da(0,-1),da(-1,0)]):ht.isForward(bt)&&He?_n([da(0,1),da(1,0)]):ig(bt)&&!He?M:ue.none})()},keyup:(Q,ce,Ce,et,pt)=>Fd(m,S.selectedSelector).fold(()=>{const ht=Q.raw,Ue=ht.which;return ht.shiftKey===!0&&ig(Ue)&&J1(ce,et)?s0(m,b,ce,Ce,et,pt,S.selectRange):ue.none()},ue.none)}},Q1=(l,m,b,S)=>{const k=Wh(l);return(M,H)=>{S.clearBeforeUpdate(m),bl(M,H,b).each(G=>{const Q=G.boxes.getOr([]);S.selectRange(m,Q,G.start,G.finish),k.selectContents(H),k.collapseSelection()})}},eb=(l,m)=>{const b=al(l,m);return b===void 0||b===""?[]:b.split(" ")},Zh=(l,m,b)=>{const k=eb(l,m).concat([b]);return ks(l,m,k.join(" ")),!0},Xx=(l,m,b)=>{const S=us(eb(l,m),k=>k!==b);return S.length>0?ks(l,m,S.join(" ")):vs(l,m),!1},tb=l=>l.dom.classList!==void 0,Jx=l=>eb(l,"class"),Qx=(l,m)=>Zh(l,"class",m),eE=(l,m)=>Xx(l,"class",m),Gc=(l,m)=>{tb(l)?l.dom.classList.add(m):Qx(l,m)},_a=l=>{(tb(l)?l.dom.classList:Jx(l)).length===0&&vs(l,"class")},xl=(l,m)=>{tb(l)?l.dom.classList.remove(m):eE(l,m),_a(l)},xi=(l,m)=>tb(l)&&l.dom.classList.contains(m),nb=(l,m)=>{Ge(m,b=>{xl(l,b)})},S0=l=>m=>{Gc(m,l)},tE=l=>m=>{nb(m,l)},Xd={byClass:l=>{const m=S0(l.selected),b=tE([l.selected,l.lastSelected,l.firstSelected]),S=M=>{const H=ei(M,l.selectedSelector);Ge(H,b)};return{clearBeforeUpdate:S,clear:S,selectRange:(M,H,G,Q)=>{S(M),Ge(H,m),Gc(G,l.firstSelected),Gc(Q,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,m,b)=>{const S=Q=>{vs(Q,l.selected),vs(Q,l.firstSelected),vs(Q,l.lastSelected)},k=Q=>{ks(Q,l.selected,"1")},M=Q=>{H(Q),b()},H=Q=>{const ce=ei(Q,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);Ge(ce,S)};return{clearBeforeUpdate:H,clear:M,selectRange:(Q,ce,Ce,et)=>{M(Q),Ge(ce,k),ks(Ce,l.firstSelected,"1"),ks(et,l.lastSelected,"1"),m(ce,Ce,et)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},sb=(l,m,b,S)=>{switch(l.tag){case"none":return m();case"single":return S(l.element);case"multiple":return b(l.elements)}},kC=()=>({tag:"none"}),nE=l=>({tag:"multiple",elements:l}),oE=l=>({tag:"single",element:l}),OC=(l,m,b)=>({get:()=>hw(l(),b).fold(()=>m().fold(kC,oE),nE)}),x0=(l,m)=>{const b=l.slice(0,m[m.length-1].row+1),S=Ss(b);return Ns(S,k=>{const M=k.cells.slice(0,m[m.length-1].column+1);return tn(M,H=>H.element)})},Po=(l,m)=>{const b=l.slice(m[0].row+m[0].rowspan-1,l.length),S=Ss(b);return Ns(S,k=>{const M=k.cells.slice(m[0].column+m[0].colspan-1,k.cells.length);return tn(M,H=>H.element)})},Jd=(l,m,b)=>{const S=Nn.fromTable(l);return Im(S,m).map(M=>{const H=dh(S,b,!1),{rows:G}=er(H),Q=x0(G,M),ce=Po(G,M);return{upOrLeftCells:Q,downOrRightCells:ce}})},sE=(l,m,b,S,k,M,H)=>({target:l,x:m,y:b,stop:S,prevent:k,kill:M,raw:H}),AC=l=>{const m=we.fromDom(xt(l).getOr(l.target)),b=()=>l.stopPropagation(),S=()=>l.preventDefault(),k=en(S,b);return sE(m,l.clientX,l.clientY,b,S,k,l)},DC=(l,m)=>b=>{l(b)&&m(AC(b))},cg=(l,m,b,S,k)=>{const M=DC(b,S);return l.dom.addEventListener(m,M,k),{unbind:At(MC,l,m,M,k)}},RC=(l,m,b,S)=>cg(l,m,b,S,!1),MC=(l,m,b,S)=>{l.dom.removeEventListener(m,b,S)},fA=Te,jh=(l,m,b)=>RC(l,m,fA,b),Gh=AC,NC=l=>!xi(we.fromDom(l.target),"ephox-snooker-resizer-bar"),PC=(l,m)=>{const b=OC(()=>we.fromDom(l.getBody()),()=>y1(lc(l),Vu(l)),Gf.selectedSelector),S=(Q,ce,Ce)=>{ti(ce).each(pt=>{const ht=Bd(l),Ue=Xg(Ye,we.fromDom(l.getDoc()),ht),bt=Wc(l),He=Jd(pt,{selection:bt},Ue);SO(l,Q,ce,Ce,He)})},k=()=>xO(l),M=Xd.byAttr(Gf,S,k);return l.on("init",Q=>{const ce=l.getWin(),Ce=yv(l),et=Vu(l),pt=()=>{const Ao=l.selection,Ua=we.fromDom(Ao.getStart()),ma=we.fromDom(Ao.getEnd());No(ti,[Ua,ma]).fold(()=>M.clear(Ce),Ye)},ht=tr(ce,Ce,et,M),Ue=C0(ce,Ce,et,M),bt=Q1(ce,Ce,et,M),He=Ao=>Ao.raw.shiftKey===!0;l.on("TableSelectorChange",Ao=>bt(Ao.start,Ao.finish));const Pt=(Ao,Ua)=>{He(Ao)&&(Ua.kill&&Ao.kill(),Ua.selection.each(ma=>{const vc=Qm.relative(ma.start,ma.finish),tc=lC(ce,vc);l.selection.setRng(tc)}))},dn=Ao=>{const Ua=Gh(Ao);if(Ua.raw.shiftKey&&ig(Ua.raw.which)){const ma=l.selection.getRng(),vc=we.fromDom(ma.startContainer),tc=we.fromDom(ma.endContainer);Ue.keyup(Ua,vc,ma.startOffset,tc,ma.endOffset).each(nf=>{Pt(Ua,nf)})}},_n=Ao=>{const Ua=Gh(Ao);m.hide();const ma=l.selection.getRng(),vc=we.fromDom(ma.startContainer),tc=we.fromDom(ma.endContainer),nf=Jy(rA,Gx)(we.fromDom(l.selection.getStart()));Ue.keydown(Ua,vc,ma.startOffset,tc,ma.endOffset,nf).each(ii=>{Pt(Ua,ii)}),m.show()},os=Ao=>Ao.button===0,Tr=Ao=>Ao.buttons===void 0?!0:(Ao.buttons&1)!==0,Is=Ao=>{ht.clearstate()},Ei=Ao=>{os(Ao)&&NC(Ao)&&ht.mousedown(Gh(Ao))},ug=Ao=>{Tr(Ao)&&NC(Ao)&&ht.mouseover(Gh(Ao))},dg=Ao=>{os(Ao)&&NC(Ao)&&ht.mouseup(Gh(Ao))},A0=(()=>{const Ao=G1(we.fromDom(Ce)),Ua=G1(0);return{touchEnd:vc=>{const tc=we.fromDom(vc.target);if(ea("td")(tc)||ea("th")(tc)){const nf=Ao.get(),ii=Ua.get();Lo(nf,tc)&&vc.timeStamp-ii<300&&(vc.preventDefault(),bt(tc,tc))}Ao.set(tc),Ua.set(vc.timeStamp)}}})();l.on("dragstart",Is),l.on("mousedown",Ei),l.on("mouseover",ug),l.on("mouseup",dg),l.on("touchend",A0.touchEnd),l.on("keyup",dn),l.on("keydown",_n),l.on("NodeChange",pt)}),l.on("PreInit",()=>{l.serializer.addTempAttr(Gf.firstSelected),l.serializer.addTempAttr(Gf.lastSelected)}),{getSelectedCells:()=>sb(b.get(),ee([]),Q=>tn(Q,ce=>ce.dom),Q=>[Q.dom]),clearSelectedCells:Q=>M.clear(we.fromDom(Q))}},El=l=>{let m=[];return{bind:M=>{if(M===void 0)throw new Error("Event bind error: undefined handler");m.push(M)},unbind:M=>{m=us(m,H=>H!==M)},trigger:(...M)=>{const H={};Ge(l,(G,Q)=>{H[G]=M[Q]}),Ge(m,G=>{G(H)})}}},ef=l=>{const m=Eu(l,S=>({bind:S.bind,unbind:S.unbind})),b=Eu(l,S=>S.trigger);return{registry:m,trigger:b}},gA=(l,m)=>{let b=null;const S=()=>{re(b)||(clearTimeout(b),b=null)};return{cancel:S,throttle:(...M)=>{S(),b=setTimeout(()=>{b=null,l.apply(null,M)},m)}}},rb=l=>l.slice(0).sort(),hA=(l,m)=>{throw new Error("All required keys ("+rb(l).join(", ")+") were not specified. Specified keys were: "+rb(m).join(", ")+".")},ec=l=>{throw new Error("Unsupported keys for object: "+rb(l).join(", "))},ka=(l,m)=>{if(!J(m))throw new Error("The "+l+" fields must be an array. Was: "+m+".");Ge(m,b=>{if(!P(b))throw new Error("The value "+b+" in the "+l+" fields was not a string.")})},lg=(l,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+rb(l).join(", ")+") were not.")},eN=l=>{const m=rb(l);Z(m,(S,k)=>k<m.length-1&&S===m[k+1]).each(S=>{throw new Error("The field: "+S+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},rE=(l,m)=>pA(l,m,{validate:De,label:"function"}),pA=(l,m,b)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return ka("required",m),eN(m),S=>{const k=Zt(S);Io(m,G=>So(k,G))||hA(m,k),l(m,k);const H=us(m,G=>!b.validate(S[G],G));return H.length>0&&lg(H,b.label),S}},Bn=(l,m)=>{const b=us(m,S=>!So(l,S));b.length>0&&ec(b)},BC=l=>rE(Bn,l),aE=BC(["compare","extract","mutate","sink"]),$C=BC(["element","start","stop","destroy"]),bA=BC(["forceDrop","drop","move","delayDrop"]),vA=()=>{let l=ue.none();const m=()=>{l=ue.none()},b=(M,H)=>{const G=l.map(Q=>M.compare(Q,H));return l=ue.some(H),G},S=(M,H)=>{H.extract(M).each(Q=>{b(H,Q).each(Ce=>{k.trigger.move(Ce)})})},k=ef({move:El(["info"])});return{onEvent:S,reset:m,events:k.registry}},iE=()=>{const l=ef({move:El(["info"])});return{onEvent:Ye,reset:Ye,events:l.registry}},yA=()=>{const l=iE(),m=vA();let b=l;return{on:()=>{b.reset(),b=m},off:()=>{b.reset(),b=l},isOn:()=>b===m,onEvent:(G,Q)=>{b.onEvent(G,Q)},events:m.events}},kt=(l,m,b)=>{let S=!1;const k=ef({start:El([]),stop:El([])}),M=yA(),H=()=>{Ue.stop(),M.isOn()&&(M.off(),k.trigger.stop())},G=gA(H,200),Q=He=>{Ue.start(He),M.on(),k.trigger.start()},ce=He=>{G.cancel(),M.onEvent(He,m)};M.events.move.bind(He=>{m.mutate(l,He.info)});const Ce=()=>{S=!0},et=()=>{S=!1},pt=()=>S,ht=He=>(...Pt)=>{S&&He.apply(null,Pt)},Ue=m.sink(bA({forceDrop:H,drop:ht(H),move:ht(ce),delayDrop:ht(G.throttle)}),b),bt=()=>{Ue.destroy()};return{element:Ue.element,go:Q,on:Ce,off:et,isActive:pt,destroy:bt,events:k.registry}},tf=l=>{const m=l.replace(/\./g,"-");return{resolve:S=>m+"-"+S}},ab=tf("ephox-dragster").resolve,ib=l=>{const m={layerClass:ab("blocker"),...l},b=we.fromTag("div");return ks(b,"role","presentation"),zr(b,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Gc(b,ab("blocker")),Gc(b,m.layerClass),{element:ee(b),destroy:()=>{ar(b)}}};var CA=aE({compare:(l,m)=>oe(m.left-l.left,m.top-l.top),extract:l=>ue.some(oe(l.x,l.y)),sink:(l,m)=>{const b=ib(m),S=jh(b.element(),"mousedown",l.forceDrop),k=jh(b.element(),"mouseup",l.drop),M=jh(b.element(),"mousemove",l.move),H=jh(b.element(),"mouseout",l.delayDrop),G=()=>{b.destroy(),k.unbind(),M.unbind(),H.unbind(),S.unbind()},Q=Ce=>{Qo(Ce,b.element())},ce=()=>{ar(b.element())};return $C({element:b.element,start:Q,stop:ce,destroy:G})},mutate:(l,m)=>{l.mutate(m.left,m.top)}});const lE=(l,m={})=>{var b;const S=(b=m.mode)!==null&&b!==void 0?b:CA;return kt(l,S,m)},Qd=tf("ephox-snooker").resolve,uE=()=>{const l=ef({drag:El(["xDelta","yDelta"])});return{mutate:(b,S)=>{l.trigger.drag(b,S)},events:l.registry}},SA=()=>{const l=ef({drag:El(["xDelta","yDelta","target"])});let m=ue.none();const b=uE();return b.events.drag.bind(M=>{m.each(H=>{l.trigger.drag(M.xDelta,M.yDelta,H)})}),{assign:M=>{m=ue.some(M)},get:()=>m,mutate:b.mutate,events:l.registry}},cb=(l,m,b,S,k)=>{const M=we.fromTag("div");return zr(M,{position:"absolute",left:m-S/2+"px",top:b+"px",height:k+"px",width:S+"px"}),Ii(M,{"data-column":l,role:"presentation"}),M},xA=(l,m,b,S,k)=>{const M=we.fromTag("div");return zr(M,{position:"absolute",left:m+"px",top:b-k/2+"px",height:k+"px",width:S+"px"}),Ii(M,{"data-row":l,role:"presentation"}),M},dE=Qd("resizer-bar"),IC=Qd("resizer-rows"),mE=Qd("resizer-cols"),E0=7,EA=(l,m)=>Ns(l.all,(b,S)=>m(b.element)?[S]:[]),TA=(l,m)=>{const b=[];return Ro(l.grid.columns,S=>{Nn.getColumnAt(l,S).map(M=>M.element).forall(m)&&b.push(S)}),us(b,S=>{const k=Nn.filterItems(l,M=>M.column===S);return Io(k,M=>m(M.element))})},qh=l=>{const m=ei(l.parent(),"."+dE);Ge(m,ar)},FC=(l,m,b)=>{const S=l.origin();Ge(m,k=>{k.each(M=>{const H=b(S,M);Gc(H,dE),Qo(l.parent(),H)})})},fE=(l,m,b,S)=>{FC(l,m,(k,M)=>{const H=cb(M.col,M.x-k.left,b.top-k.top,E0,S);return Gc(H,mE),H})},_A=(l,m,b,S)=>{FC(l,m,(k,M)=>{const H=xA(M.row,b.left-k.left,M.y-k.top,S,E0);return Gc(H,IC),H})},kA=(l,m,b,S,k)=>{const M=It(b),H=m.isResizable,G=S.length>0?Mt.positions(S,b):[],Q=G.length>0?EA(l,H):[],ce=us(G,(ht,Ue)=>gt(Q,bt=>Ue===bt));_A(m,ce,M,hl(b));const Ce=k.length>0?ur.positions(k,b):[],et=Ce.length>0?TA(l,H):[],pt=us(Ce,(ht,Ue)=>gt(et,bt=>Ue===bt));fE(m,pt,M,_(b))},T0=(l,m)=>{if(qh(l),l.isResizable(m)){const b=Nn.fromTable(m),S=s1(b),k=km(b);kA(b,l,m,S,k)}},td=(l,m)=>{const b=ei(l.parent(),"."+dE);Ge(b,m)},_0=l=>{td(l,m=>{fs(m,"display","none")})},ro=l=>{td(l,m=>{fs(m,"display","block")})},OA=l=>xi(l,IC),em=l=>xi(l,mE),nd=Qd("resizer-bar-dragging"),k0=l=>{const m=SA(),b=lE(m,{});let S=ue.none();const k=(Ue,bt)=>ue.from(al(Ue,bt));m.events.drag.bind(Ue=>{k(Ue.target,"data-row").each(bt=>{const He=Au(Ue.target,"top");fs(Ue.target,"top",He+Ue.yDelta+"px")}),k(Ue.target,"data-column").each(bt=>{const He=Au(Ue.target,"left");fs(Ue.target,"left",He+Ue.xDelta+"px")})});const M=(Ue,bt)=>{const He=Au(Ue,bt),Pt=ts(Ue,"data-initial-"+bt,0);return He-Pt};b.events.stop.bind(()=>{m.get().each(Ue=>{S.each(bt=>{k(Ue,"data-row").each(He=>{const Pt=M(Ue,"top");vs(Ue,"data-initial-top"),ht.trigger.adjustHeight(bt,Pt,parseInt(He,10))}),k(Ue,"data-column").each(He=>{const Pt=M(Ue,"left");vs(Ue,"data-initial-left"),ht.trigger.adjustWidth(bt,Pt,parseInt(He,10))}),T0(l,bt)})})});const H=(Ue,bt)=>{ht.trigger.startAdjust(),m.assign(Ue),ks(Ue,"data-initial-"+bt,Au(Ue,bt)),Gc(Ue,nd),fs(Ue,"opacity","0.2"),b.go(l.parent())},G=jh(l.parent(),"mousedown",Ue=>{OA(Ue.target)&&H(Ue.target,"top"),em(Ue.target)&&H(Ue.target,"left")}),Q=Ue=>Lo(Ue,l.view()),ce=Ue=>vr(Ue,"table",Q).filter(Nm),Ce=jh(l.view(),"mouseover",Ue=>{ce(Ue.target).fold(()=>{As(Ue.target)&&qh(l)},bt=>{b.isActive()&&(S=ue.some(bt),T0(l,bt))})}),et=()=>{G.unbind(),Ce.unbind(),b.destroy(),qh(l)},pt=Ue=>{T0(l,Ue)},ht=ef({adjustHeight:El(["table","delta","row"]),adjustWidth:El(["table","delta","column"]),startAdjust:El([])});return{destroy:et,refresh:pt,on:b.on,off:b.off,hideBars:At(_0,l),showBars:At(ro,l),events:ht.registry}},O0={create:(l,m,b)=>{const S=Mt,k=ur,M=k0(l),H=ef({beforeResize:El(["table","type"]),afterResize:El(["table","type"]),startDrag:El([])});return M.events.adjustHeight.bind(G=>{const Q=G.table;H.trigger.beforeResize(Q,"row");const ce=S.delta(G.delta,Q);Ow(Q,ce,G.row,S),H.trigger.afterResize(Q,"row")}),M.events.startAdjust.bind(G=>{H.trigger.startDrag()}),M.events.adjustWidth.bind(G=>{const Q=G.table;H.trigger.beforeResize(Q,"col");const ce=k.delta(G.delta,Q),Ce=b(Q);E1(Q,ce,G.column,m,Ce),H.trigger.afterResize(Q,"col")}),{on:M.on,off:M.off,refreshBars:M.refresh,hideBars:M.hideBars,showBars:M.showBars,destroy:M.destroy,events:H.registry}}},LC={only:(l,m)=>{const b=Il(l)?br(l):l;return{parent:ee(b),view:ee(l),origin:ee(oe(0,0)),isResizable:m}},detached:(l,m,b)=>{const S=()=>It(m);return{parent:ee(m),view:ee(l),origin:S,isResizable:b}},body:(l,m,b)=>({parent:ee(m),view:ee(l),origin:ee(oe(0,0)),isResizable:b})},AA=()=>{const l=we.fromTag("div");return zr(l,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Qo(Hr(),l),l},HC=(l,m)=>l.inline?LC.body(we.fromDom(l.getBody()),AA(),m):LC.only(we.fromDom(l.getDoc()),m),DA=(l,m)=>{l.inline&&ar(m.parent())},Hn=l=>je(l)&&l.nodeName==="TABLE",bc="bar-",nm=l=>al(l,"data-mce-resize")!=="false",RA=l=>{const m=Nn.fromTable(l);Nn.hasColumns(m)||Ge(ll(l),b=>{const S=Vr(b,"width");fs(b,"width",S),vs(b,"width")})},Yh=l=>{const m=Hh(),b=Hh(),S=Hh();let k,M;const H=Ue=>za(l,Ue),G=()=>F2(l)?ww():j2(),Q=Ue=>ih(Ue).columns,ce=(Ue,bt,He)=>{const Pt=Ou(bt,"e");if(M===""&&Zc(Ue),He!==k&&M!==""){fs(Ue,"width",M);const dn=G(),_n=H(Ue),os=F2(l)||Pt?Q(Ue)-1:0;E1(Ue,He-k,os,dn,_n)}else if(wv(M)){const dn=parseFloat(M.replace("%","")),_n=He*dn/k;fs(Ue,"width",_n+"%")}f1(M)&&RA(Ue)},Ce=()=>{b.on(Ue=>{Ue.destroy()}),S.on(Ue=>{DA(l,Ue)})};return l.on("init",()=>{const Ue=HC(l,nm);if(S.set(Ue),Wk(l)&&Wf(l)){const bt=G(),He=O0.create(Ue,bt,H);He.on(),He.events.startDrag.bind(Pt=>{m.set(l.selection.getRng())}),He.events.beforeResize.bind(Pt=>{const dn=Pt.table.dom;Gw(l,dn,Pm(dn),Bm(dn),bc+Pt.type)}),He.events.afterResize.bind(Pt=>{const dn=Pt.table,_n=dn.dom;eu(dn),m.on(os=>{l.selection.setRng(os),l.focus()}),EO(l,_n,Pm(_n),Bm(_n),bc+Pt.type),l.undoManager.add()}),b.set(He)}}),l.on("ObjectResizeStart",Ue=>{const bt=Ue.target;if(Hn(bt)){const He=we.fromDom(bt);Ge(l.dom.select(".mce-clonedresizable"),Pt=>{l.dom.addClass(Pt,"mce-"+aw(l)+"-columns")}),!P1(He)&&Mm(l)?kh(He):!N1(He)&&Jl(l)&&Zc(He),Jv(He)&&Kp(Ue.origin,bc)&&Zc(He),k=Ue.width,M=Uf(l)?"":L2(l,bt).getOr("")}}),l.on("ObjectResized",Ue=>{const bt=Ue.target;if(Hn(bt)){const He=we.fromDom(bt),Pt=Ue.origin;Kp(Pt,"corner-")&&ce(He,Pt,Ue.width),eu(He),tg(l,He.dom,Zd)}}),l.on("SwitchMode",()=>{b.on(Ue=>{l.mode.isReadOnly()?Ue.hideBars():Ue.showBars()})}),l.on("dragstart dragend",Ue=>{b.on(bt=>{Ue.type==="dragstart"?(bt.hideBars(),bt.off()):(bt.on(),bt.showBars())})}),l.on("remove",()=>{Ce()}),{refresh:Ue=>{b.on(bt=>bt.refreshBars(we.fromDom(Ue)))},hide:()=>{b.on(Ue=>Ue.hideBars())},show:()=>{b.on(Ue=>Ue.showBars())}}},Qn=l=>{Qg(l);const m=Yh(l),b=PC(l,m),S=Yv(l,m,b);return Ah(l,S),UO(l,S),Jk(l,S),{getSelectedCells:b.getSelectedCells,clearSelectedCells:b.clearSelectedCells}},MA=l=>({table:Qn(l)});var zC=()=>{w.add("dom",MA)};zC()})();const or=(w,f)=>{try{if(typeof window<"u"&&typeof window.adminT=="function")return window.adminT(w,f)}catch{}return f||w},Q6=(w,f={},p)=>{try{if(typeof window<"u"&&typeof window.adminTf=="function")return window.adminTf(w,f,p)}catch{}let C=or(w,p);try{Object.keys(f||{}).forEach(O=>{C=String(C).replaceAll(`{${O}}`,String(f[O]))})}catch{}return C};function aoe(){const w=document.getElementById("uppy");if(!w||w._uppyInitialized)return;w._uppyInitialized=!0;const f=w.dataset.endpoint,p=w.dataset.csrf,C=new c8({autoProceed:!0,restrictions:{allowedFileTypes:["image/jpeg","image/png","image/webp"]}}).use(OK,{endpoint:f,fieldName:"file",headers:{"X-CSRF-Token":p,"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});window.uppyInstances||(window.uppyInstances=[]),window.uppyInstances.push(C);let O=document.getElementById("upload-progress");if(!O){O=document.createElement("div"),O.id="upload-progress",O.className="hidden fixed top-4 right-4 bg-white border border-gray-200 rounded-lg shadow-xl p-4 z-50 min-w-[350px] max-w-[400px]",O.innerHTML=`
      <div class="space-y-3">
        <!-- Header with overall progress -->
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-3">
            <div class="animate-spin rounded-full h-5 w-5 border-b-2 border-black" id="upload-spinner"></div>
            <span class="text-sm font-medium text-gray-900" id="upload-title"></span>
          </div>
          <span class="text-sm text-gray-600" id="upload-counter">0 / 0</span>
        </div>
        <!-- Total progress bar -->
        <div class="w-full bg-gray-200 rounded-full h-2">
          <div id="upload-bar-total" class="bg-black h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
        </div>
        <div class="text-xs text-gray-500" id="upload-status"></div>
        <!-- Individual file progress list -->
        <div id="upload-file-list" class="space-y-2 max-h-48 overflow-y-auto"></div>
      </div>
    `,document.body.appendChild(O);const pe=document.getElementById("upload-title");pe&&(pe.textContent=or("admin.upload.in_progress_title","Upload in progress"));const Oe=document.getElementById("upload-status");Oe&&(Oe.textContent=or("admin.upload.preparing","Preparing..."))}let $=new Map,P=w.querySelector('input[type="file"].uppy-input');P||(P=document.createElement("input"),P.type="file",P.multiple=!0,P.accept="image/*",P.style.display="none",P.classList.add("uppy-input"),w.appendChild(P));const W=()=>P.click();w._uppyClickHandler=W,w.addEventListener("click",W),P.addEventListener("change",()=>{if(!P.files)return;const pe=new Set(C.getFiles().map(Oe=>`${Oe.name}|${Oe.size}`));Array.from(P.files).forEach(Oe=>{const je=`${Oe.name}|${Oe.size}`;if(pe.has(je)){window.showToast&&window.showToast(Q6("admin.upload.file_already_added",{name:Oe.name},`File already added: ${Oe.name}`),"error");return}try{C.addFile({source:"file-input",name:Oe.name,type:Oe.type,data:Oe})}catch{}}),P.value=""}),w.addEventListener("dragover",pe=>{pe.preventDefault(),w.classList.add("bg-gray-100")}),w.addEventListener("dragleave",()=>{w.classList.remove("bg-gray-100")}),w.addEventListener("drop",pe=>{var De;pe.preventDefault(),w.classList.remove("bg-gray-100");const Oe=Array.from(((De=pe.dataTransfer)==null?void 0:De.files)||[]),je=new Set(C.getFiles().map(Je=>`${Je.name}|${Je.size}`));Oe.forEach(Je=>{const Ye=`${Je.name}|${Je.size}`;if(je.has(Ye)){window.showToast&&window.showToast(Q6("admin.upload.file_already_added",{name:Je.name},`File already added: ${Je.name}`),"error");return}try{C.addFile({source:"drag-drop",name:Je.name,type:Je.type,data:Je})}catch{}})});function J(pe){const Oe=pe.name.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),je=document.createElement("div");je.id=`file-prog-${pe.id}`,je.className="bg-gray-50 border border-gray-200 rounded p-2",je.innerHTML=`
      <div class="flex items-center justify-between mb-1">
        <span class="text-xs text-gray-700 truncate flex-1 mr-2" title="${Oe}">
          <i class="fas fa-image text-gray-400 mr-1"></i>${Oe}
        </span>
        <span class="text-xs text-gray-500 file-status"></span>
      </div>
      <div class="w-full bg-gray-100 rounded-full h-1">
        <div class="file-bar bg-gray-400 h-1 rounded-full transition-all duration-150" style="width: 0%"></div>
      </div>
    `;const De=je.querySelector(".file-status");return De&&(De.textContent=or("admin.upload.queued","Queued...")),je}function re(pe,Oe,je,De=!1,Je=!1){const Ye=document.getElementById(`file-prog-${pe}`);if(!Ye)return;const en=Ye.querySelector(".file-bar"),ze=Ye.querySelector(".file-status");en&&(en.style.width=`${Oe}%`,Je?en.className="file-bar bg-green-500 h-1 rounded-full transition-all duration-150":De?en.className="file-bar bg-red-500 h-1 rounded-full transition-all duration-150":Oe>0&&(en.className="file-bar bg-black h-1 rounded-full transition-all duration-150")),ze&&je&&(ze.textContent=je,Je?ze.className="text-xs text-green-600 file-status":De?ze.className="text-xs text-red-600 file-status":ze.className="text-xs text-gray-500 file-status")}function me(){const pe=C.getFiles(),Oe=pe.length,je=pe.filter(Ye=>{var en;return(en=Ye.progress)==null?void 0:en.uploadComplete}).length,De=document.getElementById("upload-counter"),Je=document.getElementById("upload-bar-total");De&&(De.textContent=`${je} / ${Oe}`),Je&&(Je.style.width=`${Oe>0?je/Oe*100:0}%`)}C.on("file-added",pe=>{const Oe=document.getElementById("upload-file-list");Oe&&Oe.appendChild(J(pe)),$.set(pe.id,0),me()}),C.on("upload-start",()=>{O.classList.remove("hidden");const pe=document.getElementById("upload-status");pe&&(pe.textContent=or("admin.upload.starting_upload","Starting upload...")),me()}),C.on("upload-progress",(pe,Oe)=>{const je=Math.round(Oe.bytesUploaded/Oe.bytesTotal*100);re(pe.id,je,`${je}%`),$.set(pe.id,je);const De=document.getElementById("upload-status");De&&(De.textContent=Q6("admin.upload.uploading_file",{name:pe.name},`Uploading ${pe.name}...`))}),C.on("upload-success",pe=>{re(pe.id,100,or("admin.upload.completed","Completed")+" ✓",!1,!0),$.set(pe.id,100),me()}),C.on("complete",pe=>{var Je;const Oe=document.getElementById("upload-status"),je=document.getElementById("upload-spinner"),De=((Je=pe.successful)==null?void 0:Je.length)||0;Oe&&(Oe.textContent=Q6("admin.upload.completed_summary",{count:De},`Completed! ${De} files uploaded`)),je&&(je.className="rounded-full h-5 w-5 bg-green-500 flex items-center justify-center text-white text-xs"),je&&(je.innerHTML='<i class="fas fa-check"></i>'),setTimeout(()=>{O.classList.add("hidden");const Ye=document.getElementById("upload-file-list");Ye&&(Ye.innerHTML=""),$.clear(),je&&(je.className="animate-spin rounded-full h-5 w-5 border-b-2 border-black",je.innerHTML="")},2500),PK()}),C.on("upload-error",(pe,Oe,je)=>{let De=or("admin.upload.upload_error","Upload error");try{if(je&&je.body)De=je.body.error||je.body.message||De;else if(je&&je.response){const Je=je.responseText||je.response||"";try{const Ye=JSON.parse(Je);De=Ye.error||Ye.message||De}catch{}}Oe&&Oe.message&&(!De||De==="Upload error")&&(De=Oe.message)}catch{}re(pe.id,100,or("admin.common.error","Error")+" ✗",!0,!1),me(),window.showToast&&window.showToast(De,"error"),console.error("Upload error:",De,{file:pe,error:Oe,response:je})}),C.on("error",pe=>{const Oe=document.getElementById("upload-status");Oe&&(Oe.textContent=`${or("admin.common.error","Error")}: ${pe.message}`),setTimeout(()=>{O.classList.add("hidden");const je=document.getElementById("upload-file-list");je&&(je.innerHTML=""),$.clear()},3e3)})}function ioe(){console.log("Initializing TomSelects...");const w=(p,C={})=>{document.querySelectorAll(p).forEach($=>{if($.tomselect){console.log(`TomSelect already initialized for ${p}`);return}try{$.tomselect=new xu($,C),console.log(`TomSelect initialized for ${p}`)}catch(P){console.error(`Failed to initialize TomSelect for ${p}:`,P)}})},f={plugins:["remove_button"],persist:!1,create:!1,maxItems:null,render:{option:(p,C)=>`<div>${C(p.text??p.name??p.value)}</div>`,item:(p,C)=>`<div>${C(p.text??p.name??p.value)}</div>`}};w("#album-tags",{...f,valueField:"id",labelField:"name",searchField:"name",load:(p,C)=>{fetch(`${window.basePath||""}/admin/api/tags?q=${encodeURIComponent(p||"")}`,{headers:{Accept:"application/json"}}).then(O=>O.ok?O.json():[]).then(C).catch(()=>C())}}),w("#album-categories",f),w("#album-cameras",f),w("#album-lenses",f),w("#album-films",f),w("#album-developers",f),w("#album-labs",f),w("#album-locations",f),w("select.tom-select",f),w("select[multiple]:not(.ts-hidden-accessible)",f)}function NJ(){console.log("Initializing Sortable grid...");const w=document.getElementById("images-grid");if(!w){console.log("No images-grid found, skipping Sortable initialization");return}if(w._sortableInstance){try{w._sortableInstance.destroy(),console.log("Destroyed existing Sortable instance")}catch(C){console.warn("Failed to destroy existing Sortable instance:",C)}delete w._sortableInstance}try{const C=new lo(w,{animation:150,draggable:"[data-id]",onEnd:async()=>{const O=Array.from(w.querySelectorAll("[data-id]")).map(W=>W.getAttribute("data-id")),$=w.dataset.reorderEndpoint||"",P=$.startsWith("/")?`${window.basePath}${$}`:`${window.basePath}/${$}`;try{await fetch(P,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":w.dataset.csrf,Accept:"application/json"},body:JSON.stringify({order:O})}),window.showToast&&window.showToast(or("admin.common.order_saved","Order saved"),"success")}catch(W){console.error("Failed to save order:",W),window.showToast&&window.showToast(or("admin.common.order_save_error","Error saving order"),"error")}}});w._sortableInstance=C,window.sortableInstances||(window.sortableInstances=[]),window.sortableInstances.push(C),console.log("Sortable initialized successfully")}catch(C){console.error("Failed to initialize Sortable:",C)}const f=document.getElementById("sort-images");if(f&&!f._sortInitialized){let O=function($){const P=Array.from(w.children);P.sort((W,J)=>{switch($){case"created_newest":return C(J.dataset.created)-C(W.dataset.created);case"created_oldest":return C(W.dataset.created)-C(J.dataset.created);case"id_asc":return(parseInt(W.dataset.id,10)||0)-(parseInt(J.dataset.id,10)||0);case"id_desc":return(parseInt(J.dataset.id,10)||0)-(parseInt(W.dataset.id,10)||0);default:return 0}}),P.forEach(W=>w.appendChild(W))};f._sortInitialized=!0;const C=$=>new Date($||"1970-01-01T00:00:00Z").getTime();f.addEventListener("change",$=>O($.target.value))}const p=document.getElementById("save-order");p&&!p._saveInitialized&&(p._saveInitialized=!0,p.addEventListener("click",async C=>{C.preventDefault();const O=Array.from(w.querySelectorAll("[data-id]")).map(W=>W.getAttribute("data-id")),$=w.dataset.reorderEndpoint||"",P=$.startsWith("/")?`${window.basePath}${$}`:`${window.basePath}/${$}`;try{await fetch(P,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":w.dataset.csrf,Accept:"application/json"},body:JSON.stringify({order:O})}),window.showToast&&window.showToast(or("admin.common.order_saved_manual","Order saved manually"),"success")}catch(W){console.error("Failed to save order manually:",W),window.showToast&&window.showToast(or("admin.common.order_save_error","Error saving order"),"error")}}))}function coe(){if(console.log("Initializing TinyMCE..."),!document.querySelectorAll("textarea.richtext").length){console.log("No richtext areas found, skipping TinyMCE initialization");return}try{window.tinymce&&(_K.remove(),console.log("Removed existing TinyMCE instances"))}catch(f){console.warn("Failed to remove TinyMCE instances:",f)}_K.init({selector:"textarea.richtext",menubar:!1,statusbar:!0,branding:!1,plugins:"link lists autoresize",toolbar:"undo redo | blocks | bold italic underline strikethrough | alignleft aligncenter alignright | bullist numlist | blockquote | link | removeformat",block_formats:`${or("admin.tinymce.paragraph","Paragraph")}=p; ${or("admin.tinymce.subtitle","Subtitle")}=h3; ${or("admin.tinymce.section_title","Section title")}=h2; ${or("admin.tinymce.note","Note")}=h4`,default_link_target:"_blank",link_default_protocol:"https",rel_list:[{title:"noopener",value:"noopener"},{title:"noreferrer",value:"noreferrer"}],skin:!1,content_css:!1,content_style:`
      body{
        font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif; 
        color:#111; 
        line-height:1.7; 
        margin: 8px;
        background: white;
      } 
      a{color:#000; text-decoration:underline} 
      blockquote{border-left:3px solid #e5e7eb; margin:1rem 0; padding-left:.75rem; color:#444}
      
      /* TinyMCE UI Styles */
      .tox .tox-toolbar__group { display: flex !important; }
      .tox .tox-toolbar { display: flex !important; flex-wrap: wrap; }
      .tox .tox-editor-header { display: block !important; }
    `,valid_elements:"p,br,strong/b,em/i,u,s,ul,ol,li,blockquote,a[href|target|rel],h2,h3,h4,hr",height:700,min_height:500,max_height:1e3,resize:!0,toolbar_mode:"wrap",promotion:!1,setup:function(f){f.on("init",function(){console.log("TinyMCE editor initialized:",f.id);const p=f.getContainer(),C=p.querySelector(".tox-toolbar"),O=p.querySelector(".tox-editor-header");O&&(O.style.display="block"),C&&(C.style.display="flex")}),f.on("remove",function(){console.log("TinyMCE editor removed:",f.id)})}}).then(function(f){console.log("TinyMCE initialized successfully for",f.length,"editors")}).catch(function(f){console.error("TinyMCE initialization failed:",f)})}window.AdminInit=function(){console.log("AdminInit: Initializing admin components..."),loe(),ioe(),aoe(),uoe(),NJ(),BK(),coe(),voe(),doe(),moe(),foe(),console.log("AdminInit: All components initialized")};function loe(){try{if(document.querySelectorAll(".ts-control").forEach(w=>{const f=w.previousElementSibling;if(f&&f.tomselect)try{f.tomselect.destroy()}catch(p){console.warn("Failed to destroy TomSelect:",p)}}),window.tinymce)try{_K.remove()}catch(w){console.warn("Failed to remove TinyMCE:",w)}window.uppyInstances&&(window.uppyInstances.forEach(w=>{try{w&&typeof w.close=="function"&&w.close()}catch{}}),window.uppyInstances=[]),window.sortableInstances&&(window.sortableInstances.forEach(w=>{try{w.destroy()}catch(f){console.warn("Failed to destroy Sortable:",f)}}),window.sortableInstances=[]),document.querySelectorAll("#sort-images").forEach(w=>{delete w._sortInitialized}),document.querySelectorAll("#save-order").forEach(w=>{delete w._saveInitialized}),document.querySelectorAll("#images-grid").forEach(w=>{delete w._sortableInstance,delete w._gridButtonsBound}),document.querySelectorAll("#uppy").forEach(w=>{try{w._uppyClickHandler&&(w.removeEventListener("click",w._uppyClickHandler),delete w._uppyClickHandler),w.querySelectorAll('input[type="file"].uppy-input').forEach(f=>f.remove()),delete w._uppyInitialized}catch(f){console.warn("Cleanup Uppy click/input failed:",f)}}),document.querySelectorAll("[data-tooltip]").forEach(w=>{delete w._tooltipInitialized}),document.querySelectorAll(".dropdown").forEach(w=>{delete w._dropdownInitialized}),document.querySelectorAll("form[data-validate]").forEach(w=>{delete w._validationInitialized}),console.log("Cleanup completed successfully")}catch(w){console.warn("Cleanup warning:",w)}}function uoe(){const w=document.getElementById("logo-uppy"),f=document.getElementById("site_logo"),p=document.getElementById("site-logo-preview"),C=document.getElementById("site-logo-clear");if(!w||!f||w._uppyInitialized)return;w._uppyInitialized=!0;const O=w.dataset.endpoint,$=w.dataset.csrf,P=new c8({autoProceed:!0,restrictions:{allowedFileTypes:["image/png","image/jpeg","image/webp"]}}).use(OK,{endpoint:O,fieldName:"file",headers:{"X-CSRF-Token":$,"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});window.uppyInstances||(window.uppyInstances=[]),window.uppyInstances.push(P);let W=w.querySelector('input[type="file"].uppy-input');W||(W=document.createElement("input"),W.type="file",W.accept="image/png,image/jpeg,image/webp",W.style.display="none",W.classList.add("uppy-input"),w.appendChild(W)),w.addEventListener("click",()=>W.click()),W.addEventListener("change",()=>{if(W.files&&W.files[0]){try{P.addFile({name:W.files[0].name,type:W.files[0].type,data:W.files[0]})}catch{}W.value=""}}),w.addEventListener("dragover",J=>{J.preventDefault(),w.classList.add("bg-gray-100")}),w.addEventListener("dragleave",()=>w.classList.remove("bg-gray-100")),w.addEventListener("drop",J=>{var me,pe;J.preventDefault(),w.classList.remove("bg-gray-100");const re=(pe=(me=J.dataTransfer)==null?void 0:me.files)==null?void 0:pe[0];if(re)try{P.addFile({name:re.name,type:re.type,data:re})}catch{}}),P.on("complete",J=>{const re=J.successful&&J.successful[0],me=re&&re.response&&(re.response.body||{});if(me&&me.ok&&me.path){f.value=me.path,p&&(p.src=(window.basePath||"")+me.path,p.classList.remove("hidden")),C&&C.classList.remove("hidden");const pe=(je,De)=>typeof window.adminT=="function"?window.adminT(je,De):De||je,Oe=(je,De={})=>{let Je=String(je??"");return Object.keys(De).forEach(Ye=>{Je=Je.replaceAll(`{${Ye}}`,String(De[Ye]))}),Je};if(me.favicons&&me.favicons.success){const je=me.favicons.generated?me.favicons.generated.length:0;window.showToast&&window.showToast(Oe(pe("admin.settings.favicons_generated","Logo updated + {count} favicons generated"),{count:je}),"success")}else me.favicons&&me.favicons.error?window.showToast&&(window.showToast(pe("admin.settings.logo_updated","Logo updated"),"success"),window.showToast(Oe(pe("admin.settings.favicon_generation_failed","Favicon generation failed: {error}"),{error:me.favicons.error}),"warning")):window.showToast&&window.showToast(pe("admin.settings.logo_updated","Logo updated"),"success")}else window.showToast&&window.showToast(typeof window.adminT=="function"?window.adminT("admin.settings.logo_upload_failed","Logo upload failed"):"Logo upload failed","error")}),P.on("upload-error",(J,re,me)=>{const pe=me&&me.body&&(me.body.error||me.body.message)||re&&re.message||(typeof window.adminT=="function"?window.adminT("admin.settings.logo_upload_error","Logo upload error"):"Logo upload error");window.showToast&&window.showToast(pe,"error")}),C&&C.addEventListener("click",J=>{J.preventDefault(),f.value="",p&&p.classList.add("hidden"),window.showToast&&window.showToast(typeof window.adminT=="function"?window.adminT("admin.settings.logo_removed_info","Logo removed (save to apply)"):"Logo removed (save to apply)","info")})}function doe(){document.querySelectorAll("[data-tooltip]").forEach(f=>{f._tooltipInitialized||(f._tooltipInitialized=!0,f.addEventListener("mouseenter",goe),f.addEventListener("mouseleave",hoe))})}function moe(){document.querySelectorAll(".dropdown").forEach(f=>{if(!f._dropdownInitialized){f._dropdownInitialized=!0;const p=f.querySelector(".dropdown-trigger"),C=f.querySelector(".dropdown-content");p&&C&&p.addEventListener("click",O=>{O.stopPropagation(),poe(f)})}})}function foe(){document.querySelectorAll("form[data-validate]").forEach(f=>{f._validationInitialized||(f._validationInitialized=!0,f.addEventListener("submit",boe))})}function goe(w){const f=w.target.getAttribute("data-tooltip");if(!f)return;const p=document.createElement("div");p.className="tooltip-popup",p.textContent=f,p.style.cssText=`
    position: absolute;
    background: rgba(0,0,0,0.9);
    color: white;
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 14px;
    pointer-events: none;
    z-index: 1000;
    white-space: nowrap;
  `,document.body.appendChild(p);const C=w.target.getBoundingClientRect();p.style.left=C.left+C.width/2-p.offsetWidth/2+"px",p.style.top=C.top-p.offsetHeight-8+"px",w.target._tooltip=p}function hoe(w){w.target._tooltip&&(w.target._tooltip.remove(),delete w.target._tooltip)}function poe(w){const f=w.querySelector(".dropdown-content"),p=f.classList.contains("show");document.querySelectorAll(".dropdown-content.show").forEach(C=>{C.classList.remove("show")}),p||f.classList.add("show")}function boe(w){const p=w.target.querySelectorAll("[required]");let C=!0;p.forEach(O=>{O.value.trim()?O.classList.remove("error"):(O.classList.add("error"),C=!1)}),C||(w.preventDefault(),showToast(or("admin.common.required_fields","Please fill in all required fields"),"error"))}window.refreshGalleryArea=PK;window.rebindImageModalHandlers=BJ;function voe(){const w=document.getElementById("open-media-library"),f=document.getElementById("media-modal"),p=document.getElementById("media-body"),C=document.getElementById("media-close"),O=document.getElementById("images-grid");if(!w||!f||!p)return;const $=document.getElementById("uppy"),P=($==null?void 0:$.dataset.albumId)||(O==null?void 0:O.dataset.albumId);if(!P){console.error("No albumId found for media modal");return}function W(){f.classList.remove("hidden"),f.classList.add("flex"),re()}function J(){f.classList.add("hidden"),f.classList.remove("flex")}async function re(){try{p.innerHTML=`<div class="p-8 text-center"><i class="fas fa-spinner fa-spin"></i> ${or("admin.common.loading","Loading...")}</div>`;const me=await fetch(`${window.basePath||""}/admin/media?partial=1`,{headers:{Accept:"text/html"}});if(!me.ok)throw new Error(`HTTP ${me.status}`);const pe=await me.text();p.innerHTML=pe}catch(me){console.error("Failed to load media:",me),p.innerHTML=`<div class="text-center text-red-600 p-8">
        <p>${or("admin.media.error_loading_gallery","Error loading gallery")}</p>
        <p class="text-sm mt-2">${me.message}</p>
      </div>`}}w.addEventListener("click",W),C==null||C.addEventListener("click",J),p.addEventListener("click",async me=>{if(me.target.closest("input,button,select,label"))return;const pe=me.target.closest("[data-media-id]");if(!pe)return;const Oe=pe.getAttribute("data-media-id"),je=new URLSearchParams;je.append("csrf",yoe()),je.append("image_id",Oe);try{const De=await fetch(`${window.basePath||""}/admin/albums/${P}/images/attach`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:je.toString()});if(De.ok)J(),window.showToast&&window.showToast(or("admin.albums.image_added","Image added"),"success"),PK();else if(De.status===409){const Je=await De.json().catch(()=>({}));window.showToast&&window.showToast(Je.error||or("admin.albums.image_already_in_album","Image already in album"),"error")}else console.error("Failed to attach image:",De.status,De.statusText),window.showToast&&window.showToast(or("admin.albums.error_add_image","Error adding image"),"error")}catch(De){console.error("Error attaching image:",De),window.showToast&&window.showToast(or("admin.albums.error_add_image","Error adding image"),"error")}})}function yoe(){const w=document.querySelector('input[name="csrf"]');return w?w.value:""}async function PK(){try{console.log("🔄 refreshGalleryArea called");const w=document.getElementById("images-grid");if(console.log("📋 Existing grid found:",!!w),!w){console.error("❌ images-grid element not found! The template should always include it now.");return}w.style.transition="opacity 0.15s ease",w.style.opacity="0.6",console.log("🌐 Fetching updated page content...");const f=await fetch(window.location.href,{headers:{Accept:"text/html"}});if(!f.ok)throw new Error("Failed to fetch page");const p=await f.text(),C=new DOMParser().parseFromString(p,"text/html"),O=C.querySelector("#images-grid"),$=C.querySelector(".flex.items-center.justify-between.mt-6.mb-4");if(console.log("📋 New grid found:",!!O),console.log("🔘 New bulk actions found:",!!$),O){if(console.log("✅ Updating grid content..."),w.innerHTML=O.innerHTML,Object.assign(w.dataset,O.dataset),$){const P=document.querySelector(".flex.items-center.justify-between.mt-6.mb-4");if(P){const W=P.querySelector("label"),J=$.querySelector("label");W&&J&&(W.innerHTML=J.innerHTML,console.log("🔘 Updated bulk actions label"))}}console.log("🔧 Re-initializing components..."),NJ(),BK(),PJ(),BJ(),w.style.opacity="1",console.log("✅ Gallery refresh completed successfully")}else console.log("⚠️ No grid found in new content"),w.style.opacity="1"}catch(w){console.error("❌ Error refreshing gallery:",w);const f=document.getElementById("images-grid");f&&(f.style.opacity="1"),console.log("🔄 Falling back to full page reload"),window.location.reload()}}function BK(){var C;const w=document.getElementById("images-grid");if(!w)return;const f=((C=document.querySelector('input[name="csrf"]'))==null?void 0:C.value)||"",p=w.dataset.albumId;w.querySelectorAll("[data-cover-id]").forEach(O=>{O._boundCover||(O._boundCover=!0,O.addEventListener("click",async $=>{$.preventDefault(),$.stopPropagation();const P=O.getAttribute("data-cover-id");try{const W=await fetch(`${window.basePath||""}/admin/albums/${p}/cover/${P}`,{method:"POST",headers:{"X-CSRF-Token":f,Accept:"application/json"}});if(!W.ok)throw new Error(`HTTP ${W.status}`);window.refreshGalleryArea&&await window.refreshGalleryArea(),window.showToast&&window.showToast(or("admin.albums.cover_set","Cover set"),"success")}catch(W){console.error("Cover set failed:",W),window.showToast&&window.showToast(or("admin.albums.error_cover","Error setting cover"),"error");try{window.location.reload()}catch{}}}))}),w.querySelectorAll("[data-delete-id]").forEach(O=>{O._boundDelete||(O._boundDelete=!0,O.addEventListener("click",async $=>{var W;if($.preventDefault(),$.stopPropagation(),!confirm(or("admin.albums.delete_image_confirm","Delete this image?")))return;const P=O.getAttribute("data-delete-id");try{const J=await fetch(`${window.basePath||""}/admin/albums/${p}/images/${P}/delete`,{method:"POST",headers:{"X-CSRF-Token":f,Accept:"application/json"}});if(J.ok)(W=O.closest("[data-id]"))==null||W.remove(),window.refreshGalleryArea&&await window.refreshGalleryArea(),window.showToast&&window.showToast(or("admin.albums.image_deleted","Image deleted"),"success");else{const re=await J.text().catch(()=>"");console.error("Delete failed:",J.status,re),window.showToast&&window.showToast(re("admin.albums.error_delete","Deletion error"),"error");try{window.location.reload()}catch{}}}catch(J){console.error("Delete request error:",J),window.showToast&&window.showToast(or("admin.albums.error_delete","Deletion error"),"error");try{window.location.reload()}catch{}}}))})}function PJ(){function w(){const f=document.getElementById("bulk-delete"),C=Array.from(document.querySelectorAll("[data-select-id]:checked")).map(O=>O.getAttribute("data-select-id")).length>0;f&&(f.disabled=!C)}document.querySelectorAll("[data-select-id]").forEach(f=>{f.removeEventListener("change",w),f.addEventListener("change",w)}),w()}function BJ(){const w=document.getElementById("images-grid");if(!w)return;const f=w._modalClickHandler;f&&w.removeEventListener("click",f);const p=C=>{if(C.target.closest("[data-select-id]")||C.target.closest("[data-delete-id]")||C.target.closest("[data-cover-id]"))return;const O=C.target.closest("[data-id]");if(!O||!C.target.closest(".aspect-square"))return;const P=O.getAttribute("data-id"),W={alt_text:O.getAttribute("data-alt_text"),caption:O.getAttribute("data-caption"),camera_id:O.getAttribute("data-camera_id"),lens_id:O.getAttribute("data-lens_id"),film_id:O.getAttribute("data-film_id"),developer_id:O.getAttribute("data-developer_id"),lab_id:O.getAttribute("data-lab_id"),location_id:O.getAttribute("data-location_id"),custom_camera:O.getAttribute("data-custom_camera"),custom_lens:O.getAttribute("data-custom_lens"),custom_film:O.getAttribute("data-custom_film"),iso:O.getAttribute("data-iso"),shutter_speed:O.getAttribute("data-shutter_speed"),aperture:O.getAttribute("data-aperture")};window.openImageModal&&window.openImageModal(P,W,O)};w._modalClickHandler=p,w.addEventListener("click",p)}window.bindGridButtons=BK;window.rebindBulkSelection=PJ;window._adminInitialized||(window._adminInitialized=!0,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>window.AdminInit()):window.AdminInit());
