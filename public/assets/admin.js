var Xs=Object.defineProperty;var Et=s=>{throw TypeError(s)};var Ys=(s,e,t)=>e in s?Xs(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var y=(s,e,t)=>Ys(s,typeof e!="symbol"?e+"":e,t),Je=(s,e,t)=>e.has(s)||Et("Cannot "+t);var p=(s,e,t)=>(Je(s,e,"read from private field"),t?t.call(s):e.get(s)),w=(s,e,t)=>e.has(s)?Et("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),P=(s,e,t,i)=>(Je(s,e,"write to private field"),i?i.call(s,t):e.set(s,t),t),_=(s,e,t)=>(Je(s,e,"access private method"),t);function Js(s,e,t){const i=[];return s.forEach(r=>typeof r!="string"?i.push(r):e[Symbol.split](r).forEach((n,o,a)=>{n!==""&&i.push(n),o<a.length-1&&i.push(t)})),i}/**
 * Takes a string with placeholder variables like `%{smart_count} file selected`
 * and replaces it with values from options `{smart_count: 5}`
 *
 * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
 * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
 *
 * @param phrase that needs interpolation, with placeholders
 * @param options with values that will be used to replace placeholders
 */function xt(s,e){const t=/\$/g,i="$$$$";let r=[s];if(e==null)return r;for(const n of Object.keys(e))if(n!=="_"){let o=e[n];typeof o=="string"&&(o=t[Symbol.replace](o,i)),r=Js(r,new RegExp(`%\\{${n}\\}`,"g"),o)}return r}const Ks=s=>{throw new Error(`missing string: ${s}`)};var be,we,st;class os{constructor(e,{onMissingKey:t=Ks}={}){w(this,we);y(this,"locale");w(this,be);this.locale={strings:{},pluralize(i){return i===1?0:1}},Array.isArray(e)?e.forEach(_(this,we,st),this):_(this,we,st).call(this,e),P(this,be,t)}translate(e,t){return this.translateArray(e,t).join("")}translateArray(e,t){let i=this.locale.strings[e];if(i==null&&(p(this,be).call(this,e),i=e),typeof i=="object"){if(t&&typeof t.smart_count<"u"){const n=this.locale.pluralize(t.smart_count);return xt(i[n],t)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof i!="string")throw new Error("string was not a string");return xt(i,t)}}be=new WeakMap,we=new WeakSet,st=function(e){if(!(e!=null&&e.strings))return;const t=this.locale;Object.assign(this.locale,{strings:{...t.strings,...e.strings},pluralize:e.pluralize||t.pluralize})};class as{constructor(e,t){y(this,"uppy");y(this,"opts");y(this,"id");y(this,"defaultLocale");y(this,"i18n");y(this,"i18nArray");y(this,"type");y(this,"VERSION");this.uppy=e,this.opts=t??{}}getPluginState(){const{plugins:e}=this.uppy.getState();return(e==null?void 0:e[this.id])||{}}setPluginState(e){const{plugins:t}=this.uppy.getState();this.uppy.setState({plugins:{...t,[this.id]:{...t[this.id],...e}}})}setOptions(e){this.opts={...this.opts,...e},this.setPluginState(void 0),this.i18nInit()}i18nInit(){const e=new os([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState(void 0)}addTarget(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(e){}afterUpdate(){}}function Ke(s){return s<10?`0${s}`:s.toString()}function Me(){const s=new Date,e=Ke(s.getHours()),t=Ke(s.getMinutes()),i=Ke(s.getSeconds());return`${e}:${t}:${i}`}const Qs={debug:()=>{},warn:()=>{},error:(...s)=>console.error(`[Uppy] [${Me()}]`,...s)},Zs={debug:(...s)=>console.debug(`[Uppy] [${Me()}]`,...s),warn:(...s)=>console.warn(`[Uppy] [${Me()}]`,...s),error:(...s)=>console.error(`[Uppy] [${Me()}]`,...s)};function ei(s){return typeof s!="object"||s===null||!("nodeType"in s)?!1:s.nodeType===Node.ELEMENT_NODE}function ti(s,e=document){return typeof s=="string"?e.querySelector(s):ei(s)?s:null}function si(s){for(;s&&!s.dir;)s=s.parentNode;return s==null?void 0:s.dir}var Ve,v,ls,K,Pt,us,ds,cs,bt,it,rt,ve={},ps=[],ii=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Oe=Array.isArray;function W(s,e){for(var t in e)s[t]=e[t];return s}function wt(s){s&&s.parentNode&&s.parentNode.removeChild(s)}function nt(s,e,t){var i,r,n,o={};for(n in e)n=="key"?i=e[n]:n=="ref"?r=e[n]:o[n]=e[n];if(arguments.length>2&&(o.children=arguments.length>3?Ve.call(arguments,2):t),typeof s=="function"&&s.defaultProps!=null)for(n in s.defaultProps)o[n]===void 0&&(o[n]=s.defaultProps[n]);return Ce(s,o,i,r,null)}function Ce(s,e,t,i,r){var n={type:s,props:e,key:t,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++ls,__i:-1,__u:0};return r==null&&v.vnode!=null&&v.vnode(n),n}function he(s){return s.children}function G(s,e){this.props=s,this.context=e}function fe(s,e){if(e==null)return s.__?fe(s.__,s.__i+1):null;for(var t;e<s.__k.length;e++)if((t=s.__k[e])!=null&&t.__e!=null)return t.__e;return typeof s.type=="function"?fe(s):null}function hs(s){var e,t;if((s=s.__)!=null&&s.__c!=null){for(s.__e=s.__c.base=null,e=0;e<s.__k.length;e++)if((t=s.__k[e])!=null&&t.__e!=null){s.__e=s.__c.base=t.__e;break}return hs(s)}}function Ot(s){(!s.__d&&(s.__d=!0)&&K.push(s)&&!De.__r++||Pt!=v.debounceRendering)&&((Pt=v.debounceRendering)||us)(De)}function De(){for(var s,e,t,i,r,n,o,a=1;K.length;)K.length>a&&K.sort(ds),s=K.shift(),a=K.length,s.__d&&(t=void 0,r=(i=(e=s).__v).__e,n=[],o=[],e.__P&&((t=W({},i)).__v=i.__v+1,v.vnode&&v.vnode(t),St(e.__P,t,i,e.__n,e.__P.namespaceURI,32&i.__u?[r]:null,n,r??fe(i),!!(32&i.__u),o),t.__v=i.__v,t.__.__k[t.__i]=t,_s(n,t,o),t.__e!=r&&hs(t)));De.__r=0}function fs(s,e,t,i,r,n,o,a,l,u,c){var d,f,h,m,F,x,S,b=i&&i.__k||ps,A=e.length;for(l=ri(t,e,b,l,A),d=0;d<A;d++)(h=t.__k[d])!=null&&(f=h.__i==-1?ve:b[h.__i]||ve,h.__i=d,x=St(s,h,f,r,n,o,a,l,u,c),m=h.__e,h.ref&&f.ref!=h.ref&&(f.ref&&Ft(f.ref,null,h),c.push(h.ref,h.__c||m,h)),F==null&&m!=null&&(F=m),(S=!!(4&h.__u))||f.__k===h.__k?l=gs(h,l,s,S):typeof h.type=="function"&&x!==void 0?l=x:m&&(l=m.nextSibling),h.__u&=-7);return t.__e=F,l}function ri(s,e,t,i,r){var n,o,a,l,u,c=t.length,d=c,f=0;for(s.__k=new Array(r),n=0;n<r;n++)(o=e[n])!=null&&typeof o!="boolean"&&typeof o!="function"?(l=n+f,(o=s.__k[n]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?Ce(null,o,null,null,null):Oe(o)?Ce(he,{children:o},null,null,null):o.constructor==null&&o.__b>0?Ce(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=s,o.__b=s.__b+1,a=null,(u=o.__i=ni(o,t,l,d))!=-1&&(d--,(a=t[u])&&(a.__u|=2)),a==null||a.__v==null?(u==-1&&(r>c?f--:r<c&&f++),typeof o.type!="function"&&(o.__u|=4)):u!=l&&(u==l-1?f--:u==l+1?f++:(u>l?f--:f++,o.__u|=4))):s.__k[n]=null;if(d)for(n=0;n<c;n++)(a=t[n])!=null&&!(2&a.__u)&&(a.__e==i&&(i=fe(a)),ys(a,a));return i}function gs(s,e,t,i){var r,n;if(typeof s.type=="function"){for(r=s.__k,n=0;r&&n<r.length;n++)r[n]&&(r[n].__=s,e=gs(r[n],e,t,i));return e}s.__e!=e&&(i&&(e&&s.type&&!e.parentNode&&(e=fe(s)),t.insertBefore(s.__e,e||null)),e=s.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Le(s,e){return e=e||[],s==null||typeof s=="boolean"||(Oe(s)?s.some(function(t){Le(t,e)}):e.push(s)),e}function ni(s,e,t,i){var r,n,o,a=s.key,l=s.type,u=e[t],c=u!=null&&(2&u.__u)==0;if(u===null&&s.key==null||c&&a==u.key&&l==u.type)return t;if(i>(c?1:0)){for(r=t-1,n=t+1;r>=0||n<e.length;)if((u=e[o=r>=0?r--:n++])!=null&&!(2&u.__u)&&a==u.key&&l==u.type)return o}return-1}function $t(s,e,t){e[0]=="-"?s.setProperty(e,t??""):s[e]=t==null?"":typeof t!="number"||ii.test(e)?t:t+"px"}function $e(s,e,t,i,r){var n,o;e:if(e=="style")if(typeof t=="string")s.style.cssText=t;else{if(typeof i=="string"&&(s.style.cssText=i=""),i)for(e in i)t&&e in t||$t(s.style,e,"");if(t)for(e in t)i&&t[e]==i[e]||$t(s.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")n=e!=(e=e.replace(cs,"$1")),o=e.toLowerCase(),e=o in s||e=="onFocusOut"||e=="onFocusIn"?o.slice(2):e.slice(2),s.l||(s.l={}),s.l[e+n]=t,t?i?t.u=i.u:(t.u=bt,s.addEventListener(e,n?rt:it,n)):s.removeEventListener(e,n?rt:it,n);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in s)try{s[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?s.removeAttribute(e):s.setAttribute(e,e=="popover"&&t==1?"":t))}}function Ut(s){return function(e){if(this.l){var t=this.l[e.type+s];if(e.t==null)e.t=bt++;else if(e.t<t.u)return;return t(v.event?v.event(e):e)}}}function St(s,e,t,i,r,n,o,a,l,u){var c,d,f,h,m,F,x,S,b,A,U,T,E,O,C,V,Ye,j=e.type;if(e.constructor!=null)return null;128&t.__u&&(l=!!(32&t.__u),n=[a=e.__e=t.__e]),(c=v.__b)&&c(e);e:if(typeof j=="function")try{if(S=e.props,b="prototype"in j&&j.prototype.render,A=(c=j.contextType)&&i[c.__c],U=c?A?A.props.value:c.__:i,t.__c?x=(d=e.__c=t.__c).__=d.__E:(b?e.__c=d=new j(S,U):(e.__c=d=new G(S,U),d.constructor=j,d.render=ai),A&&A.sub(d),d.props=S,d.state||(d.state={}),d.context=U,d.__n=i,f=d.__d=!0,d.__h=[],d._sb=[]),b&&d.__s==null&&(d.__s=d.state),b&&j.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=W({},d.__s)),W(d.__s,j.getDerivedStateFromProps(S,d.__s))),h=d.props,m=d.state,d.__v=e,f)b&&j.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),b&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(b&&j.getDerivedStateFromProps==null&&S!==h&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(S,U),!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(S,d.__s,U)===!1||e.__v==t.__v){for(e.__v!=t.__v&&(d.props=S,d.state=d.__s,d.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(ie){ie&&(ie.__=e)}),T=0;T<d._sb.length;T++)d.__h.push(d._sb[T]);d._sb=[],d.__h.length&&o.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(S,d.__s,U),b&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(h,m,F)})}if(d.context=U,d.props=S,d.__P=s,d.__e=!1,E=v.__r,O=0,b){for(d.state=d.__s,d.__d=!1,E&&E(e),c=d.render(d.props,d.state,d.context),C=0;C<d._sb.length;C++)d.__h.push(d._sb[C]);d._sb=[]}else do d.__d=!1,E&&E(e),c=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++O<25);d.state=d.__s,d.getChildContext!=null&&(i=W(W({},i),d.getChildContext())),b&&!f&&d.getSnapshotBeforeUpdate!=null&&(F=d.getSnapshotBeforeUpdate(h,m)),V=c,c!=null&&c.type===he&&c.key==null&&(V=ms(c.props.children)),a=fs(s,Oe(V)?V:[V],e,t,i,r,n,o,a,l,u),d.base=e.__e,e.__u&=-161,d.__h.length&&o.push(d),x&&(d.__E=d.__=null)}catch(ie){if(e.__v=null,l||n!=null)if(ie.then){for(e.__u|=l?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;n[n.indexOf(a)]=null,e.__e=a}else{for(Ye=n.length;Ye--;)wt(n[Ye]);ot(e)}else e.__e=t.__e,e.__k=t.__k,ie.then||ot(e);v.__e(ie,e,t)}else n==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):a=e.__e=oi(t.__e,e,t,i,r,n,o,l,u);return(c=v.diffed)&&c(e),128&e.__u?void 0:a}function ot(s){s&&s.__c&&(s.__c.__e=!0),s&&s.__k&&s.__k.forEach(ot)}function _s(s,e,t){for(var i=0;i<t.length;i++)Ft(t[i],t[++i],t[++i]);v.__c&&v.__c(e,s),s.some(function(r){try{s=r.__h,r.__h=[],s.some(function(n){n.call(r)})}catch(n){v.__e(n,r.__v)}})}function ms(s){return typeof s!="object"||s==null||s.__b&&s.__b>0?s:Oe(s)?s.map(ms):W({},s)}function oi(s,e,t,i,r,n,o,a,l){var u,c,d,f,h,m,F,x=t.props,S=e.props,b=e.type;if(b=="svg"?r="http://www.w3.org/2000/svg":b=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),n!=null){for(u=0;u<n.length;u++)if((h=n[u])&&"setAttribute"in h==!!b&&(b?h.localName==b:h.nodeType==3)){s=h,n[u]=null;break}}if(s==null){if(b==null)return document.createTextNode(S);s=document.createElementNS(r,b,S.is&&S),a&&(v.__m&&v.__m(e,n),a=!1),n=null}if(b==null)x===S||a&&s.data==S||(s.data=S);else{if(n=n&&Ve.call(s.childNodes),x=t.props||ve,!a&&n!=null)for(x={},u=0;u<s.attributes.length;u++)x[(h=s.attributes[u]).name]=h.value;for(u in x)if(h=x[u],u!="children"){if(u=="dangerouslySetInnerHTML")d=h;else if(!(u in S)){if(u=="value"&&"defaultValue"in S||u=="checked"&&"defaultChecked"in S)continue;$e(s,u,null,h,r)}}for(u in S)h=S[u],u=="children"?f=h:u=="dangerouslySetInnerHTML"?c=h:u=="value"?m=h:u=="checked"?F=h:a&&typeof h!="function"||x[u]===h||$e(s,u,h,x[u],r);if(c)a||d&&(c.__html==d.__html||c.__html==s.innerHTML)||(s.innerHTML=c.__html),e.__k=[];else if(d&&(s.innerHTML=""),fs(e.type=="template"?s.content:s,Oe(f)?f:[f],e,t,i,b=="foreignObject"?"http://www.w3.org/1999/xhtml":r,n,o,n?n[0]:t.__k&&fe(t,0),a,l),n!=null)for(u=n.length;u--;)wt(n[u]);a||(u="value",b=="progress"&&m==null?s.removeAttribute("value"):m!=null&&(m!==s[u]||b=="progress"&&!m||b=="option"&&m!=x[u])&&$e(s,u,m,x[u],r),u="checked",F!=null&&F!=s[u]&&$e(s,u,F,x[u],r))}return s}function Ft(s,e,t){try{if(typeof s=="function"){var i=typeof s.__u=="function";i&&s.__u(),i&&e==null||(s.__u=s(e))}else s.current=e}catch(r){v.__e(r,t)}}function ys(s,e,t){var i,r;if(v.unmount&&v.unmount(s),(i=s.ref)&&(i.current&&i.current!=s.__e||Ft(i,null,e)),(i=s.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(n){v.__e(n,e)}i.base=i.__P=null}if(i=s.__k)for(r=0;r<i.length;r++)i[r]&&ys(i[r],e,t||typeof s.type!="function");t||wt(s.__e),s.__c=s.__=s.__e=void 0}function ai(s,e,t){return this.constructor(s,t)}function li(s,e,t){var i,r,n,o;e==document&&(e=document.documentElement),v.__&&v.__(s,e),r=(i=!1)?null:e.__k,n=[],o=[],St(e,s=e.__k=nt(he,null,[s]),r||ve,ve,e.namespaceURI,r?null:e.firstChild?Ve.call(e.childNodes):null,n,r?r.__e:e.firstChild,i,o),_s(n,s,o)}Ve=ps.slice,v={__e:function(s,e,t,i){for(var r,n,o;e=e.__;)if((r=e.__c)&&!r.__)try{if((n=r.constructor)&&n.getDerivedStateFromError!=null&&(r.setState(n.getDerivedStateFromError(s)),o=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(s,i||{}),o=r.__d),o)return r.__E=r}catch(a){s=a}throw s}},ls=0,G.prototype.setState=function(s,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=W({},this.state),typeof s=="function"&&(s=s(W({},t),this.props)),s&&W(t,s),s!=null&&this.__v&&(e&&this._sb.push(e),Ot(this))},G.prototype.forceUpdate=function(s){this.__v&&(this.__e=!0,s&&this.__h.push(s),Ot(this))},G.prototype.render=he,K=[],us=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ds=function(s,e){return s.__v.__b-e.__v.__b},De.__r=0,cs=/(PointerCapture)$|Capture$/i,bt=0,it=Ut(!1),rt=Ut(!0);var q,Qe,kt,vs=[],$=v,At=$.__b,Rt=$.__r,Nt=$.diffed,Mt=$.__c,Ct=$.unmount,jt=$.__;function ui(){for(var s;s=vs.shift();)if(s.__P&&s.__H)try{s.__H.__h.forEach(je),s.__H.__h.forEach(at),s.__H.__h=[]}catch(e){s.__H.__h=[],$.__e(e,s.__v)}}$.__b=function(s){q=null,At&&At(s)},$.__=function(s,e){s&&e.__k&&e.__k.__m&&(s.__m=e.__k.__m),jt&&jt(s,e)},$.__r=function(s){Rt&&Rt(s);var e=(q=s.__c).__H;e&&(Qe===q?(e.__h=[],q.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(je),e.__h.forEach(at),e.__h=[])),Qe=q},$.diffed=function(s){Nt&&Nt(s);var e=s.__c;e&&e.__H&&(e.__H.__h.length&&(vs.push(e)!==1&&kt===$.requestAnimationFrame||((kt=$.requestAnimationFrame)||di)(ui)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),Qe=q=null},$.__c=function(s,e){e.some(function(t){try{t.__h.forEach(je),t.__h=t.__h.filter(function(i){return!i.__||at(i)})}catch(i){e.some(function(r){r.__h&&(r.__h=[])}),e=[],$.__e(i,t.__v)}}),Mt&&Mt(s,e)},$.unmount=function(s){Ct&&Ct(s);var e,t=s.__c;t&&t.__H&&(t.__H.__.forEach(function(i){try{je(i)}catch(r){e=r}}),t.__H=void 0,e&&$.__e(e,t.__v))};var It=typeof requestAnimationFrame=="function";function di(s){var e,t=function(){clearTimeout(i),It&&cancelAnimationFrame(e),setTimeout(s)},i=setTimeout(t,35);It&&(e=requestAnimationFrame(t))}function je(s){var e=q,t=s.__c;typeof t=="function"&&(s.__c=void 0,t()),q=e}function at(s){var e=q;s.__c=s.__(),q=e}function ci(s,e){for(var t in e)s[t]=e[t];return s}function Dt(s,e){for(var t in s)if(t!=="__source"&&!(t in e))return!0;for(var i in e)if(i!=="__source"&&s[i]!==e[i])return!0;return!1}function Lt(s,e){this.props=s,this.context=e}(Lt.prototype=new G).isPureReactComponent=!0,Lt.prototype.shouldComponentUpdate=function(s,e){return Dt(this.props,s)||Dt(this.state,e)};var qt=v.__b;v.__b=function(s){s.type&&s.type.__f&&s.ref&&(s.props.ref=s.ref,s.ref=null),qt&&qt(s)};var pi=v.__e;v.__e=function(s,e,t,i){if(s.then){for(var r,n=e;n=n.__;)if((r=n.__c)&&r.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),r.__c(s,e)}pi(s,e,t,i)};var zt=v.unmount;function bs(s,e,t){return s&&(s.__c&&s.__c.__H&&(s.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),s.__c.__H=null),(s=ci({},s)).__c!=null&&(s.__c.__P===t&&(s.__c.__P=e),s.__c.__e=!0,s.__c=null),s.__k=s.__k&&s.__k.map(function(i){return bs(i,e,t)})),s}function ws(s,e,t){return s&&t&&(s.__v=null,s.__k=s.__k&&s.__k.map(function(i){return ws(i,e,t)}),s.__c&&s.__c.__P===e&&(s.__e&&t.appendChild(s.__e),s.__c.__e=!0,s.__c.__P=t)),s}function Ze(){this.__u=0,this.o=null,this.__b=null}function Ss(s){var e=s.__.__c;return e&&e.__a&&e.__a(s)}function Ue(){this.i=null,this.l=null}v.unmount=function(s){var e=s.__c;e&&e.__R&&e.__R(),e&&32&s.__u&&(s.type=null),zt&&zt(s)},(Ze.prototype=new G).__c=function(s,e){var t=e.__c,i=this;i.o==null&&(i.o=[]),i.o.push(t);var r=Ss(i.__v),n=!1,o=function(){n||(n=!0,t.__R=null,r?r(a):a())};t.__R=o;var a=function(){if(!--i.__u){if(i.state.__a){var l=i.state.__a;i.__v.__k[0]=ws(l,l.__c.__P,l.__c.__O)}var u;for(i.setState({__a:i.__b=null});u=i.o.pop();)u.forceUpdate()}};i.__u++||32&e.__u||i.setState({__a:i.__b=i.__v.__k[0]}),s.then(o,o)},Ze.prototype.componentWillUnmount=function(){this.o=[]},Ze.prototype.render=function(s,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=bs(this.__b,t,i.__O=i.__P)}this.__b=null}var r=e.__a&&nt(he,null,s.fallback);return r&&(r.__u&=-33),[nt(he,null,e.__a?null:s.children),r]};var Bt=function(s,e,t){if(++t[1]===t[0]&&s.l.delete(e),s.props.revealOrder&&(s.props.revealOrder[0]!=="t"||!s.l.size))for(t=s.i;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;s.i=t=t[2]}};(Ue.prototype=new G).__a=function(s){var e=this,t=Ss(e.__v),i=e.l.get(s);return i[0]++,function(r){var n=function(){e.props.revealOrder?(i.push(r),Bt(e,s,i)):r()};t?t(n):n()}},Ue.prototype.render=function(s){this.i=null,this.l=new Map;var e=Le(s.children);s.revealOrder&&s.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.l.set(e[t],this.i=[1,0,this.i]);return s.children},Ue.prototype.componentDidUpdate=Ue.prototype.componentDidMount=function(){var s=this;this.l.forEach(function(e,t){Bt(s,t,e)})};var hi=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,fi=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,gi=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,_i=/[A-Z0-9]/g,mi=typeof document<"u",yi=function(s){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(s)};function Ht(s,e,t){return e.__k==null&&(e.textContent=""),li(s,e),typeof t=="function"&&t(),s?s.__c:null}G.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(s){Object.defineProperty(G.prototype,s,{configurable:!0,get:function(){return this["UNSAFE_"+s]},set:function(e){Object.defineProperty(this,s,{configurable:!0,writable:!0,value:e})}})});var Wt=v.event;function vi(){}function bi(){return this.cancelBubble}function wi(){return this.defaultPrevented}v.event=function(s){return Wt&&(s=Wt(s)),s.persist=vi,s.isPropagationStopped=bi,s.isDefaultPrevented=wi,s.nativeEvent=s};var Si={enumerable:!1,configurable:!0,get:function(){return this.class}},Gt=v.vnode;v.vnode=function(s){typeof s.type=="string"&&function(e){var t=e.props,i=e.type,r={},n=i.indexOf("-")===-1;for(var o in t){var a=t[o];if(!(o==="value"&&"defaultValue"in t&&a==null||mi&&o==="children"&&i==="noscript"||o==="class"||o==="className")){var l=o.toLowerCase();o==="defaultValue"&&"value"in t&&t.value==null?o="value":o==="download"&&a===!0?a="":l==="translate"&&a==="no"?a=!1:l[0]==="o"&&l[1]==="n"?l==="ondoubleclick"?o="ondblclick":l!=="onchange"||i!=="input"&&i!=="textarea"||yi(t.type)?l==="onfocus"?o="onfocusin":l==="onblur"?o="onfocusout":gi.test(o)&&(o=l):l=o="oninput":n&&fi.test(o)?o=o.replace(_i,"-$&").toLowerCase():a===null&&(a=void 0),l==="oninput"&&r[o=l]&&(o="oninputCapture"),r[o]=a}}i=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=Le(t.children).forEach(function(u){u.props.selected=r.value.indexOf(u.props.value)!=-1})),i=="select"&&r.defaultValue!=null&&(r.value=Le(t.children).forEach(function(u){u.props.selected=r.multiple?r.defaultValue.indexOf(u.props.value)!=-1:r.defaultValue==u.props.value})),t.class&&!t.className?(r.class=t.class,Object.defineProperty(r,"className",Si)):(t.className&&!t.class||t.class&&t.className)&&(r.class=r.className=t.className),e.props=r}(s),s.$$typeof=hi,Gt&&Gt(s)};var Vt=v.__r;v.__r=function(s){Vt&&Vt(s),s.__c};var Xt=v.diffed;v.diffed=function(s){Xt&&Xt(s);var e=s.props,t=s.__e;t!=null&&s.type==="textarea"&&"value"in e&&e.value!==t.value&&(t.value=e.value==null?"":e.value)};function Fi(s){let e=null,t;return(...i)=>(t=i,e||(e=Promise.resolve().then(()=>(e=null,s(...t)))),e)}var Se;const qe=class qe extends as{constructor(){super(...arguments);w(this,Se);y(this,"isTargetDOMEl");y(this,"el");y(this,"parent");y(this,"title")}getTargetPlugin(t){let i;if(typeof(t==null?void 0:t.addTarget)=="function")i=t,i instanceof qe||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:i,UIPlugin:qe}}));else if(typeof t=="function"){const r=t;this.uppy.iteratePlugins(n=>{n instanceof r&&(i=n)})}return i}mount(t,i){const r=i.id,n=ti(t);if(n){this.isTargetDOMEl=!0;const l=document.createElement("div");return l.classList.add("uppy-Root"),P(this,Se,Fi(u=>{this.uppy.getPlugin(this.id)&&(Ht(this.render(u,l),l),this.afterUpdate())})),this.uppy.log(`Installing ${r} to a DOM element '${t}'`),this.opts.replaceTargetContent&&(n.innerHTML=""),Ht(this.render(this.uppy.getState(),l),l),this.el=l,n.appendChild(l),l.dir=this.opts.direction||si(l)||"ltr",this.onMount(),this.el}const o=this.getTargetPlugin(t);if(o)return this.uppy.log(`Installing ${r} to ${o.id}`),this.parent=o,this.el=o.addTarget(i),this.onMount(),this.el;this.uppy.log(`Not installing ${r}`);let a=`Invalid target option given to ${r}.`;throw typeof t=="function"?a+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":a+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(a)}render(t,i){throw new Error("Extend the render method to add your plugin to a DOM element")}update(t){var i;this.el!=null&&((i=p(this,Se))==null||i.call(this,t))}unmount(){var t;this.isTargetDOMEl&&((t=this.el)==null||t.remove()),this.onUnmount()}onMount(){}onUnmount(){}};Se=new WeakMap;let lt=qe;const Ti="4.3.2",Ei={version:Ti};var re,ze,Ts;class Fs{constructor(){w(this,ze);y(this,"state",{});w(this,re,new Set)}getState(){return this.state}setState(e){const t={...this.state},i={...this.state,...e};this.state=i,_(this,ze,Ts).call(this,t,i,e)}subscribe(e){return p(this,re).add(e),()=>{p(this,re).delete(e)}}}re=new WeakMap,ze=new WeakSet,Ts=function(...e){p(this,re).forEach(t=>{t(...e)})},y(Fs,"VERSION",Ei.version);function Es(s){const e=s.lastIndexOf(".");return e===-1||e===s.length-1?{name:s,extension:void 0}:{name:s.slice(0,e),extension:s.slice(e+1)}}const Yt={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",msg:"application/vnd.ms-outlook",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function xs(s){var t;if(s.type)return s.type;const e=s.name?(t=Es(s.name).extension)==null?void 0:t.toLowerCase():null;return e&&e in Yt?Yt[e]:"application/octet-stream"}function xi(s){return s.charCodeAt(0).toString(32)}function Jt(s){let e="";return s.replace(/[^A-Z0-9]/gi,t=>(e+=`-${xi(t)}`,"/"))+e}function Pi(s,e){let t=e||"uppy";return typeof s.name=="string"&&(t+=`-${Jt(s.name.toLowerCase())}`),s.type!==void 0&&(t+=`-${s.type}`),s.meta&&typeof s.meta.relativePath=="string"&&(t+=`-${Jt(s.meta.relativePath.toLowerCase())}`),s.data.size!==void 0&&(t+=`-${s.data.size}`),s.data.lastModified!==void 0&&(t+=`-${s.data.lastModified}`),t}function Oi(s){return!s.isRemote||!s.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(s.remote.provider)}function $i(s,e){if(Oi(s))return s.id;const t=xs(s);return Pi({...s,type:t},e)}var ke=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xe(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function Ui(s){var e=typeof s;return s!=null&&(e=="object"||e=="function")}var Tt=Ui,ki=typeof ke=="object"&&ke&&ke.Object===Object&&ke,Ai=ki,Ri=Ai,Ni=typeof self=="object"&&self&&self.Object===Object&&self,Mi=Ri||Ni||Function("return this")(),Ps=Mi,Ci=Ps,ji=function(){return Ci.Date.now()},Ii=ji,Di=/\s/;function Li(s){for(var e=s.length;e--&&Di.test(s.charAt(e)););return e}var qi=Li,zi=qi,Bi=/^\s+/;function Hi(s){return s&&s.slice(0,zi(s)+1).replace(Bi,"")}var Wi=Hi,Gi=Ps,Vi=Gi.Symbol,Os=Vi,Kt=Os,$s=Object.prototype,Xi=$s.hasOwnProperty,Yi=$s.toString,ge=Kt?Kt.toStringTag:void 0;function Ji(s){var e=Xi.call(s,ge),t=s[ge];try{s[ge]=void 0;var i=!0}catch{}var r=Yi.call(s);return i&&(e?s[ge]=t:delete s[ge]),r}var Ki=Ji,Qi=Object.prototype,Zi=Qi.toString;function er(s){return Zi.call(s)}var tr=er,Qt=Os,sr=Ki,ir=tr,rr="[object Null]",nr="[object Undefined]",Zt=Qt?Qt.toStringTag:void 0;function or(s){return s==null?s===void 0?nr:rr:Zt&&Zt in Object(s)?sr(s):ir(s)}var ar=or;function lr(s){return s!=null&&typeof s=="object"}var ur=lr,dr=ar,cr=ur,pr="[object Symbol]";function hr(s){return typeof s=="symbol"||cr(s)&&dr(s)==pr}var fr=hr,gr=Wi,es=Tt,_r=fr,ts=NaN,mr=/^[-+]0x[0-9a-f]+$/i,yr=/^0b[01]+$/i,vr=/^0o[0-7]+$/i,br=parseInt;function wr(s){if(typeof s=="number")return s;if(_r(s))return ts;if(es(s)){var e=typeof s.valueOf=="function"?s.valueOf():s;s=es(e)?e+"":e}if(typeof s!="string")return s===0?s:+s;s=gr(s);var t=yr.test(s);return t||vr.test(s)?br(s.slice(2),t?2:8):mr.test(s)?ts:+s}var Sr=wr,Fr=Tt,et=Ii,ss=Sr,Tr="Expected a function",Er=Math.max,xr=Math.min;function Pr(s,e,t){var i,r,n,o,a,l,u=0,c=!1,d=!1,f=!0;if(typeof s!="function")throw new TypeError(Tr);e=ss(e)||0,Fr(t)&&(c=!!t.leading,d="maxWait"in t,n=d?Er(ss(t.maxWait)||0,e):n,f="trailing"in t?!!t.trailing:f);function h(E){var O=i,C=r;return i=r=void 0,u=E,o=s.apply(C,O),o}function m(E){return u=E,a=setTimeout(S,e),c?h(E):o}function F(E){var O=E-l,C=E-u,V=e-O;return d?xr(V,n-C):V}function x(E){var O=E-l,C=E-u;return l===void 0||O>=e||O<0||d&&C>=n}function S(){var E=et();if(x(E))return b(E);a=setTimeout(S,F(E))}function b(E){return a=void 0,f&&i?h(E):(i=r=void 0,o)}function A(){a!==void 0&&clearTimeout(a),u=0,i=l=r=a=void 0}function U(){return a===void 0?o:b(et())}function T(){var E=et(),O=x(E);if(i=arguments,r=this,l=E,O){if(a===void 0)return m(l);if(d)return clearTimeout(a),a=setTimeout(S,e),h(l)}return a===void 0&&(a=setTimeout(S,e)),o}return T.cancel=A,T.flush=U,T}var Or=Pr,$r=Or,Ur=Tt,kr="Expected a function";function Ar(s,e,t){var i=!0,r=!0;if(typeof s!="function")throw new TypeError(kr);return Ur(t)&&(i="leading"in t?!!t.leading:i,r="trailing"in t?!!t.trailing:r),$r(s,e,{leading:i,maxWait:e,trailing:r})}var Rr=Ar;const Nr=Xe(Rr);var Mr=function(){var e={},t=e._fns={};e.emit=function(o,a,l,u,c,d,f){var h=i(o);h.length&&r(o,h,[a,l,u,c,d,f])},e.on=function(o,a){t[o]||(t[o]=[]),t[o].push(a)},e.once=function(o,a){function l(){a.apply(this,arguments),e.off(o,l)}this.on(o,l)},e.off=function(o,a){var l=[];if(o&&a){var u=this._fns[o],c=0,d=u?u.length:0;for(c;c<d;c++)u[c]!==a&&l.push(u[c])}l.length?this._fns[o]=l:delete this._fns[o]};function i(n){var o=t[n]?t[n]:[],a=n.indexOf(":"),l=a===-1?[n]:[n.substring(0,a),n.substring(a+1)],u=Object.keys(t),c=0,d=u.length;for(c;c<d;c++){var f=u[c];if(f==="*"&&(o=o.concat(t[f])),l.length===2&&l[0]===f){o=o.concat(t[f]);break}}return o}function r(n,o,a){var l=0,u=o.length;for(l;l<u&&o[l];l++)o[l].event=n,o[l].apply(o[l],a)}return e};const Cr=Xe(Mr);let jr="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Ir=(s=21)=>{let e="",t=s|0;for(;t--;)e+=jr[Math.random()*64|0];return e};const Dr="4.5.3",Lr={version:Dr};function qr(s,e){return e.name?e.name:s.split("/")[0]==="image"?`${s.split("/")[0]}.${s.split("/")[1]}`:"noname"}const zr={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",logIn:"Log in",pickFiles:"Pick files",pickPhotos:"Pick photos",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed",pleaseWait:"Please wait"}};var Br=function(e){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected a number, got ${typeof e}`);const t=e<0;let i=Math.abs(e);if(t&&(i=-i),i===0)return"0 B";const r=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],n=Math.min(Math.floor(Math.log(i)/Math.log(1024)),r.length-1),o=Number(i/1024**n),a=r[n];return`${o>=10||o%1===0?Math.round(o):o.toFixed(1)} ${a}`};const Ae=Xe(Br);function Us(s,e){this.text=s=s||"",this.hasWild=~s.indexOf("*"),this.separator=e,this.parts=s.split(e)}Us.prototype.match=function(s){var e=!0,t=this.parts,i,r=t.length,n;if(typeof s=="string"||s instanceof String)if(!this.hasWild&&this.text!=s)e=!1;else{for(n=(s||"").split(this.separator),i=0;e&&i<r;i++)t[i]!=="*"&&(i<n.length?e=t[i]===n[i]:e=!1);e=e&&n}else if(typeof s.splice=="function")for(e=[],i=s.length;i--;)this.match(s[i])&&(e[e.length]=s[i]);else if(typeof s=="object"){e={};for(var o in s)this.match(o)&&(e[o]=s[o])}return e};var Hr=function(s,e,t){var i=new Us(s,t||/[\/\.]/);return typeof e<"u"?i.match(e):i},Wr=Hr,Gr=/[\/\+\.]/,Vr=function(s,e){function t(i){var r=Wr(i,s,Gr);return r&&r.length>=2}return e?t(e.split(";")[0]):t};const Xr=Xe(Vr),Yr={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]};class M extends Error{constructor(t,i){super(t);y(this,"isUserFacing");y(this,"file");y(this,"isRestriction",!0);this.isUserFacing=(i==null?void 0:i.isUserFacing)??!0,i!=null&&i.file&&(this.file=i.file)}}class Jr{constructor(e,t){y(this,"getI18n");y(this,"getOpts");this.getI18n=t,this.getOpts=()=>{var r;const i=e();if(((r=i.restrictions)==null?void 0:r.allowedFileTypes)!=null&&!Array.isArray(i.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return i}}validateAggregateRestrictions(e,t){const{maxTotalFileSize:i,maxNumberOfFiles:r}=this.getOpts().restrictions;if(r&&e.filter(o=>!o.isGhost).length+t.length>r)throw new M(`${this.getI18n()("youCanOnlyUploadX",{smart_count:r})}`);if(i){const n=[...e,...t].reduce((o,a)=>o+(a.size??0),0);if(n>i)throw new M(this.getI18n()("aggregateExceedsSize",{sizeAllowed:Ae(i),size:Ae(n)}))}}validateSingleFile(e){const{maxFileSize:t,minFileSize:i,allowedFileTypes:r}=this.getOpts().restrictions;if(r&&!r.some(o=>o.includes("/")?e.type?Xr(e.type.replace(/;.*?$/,""),o):!1:o[0]==="."&&e.extension?e.extension.toLowerCase()===o.slice(1).toLowerCase():!1)){const o=r.join(", ");throw new M(this.getI18n()("youCanOnlyUploadFileTypes",{types:o}),{file:e})}if(t&&e.size!=null&&e.size>t)throw new M(this.getI18n()("exceedsSize",{size:Ae(t),file:e.name??this.getI18n()("unnamed")}),{file:e});if(i&&e.size!=null&&e.size<i)throw new M(this.getI18n()("inferiorSize",{size:Ae(i)}),{file:e})}validate(e,t){t.forEach(i=>{this.validateSingleFile(i)}),this.validateAggregateRestrictions(e,t)}validateMinNumberOfFiles(e){const{minNumberOfFiles:t}=this.getOpts().restrictions;if(t&&Object.keys(e).length<t)throw new M(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:t}))}getMissingRequiredMetaFields(e){const t=new M(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:e.name??this.getI18n()("unnamed")})),{requiredMetaFields:i}=this.getOpts().restrictions,r=[];for(const n of i)(!Object.hasOwn(e.meta,n)||e.meta[n]==="")&&r.push(n);return{missingFields:r,error:t}}}function Kr(s){if(s==null&&typeof navigator<"u"&&(s=navigator.userAgent),!s)return!0;const e=/Edge\/(\d+\.\d+)/.exec(s);if(!e)return!0;const i=e[1].split(".",2),r=parseInt(i[0],10),n=parseInt(i[1],10);return r<15||r===15&&n<15063||r>18||r===18&&n>=18218}const Re={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null};var R,N,Fe,Q,ne,oe,Z,g,J,dt,ks,ct,As,pt,ht,ft,gt,Be,_t,ee,Rs,Ns,Y,Te,_e,Ms,Ie,me;const He=class He{constructor(e){w(this,g);w(this,R,Object.create(null));w(this,N);w(this,Fe);w(this,Q,Cr());w(this,ne,new Set);w(this,oe,new Set);w(this,Z,new Set);y(this,"defaultLocale");y(this,"locale");y(this,"opts");y(this,"store");y(this,"i18n");y(this,"i18nArray");y(this,"scheduledAutoProceed",null);y(this,"wasOffline",!1);w(this,Be,(e,t)=>{const i=e?this.getFile(e.id):void 0;if(e==null||!i){this.log(`Not setting progress for a file that has been removed: ${e==null?void 0:e.id}`);return}if(i.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${e.id}`);return}const r={bytesTotal:t.bytesTotal,percentage:t.bytesTotal!=null&&Number.isFinite(t.bytesTotal)&&t.bytesTotal>0?Math.round(t.bytesUploaded/t.bytesTotal*100):void 0};i.progress.uploadStarted!=null?this.setFileState(e.id,{progress:{...i.progress,...r,bytesUploaded:t.bytesUploaded}}):this.setFileState(e.id,{progress:{...i.progress,...r}}),p(this,ee).call(this)});w(this,ee,Nr(()=>_(this,g,_t).call(this),500,{leading:!0,trailing:!0}));w(this,Y,this.updateOnlineStatus.bind(this));w(this,Te,new Map);this.defaultLocale=zr;const t={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:Yr,meta:{},onBeforeFileAdded:(r,n)=>!Object.hasOwn(n,r.id),onBeforeUpload:r=>r,store:new Fs,logger:Qs,infoTimeout:5e3},i={...t,...e};this.opts={...i,restrictions:{...t.restrictions,...e==null?void 0:e.restrictions}},e!=null&&e.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e!=null&&e.debug&&(this.opts.logger=Zs),this.log(`Using Core v${He.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({...Re,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:Kr(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),P(this,N,new Jr(()=>this.opts,()=>this.i18n)),P(this,Fe,this.store.subscribe((r,n,o)=>{this.emit("state-update",r,n,o),this.updateAll(n)})),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),_(this,g,Ns).call(this)}emit(e,...t){p(this,Q).emit(e,...t)}on(e,t){return p(this,Q).on(e,t),this}once(e,t){return p(this,Q).once(e,t),this}off(e,t){return p(this,Q).off(e,t),this}updateAll(e){this.iteratePlugins(t=>{t.update(e)})}setState(e){this.store.setState(e)}getState(){return this.store.getState()}patchFilesState(e){const t=this.getState().files;this.setState({files:{...t,...Object.fromEntries(Object.entries(e).map(([i,r])=>[i,{...t[i],...r}]))}})}setFileState(e,t){if(!this.getState().files[e])throw new Error(`Canâ€™t set state for ${e} (the file could have been removed)`);this.patchFilesState({[e]:t})}i18nInit(){const e=i=>this.log(`Missing i18n string: ${i}`,"error"),t=new os([this.defaultLocale,this.opts.locale],{onMissingKey:e});this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.locale=t.locale}setOptions(e){this.opts={...this.opts,...e,restrictions:{...this.opts.restrictions,...e==null?void 0:e.restrictions}},e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(t=>{t.setOptions(e)}),this.setState(void 0)}resetProgress(){const e={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},t={...this.getState().files},i=Object.create(null);Object.keys(t).forEach(r=>{i[r]={...t[r],progress:{...t[r].progress,...e},tus:void 0,transloadit:void 0}}),this.setState({files:i,...Re})}clear(){const{capabilities:e,currentUploads:t}=this.getState();if(Object.keys(t).length>0&&!e.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({...Re,files:{}})}addPreProcessor(e){p(this,ne).add(e)}removePreProcessor(e){return p(this,ne).delete(e)}addPostProcessor(e){p(this,Z).add(e)}removePostProcessor(e){return p(this,Z).delete(e)}addUploader(e){p(this,oe).add(e)}removeUploader(e){return p(this,oe).delete(e)}setMeta(e){const t={...this.getState().meta,...e},i={...this.getState().files};Object.keys(i).forEach(r=>{i[r]={...i[r],meta:{...i[r].meta,...e}}}),this.log("Adding metadata:"),this.log(e),this.setState({meta:t,files:i})}setFileMeta(e,t){const i={...this.getState().files};if(!i[e]){this.log(`Was trying to set metadata for a file that has been removed: ${e}`);return}const r={...i[e].meta,...t};i[e]={...i[e],meta:r},this.setState({files:i})}getFile(e){return this.getState().files[e]}getFiles(){const{files:e}=this.getState();return Object.values(e)}getFilesByIds(e){return e.map(t=>this.getFile(t))}getObjectOfFilesPerState(){const{files:e,totalProgress:t,error:i}=this.getState(),r=Object.values(e),n=[],o=[],a=[],l=[],u=[],c=[],d=[],f=[],h=[];for(const m of r){const{progress:F}=m;!F.uploadComplete&&F.uploadStarted&&(n.push(m),m.isPaused||f.push(m)),F.uploadStarted||o.push(m),(F.uploadStarted||F.preprocess||F.postprocess)&&a.push(m),F.uploadStarted&&l.push(m),m.isPaused&&u.push(m),F.uploadComplete&&c.push(m),m.error&&d.push(m),(F.preprocess||F.postprocess)&&h.push(m)}return{newFiles:o,startedFiles:a,uploadStartedFiles:l,pausedFiles:u,completeFiles:c,erroredFiles:d,inProgressFiles:n,inProgressNotPausedFiles:f,processingFiles:h,isUploadStarted:l.length>0,isAllComplete:t===100&&c.length===r.length&&h.length===0,isAllErrored:!!i&&d.length===r.length,isAllPaused:n.length!==0&&u.length===n.length,isUploadInProgress:n.length>0,isSomeGhost:r.some(m=>m.isGhost)}}validateRestrictions(e,t=this.getFiles()){try{p(this,N).validate(t,[e])}catch(i){return i}return null}validateSingleFile(e){try{p(this,N).validateSingleFile(e)}catch(t){return t.message}return null}validateAggregateRestrictions(e){const t=this.getFiles();try{p(this,N).validateAggregateRestrictions(t,e)}catch(i){return i.message}return null}checkIfFileAlreadyExists(e){const{files:t}=this.getState();return!!(t[e]&&!t[e].isGhost)}addFile(e){_(this,g,ct).call(this,e);const{nextFilesState:t,validFilesToAdd:i,errors:r}=_(this,g,ht).call(this,[e]),n=r.filter(a=>a.isRestriction);if(_(this,g,J).call(this,n),r.length>0)throw r[0];this.setState({files:t});const[o]=i;return this.emit("file-added",o),this.emit("files-added",i),this.log(`Added file: ${o.name}, ${o.id}, mime type: ${o.type}`),_(this,g,pt).call(this),o.id}addFiles(e){_(this,g,ct).call(this);const{nextFilesState:t,validFilesToAdd:i,errors:r}=_(this,g,ht).call(this,e),n=r.filter(a=>a.isRestriction);_(this,g,J).call(this,n);const o=r.filter(a=>!a.isRestriction);if(o.length>0){let a=`Multiple errors occurred while adding files:
`;if(o.forEach(l=>{a+=`
 * ${l.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:o.length}),details:a},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(o,a);{const l=new Error(a);throw l.errors=o,l}}this.setState({files:t}),i.forEach(a=>{this.emit("file-added",a)}),this.emit("files-added",i),i.length>5?this.log(`Added batch of ${i.length} files`):Object.values(i).forEach(a=>{this.log(`Added file: ${a.name}
 id: ${a.id}
 type: ${a.type}`)}),i.length>0&&_(this,g,pt).call(this)}removeFiles(e){const{files:t,currentUploads:i}=this.getState(),r={...t},n={...i},o=Object.create(null);e.forEach(c=>{t[c]&&(o[c]=t[c],delete r[c])});function a(c){return o[c]===void 0}Object.keys(n).forEach(c=>{const d=i[c].fileIDs.filter(a);if(d.length===0){delete n[c];return}const{capabilities:f}=this.getState();if(d.length!==i[c].fileIDs.length&&!f.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");n[c]={...i[c],fileIDs:d}});const l={currentUploads:n,files:r};Object.keys(r).length===0&&(l.allowNewUpload=!0,l.error=null,l.recoveredState=null),this.setState(l),p(this,ee).call(this);const u=Object.keys(o);u.forEach(c=>{this.emit("file-removed",o[c])}),u.length>5?this.log(`Removed ${u.length} files`):this.log(`Removed files: ${u.join(", ")}`)}removeFile(e){this.removeFiles([e])}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).progress.uploadComplete)return;const t=this.getFile(e),r=!(t.isPaused||!1);return this.setFileState(e,{isPaused:r}),this.emit("upload-pause",t,r),r}pauseAll(){const e={...this.getState().files};Object.keys(e).filter(i=>!e[i].progress.uploadComplete&&e[i].progress.uploadStarted).forEach(i=>{const r={...e[i],isPaused:!0};e[i]=r}),this.setState({files:e}),this.emit("pause-all")}resumeAll(){const e={...this.getState().files};Object.keys(e).filter(i=>!e[i].progress.uploadComplete&&e[i].progress.uploadStarted).forEach(i=>{const r={...e[i],isPaused:!1,error:null};e[i]=r}),this.setState({files:e}),this.emit("resume-all")}async retryAll(){const e=await _(this,g,gt).call(this);return this.emit("complete",e),e}cancelAll(){this.emit("cancel-all");const{files:e}=this.getState(),t=Object.keys(e);t.length&&this.removeFiles(t),this.setState(Re)}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(e));const t=_(this,g,_e).call(this,[e],{forceAllowNewUpload:!0});return _(this,g,me).call(this,t)}logout(){this.iteratePlugins(e=>{var t,i;(i=(t=e.provider)==null?void 0:t.logout)==null||i.call(t)})}[Symbol.for("uppy test: updateTotalProgress")](){return _(this,g,_t).call(this)}updateOnlineStatus(){window.navigator.onLine??!0?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(e,...t){if(typeof e!="function"){const o=`Expected a plugin class, but got ${e===null?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(o)}const i=new e(this,...t),r=i.id;if(!r)throw new Error("Your plugin must have an id");if(!i.type)throw new Error("Your plugin must have a type");const n=this.getPlugin(r);if(n){const o=`Already found a plugin named '${n.id}'. Tried to use: '${r}'.
Uppy plugins must have unique \`id\` options.`;throw new Error(o)}return e.VERSION&&this.log(`Using ${r} v${e.VERSION}`),i.type in p(this,R)?p(this,R)[i.type].push(i):p(this,R)[i.type]=[i],i.install(),this.emit("plugin-added",i),this}getPlugin(e){for(const t of Object.values(p(this,R))){const i=t.find(r=>r.id===e);if(i!=null)return i}}[Symbol.for("uppy test: getPlugins")](e){return p(this,R)[e]}iteratePlugins(e){Object.values(p(this,R)).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();const t=p(this,R)[e.type],i=t.findIndex(o=>o.id===e.id);i!==-1&&t.splice(i,1);const n={plugins:{...this.getState().plugins,[e.id]:void 0}};this.setState(n)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),p(this,Fe).call(this),this.iteratePlugins(e=>{this.removePlugin(e)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",p(this,Y)),window.removeEventListener("offline",p(this,Y)))}hideInfo(){const{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,t="info",i=3e3){const r=typeof e=="object";this.setState({info:[...this.getState().info,{type:t,message:r?e.message:e,details:r?e.details:null}]}),setTimeout(()=>this.hideInfo(),i),this.emit("info-visible")}log(e,t){const{logger:i}=this.opts;switch(t){case"error":i.error(e);break;case"warning":i.warn(e);break;default:i.debug(e);break}}registerRequestClient(e,t){p(this,Te).set(e,t)}getRequestClientForFile(e){if(!e.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${e.id}`);const t=p(this,Te).get(e.remote.requestClientId);if(t==null)throw new Error(`requestClientId "${e.remote.requestClientId}" not registered for file "${e.id}"`);return t}restore(e){return this.log(`Core: attempting to restore upload "${e}"`),this.getState().currentUploads[e]?_(this,g,me).call(this,e):(_(this,g,Ie).call(this,e),Promise.reject(new Error("Nonexistent upload")))}[Symbol.for("uppy test: createUpload")](...e){return _(this,g,_e).call(this,...e)}addResultData(e,t){if(!_(this,g,Ms).call(this,e)){this.log(`Not setting result for an upload that has been removed: ${e}`);return}const{currentUploads:i}=this.getState(),r={...i[e],result:{...i[e].result,...t}};this.setState({currentUploads:{...i,[e]:r}})}async upload(){var r;(r=p(this,R).uploader)!=null&&r.length||this.log("No uploader type plugins are used","warning");let{files:e}=this.getState();if(_(this,g,ft).call(this).length>0){const n=await _(this,g,gt).call(this);if(!(this.getFiles().filter(a=>a.progress.uploadStarted==null).length>0))return this.emit("complete",n),n;({files:e}=this.getState())}const i=this.opts.onBeforeUpload(e);return i===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(i&&typeof i=="object"&&(e=i,this.setState({files:e})),Promise.resolve().then(()=>p(this,N).validateMinNumberOfFiles(e)).catch(n=>{throw _(this,g,J).call(this,[n]),n}).then(()=>{if(!_(this,g,ks).call(this,e))throw new M(this.i18n("missingRequiredMetaField"))}).catch(n=>{throw n}).then(async()=>{const{currentUploads:n}=this.getState(),o=Object.values(n).flatMap(c=>c.fileIDs),a=[];Object.keys(e).forEach(c=>{const d=this.getFile(c);!d.progress.uploadStarted&&o.indexOf(c)===-1&&a.push(d.id)});const l=_(this,g,_e).call(this,a),u=await _(this,g,me).call(this,l);return this.emit("complete",u),u}).catch(n=>{throw this.emit("error",n),this.log(n,"error"),n}))}};R=new WeakMap,N=new WeakMap,Fe=new WeakMap,Q=new WeakMap,ne=new WeakMap,oe=new WeakMap,Z=new WeakMap,g=new WeakSet,J=function(e){for(const o of e)o.isRestriction?this.emit("restriction-failed",o.file,o):this.emit("error",o,o.file),this.log(o,"warning");const t=e.filter(o=>o.isUserFacing),i=4,r=t.slice(0,i),n=t.slice(i);r.forEach(({message:o,details:a=""})=>{this.info({message:o,details:a},"error",this.opts.infoTimeout)}),n.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:n.length})})},dt=function(e){const{missingFields:t,error:i}=p(this,N).getMissingRequiredMetaFields(e);return t.length>0?(this.setFileState(e.id,{missingRequiredMetaFields:t,error:i.message}),this.log(i.message),this.emit("restriction-failed",e,i),!1):(t.length===0&&e.missingRequiredMetaFields&&this.setFileState(e.id,{missingRequiredMetaFields:[]}),!0)},ks=function(e){let t=!0;for(const i of Object.values(e))_(this,g,dt).call(this,i)||(t=!1);return t},ct=function(e){const{allowNewUpload:t}=this.getState();if(t===!1){const i=new M(this.i18n("noMoreFilesAllowed"),{file:e});throw _(this,g,J).call(this,[i]),i}},As=function(e){const t=e instanceof File?{name:e.name,type:e.type,size:e.size,data:e}:e,i=xs(t),r=qr(i,t),n=Es(r).extension,o=$i(t,this.getID()),a=t.meta||{};a.name=r,a.type=i;const l=Number.isFinite(t.data.size)?t.data.size:null;return{source:t.source||"",id:o,name:r,extension:n||"",meta:{...this.getState().meta,...a},type:i,data:t.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:l,uploadComplete:!1,uploadStarted:null},size:l,isGhost:!1,isRemote:t.isRemote||!1,remote:t.remote,preview:t.preview}},pt=function(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(e=>{e.isRestriction||this.log(e.stack||e.message||e)})},4))},ht=function(e){var o;let{files:t}=this.getState(),i={...t};const r=[],n=[];for(const a of e)try{let l=_(this,g,As).call(this,a);const u=(o=t[l.id])==null?void 0:o.isGhost;u&&(l={...t[l.id],isGhost:!1,data:a.data},this.log(`Replaced the blob in the restored ghost file: ${l.name}, ${l.id}`));const c=this.opts.onBeforeFileAdded(l,i);if(t=this.getState().files,i={...t,...i},!c&&this.checkIfFileAlreadyExists(l.id))throw new M(this.i18n("noDuplicates",{fileName:l.name??this.i18n("unnamed")}),{file:a});if(c===!1&&!u)throw new M("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:a});typeof c=="object"&&c!==null&&(l=c),p(this,N).validateSingleFile(l),i[l.id]=l,r.push(l)}catch(l){n.push(l)}try{p(this,N).validateAggregateRestrictions(Object.values(t),r)}catch(a){return n.push(a),{nextFilesState:t,validFilesToAdd:[],errors:n}}return{nextFilesState:i,validFilesToAdd:r,errors:n}},ft=function(){const{files:e}=this.getState();return Object.keys(e).filter(t=>{const i=e[t];return i.error&&(!i.missingRequiredMetaFields||i.missingRequiredMetaFields.length===0)})},gt=async function(){const e=_(this,g,ft).call(this),t={...this.getState().files};if(e.forEach(r=>{t[r]={...t[r],isPaused:!1,error:null}}),this.setState({files:t,error:null}),this.emit("retry-all",this.getFilesByIds(e)),e.length===0)return{successful:[],failed:[]};const i=_(this,g,_e).call(this,e,{forceAllowNewUpload:!0});return _(this,g,me).call(this,i)},Be=new WeakMap,_t=function(){const e=_(this,g,Rs).call(this);let t=null;e!=null&&(t=Math.round(e*100),t>100?t=100:t<0&&(t=0)),this.emit("progress",t??0),this.setState({totalProgress:t??0})},ee=new WeakMap,Rs=function(){const t=this.getFiles().filter(l=>l.progress.uploadStarted||l.progress.preprocess||l.progress.postprocess);if(t.length===0)return 0;if(t.every(l=>l.progress.uploadComplete))return 1;const i=l=>l.progress.bytesTotal!=null&&l.progress.bytesTotal!==0,r=t.filter(i),n=t.filter(l=>!i(l));if(r.every(l=>l.progress.uploadComplete)&&n.length>0&&!n.every(l=>l.progress.uploadComplete))return null;const o=r.reduce((l,u)=>l+(u.progress.bytesTotal??0),0),a=r.reduce((l,u)=>l+(u.progress.bytesUploaded||0),0);return o===0?0:a/o},Ns=function(){const e=(r,n,o)=>{let a=r.message||"Unknown error";r.details&&(a+=` ${r.details}`),this.setState({error:a}),n!=null&&n.id in this.getState().files&&this.setFileState(n.id,{error:a,response:o})};this.on("error",e),this.on("upload-error",(r,n,o)=>{if(e(n,r,o),typeof n=="object"&&n.message){this.log(n.message,"error");const a=new Error(this.i18n("failedToUpload",{file:(r==null?void 0:r.name)??""}));a.isUserFacing=!0,a.details=n.message,n.details&&(a.details+=` ${n.details}`),_(this,g,J).call(this,[a])}else _(this,g,J).call(this,[n])});let t=null;this.on("upload-stalled",(r,n)=>{const{message:o}=r,a=n.map(l=>l.meta.name).join(", ");t||(this.info({message:o,details:a},"warning",this.opts.infoTimeout),t=setTimeout(()=>{t=null},this.opts.infoTimeout)),this.log(`${o} ${a}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});const i=r=>{const n=r.filter(a=>{const l=a!=null&&this.getFile(a.id);return l||this.log(`Not setting progress for a file that has been removed: ${a==null?void 0:a.id}`),l}),o=Object.fromEntries(n.map(a=>[a.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,bytesUploaded:0,bytesTotal:a.size}}]));this.patchFilesState(o)};this.on("upload-start",i),this.on("upload-progress",p(this,Be)),this.on("upload-success",(r,n)=>{if(r==null||!this.getFile(r.id)){this.log(`Not setting progress for a file that has been removed: ${r==null?void 0:r.id}`);return}const o=this.getFile(r.id).progress;this.setFileState(r.id,{progress:{...o,postprocess:p(this,Z).size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:o.bytesTotal},response:n,uploadURL:n.uploadURL,isPaused:!1}),r.size==null&&this.setFileState(r.id,{size:n.bytesUploaded||o.bytesTotal}),p(this,ee).call(this)}),this.on("preprocess-progress",(r,n)=>{if(r==null||!this.getFile(r.id)){this.log(`Not setting progress for a file that has been removed: ${r==null?void 0:r.id}`);return}this.setFileState(r.id,{progress:{...this.getFile(r.id).progress,preprocess:n}})}),this.on("preprocess-complete",r=>{if(r==null||!this.getFile(r.id)){this.log(`Not setting progress for a file that has been removed: ${r==null?void 0:r.id}`);return}const n={...this.getState().files};n[r.id]={...n[r.id],progress:{...n[r.id].progress}},delete n[r.id].progress.preprocess,this.setState({files:n})}),this.on("postprocess-progress",(r,n)=>{if(r==null||!this.getFile(r.id)){this.log(`Not setting progress for a file that has been removed: ${r==null?void 0:r.id}`);return}this.setFileState(r.id,{progress:{...this.getState().files[r.id].progress,postprocess:n}})}),this.on("postprocess-complete",r=>{if(r==null||!this.getFile(r.id)){this.log(`Not setting progress for a file that has been removed: ${r==null?void 0:r.id}`);return}const n={...this.getState().files};n[r.id]={...n[r.id],progress:{...n[r.id].progress}},delete n[r.id].progress.postprocess,this.setState({files:n})}),this.on("restored",()=>{p(this,ee).call(this)}),this.on("dashboard:file-edit-complete",r=>{r&&_(this,g,dt).call(this,r)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",p(this,Y)),window.addEventListener("offline",p(this,Y)),setTimeout(p(this,Y),3e3))},Y=new WeakMap,Te=new WeakMap,_e=function(e,t={}){const{forceAllowNewUpload:i=!1}=t,{allowNewUpload:r,currentUploads:n}=this.getState();if(!r&&!i)throw new Error("Cannot create a new upload: already uploading.");const o=Ir();return this.emit("upload",o,this.getFilesByIds(e)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...n,[o]:{fileIDs:e,step:0,result:{}}}}),o},Ms=function(e){const{currentUploads:t}=this.getState();return t[e]},Ie=function(e){const t={...this.getState().currentUploads};delete t[e],this.setState({currentUploads:t})},me=async function(e){const t=()=>{const{currentUploads:o}=this.getState();return o[e]};let i=t();const r=[...p(this,ne),...p(this,oe),...p(this,Z)];try{for(let o=i.step||0;o<r.length&&i;o++){const a=r[o];this.setState({currentUploads:{...this.getState().currentUploads,[e]:{...i,step:o}}});const{fileIDs:l}=i;await a(l,e),i=t()}}catch(o){throw _(this,g,Ie).call(this,e),o}if(i){i.fileIDs.forEach(u=>{const c=this.getFile(u);c!=null&&c.progress.postprocess&&this.emit("postprocess-complete",c)});const o=i.fileIDs.map(u=>this.getFile(u)),a=o.filter(u=>!u.error),l=o.filter(u=>u.error);this.addResultData(e,{successful:a,failed:l,uploadID:e}),i=t()}let n;return i&&(n=i.result,_(this,g,Ie).call(this,e)),n==null&&(this.log(`Not setting result for an upload that has been removed: ${e}`),n={successful:[],failed:[],uploadID:e}),n},y(He,"VERSION",Lr.version);let ut=He;var Qr=0;function X(s,e,t,i,r,n){e||(e={});var o,a,l=e;if("ref"in l)for(a in l={},e)a=="ref"?o=e[a]:l[a]=e[a];var u={type:s,props:l,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Qr,__i:-1,__u:0,__source:r,__self:n};if(typeof s=="function"&&(o=s.defaultProps))for(a in o)l[a]===void 0&&(l[a]=o[a]);return v.vnode&&v.vnode(u),u}const Cs=Array.from;function Zr(s){const e=Cs(s.files);return Promise.resolve(e)}function js(s,e,t,{onSuccess:i}){s.readEntries(r=>{const n=[...e,...r];r.length?queueMicrotask(()=>{js(s,n,t,{onSuccess:i})}):i(n)},r=>{t(r),i(e)})}function Is(s,e){return s==null?s:{kind:s.isFile?"file":s.isDirectory?"directory":void 0,name:s.name,getFile(){return new Promise((t,i)=>s.file(t,i))},async*values(){const t=s.createReader();yield*await new Promise(r=>{js(t,[],e,{onSuccess:n=>r(n.map(o=>Is(o,e)))})})},isSameEntry:void 0}}async function*Ds(s,e,t=void 0){const i=()=>`${e}/${s.name}`;if(s.kind==="file"){const r=await s.getFile();r!=null?(r.relativePath=e?i():null,yield r):t!=null&&(yield t)}else if(s.kind==="directory")for await(const r of s.values())yield*Ds(r,e?i():s.name);else t!=null&&(yield t)}async function*en(s,e){const t=await Promise.all(Array.from(s.items,async i=>{let r;return r??(r=Is(typeof i.getAsEntry=="function"?i.getAsEntry():i.webkitGetAsEntry(),e)),{fileSystemHandle:r,lastResortFile:i.getAsFile()}}));for(const{lastResortFile:i,fileSystemHandle:r}of t)if(r!=null)try{yield*Ds(r,"",i)}catch(n){i!=null?yield i:e(n)}else i!=null&&(yield i)}async function tn(s,e){const t=(e==null?void 0:e.logDropError)??Function.prototype;try{const i=[];for await(const r of en(s,t))i.push(r);return i}catch{return Zr(s)}}function sn(){const s=document.body;return!(!("draggable"in s)||!("ondragstart"in s&&"ondrop"in s)||!("FormData"in window)||!("FileReader"in window))}const rn="4.2.2",nn={version:rn},on={strings:{dropHereOr:"Drop here or %{browse}",browse:"browse"}},an={inputName:"files[]",width:"100%",height:"100%"},We=class We extends lt{constructor(t,i){super(t,{...an,...i});y(this,"isDragDropSupported",sn());y(this,"fileInputRef");y(this,"addFiles",t=>{const i=t.map(r=>({source:this.id,name:r.name,type:r.type,data:r,meta:{relativePath:r.relativePath||null}}));try{this.uppy.addFiles(i)}catch(r){this.uppy.log(r)}});y(this,"onInputChange",t=>{const i=Cs(t.currentTarget.files||[]);i.length>0&&(this.uppy.log("[DragDrop] Files selected through input"),this.addFiles(i)),t.currentTarget.value=""});y(this,"handleDragOver",t=>{var o,a;t.preventDefault(),t.stopPropagation();const{types:i}=t.dataTransfer,r=i.some(l=>l==="Files"),{allowNewUpload:n}=this.uppy.getState();if(!r||!n){t.dataTransfer.dropEffect="none";return}t.dataTransfer.dropEffect="copy",this.setPluginState({isDraggingOver:!0}),(a=(o=this.opts).onDragOver)==null||a.call(o,t)});y(this,"handleDragLeave",t=>{var i,r;t.preventDefault(),t.stopPropagation(),this.setPluginState({isDraggingOver:!1}),(r=(i=this.opts).onDragLeave)==null||r.call(i,t)});y(this,"handleDrop",async t=>{var n,o;t.preventDefault(),t.stopPropagation(),this.setPluginState({isDraggingOver:!1});const i=a=>{this.uppy.log(a,"error")},r=await tn(t.dataTransfer,{logDropError:i});r.length>0&&(this.uppy.log("[DragDrop] Files dropped"),this.addFiles(r)),(o=(n=this.opts).onDrop)==null||o.call(n,t)});this.type="acquirer",this.id=this.opts.id||"DragDrop",this.title="Drag & Drop",this.defaultLocale=on,this.i18nInit()}renderHiddenFileInput(){var i;const{restrictions:t}=this.uppy.opts;return X("input",{className:"uppy-DragDrop-input",type:"file",hidden:!0,ref:r=>{this.fileInputRef=r},name:this.opts.inputName,multiple:t.maxNumberOfFiles!==1,accept:(i=t.allowedFileTypes)==null?void 0:i.join(", "),onChange:this.onInputChange})}static renderArrowSvg(){return X("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-DragDrop-arrow",width:"16",height:"16",viewBox:"0 0 16 16",children:X("path",{d:"M11 10V0H5v10H2l6 6 6-6h-3zm0 0",fillRule:"evenodd"})})}renderLabel(){return X("div",{className:"uppy-DragDrop-label",children:this.i18nArray("dropHereOr",{browse:X("span",{className:"uppy-DragDrop-browse",children:this.i18n("browse")})})})}renderNote(){return X("span",{className:"uppy-DragDrop-note",children:this.opts.note})}render(){const t=`uppy-u-reset
      uppy-DragDrop-container
      ${this.isDragDropSupported?"uppy-DragDrop--isDragDropSupported":""}
      ${this.getPluginState().isDraggingOver?"uppy-DragDrop--isDraggingOver":""}
    `,i={width:this.opts.width,height:this.opts.height};return X("button",{type:"button",className:t,style:i,onClick:()=>this.fileInputRef.click(),onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop,children:[this.renderHiddenFileInput(),X("div",{className:"uppy-DragDrop-inner",children:[We.renderArrowSvg(),this.renderLabel(),this.renderNote()]})]})}install(){const{target:t}=this.opts;this.setPluginState({isDraggingOver:!1}),t&&this.mount(t,this)}uninstall(){this.unmount()}};y(We,"VERSION",nn.version);let mt=We;var I,Ee;class ln{constructor(e){w(this,I);w(this,Ee,[]);P(this,I,e)}on(e,t){return p(this,Ee).push([e,t]),p(this,I).on(e,t)}remove(){for(const[e,t]of p(this,Ee).splice(0))p(this,I).off(e,t)}onFilePause(e,t){this.on("upload-pause",(i,r)=>{e===(i==null?void 0:i.id)&&t(r)})}onFileRemove(e,t){this.on("file-removed",i=>{e===i.id&&t(i.id)})}onPause(e,t){this.on("upload-pause",(i,r)=>{e===(i==null?void 0:i.id)&&t(r)})}onRetry(e,t){this.on("upload-retry",i=>{e===(i==null?void 0:i.id)&&t()})}onRetryAll(e,t){this.on("retry-all",()=>{p(this,I).getFile(e)&&t()})}onPauseAll(e,t){this.on("pause-all",()=>{p(this,I).getFile(e)&&t()})}onCancelAll(e,t){this.on("cancel-all",(...i)=>{p(this,I).getFile(e)&&t(...i)})}onResumeAll(e,t){this.on("resume-all",()=>{p(this,I).getFile(e)&&t()})}}I=new WeakMap,Ee=new WeakMap;class yt extends Error{constructor(t,i=null){super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall.");y(this,"cause");y(this,"isNetworkError");y(this,"request");this.cause=t,this.isNetworkError=!0,this.request=i}}var te,ae,xe,le;class un{constructor(e,t){w(this,te);w(this,ae,!1);w(this,xe);w(this,le);P(this,le,e),P(this,xe,()=>t(e))}progress(){p(this,ae)||p(this,le)>0&&(clearTimeout(p(this,te)),P(this,te,setTimeout(p(this,xe),p(this,le))))}done(){p(this,ae)||(clearTimeout(p(this,te)),P(this,te,void 0),P(this,ae,!0))}}te=new WeakMap,ae=new WeakMap,xe=new WeakMap,le=new WeakMap;const Ne=()=>{};function dn(s,e={}){const{body:t=null,headers:i={},method:r="GET",onBeforeRequest:n=Ne,onUploadProgress:o=Ne,shouldRetry:a=()=>!0,onAfterResponse:l=Ne,onTimeout:u=Ne,responseType:c,retries:d=3,signal:f=null,timeout:h=3e4,withCredentials:m=!1}=e,F=b=>.3*2**(b-1)*1e3,x=new un(h,u);function S(b=0){return new Promise(async(A,U)=>{const T=new XMLHttpRequest,E=O=>{a(T)&&b<d?setTimeout(()=>{S(b+1).then(A,U)},F(b)):(x.done(),U(O))};T.open(r,s,!0),T.withCredentials=m,c&&(T.responseType=c),f==null||f.addEventListener("abort",()=>{T.abort(),U(new DOMException("Aborted","AbortError"))}),T.onload=async()=>{try{await l(T,b)}catch(O){O.request=T,E(O);return}T.status>=200&&T.status<300?(x.done(),A(T)):a(T)&&b<d?setTimeout(()=>{S(b+1).then(A,U)},F(b)):(x.done(),U(new yt(T.statusText,T)))},T.onerror=()=>E(new yt(T.statusText,T)),T.upload.onprogress=O=>{x.progress(),o(O)},i&&Object.keys(i).forEach(O=>{T.setRequestHeader(O,i[O])}),await n(T,b),T.send(t)})}return S()}function cn(s){const e=t=>"error"in t&&!!t.error;return s.filter(t=>!e(t))}function pn(s){return s.filter(e=>{var t;return!((t=e.progress)!=null&&t.uploadStarted)||!e.isRestored})}function is(s,e){return s===!0?Object.keys(e):Array.isArray(s)?s:[]}function hn(s){return s?s.readyState!==0&&s.readyState!==4||s.status===0:!1}function fn(s){return new Error("Cancelled",{cause:s})}function rs(s){var e;if(s!=null){const t=()=>this.abort(s.reason);s.addEventListener("abort",t,{once:!0});const i=()=>{s.removeEventListener("abort",t)};(e=this.then)==null||e.call(this,i,i)}return this}var B,D,H,ue,L,de,se,k,vt,ye,Ls,qs,zs,Ge,ce;class gn{constructor(e){w(this,k);w(this,B,0);w(this,D,[]);w(this,H,!1);w(this,ue);w(this,L,1);w(this,de);w(this,se);y(this,"limit");w(this,Ge,()=>this.resume());w(this,ce,()=>{if(p(this,H)){P(this,se,setTimeout(p(this,ce),0));return}P(this,L,this.limit),this.limit=Math.ceil((p(this,de)+p(this,L))/2);for(let e=p(this,L);e<=this.limit;e++)_(this,k,ye).call(this);p(this,de)-p(this,L)>3?P(this,se,setTimeout(p(this,ce),2e3)):P(this,L,Math.floor(p(this,L)/2))});typeof e!="number"||e===0?this.limit=1/0:this.limit=e}run(e,t){return!p(this,H)&&p(this,B)<this.limit?_(this,k,vt).call(this,e):_(this,k,qs).call(this,e,t)}wrapSyncFunction(e,t){return(...i)=>{const r=this.run(()=>(e(...i),queueMicrotask(()=>r.done()),()=>{}),t);return{abortOn:rs,abort(){r.abort()}}}}wrapPromiseFunction(e,t){return(...i)=>{let r;const n=new Promise((o,a)=>{r=this.run(()=>{let l,u;try{u=Promise.resolve(e(...i))}catch(c){u=Promise.reject(c)}return u.then(c=>{l?a(l):(r.done(),o(c))},c=>{l?a(l):(r.done(),a(c))}),c=>{l=fn(c)}},t)});return n.abort=o=>{r.abort(o)},n.abortOn=rs,n}}resume(){P(this,H,!1),clearTimeout(p(this,ue));for(let e=0;e<this.limit;e++)_(this,k,ye).call(this)}pause(e=null){P(this,H,!0),clearTimeout(p(this,ue)),e!=null&&P(this,ue,setTimeout(p(this,Ge),e))}rateLimit(e){clearTimeout(p(this,se)),this.pause(e),this.limit>1&&Number.isFinite(this.limit)&&(P(this,de,this.limit-1),this.limit=p(this,L),P(this,se,setTimeout(p(this,ce),e)))}get isPaused(){return p(this,H)}}B=new WeakMap,D=new WeakMap,H=new WeakMap,ue=new WeakMap,L=new WeakMap,de=new WeakMap,se=new WeakMap,k=new WeakSet,vt=function(e){P(this,B,p(this,B)+1);let t=!1,i;try{i=e()}catch(r){throw P(this,B,p(this,B)-1),r}return{abort:r=>{t||(t=!0,P(this,B,p(this,B)-1),i==null||i(r),_(this,k,ye).call(this))},done:()=>{t||(t=!0,P(this,B,p(this,B)-1),_(this,k,ye).call(this))}}},ye=function(){queueMicrotask(()=>_(this,k,Ls).call(this))},Ls=function(){if(p(this,H)||p(this,B)>=this.limit||p(this,D).length===0)return;const e=p(this,D).shift();if(e==null)throw new Error("Invariant violation: next is null");const t=_(this,k,vt).call(this,e.fn);e.abort=t.abort,e.done=t.done},qs=function(e,t){const i={fn:e,priority:(t==null?void 0:t.priority)||0,abort:()=>{_(this,k,zs).call(this,i)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},r=p(this,D).findIndex(n=>i.priority>n.priority);return r===-1?p(this,D).push(i):p(this,D).splice(r,0,i),i},zs=function(e){const t=p(this,D).indexOf(e);t!==-1&&p(this,D).splice(t,1)},Ge=new WeakMap,ce=new WeakMap;const tt=Symbol("__queue"),_n="4.4.2",mn={version:_n},yn={strings:{uploadStalled:"Upload has not made any progress for %{seconds} seconds. You may want to retry it."}};function vn(s,e){let t=e;return t||(t=new Error("Upload error")),typeof t=="string"&&(t=new Error(t)),t instanceof Error||(t=Object.assign(new Error("Upload error"),{data:t})),hn(s)?(t=new yt(t,s),t):(t.request=s,t)}function ns(s){return s.data.slice(0,s.data.size,s.meta.type)}const bn={formData:!0,fieldName:"file",method:"post",allowedMetaFields:!0,bundle:!1,headers:{},timeout:30*1e3,limit:5,withCredentials:!1,responseType:""};var pe,z,Hs,Ws,Gs,Vs,Pe;class Bs extends as{constructor(t,i){super(t,{...bn,fieldName:i.bundle?"files[]":"file",...i});w(this,z);w(this,pe);y(this,"requests");y(this,"uploaderEvents");w(this,Pe,async t=>{if(t.length===0){this.uppy.log("[XHRUpload] No files to upload!");return}this.opts.limit===0&&!this.opts[tt]&&this.uppy.log("[XHRUpload] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/xhr-upload/#limit-0","warning"),this.uppy.log("[XHRUpload] Uploading...");const i=this.uppy.getFilesByIds(t),r=cn(i),n=pn(r);if(this.uppy.emit("upload-start",n),this.opts.bundle){if(r.some(a=>a.isRemote))throw new Error("Canâ€™t upload remote files when the `bundle: true` option is set");if(typeof this.opts.headers=="function")throw new TypeError("`headers` may not be a function when the `bundle: true` option is set");await _(this,z,Ws).call(this,r)}else await _(this,z,Vs).call(this,r)});if(this.type="uploader",this.id=this.opts.id||"XHRUpload",this.defaultLocale=yn,this.i18nInit(),tt in this.opts?this.requests=this.opts[tt]:this.requests=new gn(this.opts.limit),this.opts.bundle&&!this.opts.formData)throw new Error("`opts.formData` must be true when `opts.bundle` is enabled.");if(this.opts.bundle&&typeof this.opts.headers=="function")throw new Error("`opts.headers` can not be a function when the `bundle: true` option is set.");if((i==null?void 0:i.allowedMetaFields)===void 0&&"metaFields"in this.opts)throw new Error("The `metaFields` option has been renamed to `allowedMetaFields`.");this.uploaderEvents=Object.create(null),P(this,pe,r=>async(n,o)=>{var a,l;try{const u=await dn(n,{...o,onBeforeRequest:(f,h)=>{var m,F;return(F=(m=this.opts).onBeforeRequest)==null?void 0:F.call(m,f,h,r)},shouldRetry:this.opts.shouldRetry,onAfterResponse:this.opts.onAfterResponse,onTimeout:f=>{const h=Math.ceil(f/1e3),m=new Error(this.i18n("uploadStalled",{seconds:h}));this.uppy.emit("upload-stalled",m,r)},onUploadProgress:f=>{if(f.lengthComputable)for(const{id:h}of r){const m=this.uppy.getFile(h);this.uppy.emit("upload-progress",m,{uploadStarted:m.progress.uploadStarted??0,bytesUploaded:f.loaded/f.total*m.size,bytesTotal:m.size})}}});let c=await((l=(a=this.opts).getResponseData)==null?void 0:l.call(a,u));if(u.responseType==="json")c??(c=u.response);else try{c??(c=JSON.parse(u.responseText))}catch(f){throw new Error("@uppy/xhr-upload expects a JSON response (with a `url` property). To parse non-JSON responses, use `getResponseData` to turn your response into JSON.",{cause:f})}const d=typeof(c==null?void 0:c.url)=="string"?c.url:void 0;for(const{id:f}of r)this.uppy.emit("upload-success",this.uppy.getFile(f),{status:u.status,body:c,uploadURL:d});return u}catch(u){if(u.name==="AbortError")return;const c=u.request;for(const d of r)this.uppy.emit("upload-error",this.uppy.getFile(d.id),vn(c,u),c);throw u}})}getOptions(t){const i=this.uppy.getState().xhrUpload,{headers:r}=this.opts,n={...this.opts,...i||{},...t.xhrUpload||{},headers:{}};return typeof r=="function"?n.headers=r(t):Object.assign(n.headers,this.opts.headers),i&&Object.assign(n.headers,i.headers),t.xhrUpload&&Object.assign(n.headers,t.xhrUpload.headers),n}addMetadata(t,i,r){is(r.allowedMetaFields,i).forEach(o=>{const a=i[o];Array.isArray(a)?a.forEach(l=>t.append(o,l)):t.append(o,a)})}createFormDataUpload(t,i){const r=new FormData;this.addMetadata(r,t.meta,i);const n=ns(t);return t.name?r.append(i.fieldName,n,t.meta.name):r.append(i.fieldName,n),r}createBundledUpload(t,i){const r=new FormData,{meta:n}=this.uppy.getState();return this.addMetadata(r,n,i),t.forEach(o=>{const a=this.getOptions(o),l=ns(o);o.name?r.append(a.fieldName,l,o.name):r.append(a.fieldName,l)}),r}install(){if(this.opts.bundle){const{capabilities:t}=this.uppy.getState();this.uppy.setState({capabilities:{...t,individualCancellation:!1}})}this.uppy.addUploader(p(this,Pe))}uninstall(){if(this.opts.bundle){const{capabilities:t}=this.uppy.getState();this.uppy.setState({capabilities:{...t,individualCancellation:!0}})}this.uppy.removeUploader(p(this,Pe))}}pe=new WeakMap,z=new WeakSet,Hs=async function(t){const i=new ln(this.uppy),r=new AbortController,n=this.requests.wrapPromiseFunction(async()=>{const o=this.getOptions(t),a=p(this,pe).call(this,[t]),l=o.formData?this.createFormDataUpload(t,o):t.data,u=typeof o.endpoint=="string"?o.endpoint:await o.endpoint(t);return a(u,{...o,body:l,signal:r.signal})});i.onFileRemove(t.id,()=>r.abort()),i.onCancelAll(t.id,()=>{r.abort()});try{await n().abortOn(r.signal)}catch(o){if(o.message!=="Cancelled")throw o}finally{i.remove()}},Ws=async function(t){const i=new AbortController,r=this.requests.wrapPromiseFunction(async()=>{const o=this.uppy.getState().xhrUpload??{},a=p(this,pe).call(this,t),l=this.createBundledUpload(t,{...this.opts,...o}),u=typeof this.opts.endpoint=="string"?this.opts.endpoint:await this.opts.endpoint(t);return a(u,{...this.opts,body:l,signal:i.signal})});function n(){i.abort()}this.uppy.once("cancel-all",n);try{await r().abortOn(i.signal)}catch(o){if(o.message!=="Cancelled")throw o}finally{this.uppy.off("cancel-all",n)}},Gs=function(t){var n;const i=this.getOptions(t),r=is(i.allowedMetaFields,t.meta);return{...(n=t.remote)==null?void 0:n.body,protocol:"multipart",endpoint:i.endpoint,size:t.data.size,fieldname:i.fieldName,metadata:Object.fromEntries(r.map(o=>[o,t.meta[o]])),httpMethod:i.method,useFormData:i.formData,headers:i.headers}},Vs=async function(t){await Promise.allSettled(t.map(i=>{if(i.isRemote){const r=()=>this.requests,n=new AbortController,o=l=>{l.id===i.id&&n.abort()};this.uppy.on("file-removed",o);const a=this.uppy.getRequestClientForFile(i).uploadRemoteFile(i,_(this,z,Gs).call(this,i),{signal:n.signal,getQueue:r});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",o)},{priority:-1})(),a}return _(this,z,Hs).call(this,i)}))},Pe=new WeakMap,y(Bs,"VERSION",mn.version);function wn(){const s=document.getElementById("uppy");if(!s)return;const e=s.dataset.endpoint,t=s.dataset.csrf;s.dataset.albumId,new ut({autoProceed:!0,restrictions:{allowedFileTypes:["image/*"]}}).use(mt,{target:"#uppy",note:"Trascina qui le immagini"}).use(Bs,{endpoint:e,fieldName:"file",headers:{"X-CSRF-Token":t,Accept:"application/json"}}).on("upload-success",(r,n)=>{try{const o=n.body||JSON.parse(n.responseText);if(o&&o.image&&o.image.preview_url){const a=document.getElementById("images-grid");if(a){const l=document.createElement("div");l.className="col-6 col-md-3",l.setAttribute("data-id",o.image.id),l.innerHTML=`
            <div class="card position-relative">
              <div class="ratio ratio-1x1">
                <img src="${o.image.preview_url}" class="card-img-top object-fit-cover" alt="">
              </div>
              <div class="card-body p-2 d-flex justify-content-between">
                <button type="button" data-cover-id="${o.image.id}" class="btn btn-sm btn-outline-secondary">Cover</button>
                <span class="text-muted small">ID ${o.image.id}</span>
              </div>
            </div>`,a.prepend(l)}}}catch{}})}document.addEventListener("DOMContentLoaded",()=>{wn()});
