var xQ=Object.defineProperty;var pX=w=>{throw TypeError(w)};var EQ=(w,f,p)=>f in w?xQ(w,f,{enumerable:!0,configurable:!0,writable:!0,value:p}):w[f]=p;var Yo=(w,f,p)=>EQ(w,typeof f!="symbol"?f+"":f,p),eK=(w,f,p)=>f.has(w)||pX("Cannot "+p);var Pt=(w,f,p)=>(eK(w,f,"read from private field"),p?p.call(w):f.get(w)),rs=(w,f,p)=>f.has(w)?pX("Cannot add the same private member more than once"):f instanceof WeakSet?f.add(w):f.set(w,p),Qr=(w,f,p,C)=>(eK(w,f,"write to private field"),C?C.call(w,p):f.set(w,p),p),Yn=(w,f,p)=>(eK(w,f,"access private method"),p);import{c as q6,g as WM}from"./assets/_commonjsHelpers-Cpj98o6Y.js";function TQ(w,f,p){const C=[];return w.forEach(_=>typeof _!="string"?C.push(_):f[Symbol.split](_).forEach((P,N,z)=>{P!==""&&C.push(P),N<z.length-1&&C.push(p)})),C}/**
 * Takes a string with placeholder variables like `%{smart_count} file selected`
 * and replaces it with values from options `{smart_count: 5}`
 *
 * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
 * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
 *
 * @param phrase that needs interpolation, with placeholders
 * @param options with values that will be used to replace placeholders
 */function bX(w,f){const p=/\$/g,C="$$$$";let _=[w];if(f==null)return _;for(const P of Object.keys(f))if(P!=="_"){let N=f[P];typeof N=="string"&&(N=p[Symbol.replace](N,C)),_=TQ(_,new RegExp(`%\\{${P}\\}`,"g"),N)}return _}const _Q=w=>{throw new Error(`missing string: ${w}`)};var $M,IM,CK;class cJ{constructor(f,{onMissingKey:p=_Q}={}){rs(this,IM);Yo(this,"locale");rs(this,$M);this.locale={strings:{},pluralize(C){return C===1?0:1}},Array.isArray(f)?f.forEach(Yn(this,IM,CK),this):Yn(this,IM,CK).call(this,f),Qr(this,$M,p)}translate(f,p){return this.translateArray(f,p).join("")}translateArray(f,p){let C=this.locale.strings[f];if(C==null&&(Pt(this,$M).call(this,f),C=f),typeof C=="object"){if(p&&typeof p.smart_count<"u"){const P=this.locale.pluralize(p.smart_count);return bX(C[P],p)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof C!="string")throw new Error("string was not a string");return bX(C,p)}}$M=new WeakMap,IM=new WeakSet,CK=function(f){if(!(f!=null&&f.strings))return;const p=this.locale;Object.assign(this.locale,{strings:{...p.strings,...f.strings},pluralize:f.pluralize||p.pluralize})};class lJ{constructor(f,p){Yo(this,"uppy");Yo(this,"opts");Yo(this,"id");Yo(this,"defaultLocale");Yo(this,"i18n");Yo(this,"i18nArray");Yo(this,"type");Yo(this,"VERSION");this.uppy=f,this.opts=p??{}}getPluginState(){const{plugins:f}=this.uppy.getState();return(f==null?void 0:f[this.id])||{}}setPluginState(f){const{plugins:p}=this.uppy.getState();this.uppy.setState({plugins:{...p,[this.id]:{...p[this.id],...f}}})}setOptions(f){this.opts={...this.opts,...f},this.setPluginState(void 0),this.i18nInit()}i18nInit(){const f=new cJ([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=f.translate.bind(f),this.i18nArray=f.translateArray.bind(f),this.setPluginState(void 0)}addTarget(f){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(f){}afterUpdate(){}}function tK(w){return w<10?`0${w}`:w.toString()}function a8(){const w=new Date,f=tK(w.getHours()),p=tK(w.getMinutes()),C=tK(w.getSeconds());return`${f}:${p}:${C}`}const kQ={debug:()=>{},warn:()=>{},error:(...w)=>console.error(`[Uppy] [${a8()}]`,...w)},OQ={debug:(...w)=>console.debug(`[Uppy] [${a8()}]`,...w),warn:(...w)=>console.warn(`[Uppy] [${a8()}]`,...w),error:(...w)=>console.error(`[Uppy] [${a8()}]`,...w)},AQ="4.3.2",DQ={version:AQ};var Bk,_8,dJ;class uJ{constructor(){rs(this,_8);Yo(this,"state",{});rs(this,Bk,new Set)}getState(){return this.state}setState(f){const p={...this.state},C={...this.state,...f};this.state=C,Yn(this,_8,dJ).call(this,p,C,f)}subscribe(f){return Pt(this,Bk).add(f),()=>{Pt(this,Bk).delete(f)}}}Bk=new WeakMap,_8=new WeakSet,dJ=function(...f){Pt(this,Bk).forEach(p=>{p(...f)})},Yo(uJ,"VERSION",DQ.version);function g8(w){const f=w.lastIndexOf(".");return f===-1||f===w.length-1?{name:w,extension:void 0}:{name:w.slice(0,f),extension:w.slice(f+1)}}const vX={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",msg:"application/vnd.ms-outlook",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function mJ(w){var p;if(w.type)return w.type;const f=w.name?(p=g8(w.name).extension)==null?void 0:p.toLowerCase():null;return f&&f in vX?vX[f]:"application/octet-stream"}function RQ(w){return w.charCodeAt(0).toString(32)}function yX(w){let f="";return w.replace(/[^A-Z0-9]/gi,p=>(f+=`-${RQ(p)}`,"/"))+f}function MQ(w,f){let p=f||"uppy";return typeof w.name=="string"&&(p+=`-${yX(w.name.toLowerCase())}`),w.type!==void 0&&(p+=`-${w.type}`),w.meta&&typeof w.meta.relativePath=="string"&&(p+=`-${yX(w.meta.relativePath.toLowerCase())}`),w.data.size!==void 0&&(p+=`-${w.data.size}`),w.data.lastModified!==void 0&&(p+=`-${w.data.lastModified}`),p}function PQ(w){return!w.isRemote||!w.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(w.remote.provider)}function NQ(w,f){if(PQ(w))return w.id;const p=mJ(w);return MQ({...w,type:p},f)}function BQ(w){var f=typeof w;return w!=null&&(f=="object"||f=="function")}var FK=BQ,$Q=typeof q6=="object"&&q6&&q6.Object===Object&&q6,IQ=$Q,FQ=IQ,LQ=typeof self=="object"&&self&&self.Object===Object&&self,HQ=FQ||LQ||Function("return this")(),fJ=HQ,zQ=fJ,VQ=function(){return zQ.Date.now()},UQ=VQ,WQ=/\s/;function ZQ(w){for(var f=w.length;f--&&WQ.test(w.charAt(f)););return f}var jQ=ZQ,GQ=jQ,qQ=/^\s+/;function KQ(w){return w&&w.slice(0,GQ(w)+1).replace(qQ,"")}var YQ=KQ,XQ=fJ,JQ=XQ.Symbol,gJ=JQ,wX=gJ,hJ=Object.prototype,QQ=hJ.hasOwnProperty,eee=hJ.toString,SM=wX?wX.toStringTag:void 0;function tee(w){var f=QQ.call(w,SM),p=w[SM];try{w[SM]=void 0;var C=!0}catch{}var _=eee.call(w);return C&&(f?w[SM]=p:delete w[SM]),_}var nee=tee,oee=Object.prototype,see=oee.toString;function ree(w){return see.call(w)}var aee=ree,CX=gJ,iee=nee,cee=aee,lee="[object Null]",uee="[object Undefined]",SX=CX?CX.toStringTag:void 0;function dee(w){return w==null?w===void 0?uee:lee:SX&&SX in Object(w)?iee(w):cee(w)}var mee=dee;function fee(w){return w!=null&&typeof w=="object"}var gee=fee,hee=mee,pee=gee,bee="[object Symbol]";function vee(w){return typeof w=="symbol"||pee(w)&&hee(w)==bee}var yee=vee,wee=YQ,xX=FK,Cee=yee,EX=NaN,See=/^[-+]0x[0-9a-f]+$/i,xee=/^0b[01]+$/i,Eee=/^0o[0-7]+$/i,Tee=parseInt;function _ee(w){if(typeof w=="number")return w;if(Cee(w))return EX;if(xX(w)){var f=typeof w.valueOf=="function"?w.valueOf():w;w=xX(f)?f+"":f}if(typeof w!="string")return w===0?w:+w;w=wee(w);var p=xee.test(w);return p||Eee.test(w)?Tee(w.slice(2),p?2:8):See.test(w)?EX:+w}var kee=_ee,Oee=FK,nK=UQ,TX=kee,Aee="Expected a function",Dee=Math.max,Ree=Math.min;function Mee(w,f,p){var C,_,P,N,z,G,te=0,ie=!1,me=!1,xe=!0;if(typeof w!="function")throw new TypeError(Aee);f=TX(f)||0,Oee(p)&&(ie=!!p.leading,me="maxWait"in p,P=me?Dee(TX(p.maxWait)||0,f):P,xe="trailing"in p?!!p.trailing:xe);function Fe(_t){var ae=C,ut=_;return C=_=void 0,te=_t,N=w.apply(ut,ae),N}function ve(_t){return te=_t,z=setTimeout(Zt,f),ie?Fe(_t):N}function je(_t){var ae=_t-G,ut=_t-te,bt=f-ae;return me?Ree(bt,P-ut):bt}function He(_t){var ae=_t-G,ut=_t-te;return G===void 0||ae>=f||ae<0||me&&ut>=P}function Zt(){var _t=nK();if(He(_t))return ze(_t);z=setTimeout(Zt,je(_t))}function ze(_t){return z=void 0,xe&&C?Fe(_t):(C=_=void 0,N)}function Q(){z!==void 0&&clearTimeout(z),te=0,C=G=_=z=void 0}function Ge(){return z===void 0?N:ze(nK())}function gn(){var _t=nK(),ae=He(_t);if(C=arguments,_=this,G=_t,ae){if(z===void 0)return ve(G);if(me)return clearTimeout(z),z=setTimeout(Zt,f),Fe(G)}return z===void 0&&(z=setTimeout(Zt,f)),N}return gn.cancel=Q,gn.flush=Ge,gn}var Pee=Mee,Nee=Pee,Bee=FK,$ee="Expected a function";function Iee(w,f,p){var C=!0,_=!0;if(typeof w!="function")throw new TypeError($ee);return Bee(p)&&(C="leading"in p?!!p.leading:C,_="trailing"in p?!!p.trailing:_),Nee(w,f,{leading:C,maxWait:f,trailing:_})}var Fee=Iee;const Lee=WM(Fee);var Hee=function(){var f={},p=f._fns={};f.emit=function(N,z,G,te,ie,me,xe){var Fe=C(N);Fe.length&&_(N,Fe,[z,G,te,ie,me,xe])},f.on=function(N,z){p[N]||(p[N]=[]),p[N].push(z)},f.once=function(N,z){function G(){z.apply(this,arguments),f.off(N,G)}this.on(N,G)},f.off=function(N,z){var G=[];if(N&&z){var te=this._fns[N],ie=0,me=te?te.length:0;for(ie;ie<me;ie++)te[ie]!==z&&G.push(te[ie])}G.length?this._fns[N]=G:delete this._fns[N]};function C(P){var N=p[P]?p[P]:[],z=P.indexOf(":"),G=z===-1?[P]:[P.substring(0,z),P.substring(z+1)],te=Object.keys(p),ie=0,me=te.length;for(ie;ie<me;ie++){var xe=te[ie];if(xe==="*"&&(N=N.concat(p[xe])),G.length===2&&G[0]===xe){N=N.concat(p[xe]);break}}return N}function _(P,N,z){var G=0,te=N.length;for(G;G<te&&N[G];G++)N[G].event=P,N[G].apply(N[G],z)}return f};const zee=WM(Hee);let Vee="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Uee=(w=21)=>{let f="",p=w|0;for(;p--;)f+=Vee[Math.random()*64|0];return f};const Wee="4.5.3",Zee={version:Wee};function jee(w,f){return f.name?f.name:w.split("/")[0]==="image"?`${w.split("/")[0]}.${w.split("/")[1]}`:"noname"}const Gee={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",logIn:"Log in",pickFiles:"Pick files",pickPhotos:"Pick photos",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed",pleaseWait:"Please wait"}};var qee=function(f){if(typeof f!="number"||Number.isNaN(f))throw new TypeError(`Expected a number, got ${typeof f}`);const p=f<0;let C=Math.abs(f);if(p&&(C=-C),C===0)return"0 B";const _=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],P=Math.min(Math.floor(Math.log(C)/Math.log(1024)),_.length-1),N=Number(C/1024**P),z=_[P];return`${N>=10||N%1===0?Math.round(N):N.toFixed(1)} ${z}`};const Mk=WM(qee);function pJ(w,f){this.text=w=w||"",this.hasWild=~w.indexOf("*"),this.separator=f,this.parts=w.split(f)}pJ.prototype.match=function(w){var f=!0,p=this.parts,C,_=p.length,P;if(typeof w=="string"||w instanceof String)if(!this.hasWild&&this.text!=w)f=!1;else{for(P=(w||"").split(this.separator),C=0;f&&C<_;C++)p[C]!=="*"&&(C<P.length?f=p[C]===P[C]:f=!1);f=f&&P}else if(typeof w.splice=="function")for(f=[],C=w.length;C--;)this.match(w[C])&&(f[f.length]=w[C]);else if(typeof w=="object"){f={};for(var N in w)this.match(N)&&(f[N]=w[N])}return f};var Kee=function(w,f,p){var C=new pJ(w,p||/[\/\.]/);return typeof f<"u"?C.match(f):C},Yee=Kee,Xee=/[\/\+\.]/,Jee=function(w,f){function p(C){var _=Yee(C,w,Xee);return _&&_.length>=2}return f?p(f.split(";")[0]):p};const Qee=WM(Jee),ete={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]};class Ng extends Error{constructor(p,C){super(p);Yo(this,"isUserFacing");Yo(this,"file");Yo(this,"isRestriction",!0);this.isUserFacing=(C==null?void 0:C.isUserFacing)??!0,C!=null&&C.file&&(this.file=C.file)}}class tte{constructor(f,p){Yo(this,"getI18n");Yo(this,"getOpts");this.getI18n=p,this.getOpts=()=>{var _;const C=f();if(((_=C.restrictions)==null?void 0:_.allowedFileTypes)!=null&&!Array.isArray(C.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return C}}validateAggregateRestrictions(f,p){const{maxTotalFileSize:C,maxNumberOfFiles:_}=this.getOpts().restrictions;if(_&&f.filter(N=>!N.isGhost).length+p.length>_)throw new Ng(`${this.getI18n()("youCanOnlyUploadX",{smart_count:_})}`);if(C){const P=[...f,...p].reduce((N,z)=>N+(z.size??0),0);if(P>C)throw new Ng(this.getI18n()("aggregateExceedsSize",{sizeAllowed:Mk(C),size:Mk(P)}))}}validateSingleFile(f){const{maxFileSize:p,minFileSize:C,allowedFileTypes:_}=this.getOpts().restrictions;if(_&&!_.some(N=>N.includes("/")?f.type?Qee(f.type.replace(/;.*?$/,""),N):!1:N[0]==="."&&f.extension?f.extension.toLowerCase()===N.slice(1).toLowerCase():!1)){const N=_.join(", ");throw new Ng(this.getI18n()("youCanOnlyUploadFileTypes",{types:N}),{file:f})}if(p&&f.size!=null&&f.size>p)throw new Ng(this.getI18n()("exceedsSize",{size:Mk(p),file:f.name??this.getI18n()("unnamed")}),{file:f});if(C&&f.size!=null&&f.size<C)throw new Ng(this.getI18n()("inferiorSize",{size:Mk(C)}),{file:f})}validate(f,p){p.forEach(C=>{this.validateSingleFile(C)}),this.validateAggregateRestrictions(f,p)}validateMinNumberOfFiles(f){const{minNumberOfFiles:p}=this.getOpts().restrictions;if(p&&Object.keys(f).length<p)throw new Ng(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:p}))}getMissingRequiredMetaFields(f){const p=new Ng(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:f.name??this.getI18n()("unnamed")})),{requiredMetaFields:C}=this.getOpts().restrictions,_=[];for(const P of C)(!Object.hasOwn(f.meta,P)||f.meta[P]==="")&&_.push(P);return{missingFields:_,error:p}}}function nte(w){if(w==null&&typeof navigator<"u"&&(w=navigator.userAgent),!w)return!0;const f=/Edge\/(\d+\.\d+)/.exec(w);if(!f)return!0;const C=f[1].split(".",2),_=parseInt(C[0],10),P=parseInt(C[1],10);return _<15||_===15&&P<15063||_>18||_===18&&P>=18218}const K6={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null};var Mg,Pg,FM,O2,$k,Ik,A2,Gn,T2,SK,bJ,xK,vJ,EK,TK,_K,kK,k8,OK,D2,yJ,wJ,Ly,LM,EM,CJ,i8,TM;const O8=class O8{constructor(f){rs(this,Gn);rs(this,Mg,Object.create(null));rs(this,Pg);rs(this,FM);rs(this,O2,zee());rs(this,$k,new Set);rs(this,Ik,new Set);rs(this,A2,new Set);Yo(this,"defaultLocale");Yo(this,"locale");Yo(this,"opts");Yo(this,"store");Yo(this,"i18n");Yo(this,"i18nArray");Yo(this,"scheduledAutoProceed",null);Yo(this,"wasOffline",!1);rs(this,k8,(f,p)=>{const C=f?this.getFile(f.id):void 0;if(f==null||!C){this.log(`Not setting progress for a file that has been removed: ${f==null?void 0:f.id}`);return}if(C.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${f.id}`);return}const _={bytesTotal:p.bytesTotal,percentage:p.bytesTotal!=null&&Number.isFinite(p.bytesTotal)&&p.bytesTotal>0?Math.round(p.bytesUploaded/p.bytesTotal*100):void 0};C.progress.uploadStarted!=null?this.setFileState(f.id,{progress:{...C.progress,..._,bytesUploaded:p.bytesUploaded}}):this.setFileState(f.id,{progress:{...C.progress,..._}}),Pt(this,D2).call(this)});rs(this,D2,Lee(()=>Yn(this,Gn,OK).call(this),500,{leading:!0,trailing:!0}));rs(this,Ly,this.updateOnlineStatus.bind(this));rs(this,LM,new Map);this.defaultLocale=Gee;const p={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:ete,meta:{},onBeforeFileAdded:(_,P)=>!Object.hasOwn(P,_.id),onBeforeUpload:_=>_,store:new uJ,logger:kQ,infoTimeout:5e3},C={...p,...f};this.opts={...C,restrictions:{...p.restrictions,...f==null?void 0:f.restrictions}},f!=null&&f.logger&&f.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):f!=null&&f.debug&&(this.opts.logger=OQ),this.log(`Using Core v${O8.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({...K6,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:nte(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),Qr(this,Pg,new tte(()=>this.opts,()=>this.i18n)),Qr(this,FM,this.store.subscribe((_,P,N)=>{this.emit("state-update",_,P,N),this.updateAll(P)})),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),Yn(this,Gn,wJ).call(this)}emit(f,...p){Pt(this,O2).emit(f,...p)}on(f,p){return Pt(this,O2).on(f,p),this}once(f,p){return Pt(this,O2).once(f,p),this}off(f,p){return Pt(this,O2).off(f,p),this}updateAll(f){this.iteratePlugins(p=>{p.update(f)})}setState(f){this.store.setState(f)}getState(){return this.store.getState()}patchFilesState(f){const p=this.getState().files;this.setState({files:{...p,...Object.fromEntries(Object.entries(f).map(([C,_])=>[C,{...p[C],..._}]))}})}setFileState(f,p){if(!this.getState().files[f])throw new Error(`Can’t set state for ${f} (the file could have been removed)`);this.patchFilesState({[f]:p})}i18nInit(){const f=C=>this.log(`Missing i18n string: ${C}`,"error"),p=new cJ([this.defaultLocale,this.opts.locale],{onMissingKey:f});this.i18n=p.translate.bind(p),this.i18nArray=p.translateArray.bind(p),this.locale=p.locale}setOptions(f){this.opts={...this.opts,...f,restrictions:{...this.opts.restrictions,...f==null?void 0:f.restrictions}},f.meta&&this.setMeta(f.meta),this.i18nInit(),f.locale&&this.iteratePlugins(p=>{p.setOptions(f)}),this.setState(void 0)}resetProgress(){const f={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},p={...this.getState().files},C=Object.create(null);Object.keys(p).forEach(_=>{C[_]={...p[_],progress:{...p[_].progress,...f},tus:void 0,transloadit:void 0}}),this.setState({files:C,...K6})}clear(){const{capabilities:f,currentUploads:p}=this.getState();if(Object.keys(p).length>0&&!f.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({...K6,files:{}})}addPreProcessor(f){Pt(this,$k).add(f)}removePreProcessor(f){return Pt(this,$k).delete(f)}addPostProcessor(f){Pt(this,A2).add(f)}removePostProcessor(f){return Pt(this,A2).delete(f)}addUploader(f){Pt(this,Ik).add(f)}removeUploader(f){return Pt(this,Ik).delete(f)}setMeta(f){const p={...this.getState().meta,...f},C={...this.getState().files};Object.keys(C).forEach(_=>{C[_]={...C[_],meta:{...C[_].meta,...f}}}),this.log("Adding metadata:"),this.log(f),this.setState({meta:p,files:C})}setFileMeta(f,p){const C={...this.getState().files};if(!C[f]){this.log(`Was trying to set metadata for a file that has been removed: ${f}`);return}const _={...C[f].meta,...p};C[f]={...C[f],meta:_},this.setState({files:C})}getFile(f){return this.getState().files[f]}getFiles(){const{files:f}=this.getState();return Object.values(f)}getFilesByIds(f){return f.map(p=>this.getFile(p))}getObjectOfFilesPerState(){const{files:f,totalProgress:p,error:C}=this.getState(),_=Object.values(f),P=[],N=[],z=[],G=[],te=[],ie=[],me=[],xe=[],Fe=[];for(const ve of _){const{progress:je}=ve;!je.uploadComplete&&je.uploadStarted&&(P.push(ve),ve.isPaused||xe.push(ve)),je.uploadStarted||N.push(ve),(je.uploadStarted||je.preprocess||je.postprocess)&&z.push(ve),je.uploadStarted&&G.push(ve),ve.isPaused&&te.push(ve),je.uploadComplete&&ie.push(ve),ve.error&&me.push(ve),(je.preprocess||je.postprocess)&&Fe.push(ve)}return{newFiles:N,startedFiles:z,uploadStartedFiles:G,pausedFiles:te,completeFiles:ie,erroredFiles:me,inProgressFiles:P,inProgressNotPausedFiles:xe,processingFiles:Fe,isUploadStarted:G.length>0,isAllComplete:p===100&&ie.length===_.length&&Fe.length===0,isAllErrored:!!C&&me.length===_.length,isAllPaused:P.length!==0&&te.length===P.length,isUploadInProgress:P.length>0,isSomeGhost:_.some(ve=>ve.isGhost)}}validateRestrictions(f,p=this.getFiles()){try{Pt(this,Pg).validate(p,[f])}catch(C){return C}return null}validateSingleFile(f){try{Pt(this,Pg).validateSingleFile(f)}catch(p){return p.message}return null}validateAggregateRestrictions(f){const p=this.getFiles();try{Pt(this,Pg).validateAggregateRestrictions(p,f)}catch(C){return C.message}return null}checkIfFileAlreadyExists(f){const{files:p}=this.getState();return!!(p[f]&&!p[f].isGhost)}addFile(f){Yn(this,Gn,xK).call(this,f);const{nextFilesState:p,validFilesToAdd:C,errors:_}=Yn(this,Gn,TK).call(this,[f]),P=_.filter(z=>z.isRestriction);if(Yn(this,Gn,T2).call(this,P),_.length>0)throw _[0];this.setState({files:p});const[N]=C;return this.emit("file-added",N),this.emit("files-added",C),this.log(`Added file: ${N.name}, ${N.id}, mime type: ${N.type}`),Yn(this,Gn,EK).call(this),N.id}addFiles(f){Yn(this,Gn,xK).call(this);const{nextFilesState:p,validFilesToAdd:C,errors:_}=Yn(this,Gn,TK).call(this,f),P=_.filter(z=>z.isRestriction);Yn(this,Gn,T2).call(this,P);const N=_.filter(z=>!z.isRestriction);if(N.length>0){let z=`Multiple errors occurred while adding files:
`;if(N.forEach(G=>{z+=`
 * ${G.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:N.length}),details:z},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(N,z);{const G=new Error(z);throw G.errors=N,G}}this.setState({files:p}),C.forEach(z=>{this.emit("file-added",z)}),this.emit("files-added",C),C.length>5?this.log(`Added batch of ${C.length} files`):Object.values(C).forEach(z=>{this.log(`Added file: ${z.name}
 id: ${z.id}
 type: ${z.type}`)}),C.length>0&&Yn(this,Gn,EK).call(this)}removeFiles(f){const{files:p,currentUploads:C}=this.getState(),_={...p},P={...C},N=Object.create(null);f.forEach(ie=>{p[ie]&&(N[ie]=p[ie],delete _[ie])});function z(ie){return N[ie]===void 0}Object.keys(P).forEach(ie=>{const me=C[ie].fileIDs.filter(z);if(me.length===0){delete P[ie];return}const{capabilities:xe}=this.getState();if(me.length!==C[ie].fileIDs.length&&!xe.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");P[ie]={...C[ie],fileIDs:me}});const G={currentUploads:P,files:_};Object.keys(_).length===0&&(G.allowNewUpload=!0,G.error=null,G.recoveredState=null),this.setState(G),Pt(this,D2).call(this);const te=Object.keys(N);te.forEach(ie=>{this.emit("file-removed",N[ie])}),te.length>5?this.log(`Removed ${te.length} files`):this.log(`Removed files: ${te.join(", ")}`)}removeFile(f){this.removeFiles([f])}pauseResume(f){if(!this.getState().capabilities.resumableUploads||this.getFile(f).progress.uploadComplete)return;const p=this.getFile(f),_=!(p.isPaused||!1);return this.setFileState(f,{isPaused:_}),this.emit("upload-pause",p,_),_}pauseAll(){const f={...this.getState().files};Object.keys(f).filter(C=>!f[C].progress.uploadComplete&&f[C].progress.uploadStarted).forEach(C=>{const _={...f[C],isPaused:!0};f[C]=_}),this.setState({files:f}),this.emit("pause-all")}resumeAll(){const f={...this.getState().files};Object.keys(f).filter(C=>!f[C].progress.uploadComplete&&f[C].progress.uploadStarted).forEach(C=>{const _={...f[C],isPaused:!1,error:null};f[C]=_}),this.setState({files:f}),this.emit("resume-all")}async retryAll(){const f=await Yn(this,Gn,kK).call(this);return this.emit("complete",f),f}cancelAll(){this.emit("cancel-all");const{files:f}=this.getState(),p=Object.keys(f);p.length&&this.removeFiles(p),this.setState(K6)}retryUpload(f){this.setFileState(f,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(f));const p=Yn(this,Gn,EM).call(this,[f],{forceAllowNewUpload:!0});return Yn(this,Gn,TM).call(this,p)}logout(){this.iteratePlugins(f=>{var p,C;(C=(p=f.provider)==null?void 0:p.logout)==null||C.call(p)})}[Symbol.for("uppy test: updateTotalProgress")](){return Yn(this,Gn,OK).call(this)}updateOnlineStatus(){window.navigator.onLine??!0?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(f,...p){if(typeof f!="function"){const N=`Expected a plugin class, but got ${f===null?"null":typeof f}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(N)}const C=new f(this,...p),_=C.id;if(!_)throw new Error("Your plugin must have an id");if(!C.type)throw new Error("Your plugin must have a type");const P=this.getPlugin(_);if(P){const N=`Already found a plugin named '${P.id}'. Tried to use: '${_}'.
Uppy plugins must have unique \`id\` options.`;throw new Error(N)}return f.VERSION&&this.log(`Using ${_} v${f.VERSION}`),C.type in Pt(this,Mg)?Pt(this,Mg)[C.type].push(C):Pt(this,Mg)[C.type]=[C],C.install(),this.emit("plugin-added",C),this}getPlugin(f){for(const p of Object.values(Pt(this,Mg))){const C=p.find(_=>_.id===f);if(C!=null)return C}}[Symbol.for("uppy test: getPlugins")](f){return Pt(this,Mg)[f]}iteratePlugins(f){Object.values(Pt(this,Mg)).flat(1).forEach(f)}removePlugin(f){this.log(`Removing plugin ${f.id}`),this.emit("plugin-remove",f),f.uninstall&&f.uninstall();const p=Pt(this,Mg)[f.type],C=p.findIndex(N=>N.id===f.id);C!==-1&&p.splice(C,1);const P={plugins:{...this.getState().plugins,[f.id]:void 0}};this.setState(P)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),Pt(this,FM).call(this),this.iteratePlugins(f=>{this.removePlugin(f)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",Pt(this,Ly)),window.removeEventListener("offline",Pt(this,Ly)))}hideInfo(){const{info:f}=this.getState();this.setState({info:f.slice(1)}),this.emit("info-hidden")}info(f,p="info",C=3e3){const _=typeof f=="object";this.setState({info:[...this.getState().info,{type:p,message:_?f.message:f,details:_?f.details:null}]}),setTimeout(()=>this.hideInfo(),C),this.emit("info-visible")}log(f,p){const{logger:C}=this.opts;switch(p){case"error":C.error(f);break;case"warning":C.warn(f);break;default:C.debug(f);break}}registerRequestClient(f,p){Pt(this,LM).set(f,p)}getRequestClientForFile(f){if(!f.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${f.id}`);const p=Pt(this,LM).get(f.remote.requestClientId);if(p==null)throw new Error(`requestClientId "${f.remote.requestClientId}" not registered for file "${f.id}"`);return p}restore(f){return this.log(`Core: attempting to restore upload "${f}"`),this.getState().currentUploads[f]?Yn(this,Gn,TM).call(this,f):(Yn(this,Gn,i8).call(this,f),Promise.reject(new Error("Nonexistent upload")))}[Symbol.for("uppy test: createUpload")](...f){return Yn(this,Gn,EM).call(this,...f)}addResultData(f,p){if(!Yn(this,Gn,CJ).call(this,f)){this.log(`Not setting result for an upload that has been removed: ${f}`);return}const{currentUploads:C}=this.getState(),_={...C[f],result:{...C[f].result,...p}};this.setState({currentUploads:{...C,[f]:_}})}async upload(){var _;(_=Pt(this,Mg).uploader)!=null&&_.length||this.log("No uploader type plugins are used","warning");let{files:f}=this.getState();if(Yn(this,Gn,_K).call(this).length>0){const P=await Yn(this,Gn,kK).call(this);if(!(this.getFiles().filter(z=>z.progress.uploadStarted==null).length>0))return this.emit("complete",P),P;({files:f}=this.getState())}const C=this.opts.onBeforeUpload(f);return C===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(C&&typeof C=="object"&&(f=C,this.setState({files:f})),Promise.resolve().then(()=>Pt(this,Pg).validateMinNumberOfFiles(f)).catch(P=>{throw Yn(this,Gn,T2).call(this,[P]),P}).then(()=>{if(!Yn(this,Gn,bJ).call(this,f))throw new Ng(this.i18n("missingRequiredMetaField"))}).catch(P=>{throw P}).then(async()=>{const{currentUploads:P}=this.getState(),N=Object.values(P).flatMap(ie=>ie.fileIDs),z=[];Object.keys(f).forEach(ie=>{const me=this.getFile(ie);!me.progress.uploadStarted&&N.indexOf(ie)===-1&&z.push(me.id)});const G=Yn(this,Gn,EM).call(this,z),te=await Yn(this,Gn,TM).call(this,G);return this.emit("complete",te),te}).catch(P=>{throw this.emit("error",P),this.log(P,"error"),P}))}};Mg=new WeakMap,Pg=new WeakMap,FM=new WeakMap,O2=new WeakMap,$k=new WeakMap,Ik=new WeakMap,A2=new WeakMap,Gn=new WeakSet,T2=function(f){for(const N of f)N.isRestriction?this.emit("restriction-failed",N.file,N):this.emit("error",N,N.file),this.log(N,"warning");const p=f.filter(N=>N.isUserFacing),C=4,_=p.slice(0,C),P=p.slice(C);_.forEach(({message:N,details:z=""})=>{this.info({message:N,details:z},"error",this.opts.infoTimeout)}),P.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:P.length})})},SK=function(f){const{missingFields:p,error:C}=Pt(this,Pg).getMissingRequiredMetaFields(f);return p.length>0?(this.setFileState(f.id,{missingRequiredMetaFields:p,error:C.message}),this.log(C.message),this.emit("restriction-failed",f,C),!1):(p.length===0&&f.missingRequiredMetaFields&&this.setFileState(f.id,{missingRequiredMetaFields:[]}),!0)},bJ=function(f){let p=!0;for(const C of Object.values(f))Yn(this,Gn,SK).call(this,C)||(p=!1);return p},xK=function(f){const{allowNewUpload:p}=this.getState();if(p===!1){const C=new Ng(this.i18n("noMoreFilesAllowed"),{file:f});throw Yn(this,Gn,T2).call(this,[C]),C}},vJ=function(f){const p=f instanceof File?{name:f.name,type:f.type,size:f.size,data:f}:f,C=mJ(p),_=jee(C,p),P=g8(_).extension,N=NQ(p,this.getID()),z=p.meta||{};z.name=_,z.type=C;const G=Number.isFinite(p.data.size)?p.data.size:null;return{source:p.source||"",id:N,name:_,extension:P||"",meta:{...this.getState().meta,...z},type:C,data:p.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:G,uploadComplete:!1,uploadStarted:null},size:G,isGhost:!1,isRemote:p.isRemote||!1,remote:p.remote,preview:p.preview}},EK=function(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(f=>{f.isRestriction||this.log(f.stack||f.message||f)})},4))},TK=function(f){var N;let{files:p}=this.getState(),C={...p};const _=[],P=[];for(const z of f)try{let G=Yn(this,Gn,vJ).call(this,z);const te=(N=p[G.id])==null?void 0:N.isGhost;te&&(G={...p[G.id],isGhost:!1,data:z.data},this.log(`Replaced the blob in the restored ghost file: ${G.name}, ${G.id}`));const ie=this.opts.onBeforeFileAdded(G,C);if(p=this.getState().files,C={...p,...C},!ie&&this.checkIfFileAlreadyExists(G.id))throw new Ng(this.i18n("noDuplicates",{fileName:G.name??this.i18n("unnamed")}),{file:z});if(ie===!1&&!te)throw new Ng("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:z});typeof ie=="object"&&ie!==null&&(G=ie),Pt(this,Pg).validateSingleFile(G),C[G.id]=G,_.push(G)}catch(G){P.push(G)}try{Pt(this,Pg).validateAggregateRestrictions(Object.values(p),_)}catch(z){return P.push(z),{nextFilesState:p,validFilesToAdd:[],errors:P}}return{nextFilesState:C,validFilesToAdd:_,errors:P}},_K=function(){const{files:f}=this.getState();return Object.keys(f).filter(p=>{const C=f[p];return C.error&&(!C.missingRequiredMetaFields||C.missingRequiredMetaFields.length===0)})},kK=async function(){const f=Yn(this,Gn,_K).call(this),p={...this.getState().files};if(f.forEach(_=>{p[_]={...p[_],isPaused:!1,error:null}}),this.setState({files:p,error:null}),this.emit("retry-all",this.getFilesByIds(f)),f.length===0)return{successful:[],failed:[]};const C=Yn(this,Gn,EM).call(this,f,{forceAllowNewUpload:!0});return Yn(this,Gn,TM).call(this,C)},k8=new WeakMap,OK=function(){const f=Yn(this,Gn,yJ).call(this);let p=null;f!=null&&(p=Math.round(f*100),p>100?p=100:p<0&&(p=0)),this.emit("progress",p??0),this.setState({totalProgress:p??0})},D2=new WeakMap,yJ=function(){const p=this.getFiles().filter(G=>G.progress.uploadStarted||G.progress.preprocess||G.progress.postprocess);if(p.length===0)return 0;if(p.every(G=>G.progress.uploadComplete))return 1;const C=G=>G.progress.bytesTotal!=null&&G.progress.bytesTotal!==0,_=p.filter(C),P=p.filter(G=>!C(G));if(_.every(G=>G.progress.uploadComplete)&&P.length>0&&!P.every(G=>G.progress.uploadComplete))return null;const N=_.reduce((G,te)=>G+(te.progress.bytesTotal??0),0),z=_.reduce((G,te)=>G+(te.progress.bytesUploaded||0),0);return N===0?0:z/N},wJ=function(){const f=(_,P,N)=>{let z=_.message||"Unknown error";_.details&&(z+=` ${_.details}`),this.setState({error:z}),P!=null&&P.id in this.getState().files&&this.setFileState(P.id,{error:z,response:N})};this.on("error",f),this.on("upload-error",(_,P,N)=>{if(f(P,_,N),typeof P=="object"&&P.message){this.log(P.message,"error");const z=new Error(this.i18n("failedToUpload",{file:(_==null?void 0:_.name)??""}));z.isUserFacing=!0,z.details=P.message,P.details&&(z.details+=` ${P.details}`),Yn(this,Gn,T2).call(this,[z])}else Yn(this,Gn,T2).call(this,[P])});let p=null;this.on("upload-stalled",(_,P)=>{const{message:N}=_,z=P.map(G=>G.meta.name).join(", ");p||(this.info({message:N,details:z},"warning",this.opts.infoTimeout),p=setTimeout(()=>{p=null},this.opts.infoTimeout)),this.log(`${N} ${z}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});const C=_=>{const P=_.filter(z=>{const G=z!=null&&this.getFile(z.id);return G||this.log(`Not setting progress for a file that has been removed: ${z==null?void 0:z.id}`),G}),N=Object.fromEntries(P.map(z=>[z.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,bytesUploaded:0,bytesTotal:z.size}}]));this.patchFilesState(N)};this.on("upload-start",C),this.on("upload-progress",Pt(this,k8)),this.on("upload-success",(_,P)=>{if(_==null||!this.getFile(_.id)){this.log(`Not setting progress for a file that has been removed: ${_==null?void 0:_.id}`);return}const N=this.getFile(_.id).progress;this.setFileState(_.id,{progress:{...N,postprocess:Pt(this,A2).size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:N.bytesTotal},response:P,uploadURL:P.uploadURL,isPaused:!1}),_.size==null&&this.setFileState(_.id,{size:P.bytesUploaded||N.bytesTotal}),Pt(this,D2).call(this)}),this.on("preprocess-progress",(_,P)=>{if(_==null||!this.getFile(_.id)){this.log(`Not setting progress for a file that has been removed: ${_==null?void 0:_.id}`);return}this.setFileState(_.id,{progress:{...this.getFile(_.id).progress,preprocess:P}})}),this.on("preprocess-complete",_=>{if(_==null||!this.getFile(_.id)){this.log(`Not setting progress for a file that has been removed: ${_==null?void 0:_.id}`);return}const P={...this.getState().files};P[_.id]={...P[_.id],progress:{...P[_.id].progress}},delete P[_.id].progress.preprocess,this.setState({files:P})}),this.on("postprocess-progress",(_,P)=>{if(_==null||!this.getFile(_.id)){this.log(`Not setting progress for a file that has been removed: ${_==null?void 0:_.id}`);return}this.setFileState(_.id,{progress:{...this.getState().files[_.id].progress,postprocess:P}})}),this.on("postprocess-complete",_=>{if(_==null||!this.getFile(_.id)){this.log(`Not setting progress for a file that has been removed: ${_==null?void 0:_.id}`);return}const P={...this.getState().files};P[_.id]={...P[_.id],progress:{...P[_.id].progress}},delete P[_.id].progress.postprocess,this.setState({files:P})}),this.on("restored",()=>{Pt(this,D2).call(this)}),this.on("dashboard:file-edit-complete",_=>{_&&Yn(this,Gn,SK).call(this,_)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",Pt(this,Ly)),window.addEventListener("offline",Pt(this,Ly)),setTimeout(Pt(this,Ly),3e3))},Ly=new WeakMap,LM=new WeakMap,EM=function(f,p={}){const{forceAllowNewUpload:C=!1}=p,{allowNewUpload:_,currentUploads:P}=this.getState();if(!_&&!C)throw new Error("Cannot create a new upload: already uploading.");const N=Uee();return this.emit("upload",N,this.getFilesByIds(f)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...P,[N]:{fileIDs:f,step:0,result:{}}}}),N},CJ=function(f){const{currentUploads:p}=this.getState();return p[f]},i8=function(f){const p={...this.getState().currentUploads};delete p[f],this.setState({currentUploads:p})},TM=async function(f){const p=()=>{const{currentUploads:N}=this.getState();return N[f]};let C=p();const _=[...Pt(this,$k),...Pt(this,Ik),...Pt(this,A2)];try{for(let N=C.step||0;N<_.length&&C;N++){const z=_[N];this.setState({currentUploads:{...this.getState().currentUploads,[f]:{...C,step:N}}});const{fileIDs:G}=C;await z(G,f),C=p()}}catch(N){throw Yn(this,Gn,i8).call(this,f),N}if(C){C.fileIDs.forEach(te=>{const ie=this.getFile(te);ie!=null&&ie.progress.postprocess&&this.emit("postprocess-complete",ie)});const N=C.fileIDs.map(te=>this.getFile(te)),z=N.filter(te=>!te.error),G=N.filter(te=>te.error);this.addResultData(f,{successful:z,failed:G,uploadID:f}),C=p()}let P;return C&&(P=C.result,Yn(this,Gn,i8).call(this,f)),P==null&&(this.log(`Not setting result for an upload that has been removed: ${f}`),P={successful:[],failed:[],uploadID:f}),P},Yo(O8,"VERSION",Zee.version);let h8=O8;var Lp,HM;class ote{constructor(f){rs(this,Lp);rs(this,HM,[]);Qr(this,Lp,f)}on(f,p){return Pt(this,HM).push([f,p]),Pt(this,Lp).on(f,p)}remove(){for(const[f,p]of Pt(this,HM).splice(0))Pt(this,Lp).off(f,p)}onFilePause(f,p){this.on("upload-pause",(C,_)=>{f===(C==null?void 0:C.id)&&p(_)})}onFileRemove(f,p){this.on("file-removed",C=>{f===C.id&&p(C.id)})}onPause(f,p){this.on("upload-pause",(C,_)=>{f===(C==null?void 0:C.id)&&p(_)})}onRetry(f,p){this.on("upload-retry",C=>{f===(C==null?void 0:C.id)&&p()})}onRetryAll(f,p){this.on("retry-all",()=>{Pt(this,Lp).getFile(f)&&p()})}onPauseAll(f,p){this.on("pause-all",()=>{Pt(this,Lp).getFile(f)&&p()})}onCancelAll(f,p){this.on("cancel-all",(...C)=>{Pt(this,Lp).getFile(f)&&p(...C)})}onResumeAll(f,p){this.on("resume-all",()=>{Pt(this,Lp).getFile(f)&&p()})}}Lp=new WeakMap,HM=new WeakMap;class AK extends Error{constructor(p,C=null){super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall.");Yo(this,"cause");Yo(this,"isNetworkError");Yo(this,"request");this.cause=p,this.isNetworkError=!0,this.request=C}}var R2,Fk,zM,Lk;class ste{constructor(f,p){rs(this,R2);rs(this,Fk,!1);rs(this,zM);rs(this,Lk);Qr(this,Lk,f),Qr(this,zM,()=>p(f))}progress(){Pt(this,Fk)||Pt(this,Lk)>0&&(clearTimeout(Pt(this,R2)),Qr(this,R2,setTimeout(Pt(this,zM),Pt(this,Lk))))}done(){Pt(this,Fk)||(clearTimeout(Pt(this,R2)),Qr(this,R2,void 0),Qr(this,Fk,!0))}}R2=new WeakMap,Fk=new WeakMap,zM=new WeakMap,Lk=new WeakMap;const Y6=()=>{};function rte(w,f={}){const{body:p=null,headers:C={},method:_="GET",onBeforeRequest:P=Y6,onUploadProgress:N=Y6,shouldRetry:z=()=>!0,onAfterResponse:G=Y6,onTimeout:te=Y6,responseType:ie,retries:me=3,signal:xe=null,timeout:Fe=3e4,withCredentials:ve=!1}=f,je=ze=>.3*2**(ze-1)*1e3,He=new ste(Fe,te);function Zt(ze=0){return new Promise(async(Q,Ge)=>{const gn=new XMLHttpRequest,_t=ae=>{z(gn)&&ze<me?setTimeout(()=>{Zt(ze+1).then(Q,Ge)},je(ze)):(He.done(),Ge(ae))};gn.open(_,w,!0),gn.withCredentials=ve,ie&&(gn.responseType=ie),xe==null||xe.addEventListener("abort",()=>{gn.abort(),Ge(new DOMException("Aborted","AbortError"))}),gn.onload=async()=>{try{await G(gn,ze)}catch(ae){ae.request=gn,_t(ae);return}gn.status>=200&&gn.status<300?(He.done(),Q(gn)):z(gn)&&ze<me?setTimeout(()=>{Zt(ze+1).then(Q,Ge)},je(ze)):(He.done(),Ge(new AK(gn.statusText,gn)))},gn.onerror=()=>_t(new AK(gn.statusText,gn)),gn.upload.onprogress=ae=>{He.progress(),N(ae)},C&&Object.keys(C).forEach(ae=>{gn.setRequestHeader(ae,C[ae])}),await P(gn,ze),gn.send(p)})}return Zt()}function ate(w){const f=p=>"error"in p&&!!p.error;return w.filter(p=>!f(p))}function ite(w){return w.filter(f=>{var p;return!((p=f.progress)!=null&&p.uploadStarted)||!f.isRestored})}function _X(w,f){return w===!0?Object.keys(f):Array.isArray(w)?w:[]}function cte(w){return w?w.readyState!==0&&w.readyState!==4||w.status===0:!1}function lte(w){return new Error("Cancelled",{cause:w})}function kX(w){var f;if(w!=null){const p=()=>this.abort(w.reason);w.addEventListener("abort",p,{once:!0});const C=()=>{w.removeEventListener("abort",p)};(f=this.then)==null||f.call(this,C,C)}return this}var Kb,Hp,Yb,Hk,zp,zk,M2,$l,DK,_M,xJ,EJ,TJ,A8,Vk;class SJ{constructor(f){rs(this,$l);rs(this,Kb,0);rs(this,Hp,[]);rs(this,Yb,!1);rs(this,Hk);rs(this,zp,1);rs(this,zk);rs(this,M2);Yo(this,"limit");rs(this,A8,()=>this.resume());rs(this,Vk,()=>{if(Pt(this,Yb)){Qr(this,M2,setTimeout(Pt(this,Vk),0));return}Qr(this,zp,this.limit),this.limit=Math.ceil((Pt(this,zk)+Pt(this,zp))/2);for(let f=Pt(this,zp);f<=this.limit;f++)Yn(this,$l,_M).call(this);Pt(this,zk)-Pt(this,zp)>3?Qr(this,M2,setTimeout(Pt(this,Vk),2e3)):Qr(this,zp,Math.floor(Pt(this,zp)/2))});typeof f!="number"||f===0?this.limit=1/0:this.limit=f}run(f,p){return!Pt(this,Yb)&&Pt(this,Kb)<this.limit?Yn(this,$l,DK).call(this,f):Yn(this,$l,EJ).call(this,f,p)}wrapSyncFunction(f,p){return(...C)=>{const _=this.run(()=>(f(...C),queueMicrotask(()=>_.done()),()=>{}),p);return{abortOn:kX,abort(){_.abort()}}}}wrapPromiseFunction(f,p){return(...C)=>{let _;const P=new Promise((N,z)=>{_=this.run(()=>{let G,te;try{te=Promise.resolve(f(...C))}catch(ie){te=Promise.reject(ie)}return te.then(ie=>{G?z(G):(_.done(),N(ie))},ie=>{G?z(G):(_.done(),z(ie))}),ie=>{G=lte(ie)}},p)});return P.abort=N=>{_.abort(N)},P.abortOn=kX,P}}resume(){Qr(this,Yb,!1),clearTimeout(Pt(this,Hk));for(let f=0;f<this.limit;f++)Yn(this,$l,_M).call(this)}pause(f=null){Qr(this,Yb,!0),clearTimeout(Pt(this,Hk)),f!=null&&Qr(this,Hk,setTimeout(Pt(this,A8),f))}rateLimit(f){clearTimeout(Pt(this,M2)),this.pause(f),this.limit>1&&Number.isFinite(this.limit)&&(Qr(this,zk,this.limit-1),this.limit=Pt(this,zp),Qr(this,M2,setTimeout(Pt(this,Vk),f)))}get isPaused(){return Pt(this,Yb)}}Kb=new WeakMap,Hp=new WeakMap,Yb=new WeakMap,Hk=new WeakMap,zp=new WeakMap,zk=new WeakMap,M2=new WeakMap,$l=new WeakSet,DK=function(f){Qr(this,Kb,Pt(this,Kb)+1);let p=!1,C;try{C=f()}catch(_){throw Qr(this,Kb,Pt(this,Kb)-1),_}return{abort:_=>{p||(p=!0,Qr(this,Kb,Pt(this,Kb)-1),C==null||C(_),Yn(this,$l,_M).call(this))},done:()=>{p||(p=!0,Qr(this,Kb,Pt(this,Kb)-1),Yn(this,$l,_M).call(this))}}},_M=function(){queueMicrotask(()=>Yn(this,$l,xJ).call(this))},xJ=function(){if(Pt(this,Yb)||Pt(this,Kb)>=this.limit||Pt(this,Hp).length===0)return;const f=Pt(this,Hp).shift();if(f==null)throw new Error("Invariant violation: next is null");const p=Yn(this,$l,DK).call(this,f.fn);f.abort=p.abort,f.done=p.done},EJ=function(f,p){const C={fn:f,priority:(p==null?void 0:p.priority)||0,abort:()=>{Yn(this,$l,TJ).call(this,C)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},_=Pt(this,Hp).findIndex(P=>C.priority>P.priority);return _===-1?Pt(this,Hp).push(C):Pt(this,Hp).splice(_,0,C),C},TJ=function(f){const p=Pt(this,Hp).indexOf(f);p!==-1&&Pt(this,Hp).splice(p,1)},A8=new WeakMap,Vk=new WeakMap;const oK=Symbol("__queue"),ute="4.4.2",dte={version:ute},mte={strings:{uploadStalled:"Upload has not made any progress for %{seconds} seconds. You may want to retry it."}};function fte(w,f){let p=f;return p||(p=new Error("Upload error")),typeof p=="string"&&(p=new Error(p)),p instanceof Error||(p=Object.assign(new Error("Upload error"),{data:p})),cte(w)?(p=new AK(p,w),p):(p.request=w,p)}function OX(w){return w.data.slice(0,w.data.size,w.meta.type)}const gte={formData:!0,fieldName:"file",method:"post",allowedMetaFields:!0,bundle:!1,headers:{},timeout:30*1e3,limit:5,withCredentials:!1,responseType:""};var Uk,Wp,_J,kJ,OJ,AJ,VM;class LK extends lJ{constructor(p,C){super(p,{...gte,fieldName:C.bundle?"files[]":"file",...C});rs(this,Wp);rs(this,Uk);Yo(this,"requests");Yo(this,"uploaderEvents");rs(this,VM,async p=>{if(p.length===0){this.uppy.log("[XHRUpload] No files to upload!");return}this.opts.limit===0&&!this.opts[oK]&&this.uppy.log("[XHRUpload] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/xhr-upload/#limit-0","warning"),this.uppy.log("[XHRUpload] Uploading...");const C=this.uppy.getFilesByIds(p),_=ate(C),P=ite(_);if(this.uppy.emit("upload-start",P),this.opts.bundle){if(_.some(z=>z.isRemote))throw new Error("Can’t upload remote files when the `bundle: true` option is set");if(typeof this.opts.headers=="function")throw new TypeError("`headers` may not be a function when the `bundle: true` option is set");await Yn(this,Wp,kJ).call(this,_)}else await Yn(this,Wp,AJ).call(this,_)});if(this.type="uploader",this.id=this.opts.id||"XHRUpload",this.defaultLocale=mte,this.i18nInit(),oK in this.opts?this.requests=this.opts[oK]:this.requests=new SJ(this.opts.limit),this.opts.bundle&&!this.opts.formData)throw new Error("`opts.formData` must be true when `opts.bundle` is enabled.");if(this.opts.bundle&&typeof this.opts.headers=="function")throw new Error("`opts.headers` can not be a function when the `bundle: true` option is set.");if((C==null?void 0:C.allowedMetaFields)===void 0&&"metaFields"in this.opts)throw new Error("The `metaFields` option has been renamed to `allowedMetaFields`.");this.uploaderEvents=Object.create(null),Qr(this,Uk,_=>async(P,N)=>{var z,G;try{const te=await rte(P,{...N,onBeforeRequest:(xe,Fe)=>{var ve,je;return(je=(ve=this.opts).onBeforeRequest)==null?void 0:je.call(ve,xe,Fe,_)},shouldRetry:this.opts.shouldRetry,onAfterResponse:this.opts.onAfterResponse,onTimeout:xe=>{const Fe=Math.ceil(xe/1e3),ve=new Error(this.i18n("uploadStalled",{seconds:Fe}));this.uppy.emit("upload-stalled",ve,_)},onUploadProgress:xe=>{if(xe.lengthComputable)for(const{id:Fe}of _){const ve=this.uppy.getFile(Fe);this.uppy.emit("upload-progress",ve,{uploadStarted:ve.progress.uploadStarted??0,bytesUploaded:xe.loaded/xe.total*ve.size,bytesTotal:ve.size})}}});let ie=await((G=(z=this.opts).getResponseData)==null?void 0:G.call(z,te));if(te.responseType==="json")ie??(ie=te.response);else try{ie??(ie=JSON.parse(te.responseText))}catch(xe){throw new Error("@uppy/xhr-upload expects a JSON response (with a `url` property). To parse non-JSON responses, use `getResponseData` to turn your response into JSON.",{cause:xe})}const me=typeof(ie==null?void 0:ie.url)=="string"?ie.url:void 0;for(const{id:xe}of _)this.uppy.emit("upload-success",this.uppy.getFile(xe),{status:te.status,body:ie,uploadURL:me});return te}catch(te){if(te.name==="AbortError")return;const ie=te.request;for(const me of _)this.uppy.emit("upload-error",this.uppy.getFile(me.id),fte(ie,te),ie);throw te}})}getOptions(p){const C=this.uppy.getState().xhrUpload,{headers:_}=this.opts,P={...this.opts,...C||{},...p.xhrUpload||{},headers:{}};return typeof _=="function"?P.headers=_(p):Object.assign(P.headers,this.opts.headers),C&&Object.assign(P.headers,C.headers),p.xhrUpload&&Object.assign(P.headers,p.xhrUpload.headers),P}addMetadata(p,C,_){_X(_.allowedMetaFields,C).forEach(N=>{const z=C[N];Array.isArray(z)?z.forEach(G=>p.append(N,G)):p.append(N,z)})}createFormDataUpload(p,C){const _=new FormData;this.addMetadata(_,p.meta,C);const P=OX(p);return p.name?_.append(C.fieldName,P,p.meta.name):_.append(C.fieldName,P),_}createBundledUpload(p,C){const _=new FormData,{meta:P}=this.uppy.getState();return this.addMetadata(_,P,C),p.forEach(N=>{const z=this.getOptions(N),G=OX(N);N.name?_.append(z.fieldName,G,N.name):_.append(z.fieldName,G)}),_}install(){if(this.opts.bundle){const{capabilities:p}=this.uppy.getState();this.uppy.setState({capabilities:{...p,individualCancellation:!1}})}this.uppy.addUploader(Pt(this,VM))}uninstall(){if(this.opts.bundle){const{capabilities:p}=this.uppy.getState();this.uppy.setState({capabilities:{...p,individualCancellation:!0}})}this.uppy.removeUploader(Pt(this,VM))}}Uk=new WeakMap,Wp=new WeakSet,_J=async function(p){const C=new ote(this.uppy),_=new AbortController,P=this.requests.wrapPromiseFunction(async()=>{const N=this.getOptions(p),z=Pt(this,Uk).call(this,[p]),G=N.formData?this.createFormDataUpload(p,N):p.data,te=typeof N.endpoint=="string"?N.endpoint:await N.endpoint(p);return z(te,{...N,body:G,signal:_.signal})});C.onFileRemove(p.id,()=>_.abort()),C.onCancelAll(p.id,()=>{_.abort()});try{await P().abortOn(_.signal)}catch(N){if(N.message!=="Cancelled")throw N}finally{C.remove()}},kJ=async function(p){const C=new AbortController,_=this.requests.wrapPromiseFunction(async()=>{const N=this.uppy.getState().xhrUpload??{},z=Pt(this,Uk).call(this,p),G=this.createBundledUpload(p,{...this.opts,...N}),te=typeof this.opts.endpoint=="string"?this.opts.endpoint:await this.opts.endpoint(p);return z(te,{...this.opts,body:G,signal:C.signal})});function P(){C.abort()}this.uppy.once("cancel-all",P);try{await _().abortOn(C.signal)}catch(N){if(N.message!=="Cancelled")throw N}finally{this.uppy.off("cancel-all",P)}},OJ=function(p){var P;const C=this.getOptions(p),_=_X(C.allowedMetaFields,p.meta);return{...(P=p.remote)==null?void 0:P.body,protocol:"multipart",endpoint:C.endpoint,size:p.data.size,fieldname:C.fieldName,metadata:Object.fromEntries(_.map(N=>[N,p.meta[N]])),httpMethod:C.method,useFormData:C.formData,headers:C.headers}},AJ=async function(p){await Promise.allSettled(p.map(C=>{if(C.isRemote){const _=()=>this.requests,P=new AbortController,N=G=>{G.id===C.id&&P.abort()};this.uppy.on("file-removed",N);const z=this.uppy.getRequestClientForFile(C).uploadRemoteFile(C,Yn(this,Wp,OJ).call(this,C),{signal:P.signal,getQueue:_});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",N)},{priority:-1})(),z}return Yn(this,Wp,_J).call(this,C)}))},VM=new WeakMap,Yo(LK,"VERSION",dte.version);/*!
 * Compressor.js v1.2.1
 * https://fengyuanchen.github.io/compressorjs
 *
 * Copyright 2018-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-02-28T14:09:41.732Z
 */function AX(w,f){var p=Object.keys(w);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(w);f&&(C=C.filter(function(_){return Object.getOwnPropertyDescriptor(w,_).enumerable})),p.push.apply(p,C)}return p}function X6(w){for(var f=1;f<arguments.length;f++){var p=arguments[f]!=null?arguments[f]:{};f%2?AX(Object(p),!0).forEach(function(C){bte(w,C,p[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(p)):AX(Object(p)).forEach(function(C){Object.defineProperty(w,C,Object.getOwnPropertyDescriptor(p,C))})}return w}function hte(w,f){if(!(w instanceof f))throw new TypeError("Cannot call a class as a function")}function DX(w,f){for(var p=0;p<f.length;p++){var C=f[p];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(w,DJ(C.key),C)}}function pte(w,f,p){return f&&DX(w.prototype,f),p&&DX(w,p),Object.defineProperty(w,"prototype",{writable:!1}),w}function bte(w,f,p){return f=DJ(f),f in w?Object.defineProperty(w,f,{value:p,enumerable:!0,configurable:!0,writable:!0}):w[f]=p,w}function p8(){return p8=Object.assign?Object.assign.bind():function(w){for(var f=1;f<arguments.length;f++){var p=arguments[f];for(var C in p)Object.prototype.hasOwnProperty.call(p,C)&&(w[C]=p[C])}return w},p8.apply(this,arguments)}function vte(w,f){if(typeof w!="object"||w===null)return w;var p=w[Symbol.toPrimitive];if(p!==void 0){var C=p.call(w,f);if(typeof C!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(w)}function DJ(w){var f=vte(w,"string");return typeof f=="symbol"?f:String(f)}var RJ={exports:{}};(function(w){typeof window>"u"||function(f){var p=f.HTMLCanvasElement&&f.HTMLCanvasElement.prototype,C=f.Blob&&function(){try{return!!new Blob}catch{return!1}}(),_=C&&f.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),P=f.BlobBuilder||f.WebKitBlobBuilder||f.MozBlobBuilder||f.MSBlobBuilder,N=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,z=(C||P)&&f.atob&&f.ArrayBuffer&&f.Uint8Array&&function(G){var te,ie,me,xe,Fe,ve,je,He,Zt;if(te=G.match(N),!te)throw new Error("invalid data URI");for(ie=te[2]?te[1]:"text/plain"+(te[3]||";charset=US-ASCII"),me=!!te[4],xe=G.slice(te[0].length),me?Fe=atob(xe):Fe=decodeURIComponent(xe),ve=new ArrayBuffer(Fe.length),je=new Uint8Array(ve),He=0;He<Fe.length;He+=1)je[He]=Fe.charCodeAt(He);return C?new Blob([_?je:ve],{type:ie}):(Zt=new P,Zt.append(ve),Zt.getBlob(ie))};f.HTMLCanvasElement&&!p.toBlob&&(p.mozGetAsFile?p.toBlob=function(G,te,ie){var me=this;setTimeout(function(){ie&&p.toDataURL&&z?G(z(me.toDataURL(te,ie))):G(me.mozGetAsFile("blob",te))})}:p.toDataURL&&z&&(p.msToBlob?p.toBlob=function(G,te,ie){var me=this;setTimeout(function(){(te&&te!=="image/png"||ie)&&p.toDataURL&&z?G(z(me.toDataURL(te,ie))):G(me.msToBlob(te))})}:p.toBlob=function(G,te,ie){var me=this;setTimeout(function(){G(z(me.toDataURL(te,ie)))})})),w.exports?w.exports=z:f.dataURLtoBlob=z}(window)})(RJ);var RX=RJ.exports,yte=function(f){return typeof Blob>"u"?!1:f instanceof Blob||Object.prototype.toString.call(f)==="[object Blob]"},MX={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},wte=typeof window<"u"&&typeof window.document<"u",zy=wte?window:{},b8=function(f){return f>0&&f<1/0},Cte=Array.prototype.slice;function HK(w){return Array.from?Array.from(w):Cte.call(w)}var Ste=/^image\/.+$/;function RK(w){return Ste.test(w)}function xte(w){var f=RK(w)?w.substr(6):"";return f==="jpeg"&&(f="jpg"),".".concat(f)}var MJ=String.fromCharCode;function Ete(w,f,p){var C="",_;for(p+=f,_=f;_<p;_+=1)C+=MJ(w.getUint8(_));return C}var Tte=zy.btoa;function PX(w,f){for(var p=[],C=8192,_=new Uint8Array(w);_.length>0;)p.push(MJ.apply(null,HK(_.subarray(0,C)))),_=_.subarray(C);return"data:".concat(f,";base64,").concat(Tte(p.join("")))}function _te(w){var f=new DataView(w),p;try{var C,_,P;if(f.getUint8(0)===255&&f.getUint8(1)===216)for(var N=f.byteLength,z=2;z+1<N;){if(f.getUint8(z)===255&&f.getUint8(z+1)===225){_=z;break}z+=1}if(_){var G=_+4,te=_+10;if(Ete(f,G,4)==="Exif"){var ie=f.getUint16(te);if(C=ie===18761,(C||ie===19789)&&f.getUint16(te+2,C)===42){var me=f.getUint32(te+4,C);me>=8&&(P=te+me)}}}if(P){var xe=f.getUint16(P,C),Fe,ve;for(ve=0;ve<xe;ve+=1)if(Fe=P+ve*12+2,f.getUint16(Fe,C)===274){Fe+=8,p=f.getUint16(Fe,C),f.setUint16(Fe,1,C);break}}}catch{p=1}return p}function kte(w){var f=0,p=1,C=1;switch(w){case 2:p=-1;break;case 3:f=-180;break;case 4:C=-1;break;case 5:f=90,C=-1;break;case 6:f=90;break;case 7:f=90,p=-1;break;case 8:f=-90;break}return{rotate:f,scaleX:p,scaleY:C}}var Ote=/\.\d*(?:0|9){12}\d*$/;function NX(w){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Ote.test(w)?Math.round(w*f)/f:w}function xM(w){var f=w.aspectRatio,p=w.height,C=w.width,_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",P=b8(C),N=b8(p);if(P&&N){var z=p*f;(_==="contain"||_==="none")&&z>C||_==="cover"&&z<C?p=C/f:C=p*f}else P?p=C/f:N&&(C=p*f);return{width:C,height:p}}function Ate(w){for(var f=HK(new Uint8Array(w)),p=f.length,C=[],_=0;_+3<p;){var P=f[_],N=f[_+1];if(P===255&&N===218)break;if(P===255&&N===216)_+=2;else{var z=f[_+2]*256+f[_+3],G=_+z+2,te=f.slice(_,G);C.push(te),_=G}}return C.reduce(function(ie,me){return me[0]===255&&me[1]===225?ie.concat(me):ie},[])}function Dte(w,f){var p=HK(new Uint8Array(w));if(p[2]!==255||p[3]!==224)return w;var C=p[4]*256+p[5],_=[255,216].concat(f,p.slice(4+C));return new Uint8Array(_)}var Rte=zy.ArrayBuffer,sK=zy.FileReader,w2=zy.URL||zy.webkitURL,Mte=/\.\w+$/,Pte=zy.Compressor,Nte=function(){function w(f,p){hte(this,w),this.file=f,this.exif=[],this.image=new Image,this.options=X6(X6({},MX),p),this.aborted=!1,this.result=null,this.init()}return pte(w,[{key:"init",value:function(){var p=this,C=this.file,_=this.options;if(!yte(C)){this.fail(new Error("The first argument must be a File or Blob object."));return}var P=C.type;if(!RK(P)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!w2||!sK){this.fail(new Error("The current browser does not support image compression."));return}Rte||(_.checkOrientation=!1,_.retainExif=!1);var N=P==="image/jpeg",z=N&&_.checkOrientation,G=N&&_.retainExif;if(w2&&!z&&!G)this.load({url:w2.createObjectURL(C)});else{var te=new sK;this.reader=te,te.onload=function(ie){var me=ie.target,xe=me.result,Fe={},ve=1;z&&(ve=_te(xe),ve>1&&p8(Fe,kte(ve))),G&&(p.exif=Ate(xe)),z||G?!w2||ve>1?Fe.url=PX(xe,P):Fe.url=w2.createObjectURL(C):Fe.url=xe,p.load(Fe)},te.onabort=function(){p.fail(new Error("Aborted to read the image with FileReader."))},te.onerror=function(){p.fail(new Error("Failed to read the image with FileReader."))},te.onloadend=function(){p.reader=null},z||G?te.readAsArrayBuffer(C):te.readAsDataURL(C)}}},{key:"load",value:function(p){var C=this,_=this.file,P=this.image;P.onload=function(){C.draw(X6(X6({},p),{},{naturalWidth:P.naturalWidth,naturalHeight:P.naturalHeight}))},P.onabort=function(){C.fail(new Error("Aborted to load the image."))},P.onerror=function(){C.fail(new Error("Failed to load the image."))},zy.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(zy.navigator.userAgent)&&(P.crossOrigin="anonymous"),P.alt=_.name,P.src=p.url}},{key:"draw",value:function(p){var C=this,_=p.naturalWidth,P=p.naturalHeight,N=p.rotate,z=N===void 0?0:N,G=p.scaleX,te=G===void 0?1:G,ie=p.scaleY,me=ie===void 0?1:ie,xe=this.file,Fe=this.image,ve=this.options,je=document.createElement("canvas"),He=je.getContext("2d"),Zt=Math.abs(z)%180===90,ze=(ve.resize==="contain"||ve.resize==="cover")&&b8(ve.width)&&b8(ve.height),Q=Math.max(ve.maxWidth,0)||1/0,Ge=Math.max(ve.maxHeight,0)||1/0,gn=Math.max(ve.minWidth,0)||0,_t=Math.max(ve.minHeight,0)||0,ae=_/P,ut=ve.width,bt=ve.height;if(Zt){var It=[Ge,Q];Q=It[0],Ge=It[1];var Te=[_t,gn];gn=Te[0],_t=Te[1];var ue=[bt,ut];ut=ue[0],bt=ue[1]}ze&&(ae=ut/bt);var Fn=xM({aspectRatio:ae,width:Q,height:Ge},"contain");Q=Fn.width,Ge=Fn.height;var An=xM({aspectRatio:ae,width:gn,height:_t},"cover");if(gn=An.width,_t=An.height,ze){var Dt=xM({aspectRatio:ae,width:ut,height:bt},ve.resize);ut=Dt.width,bt=Dt.height}else{var R=xM({aspectRatio:ae,width:ut,height:bt}),fo=R.width;ut=fo===void 0?_:fo;var ft=R.height;bt=ft===void 0?P:ft}ut=Math.floor(NX(Math.min(Math.max(ut,gn),Q))),bt=Math.floor(NX(Math.min(Math.max(bt,_t),Ge)));var Eo=-ut/2,Jt=-bt/2,qe=ut,go=bt,qs=[];if(ze){var Xo=0,ar=0,Xe=_,yt=P,Z=xM({aspectRatio:ae,width:_,height:P},{contain:"cover",cover:"contain"}[ve.resize]);Xe=Z.width,yt=Z.height,Xo=(_-Xe)/2,ar=(P-yt)/2,qs.push(Xo,ar,Xe,yt)}if(qs.push(Eo,Jt,qe,go),Zt){var di=[bt,ut];ut=di[0],bt=di[1]}je.width=ut,je.height=bt,RK(ve.mimeType)||(ve.mimeType=xe.type);var vo="transparent";xe.size>ve.convertSize&&ve.convertTypes.indexOf(ve.mimeType)>=0&&(ve.mimeType="image/jpeg");var ds=ve.mimeType==="image/jpeg";if(ds&&(vo="#fff"),He.fillStyle=vo,He.fillRect(0,0,ut,bt),ve.beforeDraw&&ve.beforeDraw.call(this,He,je),!this.aborted&&(He.save(),He.translate(ut/2,bt/2),He.rotate(z*Math.PI/180),He.scale(te,me),He.drawImage.apply(He,[Fe].concat(qs)),He.restore(),ve.drew&&ve.drew.call(this,He,je),!this.aborted)){var To=function(on){if(!C.aborted){var Po=function(ws){return C.done({naturalWidth:_,naturalHeight:P,result:ws})};if(on&&ds&&ve.retainExif&&C.exif&&C.exif.length>0){var zt=function(ws){return Po(RX(PX(Dte(ws,C.exif),ve.mimeType)))};if(on.arrayBuffer)on.arrayBuffer().then(zt).catch(function(){C.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var $e=new sK;C.reader=$e,$e.onload=function(eo){var ws=eo.target;zt(ws.result)},$e.onabort=function(){C.fail(new Error("Aborted to read the compressed image with FileReader."))},$e.onerror=function(){C.fail(new Error("Failed to read the compressed image with FileReader."))},$e.onloadend=function(){C.reader=null},$e.readAsArrayBuffer(on)}}else Po(on)}};je.toBlob?je.toBlob(To,ve.mimeType,ve.quality):To(RX(je.toDataURL(ve.mimeType,ve.quality)))}}},{key:"done",value:function(p){var C=p.naturalWidth,_=p.naturalHeight,P=p.result,N=this.file,z=this.image,G=this.options;if(w2&&z.src.indexOf("blob:")===0&&w2.revokeObjectURL(z.src),P)if(G.strict&&!G.retainExif&&P.size>N.size&&G.mimeType===N.type&&!(G.width>C||G.height>_||G.minWidth>C||G.minHeight>_||G.maxWidth<C||G.maxHeight<_))P=N;else{var te=new Date;P.lastModified=te.getTime(),P.lastModifiedDate=te,P.name=N.name,P.name&&P.type!==N.type&&(P.name=P.name.replace(Mte,xte(P.type)))}else P=N;this.result=P,G.success&&G.success.call(this,P)}},{key:"fail",value:function(p){var C=this.options;if(C.error)C.error.call(this,p);else throw p}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=Pte,w}},{key:"setDefaults",value:function(p){p8(MX,p)}}]),w}();const Bte={strings:{compressingImages:"Compressing images...",compressedX:"Saved %{size} by compressing images"}},$te={quality:.6,limit:10};var UM;class Ite extends lJ{constructor(p,C){super(p,{...$te,...C});rs(this,UM);this.id=this.opts.id||"Compressor",this.type="modifier",this.defaultLocale=Bte,Qr(this,UM,new SJ(this.opts.limit)),this.i18nInit(),this.prepareUpload=this.prepareUpload.bind(this),this.compress=this.compress.bind(this)}compress(p){return new Promise((C,_)=>{new Nte(p,{...this.opts,success:C,error:_})})}async prepareUpload(p){let C=0;const _=[],P=Pt(this,UM).wrapPromiseFunction(async z=>{try{const G=await this.compress(z.data),te=z.data.size-G.size;this.uppy.log(`[Image Compressor] Image ${z.id} compressed by ${Mk(te)}`),C+=te;const{name:ie,type:me,size:xe}=G,Fe=g8(ie),je=`${g8(z.meta.name).name}.${Fe.extension}`;this.uppy.setFileState(z.id,{...ie&&{name:ie},...Fe.extension&&{extension:Fe.extension},...me&&{type:me},...xe&&{size:xe},data:G,meta:{...z.meta,type:me,name:je}}),_.push(z)}catch(G){this.uppy.log(`[Image Compressor] Failed to compress ${z.id}:`,"warning"),this.uppy.log(G,"warning")}}),N=p.map(z=>{var te;const G=this.uppy.getFile(z);return this.uppy.emit("preprocess-progress",G,{mode:"indeterminate",message:this.i18n("compressingImages")}),G.isRemote||(G.data.type||(G.data=G.data.slice(0,G.data.size,G.type)),!((te=G.type)!=null&&te.startsWith("image/")))?Promise.resolve():P(G)});await Promise.all(N),this.uppy.emit("compressor:complete",_),C>1024&&this.uppy.info(this.i18n("compressedX",{size:Mk(C)}),"info");for(const z of p){const G=this.uppy.getFile(z);this.uppy.emit("preprocess-complete",G)}}install(){this.uppy.addPreProcessor(this.prepareUpload)}uninstall(){this.uppy.removePreProcessor(this.prepareUpload)}}UM=new WeakMap;function rK(w,f){w.split(/\s+/).forEach(p=>{f(p)})}class Fte{constructor(){this._events={}}on(f,p){rK(f,C=>{const _=this._events[C]||[];_.push(p),this._events[C]=_})}off(f,p){var C=arguments.length;if(C===0){this._events={};return}rK(f,_=>{if(C===1){delete this._events[_];return}const P=this._events[_];P!==void 0&&(P.splice(P.indexOf(p),1),this._events[_]=P)})}trigger(f,...p){var C=this;rK(f,_=>{const P=C._events[_];P!==void 0&&P.forEach(N=>{N.apply(C,p)})})}}function Lte(w){return w.plugins={},class extends w{constructor(){super(...arguments),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(f,p){w.plugins[f]={name:f,fn:p}}initializePlugins(f){var p,C;const _=this,P=[];if(Array.isArray(f))f.forEach(N=>{typeof N=="string"?P.push(N):(_.plugins.settings[N.name]=N.options,P.push(N.name))});else if(f)for(p in f)f.hasOwnProperty(p)&&(_.plugins.settings[p]=f[p],P.push(p));for(;C=P.shift();)_.require(C)}loadPlugin(f){var p=this,C=p.plugins,_=w.plugins[f];if(!w.plugins.hasOwnProperty(f))throw new Error('Unable to find "'+f+'" plugin');C.requested[f]=!0,C.loaded[f]=_.fn.apply(p,[p.plugins.settings[f]||{}]),C.names.push(f)}require(f){var p=this,C=p.plugins;if(!p.plugins.loaded.hasOwnProperty(f)){if(C.requested[f])throw new Error('Plugin has circular dependency ("'+f+'")');p.loadPlugin(f)}return C.loaded[f]}}}const D8=w=>(w=w.filter(Boolean),w.length<2?w[0]||"":zte(w)==1?"["+w.join("")+"]":"(?:"+w.join("|")+")"),PJ=w=>{if(!Hte(w))return w.join("");let f="",p=0;const C=()=>{p>1&&(f+="{"+p+"}")};return w.forEach((_,P)=>{if(_===w[P-1]){p++;return}C(),f+=_,p=1}),C(),f},NJ=w=>{let f=Array.from(w);return D8(f)},Hte=w=>new Set(w).size!==w.length,BM=w=>(w+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),zte=w=>w.reduce((f,p)=>Math.max(f,Vte(p)),0),Vte=w=>Array.from(w).length,BJ=w=>{if(w.length===1)return[[w]];let f=[];const p=w.substring(1);return BJ(p).forEach(function(_){let P=_.slice(0);P[0]=w.charAt(0)+P[0],f.push(P),P=_.slice(0),P.unshift(w.charAt(0)),f.push(P)}),f},Ute=[[0,65535]],Wte="[̀-ͯ·ʾʼ]";let v8,$J;const Zte=3,zK={},BX={"/":"⁄∕",0:"߀",a:"ⱥɐɑ",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",b:"ƀɓƃ",c:"ꜿƈȼↄ",d:"đɗɖᴅƌꮷԁɦ",e:"ɛǝᴇɇ",f:"ꝼƒ",g:"ǥɠꞡᵹꝿɢ",h:"ħⱨⱶɥ",i:"ɨı",j:"ɉȷ",k:"ƙⱪꝁꝃꝅꞣ",l:"łƚɫⱡꝉꝇꞁɭ",m:"ɱɯϻ",n:"ꞥƞɲꞑᴎлԉ",o:"øǿɔɵꝋꝍᴑ",oe:"œ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ƥᵽꝑꝓꝕρ",q:"ꝗꝙɋ",r:"ɍɽꝛꞧꞃ",s:"ßȿꞩꞅʂ",t:"ŧƭʈⱦꞇ",th:"þ",tz:"ꜩ",u:"ʉ",v:"ʋꝟʌ",vy:"ꝡ",w:"ⱳ",y:"ƴɏỿ",z:"ƶȥɀⱬꝣ",hv:"ƕ"};for(let w in BX){let f=BX[w]||"";for(let p=0;p<f.length;p++){let C=f.substring(p,p+1);zK[C]=w}}const jte=new RegExp(Object.keys(zK).join("|")+"|"+Wte,"gu"),Gte=w=>{v8===void 0&&(v8=Xte(Ute))},$X=(w,f="NFKD")=>w.normalize(f),y8=w=>Array.from(w).reduce((f,p)=>f+qte(p),""),qte=w=>(w=$X(w).toLowerCase().replace(jte,f=>zK[f]||""),$X(w,"NFC"));function*Kte(w){for(const[f,p]of w)for(let C=f;C<=p;C++){let _=String.fromCharCode(C),P=y8(_);P!=_.toLowerCase()&&(P.length>Zte||P.length!=0&&(yield{folded:P,composed:_,code_point:C}))}}const Yte=w=>{const f={},p=(C,_)=>{const P=f[C]||new Set,N=new RegExp("^"+NJ(P)+"$","iu");_.match(N)||(P.add(BM(_)),f[C]=P)};for(let C of Kte(w))p(C.folded,C.folded),p(C.folded,C.composed);return f},Xte=w=>{const f=Yte(w),p={};let C=[];for(let P in f){let N=f[P];N&&(p[P]=NJ(N)),P.length>1&&C.push(BM(P))}C.sort((P,N)=>N.length-P.length);const _=D8(C);return $J=new RegExp("^"+_,"u"),p},Jte=(w,f=1)=>{let p=0;return w=w.map(C=>(v8[C]&&(p+=C.length),v8[C]||C)),p>=f?PJ(w):""},Qte=(w,f=1)=>(f=Math.max(f,w.length-1),D8(BJ(w).map(p=>Jte(p,f)))),IX=(w,f=!0)=>{let p=w.length>1?1:0;return D8(w.map(C=>{let _=[];const P=f?C.length():C.length()-1;for(let N=0;N<P;N++)_.push(Qte(C.substrs[N]||"",p));return PJ(_)}))},ene=(w,f)=>{for(const p of f){if(p.start!=w.start||p.end!=w.end||p.substrs.join("")!==w.substrs.join(""))continue;let C=w.parts;const _=N=>{for(const z of C){if(z.start===N.start&&z.substr===N.substr)return!1;if(!(N.length==1||z.length==1)&&(N.start<z.start&&N.end>z.start||z.start<N.start&&z.end>N.start))return!0}return!1};if(!(p.parts.filter(_).length>0))return!0}return!1};class w8{constructor(){Yo(this,"parts");Yo(this,"substrs");Yo(this,"start");Yo(this,"end");this.parts=[],this.substrs=[],this.start=0,this.end=0}add(f){f&&(this.parts.push(f),this.substrs.push(f.substr),this.start=Math.min(f.start,this.start),this.end=Math.max(f.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(f,p){let C=new w8,_=JSON.parse(JSON.stringify(this.parts)),P=_.pop();for(const G of _)C.add(G);let N=p.substr.substring(0,f-P.start),z=N.length;return C.add({start:P.start,end:P.start+z,length:z,substr:N}),C}}const tne=w=>{Gte(),w=y8(w);let f="",p=[new w8];for(let C=0;C<w.length;C++){let P=w.substring(C).match($J);const N=w.substring(C,C+1),z=P?P[0]:null;let G=[],te=new Set;for(const ie of p){const me=ie.last();if(!me||me.length==1||me.end<=C)if(z){const xe=z.length;ie.add({start:C,end:C+xe,length:xe,substr:z}),te.add("1")}else ie.add({start:C,end:C+1,length:1,substr:N}),te.add("2");else if(z){let xe=ie.clone(C,me);const Fe=z.length;xe.add({start:C,end:C+Fe,length:Fe,substr:z}),G.push(xe)}else te.add("3")}if(G.length>0){G=G.sort((ie,me)=>ie.length()-me.length());for(let ie of G)ene(ie,p)||p.push(ie);continue}if(C>0&&te.size==1&&!te.has("3")){f+=IX(p,!1);let ie=new w8;const me=p[0];me&&ie.add(me.last()),p=[ie]}}return f+=IX(p,!0),f},nne=(w,f)=>{if(w)return w[f]},one=(w,f)=>{if(w){for(var p,C=f.split(".");(p=C.shift())&&(w=w[p]););return w}},aK=(w,f,p)=>{var C,_;return!w||(w=w+"",f.regex==null)||(_=w.search(f.regex),_===-1)?0:(C=f.string.length/w.length,_===0&&(C+=.5),C*p)},iK=(w,f)=>{var p=w[f];if(typeof p=="function")return p;p&&!Array.isArray(p)&&(w[f]=[p])},J6=(w,f)=>{if(Array.isArray(w))w.forEach(f);else for(var p in w)w.hasOwnProperty(p)&&f(w[p],p)},sne=(w,f)=>typeof w=="number"&&typeof f=="number"?w>f?1:w<f?-1:0:(w=y8(w+"").toLowerCase(),f=y8(f+"").toLowerCase(),w>f?1:f>w?-1:0);class rne{constructor(f,p){Yo(this,"items");Yo(this,"settings");this.items=f,this.settings=p||{diacritics:!0}}tokenize(f,p,C){if(!f||!f.length)return[];const _=[],P=f.split(/\s+/);var N;return C&&(N=new RegExp("^("+Object.keys(C).map(BM).join("|")+"):(.*)$")),P.forEach(z=>{let G,te=null,ie=null;N&&(G=z.match(N))&&(te=G[1],z=G[2]),z.length>0&&(this.settings.diacritics?ie=tne(z)||null:ie=BM(z),ie&&p&&(ie="\\b"+ie)),_.push({string:z,regex:ie?new RegExp(ie,"iu"):null,field:te})}),_}getScoreFunction(f,p){var C=this.prepareSearch(f,p);return this._getScoreFunction(C)}_getScoreFunction(f){const p=f.tokens,C=p.length;if(!C)return function(){return 0};const _=f.options.fields,P=f.weights,N=_.length,z=f.getAttrFn;if(!N)return function(){return 1};const G=function(){return N===1?function(te,ie){const me=_[0].field;return aK(z(ie,me),te,P[me]||1)}:function(te,ie){var me=0;if(te.field){const xe=z(ie,te.field);!te.regex&&xe?me+=1/N:me+=aK(xe,te,1)}else J6(P,(xe,Fe)=>{me+=aK(z(ie,Fe),te,xe)});return me/N}}();return C===1?function(te){return G(p[0],te)}:f.options.conjunction==="and"?function(te){var ie,me=0;for(let xe of p){if(ie=G(xe,te),ie<=0)return 0;me+=ie}return me/C}:function(te){var ie=0;return J6(p,me=>{ie+=G(me,te)}),ie/C}}getSortFunction(f,p){var C=this.prepareSearch(f,p);return this._getSortFunction(C)}_getSortFunction(f){var p,C=[];const _=this,P=f.options,N=!f.query&&P.sort_empty?P.sort_empty:P.sort;if(typeof N=="function")return N.bind(this);const z=function(te,ie){return te==="$score"?ie.score:f.getAttrFn(_.items[ie.id],te)};if(N)for(let te of N)(f.query||te.field!=="$score")&&C.push(te);if(f.query){p=!0;for(let te of C)if(te.field==="$score"){p=!1;break}p&&C.unshift({field:"$score",direction:"desc"})}else C=C.filter(te=>te.field!=="$score");return C.length?function(te,ie){var me,xe;for(let Fe of C)if(xe=Fe.field,me=(Fe.direction==="desc"?-1:1)*sne(z(xe,te),z(xe,ie)),me)return me;return 0}:null}prepareSearch(f,p){const C={};var _=Object.assign({},p);if(iK(_,"sort"),iK(_,"sort_empty"),_.fields){iK(_,"fields");const P=[];_.fields.forEach(N=>{typeof N=="string"&&(N={field:N,weight:1}),P.push(N),C[N.field]="weight"in N?N.weight:1}),_.fields=P}return{options:_,query:f.toLowerCase().trim(),tokens:this.tokenize(f,_.respect_word_boundaries,C),total:0,items:[],weights:C,getAttrFn:_.nesting?one:nne}}search(f,p){var C=this,_,P;P=this.prepareSearch(f,p),p=P.options,f=P.query;const N=p.score||C._getScoreFunction(P);f.length?J6(C.items,(G,te)=>{_=N(G),(p.filter===!1||_>0)&&P.items.push({score:_,id:te})}):J6(C.items,(G,te)=>{P.items.push({score:1,id:te})});const z=C._getSortFunction(P);return z&&P.items.sort(z),P.total=P.items.length,typeof p.limit=="number"&&(P.items=P.items.slice(0,p.limit)),P}}const Rg=w=>typeof w>"u"||w===null?null:c8(w),c8=w=>typeof w=="boolean"?w?"1":"0":w+"",cK=w=>(w+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),ane=(w,f)=>f>0?window.setTimeout(w,f):(w.call(null),null),ine=(w,f)=>{var p;return function(C,_){var P=this;p&&(P.loading=Math.max(P.loading-1,0),clearTimeout(p)),p=setTimeout(function(){p=null,P.loadedSearches[C]=!0,w.call(P,C,_)},f)}},FX=(w,f,p)=>{var C,_=w.trigger,P={};w.trigger=function(){var N=arguments[0];if(f.indexOf(N)!==-1)P[N]=arguments;else return _.apply(w,arguments)},p.apply(w,[]),w.trigger=_;for(C of f)C in P&&_.apply(w,P[C])},cne=w=>({start:w.selectionStart||0,length:(w.selectionEnd||0)-(w.selectionStart||0)}),qa=(w,f=!1)=>{w&&(w.preventDefault(),f&&w.stopPropagation())},Su=(w,f,p,C)=>{w.addEventListener(f,p,C)},C2=(w,f)=>{if(!f||!f[w])return!1;var p=(f.altKey?1:0)+(f.ctrlKey?1:0)+(f.shiftKey?1:0)+(f.metaKey?1:0);return p===1},lK=(w,f)=>{const p=w.getAttribute("id");return p||(w.setAttribute("id",f),f)},LX=w=>w.replace(/[\\"']/g,"\\$&"),S2=(w,f)=>{f&&w.append(f)},ol=(w,f)=>{if(Array.isArray(w))w.forEach(f);else for(var p in w)w.hasOwnProperty(p)&&f(w[p],p)},Fp=w=>{if(w.jquery)return w[0];if(w instanceof HTMLElement)return w;if(IJ(w)){var f=document.createElement("template");return f.innerHTML=w.trim(),f.content.firstChild}return document.querySelector(w)},IJ=w=>typeof w=="string"&&w.indexOf("<")>-1,lne=w=>w.replace(/['"\\]/g,"\\$&"),uK=(w,f)=>{var p=document.createEvent("HTMLEvents");p.initEvent(f,!0,!1),w.dispatchEvent(p)},Q6=(w,f)=>{Object.assign(w.style,f)},gm=(w,...f)=>{var p=FJ(f);w=LJ(w),w.map(C=>{p.map(_=>{C.classList.add(_)})})},$y=(w,...f)=>{var p=FJ(f);w=LJ(w),w.map(C=>{p.map(_=>{C.classList.remove(_)})})},FJ=w=>{var f=[];return ol(w,p=>{typeof p=="string"&&(p=p.trim().split(/[\t\n\f\r\s]/)),Array.isArray(p)&&(f=f.concat(p))}),f.filter(Boolean)},LJ=w=>(Array.isArray(w)||(w=[w]),w),dK=(w,f,p)=>{if(!(p&&!p.contains(w)))for(;w&&w.matches;){if(w.matches(f))return w;w=w.parentNode}},HX=(w,f=0)=>f>0?w[w.length-1]:w[0],une=w=>Object.keys(w).length===0,zX=(w,f)=>{if(!w)return-1;f=f||w.nodeName;for(var p=0;w=w.previousElementSibling;)w.matches(f)&&p++;return p},pa=(w,f)=>{ol(f,(p,C)=>{p==null?w.removeAttribute(C):w.setAttribute(C,""+p)})},MK=(w,f)=>{w.parentNode&&w.parentNode.replaceChild(f,w)},dne=(w,f)=>{if(f===null)return;if(typeof f=="string"){if(!f.length)return;f=new RegExp(f,"i")}const p=P=>{var N=P.data.match(f);if(N&&P.data.length>0){var z=document.createElement("span");z.className="highlight";var G=P.splitText(N.index);G.splitText(N[0].length);var te=G.cloneNode(!0);return z.appendChild(te),MK(G,z),1}return 0},C=P=>{P.nodeType===1&&P.childNodes&&!/(script|style)/i.test(P.tagName)&&(P.className!=="highlight"||P.tagName!=="SPAN")&&Array.from(P.childNodes).forEach(N=>{_(N)})},_=P=>P.nodeType===3?p(P):(C(P),0);_(w)},mne=w=>{var f=w.querySelectorAll("span.highlight");Array.prototype.forEach.call(f,function(p){var C=p.parentNode;C.replaceChild(p.firstChild,p),C.normalize()})},fne=65,gne=13,hne=27,pne=37,bne=38,vne=39,yne=40,VX=8,wne=46,UX=9,Cne=typeof navigator>"u"?!1:/Mac/.test(navigator.userAgent),e8=Cne?"metaKey":"ctrlKey",WX={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,refreshThrottle:300,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(w){return w.length>0},render:{}};function ZX(w,f){var p=Object.assign({},WX,f),C=p.dataAttr,_=p.labelField,P=p.valueField,N=p.disabledField,z=p.optgroupField,G=p.optgroupLabelField,te=p.optgroupValueField,ie=w.tagName.toLowerCase(),me=w.getAttribute("placeholder")||w.getAttribute("data-placeholder");if(!me&&!p.allowEmptyOption){let je=w.querySelector('option[value=""]');je&&(me=je.textContent)}var xe={placeholder:me,options:[],optgroups:[],items:[],maxItems:null},Fe=()=>{var je,He=xe.options,Zt={},ze=1;let Q=0;var Ge=ae=>{var ut=Object.assign({},ae.dataset),bt=C&&ut[C];return typeof bt=="string"&&bt.length&&(ut=Object.assign(ut,JSON.parse(bt))),ut},gn=(ae,ut)=>{var bt=Rg(ae.value);if(bt!=null&&!(!bt&&!p.allowEmptyOption)){if(Zt.hasOwnProperty(bt)){if(ut){var It=Zt[bt][z];It?Array.isArray(It)?It.push(ut):Zt[bt][z]=[It,ut]:Zt[bt][z]=ut}}else{var Te=Ge(ae);Te[_]=Te[_]||ae.textContent,Te[P]=Te[P]||bt,Te[N]=Te[N]||ae.disabled,Te[z]=Te[z]||ut,Te.$option=ae,Te.$order=Te.$order||++Q,Zt[bt]=Te,He.push(Te)}ae.selected&&xe.items.push(bt)}},_t=ae=>{var ut,bt;bt=Ge(ae),bt[G]=bt[G]||ae.getAttribute("label")||"",bt[te]=bt[te]||ze++,bt[N]=bt[N]||ae.disabled,bt.$order=bt.$order||++Q,xe.optgroups.push(bt),ut=bt[te],ol(ae.children,It=>{gn(It,ut)})};xe.maxItems=w.hasAttribute("multiple")?null:1,ol(w.children,ae=>{je=ae.tagName.toLowerCase(),je==="optgroup"?_t(ae):je==="option"&&gn(ae)})},ve=()=>{const je=w.getAttribute(C);if(je)xe.options=JSON.parse(je),ol(xe.options,Zt=>{xe.items.push(Zt[P])});else{var He=w.value.trim()||"";if(!p.allowEmptyOption&&!He.length)return;const Zt=He.split(p.delimiter);ol(Zt,ze=>{const Q={};Q[_]=ze,Q[P]=ze,xe.options.push(Q)}),xe.items=Zt}};return ie==="select"?Fe():ve(),Object.assign({},WX,xe,f)}var jX=0;class Eu extends Lte(Fte){constructor(f,p){super(),this.order=0,this.isOpen=!1,this.isDisabled=!1,this.isReadOnly=!1,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreHover=!1,this.hasOptions=!1,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],this.refreshTimeout=null,jX++;var C,_=Fp(f);if(_.tomselect)throw new Error("Tom Select already initialized on this element");_.tomselect=this;var P=window.getComputedStyle&&window.getComputedStyle(_,null);C=P.getPropertyValue("direction");const N=ZX(_,p);this.settings=N,this.input=_,this.tabIndex=_.tabIndex||0,this.is_select_tag=_.tagName.toLowerCase()==="select",this.rtl=/rtl/i.test(C),this.inputId=lK(_,"tomselect-"+jX),this.isRequired=_.required,this.sifter=new rne(this.options,{diacritics:N.diacritics}),N.mode=N.mode||(N.maxItems===1?"single":"multi"),typeof N.hideSelected!="boolean"&&(N.hideSelected=N.mode==="multi"),typeof N.hidePlaceholder!="boolean"&&(N.hidePlaceholder=N.mode!=="multi");var z=N.createFilter;typeof z!="function"&&(typeof z=="string"&&(z=new RegExp(z)),z instanceof RegExp?N.createFilter=He=>z.test(He):N.createFilter=He=>this.settings.duplicates||!this.options[He]),this.initializePlugins(N.plugins),this.setupCallbacks(),this.setupTemplates();const G=Fp("<div>"),te=Fp("<div>"),ie=this._render("dropdown"),me=Fp('<div role="listbox" tabindex="-1">'),xe=this.input.getAttribute("class")||"",Fe=N.mode;var ve;if(gm(G,N.wrapperClass,xe,Fe),gm(te,N.controlClass),S2(G,te),gm(ie,N.dropdownClass,Fe),N.copyClassesToDropdown&&gm(ie,xe),gm(me,N.dropdownContentClass),S2(ie,me),Fp(N.dropdownParent||G).appendChild(ie),IJ(N.controlInput)){ve=Fp(N.controlInput);var je=["autocorrect","autocapitalize","autocomplete","spellcheck"];ol(je,He=>{_.getAttribute(He)&&pa(ve,{[He]:_.getAttribute(He)})}),ve.tabIndex=-1,te.appendChild(ve),this.focus_node=ve}else N.controlInput?(ve=Fp(N.controlInput),this.focus_node=ve):(ve=Fp("<input/>"),this.focus_node=te);this.wrapper=G,this.dropdown=ie,this.dropdown_content=me,this.control=te,this.control_input=ve,this.setup()}setup(){const f=this,p=f.settings,C=f.control_input,_=f.dropdown,P=f.dropdown_content,N=f.wrapper,z=f.control,G=f.input,te=f.focus_node,ie={passive:!0},me=f.inputId+"-ts-dropdown";pa(P,{id:me}),pa(te,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":me});const xe=lK(te,f.inputId+"-ts-control"),Fe="label[for='"+lne(f.inputId)+"']",ve=document.querySelector(Fe),je=f.focus.bind(f);if(ve){Su(ve,"click",je),pa(ve,{for:xe});const ze=lK(ve,f.inputId+"-ts-label");pa(te,{"aria-labelledby":ze}),pa(P,{"aria-labelledby":ze})}if(N.style.width=G.style.width,f.plugins.names.length){const ze="plugin-"+f.plugins.names.join(" plugin-");gm([N,_],ze)}(p.maxItems===null||p.maxItems>1)&&f.is_select_tag&&pa(G,{multiple:"multiple"}),p.placeholder&&pa(C,{placeholder:p.placeholder}),!p.splitOn&&p.delimiter&&(p.splitOn=new RegExp("\\s*"+BM(p.delimiter)+"+\\s*")),p.load&&p.loadThrottle&&(p.load=ine(p.load,p.loadThrottle)),Su(_,"mousemove",()=>{f.ignoreHover=!1}),Su(_,"mouseenter",ze=>{var Q=dK(ze.target,"[data-selectable]",_);Q&&f.onOptionHover(ze,Q)},{capture:!0}),Su(_,"click",ze=>{const Q=dK(ze.target,"[data-selectable]");Q&&(f.onOptionSelect(ze,Q),qa(ze,!0))}),Su(z,"click",ze=>{var Q=dK(ze.target,"[data-ts-item]",z);if(Q&&f.onItemSelect(ze,Q)){qa(ze,!0);return}C.value==""&&(f.onClick(),qa(ze,!0))}),Su(te,"keydown",ze=>f.onKeyDown(ze)),Su(C,"keypress",ze=>f.onKeyPress(ze)),Su(C,"input",ze=>f.onInput(ze)),Su(te,"blur",ze=>f.onBlur(ze)),Su(te,"focus",ze=>f.onFocus(ze)),Su(C,"paste",ze=>f.onPaste(ze));const He=ze=>{const Q=ze.composedPath()[0];if(!N.contains(Q)&&!_.contains(Q)){f.isFocused&&f.blur(),f.inputState();return}Q==C&&f.isOpen?ze.stopPropagation():qa(ze,!0)},Zt=()=>{f.isOpen&&f.positionDropdown()};Su(document,"mousedown",He),Su(window,"scroll",Zt,ie),Su(window,"resize",Zt,ie),this._destroy=()=>{document.removeEventListener("mousedown",He),window.removeEventListener("scroll",Zt),window.removeEventListener("resize",Zt),ve&&ve.removeEventListener("click",je)},this.revertSettings={innerHTML:G.innerHTML,tabIndex:G.tabIndex},G.tabIndex=-1,G.insertAdjacentElement("afterend",f.wrapper),f.sync(!1),p.items=[],delete p.optgroups,delete p.options,Su(G,"invalid",()=>{f.isValid&&(f.isValid=!1,f.isInvalid=!0,f.refreshState())}),f.updateOriginalInput(),f.refreshItems(),f.close(!1),f.inputState(),f.isSetup=!0,G.disabled?f.disable():G.readOnly?f.setReadOnly(!0):f.enable(),f.on("change",this.onChange),gm(G,"tomselected","ts-hidden-accessible"),f.trigger("initialize"),p.preload===!0&&f.preload()}setupOptions(f=[],p=[]){this.addOptions(f),ol(p,C=>{this.registerOptionGroup(C)})}setupTemplates(){var f=this,p=f.settings.labelField,C=f.settings.optgroupLabelField,_={optgroup:P=>{let N=document.createElement("div");return N.className="optgroup",N.appendChild(P.options),N},optgroup_header:(P,N)=>'<div class="optgroup-header">'+N(P[C])+"</div>",option:(P,N)=>"<div>"+N(P[p])+"</div>",item:(P,N)=>"<div>"+N(P[p])+"</div>",option_create:(P,N)=>'<div class="create">Add <strong>'+N(P.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};f.settings.render=Object.assign({},_,f.settings.render)}setupCallbacks(){var f,p,C={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(f in C)p=this.settings[C[f]],p&&this.on(f,p)}sync(f=!0){const p=this,C=f?ZX(p.input,{delimiter:p.settings.delimiter}):p.settings;p.setupOptions(C.options,C.optgroups),p.setValue(C.items||[],!0),p.lastQuery=null}onClick(){var f=this;if(f.activeItems.length>0){f.clearActiveItems(),f.focus();return}f.isFocused&&f.isOpen?f.blur():f.focus()}onMouseDown(){}onChange(){uK(this.input,"input"),uK(this.input,"change")}onPaste(f){var p=this;if(p.isInputHidden||p.isLocked){qa(f);return}p.settings.splitOn&&setTimeout(()=>{var C=p.inputValue();if(C.match(p.settings.splitOn)){var _=C.trim().split(p.settings.splitOn);ol(_,P=>{Rg(P)&&(this.options[P]?p.addItem(P):p.createItem(P))})}},0)}onKeyPress(f){var p=this;if(p.isLocked){qa(f);return}var C=String.fromCharCode(f.keyCode||f.which);if(p.settings.create&&p.settings.mode==="multi"&&C===p.settings.delimiter){p.createItem(),qa(f);return}}onKeyDown(f){var p=this;if(p.ignoreHover=!0,p.isLocked){f.keyCode!==UX&&qa(f);return}switch(f.keyCode){case fne:if(C2(e8,f)&&p.control_input.value==""){qa(f),p.selectAll();return}break;case hne:p.isOpen&&(qa(f,!0),p.close()),p.clearActiveItems();return;case yne:if(!p.isOpen&&p.hasOptions)p.open();else if(p.activeOption){let C=p.getAdjacent(p.activeOption,1);C&&p.setActiveOption(C)}qa(f);return;case bne:if(p.activeOption){let C=p.getAdjacent(p.activeOption,-1);C&&p.setActiveOption(C)}qa(f);return;case gne:p.canSelect(p.activeOption)?(p.onOptionSelect(f,p.activeOption),qa(f)):(p.settings.create&&p.createItem()||document.activeElement==p.control_input&&p.isOpen)&&qa(f);return;case pne:p.advanceSelection(-1,f);return;case vne:p.advanceSelection(1,f);return;case UX:p.settings.selectOnTab&&(p.canSelect(p.activeOption)&&(p.onOptionSelect(f,p.activeOption),qa(f)),p.settings.create&&p.createItem()&&qa(f));return;case VX:case wne:p.deleteSelection(f);return}p.isInputHidden&&!C2(e8,f)&&qa(f)}onInput(f){if(this.isLocked)return;const p=this.inputValue();if(this.lastValue!==p){if(this.lastValue=p,p==""){this._onInput();return}this.refreshTimeout&&window.clearTimeout(this.refreshTimeout),this.refreshTimeout=ane(()=>{this.refreshTimeout=null,this._onInput()},this.settings.refreshThrottle)}}_onInput(){const f=this.lastValue;this.settings.shouldLoad.call(this,f)&&this.load(f),this.refreshOptions(),this.trigger("type",f)}onOptionHover(f,p){this.ignoreHover||this.setActiveOption(p,!1)}onFocus(f){var p=this,C=p.isFocused;if(p.isDisabled||p.isReadOnly){p.blur(),qa(f);return}p.ignoreFocus||(p.isFocused=!0,p.settings.preload==="focus"&&p.preload(),C||p.trigger("focus"),p.activeItems.length||(p.inputState(),p.refreshOptions(!!p.settings.openOnFocus)),p.refreshState())}onBlur(f){if(document.hasFocus()!==!1){var p=this;if(p.isFocused){p.isFocused=!1,p.ignoreFocus=!1;var C=()=>{p.close(),p.setActiveItem(),p.setCaret(p.items.length),p.trigger("blur")};p.settings.create&&p.settings.createOnBlur?p.createItem(null,C):C()}}}onOptionSelect(f,p){var C,_=this;p.parentElement&&p.parentElement.matches("[data-disabled]")||(p.classList.contains("create")?_.createItem(null,()=>{_.settings.closeAfterSelect&&_.close()}):(C=p.dataset.value,typeof C<"u"&&(_.lastQuery=null,_.addItem(C),_.settings.closeAfterSelect&&_.close(),!_.settings.hideSelected&&f.type&&/click/.test(f.type)&&_.setActiveOption(p))))}canSelect(f){return!!(this.isOpen&&f&&this.dropdown_content.contains(f))}onItemSelect(f,p){var C=this;return!C.isLocked&&C.settings.mode==="multi"?(qa(f),C.setActiveItem(p,f),!0):!1}canLoad(f){return!(!this.settings.load||this.loadedSearches.hasOwnProperty(f))}load(f){const p=this;if(!p.canLoad(f))return;gm(p.wrapper,p.settings.loadingClass),p.loading++;const C=p.loadCallback.bind(p);p.settings.load.call(p,f,C)}loadCallback(f,p){const C=this;C.loading=Math.max(C.loading-1,0),C.lastQuery=null,C.clearActiveOption(),C.setupOptions(f,p),C.refreshOptions(C.isFocused&&!C.isInputHidden),C.loading||$y(C.wrapper,C.settings.loadingClass),C.trigger("load",f,p)}preload(){var f=this.wrapper.classList;f.contains("preloaded")||(f.add("preloaded"),this.load(""))}setTextboxValue(f=""){var p=this.control_input,C=p.value!==f;C&&(p.value=f,uK(p,"update"),this.lastValue=f)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(f,p){var C=p?[]:["change"];FX(this,C,()=>{this.clear(p),this.addItems(f,p)})}setMaxItems(f){f===0&&(f=null),this.settings.maxItems=f,this.refreshState()}setActiveItem(f,p){var C=this,_,P,N,z,G,te;if(C.settings.mode!=="single"){if(!f){C.clearActiveItems(),C.isFocused&&C.inputState();return}if(_=p&&p.type.toLowerCase(),_==="click"&&C2("shiftKey",p)&&C.activeItems.length){for(te=C.getLastActive(),N=Array.prototype.indexOf.call(C.control.children,te),z=Array.prototype.indexOf.call(C.control.children,f),N>z&&(G=N,N=z,z=G),P=N;P<=z;P++)f=C.control.children[P],C.activeItems.indexOf(f)===-1&&C.setActiveItemClass(f);qa(p)}else _==="click"&&C2(e8,p)||_==="keydown"&&C2("shiftKey",p)?f.classList.contains("active")?C.removeActiveItem(f):C.setActiveItemClass(f):(C.clearActiveItems(),C.setActiveItemClass(f));C.inputState(),C.isFocused||C.focus()}}setActiveItemClass(f){const p=this,C=p.control.querySelector(".last-active");C&&$y(C,"last-active"),gm(f,"active last-active"),p.trigger("item_select",f),p.activeItems.indexOf(f)==-1&&p.activeItems.push(f)}removeActiveItem(f){var p=this.activeItems.indexOf(f);this.activeItems.splice(p,1),$y(f,"active")}clearActiveItems(){$y(this.activeItems,"active"),this.activeItems=[]}setActiveOption(f,p=!0){f!==this.activeOption&&(this.clearActiveOption(),f&&(this.activeOption=f,pa(this.focus_node,{"aria-activedescendant":f.getAttribute("id")}),pa(f,{"aria-selected":"true"}),gm(f,"active"),p&&this.scrollToOption(f)))}scrollToOption(f,p){if(!f)return;const C=this.dropdown_content,_=C.clientHeight,P=C.scrollTop||0,N=f.offsetHeight,z=f.getBoundingClientRect().top-C.getBoundingClientRect().top+P;z+N>_+P?this.scroll(z-_+N,p):z<P&&this.scroll(z,p)}scroll(f,p){const C=this.dropdown_content;p&&(C.style.scrollBehavior=p),C.scrollTop=f,C.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&($y(this.activeOption,"active"),pa(this.activeOption,{"aria-selected":null})),this.activeOption=null,pa(this.focus_node,{"aria-activedescendant":null})}selectAll(){const f=this;if(f.settings.mode==="single")return;const p=f.controlChildren();p.length&&(f.inputState(),f.close(),f.activeItems=p,ol(p,C=>{f.setActiveItemClass(C)}))}inputState(){var f=this;f.control.contains(f.control_input)&&(pa(f.control_input,{placeholder:f.settings.placeholder}),f.activeItems.length>0||!f.isFocused&&f.settings.hidePlaceholder&&f.items.length>0?(f.setTextboxValue(),f.isInputHidden=!0):(f.settings.hidePlaceholder&&f.items.length>0&&pa(f.control_input,{placeholder:""}),f.isInputHidden=!1),f.wrapper.classList.toggle("input-hidden",f.isInputHidden))}inputValue(){return this.control_input.value.trim()}focus(){var f=this;f.isDisabled||f.isReadOnly||(f.ignoreFocus=!0,f.control_input.offsetWidth?f.control_input.focus():f.focus_node.focus(),setTimeout(()=>{f.ignoreFocus=!1,f.onFocus()},0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(f){return this.sifter.getScoreFunction(f,this.getSearchOptions())}getSearchOptions(){var f=this.settings,p=f.sortField;return typeof f.sortField=="string"&&(p=[{field:f.sortField}]),{fields:f.searchField,conjunction:f.searchConjunction,sort:p,nesting:f.nesting}}search(f){var p,C,_=this,P=this.getSearchOptions();if(_.settings.score&&(C=_.settings.score.call(_,f),typeof C!="function"))throw new Error('Tom Select "score" setting must be a function that returns a function');return f!==_.lastQuery?(_.lastQuery=f,p=_.sifter.search(f,Object.assign(P,{score:C})),_.currentResults=p):p=Object.assign({},_.currentResults),_.settings.hideSelected&&(p.items=p.items.filter(N=>{let z=Rg(N.id);return!(z&&_.items.indexOf(z)!==-1)})),p}refreshOptions(f=!0){var p,C,_,P,N,z,G,te,ie,me;const xe={},Fe=[];var ve=this,je=ve.inputValue();const He=je===ve.lastQuery||je==""&&ve.lastQuery==null;var Zt=ve.search(je),ze=null,Q=ve.settings.shouldOpen||!1,Ge=ve.dropdown_content;He&&(ze=ve.activeOption,ze&&(ie=ze.closest("[data-group]"))),P=Zt.items.length,typeof ve.settings.maxOptions=="number"&&(P=Math.min(P,ve.settings.maxOptions)),P>0&&(Q=!0);const gn=(ae,ut)=>{let bt=xe[ae];if(bt!==void 0){let Te=Fe[bt];if(Te!==void 0)return[bt,Te.fragment]}let It=document.createDocumentFragment();return bt=Fe.length,Fe.push({fragment:It,order:ut,optgroup:ae}),[bt,It]};for(p=0;p<P;p++){let ae=Zt.items[p];if(!ae)continue;let ut=ae.id,bt=ve.options[ut];if(bt===void 0)continue;let It=c8(ut),Te=ve.getOption(It,!0);for(ve.settings.hideSelected||Te.classList.toggle("selected",ve.items.includes(It)),N=bt[ve.settings.optgroupField]||"",z=Array.isArray(N)?N:[N],C=0,_=z&&z.length;C<_;C++){N=z[C];let ue=bt.$order,Fn=ve.optgroups[N];Fn===void 0?N="":ue=Fn.$order;const[An,Dt]=gn(N,ue);C>0&&(Te=Te.cloneNode(!0),pa(Te,{id:bt.$id+"-clone-"+C,"aria-selected":null}),Te.classList.add("ts-cloned"),$y(Te,"active"),ve.activeOption&&ve.activeOption.dataset.value==ut&&ie&&ie.dataset.group===N.toString()&&(ze=Te)),Dt.appendChild(Te),N!=""&&(xe[N]=An)}}ve.settings.lockOptgroupOrder&&Fe.sort((ae,ut)=>ae.order-ut.order),G=document.createDocumentFragment(),ol(Fe,ae=>{let ut=ae.fragment,bt=ae.optgroup;if(!ut||!ut.children.length)return;let It=ve.optgroups[bt];if(It!==void 0){let Te=document.createDocumentFragment(),ue=ve.render("optgroup_header",It);S2(Te,ue),S2(Te,ut);let Fn=ve.render("optgroup",{group:It,options:Te});S2(G,Fn)}else S2(G,ut)}),Ge.innerHTML="",S2(Ge,G),ve.settings.highlight&&(mne(Ge),Zt.query.length&&Zt.tokens.length&&ol(Zt.tokens,ae=>{dne(Ge,ae.regex)}));var _t=ae=>{let ut=ve.render(ae,{input:je});return ut&&(Q=!0,Ge.insertBefore(ut,Ge.firstChild)),ut};if(ve.loading?_t("loading"):ve.settings.shouldLoad.call(ve,je)?Zt.items.length===0&&_t("no_results"):_t("not_loading"),te=ve.canCreate(je),te&&(me=_t("option_create")),ve.hasOptions=Zt.items.length>0||te,Q){if(Zt.items.length>0){if(!ze&&ve.settings.mode==="single"&&ve.items[0]!=null&&(ze=ve.getOption(ve.items[0])),!Ge.contains(ze)){let ae=0;me&&!ve.settings.addPrecedence&&(ae=1),ze=ve.selectable()[ae]}}else me&&(ze=me);f&&!ve.isOpen&&(ve.open(),ve.scrollToOption(ze,"auto")),ve.setActiveOption(ze)}else ve.clearActiveOption(),f&&ve.isOpen&&ve.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(f,p=!1){const C=this;if(Array.isArray(f))return C.addOptions(f,p),!1;const _=Rg(f[C.settings.valueField]);return _===null||C.options.hasOwnProperty(_)?!1:(f.$order=f.$order||++C.order,f.$id=C.inputId+"-opt-"+f.$order,C.options[_]=f,C.lastQuery=null,p&&(C.userOptions[_]=p,C.trigger("option_add",_,f)),_)}addOptions(f,p=!1){ol(f,C=>{this.addOption(C,p)})}registerOption(f){return this.addOption(f)}registerOptionGroup(f){var p=Rg(f[this.settings.optgroupValueField]);return p===null?!1:(f.$order=f.$order||++this.order,this.optgroups[p]=f,p)}addOptionGroup(f,p){var C;p[this.settings.optgroupValueField]=f,(C=this.registerOptionGroup(p))&&this.trigger("optgroup_add",C,p)}removeOptionGroup(f){this.optgroups.hasOwnProperty(f)&&(delete this.optgroups[f],this.clearCache(),this.trigger("optgroup_remove",f))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(f,p){const C=this;var _,P;const N=Rg(f),z=Rg(p[C.settings.valueField]);if(N===null)return;const G=C.options[N];if(G==null)return;if(typeof z!="string")throw new Error("Value must be set in option data");const te=C.getOption(N),ie=C.getItem(N);if(p.$order=p.$order||G.$order,delete C.options[N],C.uncacheValue(z),C.options[z]=p,te){if(C.dropdown_content.contains(te)){const me=C._render("option",p);MK(te,me),C.activeOption===te&&C.setActiveOption(me)}te.remove()}ie&&(P=C.items.indexOf(N),P!==-1&&C.items.splice(P,1,z),_=C._render("item",p),ie.classList.contains("active")&&gm(_,"active"),MK(ie,_)),C.lastQuery=null}removeOption(f,p){const C=this;f=c8(f),C.uncacheValue(f),delete C.userOptions[f],delete C.options[f],C.lastQuery=null,C.trigger("option_remove",f),C.removeItem(f,p)}clearOptions(f){const p=(f||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();const C={};ol(this.options,(_,P)=>{p(_,P)&&(C[P]=_)}),this.options=this.sifter.items=C,this.lastQuery=null,this.trigger("option_clear")}clearFilter(f,p){return this.items.indexOf(p)>=0}getOption(f,p=!1){const C=Rg(f);if(C===null)return null;const _=this.options[C];if(_!=null){if(_.$div)return _.$div;if(p)return this._render("option",_)}return null}getAdjacent(f,p,C="option"){var _=this,P;if(!f)return null;C=="item"?P=_.controlChildren():P=_.dropdown_content.querySelectorAll("[data-selectable]");for(let N=0;N<P.length;N++)if(P[N]==f)return p>0?P[N+1]:P[N-1];return null}getItem(f){if(typeof f=="object")return f;var p=Rg(f);return p!==null?this.control.querySelector(`[data-value="${LX(p)}"]`):null}addItems(f,p){var C=this,_=Array.isArray(f)?f:[f];_=_.filter(N=>C.items.indexOf(N)===-1);const P=_[_.length-1];_.forEach(N=>{C.isPending=N!==P,C.addItem(N,p)})}addItem(f,p){var C=p?[]:["change","dropdown_close"];FX(this,C,()=>{var _,P;const N=this,z=N.settings.mode,G=Rg(f);if(!(G&&N.items.indexOf(G)!==-1&&(z==="single"&&N.close(),z==="single"||!N.settings.duplicates))&&!(G===null||!N.options.hasOwnProperty(G))&&(z==="single"&&N.clear(p),!(z==="multi"&&N.isFull()))){if(_=N._render("item",N.options[G]),N.control.contains(_)&&(_=_.cloneNode(!0)),P=N.isFull(),N.items.splice(N.caretPos,0,G),N.insertAtCaret(_),N.isSetup){if(!N.isPending&&N.settings.hideSelected){let te=N.getOption(G),ie=N.getAdjacent(te,1);ie&&N.setActiveOption(ie)}!N.isPending&&!N.settings.closeAfterSelect&&N.refreshOptions(N.isFocused&&z!=="single"),N.settings.closeAfterSelect!=!1&&N.isFull()?N.close():N.isPending||N.positionDropdown(),N.trigger("item_add",G,_),N.isPending||N.updateOriginalInput({silent:p})}(!N.isPending||!P&&N.isFull())&&(N.inputState(),N.refreshState())}})}removeItem(f=null,p){const C=this;if(f=C.getItem(f),!f)return;var _,P;const N=f.dataset.value;_=zX(f),f.remove(),f.classList.contains("active")&&(P=C.activeItems.indexOf(f),C.activeItems.splice(P,1),$y(f,"active")),C.items.splice(_,1),C.lastQuery=null,!C.settings.persist&&C.userOptions.hasOwnProperty(N)&&C.removeOption(N,p),_<C.caretPos&&C.setCaret(C.caretPos-1),C.updateOriginalInput({silent:p}),C.refreshState(),C.positionDropdown(),C.trigger("item_remove",N,f)}createItem(f=null,p=()=>{}){arguments.length===3&&(p=arguments[2]),typeof p!="function"&&(p=()=>{});var C=this,_=C.caretPos,P;if(f=f||C.inputValue(),!C.canCreate(f))return p(),!1;C.lock();var N=!1,z=G=>{if(C.unlock(),!G||typeof G!="object")return p();var te=Rg(G[C.settings.valueField]);if(typeof te!="string")return p();C.setTextboxValue(),C.addOption(G,!0),C.setCaret(_),C.addItem(te),p(G),N=!0};return typeof C.settings.create=="function"?P=C.settings.create.call(this,f,z):P={[C.settings.labelField]:f,[C.settings.valueField]:f},N||z(P),!0}refreshItems(){var f=this;f.lastQuery=null,f.isSetup&&f.addItems(f.items),f.updateOriginalInput(),f.refreshState()}refreshState(){const f=this;f.refreshValidityState();const p=f.isFull(),C=f.isLocked;f.wrapper.classList.toggle("rtl",f.rtl);const _=f.wrapper.classList;_.toggle("focus",f.isFocused),_.toggle("disabled",f.isDisabled),_.toggle("readonly",f.isReadOnly),_.toggle("required",f.isRequired),_.toggle("invalid",!f.isValid),_.toggle("locked",C),_.toggle("full",p),_.toggle("input-active",f.isFocused&&!f.isInputHidden),_.toggle("dropdown-active",f.isOpen),_.toggle("has-options",une(f.options)),_.toggle("has-items",f.items.length>0)}refreshValidityState(){var f=this;f.input.validity&&(f.isValid=f.input.validity.valid,f.isInvalid=!f.isValid)}isFull(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems}updateOriginalInput(f={}){const p=this;var C,_;const P=p.input.querySelector('option[value=""]');if(p.is_select_tag){let G=function(te,ie,me){return te||(te=Fp('<option value="'+cK(ie)+'">'+cK(me)+"</option>")),te!=P&&p.input.append(te),N.push(te),(te!=P||z>0)&&(te.selected=!0),te};const N=[],z=p.input.querySelectorAll("option:checked").length;p.input.querySelectorAll("option:checked").forEach(te=>{te.selected=!1}),p.items.length==0&&p.settings.mode=="single"?G(P,"",""):p.items.forEach(te=>{if(C=p.options[te],_=C[p.settings.labelField]||"",N.includes(C.$option)){const ie=p.input.querySelector(`option[value="${LX(te)}"]:not(:checked)`);G(ie,te,_)}else C.$option=G(C.$option,te,_)})}else p.input.value=p.getValue();p.isSetup&&(f.silent||p.trigger("change",p.getValue()))}open(){var f=this;f.isLocked||f.isOpen||f.settings.mode==="multi"&&f.isFull()||(f.isOpen=!0,pa(f.focus_node,{"aria-expanded":"true"}),f.refreshState(),Q6(f.dropdown,{visibility:"hidden",display:"block"}),f.positionDropdown(),Q6(f.dropdown,{visibility:"visible",display:"block"}),f.focus(),f.trigger("dropdown_open",f.dropdown))}close(f=!0){var p=this,C=p.isOpen;f&&(p.setTextboxValue(),p.settings.mode==="single"&&p.items.length&&p.inputState()),p.isOpen=!1,pa(p.focus_node,{"aria-expanded":"false"}),Q6(p.dropdown,{display:"none"}),p.settings.hideSelected&&p.clearActiveOption(),p.refreshState(),C&&p.trigger("dropdown_close",p.dropdown)}positionDropdown(){if(this.settings.dropdownParent==="body"){var f=this.control,p=f.getBoundingClientRect(),C=f.offsetHeight+p.top+window.scrollY,_=p.left+window.scrollX;Q6(this.dropdown,{width:p.width+"px",top:C+"px",left:_+"px"})}}clear(f){var p=this;if(p.items.length){var C=p.controlChildren();ol(C,_=>{p.removeItem(_,!0)}),p.inputState(),f||p.updateOriginalInput(),p.trigger("clear")}}insertAtCaret(f){const p=this,C=p.caretPos,_=p.control;_.insertBefore(f,_.children[C]||null),p.setCaret(C+1)}deleteSelection(f){var p,C,_,P,N=this;p=f&&f.keyCode===VX?-1:1,C=cne(N.control_input);const z=[];if(N.activeItems.length)P=HX(N.activeItems,p),_=zX(P),p>0&&_++,ol(N.activeItems,G=>z.push(G));else if((N.isFocused||N.settings.mode==="single")&&N.items.length){const G=N.controlChildren();let te;p<0&&C.start===0&&C.length===0?te=G[N.caretPos-1]:p>0&&C.start===N.inputValue().length&&(te=G[N.caretPos]),te!==void 0&&z.push(te)}if(!N.shouldDelete(z,f))return!1;for(qa(f,!0),typeof _<"u"&&N.setCaret(_);z.length;)N.removeItem(z.pop());return N.inputState(),N.positionDropdown(),N.refreshOptions(!1),!0}shouldDelete(f,p){const C=f.map(_=>_.dataset.value);return!(!C.length||typeof this.settings.onDelete=="function"&&this.settings.onDelete(C,p)===!1)}advanceSelection(f,p){var C,_,P=this;P.rtl&&(f*=-1),!P.inputValue().length&&(C2(e8,p)||C2("shiftKey",p)?(C=P.getLastActive(f),C?C.classList.contains("active")?_=P.getAdjacent(C,f,"item"):_=C:f>0?_=P.control_input.nextElementSibling:_=P.control_input.previousElementSibling,_&&(_.classList.contains("active")&&P.removeActiveItem(C),P.setActiveItemClass(_))):P.moveCaret(f))}moveCaret(f){}getLastActive(f){let p=this.control.querySelector(".last-active");if(p)return p;var C=this.control.querySelectorAll(".active");if(C)return HX(C,f)}setCaret(f){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.setLocked(!0)}unlock(){this.setLocked(!1)}setLocked(f=this.isReadOnly||this.isDisabled){this.isLocked=f,this.refreshState()}disable(){this.setDisabled(!0),this.close()}enable(){this.setDisabled(!1)}setDisabled(f){this.focus_node.tabIndex=f?-1:this.tabIndex,this.isDisabled=f,this.input.disabled=f,this.control_input.disabled=f,this.setLocked()}setReadOnly(f){this.isReadOnly=f,this.input.readOnly=f,this.control_input.readOnly=f,this.setLocked()}destroy(){var f=this,p=f.revertSettings;f.trigger("destroy"),f.off(),f.wrapper.remove(),f.dropdown.remove(),f.input.innerHTML=p.innerHTML,f.input.tabIndex=p.tabIndex,$y(f.input,"tomselected","ts-hidden-accessible"),f._destroy(),delete f.input.tomselect}render(f,p){var C,_;const P=this;if(typeof this.settings.render[f]!="function"||(_=P.settings.render[f].call(this,p,cK),!_))return null;if(_=Fp(_),f==="option"||f==="option_create"?p[P.settings.disabledField]?pa(_,{"aria-disabled":"true"}):pa(_,{"data-selectable":""}):f==="optgroup"&&(C=p.group[P.settings.optgroupValueField],pa(_,{"data-group":C}),p.group[P.settings.disabledField]&&pa(_,{"data-disabled":""})),f==="option"||f==="item"){const N=c8(p[P.settings.valueField]);pa(_,{"data-value":N}),f==="item"?(gm(_,P.settings.itemClass),pa(_,{"data-ts-item":""})):(gm(_,P.settings.optionClass),pa(_,{role:"option",id:p.$id}),p.$div=_,P.options[N]=p)}return _}_render(f,p){const C=this.render(f,p);if(C==null)throw"HTMLElement expected";return C}clearCache(){ol(this.options,f=>{f.$div&&(f.$div.remove(),delete f.$div)})}uncacheValue(f){const p=this.getOption(f);p&&p.remove()}canCreate(f){return this.settings.create&&f.length>0&&this.settings.createFilter.call(this,f)}hook(f,p,C){var _=this,P=_[p];_[p]=function(){var N,z;return f==="after"&&(N=P.apply(_,arguments)),z=C.apply(_,arguments),f==="instead"?z:(f==="before"&&(N=P.apply(_,arguments)),N)}}}const Sne=(w,f,p,C)=>{w.addEventListener(f,p,C)};function xne(){Sne(this.input,"change",()=>{this.sync()})}const Ene=w=>typeof w>"u"||w===null?null:Tne(w),Tne=w=>typeof w=="boolean"?w?"1":"0":w+"",GX=(w,f=!1)=>{w&&(w.preventDefault(),f&&w.stopPropagation())},_ne=w=>{if(w.jquery)return w[0];if(w instanceof HTMLElement)return w;if(kne(w)){var f=document.createElement("template");return f.innerHTML=w.trim(),f.content.firstChild}return document.querySelector(w)},kne=w=>typeof w=="string"&&w.indexOf("<")>-1;function One(w){var f=this,p=f.onOptionSelect;f.settings.hideSelected=!1;const C=Object.assign({className:"tomselect-checkbox",checkedClassNames:void 0,uncheckedClassNames:void 0},w);var _=function(z,G){G?(z.checked=!0,C.uncheckedClassNames&&z.classList.remove(...C.uncheckedClassNames),C.checkedClassNames&&z.classList.add(...C.checkedClassNames)):(z.checked=!1,C.checkedClassNames&&z.classList.remove(...C.checkedClassNames),C.uncheckedClassNames&&z.classList.add(...C.uncheckedClassNames))},P=function(z){setTimeout(()=>{var G=z.querySelector("input."+C.className);G instanceof HTMLInputElement&&_(G,z.classList.contains("selected"))},1)};f.hook("after","setupTemplates",()=>{var N=f.settings.render.option;f.settings.render.option=(z,G)=>{var te=_ne(N.call(f,z,G)),ie=document.createElement("input");C.className&&ie.classList.add(C.className),ie.addEventListener("click",function(xe){GX(xe)}),ie.type="checkbox";const me=Ene(z[f.settings.valueField]);return _(ie,!!(me&&f.items.indexOf(me)>-1)),te.prepend(ie),te}}),f.on("item_remove",N=>{var z=f.getOption(N);z&&(z.classList.remove("selected"),P(z))}),f.on("item_add",N=>{var z=f.getOption(N);z&&P(z)}),f.hook("instead","onOptionSelect",(N,z)=>{if(z.classList.contains("selected")){z.classList.remove("selected"),f.removeItem(z.dataset.value),f.refreshOptions(),GX(N,!0);return}p.call(f,N,z),P(z)})}const Ane=w=>{if(w.jquery)return w[0];if(w instanceof HTMLElement)return w;if(Dne(w)){var f=document.createElement("template");return f.innerHTML=w.trim(),f.content.firstChild}return document.querySelector(w)},Dne=w=>typeof w=="string"&&w.indexOf("<")>-1;function Rne(w){const f=this,p=Object.assign({className:"clear-button",title:"Clear All",html:C=>`<div class="${C.className}" title="${C.title}">&#10799;</div>`},w);f.on("initialize",()=>{var C=Ane(p.html(p));C.addEventListener("click",_=>{f.isLocked||(f.clear(),f.settings.mode==="single"&&f.settings.allowEmptyOption&&f.addItem(""),_.preventDefault(),_.stopPropagation())}),f.control.appendChild(C)})}const Mne=(w,f=!1)=>{w&&(w.preventDefault(),f&&w.stopPropagation())},Ok=(w,f,p,C)=>{w.addEventListener(f,p,C)},Pne=(w,f)=>{if(Array.isArray(w))w.forEach(f);else for(var p in w)w.hasOwnProperty(p)&&f(w[p],p)},Nne=w=>{if(w.jquery)return w[0];if(w instanceof HTMLElement)return w;if(Bne(w)){var f=document.createElement("template");return f.innerHTML=w.trim(),f.content.firstChild}return document.querySelector(w)},Bne=w=>typeof w=="string"&&w.indexOf("<")>-1,$ne=(w,f)=>{Pne(f,(p,C)=>{p==null?w.removeAttribute(C):w.setAttribute(C,""+p)})},Ine=(w,f)=>{var p;(p=w.parentNode)==null||p.insertBefore(f,w.nextSibling)},Fne=(w,f)=>{var p;(p=w.parentNode)==null||p.insertBefore(f,w)},Lne=(w,f)=>{do{var p;if(f=(p=f)==null?void 0:p.previousElementSibling,w==f)return!0}while(f&&f.previousElementSibling);return!1};function Hne(){var w=this;if(w.settings.mode!=="multi")return;var f=w.lock,p=w.unlock;let C=!0,_;w.hook("after","setupTemplates",()=>{var P=w.settings.render.item;w.settings.render.item=(N,z)=>{const G=Nne(P.call(w,N,z));$ne(G,{draggable:"true"});const te=je=>{C||Mne(je),je.stopPropagation()},ie=je=>{_=G,setTimeout(()=>{G.classList.add("ts-dragging")},0)},me=je=>{je.preventDefault(),G.classList.add("ts-drag-over"),Fe(G,_)},xe=()=>{G.classList.remove("ts-drag-over")},Fe=(je,He)=>{He!==void 0&&(Lne(He,G)?Ine(je,He):Fne(je,He))},ve=()=>{var je;document.querySelectorAll(".ts-drag-over").forEach(Zt=>Zt.classList.remove("ts-drag-over")),(je=_)==null||je.classList.remove("ts-dragging"),_=void 0;var He=[];w.control.querySelectorAll("[data-value]").forEach(Zt=>{if(Zt.dataset.value){let ze=Zt.dataset.value;ze&&He.push(ze)}}),w.setValue(He)};return Ok(G,"mousedown",te),Ok(G,"dragstart",ie),Ok(G,"dragenter",me),Ok(G,"dragover",me),Ok(G,"dragleave",xe),Ok(G,"dragend",ve),G}}),w.hook("instead","lock",()=>(C=!1,f.call(w))),w.hook("instead","unlock",()=>(C=!0,p.call(w)))}const zne=(w,f=!1)=>{w&&(w.preventDefault(),f&&w.stopPropagation())},Vne=w=>{if(w.jquery)return w[0];if(w instanceof HTMLElement)return w;if(Une(w)){var f=document.createElement("template");return f.innerHTML=w.trim(),f.content.firstChild}return document.querySelector(w)},Une=w=>typeof w=="string"&&w.indexOf("<")>-1;function Wne(w){const f=this,p=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:C=>'<div class="'+C.headerClass+'"><div class="'+C.titleRowClass+'"><span class="'+C.labelClass+'">'+C.title+'</span><a class="'+C.closeClass+'">&times;</a></div></div>'},w);f.on("initialize",()=>{var C=Vne(p.html(p)),_=C.querySelector("."+p.closeClass);_&&_.addEventListener("click",P=>{zne(P,!0),f.close()}),f.dropdown.insertBefore(C,f.dropdown.firstChild)})}const Zne=(w,f)=>{if(Array.isArray(w))w.forEach(f);else for(var p in w)w.hasOwnProperty(p)&&f(w[p],p)},jne=(w,...f)=>{var p=Gne(f);w=qne(w),w.map(C=>{p.map(_=>{C.classList.remove(_)})})},Gne=w=>{var f=[];return Zne(w,p=>{typeof p=="string"&&(p=p.trim().split(/[\t\n\f\r\s]/)),Array.isArray(p)&&(f=f.concat(p))}),f.filter(Boolean)},qne=w=>(Array.isArray(w)||(w=[w]),w),Kne=(w,f)=>{if(!w)return-1;f=f||w.nodeName;for(var p=0;w=w.previousElementSibling;)w.matches(f)&&p++;return p};function Yne(){var w=this;w.hook("instead","setCaret",f=>{w.settings.mode==="single"||!w.control.contains(w.control_input)?f=w.items.length:(f=Math.max(0,Math.min(w.items.length,f)),f!=w.caretPos&&!w.isPending&&w.controlChildren().forEach((p,C)=>{C<f?w.control_input.insertAdjacentElement("beforebegin",p):w.control.appendChild(p)})),w.caretPos=f}),w.hook("instead","moveCaret",f=>{if(!w.isFocused)return;const p=w.getLastActive(f);if(p){const C=Kne(p);w.setCaret(f>0?C+1:C),w.setActiveItem(),jne(p,"last-active")}else w.setCaret(w.caretPos+f)})}const Xne=27,Jne=9,Qne=(w,f=!1)=>{w&&(w.preventDefault(),f&&w.stopPropagation())},eoe=(w,f,p,C)=>{w.addEventListener(f,p,C)},toe=(w,f)=>{if(Array.isArray(w))w.forEach(f);else for(var p in w)w.hasOwnProperty(p)&&f(w[p],p)},qX=w=>{if(w.jquery)return w[0];if(w instanceof HTMLElement)return w;if(noe(w)){var f=document.createElement("template");return f.innerHTML=w.trim(),f.content.firstChild}return document.querySelector(w)},noe=w=>typeof w=="string"&&w.indexOf("<")>-1,ooe=(w,...f)=>{var p=soe(f);w=roe(w),w.map(C=>{p.map(_=>{C.classList.add(_)})})},soe=w=>{var f=[];return toe(w,p=>{typeof p=="string"&&(p=p.trim().split(/[\t\n\f\r\s]/)),Array.isArray(p)&&(f=f.concat(p))}),f.filter(Boolean)},roe=w=>(Array.isArray(w)||(w=[w]),w);function aoe(){const w=this;w.settings.shouldOpen=!0,w.hook("before","setup",()=>{w.focus_node=w.control,ooe(w.control_input,"dropdown-input");const f=qX('<div class="dropdown-input-wrap">');f.append(w.control_input),w.dropdown.insertBefore(f,w.dropdown.firstChild);const p=qX('<input class="items-placeholder" tabindex="-1" />');p.placeholder=w.settings.placeholder||"",w.control.append(p)}),w.on("initialize",()=>{w.control_input.addEventListener("keydown",p=>{switch(p.keyCode){case Xne:w.isOpen&&(Qne(p,!0),w.close()),w.clearActiveItems();return;case Jne:w.focus_node.tabIndex=-1;break}return w.onKeyDown.call(w,p)}),w.on("blur",()=>{w.focus_node.tabIndex=w.isDisabled?-1:w.tabIndex}),w.on("dropdown_open",()=>{w.control_input.focus()});const f=w.onBlur;w.hook("instead","onBlur",p=>{if(!(p&&p.relatedTarget==w.control_input))return f.call(w)}),eoe(w.control_input,"blur",()=>w.onBlur()),w.hook("before","close",()=>{w.isOpen&&w.focus_node.focus({preventScroll:!0})})})}const t8=(w,f,p,C)=>{w.addEventListener(f,p,C)};function ioe(){var w=this;w.on("initialize",()=>{var f=document.createElement("span"),p=w.control_input;f.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",w.wrapper.appendChild(f);var C=["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"];for(const P of C)f.style[P]=p.style[P];var _=()=>{f.textContent=p.value,p.style.width=f.clientWidth+"px"};_(),w.on("update item_add item_remove",_),t8(p,"input",_),t8(p,"keyup",_),t8(p,"blur",_),t8(p,"update",_)})}function coe(){var w=this,f=w.deleteSelection;this.hook("instead","deleteSelection",p=>w.activeItems.length?f.call(w,p):!1)}function loe(){this.hook("instead","setActiveItem",()=>{}),this.hook("instead","selectAll",()=>{})}const KX=37,uoe=39,doe=(w,f,p)=>{for(;w&&w.matches;){if(w.matches(f))return w;w=w.parentNode}},moe=(w,f)=>{if(!w)return-1;f=f||w.nodeName;for(var p=0;w=w.previousElementSibling;)w.matches(f)&&p++;return p};function foe(){var w=this,f=w.onKeyDown;w.hook("instead","onKeyDown",p=>{var C,_,P,N;if(!w.isOpen||!(p.keyCode===KX||p.keyCode===uoe))return f.call(w,p);w.ignoreHover=!0,N=doe(w.activeOption,"[data-group]"),C=moe(w.activeOption,"[data-selectable]"),N&&(p.keyCode===KX?N=N.previousSibling:N=N.nextSibling,N&&(P=N.querySelectorAll("[data-selectable]"),_=P[Math.min(P.length-1,C)],_&&w.setActiveOption(_)))})}const goe=w=>(w+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),YX=(w,f=!1)=>{w&&(w.preventDefault(),f&&w.stopPropagation())},XX=(w,f,p,C)=>{w.addEventListener(f,p,C)},JX=w=>{if(w.jquery)return w[0];if(w instanceof HTMLElement)return w;if(hoe(w)){var f=document.createElement("template");return f.innerHTML=w.trim(),f.content.firstChild}return document.querySelector(w)},hoe=w=>typeof w=="string"&&w.indexOf("<")>-1;function poe(w){const f=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},w);var p=this;if(f.append){var C='<a href="javascript:void(0)" class="'+f.className+'" tabindex="-1" title="'+goe(f.title)+'">'+f.label+"</a>";p.hook("after","setupTemplates",()=>{var _=p.settings.render.item;p.settings.render.item=(P,N)=>{var z=JX(_.call(p,P,N)),G=JX(C);return z.appendChild(G),XX(G,"mousedown",te=>{YX(te,!0)}),XX(G,"click",te=>{p.isLocked||(YX(te,!0),!p.isLocked&&p.shouldDelete([z],te)&&(p.removeItem(z),p.refreshOptions(!1),p.inputState()))}),z}})}}function boe(w){const f=this,p=Object.assign({text:C=>C[f.settings.labelField]},w);f.on("item_remove",function(C){if(f.isFocused&&f.control_input.value.trim()===""){var _=f.options[C];_&&f.setTextboxValue(p.text.call(f,_))}})}const voe=(w,f)=>{if(Array.isArray(w))w.forEach(f);else for(var p in w)w.hasOwnProperty(p)&&f(w[p],p)},yoe=(w,...f)=>{var p=woe(f);w=Coe(w),w.map(C=>{p.map(_=>{C.classList.add(_)})})},woe=w=>{var f=[];return voe(w,p=>{typeof p=="string"&&(p=p.trim().split(/[\t\n\f\r\s]/)),Array.isArray(p)&&(f=f.concat(p))}),f.filter(Boolean)},Coe=w=>(Array.isArray(w)||(w=[w]),w);function Soe(){const w=this,f=w.canLoad,p=w.clearActiveOption,C=w.loadCallback;var _={},P,N=!1,z,G=[];if(w.settings.shouldLoadMore||(w.settings.shouldLoadMore=()=>{if(P.clientHeight/(P.scrollHeight-P.scrollTop)>.9)return!0;if(w.activeOption){var xe=w.selectable(),Fe=Array.from(xe).indexOf(w.activeOption);if(Fe>=xe.length-2)return!0}return!1}),!w.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";w.settings.sortField=[{field:"$order"},{field:"$score"}];const te=me=>typeof w.settings.maxOptions=="number"&&P.children.length>=w.settings.maxOptions?!1:!!(me in _&&_[me]),ie=(me,xe)=>w.items.indexOf(xe)>=0||G.indexOf(xe)>=0;w.setNextUrl=(me,xe)=>{_[me]=xe},w.getUrl=me=>{if(me in _){const xe=_[me];return _[me]=!1,xe}return w.clearPagination(),w.settings.firstUrl.call(w,me)},w.clearPagination=()=>{_={}},w.hook("instead","clearActiveOption",()=>{if(!N)return p.call(w)}),w.hook("instead","canLoad",me=>me in _?te(me):f.call(w,me)),w.hook("instead","loadCallback",(me,xe)=>{if(!N)w.clearOptions(ie);else if(z){const Fe=me[0];Fe!==void 0&&(z.dataset.value=Fe[w.settings.valueField])}C.call(w,me,xe),N=!1}),w.hook("after","refreshOptions",()=>{const me=w.lastValue;var xe;te(me)?(xe=w.render("loading_more",{query:me}),xe&&(xe.setAttribute("data-selectable",""),z=xe)):me in _&&!P.querySelector(".no-results")&&(xe=w.render("no_more_results",{query:me})),xe&&(yoe(xe,w.settings.optionClass),P.append(xe))}),w.on("initialize",()=>{G=Object.keys(w.options),P=w.dropdown_content,w.settings.render=Object.assign({},{loading_more:()=>'<div class="loading-more-results">Loading more results ... </div>',no_more_results:()=>'<div class="no-more-results">No more results</div>'},w.settings.render),P.addEventListener("scroll",()=>{w.settings.shouldLoadMore.call(w)&&te(w.lastValue)&&(N||(N=!0,w.load.call(w,w.lastValue)))})})}Eu.define("change_listener",xne);Eu.define("checkbox_options",One);Eu.define("clear_button",Rne);Eu.define("drag_drop",Hne);Eu.define("dropdown_header",Wne);Eu.define("caret_position",Yne);Eu.define("dropdown_input",aoe);Eu.define("input_autogrow",ioe);Eu.define("no_backspace_delete",coe);Eu.define("no_active_items",loe);Eu.define("optgroup_columns",foe);Eu.define("remove_button",poe);Eu.define("restore_on_backspace",boe);Eu.define("virtual_scroll",Soe);/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function QX(w,f){var p=Object.keys(w);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(w);f&&(C=C.filter(function(_){return Object.getOwnPropertyDescriptor(w,_).enumerable})),p.push.apply(p,C)}return p}function Up(w){for(var f=1;f<arguments.length;f++){var p=arguments[f]!=null?arguments[f]:{};f%2?QX(Object(p),!0).forEach(function(C){xoe(w,C,p[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(p)):QX(Object(p)).forEach(function(C){Object.defineProperty(w,C,Object.getOwnPropertyDescriptor(p,C))})}return w}function l8(w){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?l8=function(f){return typeof f}:l8=function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},l8(w)}function xoe(w,f,p){return f in w?Object.defineProperty(w,f,{value:p,enumerable:!0,configurable:!0,writable:!0}):w[f]=p,w}function Jb(){return Jb=Object.assign||function(w){for(var f=1;f<arguments.length;f++){var p=arguments[f];for(var C in p)Object.prototype.hasOwnProperty.call(p,C)&&(w[C]=p[C])}return w},Jb.apply(this,arguments)}function Eoe(w,f){if(w==null)return{};var p={},C=Object.keys(w),_,P;for(P=0;P<C.length;P++)_=C[P],!(f.indexOf(_)>=0)&&(p[_]=w[_]);return p}function Toe(w,f){if(w==null)return{};var p=Eoe(w,f),C,_;if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(w);for(_=0;_<P.length;_++)C=P[_],!(f.indexOf(C)>=0)&&Object.prototype.propertyIsEnumerable.call(w,C)&&(p[C]=w[C])}return p}var _oe="1.15.6";function Xb(w){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(w)}var Qb=Xb(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ZM=Xb(/Edge/i),eJ=Xb(/firefox/i),DM=Xb(/safari/i)&&!Xb(/chrome/i)&&!Xb(/android/i),VK=Xb(/iP(ad|od|hone)/i),HJ=Xb(/chrome/i)&&Xb(/android/i),zJ={capture:!1,passive:!1};function vs(w,f,p){w.addEventListener(f,p,!Qb&&zJ)}function us(w,f,p){w.removeEventListener(f,p,!Qb&&zJ)}function C8(w,f){if(f){if(f[0]===">"&&(f=f.substring(1)),w)try{if(w.matches)return w.matches(f);if(w.msMatchesSelector)return w.msMatchesSelector(f);if(w.webkitMatchesSelector)return w.webkitMatchesSelector(f)}catch{return!1}return!1}}function VJ(w){return w.host&&w!==document&&w.host.nodeType?w.host:w.parentNode}function Bg(w,f,p,C){if(w){p=p||document;do{if(f!=null&&(f[0]===">"?w.parentNode===p&&C8(w,f):C8(w,f))||C&&w===p)return w;if(w===p)break}while(w=VJ(w))}return null}var tJ=/\s+/g;function hm(w,f,p){if(w&&f)if(w.classList)w.classList[p?"add":"remove"](f);else{var C=(" "+w.className+" ").replace(tJ," ").replace(" "+f+" "," ");w.className=(C+(p?" "+f:"")).replace(tJ," ")}}function lo(w,f,p){var C=w&&w.style;if(C){if(p===void 0)return document.defaultView&&document.defaultView.getComputedStyle?p=document.defaultView.getComputedStyle(w,""):w.currentStyle&&(p=w.currentStyle),f===void 0?p:p[f];!(f in C)&&f.indexOf("webkit")===-1&&(f="-webkit-"+f),C[f]=p+(typeof p=="string"?"":"px")}}function Nk(w,f){var p="";if(typeof w=="string")p=w;else do{var C=lo(w,"transform");C&&C!=="none"&&(p=C+" "+p)}while(!f&&(w=w.parentNode));var _=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return _&&new _(p)}function UJ(w,f,p){if(w){var C=w.getElementsByTagName(f),_=0,P=C.length;if(p)for(;_<P;_++)p(C[_],_);return C}return[]}function Vp(){var w=document.scrollingElement;return w||document.documentElement}function Bi(w,f,p,C,_){if(!(!w.getBoundingClientRect&&w!==window)){var P,N,z,G,te,ie,me;if(w!==window&&w.parentNode&&w!==Vp()?(P=w.getBoundingClientRect(),N=P.top,z=P.left,G=P.bottom,te=P.right,ie=P.height,me=P.width):(N=0,z=0,G=window.innerHeight,te=window.innerWidth,ie=window.innerHeight,me=window.innerWidth),(f||p)&&w!==window&&(_=_||w.parentNode,!Qb))do if(_&&_.getBoundingClientRect&&(lo(_,"transform")!=="none"||p&&lo(_,"position")!=="static")){var xe=_.getBoundingClientRect();N-=xe.top+parseInt(lo(_,"border-top-width")),z-=xe.left+parseInt(lo(_,"border-left-width")),G=N+P.height,te=z+P.width;break}while(_=_.parentNode);if(C&&w!==window){var Fe=Nk(_||w),ve=Fe&&Fe.a,je=Fe&&Fe.d;Fe&&(N/=je,z/=ve,me/=ve,ie/=je,G=N+ie,te=z+me)}return{top:N,left:z,bottom:G,right:te,width:me,height:ie}}}function nJ(w,f,p){for(var C=Hy(w,!0),_=Bi(w)[f];C;){var P=Bi(C)[p],N=void 0;if(N=_>=P,!N)return C;if(C===Vp())break;C=Hy(C,!1)}return!1}function Wk(w,f,p,C){for(var _=0,P=0,N=w.children;P<N.length;){if(N[P].style.display!=="none"&&N[P]!==uo.ghost&&(C||N[P]!==uo.dragged)&&Bg(N[P],p.draggable,w,!1)){if(_===f)return N[P];_++}P++}return null}function UK(w,f){for(var p=w.lastElementChild;p&&(p===uo.ghost||lo(p,"display")==="none"||f&&!C8(p,f));)p=p.previousElementSibling;return p||null}function Cf(w,f){var p=0;if(!w||!w.parentNode)return-1;for(;w=w.previousElementSibling;)w.nodeName.toUpperCase()!=="TEMPLATE"&&w!==uo.clone&&(!f||C8(w,f))&&p++;return p}function oJ(w){var f=0,p=0,C=Vp();if(w)do{var _=Nk(w),P=_.a,N=_.d;f+=w.scrollLeft*P,p+=w.scrollTop*N}while(w!==C&&(w=w.parentNode));return[f,p]}function koe(w,f){for(var p in w)if(w.hasOwnProperty(p)){for(var C in f)if(f.hasOwnProperty(C)&&f[C]===w[p][C])return Number(p)}return-1}function Hy(w,f){if(!w||!w.getBoundingClientRect)return Vp();var p=w,C=!1;do if(p.clientWidth<p.scrollWidth||p.clientHeight<p.scrollHeight){var _=lo(p);if(p.clientWidth<p.scrollWidth&&(_.overflowX=="auto"||_.overflowX=="scroll")||p.clientHeight<p.scrollHeight&&(_.overflowY=="auto"||_.overflowY=="scroll")){if(!p.getBoundingClientRect||p===document.body)return Vp();if(C||f)return p;C=!0}}while(p=p.parentNode);return Vp()}function Ooe(w,f){if(w&&f)for(var p in f)f.hasOwnProperty(p)&&(w[p]=f[p]);return w}function mK(w,f){return Math.round(w.top)===Math.round(f.top)&&Math.round(w.left)===Math.round(f.left)&&Math.round(w.height)===Math.round(f.height)&&Math.round(w.width)===Math.round(f.width)}var RM;function WJ(w,f){return function(){if(!RM){var p=arguments,C=this;p.length===1?w.call(C,p[0]):w.apply(C,p),RM=setTimeout(function(){RM=void 0},f)}}}function Aoe(){clearTimeout(RM),RM=void 0}function ZJ(w,f,p){w.scrollLeft+=f,w.scrollTop+=p}function jJ(w){var f=window.Polymer,p=window.jQuery||window.Zepto;return f&&f.dom?f.dom(w).cloneNode(!0):p?p(w).clone(!0)[0]:w.cloneNode(!0)}function GJ(w,f,p){var C={};return Array.from(w.children).forEach(function(_){var P,N,z,G;if(!(!Bg(_,f.draggable,w,!1)||_.animated||_===p)){var te=Bi(_);C.left=Math.min((P=C.left)!==null&&P!==void 0?P:1/0,te.left),C.top=Math.min((N=C.top)!==null&&N!==void 0?N:1/0,te.top),C.right=Math.max((z=C.right)!==null&&z!==void 0?z:-1/0,te.right),C.bottom=Math.max((G=C.bottom)!==null&&G!==void 0?G:-1/0,te.bottom)}}),C.width=C.right-C.left,C.height=C.bottom-C.top,C.x=C.left,C.y=C.top,C}var wd="Sortable"+new Date().getTime();function Doe(){var w=[],f;return{captureAnimationState:function(){if(w=[],!!this.options.animation){var C=[].slice.call(this.el.children);C.forEach(function(_){if(!(lo(_,"display")==="none"||_===uo.ghost)){w.push({target:_,rect:Bi(_)});var P=Up({},w[w.length-1].rect);if(_.thisAnimationDuration){var N=Nk(_,!0);N&&(P.top-=N.f,P.left-=N.e)}_.fromRect=P}})}},addAnimationState:function(C){w.push(C)},removeAnimationState:function(C){w.splice(koe(w,{target:C}),1)},animateAll:function(C){var _=this;if(!this.options.animation){clearTimeout(f),typeof C=="function"&&C();return}var P=!1,N=0;w.forEach(function(z){var G=0,te=z.target,ie=te.fromRect,me=Bi(te),xe=te.prevFromRect,Fe=te.prevToRect,ve=z.rect,je=Nk(te,!0);je&&(me.top-=je.f,me.left-=je.e),te.toRect=me,te.thisAnimationDuration&&mK(xe,me)&&!mK(ie,me)&&(ve.top-me.top)/(ve.left-me.left)===(ie.top-me.top)/(ie.left-me.left)&&(G=Moe(ve,xe,Fe,_.options)),mK(me,ie)||(te.prevFromRect=ie,te.prevToRect=me,G||(G=_.options.animation),_.animate(te,ve,me,G)),G&&(P=!0,N=Math.max(N,G),clearTimeout(te.animationResetTimer),te.animationResetTimer=setTimeout(function(){te.animationTime=0,te.prevFromRect=null,te.fromRect=null,te.prevToRect=null,te.thisAnimationDuration=null},G),te.thisAnimationDuration=G)}),clearTimeout(f),P?f=setTimeout(function(){typeof C=="function"&&C()},N):typeof C=="function"&&C(),w=[]},animate:function(C,_,P,N){if(N){lo(C,"transition",""),lo(C,"transform","");var z=Nk(this.el),G=z&&z.a,te=z&&z.d,ie=(_.left-P.left)/(G||1),me=(_.top-P.top)/(te||1);C.animatingX=!!ie,C.animatingY=!!me,lo(C,"transform","translate3d("+ie+"px,"+me+"px,0)"),this.forRepaintDummy=Roe(C),lo(C,"transition","transform "+N+"ms"+(this.options.easing?" "+this.options.easing:"")),lo(C,"transform","translate3d(0,0,0)"),typeof C.animated=="number"&&clearTimeout(C.animated),C.animated=setTimeout(function(){lo(C,"transition",""),lo(C,"transform",""),C.animated=!1,C.animatingX=!1,C.animatingY=!1},N)}}}}function Roe(w){return w.offsetWidth}function Moe(w,f,p,C){return Math.sqrt(Math.pow(f.top-w.top,2)+Math.pow(f.left-w.left,2))/Math.sqrt(Math.pow(f.top-p.top,2)+Math.pow(f.left-p.left,2))*C.animation}var Ak=[],fK={initializeByDefault:!0},jM={mount:function(f){for(var p in fK)fK.hasOwnProperty(p)&&!(p in f)&&(f[p]=fK[p]);Ak.forEach(function(C){if(C.pluginName===f.pluginName)throw"Sortable: Cannot mount plugin ".concat(f.pluginName," more than once")}),Ak.push(f)},pluginEvent:function(f,p,C){var _=this;this.eventCanceled=!1,C.cancel=function(){_.eventCanceled=!0};var P=f+"Global";Ak.forEach(function(N){p[N.pluginName]&&(p[N.pluginName][P]&&p[N.pluginName][P](Up({sortable:p},C)),p.options[N.pluginName]&&p[N.pluginName][f]&&p[N.pluginName][f](Up({sortable:p},C)))})},initializePlugins:function(f,p,C,_){Ak.forEach(function(z){var G=z.pluginName;if(!(!f.options[G]&&!z.initializeByDefault)){var te=new z(f,p,f.options);te.sortable=f,te.options=f.options,f[G]=te,Jb(C,te.defaults)}});for(var P in f.options)if(f.options.hasOwnProperty(P)){var N=this.modifyOption(f,P,f.options[P]);typeof N<"u"&&(f.options[P]=N)}},getEventProperties:function(f,p){var C={};return Ak.forEach(function(_){typeof _.eventProperties=="function"&&Jb(C,_.eventProperties.call(p[_.pluginName],f))}),C},modifyOption:function(f,p,C){var _;return Ak.forEach(function(P){f[P.pluginName]&&P.optionListeners&&typeof P.optionListeners[p]=="function"&&(_=P.optionListeners[p].call(f[P.pluginName],C))}),_}};function Poe(w){var f=w.sortable,p=w.rootEl,C=w.name,_=w.targetEl,P=w.cloneEl,N=w.toEl,z=w.fromEl,G=w.oldIndex,te=w.newIndex,ie=w.oldDraggableIndex,me=w.newDraggableIndex,xe=w.originalEvent,Fe=w.putSortable,ve=w.extraEventProperties;if(f=f||p&&p[wd],!!f){var je,He=f.options,Zt="on"+C.charAt(0).toUpperCase()+C.substr(1);window.CustomEvent&&!Qb&&!ZM?je=new CustomEvent(C,{bubbles:!0,cancelable:!0}):(je=document.createEvent("Event"),je.initEvent(C,!0,!0)),je.to=N||p,je.from=z||p,je.item=_||p,je.clone=P,je.oldIndex=G,je.newIndex=te,je.oldDraggableIndex=ie,je.newDraggableIndex=me,je.originalEvent=xe,je.pullMode=Fe?Fe.lastPutMode:void 0;var ze=Up(Up({},ve),jM.getEventProperties(C,f));for(var Q in ze)je[Q]=ze[Q];p&&p.dispatchEvent(je),He[Zt]&&He[Zt].call(f,je)}}var Noe=["evt"],yd=function(f,p){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},_=C.evt,P=Toe(C,Noe);jM.pluginEvent.bind(uo)(f,p,Up({dragEl:Qt,parentEl:Ka,ghostEl:xo,rootEl:ba,nextEl:_2,lastDownEl:u8,cloneEl:Ma,cloneHidden:Fy,dragStarted:kM,putSortable:nl,activeSortable:uo.active,originalEvent:_,oldIndex:Pk,oldDraggableIndex:MM,newIndex:pm,newDraggableIndex:Iy,hideGhostForTarget:XJ,unhideGhostForTarget:JJ,cloneNowHidden:function(){Fy=!0},cloneNowShown:function(){Fy=!1},dispatchSortableEvent:function(z){xu({sortable:p,name:z,originalEvent:_})}},P))};function xu(w){Poe(Up({putSortable:nl,cloneEl:Ma,targetEl:Qt,rootEl:ba,oldIndex:Pk,oldDraggableIndex:MM,newIndex:pm,newDraggableIndex:Iy},w))}var Qt,Ka,xo,ba,_2,u8,Ma,Fy,Pk,pm,MM,Iy,n8,nl,Rk=!1,S8=!1,x8=[],x2,Dg,gK,hK,sJ,rJ,kM,Dk,PM,NM=!1,o8=!1,d8,Bl,pK=[],PK=!1,E8=[],R8=typeof document<"u",s8=VK,aJ=ZM||Qb?"cssFloat":"float",Boe=R8&&!HJ&&!VK&&"draggable"in document.createElement("div"),qJ=function(){if(R8){if(Qb)return!1;var w=document.createElement("x");return w.style.cssText="pointer-events:auto",w.style.pointerEvents==="auto"}}(),KJ=function(f,p){var C=lo(f),_=parseInt(C.width)-parseInt(C.paddingLeft)-parseInt(C.paddingRight)-parseInt(C.borderLeftWidth)-parseInt(C.borderRightWidth),P=Wk(f,0,p),N=Wk(f,1,p),z=P&&lo(P),G=N&&lo(N),te=z&&parseInt(z.marginLeft)+parseInt(z.marginRight)+Bi(P).width,ie=G&&parseInt(G.marginLeft)+parseInt(G.marginRight)+Bi(N).width;if(C.display==="flex")return C.flexDirection==="column"||C.flexDirection==="column-reverse"?"vertical":"horizontal";if(C.display==="grid")return C.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(P&&z.float&&z.float!=="none"){var me=z.float==="left"?"left":"right";return N&&(G.clear==="both"||G.clear===me)?"vertical":"horizontal"}return P&&(z.display==="block"||z.display==="flex"||z.display==="table"||z.display==="grid"||te>=_&&C[aJ]==="none"||N&&C[aJ]==="none"&&te+ie>_)?"vertical":"horizontal"},$oe=function(f,p,C){var _=C?f.left:f.top,P=C?f.right:f.bottom,N=C?f.width:f.height,z=C?p.left:p.top,G=C?p.right:p.bottom,te=C?p.width:p.height;return _===z||P===G||_+N/2===z+te/2},Ioe=function(f,p){var C;return x8.some(function(_){var P=_[wd].options.emptyInsertThreshold;if(!(!P||UK(_))){var N=Bi(_),z=f>=N.left-P&&f<=N.right+P,G=p>=N.top-P&&p<=N.bottom+P;if(z&&G)return C=_}}),C},YJ=function(f){function p(P,N){return function(z,G,te,ie){var me=z.options.group.name&&G.options.group.name&&z.options.group.name===G.options.group.name;if(P==null&&(N||me))return!0;if(P==null||P===!1)return!1;if(N&&P==="clone")return P;if(typeof P=="function")return p(P(z,G,te,ie),N)(z,G,te,ie);var xe=(N?z:G).options.group.name;return P===!0||typeof P=="string"&&P===xe||P.join&&P.indexOf(xe)>-1}}var C={},_=f.group;(!_||l8(_)!="object")&&(_={name:_}),C.name=_.name,C.checkPull=p(_.pull,!0),C.checkPut=p(_.put),C.revertClone=_.revertClone,f.group=C},XJ=function(){!qJ&&xo&&lo(xo,"display","none")},JJ=function(){!qJ&&xo&&lo(xo,"display","")};R8&&!HJ&&document.addEventListener("click",function(w){if(S8)return w.preventDefault(),w.stopPropagation&&w.stopPropagation(),w.stopImmediatePropagation&&w.stopImmediatePropagation(),S8=!1,!1},!0);var E2=function(f){if(Qt){f=f.touches?f.touches[0]:f;var p=Ioe(f.clientX,f.clientY);if(p){var C={};for(var _ in f)f.hasOwnProperty(_)&&(C[_]=f[_]);C.target=C.rootEl=p,C.preventDefault=void 0,C.stopPropagation=void 0,p[wd]._onDragOver(C)}}},Foe=function(f){Qt&&Qt.parentNode[wd]._isOutsideThisEl(f.target)};function uo(w,f){if(!(w&&w.nodeType&&w.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(w));this.el=w,this.options=f=Jb({},f),w[wd]=this;var p={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(w.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return KJ(w,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(N,z){N.setData("Text",z.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:uo.supportPointer!==!1&&"PointerEvent"in window&&(!DM||VK),emptyInsertThreshold:5};jM.initializePlugins(this,w,p);for(var C in p)!(C in f)&&(f[C]=p[C]);YJ(f);for(var _ in this)_.charAt(0)==="_"&&typeof this[_]=="function"&&(this[_]=this[_].bind(this));this.nativeDraggable=f.forceFallback?!1:Boe,this.nativeDraggable&&(this.options.touchStartThreshold=1),f.supportPointer?vs(w,"pointerdown",this._onTapStart):(vs(w,"mousedown",this._onTapStart),vs(w,"touchstart",this._onTapStart)),this.nativeDraggable&&(vs(w,"dragover",this),vs(w,"dragenter",this)),x8.push(this.el),f.store&&f.store.get&&this.sort(f.store.get(this)||[]),Jb(this,Doe())}uo.prototype={constructor:uo,_isOutsideThisEl:function(f){!this.el.contains(f)&&f!==this.el&&(Dk=null)},_getDirection:function(f,p){return typeof this.options.direction=="function"?this.options.direction.call(this,f,p,Qt):this.options.direction},_onTapStart:function(f){if(f.cancelable){var p=this,C=this.el,_=this.options,P=_.preventOnFilter,N=f.type,z=f.touches&&f.touches[0]||f.pointerType&&f.pointerType==="touch"&&f,G=(z||f).target,te=f.target.shadowRoot&&(f.path&&f.path[0]||f.composedPath&&f.composedPath()[0])||G,ie=_.filter;if(joe(C),!Qt&&!(/mousedown|pointerdown/.test(N)&&f.button!==0||_.disabled)&&!te.isContentEditable&&!(!this.nativeDraggable&&DM&&G&&G.tagName.toUpperCase()==="SELECT")&&(G=Bg(G,_.draggable,C,!1),!(G&&G.animated)&&u8!==G)){if(Pk=Cf(G),MM=Cf(G,_.draggable),typeof ie=="function"){if(ie.call(this,f,G,this)){xu({sortable:p,rootEl:te,name:"filter",targetEl:G,toEl:C,fromEl:C}),yd("filter",p,{evt:f}),P&&f.preventDefault();return}}else if(ie&&(ie=ie.split(",").some(function(me){if(me=Bg(te,me.trim(),C,!1),me)return xu({sortable:p,rootEl:me,name:"filter",targetEl:G,fromEl:C,toEl:C}),yd("filter",p,{evt:f}),!0}),ie)){P&&f.preventDefault();return}_.handle&&!Bg(te,_.handle,C,!1)||this._prepareDragStart(f,z,G)}}},_prepareDragStart:function(f,p,C){var _=this,P=_.el,N=_.options,z=P.ownerDocument,G;if(C&&!Qt&&C.parentNode===P){var te=Bi(C);if(ba=P,Qt=C,Ka=Qt.parentNode,_2=Qt.nextSibling,u8=C,n8=N.group,uo.dragged=Qt,x2={target:Qt,clientX:(p||f).clientX,clientY:(p||f).clientY},sJ=x2.clientX-te.left,rJ=x2.clientY-te.top,this._lastX=(p||f).clientX,this._lastY=(p||f).clientY,Qt.style["will-change"]="all",G=function(){if(yd("delayEnded",_,{evt:f}),uo.eventCanceled){_._onDrop();return}_._disableDelayedDragEvents(),!eJ&&_.nativeDraggable&&(Qt.draggable=!0),_._triggerDragStart(f,p),xu({sortable:_,name:"choose",originalEvent:f}),hm(Qt,N.chosenClass,!0)},N.ignore.split(",").forEach(function(ie){UJ(Qt,ie.trim(),bK)}),vs(z,"dragover",E2),vs(z,"mousemove",E2),vs(z,"touchmove",E2),N.supportPointer?(vs(z,"pointerup",_._onDrop),!this.nativeDraggable&&vs(z,"pointercancel",_._onDrop)):(vs(z,"mouseup",_._onDrop),vs(z,"touchend",_._onDrop),vs(z,"touchcancel",_._onDrop)),eJ&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Qt.draggable=!0),yd("delayStart",this,{evt:f}),N.delay&&(!N.delayOnTouchOnly||p)&&(!this.nativeDraggable||!(ZM||Qb))){if(uo.eventCanceled){this._onDrop();return}N.supportPointer?(vs(z,"pointerup",_._disableDelayedDrag),vs(z,"pointercancel",_._disableDelayedDrag)):(vs(z,"mouseup",_._disableDelayedDrag),vs(z,"touchend",_._disableDelayedDrag),vs(z,"touchcancel",_._disableDelayedDrag)),vs(z,"mousemove",_._delayedDragTouchMoveHandler),vs(z,"touchmove",_._delayedDragTouchMoveHandler),N.supportPointer&&vs(z,"pointermove",_._delayedDragTouchMoveHandler),_._dragStartTimer=setTimeout(G,N.delay)}else G()}},_delayedDragTouchMoveHandler:function(f){var p=f.touches?f.touches[0]:f;Math.max(Math.abs(p.clientX-this._lastX),Math.abs(p.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Qt&&bK(Qt),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var f=this.el.ownerDocument;us(f,"mouseup",this._disableDelayedDrag),us(f,"touchend",this._disableDelayedDrag),us(f,"touchcancel",this._disableDelayedDrag),us(f,"pointerup",this._disableDelayedDrag),us(f,"pointercancel",this._disableDelayedDrag),us(f,"mousemove",this._delayedDragTouchMoveHandler),us(f,"touchmove",this._delayedDragTouchMoveHandler),us(f,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(f,p){p=p||f.pointerType=="touch"&&f,!this.nativeDraggable||p?this.options.supportPointer?vs(document,"pointermove",this._onTouchMove):p?vs(document,"touchmove",this._onTouchMove):vs(document,"mousemove",this._onTouchMove):(vs(Qt,"dragend",this),vs(ba,"dragstart",this._onDragStart));try{document.selection?m8(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(f,p){if(Rk=!1,ba&&Qt){yd("dragStarted",this,{evt:p}),this.nativeDraggable&&vs(document,"dragover",Foe);var C=this.options;!f&&hm(Qt,C.dragClass,!1),hm(Qt,C.ghostClass,!0),uo.active=this,f&&this._appendGhost(),xu({sortable:this,name:"start",originalEvent:p})}else this._nulling()},_emulateDragOver:function(){if(Dg){this._lastX=Dg.clientX,this._lastY=Dg.clientY,XJ();for(var f=document.elementFromPoint(Dg.clientX,Dg.clientY),p=f;f&&f.shadowRoot&&(f=f.shadowRoot.elementFromPoint(Dg.clientX,Dg.clientY),f!==p);)p=f;if(Qt.parentNode[wd]._isOutsideThisEl(f),p)do{if(p[wd]){var C=void 0;if(C=p[wd]._onDragOver({clientX:Dg.clientX,clientY:Dg.clientY,target:f,rootEl:p}),C&&!this.options.dragoverBubble)break}f=p}while(p=VJ(p));JJ()}},_onTouchMove:function(f){if(x2){var p=this.options,C=p.fallbackTolerance,_=p.fallbackOffset,P=f.touches?f.touches[0]:f,N=xo&&Nk(xo,!0),z=xo&&N&&N.a,G=xo&&N&&N.d,te=s8&&Bl&&oJ(Bl),ie=(P.clientX-x2.clientX+_.x)/(z||1)+(te?te[0]-pK[0]:0)/(z||1),me=(P.clientY-x2.clientY+_.y)/(G||1)+(te?te[1]-pK[1]:0)/(G||1);if(!uo.active&&!Rk){if(C&&Math.max(Math.abs(P.clientX-this._lastX),Math.abs(P.clientY-this._lastY))<C)return;this._onDragStart(f,!0)}if(xo){N?(N.e+=ie-(gK||0),N.f+=me-(hK||0)):N={a:1,b:0,c:0,d:1,e:ie,f:me};var xe="matrix(".concat(N.a,",").concat(N.b,",").concat(N.c,",").concat(N.d,",").concat(N.e,",").concat(N.f,")");lo(xo,"webkitTransform",xe),lo(xo,"mozTransform",xe),lo(xo,"msTransform",xe),lo(xo,"transform",xe),gK=ie,hK=me,Dg=P}f.cancelable&&f.preventDefault()}},_appendGhost:function(){if(!xo){var f=this.options.fallbackOnBody?document.body:ba,p=Bi(Qt,!0,s8,!0,f),C=this.options;if(s8){for(Bl=f;lo(Bl,"position")==="static"&&lo(Bl,"transform")==="none"&&Bl!==document;)Bl=Bl.parentNode;Bl!==document.body&&Bl!==document.documentElement?(Bl===document&&(Bl=Vp()),p.top+=Bl.scrollTop,p.left+=Bl.scrollLeft):Bl=Vp(),pK=oJ(Bl)}xo=Qt.cloneNode(!0),hm(xo,C.ghostClass,!1),hm(xo,C.fallbackClass,!0),hm(xo,C.dragClass,!0),lo(xo,"transition",""),lo(xo,"transform",""),lo(xo,"box-sizing","border-box"),lo(xo,"margin",0),lo(xo,"top",p.top),lo(xo,"left",p.left),lo(xo,"width",p.width),lo(xo,"height",p.height),lo(xo,"opacity","0.8"),lo(xo,"position",s8?"absolute":"fixed"),lo(xo,"zIndex","100000"),lo(xo,"pointerEvents","none"),uo.ghost=xo,f.appendChild(xo),lo(xo,"transform-origin",sJ/parseInt(xo.style.width)*100+"% "+rJ/parseInt(xo.style.height)*100+"%")}},_onDragStart:function(f,p){var C=this,_=f.dataTransfer,P=C.options;if(yd("dragStart",this,{evt:f}),uo.eventCanceled){this._onDrop();return}yd("setupClone",this),uo.eventCanceled||(Ma=jJ(Qt),Ma.removeAttribute("id"),Ma.draggable=!1,Ma.style["will-change"]="",this._hideClone(),hm(Ma,this.options.chosenClass,!1),uo.clone=Ma),C.cloneId=m8(function(){yd("clone",C),!uo.eventCanceled&&(C.options.removeCloneOnHide||ba.insertBefore(Ma,Qt),C._hideClone(),xu({sortable:C,name:"clone"}))}),!p&&hm(Qt,P.dragClass,!0),p?(S8=!0,C._loopId=setInterval(C._emulateDragOver,50)):(us(document,"mouseup",C._onDrop),us(document,"touchend",C._onDrop),us(document,"touchcancel",C._onDrop),_&&(_.effectAllowed="move",P.setData&&P.setData.call(C,_,Qt)),vs(document,"drop",C),lo(Qt,"transform","translateZ(0)")),Rk=!0,C._dragStartId=m8(C._dragStarted.bind(C,p,f)),vs(document,"selectstart",C),kM=!0,window.getSelection().removeAllRanges(),DM&&lo(document.body,"user-select","none")},_onDragOver:function(f){var p=this.el,C=f.target,_,P,N,z=this.options,G=z.group,te=uo.active,ie=n8===G,me=z.sort,xe=nl||te,Fe,ve=this,je=!1;if(PK)return;function He(ft,Eo){yd(ft,ve,Up({evt:f,isOwner:ie,axis:Fe?"vertical":"horizontal",revert:N,dragRect:_,targetRect:P,canSort:me,fromSortable:xe,target:C,completed:ze,onMove:function(qe,go){return r8(ba,p,Qt,_,qe,Bi(qe),f,go)},changed:Q},Eo))}function Zt(){He("dragOverAnimationCapture"),ve.captureAnimationState(),ve!==xe&&xe.captureAnimationState()}function ze(ft){return He("dragOverCompleted",{insertion:ft}),ft&&(ie?te._hideClone():te._showClone(ve),ve!==xe&&(hm(Qt,nl?nl.options.ghostClass:te.options.ghostClass,!1),hm(Qt,z.ghostClass,!0)),nl!==ve&&ve!==uo.active?nl=ve:ve===uo.active&&nl&&(nl=null),xe===ve&&(ve._ignoreWhileAnimating=C),ve.animateAll(function(){He("dragOverAnimationComplete"),ve._ignoreWhileAnimating=null}),ve!==xe&&(xe.animateAll(),xe._ignoreWhileAnimating=null)),(C===Qt&&!Qt.animated||C===p&&!C.animated)&&(Dk=null),!z.dragoverBubble&&!f.rootEl&&C!==document&&(Qt.parentNode[wd]._isOutsideThisEl(f.target),!ft&&E2(f)),!z.dragoverBubble&&f.stopPropagation&&f.stopPropagation(),je=!0}function Q(){pm=Cf(Qt),Iy=Cf(Qt,z.draggable),xu({sortable:ve,name:"change",toEl:p,newIndex:pm,newDraggableIndex:Iy,originalEvent:f})}if(f.preventDefault!==void 0&&f.cancelable&&f.preventDefault(),C=Bg(C,z.draggable,p,!0),He("dragOver"),uo.eventCanceled)return je;if(Qt.contains(f.target)||C.animated&&C.animatingX&&C.animatingY||ve._ignoreWhileAnimating===C)return ze(!1);if(S8=!1,te&&!z.disabled&&(ie?me||(N=Ka!==ba):nl===this||(this.lastPutMode=n8.checkPull(this,te,Qt,f))&&G.checkPut(this,te,Qt,f))){if(Fe=this._getDirection(f,C)==="vertical",_=Bi(Qt),He("dragOverValid"),uo.eventCanceled)return je;if(N)return Ka=ba,Zt(),this._hideClone(),He("revert"),uo.eventCanceled||(_2?ba.insertBefore(Qt,_2):ba.appendChild(Qt)),ze(!0);var Ge=UK(p,z.draggable);if(!Ge||Voe(f,Fe,this)&&!Ge.animated){if(Ge===Qt)return ze(!1);if(Ge&&p===f.target&&(C=Ge),C&&(P=Bi(C)),r8(ba,p,Qt,_,C,P,f,!!C)!==!1)return Zt(),Ge&&Ge.nextSibling?p.insertBefore(Qt,Ge.nextSibling):p.appendChild(Qt),Ka=p,Q(),ze(!0)}else if(Ge&&zoe(f,Fe,this)){var gn=Wk(p,0,z,!0);if(gn===Qt)return ze(!1);if(C=gn,P=Bi(C),r8(ba,p,Qt,_,C,P,f,!1)!==!1)return Zt(),p.insertBefore(Qt,gn),Ka=p,Q(),ze(!0)}else if(C.parentNode===p){P=Bi(C);var _t=0,ae,ut=Qt.parentNode!==p,bt=!$oe(Qt.animated&&Qt.toRect||_,C.animated&&C.toRect||P,Fe),It=Fe?"top":"left",Te=nJ(C,"top","top")||nJ(Qt,"top","top"),ue=Te?Te.scrollTop:void 0;Dk!==C&&(ae=P[It],NM=!1,o8=!bt&&z.invertSwap||ut),_t=Uoe(f,C,P,Fe,bt?1:z.swapThreshold,z.invertedSwapThreshold==null?z.swapThreshold:z.invertedSwapThreshold,o8,Dk===C);var Fn;if(_t!==0){var An=Cf(Qt);do An-=_t,Fn=Ka.children[An];while(Fn&&(lo(Fn,"display")==="none"||Fn===xo))}if(_t===0||Fn===C)return ze(!1);Dk=C,PM=_t;var Dt=C.nextElementSibling,R=!1;R=_t===1;var fo=r8(ba,p,Qt,_,C,P,f,R);if(fo!==!1)return(fo===1||fo===-1)&&(R=fo===1),PK=!0,setTimeout(Hoe,30),Zt(),R&&!Dt?p.appendChild(Qt):C.parentNode.insertBefore(Qt,R?Dt:C),Te&&ZJ(Te,0,ue-Te.scrollTop),Ka=Qt.parentNode,ae!==void 0&&!o8&&(d8=Math.abs(ae-Bi(C)[It])),Q(),ze(!0)}if(p.contains(Qt))return ze(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){us(document,"mousemove",this._onTouchMove),us(document,"touchmove",this._onTouchMove),us(document,"pointermove",this._onTouchMove),us(document,"dragover",E2),us(document,"mousemove",E2),us(document,"touchmove",E2)},_offUpEvents:function(){var f=this.el.ownerDocument;us(f,"mouseup",this._onDrop),us(f,"touchend",this._onDrop),us(f,"pointerup",this._onDrop),us(f,"pointercancel",this._onDrop),us(f,"touchcancel",this._onDrop),us(document,"selectstart",this)},_onDrop:function(f){var p=this.el,C=this.options;if(pm=Cf(Qt),Iy=Cf(Qt,C.draggable),yd("drop",this,{evt:f}),Ka=Qt&&Qt.parentNode,pm=Cf(Qt),Iy=Cf(Qt,C.draggable),uo.eventCanceled){this._nulling();return}Rk=!1,o8=!1,NM=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),NK(this.cloneId),NK(this._dragStartId),this.nativeDraggable&&(us(document,"drop",this),us(p,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),DM&&lo(document.body,"user-select",""),lo(Qt,"transform",""),f&&(kM&&(f.cancelable&&f.preventDefault(),!C.dropBubble&&f.stopPropagation()),xo&&xo.parentNode&&xo.parentNode.removeChild(xo),(ba===Ka||nl&&nl.lastPutMode!=="clone")&&Ma&&Ma.parentNode&&Ma.parentNode.removeChild(Ma),Qt&&(this.nativeDraggable&&us(Qt,"dragend",this),bK(Qt),Qt.style["will-change"]="",kM&&!Rk&&hm(Qt,nl?nl.options.ghostClass:this.options.ghostClass,!1),hm(Qt,this.options.chosenClass,!1),xu({sortable:this,name:"unchoose",toEl:Ka,newIndex:null,newDraggableIndex:null,originalEvent:f}),ba!==Ka?(pm>=0&&(xu({rootEl:Ka,name:"add",toEl:Ka,fromEl:ba,originalEvent:f}),xu({sortable:this,name:"remove",toEl:Ka,originalEvent:f}),xu({rootEl:Ka,name:"sort",toEl:Ka,fromEl:ba,originalEvent:f}),xu({sortable:this,name:"sort",toEl:Ka,originalEvent:f})),nl&&nl.save()):pm!==Pk&&pm>=0&&(xu({sortable:this,name:"update",toEl:Ka,originalEvent:f}),xu({sortable:this,name:"sort",toEl:Ka,originalEvent:f})),uo.active&&((pm==null||pm===-1)&&(pm=Pk,Iy=MM),xu({sortable:this,name:"end",toEl:Ka,originalEvent:f}),this.save()))),this._nulling()},_nulling:function(){yd("nulling",this),ba=Qt=Ka=xo=_2=Ma=u8=Fy=x2=Dg=kM=pm=Iy=Pk=MM=Dk=PM=nl=n8=uo.dragged=uo.ghost=uo.clone=uo.active=null,E8.forEach(function(f){f.checked=!0}),E8.length=gK=hK=0},handleEvent:function(f){switch(f.type){case"drop":case"dragend":this._onDrop(f);break;case"dragenter":case"dragover":Qt&&(this._onDragOver(f),Loe(f));break;case"selectstart":f.preventDefault();break}},toArray:function(){for(var f=[],p,C=this.el.children,_=0,P=C.length,N=this.options;_<P;_++)p=C[_],Bg(p,N.draggable,this.el,!1)&&f.push(p.getAttribute(N.dataIdAttr)||Zoe(p));return f},sort:function(f,p){var C={},_=this.el;this.toArray().forEach(function(P,N){var z=_.children[N];Bg(z,this.options.draggable,_,!1)&&(C[P]=z)},this),p&&this.captureAnimationState(),f.forEach(function(P){C[P]&&(_.removeChild(C[P]),_.appendChild(C[P]))}),p&&this.animateAll()},save:function(){var f=this.options.store;f&&f.set&&f.set(this)},closest:function(f,p){return Bg(f,p||this.options.draggable,this.el,!1)},option:function(f,p){var C=this.options;if(p===void 0)return C[f];var _=jM.modifyOption(this,f,p);typeof _<"u"?C[f]=_:C[f]=p,f==="group"&&YJ(C)},destroy:function(){yd("destroy",this);var f=this.el;f[wd]=null,us(f,"mousedown",this._onTapStart),us(f,"touchstart",this._onTapStart),us(f,"pointerdown",this._onTapStart),this.nativeDraggable&&(us(f,"dragover",this),us(f,"dragenter",this)),Array.prototype.forEach.call(f.querySelectorAll("[draggable]"),function(p){p.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),x8.splice(x8.indexOf(this.el),1),this.el=f=null},_hideClone:function(){if(!Fy){if(yd("hideClone",this),uo.eventCanceled)return;lo(Ma,"display","none"),this.options.removeCloneOnHide&&Ma.parentNode&&Ma.parentNode.removeChild(Ma),Fy=!0}},_showClone:function(f){if(f.lastPutMode!=="clone"){this._hideClone();return}if(Fy){if(yd("showClone",this),uo.eventCanceled)return;Qt.parentNode==ba&&!this.options.group.revertClone?ba.insertBefore(Ma,Qt):_2?ba.insertBefore(Ma,_2):ba.appendChild(Ma),this.options.group.revertClone&&this.animate(Qt,Ma),lo(Ma,"display",""),Fy=!1}}};function Loe(w){w.dataTransfer&&(w.dataTransfer.dropEffect="move"),w.cancelable&&w.preventDefault()}function r8(w,f,p,C,_,P,N,z){var G,te=w[wd],ie=te.options.onMove,me;return window.CustomEvent&&!Qb&&!ZM?G=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(G=document.createEvent("Event"),G.initEvent("move",!0,!0)),G.to=f,G.from=w,G.dragged=p,G.draggedRect=C,G.related=_||f,G.relatedRect=P||Bi(f),G.willInsertAfter=z,G.originalEvent=N,w.dispatchEvent(G),ie&&(me=ie.call(te,G,N)),me}function bK(w){w.draggable=!1}function Hoe(){PK=!1}function zoe(w,f,p){var C=Bi(Wk(p.el,0,p.options,!0)),_=GJ(p.el,p.options,xo),P=10;return f?w.clientX<_.left-P||w.clientY<C.top&&w.clientX<C.right:w.clientY<_.top-P||w.clientY<C.bottom&&w.clientX<C.left}function Voe(w,f,p){var C=Bi(UK(p.el,p.options.draggable)),_=GJ(p.el,p.options,xo),P=10;return f?w.clientX>_.right+P||w.clientY>C.bottom&&w.clientX>C.left:w.clientY>_.bottom+P||w.clientX>C.right&&w.clientY>C.top}function Uoe(w,f,p,C,_,P,N,z){var G=C?w.clientY:w.clientX,te=C?p.height:p.width,ie=C?p.top:p.left,me=C?p.bottom:p.right,xe=!1;if(!N){if(z&&d8<te*_){if(!NM&&(PM===1?G>ie+te*P/2:G<me-te*P/2)&&(NM=!0),NM)xe=!0;else if(PM===1?G<ie+d8:G>me-d8)return-PM}else if(G>ie+te*(1-_)/2&&G<me-te*(1-_)/2)return Woe(f)}return xe=xe||N,xe&&(G<ie+te*P/2||G>me-te*P/2)?G>ie+te/2?1:-1:0}function Woe(w){return Cf(Qt)<Cf(w)?1:-1}function Zoe(w){for(var f=w.tagName+w.className+w.src+w.href+w.textContent,p=f.length,C=0;p--;)C+=f.charCodeAt(p);return C.toString(36)}function joe(w){E8.length=0;for(var f=w.getElementsByTagName("input"),p=f.length;p--;){var C=f[p];C.checked&&E8.push(C)}}function m8(w){return setTimeout(w,0)}function NK(w){return clearTimeout(w)}R8&&vs(document,"touchmove",function(w){(uo.active||Rk)&&w.cancelable&&w.preventDefault()});uo.utils={on:vs,off:us,css:lo,find:UJ,is:function(f,p){return!!Bg(f,p,f,!1)},extend:Ooe,throttle:WJ,closest:Bg,toggleClass:hm,clone:jJ,index:Cf,nextTick:m8,cancelNextTick:NK,detectDirection:KJ,getChild:Wk,expando:wd};uo.get=function(w){return w[wd]};uo.mount=function(){for(var w=arguments.length,f=new Array(w),p=0;p<w;p++)f[p]=arguments[p];f[0].constructor===Array&&(f=f[0]),f.forEach(function(C){if(!C.prototype||!C.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(C));C.utils&&(uo.utils=Up(Up({},uo.utils),C.utils)),jM.mount(C)})};uo.create=function(w,f){return new uo(w,f)};uo.version=_oe;var Ni=[],OM,BK,$K=!1,vK,yK,T8,AM;function Goe(){function w(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var f in this)f.charAt(0)==="_"&&typeof this[f]=="function"&&(this[f]=this[f].bind(this))}return w.prototype={dragStarted:function(p){var C=p.originalEvent;this.sortable.nativeDraggable?vs(document,"dragover",this._handleAutoScroll):this.options.supportPointer?vs(document,"pointermove",this._handleFallbackAutoScroll):C.touches?vs(document,"touchmove",this._handleFallbackAutoScroll):vs(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(p){var C=p.originalEvent;!this.options.dragOverBubble&&!C.rootEl&&this._handleAutoScroll(C)},drop:function(){this.sortable.nativeDraggable?us(document,"dragover",this._handleAutoScroll):(us(document,"pointermove",this._handleFallbackAutoScroll),us(document,"touchmove",this._handleFallbackAutoScroll),us(document,"mousemove",this._handleFallbackAutoScroll)),iJ(),f8(),Aoe()},nulling:function(){T8=BK=OM=$K=AM=vK=yK=null,Ni.length=0},_handleFallbackAutoScroll:function(p){this._handleAutoScroll(p,!0)},_handleAutoScroll:function(p,C){var _=this,P=(p.touches?p.touches[0]:p).clientX,N=(p.touches?p.touches[0]:p).clientY,z=document.elementFromPoint(P,N);if(T8=p,C||this.options.forceAutoScrollFallback||ZM||Qb||DM){wK(p,this.options,z,C);var G=Hy(z,!0);$K&&(!AM||P!==vK||N!==yK)&&(AM&&iJ(),AM=setInterval(function(){var te=Hy(document.elementFromPoint(P,N),!0);te!==G&&(G=te,f8()),wK(p,_.options,te,C)},10),vK=P,yK=N)}else{if(!this.options.bubbleScroll||Hy(z,!0)===Vp()){f8();return}wK(p,this.options,Hy(z,!1),!1)}}},Jb(w,{pluginName:"scroll",initializeByDefault:!0})}function f8(){Ni.forEach(function(w){clearInterval(w.pid)}),Ni=[]}function iJ(){clearInterval(AM)}var wK=WJ(function(w,f,p,C){if(f.scroll){var _=(w.touches?w.touches[0]:w).clientX,P=(w.touches?w.touches[0]:w).clientY,N=f.scrollSensitivity,z=f.scrollSpeed,G=Vp(),te=!1,ie;BK!==p&&(BK=p,f8(),OM=f.scroll,ie=f.scrollFn,OM===!0&&(OM=Hy(p,!0)));var me=0,xe=OM;do{var Fe=xe,ve=Bi(Fe),je=ve.top,He=ve.bottom,Zt=ve.left,ze=ve.right,Q=ve.width,Ge=ve.height,gn=void 0,_t=void 0,ae=Fe.scrollWidth,ut=Fe.scrollHeight,bt=lo(Fe),It=Fe.scrollLeft,Te=Fe.scrollTop;Fe===G?(gn=Q<ae&&(bt.overflowX==="auto"||bt.overflowX==="scroll"||bt.overflowX==="visible"),_t=Ge<ut&&(bt.overflowY==="auto"||bt.overflowY==="scroll"||bt.overflowY==="visible")):(gn=Q<ae&&(bt.overflowX==="auto"||bt.overflowX==="scroll"),_t=Ge<ut&&(bt.overflowY==="auto"||bt.overflowY==="scroll"));var ue=gn&&(Math.abs(ze-_)<=N&&It+Q<ae)-(Math.abs(Zt-_)<=N&&!!It),Fn=_t&&(Math.abs(He-P)<=N&&Te+Ge<ut)-(Math.abs(je-P)<=N&&!!Te);if(!Ni[me])for(var An=0;An<=me;An++)Ni[An]||(Ni[An]={});(Ni[me].vx!=ue||Ni[me].vy!=Fn||Ni[me].el!==Fe)&&(Ni[me].el=Fe,Ni[me].vx=ue,Ni[me].vy=Fn,clearInterval(Ni[me].pid),(ue!=0||Fn!=0)&&(te=!0,Ni[me].pid=setInterval((function(){C&&this.layer===0&&uo.active._onTouchMove(T8);var Dt=Ni[this.layer].vy?Ni[this.layer].vy*z:0,R=Ni[this.layer].vx?Ni[this.layer].vx*z:0;typeof ie=="function"&&ie.call(uo.dragged.parentNode[wd],R,Dt,w,T8,Ni[this.layer].el)!=="continue"||ZJ(Ni[this.layer].el,R,Dt)}).bind({layer:me}),24))),me++}while(f.bubbleScroll&&xe!==G&&(xe=Hy(xe,!1)));$K=te}},30),QJ=function(f){var p=f.originalEvent,C=f.putSortable,_=f.dragEl,P=f.activeSortable,N=f.dispatchSortableEvent,z=f.hideGhostForTarget,G=f.unhideGhostForTarget;if(p){var te=C||P;z();var ie=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:p,me=document.elementFromPoint(ie.clientX,ie.clientY);G(),te&&!te.el.contains(me)&&(N("spill"),this.onSpill({dragEl:_,putSortable:C}))}};function WK(){}WK.prototype={startIndex:null,dragStart:function(f){var p=f.oldDraggableIndex;this.startIndex=p},onSpill:function(f){var p=f.dragEl,C=f.putSortable;this.sortable.captureAnimationState(),C&&C.captureAnimationState();var _=Wk(this.sortable.el,this.startIndex,this.options);_?this.sortable.el.insertBefore(p,_):this.sortable.el.appendChild(p),this.sortable.animateAll(),C&&C.animateAll()},drop:QJ};Jb(WK,{pluginName:"revertOnSpill"});function ZK(){}ZK.prototype={onSpill:function(f){var p=f.dragEl,C=f.putSortable,_=C||this.sortable;_.captureAnimationState(),p.parentNode&&p.parentNode.removeChild(p),_.animateAll()},drop:QJ};Jb(ZK,{pluginName:"removeOnSpill"});uo.mount(new Goe);uo.mount(ZK,WK);var eQ={exports:{}};(function(w){(function(){var f=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},p=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},C=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},_=function(e,n){return P(function(o,r){return e.eq(n(o),n(r))})},P=function(e){return{eq:e}},N=P(function(e,n){return e===n}),z=N,G=function(e){return P(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,i=0;i<r;i++)if(!e.eq(n[i],o[i]))return!1;return!0})},te=function(e,n){return _(G(e),function(o){return C(o,n)})},ie=function(e){return P(function(n,o){var r=Object.keys(n),i=Object.keys(o);if(!te(z).eq(r,i))return!1;for(var u=r.length,g=0;g<u;g++){var y=r[g];if(!e.eq(n[y],o[y]))return!1}return!0})},me=P(function(e,n){if(e===n)return!0;var o=f(e),r=f(n);return o!==r?!1:p(o)?e===n:o==="array"?G(me).eq(e,n):o==="object"?ie(me).eq(e,n):!1});const xe=Object.getPrototypeOf,Fe=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},ve=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&Fe(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},je=e=>n=>ve(n)===e,He=e=>n=>typeof n===e,Zt=e=>n=>e===n,ze=(e,n)=>Ge(e)&&Fe(e,n,(o,r)=>xe(o)===r),Q=je("string"),Ge=je("object"),gn=e=>ze(e,Object),_t=je("array"),ae=Zt(null),ut=He("boolean"),bt=Zt(void 0),It=e=>e==null,Te=e=>!It(e),ue=He("function"),Fn=He("number"),An=(e,n)=>{if(_t(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},Dt=()=>{},R=(e,n)=>(...o)=>e(n.apply(null,o)),fo=(e,n)=>o=>e(n(o)),ft=e=>()=>e,Eo=e=>e,Jt=(e,n)=>e===n;function qe(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const go=e=>n=>!e(n),qs=e=>()=>{throw new Error(e)},Xo=e=>e(),ar=e=>{e()},Xe=ft(!1),yt=ft(!0);class Z{constructor(n,o){this.tag=n,this.value=o}static some(n){return new Z(!0,n)}static none(){return Z.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?Z.some(n(this.value)):Z.none()}bind(n){return this.tag?n(this.value):Z.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:Z.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return Te(n)?Z.some(n):Z.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Z.singletonNone=new Z(!1);const di=Array.prototype.slice,vo=Array.prototype.indexOf,ds=Array.prototype.push,To=(e,n)=>vo.call(e,n),Sf=(e,n)=>{const o=To(e,n);return o===-1?Z.none():Z.some(o)},on=(e,n)=>To(e,n)>-1,Po=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];if(n(i,o))return!0}return!1},zt=(e,n)=>{const o=e.length,r=new Array(o);for(let i=0;i<o;i++){const u=e[i];r[i]=n(u,i)}return r},$e=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];n(i,o)}},eo=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},ws=(e,n)=>{const o=[],r=[];for(let i=0,u=e.length;i<u;i++){const g=e[i];(n(g,i)?o:r).push(g)}return{pass:o,fail:r}},jt=(e,n)=>{const o=[];for(let r=0,i=e.length;r<i;r++){const u=e[r];n(u,r)&&o.push(u)}return o},Il=(e,n,o)=>(eo(e,(r,i)=>{o=n(o,r,i)}),o),as=(e,n,o)=>($e(e,(r,i)=>{o=n(o,r,i)}),o),Tu=(e,n,o)=>{for(let r=0,i=e.length;r<i;r++){const u=e[r];if(n(u,r))return Z.some(u);if(o(u,r))break}return Z.none()},As=(e,n)=>Tu(e,n,Xe),ea=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const i=e[o];if(n(i,o))return Z.some(o)}return Z.none()},bm=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!_t(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);ds.apply(n,e[o])}return n},Ya=(e,n)=>bm(zt(e,n)),tr=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const i=e[o];if(n(i,o)!==!0)return!1}return!0},os=e=>{const n=di.call(e,0);return n.reverse(),n},Cd=(e,n)=>jt(e,o=>!on(n,o)),Jo=(e,n)=>{const o={};for(let r=0,i=e.length;r<i;r++){const u=e[r];o[String(u)]=n(u,r)}return o},Qo=(e,n)=>{const o=di.call(e,0);return o.sort(n),o},sl=(e,n)=>n>=0&&n<e.length?Z.some(e[n]):Z.none(),Ks=e=>sl(e,0),$i=e=>sl(e,e.length-1),Dr=ue(Array.from)?Array.from:e=>di.call(e),Mc=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return Z.none()},Sd=(e,n)=>{const o=[],r=ue(n)?i=>Po(o,u=>n(u,i)):i=>on(o,i);for(let i=0,u=e.length;i<u;i++){const g=e[i];r(g)||o.push(g)}return o},Rr=Object.keys,vm=Object.hasOwnProperty,Ct=(e,n)=>{const o=Rr(e);for(let r=0,i=o.length;r<i;r++){const u=o[r],g=e[u];n(g,u)}},oo=(e,n)=>ta(e,(o,r)=>({k:r,v:n(o,r)})),ta=(e,n)=>{const o={};return Ct(e,(r,i)=>{const u=n(r,i);o[u.k]=u.v}),o},Pa=e=>(n,o)=>{e[o]=n},ym=(e,n,o,r)=>{Ct(e,(i,u)=>{(n(i,u)?o:r)(i,u)})},Ii=(e,n)=>{const o={},r={};return ym(e,n,Pa(o),Pa(r)),{t:o,f:r}},Wo=(e,n)=>{const o={};return ym(e,n,Pa(o),Dt),o},Fi=(e,n)=>{const o=[];return Ct(e,(r,i)=>{o.push(n(r,i))}),o},rl=e=>Fi(e,Eo),Lo=(e,n)=>cn(e,n)?Z.from(e[n]):Z.none(),cn=(e,n)=>vm.call(e,n),va=(e,n)=>cn(e,n)&&e[n]!==void 0&&e[n]!==null,al=(e,n,o=me)=>ie(o).eq(e,n),Fl=e=>{const n={};return $e(e,o=>{n[o]={}}),Rr(n)},wm=e=>e.length!==void 0,na=Array.isArray,ir=e=>{if(na(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},Ds=(e,n,o)=>{if(!e)return!1;if(o=o||e,wm(e)){for(let r=0,i=e.length;r<i;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(cn(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},Li=(e,n)=>{const o=[];return Ds(e,(r,i)=>{o.push(n(r,i,e))}),o},Cm=(e,n)=>{const o=[];return Ds(e,(r,i)=>{(!n||n(r,i,e))&&o.push(r)}),o},il=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},Na=(e,n,o,r)=>{let i=bt(o)?e[0]:o;for(let u=0;u<e.length;u++)i=n.call(r,i,e[u],u);return i},Cs=(e,n,o)=>{for(let r=0,i=e.length;r<i;r++)if(n.call(o,e[r],r,e))return r;return-1},Xa=e=>e[e.length-1],Ll=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},Zp=(e,n,o,r)=>{const i=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!i,g=e.isiOS()||e.isAndroid(),y=g||r("(pointer:coarse)"),x=i||!u&&g&&r("(min-device-width:768px)"),A=u||g&&!x,I=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,F=!A&&!x&&!I;return{isiPad:ft(i),isiPhone:ft(u),isTablet:ft(x),isPhone:ft(A),isTouch:ft(y),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:ft(I),isDesktop:ft(F)}},_u=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},Pc=(e,n)=>{const o=_u(e,n);if(!o)return{major:0,minor:0};const r=i=>Number(n.replace(o,"$"+i));return oa(r(1),r(2))},jp=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?Ce():Pc(e,o)},Ce=()=>oa(0,0),oa=(e,n)=>({major:e,minor:n}),Hl={nu:oa,detect:jp,unknown:Ce},xf=(e,n)=>Mc(n.brands,o=>{const r=o.brand.toLowerCase();return As(e,i=>{var u;return r===((u=i.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(i=>({current:i.name,version:Hl.nu(parseInt(o.version,10),0)}))}),xd=(e,n)=>{const o=String(n).toLowerCase();return As(e,r=>r.search(o))},Ho=(e,n)=>xd(e,n).map(o=>{const r=Hl.detect(o.versionRegexes,n);return{current:o.name,version:r}}),$g=(e,n)=>xd(e,n).map(o=>{const r=Hl.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Ef=(e,n)=>e.substring(n),ku=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,Ed=(e,n)=>$s(e,n)?Ef(e,n.length):e,yr=(e,n,o=0,r)=>{const i=e.indexOf(n,o);return i!==-1?bt(r)?!0:i+n.length<=r:!1},$s=(e,n)=>ku(e,n,0),Ja=(e,n)=>ku(e,n,e.length-n.length),Qa=e=>n=>n.replace(e,""),zl=Qa(/^\s+|\s+$/g),Td=Qa(/^\s+/g),Ou=Qa(/\s+$/g),yo=e=>e.length>0,sa=e=>!yo(e),ic=(e,n)=>n<=0?"":new Array(n+1).join(e),cl=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?Z.none():Z.some(o)},mi=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ys=e=>n=>yr(n,e),es=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>yr(e,"edge/")&&yr(e,"chrome")&&yr(e,"safari")&&yr(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,mi],search:e=>yr(e,"chrome")&&!yr(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>yr(e,"msie")||yr(e,"trident")},{name:"Opera",versionRegexes:[mi,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ys("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ys("firefox")},{name:"Safari",versionRegexes:[mi,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(yr(e,"safari")||yr(e,"mobile/"))&&yr(e,"applewebkit")}],ya=[{name:"Windows",search:Ys("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>yr(e,"iphone")||yr(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ys("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ys("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ys("linux"),versionRegexes:[]},{name:"Solaris",search:Ys("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ys("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ys("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Tf={browsers:ft(es),oses:ft(ya)},So="Edge",Hr="Chromium",Ba="IE",cr="Opera",Nc="Firefox",Bc="Safari",ra=()=>$c({current:void 0,version:Hl.unknown()}),$c=e=>{const n=e.current,o=e.version,r=i=>()=>n===i;return{current:n,version:o,isEdge:r(So),isChromium:r(Hr),isIE:r(Ba),isOpera:r(cr),isFirefox:r(Nc),isSafari:r(Bc)}},Hi={unknown:ra,nu:$c},Ig="Windows",Ic="iOS",Fg="Android",fi="Linux",Vl="macOS",_f="Solaris",kf="FreeBSD",Lg="ChromeOS",K=()=>de({current:void 0,version:Hl.unknown()}),de=e=>{const n=e.current,o=e.version,r=i=>()=>n===i;return{current:n,version:o,isWindows:r(Ig),isiOS:r(Ic),isAndroid:r(Fg),isMacOS:r(Vl),isLinux:r(fi),isSolaris:r(_f),isFreeBSD:r(kf),isChromeOS:r(Lg)}},we={unknown:K,nu:de},ot={detect:(e,n,o)=>{const r=Tf.browsers(),i=Tf.oses(),u=n.bind(x=>xf(r,x)).orThunk(()=>Ho(r,e)).fold(Hi.unknown,Hi.nu),g=$g(i,e).fold(we.unknown,we.nu),y=Zp(g,u,e,o);return{browser:u,os:g,deviceType:y}}},an=e=>window.matchMedia(e).matches;let Do=Ll(()=>ot.detect(navigator.userAgent,Z.from(navigator.userAgentData),an));const ts=()=>Do(),_o=navigator.userAgent,ms=ts(),Xn=ms.browser,Rs=ms.os,ei=ms.deviceType,Hg=_o.indexOf("Windows Phone")!==-1,Et={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Xn.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Xn.isIE(),windowsPhone:Hg,browser:{current:Xn.current,version:Xn.version,isChromium:Xn.isChromium,isEdge:Xn.isEdge,isFirefox:Xn.isFirefox,isIE:Xn.isIE,isOpera:Xn.isOpera,isSafari:Xn.isSafari},os:{current:Rs.current,version:Rs.version,isAndroid:Rs.isAndroid,isChromeOS:Rs.isChromeOS,isFreeBSD:Rs.isFreeBSD,isiOS:Rs.isiOS,isLinux:Rs.isLinux,isMacOS:Rs.isMacOS,isSolaris:Rs.isSolaris,isWindows:Rs.isWindows},deviceType:{isDesktop:ei.isDesktop,isiPad:ei.isiPad,isiPhone:ei.isiPhone,isPhone:ei.isPhone,isTablet:ei.isTablet,isTouch:ei.isTouch,isWebView:ei.isWebView}},Of=/^\s*|\s*$/g,Ms=e=>It(e)?"":(""+e).replace(Of,""),zr=(e,n)=>n?n==="array"&&na(e)?!0:typeof e===n:e!==void 0,Gp=(e,n,o={})=>{const r=Q(e)?e.split(n||","):e||[];let i=r.length;for(;i--;)o[r[i]]={};return o},Ss=cn,Vy=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const i in r)if(cn(r,i)){const u=r[i];u!==void 0&&(e[i]=u)}}return e},Ul=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),Ds(e,(i,u)=>n.call(r,i,u,o)===!1?!1:(Ul(i,n,o,r),!0)))},at={trim:Ms,isArray:na,is:zr,toArray:ir,makeMap:Gp,each:Ds,map:Li,grep:Cm,inArray:il,hasOwn:Ss,extend:Vy,walk:Ul,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,i=o.length;r<i&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>_t(e)?e:e===""?[]:Li(e.split(n||","),Ms),_addCacheSuffix:e=>{const n=Et.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},Ps=(e,n,o=Jt)=>e.exists(r=>o(r,n)),Df=(e,n,o=Jt)=>Mr(e,n,o).getOr(e.isNone()&&n.isNone()),Xs=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},Mr=(e,n,o)=>e.isSome()&&n.isSome()?Z.some(o(e.getOrDie(),n.getOrDie())):Z.none(),Wl=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?Z.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):Z.none(),to=(e,n)=>e?Z.some(n):Z.none(),gi=typeof window<"u"?window:Function("return this;")(),wr=(e,n)=>{let o=n??gi;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},_d=(e,n)=>{const o=e.split(".");return wr(o,n)},fs=(e,n)=>_d(e,n),kd=(e,n)=>{const o=fs(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},qp=Object.getPrototypeOf,Kp=e=>kd("HTMLElement",e),co=e=>{const n=_d("ownerDocument.defaultView",e);return Ge(e)&&(Kp(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(qp(e).constructor.name))},Yp=8,Au=9,cc=11,Fc=1,Rf=3,Jn=e=>e.dom.nodeName.toLowerCase(),lr=e=>e.dom.nodeType,$a=e=>n=>lr(n)===e,ev=e=>lr(e)===Yp||Jn(e)==="#comment",gs=e=>Vr(e)&&co(e.dom),Vr=$a(Fc),Ur=$a(Rf),tv=$a(Au),Xp=$a(cc),zi=e=>n=>Vr(n)&&Jn(n)===e,zg=(e,n,o)=>{if(Q(o)||ut(o)||Fn(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},ns=(e,n,o)=>{zg(e.dom,n,o)},Lc=(e,n)=>{const o=e.dom;Ct(n,(r,i)=>{zg(o,i,r)})},wa=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},ll=(e,n)=>Z.from(wa(e,n)),Du=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},Is=(e,n)=>{e.dom.removeAttribute(n)},Hc=e=>{const n=e.dom.attributes;return n==null||n.length===0},Sm=e=>as(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),Mf=(e,n)=>{const o=wa(e,n);return o===void 0||o===""?[]:o.split(" ")},nv=(e,n,o)=>{const i=Mf(e,n).concat([o]);return ns(e,n,i.join(" ")),!0},ov=(e,n,o)=>{const r=jt(Mf(e,n),i=>i!==o);return r.length>0?ns(e,n,r.join(" ")):Is(e,n),!1},ul=e=>e.dom.classList!==void 0,Vg=e=>Mf(e,"class"),ni=(e,n)=>nv(e,"class",n),Ug=(e,n)=>ov(e,"class",n),sv=(e,n)=>on(Vg(e),n)?Ug(e,n):ni(e,n),Ru=(e,n)=>{ul(e)?e.dom.classList.add(n):ni(e,n)},Jp=e=>{(ul(e)?e.dom.classList:Vg(e)).length===0&&Is(e,"class")},dl=(e,n)=>{ul(e)?e.dom.classList.remove(n):Ug(e,n),Jp(e)},Uy=(e,n)=>{const o=ul(e)?e.dom.classList.toggle(n):sv(e,n);return Jp(e),o},Od=(e,n)=>ul(e)&&e.dom.classList.contains(n),Wy=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const i="HTML does not have a single root node";throw console.error(i,e),new Error(i)}return Pf(r.childNodes[0])},Zy=(e,n)=>{const r=(n||document).createElement(e);return Pf(r)},jy=(e,n)=>{const r=(n||document).createTextNode(e);return Pf(r)},Pf=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},re={fromHtml:Wy,fromTag:Zy,fromText:jy,fromDom:Pf,fromPoint:(e,n,o)=>Z.from(e.dom.elementFromPoint(n,o)).map(Pf)},Mu=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let i=n(e);do i=i.bind(r);while(i.isSome());return o},Vi=(e,n)=>{const o=e.dom;if(o.nodeType!==Fc)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},xm=e=>e.nodeType!==Fc&&e.nodeType!==Au&&e.nodeType!==cc||e.childElementCount===0,Qp=(e,n)=>{const o=n===void 0?document:n.dom;return xm(o)?[]:zt(o.querySelectorAll(e),re.fromDom)},qy=(e,n)=>{const o=n===void 0?document:n.dom;return xm(o)?Z.none():Z.from(o.querySelector(e)).map(re.fromDom)},so=(e,n)=>e.dom===n.dom,Ca=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},ml=e=>re.fromDom(e.dom.ownerDocument),Zl=e=>tv(e)?e:ml(e),Pu=e=>re.fromDom(Zl(e).dom.documentElement),fl=e=>re.fromDom(Zl(e).dom.defaultView),aa=e=>Z.from(e.dom.parentNode).map(re.fromDom),jl=e=>Z.from(e.dom.parentElement).map(re.fromDom),rv=(e,n)=>{const o=ue(n)?n:Xe;let r=e.dom;const i=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,g=re.fromDom(u);if(i.push(g),o(g)===!0)break;r=u}return i},av=e=>{const n=o=>jt(o,r=>!so(e,r));return aa(e).map(ur).map(n).getOr([])},zc=e=>Z.from(e.dom.previousSibling).map(re.fromDom),gl=e=>Z.from(e.dom.nextSibling).map(re.fromDom),e1=e=>os(Mu(e,zc)),Sa=e=>Mu(e,gl),ur=e=>zt(e.dom.childNodes,re.fromDom),Ad=(e,n)=>{const o=e.dom.childNodes;return Z.from(o[n]).map(re.fromDom)},Nf=e=>Ad(e,0),Vc=e=>Ad(e,e.dom.childNodes.length-1),Ia=e=>e.dom.childNodes.length,iv=e=>e.dom.hasChildNodes(),Ky=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return re.fromDom(n)},Wg=e=>Xp(e)&&Te(e.dom.host),Zg=ue(Element.prototype.attachShadow)&&ue(Node.prototype.getRootNode),Em=ft(Zg),hl=Zg?e=>re.fromDom(e.dom.getRootNode()):Zl,cv=e=>Wg(e)?e:Ky(Zl(e)),P2=e=>Wg(e)?e:re.fromDom(Zl(e).dom.body),Yy=e=>{const n=hl(e);return Wg(n)?Z.some(n):Z.none()},Xy=e=>re.fromDom(e.dom.host),Dd=e=>{if(Em()&&Te(e.target)){const n=re.fromDom(e.target);if(Vr(n)&&t1(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return Ks(o)}}return Z.from(e.target)},t1=e=>Te(e.dom.shadowRoot),Tm=e=>{const n=Ur(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return Yy(re.fromDom(n)).fold(()=>o.body.contains(n),fo(Tm,Xy))};var hs=(e,n,o,r,i)=>e(o,r)?Z.some(o):ue(i)&&i(o)?Z.none():n(o,r,i);const xs=(e,n,o)=>{let r=e.dom;const i=ue(o)?o:Xe;for(;r.parentNode;){r=r.parentNode;const u=re.fromDom(r);if(n(u))return Z.some(u);if(i(u))break}return Z.none()},hi=(e,n,o)=>hs((i,u)=>u(i),xs,e,n,o),n1=(e,n)=>{const o=e.dom;return o.parentNode?Jy(re.fromDom(o.parentNode),r=>!so(e,r)&&n(r)):Z.none()},Jy=(e,n)=>{const o=i=>n(re.fromDom(i));return As(e.dom.childNodes,o).map(re.fromDom)},Wr=(e,n)=>{const o=r=>{for(let i=0;i<r.childNodes.length;i++){const u=re.fromDom(r.childNodes[i]);if(n(u))return Z.some(u);const g=o(r.childNodes[i]);if(g.isSome())return g}return Z.none()};return o(e.dom)},Nu=(e,n,o)=>xs(e,r=>Vi(r,n),o),pi=(e,n)=>qy(n,e),pl=(e,n,o)=>hs((i,u)=>Vi(i,u),Nu,e,n,o),lv=e=>pl(e,"[contenteditable]"),xn=(e,n=!1)=>Tm(e)?e.dom.isContentEditable:lv(e).fold(ft(n),o=>oi(o)==="true"),oi=e=>e.dom.contentEditable,Bu=e=>e.style!==void 0&&ue(e.style.getPropertyValue),_m=(e,n,o)=>{if(!Q(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);Bu(e)&&e.style.setProperty(n,o)},o1=(e,n)=>{Bu(e)&&e.style.removeProperty(n)},uv=(e,n,o)=>{const r=e.dom;_m(r,n,o)},xa=(e,n)=>{const o=e.dom;Ct(n,(r,i)=>{_m(o,i,r)})},nr=(e,n)=>{const o=e.dom,i=window.getComputedStyle(o).getPropertyValue(n);return i===""&&!Tm(e)?bi(o,n):i},bi=(e,n)=>Bu(e)?e.style.getPropertyValue(n):"",or=(e,n)=>{const o=e.dom,r=bi(o,n);return Z.from(r).filter(i=>i.length>0)},jg=e=>{const n={},o=e.dom;if(Bu(o))for(let r=0;r<o.style.length;r++){const i=o.style.item(r);n[i]=o.style[i]}return n},km=(e,n)=>{const o=e.dom;o1(o,n),Ps(ll(e,"style").map(zl),"")&&Is(e,"style")},Hs=e=>e.dom.offsetWidth,dr=(e,n)=>{aa(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},Uc=(e,n)=>{gl(e).fold(()=>{aa(e).each(i=>{Js(i,n)})},r=>{dr(r,n)})},Bf=(e,n)=>{Nf(e).fold(()=>{Js(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},Js=(e,n)=>{e.dom.appendChild(n.dom)},s1=(e,n)=>{dr(e,n),Js(n,e)},dv=(e,n)=>{$e(n,(o,r)=>{const i=r===0?e:n[r-1];Uc(i,o)})},ko=(e,n)=>{$e(n,o=>{Js(e,o)})},Rd=e=>{e.dom.textContent="",$e(ur(e),n=>{ho(n)})},ho=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},Wc=e=>{const n=ur(e);n.length>0&&dv(e,n),ho(e)},Gg=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,ur(re.fromDom(r))},$f=e=>zt(e,re.fromDom),Nn=e=>e.dom.innerHTML,Om=(e,n)=>{const r=ml(e).dom,i=re.fromDom(r.createDocumentFragment()),u=Gg(n,r);ko(i,u),Rd(e),Js(e,i)},mv=e=>{const n=re.fromTag("div"),o=re.fromDom(e.dom.cloneNode(!0));return Js(n,o),Nn(n)},r1=(e,n,o,r,i,u,g)=>({target:e,x:n,y:o,stop:r,prevent:i,kill:u,raw:g}),Qy=e=>{const n=re.fromDom(Dd(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),i=R(r,o);return r1(n,e.clientX,e.clientY,o,r,i,e)},ew=(e,n)=>o=>{e(o)&&n(Qy(o))},fv=(e,n,o,r,i)=>{const u=ew(o,r);return e.dom.addEventListener(n,u,i),{unbind:qe(a1,e,n,u,i)}},qg=(e,n,o,r)=>fv(e,n,o,r,!1),a1=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},k=(e,n)=>({left:e,top:n,translate:(r,i)=>k(e+r,n+i)}),$=k,W=e=>{const n=e.getBoundingClientRect();return $(n.left,n.top)},se=(e,n)=>e!==void 0?e:n!==void 0?n:0,fe=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,i=n.documentElement;if(o===e.dom)return $(o.offsetLeft,o.offsetTop);const u=se(r==null?void 0:r.pageYOffset,i.scrollTop),g=se(r==null?void 0:r.pageXOffset,i.scrollLeft),y=se(i.clientTop,o.clientTop),x=se(i.clientLeft,o.clientLeft);return tt(e).translate(g-x,u-y)},tt=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?$(r.offsetLeft,r.offsetTop):Tm(e)?W(n):$(0,0)},Ft=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return $(o,r)},bn=(e,n,o)=>{const i=(o!==void 0?o.dom:document).defaultView;i&&i.scrollTo(e,n)},pn=(e,n)=>{ts().browser.isSafari()&&ue(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},rn=e=>{const n=e===void 0?window:e;return ts().browser.isFirefox()?Z.none():Z.from(n.visualViewport)},ps=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),Pr=e=>{const n=e===void 0?window:e,o=n.document,r=Ft(re.fromDom(o));return rn(n).fold(()=>{const i=n.document.documentElement,u=i.clientWidth,g=i.clientHeight;return ps(r.left,r.top,u,g)},i=>ps(Math.max(i.pageLeft,r.left),Math.max(i.pageTop,r.top),i.width,i.height))},Ui=(e,n)=>jt(ur(e),n),Gl=(e,n)=>{let o=[];return $e(ur(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(Gl(r,n))}),o},Zr=(e,n)=>Qp(n,e),N2=(e,n,o)=>Nu(e,n,o).isSome();class Zo{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,i){if(n){if(!i&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let g=n.parentNode;g&&g!==this.rootNode;g=g.parentNode)if(u=g[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const i=n.parentNode;if(i&&i!==this.rootNode)return i}}}const Ut=e=>n=>!!n&&n.nodeType===e,ql=e=>!!e&&!Object.getPrototypeOf(e),Mt=Ut(1),Am=e=>Mt(e)&&gs(re.fromDom(e)),GM=e=>Mt(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Md=e=>{const n=e.toLowerCase();return o=>Te(o)&&o.nodeName.toLowerCase()===n},mr=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return on(n,r)}return!1}},If=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(Mt(r)){const i=r.ownerDocument.defaultView;if(i)for(let u=0;u<o.length;u++){const g=i.getComputedStyle(r,null);if((g?g.getPropertyValue(e):null)===o[u])return!0}}return!1}},i1=e=>n=>Mt(n)&&n.hasAttribute(e),jr=(e,n)=>o=>Mt(o)&&o.getAttribute(e)===n,Kl=e=>Mt(e)&&e.hasAttribute("data-mce-bogus"),gv=e=>Mt(e)&&e.getAttribute("data-mce-bogus")==="all",$u=e=>Mt(e)&&e.tagName==="TABLE",B2=e=>n=>!!(Am(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),hv=mr(["textarea","input"]),nt=Ut(3),$2=Ut(4),Dm=Ut(7),Pd=Ut(8),c1=Ut(9),Es=Ut(11),No=Md("br"),si=Md("img"),Fa=B2("true"),Un=B2("false"),l1=mr(["td","th"]),ia=mr(["td","th","caption"]),zs=mr(["video","audio","object","embed"]),pv=Md("li"),Ke=Md("details"),Wi=Md("summary"),u1="\uFEFF",ro=" ",Yl=e=>e===u1,Zk=e=>e.replace(/\uFEFF/g,""),tw=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?Z.from(u.dom.nodeValue):Z.none();return{get:o,getOption:r,set:(u,g)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=g}}})(Ur,"text"),Jl=e=>tw.get(e),nw=e=>tw.getOption(e),lc=(e,n)=>tw.set(e,n),po=["td","th"],Iu=["thead","tbody","tfoot"],Ff=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],ca=["li","dd","dt"],ow=["ul","ol","dl"],Lf=["pre","script","textarea","style"],Hf=e=>{let n;return o=>(n=n||Jo(e,yt),cn(n,Jn(o)))},vi=e=>Jn(e)==="table",Rm=e=>Vr(e)&&Jn(e)==="br",_e=Hf(Ff),Zi=Hf(ow),Fu=Hf(ca),Lu=Hf(Iu),ji=Hf(po),Cr=Hf(Lf),Nr=e=>{const n=[];let o=e.dom;for(;o;)n.push(re.fromDom(o)),o=o.lastChild;return n},qM=e=>{const n=Zr(e,"br"),o=jt(Nr(e).slice(-1),Rm);n.length===o.length&&$e(o,ho)},yi=()=>{const e=re.fromTag("br");return ns(e,"data-mce-bogus","1"),e},Hu=e=>{Rd(e),Js(e,yi())},en=(e,n)=>{Vc(e).each(o=>{zc(o).each(r=>{n.isBlock(Jn(e))&&Rm(o)&&n.isBlock(Jn(r))&&ho(o)})})},Gr=u1,Gi=Yl,uc=Zk,jk=e=>e.insertContent(Gr,{preserve_zwsp:!0}),Gk=Mt,Kg=nt,d1=e=>(Kg(e)&&(e=e.parentNode),Gk(e)&&e.hasAttribute("data-mce-caret")),wi=e=>Kg(e)&&Gi(e.data),la=e=>d1(e)||wi(e),sw=e=>e.firstChild!==e.lastChild||!No(e.firstChild),qk=(e,n)=>{var o;const i=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Gr),u=e.parentNode;if(n){const g=e.previousSibling;if(Kg(g)){if(la(g))return g;if(Yg(g))return g.splitText(g.data.length-1)}u==null||u.insertBefore(i,e)}else{const g=e.nextSibling;if(Kg(g)){if(la(g))return g;if(zf(g))return g.splitText(1),g}e.nextSibling?u==null||u.insertBefore(i,e.nextSibling):u==null||u.appendChild(i)}return i},zu=e=>{const n=e.container();return nt(n)?n.data.charAt(e.offset())===Gr||e.isAtStart()&&wi(n.previousSibling):!1},bv=e=>{const n=e.container();return nt(n)?n.data.charAt(e.offset()-1)===Gr||e.isAtEnd()&&wi(n.nextSibling):!1},I2=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(yi().dom);const g=n.parentNode;return o?g==null||g.insertBefore(u,n):n.nextSibling?g==null||g.insertBefore(u,n.nextSibling):g==null||g.appendChild(u),u},zf=e=>Kg(e)&&e.data[0]===Gr,Yg=e=>Kg(e)&&e.data[e.data.length-1]===Gr,F2=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Kl(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},Nd=e=>e&&e.hasAttribute("data-mce-caret")?(F2(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,L2=e=>d1(e.startContainer),H2=Fa,rw=Un,aw=No,qr=nt,Vu=mr(["script","style","textarea"]),Xg=mr(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Vf=mr(["table"]),z2=la,fr=e=>z2(e)?!1:qr(e)?!Vu(e.parentNode):Xg(e)||aw(e)||Vf(e)||Qg(e),Jg=e=>Mt(e)&&e.getAttribute("unselectable")==="true",Qg=e=>!Jg(e)&&rw(e),iw=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(Qg(o))return!1;if(H2(o))return!0}return!0},Bd=e=>Qg(e)?!as(Dr(e.getElementsByTagName("*")),(n,o)=>n||H2(o),!1):!1,qi=e=>Xg(e)||Bd(e),vv=(e,n)=>fr(e)&&iw(e,n),bl=/^[ \t\r\n]*$/,Mm=e=>bl.test(e),Uf=e=>{for(const n of e)if(!Yl(n))return!1;return!0},eh=e=>" \f	\v".indexOf(e)!==-1,$d=e=>e===`
`||e==="\r",Kk=(e,n)=>n<e.length&&n>=0?$d(e[n]):!1,Wf=(e,n=4,o=!0,r=!0)=>{const i=ic(" ",n),u=e.replace(/\t/g,i);return as(u,(y,x)=>eh(x)||x===ro?y.pcIsSpace||y.str===""&&o||y.str.length===u.length-1&&r||Kk(u,y.str.length+1)?{pcIsSpace:!1,str:y.str+ro}:{pcIsSpace:!0,str:y.str+" "}:{pcIsSpace:$d(x),str:y.str+x},{pcIsSpace:!1,str:""}).str},cw=(e,n)=>{const o=re.fromDom(n),r=re.fromDom(e);return N2(r,"pre,code",qe(so,o))},V2=(e,n)=>nt(e)&&Mm(e.data)&&!cw(e,n),Vs=e=>Mt(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),th=(e,n)=>fr(e)&&!V2(e,n)||Vs(e)||Ql(e),Ql=i1("data-mce-bookmark"),Pm=i1("data-mce-bogus"),Zf=jr("data-mce-bogus","all"),jf=e=>jl(re.fromDom(e)).exists(n=>!xn(n)),Ki=(e,n)=>{let o=0;if(th(e,e))return!1;{let r=e.firstChild;if(!r)return!0;const i=new Zo(r,e);do{if(n){if(Zf(r)){r=i.next(!0);continue}if(Pm(r)){r=i.next();continue}}if(Fa(r)&&jf(r))return!1;if(No(r)){o++,r=i.next();continue}if(th(r,e))return!1;r=i.next()}while(r);return o<=1}},Ns=(e,n=!0)=>Ki(e.dom,n),eu=e=>e.toLowerCase()==="svg",lw=e=>eu(e.nodeName),m1=e=>(e==null?void 0:e.nodeName)==="svg"?"svg":"html",yv=["svg"],Nm=()=>{let e=[];const n=()=>e[e.length-1];return{track:u=>{lw(u)&&e.push(u);let g=n();return g&&!g.contains(u)&&(e.pop(),g=n()),m1(g)},current:()=>m1(n()),reset:()=>{e=[]}}},f1="data-mce-block",wv=e=>jt(Rr(e),n=>!/[A-Z]/.test(n)),Uu=e=>zt(wv(e),n=>`${n}:`+zt(yv,o=>`not(${o} ${n})`).join(":")).join(","),tu=(e,n)=>Te(n.querySelector(e))?(n.setAttribute(f1,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(f1),!1),dc=(e,n)=>{const o=Uu(e.getTransparentElements()),r=Uu(e.getBlockElements());return jt(n.querySelectorAll(o),i=>tu(r,i))},Bm=(e,n)=>{var o;const r=n?"lastChild":"firstChild";for(let i=e[r];i;i=i[r])if(Ns(re.fromDom(i))){(o=i.parentNode)===null||o===void 0||o.removeChild(i);return}},$m=(e,n)=>{const o=document.createRange(),r=e.parentNode;if(r){o.setStartBefore(e),o.setEndBefore(n);const i=o.extractContents();Bm(i,!0),o.setStartAfter(n),o.setEndAfter(e);const u=o.extractContents();Bm(u,!1),Ns(re.fromDom(i))||r.insertBefore(i,e),Ns(re.fromDom(n))||r.insertBefore(n,e),Ns(re.fromDom(u))||r.insertBefore(u,e),r.removeChild(e)}},U2=(e,n,o)=>{const r=e.getBlockElements(),i=re.fromDom(n),u=y=>Jn(y)in r,g=y=>so(y,i);$e($f(o),y=>{xs(y,u,g).each(x=>{const A=Ui(y,I=>u(I)&&!e.isValidChild(Jn(x),Jn(I)));if(A.length>0){const I=jl(x);$e(A,F=>{xs(F,u,g).each(V=>{$m(V.dom,F.dom)})}),I.each(F=>dc(e,F.dom))}})})},Cv=(e,n,o)=>{$e([...o,...Ln(e,n)?[n]:[]],r=>$e(Zr(re.fromDom(r),r.nodeName.toLowerCase()),i=>{qt(e,i.dom)&&Wc(i)}))},g1=(e,n)=>{const o=dc(e,n);U2(e,n,o),Cv(e,n,o)},Sv=(e,n)=>{if(p1(e,n)){const o=Uu(e.getBlockElements());tu(o,n)}},W2=(e,n,o)=>{const r=u=>so(u,re.fromDom(n)),i=rv(re.fromDom(o),r);sl(i,i.length-2).filter(Vr).fold(()=>g1(e,n),u=>g1(e,u.dom))},xv=e=>e.hasAttribute(f1),h1=(e,n)=>cn(e.getTransparentElements(),n),p1=(e,n)=>Mt(n)&&h1(e,n.nodeName),Ln=(e,n)=>p1(e,n)&&xv(n),qt=(e,n)=>p1(e,n)&&!xv(n),Id=(e,n)=>n.type===1&&h1(e,n.name)&&Q(n.attr(f1)),Ev=ts().browser,b1=e=>As(e,Vr),Yk=e=>Ev.isFirefox()&&Jn(e)==="table"?b1(ur(e)).filter(n=>Jn(n)==="caption").bind(n=>b1(Sa(n)).map(o=>{const r=o.dom.offsetTop,i=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=i?-u:0})).getOr(0):0,uw=(e,n)=>e.children&&on(e.children,n),zo=(e,n,o)=>{let r=0,i=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&nr(re.fromDom(e),"position")==="static"){const y=n.getBoundingClientRect();return r=y.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,i=y.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:i}}let g=n;for(;g&&g!==o&&g.nodeType&&!uw(g,o);){const y=g;r+=y.offsetLeft||0,i+=y.offsetTop||0,g=y.offsetParent}for(g=n.parentNode;g&&g!==o&&g.nodeType&&!uw(g,o);)r-=g.scrollLeft||0,i-=g.scrollTop||0,g=g.parentNode;i+=Yk(re.fromDom(n))}return{x:r,y:i}},dw=(e,n={})=>{let o=0;const r={},i=re.fromDom(e),u=Zl(i),g=he=>{n.referrerPolicy=he},y=he=>{n.contentCssCors=he},x=he=>{Js(cv(i),he)},A=he=>{const be=cv(i);pi(be,"#"+he).each(ho)},I=he=>Lo(r,he).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),F=he=>new Promise((be,ye)=>{let Ee;const Ye=at._addCacheSuffix(he),st=I(Ye);r[Ye]=st,st.count++;const xt=(Tt,Wt)=>{$e(Tt,ar),st.status=Wt,st.passed=[],st.failed=[],Ee&&(Ee.onload=null,Ee.onerror=null,Ee=null)},Le=()=>xt(st.passed,2),Me=()=>xt(st.failed,3);if(be&&st.passed.push(be),ye&&st.failed.push(ye),st.status===1)return;if(st.status===2){Le();return}if(st.status===3){Me();return}st.status=1;const Qe=re.fromTag("link",u.dom);Lc(Qe,{rel:"stylesheet",type:"text/css",id:st.id}),n.contentCssCors&&ns(Qe,"crossOrigin","anonymous"),n.referrerPolicy&&ns(Qe,"referrerpolicy",n.referrerPolicy),Ee=Qe.dom,Ee.onload=Le,Ee.onerror=Me,x(Qe),ns(Qe,"href",Ye)}),V=(he,be)=>{const ye=I(he);r[he]=ye,ye.count++;const Ee=re.fromTag("style",u.dom);Lc(Ee,{rel:"stylesheet",type:"text/css",id:ye.id}),Ee.dom.innerHTML=be,x(Ee)},J=he=>Promise.allSettled(zt(he,ye=>F(ye).then(ft(ye)))).then(ye=>{const Ee=ws(ye,Ye=>Ye.status==="fulfilled");return Ee.fail.length>0?Promise.reject(zt(Ee.fail,Ye=>Ye.reason)):zt(Ee.pass,Ye=>Ye.value)}),ne=he=>{const be=at._addCacheSuffix(he);Lo(r,be).each(ye=>{--ye.count===0&&(delete r[be],A(ye.id))})};return{load:F,loadRawCss:V,loadAll:J,unload:ne,unloadRawCss:he=>{Lo(r,he).each(be=>{--be.count===0&&(delete r[he],A(be.id))})},unloadAll:he=>{$e(he,be=>{ne(be)})},_setReferrerPolicy:g,_setContentCssCors:y}},fw=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=hl(o).dom;return Z.from(e.get(u)).getOrThunk(()=>{const g=dw(u,r);return e.set(u,g),g})}}})(),We=e=>e.nodeName.toLowerCase()==="span",Tv=(e,n,o)=>Te(e)&&(th(e,n)||o.isInline(e.nodeName.toLowerCase())),Xk=(e,n,o)=>{const r=new Zo(e,n).prev(!1),i=new Zo(e,n).next(!1),u=bt(r)||Tv(r,n,o),g=bt(i)||Tv(i,n,o);return u&&g},v1=e=>We(e)&&e.getAttribute("data-mce-type")==="bookmark",Jk=(e,n,o)=>nt(e)&&e.data.length>0&&Xk(e,n,o),nh=e=>Mt(e)?e.childNodes.length>0:!1,gw=e=>Es(e)||c1(e),Fd=(e,n,o,r)=>{var i;const u=r||n;if(Mt(n)&&v1(n))return n;const g=n.childNodes;for(let y=g.length-1;y>=0;y--)Fd(e,g[y],o,u);if(Mt(n)){const y=n.childNodes;y.length===1&&v1(y[0])&&((i=n.parentNode)===null||i===void 0||i.insertBefore(y[0],n))}return!gw(n)&&!th(n,u)&&!nh(n)&&!Jk(n,u,o)&&e.remove(n),n},Qk=at.makeMap,Wu=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Bo=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Zu=/[<>&\"\']/g,hw=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,vl={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},Ld={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},pw={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Gf=e=>{const n=re.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},Z2=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let i=0;i<r.length;i+=2){const u=String.fromCharCode(parseInt(r[i],n));if(!Ld[u]){const g="&"+r[i+1]+";";o[u]=g,o[g]=u}}return o}else return},_v=Z2("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),bw=(e,n)=>e.replace(n?Wu:Bo,o=>Ld[o]||o),eO=e=>(""+e).replace(Zu,n=>Ld[n]||n),vw=(e,n)=>e.replace(n?Wu:Bo,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":Ld[o]||"&#"+o.charCodeAt(0)+";"),ju=(e,n,o)=>{const r=o||_v;return e.replace(n?Wu:Bo,i=>Ld[i]||r[i]||i)},qf={encodeRaw:bw,encodeAllRaw:eO,encodeNumeric:vw,encodeNamed:ju,getEncodeFunc:(e,n)=>{const o=Z2(n)||_v,r=(g,y)=>g.replace(y?Wu:Bo,x=>Ld[x]!==void 0?Ld[x]:o[x]!==void 0?o[x]:x.length>1?"&#"+((x.charCodeAt(0)-55296)*1024+(x.charCodeAt(1)-56320)+65536)+";":"&#"+x.charCodeAt(0)+";"),i=(g,y)=>ju(g,y,o),u=Qk(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?i:ju:u.numeric?vw:bw},decode:e=>e.replace(hw,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):vl[o]||String.fromCharCode(o)):pw[n]||_v[n]||Gf(n))},ua=(e,n)=>(e=at.trim(e),e?e.split(n||" "):[]),Rt=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),tO=e=>{const n=/^(~)?(.+)$/;return Ya(ua(e,","),o=>{const r=n.exec(o);if(r){const i=r[1]==="~",u=i?"span":"div",g=r[2];return[{inline:i,cloneName:u,name:g}]}else return[]})},ww=e=>{let n,o,r;if(n="id accesskey class dir lang style tabindex title role",o="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"){const u="a ins del canvas map";n+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",o+=" article aside details dialog figure main header footer hgroup section nav "+u,r+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen svg"}e!=="html5-strict"&&(n+=" xml:lang",r=[r,"acronym applet basefont big font strike tt"].join(" "),o=[o,"center dir isindex noframes"].join(" "));const i=[o,r].join(" ");return{globalAttributes:n,blockContent:o,phrasingContent:r,flowContent:i}},nO=e=>{const{globalAttributes:n,phrasingContent:o,flowContent:r}=ww(e),i={},u=(x,A,I)=>{i[x]={attributes:Jo(A,ft({})),attributesOrder:A,children:Jo(I,ft({}))}},g=(x,A="",I="")=>{const F=ua(I),V=ua(x);let J=V.length;const ne=ua([n,A].join(" "));for(;J--;)u(V[J],ne.slice(),F)},y=(x,A)=>{const I=ua(x),F=ua(A);let V=I.length;for(;V--;){const J=i[I[V]];for(let ne=0,Y=F.length;ne<Y;ne++)J.attributes[F[ne]]={},J.attributesOrder.push(F[ne])}};return e!=="html5-strict"&&($e(ua("acronym applet basefont big font strike tt"),I=>{g(I,"",o)}),$e(ua("center dir isindex noframes"),I=>{g(I,"",r)})),g("html","manifest","head body"),g("head","","base command link meta noscript script style title"),g("title hr noscript br"),g("base","href target"),g("link","href rel media hreflang type sizes hreflang"),g("meta","name http-equiv content charset"),g("style","media type scoped"),g("script","src async defer type charset"),g("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),g("dd div","",r),g("address dt caption","",e==="html4"?o:r),g("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),g("blockquote","cite",r),g("ol","reversed start type","li"),g("ul","","li"),g("li","value",r),g("dl","","dt dd"),g("a","href target rel media hreflang type",e==="html4"?o:r),g("q","cite",o),g("ins del","cite datetime",r),g("img","src sizes srcset alt usemap ismap width height"),g("iframe","src name width height",r),g("embed","src type width height"),g("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),g("param","name value"),g("map","name",[r,"area"].join(" ")),g("area","alt coords shape href target rel media hreflang type"),g("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),g("colgroup","span","col"),g("col","span"),g("tbody thead tfoot","","tr"),g("tr","","td th"),g("td","colspan rowspan headers",r),g("th","colspan rowspan headers scope abbr",r),g("form","accept-charset action autocomplete enctype method name novalidate target",r),g("fieldset","disabled form name",[r,"legend"].join(" ")),g("label","form for",o),g("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),g("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),g("select","disabled form multiple name required size","option optgroup"),g("optgroup","disabled label","option"),g("option","disabled label selected value"),g("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),g("menu","type label",[r,"li"].join(" ")),g("noscript","",r),e!=="html4"&&(g("wbr"),g("ruby","",[o,"rt rp"].join(" ")),g("figcaption","",r),g("mark rt rp bdi","",o),g("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),g("canvas","width height",r),g("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),g("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),g("picture","","img source"),g("source","src srcset type media sizes"),g("track","kind src srclang label default"),g("datalist","",[o,"option"].join(" ")),g("article section nav aside main header footer","",r),g("hgroup","","h1 h2 h3 h4 h5 h6"),g("figure","",[r,"figcaption"].join(" ")),g("time","datetime",o),g("dialog","open",r),g("command","type label icon disabled checked radiogroup command"),g("output","for form name",o),g("progress","value max",o),g("meter","value min max low high optimum",o),g("details","open",[r,"summary"].join(" ")),g("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(y("script","language xml:space"),y("style","xml:space"),y("object","declare classid code codebase codetype archive standby align border hspace vspace"),y("embed","align name hspace vspace"),y("param","valuetype type"),y("a","charset name rev shape coords"),y("br","clear"),y("applet","codebase archive code object alt name width height align hspace vspace"),y("img","name longdesc align border hspace vspace"),y("iframe","longdesc frameborder marginwidth marginheight scrolling align"),y("font basefont","size color face"),y("input","usemap align"),y("select"),y("textarea"),y("h1 h2 h3 h4 h5 h6 div p legend caption","align"),y("ul","type compact"),y("li","type"),y("ol dl menu dir","compact"),y("pre","width xml:space"),y("hr","align noshade size width"),y("isindex","prompt"),y("table","summary width frame rules cellspacing cellpadding align bgcolor"),y("col","width align char charoff valign"),y("colgroup","width align char charoff valign"),y("thead","align char charoff valign"),y("tr","align char charoff valign bgcolor"),y("th","axis align char charoff valign nowrap bgcolor width height"),y("form","accept"),y("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),y("tfoot","align char charoff valign"),y("tbody","align char charoff valign"),y("area","nohref"),y("body","background bgcolor text link vlink alink")),e!=="html4"&&(y("input button select textarea","autofocus"),y("input textarea","placeholder"),y("a","download"),y("link script img","crossorigin"),y("img","loading"),y("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&$e([i.video,i.audio],x=>{delete x.children.audio,delete x.children.video}),$e(ua("a form meter progress dfn"),x=>{i[x]&&delete i[x].children[x]}),delete i.caption.children.table,delete i.script,i},j2=e=>e==="-"?"remove":"add",Kf=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return Ya(ua(e,","),o=>{const r=n.exec(o);if(r){const i=r[1],u=i?j2(i):"replace",g=r[2],y=ua(r[3],"|");return[{operation:u,name:g,validChildren:y}]}else return[]})},oh=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:i,attributesOrder:u}=n;return $e(ua(e,"|"),g=>{const y=o.exec(g);if(y){const x={},A=y[1],I=y[2].replace(/[\\:]:/g,":"),F=y[3],V=y[4];if(A==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(I),x.required=!0),A==="-"){delete i[I],u.splice(at.inArray(u,I),1);return}if(F&&(F==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:I,value:V}),x.defaultValue=V):F==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:I,value:V}),x.forcedValue=V):F==="<"&&(x.validValues=at.makeMap(V,"?"))),r.test(I)){const J=x;n.attributePatterns=n.attributePatterns||[],J.pattern=Rt(I),n.attributePatterns.push(J)}else i[I]||u.push(I),i[I]=x}})},y1=(e,n)=>{Ct(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},sh=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return Ya(ua(n,","),r=>{const i=o.exec(r);if(i){const u=i[1],g=i[2],y=i[3],x=i[4],A=i[5],I={attributes:{},attributesOrder:[]};if(e.each(F=>y1(F,I)),u==="#"?I.paddEmpty=!0:u==="-"&&(I.removeEmpty=!0),x==="!"&&(I.removeEmptyAttrs=!0),A&&oh(A,I),y&&(I.outputName=g),g==="@")if(e.isNone())e=Z.some(I);else return[];return[y?{name:g,element:I,aliasName:y}:{name:g,element:I}]}else return[]})},kv={},Hd=at.makeMap,nu=at.each,w1=at.extend,Zc=at.explode,Ov=(e,n={})=>{const o=Hd(e," ",Hd(e.toUpperCase()," "));return w1(o,n)},G2=e=>Ov("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),rh=(e,n)=>{if(e){const o={};return Q(e)&&(e={"*":e}),nu(e,(r,i)=>{o[i]=o[i.toUpperCase()]=n==="map"?Hd(r,/[, ]/):Zc(r,/[, ]/)}),o}else return},zd=(e={})=>{var n;const o={},r={};let i=[];const u={},g={},y=(wn,jn,mo)=>{const ks=e[wn];if(ks)return Hd(ks,/[, ]/,Hd(ks.toUpperCase(),/[, ]/));{let Bs=kv[wn];return Bs||(Bs=Ov(jn,mo),kv[wn]=Bs),Bs}},x=(n=e.schema)!==null&&n!==void 0?n:"html5",A=nO(x);e.verify_html===!1&&(e.valid_elements="*[*]");const I=rh(e.valid_styles),F=rh(e.invalid_styles,"map"),V=rh(e.valid_classes,"map"),J=y("whitespace_elements","pre script noscript style textarea video audio iframe object code"),ne=y("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),Y=y("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),oe=y("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),he="td th iframe video audio object script code",be=y("non_empty_elements",he+" pre svg",Y),ye=y("move_caret_before_on_enter_elements",he+" table",Y),Ee="h1 h2 h3 h4 h5 h6",Ye=y("text_block_elements",Ee+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),st=y("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",Ye),xt=y("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Le=y("transparent_elements","a ins del canvas map"),Me=y("wrap_block_elements","pre "+Ee);nu("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),wn=>{g[wn]=new RegExp("</"+wn+"[^>]*>","gi")});const Qe=wn=>{const jn=Z.from(o["@"]),mo=/[*?+]/;$e(sh(jn,wn??""),({name:ks,element:Bs,aliasName:Cu})=>{if(Cu&&(o[Cu]=Bs),mo.test(ks)){const Oy=Bs;Oy.pattern=Rt(ks),i.push(Oy)}else o[ks]=Bs})},Tt=wn=>{i=[],$e(Rr(o),jn=>{delete o[jn]}),Qe(wn)},Wt=wn=>{delete kv.text_block_elements,delete kv.block_elements,$e(tO(wn??""),({inline:jn,name:mo,cloneName:ks})=>{if(r[mo]=r[ks],u[mo]=ks,be[mo.toUpperCase()]={},be[mo]={},jn||(st[mo.toUpperCase()]={},st[mo]={}),!o[mo]){let Bs=o[ks];Bs=w1({},Bs),delete Bs.removeEmptyAttrs,delete Bs.removeEmpty,o[mo]=Bs}Ct(r,(Bs,Cu)=>{Bs[ks]&&(r[Cu]=Bs=w1({},r[Cu]),Bs[mo]=Bs[ks])})})},Sn=wn=>{$e(Kf(wn??""),({operation:jn,name:mo,validChildren:ks})=>{const Bs=jn==="replace"?{"#comment":{}}:r[mo];$e(ks,Cu=>{jn==="remove"?delete Bs[Cu]:Bs[Cu]={}}),r[mo]=Bs})},Mn=wn=>{const jn=o[wn];if(jn)return jn;let mo=i.length;for(;mo--;){const ks=i[mo];if(ks.pattern.test(wn))return ks}};e.valid_elements?(Tt(e.valid_elements),nu(A,(wn,jn)=>{r[jn]=wn.children})):(nu(A,(wn,jn)=>{o[jn]={attributes:wn.attributes,attributesOrder:wn.attributesOrder},r[jn]=wn.children}),nu(ua("strong/b em/i"),wn=>{const jn=ua(wn,"/");o[jn[1]].outputName=jn[0]}),nu(xt,(wn,jn)=>{o[jn]&&(e.padd_empty_block_inline_children&&(o[jn].paddInEmptyBlock=!0),o[jn].removeEmpty=!0)}),nu(ua("ol ul blockquote a table tbody"),wn=>{o[wn]&&(o[wn].removeEmpty=!0)}),nu(ua("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),wn=>{o[wn]&&(o[wn].paddEmpty=!0)}),nu(ua("span"),wn=>{o[wn].removeEmptyAttrs=!0})),delete o.svg,Wt(e.custom_elements),Sn(e.valid_children),Qe(e.extended_valid_elements),Sn("+ol[ul|ol],+ul[ul|ol]"),nu({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(wn,jn)=>{o[jn]&&(o[jn].parentsRequired=ua(wn))}),e.invalid_elements&&nu(Zc(e.invalid_elements),wn=>{o[wn]&&delete o[wn]}),Mn("span")||Qe("span[!data-mce-type|*]");const Ao=ft(I),qo=ft(F),Gs=ft(V),Ra=ft(oe),Jr=ft(st),mt=ft(Ye),kt=ft(xt),no=ft(Object.seal(Y)),qn=ft(ne),Lt=ft(be),Ht=ft(ye),it=ft(J),hn=ft(Le),Zn=ft(Me),Mo=ft(Object.seal(g)),Ko=(wn,jn)=>{const mo=r[wn.toLowerCase()];return!!(mo&&mo[jn.toLowerCase()])},Ri=(wn,jn)=>{const mo=Mn(wn);if(mo)if(jn){if(mo.attributes[jn])return!0;const ks=mo.attributePatterns;if(ks){let Bs=ks.length;for(;Bs--;)if(ks[Bs].pattern.test(jn))return!0}}else return!0;return!1},Qc=wn=>cn(Jr(),wn),pf=wn=>!$s(wn,"#")&&Ri(wn)&&!Qc(wn),Mi=wn=>cn(Zn(),wn)||pf(wn),gd=ft(u);return{type:x,children:r,elements:o,getValidStyles:Ao,getValidClasses:Gs,getBlockElements:Jr,getInvalidStyles:qo,getVoidElements:no,getTextBlockElements:mt,getTextInlineElements:kt,getBoolAttrs:Ra,getElementRule:Mn,getSelfClosingElements:qn,getNonEmptyElements:Lt,getMoveCaretBeforeOnEnterElements:Ht,getWhitespaceElements:it,getTransparentElements:hn,getSpecialElements:Mo,isValidChild:Ko,isValid:Ri,isBlock:Qc,isInline:pf,isWrapper:Mi,getCustomElements:gd,addValidElements:Qe,setValidElements:Tt,addCustomElements:Wt,addValidChildren:Sn}},oO=e=>({value:ah(e)}),ah=e=>Ed(e,"#").toUpperCase(),Yf=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},yl=e=>{const n=Yf(e.red)+Yf(e.green)+Yf(e.blue);return oO(n)},Yi=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,sO=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,q2=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),K2=(e,n,o,r)=>{const i=parseInt(e,10),u=parseInt(n,10),g=parseInt(o,10),y=parseFloat(r);return q2(i,u,g,y)},Cw=e=>{if(e==="transparent")return Z.some(q2(0,0,0,0));const n=Yi.exec(e);if(n!==null)return Z.some(K2(n[1],n[2],n[3],"1"));const o=sO.exec(e);return o!==null?Z.some(K2(o[1],o[2],o[3],o[4])):Z.none()},Xi=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,ih=e=>Cw(e).map(yl).map(n=>"#"+n.value).getOr(e),Av=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,i=/\s+$/,u={};let g,y;const x=u1;n&&(g=n.getValidStyles(),y=n.getInvalidStyles());const A=(`\\" \\' \\; \\: ; : `+x).split(" ");for(let F=0;F<A.length;F++)u[A[F]]=x+F,u[x+F]=A[F];const I={parse:F=>{const V={};let J=!1;const ne=e.url_converter,Y=e.url_converter_scope||I,oe=(Le,Me,Qe)=>{const Tt=V[Le+"-top"+Me];if(!Tt)return;const Wt=V[Le+"-right"+Me];if(!Wt)return;const Sn=V[Le+"-bottom"+Me];if(!Sn)return;const Mn=V[Le+"-left"+Me];if(!Mn)return;const Ao=[Tt,Wt,Sn,Mn];let qo=Ao.length-1;for(;qo--&&Ao[qo]===Ao[qo+1];);qo>-1&&Qe||(V[Le+Me]=qo===-1?Ao[0]:Ao.join(" "),delete V[Le+"-top"+Me],delete V[Le+"-right"+Me],delete V[Le+"-bottom"+Me],delete V[Le+"-left"+Me])},he=Le=>{const Me=V[Le];if(!Me)return;const Qe=Me.indexOf(",")>-1?[Me]:Me.split(" ");let Tt=Qe.length;for(;Tt--;)if(Qe[Tt]!==Qe[0])return!1;return V[Le]=Qe[0],!0},be=(Le,Me,Qe,Tt)=>{he(Me)&&he(Qe)&&he(Tt)&&(V[Le]=V[Me]+" "+V[Qe]+" "+V[Tt],delete V[Me],delete V[Qe],delete V[Tt])},ye=Le=>(J=!0,u[Le]),Ee=(Le,Me)=>(J&&(Le=Le.replace(/\uFEFF[0-9]/g,Qe=>u[Qe])),Me||(Le=Le.replace(/\\([\'\";:])/g,"$1")),Le),Ye=Le=>String.fromCharCode(parseInt(Le.slice(1),16)),st=Le=>Le.replace(/\\[0-9a-f]+/gi,Ye),xt=(Le,Me,Qe,Tt,Wt,Sn)=>{if(Wt=Wt||Sn,Wt)return Wt=Ee(Wt),"'"+Wt.replace(/\'/g,"\\'")+"'";if(Me=Ee(Me||Qe||Tt||""),!e.allow_script_urls){const Mn=Me.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Mn)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Mn))return""}return ne&&(Me=ne.call(Y,Me,"style")),"url('"+Me.replace(/\'/g,"\\'")+"')"};if(F){F=F.replace(/[\u0000-\u001F]/g,""),F=F.replace(/\\[\"\';:\uFEFF]/g,ye).replace(/\"[^\"]+\"|\'[^\']+\'/g,Me=>Me.replace(/[;:]/g,ye));let Le;for(;Le=r.exec(F);){r.lastIndex=Le.index+Le[0].length;let Me=Le[1].replace(i,"").toLowerCase(),Qe=Le[2].replace(i,"");if(Me&&Qe){if(Me=st(Me),Qe=st(Qe),Me.indexOf(x)!==-1||Me.indexOf('"')!==-1||!e.allow_script_urls&&(Me==="behavior"||/expression\s*\(|\/\*|\*\//.test(Qe)))continue;Me==="font-weight"&&Qe==="700"?Qe="bold":(Me==="color"||Me==="background-color")&&(Qe=Qe.toLowerCase()),Q(e.force_hex_color)&&e.force_hex_color!=="off"&&Cw(Qe).each(Tt=>{(e.force_hex_color==="always"||Tt.alpha===1)&&(Qe=ih(Xi(Tt)))}),Qe=Qe.replace(o,xt),V[Me]=J?Ee(Qe,!0):Qe}}oe("border","",!0),oe("border","-width"),oe("border","-color"),oe("border","-style"),oe("padding",""),oe("margin",""),be("border","border-width","border-style","border-color"),V.border==="medium none"&&delete V.border,V["border-image"]==="none"&&delete V["border-image"]}return V},serialize:(F,V)=>{let J="";const ne=(oe,he)=>{const be=he[oe];if(be)for(let ye=0,Ee=be.length;ye<Ee;ye++){const Ye=be[ye],st=F[Ye];st&&(J+=(J.length>0?" ":"")+Ye+": "+st+";")}},Y=(oe,he)=>{if(!y||!he)return!0;let be=y["*"];return be&&be[oe]?!1:(be=y[he],!(be&&be[oe]))};return V&&g?(ne("*",g),ne(V,g)):Ct(F,(oe,he)=>{oe&&Y(he,V)&&(J+=(J.length>0?" ":"")+he+": "+oe+";")}),J}};return I},Dv={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},rO=e=>e instanceof Event||ue(e.initEvent),Y2=e=>e.isDefaultPrevented===yt||e.isDefaultPrevented===Xe,Sw=e=>It(e.preventDefault)||rO(e),ch=(e,n)=>{const o=n??{};for(const r in e)cn(Dv,r)||(o[r]=e[r]);return Te(e.composedPath)&&(o.composedPath=()=>e.composedPath()),Te(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),Te(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},lh=(e,n,o,r)=>{var i;const u=ch(n,r);return u.type=e,It(u.target)&&(u.target=(i=u.srcElement)!==null&&i!==void 0?i:o),Sw(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=yt,ue(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=yt,ue(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=yt,u.stopPropagation()},Y2(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?yt:Xe,u.isPropagationStopped=u.cancelBubble===!0?yt:Xe,u.isImmediatePropagationStopped=Xe)),u},Rv="mce-data-",aO=/^(?:mouse|contextmenu)|click/,Mv=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},uh=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},iO=e=>Te(e)&&aO.test(e.type),C1=(e,n)=>{const o=lh(e.type,e,document,n);if(iO(e)&&bt(e.pageX)&&!bt(e.clientX)){const r=o.target.ownerDocument||document,i=r.documentElement,u=r.body,g=o;g.pageX=e.clientX+(i&&i.scrollLeft||u&&u.scrollLeft||0)-(i&&i.clientLeft||u&&u.clientLeft||0),g.pageY=e.clientY+(i&&i.scrollTop||u&&u.scrollTop||0)-(i&&i.clientTop||u&&u.clientTop||0)}return o},xw=(e,n,o)=>{const r=e.document,i={type:"ready"};if(o.domLoaded){n(i);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,g=()=>{uh(e,"DOMContentLoaded",g),uh(e,"load",g),o.domLoaded||(o.domLoaded=!0,n(i)),e=null};u()?g():Mv(e,"DOMContentLoaded",g),o.domLoaded||Mv(e,"load",g)};class Ji{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=Rv+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,i){const u=this;let g;const y=window,x=V=>{u.executeHandlers(C1(V||y.event),A)};if(!n||nt(n)||Pd(n))return r;let A;n[u.expando]?A=n[u.expando]:(A=u.count++,n[u.expando]=A,u.events[A]={}),i=i||n;const I=o.split(" ");let F=I.length;for(;F--;){let V=I[F],J=x,ne=!1,Y=!1;if(V==="DOMContentLoaded"&&(V="ready"),u.domLoaded&&V==="ready"&&n.readyState==="complete"){r.call(i,C1({type:V}));continue}!u.hasFocusIn&&(V==="focusin"||V==="focusout")&&(ne=!0,Y=V==="focusin"?"focus":"blur",J=oe=>{const he=C1(oe||y.event);he.type=he.type==="focus"?"focusin":"focusout",u.executeHandlers(he,A)}),g=u.events[A][V],g?V==="ready"&&u.domLoaded?r(C1({type:V})):g.push({func:r,scope:i}):(u.events[A][V]=g=[{func:r,scope:i}],g.fakeName=Y,g.capture=ne,g.nativeHandler=J,V==="ready"?xw(n,J,u):Mv(n,Y||V,J,ne))}return n=g=null,r}unbind(n,o,r){if(!n||nt(n)||Pd(n))return this;const i=n[this.expando];if(i){let u=this.events[i];if(o){const g=o.split(" ");let y=g.length;for(;y--;){const x=g[y],A=u[x];if(A){if(r){let I=A.length;for(;I--;)if(A[I].func===r){const F=A.nativeHandler,V=A.fakeName,J=A.capture,ne=A.slice(0,I).concat(A.slice(I+1));ne.nativeHandler=F,ne.fakeName=V,ne.capture=J,u[x]=ne}}(!r||A.length===0)&&(delete u[x],uh(n,A.fakeName||x,A.nativeHandler,A.capture))}}}else Ct(u,(g,y)=>{uh(n,g.fakeName||y,g.nativeHandler,g.capture)}),u={};for(const g in u)if(cn(u,g))return this;delete this.events[i];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||nt(n)||Pd(n))return this;const i=C1({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(i,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!i.isPropagationStopped());return this}clean(n){if(!n||nt(n)||Pd(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],i=r&&r[n.type];if(i)for(let u=0,g=i.length;u<g;u++){const y=i[u];if(y&&y.func.call(y.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Ji.Event=new Ji;const Pv=at.each,X2=at.grep,Nv="data-mce-style",YM=at.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Bv=(e,n,o)=>{It(o)||o===""?Is(e,n):ns(e,n,o)},Im=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),Gu=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,i=e.previousSibling;i;i=i.previousSibling){const u=i.nodeType;n&&nt(i)&&(u===r||!i.data.length)||(o++,r=u)}return o},Ew=(e,n)=>{const o=wa(n,"style"),r=e.serialize(e.parse(o),Jn(n));Bv(n,Nv,r)},dh=(e,n)=>Fn(e)?cn(YM,n)?e+"":e+"px":e,$v=(e,n,o)=>{const r=Im(n);It(o)||o===""?km(e,r):uv(e,r,dh(o,r))},J2=(e,n,o)=>{const r=n.keep_values,i={set:(g,y,x)=>{const A=re.fromDom(g);ue(n.url_converter)&&Te(y)&&(y=n.url_converter.call(n.url_converter_scope||o(),String(y),x,g));const I="data-mce-"+x;Bv(A,I,y),Bv(A,x,y)},get:(g,y)=>{const x=re.fromDom(g);return wa(x,"data-mce-"+y)||wa(x,y)}},u={style:{set:(g,y)=>{const x=re.fromDom(g);r&&Bv(x,Nv,y),Is(x,"style"),Q(y)&&xa(x,e.parse(y))},get:g=>{const y=re.fromDom(g),x=wa(y,Nv)||wa(y,"style");return e.serialize(e.parse(x),Jn(y))}}};return r&&(u.href=u.src=i),u},jo=(e,n={})=>{const o={},r=window,i={};let u=0;const g=!0,y=!0,x=fw.forElement(re.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),A=[],I=n.schema?n.schema:zd({}),F=Av({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope,force_hex_color:n.force_hex_color},n.schema),V=n.ownEvents?new Ji:Ji.Event,J=I.getBlockElements(),ne=Ae=>Q(Ae)?cn(J,Ae):Mt(Ae)&&(cn(J,Ae.nodeName)||Ln(I,Ae)),Y=Ae=>Ae&&e&&Q(Ae)?e.getElementById(Ae):Ae,oe=Ae=>{const Re=Y(Ae);return Te(Re)?re.fromDom(Re):null},he=(Ae,Re,dt="")=>{let rt;const Yt=oe(Ae);if(Te(Yt)&&Vr(Yt)){const Vn=v2[Re];Vn&&Vn.get?rt=Vn.get(Yt.dom,Re):rt=wa(Yt,Re)}return Te(rt)?rt:dt},be=Ae=>{const Re=Y(Ae);return It(Re)?[]:Re.attributes},ye=(Ae,Re,dt)=>{kt(Ae,rt=>{if(Mt(rt)){const Yt=re.fromDom(rt),Vn=dt===""?null:dt,Os=wa(Yt,Re),br=v2[Re];br&&br.set?br.set(Yt.dom,Vn,Re):Bv(Yt,Re,Vn),Os!==Vn&&n.onSetAttrib&&n.onSetAttrib({attrElm:Yt.dom,attrName:Re,attrValue:Vn})}})},Ee=(Ae,Re)=>Ae.cloneNode(Re),Ye=()=>n.root_element||e.body,st=Ae=>{const Re=Pr(Ae);return{x:Re.x,y:Re.y,w:Re.width,h:Re.height}},xt=(Ae,Re)=>zo(e.body,Y(Ae),Re),Le=(Ae,Re,dt)=>{kt(Ae,rt=>{const Yt=re.fromDom(rt);$v(Yt,Re,dt),n.update_styles&&Ew(F,Yt)})},Me=(Ae,Re)=>{kt(Ae,dt=>{const rt=re.fromDom(dt);Ct(Re,(Yt,Vn)=>{$v(rt,Vn,Yt)}),n.update_styles&&Ew(F,rt)})},Qe=(Ae,Re,dt)=>{const rt=Y(Ae);if(!(It(rt)||!Am(rt)&&!GM(rt)))return dt?nr(re.fromDom(rt),Im(Re)):(Re=Re.replace(/-(\D)/g,(Yt,Vn)=>Vn.toUpperCase()),Re==="float"&&(Re="cssFloat"),rt.style?rt.style[Re]:void 0)},Tt=Ae=>{const Re=Y(Ae);if(!Re)return{w:0,h:0};let dt=Qe(Re,"width"),rt=Qe(Re,"height");return(!dt||dt.indexOf("px")===-1)&&(dt="0"),(!rt||rt.indexOf("px")===-1)&&(rt="0"),{w:parseInt(dt,10)||Re.offsetWidth||Re.clientWidth,h:parseInt(rt,10)||Re.offsetHeight||Re.clientHeight}},Wt=Ae=>{const Re=Y(Ae),dt=xt(Re),rt=Tt(Re);return{x:dt.x,y:dt.y,w:rt.w,h:rt.h}},Sn=(Ae,Re)=>{if(!Ae)return!1;const dt=_t(Ae)?Ae:[Ae];return Po(dt,rt=>Vi(re.fromDom(rt),Re))},Mn=(Ae,Re,dt,rt)=>{const Yt=[];let Vn=Y(Ae);rt=rt===void 0;const Os=dt||(Ye().nodeName!=="BODY"?Ye().parentNode:null);if(Q(Re))if(Re==="*")Re=Mt;else{const br=Re;Re=Or=>Sn(Or,br)}for(;Vn&&!(Vn===Os||It(Vn.nodeType)||c1(Vn)||Es(Vn));){if(!Re||Re(Vn))if(rt)Yt.push(Vn);else return[Vn];Vn=Vn.parentNode}return rt?Yt:null},Ao=(Ae,Re,dt)=>{const rt=Mn(Ae,Re,dt,!1);return rt&&rt.length>0?rt[0]:null},qo=(Ae,Re,dt)=>{let rt=Re;if(Ae){Q(Re)&&(rt=Yt=>Sn(Yt,Re));for(let Yt=Ae[dt];Yt;Yt=Yt[dt])if(ue(rt)&&rt(Yt))return Yt}return null},Gs=(Ae,Re)=>qo(Ae,Re,"nextSibling"),Ra=(Ae,Re)=>qo(Ae,Re,"previousSibling"),Jr=Ae=>ue(Ae.querySelectorAll),mt=(Ae,Re)=>{var dt,rt;const Yt=(rt=(dt=Y(Re))!==null&&dt!==void 0?dt:n.root_element)!==null&&rt!==void 0?rt:e;return Jr(Yt)?Dr(Yt.querySelectorAll(Ae)):[]},kt=function(Ae,Re,dt){const rt=dt??this;if(_t(Ae)){const Yt=[];return Pv(Ae,(Vn,Os)=>{const br=Y(Vn);br&&Yt.push(Re.call(rt,br,Os))}),Yt}else{const Yt=Y(Ae);return Yt?Re.call(rt,Yt):!1}},no=(Ae,Re)=>{kt(Ae,dt=>{Ct(Re,(rt,Yt)=>{ye(dt,Yt,rt)})})},qn=(Ae,Re)=>{kt(Ae,dt=>{const rt=re.fromDom(dt);Om(rt,Re)})},Lt=(Ae,Re,dt,rt,Yt)=>kt(Ae,Vn=>{const Os=Q(Re)?e.createElement(Re):Re;return Te(dt)&&no(Os,dt),rt&&(!Q(rt)&&rt.nodeType?Os.appendChild(rt):Q(rt)&&qn(Os,rt)),Yt?Os:Vn.appendChild(Os)}),Ht=(Ae,Re,dt)=>Lt(e.createElement(Ae),Ae,Re,dt,!0),it=qf.decode,hn=qf.encodeAllRaw,Zn=(Ae,Re,dt="")=>{let rt="<"+Ae;for(const Yt in Re)va(Re,Yt)&&(rt+=" "+Yt+'="'+hn(Re[Yt])+'"');return sa(dt)&&cn(I.getVoidElements(),Ae)?rt+" />":rt+">"+dt+"</"+Ae+">"},Mo=Ae=>{const Re=e.createElement("div"),dt=e.createDocumentFragment();dt.appendChild(Re),Ae&&(Re.innerHTML=Ae);let rt;for(;rt=Re.firstChild;)dt.appendChild(rt);return dt.removeChild(Re),dt},Ko=(Ae,Re)=>kt(Ae,dt=>{const rt=re.fromDom(dt);return Re&&$e(ur(rt),Yt=>{Ur(Yt)&&Yt.dom.length===0?ho(Yt):dr(rt,Yt)}),ho(rt),rt.dom}),Ri=Ae=>kt(Ae,Re=>{const dt=Re.attributes;for(let rt=dt.length-1;rt>=0;rt--)Re.removeAttributeNode(dt.item(rt))}),Qc=Ae=>F.parse(Ae),pf=(Ae,Re)=>F.serialize(Ae,Re),Mi=Ae=>{if(Ag!==jo.DOM&&e===document){if(o[Ae])return;o[Ae]=!0}let Re=e.getElementById("mceDefaultStyles");if(!Re){Re=e.createElement("style"),Re.id="mceDefaultStyles",Re.type="text/css";const dt=e.head;dt.firstChild?dt.insertBefore(Re,dt.firstChild):dt.appendChild(Re)}Re.styleSheet?Re.styleSheet.cssText+=Ae:Re.appendChild(e.createTextNode(Ae))},gd=Ae=>{Ae||(Ae=""),$e(Ae.split(","),Re=>{i[Re]=!0,x.load(Re).catch(Dt)})},wn=(Ae,Re,dt)=>{kt(Ae,rt=>{if(Mt(rt)){const Yt=re.fromDom(rt),Vn=Re.split(" ");$e(Vn,Os=>{Te(dt)?(dt?Ru:dl)(Yt,Os):Uy(Yt,Os)})}})},jn=(Ae,Re)=>{wn(Ae,Re,!0)},mo=(Ae,Re)=>{wn(Ae,Re,!1)},ks=(Ae,Re)=>{const dt=oe(Ae),rt=Re.split(" ");return Te(dt)&&tr(rt,Yt=>Od(dt,Yt))},Bs=Ae=>{kt(Ae,Re=>km(re.fromDom(Re),"display"))},Cu=Ae=>{kt(Ae,Re=>uv(re.fromDom(Re),"display","none"))},Oy=Ae=>{const Re=oe(Ae);return Te(Re)&&Ps(or(Re,"display"),"none")},Ay=Ae=>(Ae||"mce_")+u++,bf=Ae=>{const Re=oe(Ae);return Te(Re)?Mt(Re.dom)?Re.dom.outerHTML:mv(Re):""},vf=(Ae,Re)=>{kt(Ae,dt=>{Mt(dt)&&(dt.outerHTML=Re)})},Dp=(Ae,Re)=>{const dt=Y(Re);return kt(Ae,rt=>{const Yt=dt==null?void 0:dt.parentNode,Vn=dt==null?void 0:dt.nextSibling;return Yt&&(Vn?Yt.insertBefore(rt,Vn):Yt.appendChild(rt)),rt})},Dy=(Ae,Re,dt)=>kt(Re,rt=>{var Yt;const Vn=_t(Re)?Ae.cloneNode(!0):Ae;return dt&&Pv(X2(rt.childNodes),Os=>{Vn.appendChild(Os)}),(Yt=rt.parentNode)===null||Yt===void 0||Yt.replaceChild(Vn,rt),rt}),p2=(Ae,Re)=>{if(Ae.nodeName!==Re.toUpperCase()){const dt=Ht(Re);return Pv(be(Ae),rt=>{ye(dt,rt.nodeName,he(Ae,rt.nodeName))}),Dy(dt,Ae,!0),dt}else return Ae},vk=(Ae,Re)=>{let dt=Ae;for(;dt;){let rt=Re;for(;rt&&dt!==rt;)rt=rt.parentNode;if(dt===rt)break;dt=dt.parentNode}return!dt&&Ae.ownerDocument?Ae.ownerDocument.documentElement:dt},Ub=Ae=>{if(Mt(Ae)){const Re=Ae.nodeName.toLowerCase()==="a"&&!he(Ae,"href")&&he(Ae,"id");if(he(Ae,"name")||he(Ae,"data-mce-bookmark")||Re)return!0}return!1},yk=(Ae,Re,dt)=>{let rt=0;if(Ub(Ae))return!1;const Yt=Ae.firstChild;if(Yt){const Vn=new Zo(Yt,Ae),Os=I?I.getWhitespaceElements():{},br=Re||(I?I.getNonEmptyElements():null);let Or=Yt;do{if(Mt(Or)){const Ny=Or.getAttribute("data-mce-bogus");if(Ny){Or=Vn.next(Ny==="all");continue}const By=Or.nodeName.toLowerCase();if(br&&br[By]){if(By==="br"){rt++,Or=Vn.next();continue}return!1}if(Ub(Or))return!1}if(Pd(Or)||nt(Or)&&!Mm(Or.data)&&(!(dt!=null&&dt.includeZwsp)||!Uf(Or.data))||nt(Or)&&Or.parentNode&&Os[Or.parentNode.nodeName]&&Mm(Or.data))return!1;Or=Vn.next()}while(Or)}return rt<=1},Rp=()=>e.createRange(),Ry=(Ae,Re,dt)=>{let rt=Rp(),Yt,Vn;if(Ae&&Re&&Ae.parentNode&&Re.parentNode){const Os=Ae.parentNode;return rt.setStart(Os,Gu(Ae)),rt.setEnd(Re.parentNode,Gu(Re)),Yt=rt.extractContents(),rt=Rp(),rt.setStart(Re.parentNode,Gu(Re)+1),rt.setEnd(Os,Gu(Ae)+1),Vn=rt.extractContents(),Os.insertBefore(Fd(Ag,Yt,I),Ae),dt?Os.insertBefore(dt,Ae):Os.insertBefore(Re,Ae),Os.insertBefore(Fd(Ag,Vn,I),Ae),Ko(Ae),dt||Re}else return},hd=(Ae,Re,dt,rt)=>{if(_t(Ae)){let Yt=Ae.length;const Vn=[];for(;Yt--;)Vn[Yt]=hd(Ae[Yt],Re,dt,rt);return Vn}else return n.collect&&(Ae===e||Ae===r)&&A.push([Ae,Re,dt,rt]),V.bind(Ae,Re,dt,rt||Ag)},yf=(Ae,Re,dt)=>{if(_t(Ae)){let rt=Ae.length;const Yt=[];for(;rt--;)Yt[rt]=yf(Ae[rt],Re,dt);return Yt}else{if(A.length>0&&(Ae===e||Ae===r)){let rt=A.length;for(;rt--;){const[Yt,Vn,Os]=A[rt];Ae===Yt&&(!Re||Re===Vn)&&(!dt||dt===Os)&&V.unbind(Yt,Vn,Os)}}return V.unbind(Ae,Re,dt)}},My=(Ae,Re,dt)=>V.dispatch(Ae,Re,dt),Py=(Ae,Re,dt)=>V.dispatch(Ae,Re,dt),b2=Ae=>{if(Ae&&Am(Ae)){const Re=Ae.getAttribute("data-mce-contenteditable");return Re&&Re!=="inherit"?Re:Ae.contentEditable!=="inherit"?Ae.contentEditable:null}else return null},Ag={doc:e,settings:n,win:r,files:i,stdMode:g,boxModel:y,styleSheetLoader:x,boundEvents:A,styles:F,schema:I,events:V,isBlock:ne,root:null,clone:Ee,getRoot:Ye,getViewPort:st,getRect:Wt,getSize:Tt,getParent:Ao,getParents:Mn,get:Y,getNext:Gs,getPrev:Ra,select:mt,is:Sn,add:Lt,create:Ht,createHTML:Zn,createFragment:Mo,remove:Ko,setStyle:Le,getStyle:Qe,setStyles:Me,removeAllAttribs:Ri,setAttrib:ye,setAttribs:no,getAttrib:he,getPos:xt,parseStyle:Qc,serializeStyle:pf,addStyle:Mi,loadCSS:gd,addClass:jn,removeClass:mo,hasClass:ks,toggleClass:wn,show:Bs,hide:Cu,isHidden:Oy,uniqueId:Ay,setHTML:qn,getOuterHTML:bf,setOuterHTML:vf,decode:it,encode:hn,insertAfter:Dp,replace:Dy,rename:p2,findCommonAncestor:vk,run:kt,getAttribs:be,isEmpty:yk,createRng:Rp,nodeIndex:Gu,split:Ry,bind:hd,unbind:yf,fire:Py,dispatch:My,getContentEditable:b2,getContentEditableParent:Ae=>{const Re=Ye();let dt=null;for(let rt=Ae;rt&&rt!==Re&&(dt=b2(rt),dt===null);rt=rt.parentNode);return dt},isEditable:Ae=>{if(Te(Ae)){const Re=Mt(Ae)?Ae:Ae.parentElement;return Te(Re)&&Am(Re)&&xn(re.fromDom(Re))}else return!1},destroy:()=>{if(A.length>0){let Ae=A.length;for(;Ae--;){const[Re,dt,rt]=A[Ae];V.unbind(Re,dt,rt)}}Ct(i,(Ae,Re)=>{x.unload(Re),delete i[Re]})},isChildOf:(Ae,Re)=>Ae===Re||Re.contains(Ae),dumpRng:Ae=>"startContainer: "+Ae.startContainer.nodeName+", startOffset: "+Ae.startOffset+", endContainer: "+Ae.endContainer.nodeName+", endOffset: "+Ae.endOffset},v2=J2(F,n,ft(Ag));return Ag};jo.DOM=jo(document),jo.nodeIndex=Gu;const cO=jo.DOM,Us=0,Q2=1,bs=2,mh=3;class gr{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const i=cO;let u;const g=()=>{i.remove(A),u&&(u.onerror=u.onload=u=null)},y=()=>{g(),o()},x=()=>{g(),r("Failed to load script: "+n)},A=i.uniqueId();u=document.createElement("script"),u.id=A,u.type="text/javascript",u.src=at._addCacheSuffix(n),this.settings.referrerPolicy&&i.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=y,u.onerror=x,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===bs}markDone(n){this.states[n]=bs}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=Us),new Promise((i,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:i,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(x,A)=>{Lo(o.scriptLoadedCallbacks,A).each(I=>{$e(I,F=>F[x](A))}),delete o.scriptLoadedCallbacks[A]},i=x=>{const A=jt(x,I=>I.status==="rejected");return A.length>0?Promise.reject(Ya(A,({reason:I})=>_t(I)?I:[I])):Promise.resolve()},u=x=>Promise.allSettled(zt(x,A=>o.states[A]===bs?(r("resolve",A),Promise.resolve()):o.states[A]===mh?(r("reject",A),Promise.reject(A)):(o.states[A]=Q2,o.loadScript(A).then(()=>{o.states[A]=bs,r("resolve",A);const I=o.queue;return I.length>0?(o.queue=[],u(I).then(i)):Promise.resolve()},()=>(o.states[A]=mh,r("reject",A),Promise.reject(A)))))),g=x=>(o.loading=!0,u(x).then(A=>{o.loading=!1;const I=o.queueLoadedCallbacks.shift();return Z.from(I).each(ar),i(A)})),y=Fl(n);return o.loading?new Promise((x,A)=>{o.queueLoadedCallbacks.push(()=>{g(y).then(x,A)})}):g(y)}}gr.ScriptLoader=new gr;const Ts=e=>{let n=e;return{get:()=>n,set:i=>{n=i}}},mc=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},Tw=e=>Ge(e)&&cn(e,"raw"),da=e=>_t(e)&&e.length>1,S1={},fh=Ts("en"),qu=()=>Lo(S1,fh.get()),wl={getData:()=>oo(S1,e=>({...e})),setCode:e=>{e&&fh.set(e)},getCode:()=>fh.get(),add:(e,n)=>{let o=S1[e];o||(S1[e]=o={});const r=zt(Rr(n),i=>i.toLowerCase());Ct(n,(i,u)=>{const g=u.toLowerCase();g!==u&&mc(r,g)?(cn(n,g)||(o[g]=i),o[u]=i):o[g]=i})},translate:e=>{const n=qu().getOr({}),o=g=>ue(g)?Object.prototype.toString.call(g):r(g)?"":""+g,r=g=>g===""||g===null||g===void 0,i=g=>{const y=o(g);return cn(n,y)?o(n[y]):Lo(n,y.toLowerCase()).map(o).getOr(y)},u=g=>g.replace(/{context:\w+}$/,"");if(r(e))return"";if(Tw(e))return o(e.raw);if(da(e)){const g=e.slice(1),y=i(e[0]).replace(/\{([0-9]+)\}/g,(x,A)=>cn(g,A)?o(g[A]):x);return u(y)}return u(i(e))},isRtl:()=>qu().bind(e=>Lo(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>cn(S1,e)},La=()=>{const e=[],n={},o={},r=[],i=(Y,oe)=>{const he=jt(r,be=>be.name===Y&&be.state===oe);$e(he,be=>be.resolve())},u=Y=>cn(n,Y),g=Y=>cn(o,Y),y=Y=>{if(o[Y])return o[Y].instance},x=(Y,oe)=>{const he=wl.getCode(),be=","+(oe||"")+",";!he||oe&&be.indexOf(","+he+",")===-1||gr.ScriptLoader.add(n[Y]+"/langs/"+he+".js")},A=(Y,oe)=>{La.languageLoad!==!1&&(u(Y)?x(Y,oe):ne(Y,"loaded").then(()=>x(Y,oe)))},I=(Y,oe)=>(e.push(oe),o[Y]={instance:oe},i(Y,"added"),oe),F=Y=>{delete n[Y],delete o[Y]},V=(Y,oe)=>Q(oe)?Q(Y)?{prefix:"",resource:oe,suffix:""}:{prefix:Y.prefix,resource:oe,suffix:Y.suffix}:oe,J=(Y,oe)=>{if(n[Y])return Promise.resolve();let he=Q(oe)?oe:oe.prefix+oe.resource+oe.suffix;he.indexOf("/")!==0&&he.indexOf("://")===-1&&(he=La.baseURL+"/"+he),n[Y]=he.substring(0,he.lastIndexOf("/"));const be=()=>(i(Y,"loaded"),Promise.resolve());return o[Y]?be():gr.ScriptLoader.add(he).then(be)},ne=(Y,oe="added")=>oe==="added"&&g(Y)||oe==="loaded"&&u(Y)?Promise.resolve():new Promise(he=>{r.push({name:Y,state:oe,resolve:he})});return{items:e,urls:n,lookup:o,get:y,requireLangPack:A,add:I,remove:F,createUrl:V,load:J,waitFor:ne}};La.languageLoad=!0,La.baseURL="",La.PluginManager=La(),La.ThemeManager=La(),La.ModelManager=La();const uO=e=>{const n=Ts(Z.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(Z.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:y=>{o(),n.set(Z.some(y))}}},dO=e=>{const n=Ts(Z.none()),o=()=>n.get().each(y=>clearInterval(y));return{clear:()=>{o(),n.set(Z.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:y=>{o(),n.set(Z.some(setInterval(y,e)))}}},Lm=()=>{const e=uO(Dt);return{...e,on:o=>e.get().each(o)}},x1=(e,n)=>{let o=null;return{cancel:()=>{ae(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{ae(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},Iv=(e,n)=>{let o=null;const r=()=>{ae(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},Fv=ft("mce-annotation"),Ku=ft("data-mce-annotation"),hh=ft("data-mce-annotation-uid"),ph=ft("data-mce-annotation-active"),bh=ft("data-mce-annotation-classes"),Xf=ft("data-mce-annotation-attrs"),tx=e=>n=>so(n,e),Fs=(e,n)=>{const o=e.selection.getRng(),r=re.fromDom(o.startContainer),i=re.fromDom(e.getBody()),u=n.fold(()=>"."+Fv(),x=>`[${Ku()}="${x}"]`),g=Ad(r,o.startOffset).getOr(r);return pl(g,u,tx(i)).bind(x=>ll(x,`${hh()}`).bind(A=>ll(x,`${Ku()}`).map(I=>{const F=ox(e,A);return{uid:A,name:I,elements:F}})))},nx=e=>Vr(e)&&Od(e,Fv()),vh=(e,n)=>Du(e,"data-mce-bogus")||N2(e,'[data-mce-bogus="all"]',tx(n)),ox=(e,n)=>{const o=re.fromDom(e.getBody()),r=Zr(o,`[${hh()}="${n}"]`);return jt(r,i=>!vh(i,o))},Lv=(e,n)=>{const o=re.fromDom(e.getBody()),r=Zr(o,`[${Ku()}="${n}"]`),i={};return $e(r,u=>{if(!vh(u,o)){const g=wa(u,hh()),y=Lo(i,g).getOr([]);i[g]=y.concat([u])}}),i},Ea=(e,n)=>{const o=Ts({}),r=()=>({listeners:[],previous:Lm()}),i=(F,V)=>{u(F,J=>(V(J),J))},u=(F,V)=>{const J=o.get(),ne=Lo(J,F).getOrThunk(r),Y=V(ne);J[F]=Y,o.set(J)},g=(F,V,J)=>{i(F,ne=>{$e(ne.listeners,Y=>Y(!0,F,{uid:V,nodes:zt(J,oe=>oe.dom)}))})},y=F=>{i(F,V=>{$e(V.listeners,J=>J(!1,F))})},x=(F,V)=>{$e(ox(e,F),J=>{V?ns(J,ph(),"true"):Is(J,ph())})},A=Iv(()=>{const F=Qo(n.getNames());$e(F,V=>{u(V,J=>{const ne=J.previous.get();return Fs(e,Z.some(V)).fold(()=>{ne.each(Y=>{y(V),J.previous.clear(),x(Y,!1)})},({uid:Y,name:oe,elements:he})=>{Ps(ne,Y)||(ne.each(be=>x(be,!1)),g(oe,Y,he),J.previous.set(Y),x(Y,!0))}),{previous:J.previous,listeners:J.listeners}})})},30);return e.on("remove",()=>{A.cancel()}),e.on("NodeChange",()=>{A.throttle()}),{addListener:(F,V)=>{u(F,J=>({previous:J.previous,listeners:J.listeners.concat([V])}))}}},fc=(e,n)=>{const o=Ku(),r=u=>Z.from(u.attr(o)).bind(n.lookup),i=u=>{var g,y;u.attr(hh(),null),u.attr(Ku(),null),u.attr(ph(),null);const x=Z.from(u.attr(Xf())).map(V=>V.split(",")).getOr([]),A=Z.from(u.attr(bh())).map(V=>V.split(",")).getOr([]);$e(x,V=>u.attr(V,null));const I=(y=(g=u.attr("class"))===null||g===void 0?void 0:g.split(" "))!==null&&y!==void 0?y:[],F=Cd(I,[Fv()].concat(A));u.attr("class",F.length>0?F.join(" "):null),u.attr(bh(),null),u.attr(Xf(),null)};e.serializer.addTempAttr(ph()),e.serializer.addAttributeFilter(o,u=>{for(const g of u)r(g).each(y=>{y.persistent===!1&&(g.name==="span"?g.unwrap():i(g))})})},sx=()=>{const e={};return{register:(i,u)=>{e[i]={name:i,settings:u}},lookup:i=>Lo(e,i).map(u=>u.settings),getNames:()=>Rr(e)}};let Hv=0;const Jf=e=>{const o=new Date().getTime(),r=Math.floor(Math.random()*1e9);return Hv++,e+"_"+r+Hv+String(o)},mO=(e,n)=>{$e(n,o=>{Ru(e,o)})},rx=(e,n)=>{$e(n,o=>{dl(e,o)})},_w=(e,n)=>re.fromDom(e.dom.cloneNode(n)),Qi=e=>_w(e,!1),zv=e=>_w(e,!0),Ws=(e,n)=>{const o=re.fromTag(n),r=Sm(e);return Lc(o,r),o},ou=(e,n)=>{const o=Ws(e,n);Uc(e,o);const r=ur(e);return ko(o,r),ho(e),o},yh=(e,n,o=Xe)=>{const r=new Zo(e,n),i=u=>{let g;do g=r[u]();while(g&&!nt(g)&&!o(g));return Z.from(g).filter(nt)};return{current:()=>Z.from(r.current()).filter(nt),next:()=>i("next"),prev:()=>i("prev"),prev2:()=>i("prev2")}},Hm=(e,n)=>{const o=n||(g=>e.isBlock(g)||No(g)||Un(g)),r=(g,y,x,A)=>{if(nt(g)){const I=A(g,y,g.data);if(I!==-1)return Z.some({container:g,offset:I})}return x().bind(I=>r(I.container,I.offset,x,A))};return{backwards:(g,y,x,A)=>{const I=yh(g,A??e.getRoot(),o);return r(g,y,()=>I.prev().map(F=>({container:F,offset:F.length})),x).getOrNull()},forwards:(g,y,x,A)=>{const I=yh(g,A??e.getRoot(),o);return r(g,y,()=>I.next().map(F=>({container:F,offset:0})),x).getOrNull()}}},Qf=Math.round,eg=e=>e?{left:Qf(e.left),top:Qf(e.top),bottom:Qf(e.bottom),right:Qf(e.right),width:Qf(e.width),height:Qf(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Ud=(e,n)=>(e=eg(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),ax=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,tg=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,zm=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:tg(n.top-e.bottom,e,n)},ng=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:tg(n.bottom-e.top,e,n),ix=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,fO=e=>as(e,(n,o)=>n.fold(()=>Z.some(o),r=>{const i=Math.min(o.left,r.left),u=Math.min(o.top,r.top),g=Math.max(o.right,r.right),y=Math.max(o.bottom,r.bottom);return Z.some({top:u,right:g,bottom:y,left:i,width:g-i,height:y-u})}),Z.none()),kw=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),i=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-i)*(o-i))},gO=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),Vv=(e,n,o)=>Math.min(Math.max(e,n),o),Ow=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},ec=(e,n)=>{if(Mt(e)&&e.hasChildNodes()){const o=e.childNodes,r=Vv(n,0,o.length-1);return o[r]}else return e},cx=(e,n)=>{if(!(n<0&&Mt(e)&&e.hasChildNodes()))return ec(e,n)},wh=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),lx=e=>Q(e)&&e.charCodeAt(0)>=768&&wh.test(e),hO=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},E1=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},Vm=Mt,Uv=fr,Wn=If("display","block table"),tc=If("float","left right"),su=E1(Vm,Uv,go(tc)),Aw=go(If("white-space","pre pre-line pre-wrap")),Oo=nt,T1=No,Dw=jo.nodeIndex,Sr=cx,Yu=e=>e?e.createRange():jo.DOM.createRng(),Um=e=>Q(e)&&/[\r\n\t ]/.test(e),Rw=e=>!!e.setStart&&!!e.setEnd,Wv=e=>{const n=e.startContainer,o=e.startOffset;if(Um(e.toString())&&Aw(n.parentNode)&&nt(n)){const r=n.data;if(Um(r[o-1])||Um(r[o+1]))return!0}return!1},_1=e=>{const n=e.ownerDocument,o=Yu(n),r=n.createTextNode(ro),i=e.parentNode;i.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=eg(o.getBoundingClientRect());return i.removeChild(r),u},Mw=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,i=e.endOffset;if(n===o&&nt(o)&&r===0&&i===1){const u=e.cloneRange();return u.setEndAfter(o),Xu(u)}else return null},Zv=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Xu=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=eg(r[0]):o=eg(e.getBoundingClientRect()),!Rw(e)&&T1(e)&&Zv(o)?_1(e):Zv(o)&&Rw(e)&&(n=Mw(e))!==null&&n!==void 0?n:o},Wd=(e,n)=>{const o=Ud(e,n);return o.width=1,o.right=o.left+1,o},pO=e=>{const n=[],o=g=>{g.height!==0&&(n.length>0&&ax(g,n[n.length-1])||n.push(g))},r=(g,y)=>{const x=Yu(g.ownerDocument);if(y<g.data.length){if(lx(g.data[y]))return;if(lx(g.data[y-1])&&(x.setStart(g,y),x.setEnd(g,y+1),!Wv(x))){o(Wd(Xu(x),!1));return}}y>0&&(x.setStart(g,y-1),x.setEnd(g,y),Wv(x)||o(Wd(Xu(x),!1))),y<g.data.length&&(x.setStart(g,y),x.setEnd(g,y+1),Wv(x)||o(Wd(Xu(x),!0)))},i=e.container(),u=e.offset();if(Oo(i))return r(i,u),n;if(Vm(i))if(e.isAtEnd()){const g=Sr(i,u);Oo(g)&&r(g,g.data.length),su(g)&&!T1(g)&&o(Wd(Xu(g),!1))}else{const g=Sr(i,u);if(Oo(g)&&r(g,0),su(g)&&e.isAtEnd())return o(Wd(Xu(g),!1)),n;const y=Sr(e.container(),e.offset()-1);su(y)&&!T1(y)&&(Wn(y)||Wn(g)||!su(g))&&o(Wd(Xu(y),!1)),su(g)&&o(Wd(Xu(g),!0))}return n},De=(e,n,o)=>{const r=()=>(Oo(e),n===0),i=()=>Oo(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const I=Yu(e.ownerDocument);return I.setStart(e,n),I.setEnd(e,n),I},g=()=>(o||(o=pO(De(e,n))),o),y=()=>g().length>0,x=I=>I&&e===I.container()&&n===I.offset(),A=I=>Sr(e,I?n-1:n);return{container:ft(e),offset:ft(n),toRange:u,getClientRects:g,isVisible:y,isAtStart:r,isAtEnd:i,isEqual:x,getNode:A}};De.fromRangeStart=e=>De(e.startContainer,e.startOffset),De.fromRangeEnd=e=>De(e.endContainer,e.endOffset),De.after=e=>De(e.parentNode,Dw(e)+1),De.before=e=>De(e.parentNode,Dw(e)),De.isAbove=(e,n)=>Mr(Ks(n.getClientRects()),$i(e.getClientRects()),zm).getOr(!1),De.isBelow=(e,n)=>Mr($i(n.getClientRects()),Ks(e.getClientRects()),ng).getOr(!1),De.isAtStart=e=>e?e.isAtStart():!1,De.isAtEnd=e=>e?e.isAtEnd():!1,De.isTextPosition=e=>e?nt(e.container()):!1,De.isElementPosition=e=>!De.isTextPosition(e);const k1=(e,n)=>{nt(n)&&n.data.length===0&&e.remove(n)},Ch=(e,n,o)=>{n.insertNode(o),k1(e,o.previousSibling),k1(e,o.nextSibling)},gc=(e,n,o)=>{const r=Z.from(o.firstChild),i=Z.from(o.lastChild);n.insertNode(o),r.each(u=>k1(e,u.previousSibling)),i.each(u=>k1(e,u.nextSibling))},Pw=(e,n,o)=>{Es(o)?gc(e,n,o):Ch(e,n,o)},is=nt,jv=Kl,Zd=jo.nodeIndex,Nw=e=>{const n=e.parentNode;return jv(n)?Nw(n):n},Gv=e=>e?Na(e.childNodes,(n,o)=>(jv(o)&&o.nodeName!=="BR"?n=n.concat(Gv(o)):n.push(o),n),[]):[],Bw=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&is(o);)n+=o.data.length;return n},O1=e=>n=>e===n,Sh=e=>{let n,o;n=Gv(Nw(e)),o=Cs(n,O1(e),e),n=n.slice(0,o+1);const r=Na(n,(i,u,g)=>(is(u)&&is(n[g-1])&&i++,i),0);return n=Cm(n,mr([e.nodeName])),o=Cs(n,O1(e),e),o-r},$w=e=>(is(e)?"text()":e.nodeName.toLowerCase())+"["+Sh(e)+"]",bO=(e,n,o)=>{const r=[];for(let i=n.parentNode;i&&i!==e;i=i.parentNode)r.push(i);return r},ri=(e,n)=>{let o=[],r=n.container(),i=n.offset(),u;if(is(r))u=Bw(r,i);else{const y=r.childNodes;i>=y.length?(u="after",i=y.length-1):u="before",r=y[i]}o.push($w(r));let g=bO(e,r);return g=Cm(g,go(Kl)),o=o.concat(Li(g,y=>$w(y))),o.reverse().join("/")+","+u},xr=(e,n,o)=>{let r=Gv(e);return r=Cm(r,(i,u)=>!is(i)||!is(r[u-1])),r=Cm(r,mr([n])),r[o]},ma=(e,n)=>{let o=e,r=0;for(;is(o);){const i=o.data.length;if(n>=r&&n<=r+i){e=o,n=n-r;break}if(!is(o.nextSibling)){e=o,n=i;break}r+=i,o=o.nextSibling}return is(e)&&n>e.data.length&&(n=e.data.length),De(e,n)},ai=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),i=o.length>1?o[1]:"before",u=Na(r,(g,y)=>{const x=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(y);return x?(x[1]==="text()"&&(x[1]="#text"),xr(g,x[1],parseInt(x[2],10))):null},e);if(!u)return null;if(!is(u)&&u.parentNode){let g;return i==="after"?g=Zd(u)+1:g=Zd(u),De(u.parentNode,g)}return ma(u,parseInt(i,10))},Ta=Un,Ha=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let i=n.previousSibling;i&&nt(i);i=i.previousSibling)r+=e(i.data).length;return r},Er=(e,n,o,r,i)=>{const u=i?r.startContainer:r.endContainer;let g=i?r.startOffset:r.endOffset;const y=[],x=e.getRoot();if(nt(u))y.push(o?Ha(n,u,g):g);else{let A=0;const I=u.childNodes;g>=I.length&&I.length&&(A=1,g=Math.max(0,I.length-1)),y.push(e.nodeIndex(I[g],o)+A)}for(let A=u;A&&A!==x;A=A.parentNode)y.push(e.nodeIndex(A,o));return y},Iw=(e,n,o,r)=>{const i=n.dom,u=Er(i,e,o,r,!0),g=n.isForward(),y=L2(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:g,...y};{const x=Er(i,e,o,r,!1);return{start:u,end:x,forward:g,...y}}},A1=(e,n,o)=>{let r=0;return at.each(e.select(n),i=>{if(i.getAttribute("data-mce-bogus")!=="all"){if(i===o)return!1;r++;return}}),r},Fw=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(Mt(o)&&o.nodeName==="TR"){const i=o.childNodes;o=i[Math.min(n?r:r-1,i.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},D1=e=>(Fw(e,!0),Fw(e,!1),e),Lw=(e,n)=>{if(Mt(e)&&(e=ec(e,n),Ta(e)))return e;if(la(e)){nt(e)&&d1(e)&&(e=e.parentNode);let o=e.previousSibling;if(Ta(o)||(o=e.nextSibling,Ta(o)))return o}},ux=e=>Lw(e.startContainer,e.startOffset)||Lw(e.endContainer,e.endOffset),qv=(e,n,o)=>{const r=o.getNode(),i=o.getRng();if(r.nodeName==="IMG"||Ta(r)){const g=r.nodeName;return{name:g,index:A1(o.dom,g,r)}}const u=ux(i);if(u){const g=u.tagName;return{name:g,index:A1(o.dom,g,u)}}return Iw(e,o,n,i)},Hw=e=>{const n=e.getRng();return{start:ri(e.dom.getRoot(),De.fromRangeStart(n)),end:ri(e.dom.getRoot(),De.fromRangeEnd(n)),forward:e.isForward()}},vO=e=>({rng:e.getRng(),forward:e.isForward()}),yO=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},dx=(e,n)=>{const o=e.dom;let r=e.getRng();const i=o.uniqueId(),u=e.isCollapsed(),g=e.getNode(),y=g.nodeName,x=e.isForward();if(y==="IMG")return{name:y,index:A1(o,y,g)};const A=D1(r.cloneRange());if(!u){A.collapse(!1);const F=yO(o,i+"_end",n);Pw(o,A,F)}r=D1(r),r.collapse(!0);const I=yO(o,i+"_start",n);return Pw(o,r,I),e.moveToBookmark({id:i,keep:!0,forward:x}),{id:i,forward:x}},wO=(e,n,o=!1)=>n===2?qv(uc,o,e):n===3?Hw(e):n?vO(e):dx(e,!1),xh=qe(qv,Eo,!0),Kv=e=>{const n=u=>u(e),o=ft(e),r=()=>i,i={tag:!0,inner:e,fold:(u,g)=>g(e),isValue:yt,isError:Xe,map:u=>Ci.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>Z.some(e)};return i},mx=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,i)=>r(e),isValue:Xe,isError:yt,map:n,mapError:r=>Ci.error(r(e)),bind:n,exists:Xe,forall:yt,getOr:Eo,or:Eo,getOrThunk:Xo,orThunk:Xo,getOrDie:qs(String(e)),each:Dt,toOptional:Z.none};return o},Ci={value:Kv,error:mx,fromOption:(e,n)=>e.fold(()=>mx(n),Kv)},ru={generate:e=>{if(!_t(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return $e(e,(r,i)=>{const u=Rr(r);if(u.length!==1)throw new Error("one and only one name per case");const g=u[0],y=r[g];if(o[g]!==void 0)throw new Error("duplicate key detected:"+g);if(g==="cata")throw new Error("cannot have a case named cata (sorry)");if(!_t(y))throw new Error("case arguments must be an array");n.push(g),o[g]=(...x)=>{const A=x.length;if(A!==y.length)throw new Error("Wrong number of arguments to case "+g+". Expected "+y.length+" ("+y+"), got "+A);return{fold:(...F)=>{if(F.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+F.length);return F[i].apply(null,x)},match:F=>{const V=Rr(F);if(n.length!==V.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+V.join(","));if(!tr(n,ne=>on(V,ne)))throw new Error("Not all branches were specified when using match. Specified: "+V.join(", ")+`
Required: `+n.join(", "));return F[g].apply(null,x)},log:F=>{console.log(F,{constructors:n,constructor:g,params:x})}}}}),o}};ru.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const lt=e=>{const n=[],o=[];return $e(e,r=>{r.fold(i=>{n.push(i)},i=>{o.push(i)})}),{errors:n,values:o}},zw=e=>e.type==="inline-command"||e.type==="inline-format",Tr=e=>e.type==="block-command"||e.type==="block-format",fx=e=>{const n=r=>Ci.error({message:r,pattern:e}),o=(r,i,u)=>{if(e.format!==void 0){let g;if(_t(e.format)){if(!tr(e.format,Q))return n(r+" pattern has non-string items in the `format` array");g=e.format}else if(Q(e.format))g=[e.format];else return n(r+" pattern has non-string `format` parameter");return Ci.value(i(g))}else return e.cmd!==void 0?Q(e.cmd)?Ci.value(u(e.cmd,e.value)):n(r+" pattern has non-string `cmd` parameter"):n(r+" pattern is missing both `format` and `cmd` parameters")};if(!Ge(e))return n("Raw pattern is not an object");if(!Q(e.start))return n("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!Q(e.end))return n("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let r=e.start,i=e.end;return i.length===0&&(i=r,r=""),o("Inline",u=>({type:"inline-format",start:r,end:i,format:u}),(u,g)=>({type:"inline-command",start:r,end:i,cmd:u,value:g}))}else return e.replacement!==void 0?Q(e.replacement)?e.start.length===0?n("Replacement pattern has empty `start` parameter"):Ci.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?n("Block pattern has empty `start` parameter"):o("Block",r=>({type:"block-format",start:e.start,format:r[0]}),(r,i)=>({type:"block-command",start:e.start,cmd:r,value:i}))},Yv=e=>jt(e,Tr),Vw=e=>jt(e,zw),Si=(e,n)=>({inlinePatterns:Vw(e),blockPatterns:Yv(e),dynamicPatternsLookup:n}),CO=e=>{const n=lt(zt(e,fx));return $e(n.errors,o=>console.error(o.message,o.pattern)),n.values},gx=e=>n=>{const o=e(n);return CO(o)},xi=ts().deviceType,Eh=xi.isTouch(),R1=jo.DOM,Ju=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return as(n,(o,r)=>{const i=r.split("="),u=i[0],g=i.length>1?i[1]:u;return o[zl(u)]=zl(g),o},{})},Cl=e=>ze(e,RegExp),Ot=e=>n=>n.options.get(e),hc=e=>Q(e)||Ge(e),hx=(e,n="")=>o=>{const r=Q(o);if(r)if(o.indexOf("=")!==-1){const i=Ju(o);return{value:Lo(i,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},px=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:hx(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:hx(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=Q(o)&&yo(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=on(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>ut(o)?{valid:!0,value:o}:Q(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||Q(o)||An(o,Q);return r?Q(o)?{value:zt(o.split(","),zl),valid:r}:_t(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:eC(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=Q(o)||An(o,Q);return r?{value:_t(o)?o:zt(o.split(","),zl),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=ut(o)||Q(o);return r?o===!1||xi.isiPhone()||xi.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!Eh}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"object"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||Q(o)||ue(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||Q(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:"string"}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:hc}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:hc}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:hc}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>Q(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>An(o,Ge)||o===!1?{value:CO(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),n("text_patterns_lookup",{processor:o=>ue(o)?{value:gx(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>An(o,Cl)?{value:o,valid:!0}:Cl(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!1}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=on(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=on(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("force_hex_color",{processor:o=>{const r=["always","rgb_only","off"],i=on(r,o);return i?{value:o,valid:i}:{valid:!1,message:`Must be one of: ${r.join(", ")}.`}},default:"off"}),n("sandbox_iframes",{processor:"boolean",default:!1}),n("convert_unsafe_embeds",{processor:"boolean",default:!1}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:wl.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:R1.getAttrib(e.getElement(),"placeholder")})})},Uw=Ot("iframe_attrs"),bx=Ot("doctype"),Ww=Ot("document_base_url"),Zw=Ot("body_id"),SO=Ot("body_class"),jw=Ot("content_security_policy"),xO=Ot("br_in_pre"),za=Ot("forced_root_block"),M1=Ot("forced_root_block_attrs"),EO=Ot("newline_behavior"),TO=Ot("br_newline_selector"),Gw=Ot("no_newline_selector"),_O=Ot("keep_styles"),vx=Ot("end_container_on_empty_block"),yx=Ot("automatic_uploads"),P1=Ot("images_reuse_filename"),wx=Ot("images_replace_blob_uris"),qw=Ot("icons"),og=Ot("icons_url"),kO=Ot("images_upload_url"),OO=Ot("images_upload_base_path"),Kw=Ot("images_upload_credentials"),AO=Ot("images_upload_handler"),jd=Ot("content_css_cors"),Rn=Ot("referrer_policy"),Yw=Ot("language"),Va=Ot("language_url"),Xv=Ot("indent_use_margin"),Xw=Ot("indentation"),Jw=Ot("content_css"),Jv=Ot("content_style"),Cx=Ot("font_css"),DO=Ot("directionality"),RO=Ot("inline_boundaries_selector"),Th=Ot("object_resizing"),Sx=Ot("resize_img_proportional"),tP=Ot("placeholder"),Wm=Ot("event_root"),MO=Ot("service_message"),_h=Ot("theme"),PO=Ot("theme_url"),Qw=Ot("model"),xx=Ot("model_url"),sg=Ot("inline_boundaries"),NO=Ot("formats"),Ex=Ot("preview_styles"),Tx=Ot("format_empty_lines"),kh=Ot("format_noneditable_selector"),_x=Ot("custom_ui_selector"),eC=Ot("inline"),BO=Ot("hidden_input"),kx=Ot("submit_patch"),Qu=Ot("add_form_submit_trigger"),N1=Ot("add_unload_trigger"),B1=Ot("custom_undo_redo_levels"),Qv=Ot("disable_nodechange"),$1=Ot("readonly"),jc=Ot("editable_root"),Oh=Ot("content_css_cors"),I1=Ot("plugins"),Zm=Ot("external_plugins"),e0=Ot("block_unsupported_drop"),$O=Ot("visual"),IO=Ot("visual_table_class"),Ox=Ot("visual_anchor_class"),FO=Ot("iframe_aria_text"),tC=Ot("setup"),LO=Ot("init_instance_callback"),HO=Ot("urlconverter_callback"),Ax=Ot("auto_focus"),zO=Ot("browser_spellcheck"),Dx=Ot("protect"),VO=Ot("paste_block_drop"),t0=Ot("paste_data_images"),UO=Ot("paste_preprocess"),Rx=Ot("paste_postprocess"),Ah=Ot("newdocument_content"),nC=Ot("paste_webkit_styles"),oC=Ot("paste_remove_styles_if_webkit"),sC=Ot("paste_merge_formats"),Mx=Ot("smart_paste"),rC=Ot("paste_as_text"),WO=Ot("paste_tab_spaces"),n0=Ot("allow_html_data_urls"),o0=Ot("text_patterns"),ZO=Ot("text_patterns_lookup"),aC=Ot("noneditable_class"),Px=Ot("editable_class"),jO=Ot("noneditable_regexp"),iC=Ot("preserve_cdata"),GO=Ot("highlight_on_focus"),Dh=Ot("xss_sanitization"),qO=Ot("init_content_sync"),cC=e=>e.options.isSet("text_patterns_lookup"),KO=e=>at.explode(e.options.get("font_size_style_values")),YO=e=>at.explode(e.options.get("font_size_classes")),XO=e=>e.options.get("encoding")==="xml",Nx=e=>at.explode(e.options.get("images_file_types")),JO=Ot("table_tab_navigation"),Kr=Ot("details_initial_state"),nP=Ot("details_serialized_state"),Rh=Ot("force_hex_color"),s0=Ot("sandbox_iframes"),Bx=Mt,lC=nt,$x=e=>{const n=e.parentNode;n&&n.removeChild(e)},Ix=e=>{const n=uc(e);return{count:e.length-n.length,text:n}},rg=e=>{let n;for(;(n=e.data.lastIndexOf(Gr))!==-1;)e.deleteData(n,1)},F1=(e,n)=>(_r(e),n),QO=(e,n)=>{const o=Ix(e.data.substr(0,n.offset())),r=Ix(e.data.substr(n.offset()));return(o.text+r.text).length>0?(rg(e),De(e,n.offset()-o.count)):n},eA=(e,n)=>{const o=n.container(),r=Sf(Dr(o.childNodes),e).map(i=>i<n.offset()?De(o,n.offset()-1):n).getOr(n);return _r(e),r},L1=(e,n)=>lC(e)&&n.container()===e?QO(e,n):F1(e,n),uC=(e,n)=>n.container()===e.parentNode?eA(e,n):F1(e,n),Fx=(e,n)=>De.isTextPosition(n)?L1(e,n):uC(e,n),_r=e=>{Bx(e)&&la(e)&&(sw(e)?e.removeAttribute("data-mce-caret"):$x(e)),lC(e)&&(rg(e),e.data.length===0&&$x(e))},Lx=Un,dC=zs,oP=l1,Mh="*[contentEditable=false],video,audio,embed,object",tA=(e,n,o)=>{const r=Ud(n.getBoundingClientRect(),o);let i,u;if(e.tagName==="BODY"){const y=e.ownerDocument.documentElement;i=e.scrollLeft||y.scrollLeft,u=e.scrollTop||y.scrollTop}else{const y=e.getBoundingClientRect();i=e.scrollLeft-y.left,u=e.scrollTop-y.top}r.left+=i,r.right+=i,r.top+=u,r.bottom+=u,r.width=1;let g=n.offsetWidth-n.clientWidth;return g>0&&(o&&(g*=-1),r.left+=g,r.right+=g),r},Hx=e=>{var n,o;const r=Zr(re.fromDom(e),Mh);for(let i=0;i<r.length;i++){const u=r[i].dom;let g=u.previousSibling;if(Yg(g)){const y=g.data;y.length===1?(n=g.parentNode)===null||n===void 0||n.removeChild(g):g.deleteData(y.length-1,1)}g=u.nextSibling,zf(g)&&(g.data.length===1?(o=g.parentNode)===null||o===void 0||o.removeChild(g):g.deleteData(0,1))}},mC=(e,n,o,r)=>{const i=Lm();let u,g;const y=za(e),x=e.dom,A=(Y,oe)=>{let he;if(I(),oP(oe))return null;if(o(oe)){const be=I2(y,oe,Y),ye=tA(n,oe,Y);x.setStyle(be,"top",ye.top),g=be;const Ee=x.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});x.setStyles(Ee,{...ye}),x.add(n,Ee),i.set({caret:Ee,element:oe,before:Y}),Y&&x.addClass(Ee,"mce-visual-caret-before"),F(),he=oe.ownerDocument.createRange(),he.setStart(be,0),he.setEnd(be,0)}else return g=qk(oe,Y),he=oe.ownerDocument.createRange(),r0(g.nextSibling)?(he.setStart(g,0),he.setEnd(g,0)):(he.setStart(g,1),he.setEnd(g,1)),he;return he},I=()=>{Hx(n),g&&(_r(g),g=null),i.on(Y=>{x.remove(Y.caret),i.clear()}),u&&(clearInterval(u),u=void 0)},F=()=>{u=setInterval(()=>{i.on(Y=>{r()?x.toggleClass(Y.caret,"mce-visual-caret-hidden"):x.addClass(Y.caret,"mce-visual-caret-hidden")})},500)};return{show:A,hide:I,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{i.on(Y=>{const oe=tA(n,Y.element,Y.before);x.setStyles(Y.caret,{...oe})})},destroy:()=>clearInterval(u)}},H1=()=>Et.browser.isFirefox(),r0=e=>Lx(e)||dC(e),Ph=e=>(r0(e)||$u(e)&&H1())&&jl(re.fromDom(e)).exists(xn),nA=Fa,jm=Un,zx=zs,Gm=If("display","block table table-cell table-caption list-item"),qm=la,fC=d1,Vx=Mt,sP=nt,gC=fr,Km=e=>e>0,ed=e=>e<0,z1=(e,n)=>{let o;for(;o=e(n);)if(!fC(o))return o;return null},Nh=(e,n,o,r,i)=>{const u=new Zo(e,r),g=jm(e)||fC(e);let y;if(ed(n)){if(g&&(y=z1(u.prev.bind(u),!0),o(y)))return y;for(;y=z1(u.prev.bind(u),i);)if(o(y))return y}if(Km(n)){if(g&&(y=z1(u.next.bind(u),!0),o(y)))return y;for(;y=z1(u.next.bind(u),i);)if(o(y))return y}return null},hC=(e,n)=>{const o=i=>nA(i.dom),r=i=>i.dom===n;return xs(re.fromDom(e),o,r).map(i=>i.dom).getOr(n)},Gd=(e,n)=>{for(;e&&e!==n;){if(Gm(e))return e;e=e.parentNode}return null},au=(e,n,o)=>Gd(e.container(),o)===Gd(n.container(),o),V1=(e,n)=>{if(!n)return Z.none();const o=n.container(),r=n.offset();return Vx(o)?Z.from(o.childNodes[r+e]):Z.none()},a0=(e,n)=>{var o;const i=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)),i},U1=(e,n,o)=>Gd(n,e)===Gd(o,e),pC=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let i=o;for(;i&&i!==n;){let u=i[r];if(u&&qm(u)&&(u=u[r]),jm(u)||zx(u)){if(U1(n,u,i))return u;break}if(gC(u))break;i=i.parentNode}return null},Bh=qe(a0,!0),W1=qe(a0,!1),bC=(e,n,o)=>{let r;const i=qe(pC,!0,n),u=qe(pC,!1,n),g=o.startContainer,y=o.startOffset;if(d1(g)){const x=sP(g)?g.parentNode:g,A=x.getAttribute("data-mce-caret");if(A==="before"&&(r=x.nextSibling,Ph(r)))return Bh(r);if(A==="after"&&(r=x.previousSibling,Ph(r)))return W1(r)}if(!o.collapsed)return o;if(nt(g)){if(qm(g)){if(e===1){if(r=u(g),r)return Bh(r);if(r=i(g),r)return W1(r)}if(e===-1){if(r=i(g),r)return W1(r);if(r=u(g),r)return Bh(r)}return o}if(Yg(g)&&y>=g.data.length-1)return e===1&&(r=u(g),r)?Bh(r):o;if(zf(g)&&y<=1)return e===-1&&(r=i(g),r)?W1(r):o;if(y===g.data.length)return r=u(g),r?Bh(r):o;if(y===0)return r=i(g),r?W1(r):o}return o},Ux=(e,n)=>V1(e?0:-1,n).filter(jm),Ym=(e,n,o)=>{const r=bC(e,n,o);return e===-1?De.fromRangeStart(r):De.fromRangeEnd(r)},i0=e=>Z.from(e.getNode()).map(re.fromDom),oA=e=>Z.from(e.getNode(!0)).map(re.fromDom),Wx=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},vC=(e,n)=>{const o=au(e,n);return!o&&No(e.getNode())?!0:o};var Zs;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(Zs||(Zs={}));const rP=Un,qd=nt,Zx=Mt,c0=No,Xm=fr,_a=qi,$h=vv,Z1=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},Ih=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,yC=(e,n)=>{if(Km(e)){if(Xm(n.previousSibling)&&!qd(n.previousSibling))return De.before(n);if(qd(n))return De(n,0)}if(ed(e)){if(Xm(n.nextSibling)&&!qd(n.nextSibling))return De.after(n);if(qd(n))return De(n,n.data.length)}return ed(e)?c0(n)?De.before(n):De.after(n):De.before(n)},Fh=(e,n)=>{const o=n.nextSibling;return o&&Xm(o)?qd(o)?De(o,0):De.before(o):ag(Zs.Forwards,De.after(n),e)},ag=(e,n,o)=>{let r,i,u,g;if(!Zx(o)||!n)return null;if(n.isEqual(De.after(o))&&o.lastChild){if(g=De.after(o.lastChild),ed(e)&&Xm(o.lastChild)&&Zx(o.lastChild))return c0(o.lastChild)?De.before(o.lastChild):g}else g=n;const y=g.container();let x=g.offset();if(qd(y)){if(ed(e)&&x>0)return De(y,--x);if(Km(e)&&x<y.length)return De(y,++x);r=y}else{if(ed(e)&&x>0&&(i=Ih(y,x-1),Xm(i)))return!_a(i)&&(u=Nh(i,e,$h,i),u)?qd(u)?De(u,u.data.length):De.after(u):qd(i)?De(i,i.data.length):De.before(i);if(Km(e)&&x<y.childNodes.length&&(i=Ih(y,x),Xm(i)))return c0(i)?Fh(o,i):!_a(i)&&(u=Nh(i,e,$h,i),u)?qd(u)?De(u,0):De.before(u):qd(i)?De(i,0):De.after(i);r=i||g.getNode()}if(r&&(Km(e)&&g.isAtEnd()||ed(e)&&g.isAtStart())&&(r=Nh(r,e,yt,o,!0),$h(r,o)))return yC(e,r);i=r&&Nh(r,e,$h,o);const A=Xa(jt(Z1(y,o),rP));return A&&(!i||!A.contains(i))?(Km(e)?g=De.after(A):g=De.before(A),g):i?yC(e,i):null},iu=e=>({next:n=>ag(Zs.Forwards,n,e),prev:n=>ag(Zs.Backwards,n,e)}),sA=(e,n,o)=>{const r=e?De.before(o):De.after(o);return Yr(e,n,r)},rA=e=>No(e)?De.before(e):De.after(e),Jm=e=>De.isTextPosition(e)?e.offset()===0:fr(e.getNode()),Lh=e=>{if(De.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return fr(e.getNode(!0))},l0=(e,n)=>!De.isTextPosition(e)&&!De.isTextPosition(n)&&e.getNode()===n.getNode(!0),td=e=>!De.isTextPosition(e)&&No(e.getNode()),wC=(e,n,o)=>e?!l0(n,o)&&!td(n)&&Lh(n)&&Jm(o):!l0(o,n)&&Jm(n)&&Lh(o),Yr=(e,n,o)=>{const r=iu(n);return Z.from(e?r.next(o):r.prev(o))},Kd=(e,n,o)=>Yr(e,n,o).bind(r=>au(o,r,n)&&wC(e,o,r)?Yr(e,n,r):Z.some(r)),Sl=(e,n,o,r)=>Kd(e,n,o).bind(i=>r(i)?Sl(e,n,i,r):Z.some(i)),Hh=(e,n)=>{const o=e?n.firstChild:n.lastChild;return nt(o)?Z.some(De(o,e?0:o.data.length)):o?fr(o)?Z.some(e?De.before(o):rA(o)):sA(e,n,o):Z.none()},Ua=qe(Yr,!0),Ei=qe(Yr,!1),ii=qe(Hh,!0),xl=qe(Hh,!1),u0="_mce_caret",pc=e=>Mt(e)&&e.id===u0,ig=(e,n)=>{let o=n;for(;o&&o!==e;){if(pc(o))return o;o=o.parentNode}return null},CC=e=>Q(e.start),aA=e=>cn(e,"rng"),jx=e=>cn(e,"id"),j1=e=>cn(e,"name"),Gx=e=>at.isArray(e.start),G1=e=>!j1(e)&&ut(e.forward)?e.forward:!0,d0=(e,n)=>(Mt(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),iA=(e,n)=>{const o=Z.from(ai(e.getRoot(),n.start)),r=Z.from(ai(e.getRoot(),n.end));return Mr(o,r,(i,u)=>{const g=e.createRng();return g.setStart(i.container(),i.offset()),g.setEnd(u.container(),u.offset()),{range:g,forward:G1(n)}})},qx=(e,n)=>{var o;const i=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Gr);e.appendChild(i),n.setStart(i,0),n.setEnd(i,0)},cA=e=>!e.hasChildNodes(),aP=(e,n)=>xl(e).fold(Xe,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),Kx=(e,n,o)=>cA(n)&&ig(e,n)?(qx(n,o),!0):!1,Hn=(e,n,o,r)=>{const i=o[n?"start":"end"],u=e.getRoot();if(i){let g=u,y=i[0];for(let x=i.length-1;g&&x>=1;x--){const A=g.childNodes;if(Kx(u,g,r))return!0;if(i[x]>A.length-1)return Kx(u,g,r)?!0:aP(g,r);g=A[i[x]]}nt(g)&&(y=Math.min(i[0],g.data.length)),Mt(g)&&(y=Math.min(i[0],g.childNodes.length)),n?r.setStart(g,y):r.setEnd(g,y)}return!0},cu=e=>nt(e)&&e.data.length>0,cg=(e,n,o)=>{const r=e.get(o.id+"_"+n),i=r==null?void 0:r.parentNode,u=o.keep;if(r&&i){let g,y;if(n==="start"?u?r.hasChildNodes()?(g=r.firstChild,y=1):cu(r.nextSibling)?(g=r.nextSibling,y=0):cu(r.previousSibling)?(g=r.previousSibling,y=r.previousSibling.data.length):(g=i,y=e.nodeIndex(r)+1):(g=i,y=e.nodeIndex(r)):u?r.hasChildNodes()?(g=r.firstChild,y=1):cu(r.previousSibling)?(g=r.previousSibling,y=r.previousSibling.data.length):(g=i,y=e.nodeIndex(r)):(g=i,y=e.nodeIndex(r)),!u){const x=r.previousSibling,A=r.nextSibling;at.each(at.grep(r.childNodes),F=>{nt(F)&&(F.data=F.data.replace(/\uFEFF/g,""))});let I;for(;I=e.get(o.id+"_"+n);)e.remove(I,!0);if(nt(A)&&nt(x)&&!Et.browser.isOpera()){const F=x.data.length;x.appendData(A.data),e.remove(A),g=x,y=F}}return Z.some(De(g,y))}else return Z.none()},SC=(e,n)=>{const o=e.createRng();return Hn(e,!0,n,o)&&Hn(e,!1,n,o)?Z.some({range:o,forward:G1(n)}):Z.none()},Yx=(e,n)=>{const o=cg(e,"start",n),r=cg(e,"end",n);return Mr(o,r.or(o),(i,u)=>{const g=e.createRng();return g.setStart(d0(e,i.container()),i.offset()),g.setEnd(d0(e,u.container()),u.offset()),{range:g,forward:G1(n)}})},q1=(e,n)=>Z.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),lA=(e,n)=>{const o=e.dom;if(n){if(Gx(n))return SC(o,n);if(CC(n))return iA(o,n);if(jx(n))return Yx(o,n);if(j1(n))return q1(o,n);if(aA(n))return Z.some({range:n.rng,forward:G1(n)})}return Z.none()},zh=(e,n,o)=>wO(e,n,o),m0=(e,n)=>{lA(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},bc=e=>Mt(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",f0=(e=>n=>e===n)(ro),Vh=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Qm=e=>!Vh(e)&&!f0(e)&&!Yl(e),g0=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},h0=e=>Ya(e,n=>{const o=Ow(n);return o?[re.fromDom(o)]:[]}),lg=e=>g0(e).length>1,uA=e=>jt(h0(e),ji),Xx=e=>Zr(e,"td[data-mce-selected],th[data-mce-selected]"),dA=(e,n)=>{const o=Xx(n);return o.length>0?o:uA(e)},Uh=e=>dA(g0(e.selection.getSel()),re.fromDom(e.getBody())),Yd=(e,n)=>Nu(e,"table",n),mA=e=>{const n=e.startContainer,o=e.startOffset;return nt(n)?o===0?Z.some(re.fromDom(n)):Z.none():Z.from(n.childNodes[o]).map(re.fromDom)},fA=e=>{const n=e.endContainer,o=e.endOffset;return nt(n)?o===n.data.length?Z.some(re.fromDom(n)):Z.none():Z.from(n.childNodes[o-1]).map(re.fromDom)},Jx=e=>Nf(e).fold(ft([e]),n=>[e].concat(Jx(n))),xC=e=>Vc(e).fold(ft([e]),n=>Jn(n)==="br"?zc(n).map(o=>[e].concat(xC(o))).getOr([]):[e].concat(xC(n))),EC=(e,n)=>Mr(mA(n),fA(n),(o,r)=>{const i=As(Jx(e),qe(so,o)),u=As(xC(e),qe(so,r));return i.isSome()&&u.isSome()}).getOr(!1),TC=(e,n,o,r)=>{const i=o,u=new Zo(o,i),g=Wo(e.schema.getMoveCaretBeforeOnEnterElements(),(x,A)=>!on(["td","th","table"],A.toLowerCase()));let y=o;do{if(nt(y)&&at.trim(y.data).length!==0){r?n.setStart(y,0):n.setEnd(y,y.data.length);return}if(g[y.nodeName]){r?n.setStartBefore(y):y.nodeName==="BR"?n.setEndBefore(y):n.setEndAfter(y);return}}while(y=r?u.next():u.prev());i.nodeName==="BODY"&&(r?n.setStart(i,0):n.setEnd(i,i.childNodes.length))},p0=e=>{const n=e.selection.getSel();return Te(n)&&n.rangeCount>0},ef=(e,n)=>{const o=Uh(e);o.length>0?$e(o,r=>{const i=r.dom,u=e.dom.createRng();u.setStartBefore(i),u.setEndAfter(i),n(u,!0)}):n(e.selection.getRng(),!1)},Qx=(e,n,o)=>{const r=dx(e,n);o(r),e.moveToBookmark(r)},K1=e=>Fn(e==null?void 0:e.nodeType),_C=e=>Mt(e)&&!bc(e)&&!pc(e)&&!Kl(e),gA=(e,n)=>{if(_C(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},Y1=(e,n,o)=>{const{selection:r,dom:i}=e,u=r.getNode(),g=Un(u);Qx(r,!0,()=>{n()}),g&&Un(u)&&i.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&hA(i,r)},hA=(e,n)=>{var o,r;const i=n.getRng(),{startContainer:u,startOffset:g}=i,y=n.getNode();if(!gA(e,y)&&Mt(u)){const x=u.childNodes,A=e.getRoot();let I;if(g<x.length){const F=x[g];I=new Zo(F,(o=e.getParent(F,e.isBlock))!==null&&o!==void 0?o:A)}else{const F=x[x.length-1];I=new Zo(F,(r=e.getParent(F,e.isBlock))!==null&&r!==void 0?r:A),I.next(!0)}for(let F=I.current();F;F=I.next()){if(e.getContentEditable(F)==="false")return;if(nt(F)&&!Qs(F)){i.setStart(F,0),n.setRng(i);return}}}},St=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(Mt(e)||!Qs(e))return e}},hr=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||Ln(e,n),Xd=(e,n,o)=>e.schema.isValidChild(n,o),Qs=(e,n=!1)=>{if(Te(e)&&nt(e)){const o=n?e.data.replace(/ /g," "):e.data;return Mm(o)}else return!1},Gc=e=>Te(e)&&nt(e)&&e.length===0,b0=(e,n)=>{const o="[data-mce-cef-wrappable]",r=kh(e),i=sa(r)?o:`${o},${r}`;return Vi(re.fromDom(n),i)},X1=(e,n)=>{const o=e.dom;return _C(n)&&o.getContentEditable(n)==="false"&&b0(e,n)&&o.select('[contenteditable="true"]',n).length===0},lu=(e,n)=>ue(e)?e(n):(Te(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),v0=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),y0=(e,n)=>{if(It(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=ih(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},Wh=(e,n,o)=>{const r=e.getStyle(n,o);return y0(r,o)},eE=(e,n)=>{let o;return e.getParent(n,r=>Mt(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},J1=(e,n,o)=>e.getParents(n,o,e.getRoot()),kC=(e,n,o)=>{const r=e.formatter.get(n);return Te(r)&&Po(r,o)},OC=(e,n)=>kC(e,n,r=>{const i=u=>ue(u)||u.length>1&&u.charAt(0)==="%";return Po(["styles","attributes"],u=>Lo(r,u).exists(g=>{const y=_t(g)?g:rl(g);return Po(y,i)}))}),pA=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],i=u=>Wo(u,(g,y)=>Po(r,x=>x===y));return kC(e,n,u=>{const g=i(u);return kC(e,o,y=>{const x=i(y);return al(g,x)})})},uu=e=>va(e,"block"),w0=e=>uu(e)&&e.wrapper===!0,Zh=e=>uu(e)&&e.wrapper!==!0,fa=e=>va(e,"selector"),sr=e=>va(e,"inline"),C0=e=>fa(e)&&sr(e)&&Ps(Lo(e,"mixed"),!0),Q1=e=>fa(e)&&e.expand!==!1&&!sr(e),S0=e=>{const n=[];let o=e;for(;o;){if(nt(o)&&o.data!==Gr||o.childNodes.length>1)return[];Mt(o)&&n.push(o),o=o.firstChild}return n},eb=e=>S0(e).length>0,tb=e=>pc(e.dom)&&eb(e.dom),jh=bc,tE=J1,nb=Qs,nE=hr,oE=e=>No(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,sE=(e,n)=>{let o=n;for(;o;){if(Mt(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},qc=(e,n,o,r)=>{const i=n.data;if(e){for(let u=o;u>0;u--)if(r(i.charAt(u-1)))return u}else for(let u=o;u<i.length;u++)if(r(i.charAt(u)))return u;return-1},ka=(e,n,o)=>qc(e,n,o,r=>f0(r)||Vh(r)),El=(e,n,o)=>qc(e,n,o,Qm),Ti=(e,n,o,r,i,u)=>{let g;const y=e.getParent(o,e.isBlock)||n,x=(I,F,V)=>{const J=Hm(e),ne=i?J.backwards:J.forwards;return Z.from(ne(I,F,(Y,oe)=>jh(Y.parentNode)?-1:(g=Y,V(i,Y,oe)),y))};return x(o,r,ka).bind(I=>u?x(I.container,I.offset+(i?-1:0),El):Z.some(I)).orThunk(()=>g?Z.some({container:g,offset:i?0:g.length}):Z.none())},ob=(e,n,o,r,i)=>{const u=r[i];nt(r)&&sa(r.data)&&u&&(r=u);const g=tE(e,r);for(let y=0;y<g.length;y++)for(let x=0;x<n.length;x++){const A=n[x];if(!(Te(A.collapsed)&&A.collapsed!==o.collapsed)&&fa(A)&&e.is(g[y],A.selector))return g[y]}return r},x0=(e,n,o,r)=>{var i;let u=o;const g=e.getRoot(),y=n[0];if(uu(y)&&(u=y.wrapper?null:e.getParent(o,y.block,g)),!u){const x=(i=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&i!==void 0?i:g;u=e.getParent(nt(o)?o.parentNode:o,A=>A!==g&&nE(e.schema,A),x)}if(u&&uu(y)&&y.wrapper&&(u=tE(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!v0(u,"br")););return u||o},rE=(e,n,o,r)=>{const i=o.parentNode;return Te(o[r])?!1:i===n||It(i)||e.isBlock(i)?!0:rE(e,n,i,r)},sb=(e,n,o,r,i)=>{let u=o;const g=i?"previousSibling":"nextSibling",y=e.getRoot();if(nt(o)&&!nb(o)&&(i?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let x=u[g];x;x=x[g]){const A=nt(x)&&!rE(e,y,x,g);if(!jh(x)&&!oE(x)&&!nb(x,A))return u}if(u===y||u.parentNode===y){o=u;break}u=u.parentNode}return o},bA=e=>jh(e.parentNode)||jh(e),Jd=(e,n,o,r=!1)=>{let{startContainer:i,startOffset:u,endContainer:g,endOffset:y}=n;const x=o[0];return Mt(i)&&i.hasChildNodes()&&(i=ec(i,u),nt(i)&&(u=0)),Mt(g)&&g.hasChildNodes()&&(g=ec(g,n.collapsed?y:y-1),nt(g)&&(y=g.data.length)),i=sE(e,i),g=sE(e,g),bA(i)&&(i=jh(i)?i:i.parentNode,n.collapsed?i=i.previousSibling||i:i=i.nextSibling||i,nt(i)&&(u=n.collapsed?i.length:0)),bA(g)&&(g=jh(g)?g:g.parentNode,n.collapsed?g=g.nextSibling||g:g=g.previousSibling||g,nt(g)&&(y=n.collapsed?0:g.length)),n.collapsed&&(Ti(e,e.getRoot(),i,u,!0,r).each(({container:F,offset:V})=>{i=F,u=V}),Ti(e,e.getRoot(),g,y,!1,r).each(({container:F,offset:V})=>{g=F,y=V})),(sr(x)||x.block_expand)&&((!sr(x)||!nt(i)||u===0)&&(i=sb(e,o,i,u,!0)),(!sr(x)||!nt(g)||y===g.data.length)&&(g=sb(e,o,g,y,!1))),Q1(x)&&(i=ob(e,o,n,i,"previousSibling"),g=ob(e,o,n,g,"nextSibling")),(uu(x)||fa(x))&&(i=x0(e,o,i,"previousSibling"),g=x0(e,o,g,"nextSibling"),uu(x)&&(e.isBlock(i)||(i=sb(e,o,i,u,!0)),e.isBlock(g)||(g=sb(e,o,g,y,!1)))),Mt(i)&&i.parentNode&&(u=e.nodeIndex(i),i=i.parentNode),Mt(g)&&g.parentNode&&(y=e.nodeIndex(g)+1,g=g.parentNode),{startContainer:i,startOffset:u,endContainer:g,endOffset:y}},rb=(e,n,o)=>{var r;const i=n.startOffset,u=ec(n.startContainer,i),g=n.endOffset,y=ec(n.endContainer,g-1),x=oe=>{const he=oe[0];nt(he)&&he===u&&i>=he.data.length&&oe.splice(0,1);const be=oe[oe.length-1];return g===0&&oe.length>0&&be===y&&nt(be)&&oe.splice(oe.length-1,1),oe},A=(oe,he,be)=>{const ye=[];for(;oe&&oe!==be;oe=oe[he])ye.push(oe);return ye},I=(oe,he)=>e.getParent(oe,be=>be.parentNode===he,he),F=(oe,he,be)=>{const ye=be?"nextSibling":"previousSibling";for(let Ee=oe,Ye=Ee.parentNode;Ee&&Ee!==he;Ee=Ye){Ye=Ee.parentNode;const st=A(Ee===oe?Ee:Ee[ye],ye);st.length&&(be||st.reverse(),o(x(st)))}};if(u===y)return o(x([u]));const V=(r=e.findCommonAncestor(u,y))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,y))return F(u,V,!0);if(e.isChildOf(y,u))return F(y,V);const J=I(u,V)||u,ne=I(y,V)||y;F(u,J,!0);const Y=A(J===u?J:J.nextSibling,"nextSibling",ne===y?ne.nextSibling:ne);Y.length&&o(x(Y)),F(y,ne)},AC=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],aE=e=>Ur(e)&&Jl(e)===Gr,iE=(e,n,o,r)=>aa(n).fold(()=>"skipping",i=>r==="br"||aE(n)?"valid":nx(n)?"existing":pc(n.dom)?"caret":Po(AC,u=>Vi(n,u))?"valid-block":!Xd(e,o,r)||!Xd(e,Jn(i),o)?"invalid-child":"valid"),DC=(e,n)=>{const o=Jd(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},E0=(e,n,o,r,i,u)=>{const{uid:g=n,...y}=o;Ru(e,Fv()),ns(e,`${hh()}`,g),ns(e,`${Ku()}`,r);const{attributes:x={},classes:A=[]}=i(g,y);if(Lc(e,x),mO(e,A),u){A.length>0&&ns(e,`${bh()}`,A.join(","));const I=Rr(x);I.length>0&&ns(e,`${Xf()}`,I.join(","))}},$o=e=>{dl(e,Fv()),Is(e,`${hh()}`),Is(e,`${Ku()}`),Is(e,`${ph()}`);const n=ll(e,`${Xf()}`).map(r=>r.split(",")).getOr([]),o=ll(e,`${bh()}`).map(r=>r.split(",")).getOr([]);$e(n,r=>Is(e,r)),rx(e,o),Is(e,`${bh()}`),Is(e,`${Xf()}`)},Qd=(e,n,o,r,i)=>{const u=re.fromTag("span",e);return E0(u,n,o,r,i,!1),u},cE=(e,n,o,r,i,u)=>{const g=[],y=Qd(e.getDoc(),o,u,r,i),x=Lm(),A=()=>{x.clear()},I=()=>x.get().getOrThunk(()=>{const ne=Qi(y);return g.push(ne),x.set(ne),ne}),F=ne=>{$e(ne,V)},V=ne=>{switch(iE(e,ne,"span",Jn(ne))){case"invalid-child":{A();const oe=ur(ne);F(oe),A();break}case"valid-block":{A(),E0(ne,o,u,r,i,!0);break}case"valid":{const oe=I();s1(ne,oe);break}}},J=ne=>{const Y=zt(ne,re.fromDom);F(Y)};return rb(e.dom,n,ne=>{A(),J(ne)}),g},RC=(e,n,o,r)=>{e.undoManager.transact(()=>{const i=e.selection,u=i.getRng(),g=Uh(e).length>0,y=Jf("mce-annotation");if(u.collapsed&&!g&&DC(e,u),i.getRng().collapsed&&!g){const x=Qd(e.getDoc(),y,r,n,o.decorate);Om(x,ro),i.getRng().insertNode(x.dom),i.select(x.dom)}else Qx(i,!1,()=>{ef(e,x=>{cE(e,x,y,n,o.decorate,r)})})})},MC=e=>{const n=sx();fc(e,n);const o=Ea(e,n),r=zi("span"),i=u=>{$e(u,g=>{r(g)?Wc(g):$o(g)})};return{register:(u,g)=>{n.register(u,g)},annotate:(u,g)=>{n.lookup(u).each(y=>{RC(e,u,y,g)})},annotationChanged:(u,g)=>{o.addListener(u,g)},remove:u=>{Fs(e,Z.some(u)).each(({elements:g})=>{const y=e.selection.getBookmark();i(g),e.selection.moveToBookmark(y)})},removeAll:u=>{const g=e.selection.getBookmark();Ct(Lv(e,u),(y,x)=>{i(y)}),e.selection.moveToBookmark(g)},getAll:u=>{const g=Lv(e,u);return oo(g,y=>zt(y,x=>x.dom))}}},ug=e=>({getBookmark:qe(zh,e),moveToBookmark:qe(m0,e)});ug.isBookmarkNode=bc;const PC=(e,n,o)=>o.collapsed?!1:Po(o.getClientRects(),r=>ix(r,e,n)),NC=(e,n)=>e.dispatch("PreProcess",n),vA=(e,n)=>e.dispatch("PostProcess",n),Gh=e=>{e.dispatch("remove")},qh=e=>{e.dispatch("detach")},BC=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},$C=(e,n,o,r,i)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:i})},Tl=(e,n,o,r,i)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:i})},tf=e=>{e.dispatch("PreInit")},yA=e=>{e.dispatch("PostRender")},ab=e=>{e.dispatch("Init")},wA=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},nc=(e,n,o)=>{e.dispatch(n,o)},Oa=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},dg=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},iP=(e,n)=>e.dispatch("BeforeSetContent",n),lE=(e,n)=>e.dispatch("SetContent",n),CA=(e,n)=>e.dispatch("BeforeGetContent",n),Bn=(e,n)=>e.dispatch("GetContent",n),IC=(e,n)=>{e.dispatch("AutocompleterStart",n)},uE=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},FC=e=>{e.dispatch("AutocompleterEnd")},SA=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),xA=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),dE=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),EA=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),At={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||At.metaKeyPressed(e),metaKeyPressed:e=>Et.os.isMacOS()||Et.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},nf="data-mce-selected",mE="table,img,figure.image,hr,video,span.mce-preview-object,details",ib=Math.abs,cb=Math.round,TA={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},cP=e=>e.type==="longpress"||e.type.indexOf("touch")===0,lP=(e,n)=>{const o=n.dom,r=n.getDoc(),i=document,u=n.getBody();let g,y,x,A,I,F,V,J,ne,Y,oe,he,be,ye,Ee,Ye,st;const xt=it=>Te(it)&&(si(it)||o.is(it,"figure.image")),Le=it=>zs(it)||o.hasClass(it,"mce-preview-object"),Me=(it,hn)=>{if(cP(it)){const Zn=it.touches[0];return xt(it.target)&&!PC(Zn.clientX,Zn.clientY,hn)}else return xt(it.target)&&!PC(it.clientX,it.clientY,hn)},Qe=it=>{const hn=it.target;Me(it,n.selection.getRng())&&!it.isDefaultPrevented()&&n.selection.select(hn)},Tt=it=>o.hasClass(it,"mce-preview-object")&&Te(it.firstElementChild)?[it,it.firstElementChild]:o.is(it,"figure.image")?[it.querySelector("img")]:[it],Wt=it=>{const hn=Th(n);return!hn||it.getAttribute("data-mce-resize")==="false"||it===n.getBody()?!1:o.hasClass(it,"mce-preview-object")&&Te(it.firstElementChild)?Vi(re.fromDom(it.firstElementChild),hn):Vi(re.fromDom(it),hn)},Sn=it=>Le(it)?o.create("img",{src:Et.transparentSrc}):it.cloneNode(!0),Mn=(it,hn,Zn)=>{if(Te(Zn)){const Mo=Tt(it);$e(Mo,Ko=>{Ko.style[hn]||!n.schema.isValid(Ko.nodeName.toLowerCase(),hn)?o.setStyle(Ko,hn,Zn):o.setAttrib(Ko,hn,""+Zn)})}},Ao=(it,hn,Zn)=>{Mn(it,"width",hn),Mn(it,"height",Zn)},qo=it=>{let hn,Zn,Mo,Ko,Ri;hn=it.screenX-F,Zn=it.screenY-V,ye=hn*A[2]+Y,Ee=Zn*A[3]+oe,ye=ye<5?5:ye,Ee=Ee<5?5:Ee,(xt(g)||Le(g))&&Sx(n)!==!1?Mo=!At.modifierPressed(it):Mo=At.modifierPressed(it),Mo&&(ib(hn)>ib(Zn)?(Ee=cb(ye*he),ye=cb(Ee/he)):(ye=cb(Ee/he),Ee=cb(ye*he))),Ao(y,ye,Ee),Ko=A.startPos.x+hn,Ri=A.startPos.y+Zn,Ko=Ko>0?Ko:0,Ri=Ri>0?Ri:0,o.setStyles(x,{left:Ko,top:Ri,display:"block"}),x.innerHTML=ye+" &times; "+Ee,A[2]<0&&y.clientWidth<=ye&&o.setStyle(y,"left",J+(Y-ye)),A[3]<0&&y.clientHeight<=Ee&&o.setStyle(y,"top",ne+(oe-Ee)),hn=u.scrollWidth-Ye,Zn=u.scrollHeight-st,hn+Zn!==0&&o.setStyles(x,{left:Ko-hn,top:Ri-Zn}),be||($C(n,g,Y,oe,"corner-"+A.name),be=!0)},Gs=()=>{const it=be;be=!1,it&&(Mn(g,"width",ye),Mn(g,"height",Ee)),o.unbind(r,"mousemove",qo),o.unbind(r,"mouseup",Gs),i!==r&&(o.unbind(i,"mousemove",qo),o.unbind(i,"mouseup",Gs)),o.remove(y),o.remove(x),o.remove(I),Ra(g),it&&(Tl(n,g,ye,Ee,"corner-"+A.name),o.setAttrib(g,"style",o.getAttrib(g,"style"))),n.nodeChanged()},Ra=it=>{qn();const hn=o.getPos(it,u),Zn=hn.x,Mo=hn.y,Ko=it.getBoundingClientRect(),Ri=Ko.width||Ko.right-Ko.left,Qc=Ko.height||Ko.bottom-Ko.top;g!==it&&(mt(),g=it,ye=Ee=0);const pf=n.dispatch("ObjectSelected",{target:it});Wt(it)&&!pf.isDefaultPrevented()?Ct(TA,(Mi,gd)=>{const wn=mo=>{const ks=Tt(g)[0];F=mo.screenX,V=mo.screenY,Y=ks.clientWidth,oe=ks.clientHeight,he=oe/Y,A=Mi,A.name=gd,A.startPos={x:Ri*Mi[0]+Zn,y:Qc*Mi[1]+Mo},Ye=u.scrollWidth,st=u.scrollHeight,I=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(I,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),y=Sn(g),o.addClass(y,"mce-clonedresizable"),o.setAttrib(y,"data-mce-bogus","all"),y.contentEditable="false",o.setStyles(y,{left:Zn,top:Mo,margin:0}),Ao(y,Ri,Qc),y.removeAttribute(nf),u.appendChild(y),o.bind(r,"mousemove",qo),o.bind(r,"mouseup",Gs),i!==r&&(o.bind(i,"mousemove",qo),o.bind(i,"mouseup",Gs)),x=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},Y+" &times; "+oe)};let jn=o.get("mceResizeHandle"+gd);jn&&o.remove(jn),jn=o.add(u,"div",{id:"mceResizeHandle"+gd,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+gd+"-resize; margin:0; padding:0"}),o.bind(jn,"mousedown",mo=>{mo.stopImmediatePropagation(),mo.preventDefault(),wn(mo)}),Mi.elm=jn,o.setStyles(jn,{left:Ri*Mi[0]+Zn-jn.offsetWidth/2,top:Qc*Mi[1]+Mo-jn.offsetHeight/2})}):mt(!1)},Jr=x1(Ra,0),mt=(it=!0)=>{Jr.cancel(),qn(),g&&it&&g.removeAttribute(nf),Ct(TA,(hn,Zn)=>{const Mo=o.get("mceResizeHandle"+Zn);Mo&&(o.unbind(Mo),o.remove(Mo))})},kt=(it,hn)=>o.isChildOf(it,hn),no=it=>{if(be||n.removed||n.composing)return;const hn=it.type==="mousedown"?it.target:e.getNode(),Zn=pl(re.fromDom(hn),mE).map(Ko=>Ko.dom).filter(Ko=>o.isEditable(Ko.parentElement)||Ko.nodeName==="IMG"&&o.isEditable(Ko)).getOrUndefined(),Mo=Te(Zn)?o.getAttrib(Zn,nf,"1"):"1";if($e(o.select(`img[${nf}],hr[${nf}]`),Ko=>{Ko.removeAttribute(nf)}),Te(Zn)&&kt(Zn,u)&&n.hasFocus()){Lt();const Ko=e.getStart(!0);if(kt(Ko,Zn)&&kt(e.getEnd(!0),Zn)){o.setAttrib(Zn,nf,Mo),Jr.throttle(Zn);return}}mt()},qn=()=>{Ct(TA,it=>{it.elm&&(o.unbind(it.elm),delete it.elm)})},Lt=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{Lt(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",no),n.on("keyup compositionend",it=>{g&&g.nodeName==="TABLE"&&no(it)}),n.on("hide blur",mt),n.on("contextmenu longpress",Qe,!0)}),n.on("remove",qn),{isResizable:Wt,showResizeRect:Ra,hideResizeRect:mt,updateResizeRect:no,destroy:()=>{Jr.cancel(),g=y=I=null}}},P8=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},_A=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},fE=(e,n,o)=>{const r=e.document.createRange();return P8(r,n),_A(r,o),r},sn=(e,n,o,r,i)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,i),u},em=ru.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),gE=(e,n,o)=>n(re.fromDom(o.startContainer),o.startOffset,re.fromDom(o.endContainer),o.endOffset),kA=(e,n)=>n.match({domRange:o=>({ltr:ft(o),rtl:Z.none}),relative:(o,r)=>({ltr:Ll(()=>fE(e,o,r)),rtl:Ll(()=>Z.some(fE(e,r,o)))}),exact:(o,r,i,u)=>({ltr:Ll(()=>sn(e,o,r,i,u)),rtl:Ll(()=>Z.some(sn(e,i,u,o,r)))})}),lb=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(i=>i.collapsed===!1).map(i=>em.rtl(re.fromDom(i.endContainer),i.endOffset,re.fromDom(i.startContainer),i.startOffset)).getOrThunk(()=>gE(e,em.ltr,o)):gE(e,em.ltr,o)},OA=(e,n)=>{const o=kA(e,n);return lb(e,o)};em.ltr,em.rtl;const LC={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},pE=(e,n,o)=>{var r,i;return Z.from((i=(r=e.dom).caretPositionFromPoint)===null||i===void 0?void 0:i.call(r,n,o)).bind(u=>{if(u.offsetNode===null)return Z.none();const g=e.dom.createRange();return g.setStart(u.offsetNode,u.offset),g.collapse(),Z.some(g)})},T0=(e,n,o)=>{var r,i;return Z.from((i=(r=e.dom).caretRangeFromPoint)===null||i===void 0?void 0:i.call(r,n,o))},AA=document.caretPositionFromPoint?pE:document.caretRangeFromPoint?T0:Z.none,DA=(e,n,o)=>{const r=re.fromDom(e.document);return AA(r,n,o).map(i=>LC.create(re.fromDom(i.startContainer),i.startOffset,re.fromDom(i.endContainer),i.endOffset))},Kh=ru.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),HC=(e,n,o,r)=>e.fold(n,o,r),bE=e=>e.fold(Eo,Eo,Eo),RA=Kh.before,MA=Kh.on,_0=Kh.after,nd={before:RA,on:MA,after:_0,cata:HC,getStart:bE},k0=ru.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ao=e=>k0.exact(e.start,e.soffset,e.finish,e.foffset),PA=e=>e.match({domRange:n=>re.fromDom(n.startContainer),relative:(n,o)=>nd.getStart(n),exact:(n,o,r,i)=>n}),tm=k0.domRange,od=k0.relative,O0=k0.exact,vc=e=>{const n=PA(e);return fl(n)},A0=LC.create,nm={domRange:tm,relative:od,exact:O0,exactFromRange:ao,getWin:vc,range:A0},Yh=(e,n)=>{const o=Jn(e);return o==="input"?nd.after(e):on(["br","img"],o)?n===0?nd.before(e):nd.after(e):nd.on(e,n)},ub=(e,n)=>{const o=e.fold(nd.before,Yh,nd.after),r=n.fold(nd.before,Yh,nd.after);return nm.relative(o,r)},zC=(e,n,o,r)=>{const i=Yh(e,n),u=Yh(o,r);return nm.relative(i,u)},NA=e=>e.match({domRange:n=>{const o=re.fromDom(n.startContainer),r=re.fromDom(n.endContainer);return zC(o,n.startOffset,r,n.endOffset)},relative:ub,exact:zC}),VC=(e,n)=>{const r=document.createDocumentFragment();return $e(e,i=>{r.appendChild(i.dom)}),re.fromDom(r)},BA=e=>{const n=nm.getWin(e).dom,o=(i,u,g,y)=>sn(n,i,u,g,y),r=NA(e);return OA(n,r).match({ltr:o,rtl:o})},zn=(e,n,o)=>DA(e,n,o),yc=(e,n,o)=>{const r=fl(re.fromDom(o));return zn(r.dom,e,n).map(i=>{const u=o.createRange();return u.setStart(i.start.dom,i.soffset),u.setEnd(i.finish.dom,i.foffset),u}).getOrUndefined()},om=(e,n)=>Te(e)&&Te(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,$A=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},Xh=(e,n,o)=>$A(e,n,o)!==null,Qn=(e,n,o)=>Xh(e,n,r=>r.nodeName===o),IA=(e,n)=>la(e)&&!Xh(e,n,pc),UC=(e,n,o)=>{const r=n.parentNode;if(r){const i=new Zo(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=i[o?"prev":"next"]();)if(No(u))return!0}return!1},l=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},m=(e,n)=>{let o=n;for(;o&&o!==e;){if(Un(o))return!0;o=o.parentNode}return!1},b=(e,n,o,r,i)=>{const u=e.getRoot(),g=e.schema.getNonEmptyElements(),y=i.parentNode;let x,A;if(!y)return Z.none();const I=e.getParent(y,e.isBlock)||u;if(r&&No(i)&&n&&e.isEmpty(I))return Z.some(De(y,e.nodeIndex(i)));const F=new Zo(i,I);for(;A=F[r?"prev":"next"]();){if(e.getContentEditableParent(A)==="false"||IA(A,u))return Z.none();if(nt(A)&&A.data.length>0)return Qn(A,u,"A")?Z.none():Z.some(De(A,r?A.data.length:0));if(e.isBlock(A)||g[A.nodeName.toLowerCase()])return Z.none();x=A}return Pd(x)?Z.none():o&&x?Z.some(De(x,0)):Z.none()},S=(e,n,o,r)=>{const i=e.getRoot();let u,g=!1,y=o?r.startContainer:r.endContainer,x=o?r.startOffset:r.endOffset;const A=Mt(y)&&x===y.childNodes.length,I=e.schema.getNonEmptyElements();let F=o;if(la(y))return Z.none();if(Mt(y)&&x>y.childNodes.length-1&&(F=!1),c1(y)&&(y=i,x=0),y===i){if(F&&(u=y.childNodes[x>0?x-1:0],u&&(la(u)||I[u.nodeName]||$u(u))))return Z.none();if(y.hasChildNodes()){if(x=Math.min(!F&&x>0?x-1:x,y.childNodes.length-1),y=y.childNodes[x],x=nt(y)&&A?y.data.length:0,!n&&y===i.lastChild&&$u(y)||m(i,y)||la(y)||Ke(y))return Z.none();if(y.hasChildNodes()&&!$u(y)){u=y;const V=new Zo(y,i);do{if(Un(u)||la(u)){g=!1;break}if(nt(u)&&u.data.length>0){x=F?0:u.data.length,y=u,g=!0;break}if(I[u.nodeName.toLowerCase()]&&!ia(u)){x=e.nodeIndex(u),y=u.parentNode,F||x++,g=!0;break}}while(u=F?V.next():V.prev())}}}return n&&(nt(y)&&x===0&&b(e,A,n,!0,y).each(V=>{y=V.container(),x=V.offset(),g=!0}),Mt(y)&&(u=y.childNodes[x],u||(u=y.childNodes[x-1]),u&&No(u)&&!l(u,"A")&&!UC(e,u,!1)&&!UC(e,u,!0)&&b(e,A,n,!0,u).each(V=>{y=V.container(),x=V.offset(),g=!0}))),F&&!n&&nt(y)&&x===y.data.length&&b(e,A,n,!1,y).each(V=>{y=V.container(),x=V.offset(),g=!0}),g&&y?Z.some(De(y,x)):Z.none()},O=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),i=De.fromRangeStart(n);return S(e,o,!0,r).each(u=>{(!o||!De.isAbove(i,u))&&r.setStart(u.container(),u.offset())}),o||S(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),om(n,r)?Z.none():Z.some(r)},M=(e,n)=>e.splitText(n),H=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,i=e.endOffset;if(n===r&&nt(n)){if(o>0&&o<n.data.length)if(r=M(n,o),n=r.previousSibling,i>o){i=i-o;const u=M(r,i).previousSibling;n=r=u,i=u.data.length,o=0}else i=0}else if(nt(n)&&o>0&&o<n.data.length&&(n=M(n,o),o=0),nt(r)&&i>0&&i<r.data.length){const u=M(r,i).previousSibling;r=u,i=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:i}},q=e=>({walk:(u,g)=>rb(e,u,g),split:H,expand:(u,g={type:"word"})=>{if(g.type==="word"){const y=Jd(e,u,[{inline:"span"}]),x=e.createRng();return x.setStart(y.startContainer,y.startOffset),x.setEnd(y.endContainer,y.endOffset),x}return u},normalize:u=>O(e,u).fold(Xe,g=>(u.setStart(g.startContainer,g.startOffset),u.setEnd(g.endContainer,g.endOffset),!0))});q.compareRanges=om,q.getCaretRangeFromPoint=yc,q.getSelectedNode=Ow,q.getNode=ec;const le=((e,n)=>{const o=(y,x)=>{if(!Fn(x)&&!x.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+x);const A=y.dom;Bu(A)&&(A.style[e]=x+"px")},r=y=>{const x=n(y);if(x<=0||x===null){const A=nr(y,e);return parseFloat(A)||0}return x},i=r,u=(y,x)=>as(x,(A,I)=>{const F=nr(y,I),V=F===void 0?0:parseInt(F,10);return isNaN(V)?A:A+V},0);return{set:o,get:r,getOuter:i,aggregate:u,max:(y,x,A)=>{const I=u(y,A);return x>I?x-I:0}}})("height",e=>{const n=e.dom;return Tm(e)?n.getBoundingClientRect().height:n.offsetHeight}),Se=e=>le.get(e),et=()=>re.fromDom(document),vt=(e,n)=>e.view(n).fold(ft([]),r=>{const i=e.owner(r),u=vt(e,i);return[r].concat(u)}),pt=(e,n)=>{const o=n.owner(e);return vt(n,o)};var Ue=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?Z.none():Z.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(re.fromDom)},owner:e=>Zl(e)});const Nt=e=>{const n=et(),o=Ft(n),r=pt(e,Ue),i=tt(e),u=Il(r,(g,y)=>{const x=tt(y);return{left:g.left+x.left,top:g.top+x.top}},{left:0,top:0});return $(u.left+i.left+o.left,u.top+i.top+o.top)},mn=e=>Jn(e)==="textarea",_n=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),ss=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},kr=(e,n)=>{const o=ur(e);if(o.length===0||mn(e))return{element:e,offset:n};if(n<o.length&&!mn(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return mn(r)?{element:e,offset:n}:Jn(r)==="img"?{element:r,offset:1}:Ur(r)?{element:r,offset:Jl(r).length}:{element:r,offset:ur(r).length}}},Ls=(e,n)=>{const o=fe(e),r=Se(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},_i=(e,n)=>{const o=kr(e,n),r=re.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Gr+"</span>");return dr(o.element,r),Ls(r,()=>ho(r))},mg=e=>Ls(re.fromDom(e),Dt),fg=(e,n,o,r)=>{Wa(e,(i,u)=>D0(e,n,o,r),o)},WC=(e,n,o,r,i)=>{const u={elm:r.element.dom,alignToTop:i};if(_n(e,u))return;const g=Ft(n).top;o(e,n,g,r,i),ss(e,u)},D0=(e,n,o,r)=>{const i=re.fromDom(e.getBody()),u=re.fromDom(e.getDoc());Hs(i);const g=_i(re.fromDom(o.startContainer),o.startOffset);WC(e,u,n,g,r),g.cleanup()},Ro=(e,n,o,r)=>{const i=re.fromDom(e.getDoc());WC(e,i,o,mg(n),r)},Wa=(e,n,o)=>{const r=o.startContainer,i=o.startOffset,u=o.endContainer,g=o.endOffset;n(re.fromDom(r),re.fromDom(u));const y=e.dom.createRng();y.setStart(r,i),y.setEnd(u,g),e.selection.setRng(o)},ga=(e,n,o,r,i)=>{const u=n.pos;if(r)bn(u.left,u.top,i);else{const g=u.top-o+n.height;bn(-e.getBody().getBoundingClientRect().left,g,i)}},wc=(e,n,o,r,i,u)=>{const g=r+o,y=i.pos.top,x=i.bottom,A=x-y>=r;y<o?ga(e,i,r,u!==!1,n):y>g?ga(e,i,r,A?u!==!1:u===!0,n):x>g&&!A&&ga(e,i,r,u===!0,n)},oc=(e,n,o,r,i)=>{const u=fl(n).dom.innerHeight;wc(e,n,o,u,r,i)},of=(e,n,o,r,i)=>{const u=fl(n).dom.innerHeight;wc(e,n,o,u,r,i);const g=Nt(r.element),y=Pr(window);g.top<y.y?pn(r.element,i!==!1):g.top>y.bottom&&pn(r.element,i===!0)},ci=(e,n,o)=>fg(e,oc,n,o),ZC=(e,n,o)=>Ro(e,n,oc,o),db=(e,n,o)=>fg(e,of,n,o),sd=(e,n,o)=>Ro(e,n,of,o),Aa=(e,n,o)=>{(e.inline?ZC:sd)(e,n,o)},mb=(e,n,o)=>{(e.inline?ci:db)(e,n,o)},vE=(e,n=!1)=>e.dom.focus({preventScroll:n}),yE=e=>{const n=hl(e).dom;return e.dom===n.activeElement},Jh=(e=et())=>Z.from(e.dom.activeElement).map(re.fromDom),wE=e=>Jh(hl(e)).filter(n=>e.dom.contains(n.dom)),R0=(e,n)=>{const o=Ur(n)?Jl(n).length:ur(n).length+1;return e>o?o:e<0?0:e},CE=e=>nm.range(e.start,R0(e.soffset,e.start),e.finish,R0(e.foffset,e.finish)),gg=(e,n)=>!ql(n.dom)&&(Ca(e,n)||so(e,n)),uP=e=>n=>gg(e,n.start)&&gg(e,n.finish),N8=e=>e.inline||Et.browser.isFirefox(),B8=e=>nm.range(re.fromDom(e.startContainer),e.startOffset,re.fromDom(e.endContainer),e.endOffset),$8=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?Z.none():Z.from(n.getRangeAt(0))).map(B8)},I8=e=>{const n=fl(e);return $8(n.dom).filter(uP(e))},dP=(e,n)=>Z.from(n).filter(uP(e)).map(CE),mP=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),Z.some(n)}catch{return Z.none()}},M0=e=>{const n=N8(e)?I8(re.fromDom(e.getBody())):Z.none();e.bookmark=n.isSome()?n:e.bookmark},FA=e=>(e.bookmark?e.bookmark:Z.none()).bind(o=>dP(re.fromDom(e.getBody()),o)).bind(mP),F8=e=>{FA(e).each(n=>e.selection.setRng(n))},gP={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},hP=(e,n)=>(Fn(n)||(n=0),setTimeout(e,n)),pP=(e,n)=>(Fn(n)||(n=0),setInterval(e,n)),_l={setEditorTimeout:(e,n,o)=>hP(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=pP(()=>{e.removed?clearInterval(r):n()},o);return r}},L8=e=>e.type==="nodechange"&&e.selectionChange,H8=(e,n)=>{const o=()=>{n.throttle()};jo.DOM.bind(document,"mouseup",o),e.on("remove",()=>{jo.DOM.unbind(document,"mouseup",o)})},z8=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},V8=(e,n)=>{z8(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{L8(o)||M0(e)})},SE=e=>{const n=x1(()=>{M0(e)},0);e.on("init",()=>{e.inline&&H8(e,n),V8(e,n)}),e.on("remove",()=>{n.cancel()})};let fb;const xE=jo.DOM,bP=e=>Mt(e)&&gP.isEditorUIElement(e),EE=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},TE=(e,n)=>{const o=_x(e);return xE.getParent(n,i=>bP(i)||(o?e.dom.is(i,o):!1))!==null},LA=e=>{try{const n=hl(re.fromDom(e.getElement()));return Jh(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},U8=(e,n)=>{const o=n.editor;SE(o);const r=(i,u)=>{if(GO(i)&&i.inline!==!0){const g=re.fromDom(i.getContainer());u(g,"tox-edit-focus")}};o.on("focusin",()=>{const i=e.focusedEditor;EE(LA(o))&&r(o,Ru),i!==o&&(i&&i.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:i}),o.focus(!0))}),o.on("focusout",()=>{_l.setEditorTimeout(o,()=>{const i=e.focusedEditor;(!EE(LA(o))||i!==o)&&r(o,dl),!TE(o,LA(o))&&i===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),fb||(fb=i=>{const u=e.activeEditor;u&&Dd(i).each(g=>{const y=g;y.ownerDocument===document&&y!==document.body&&!TE(u,y)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},xE.bind(document,"focusin",fb))},W8=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&fb&&(xE.unbind(document,"focusin",fb),fb=null)},Z8=e=>{e.on("AddEditor",qe(U8,e)),e.on("RemoveEditor",qe(W8,e))},j8=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),G8=e=>e.collapsed?Z.from(ec(e.startContainer,e.startOffset)).map(re.fromDom):Z.none(),q8=(e,n)=>G8(n).bind(o=>Lu(o)?Z.some(o):Ca(e,o)?Z.none():Z.some(e)),vP=(e,n)=>{q8(re.fromDom(e.getBody()),n).bind(o=>ii(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},HA=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},K8=e=>yE(e)||wE(e).isSome(),Y8=e=>Te(e.iframeElement)&&yE(re.fromDom(e.iframeElement)),_E=e=>{const n=e.getBody();return n&&K8(re.fromDom(n))},yP=e=>{const n=hl(re.fromDom(e.getElement()));return Jh(n).filter(o=>!EE(o.dom)&&TE(e,o.dom)).isSome()},Qh=e=>e.inline?_E(e):Y8(e),wP=e=>Qh(e)||yP(e),X8=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable(),Te(e.bookmark)&&!Qh(e)&&FA(e).each(u=>{e.selection.setRng(u),r=u});const i=j8(e,n.getNode());if(i&&e.dom.isChildOf(i,o)){HA(i),vP(e,r),zA(e);return}e.inline||(Et.browser.isOpera()||HA(o),e.getWin().focus()),(Et.browser.isFirefox()||e.inline)&&(HA(o),vP(e,r)),zA(e)},zA=e=>e.editorManager.setActive(e),J8=(e,n)=>{e.removed||(n?zA(e):X8(e))},CP=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),SP=(e,n,o,r,i)=>{const u=o?n.startContainer:n.endContainer,g=o?n.startOffset:n.endOffset;return Z.from(u).map(re.fromDom).map(y=>!r||!n.collapsed?Ad(y,i(y,g)).getOr(y):y).bind(y=>Vr(y)?Z.some(y):aa(y).filter(Vr)).map(y=>y.dom).getOr(e)},VA=(e,n,o=!1)=>SP(e,n,!0,o,(r,i)=>Math.min(Ia(r),i)),xP=(e,n,o=!1)=>SP(e,n,!1,o,(r,i)=>i>0?i-1:i),UA=(e,n)=>{const o=e;for(;e&&nt(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},EP=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const i=n.startOffset,u=n.endOffset;let g=n.commonAncestorContainer;n.collapsed||(o===r&&u-i<2&&o.hasChildNodes()&&(g=o.childNodes[i]),nt(o)&&nt(r)&&(o.length===i?o=UA(o.nextSibling,!0):o=o.parentNode,u===0?r=UA(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(g=o)));const y=nt(g)?g.parentNode:g;return Am(y)?y:e},Q8=(e,n,o,r)=>{const i=[],u=e.getRoot(),g=e.getParent(o||VA(u,n,n.collapsed),e.isBlock),y=e.getParent(r||xP(u,n,n.collapsed),e.isBlock);if(g&&g!==u&&i.push(g),g&&y&&g!==y){let x;const A=new Zo(g,u);for(;(x=A.next())&&x!==y;)e.isBlock(x)&&i.push(x)}return y&&g!==y&&y!==u&&i.push(y),i},e7=(e,n,o)=>Z.from(n).bind(r=>Z.from(r.parentNode).map(i=>{const u=e.nodeIndex(r),g=e.createRng();return g.setStart(i,u),g.setEnd(i,u+1),o&&(TC(e,g,r,!0),TC(e,g,r,!1)),g})),WA=(e,n)=>zt(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),t7=e=>Jn(e)==="img"?1:nw(e).fold(()=>ur(e).length,n=>n.length),n7=e=>nw(e).filter(n=>n.trim().length!==0||n.indexOf(ro)>-1).isSome(),o7=e=>gs(e)&&wa(e,"contenteditable")==="false",s7=["img","br"],TP=e=>n7(e)||on(s7,Jn(e))||o7(e),r7=e=>Wr(e,TP),a7=e=>i7(e,TP),i7=(e,n)=>{const o=r=>{const i=ur(r);for(let u=i.length-1;u>=0;u--){const g=i[u];if(n(g))return Z.some(g);const y=o(g);if(y.isSome())return y}return Z.none()};return o(e)},_P="[data-mce-autocompleter]",c7=(e,n)=>{if(kP(re.fromDom(e.getBody())).isNone()){const o=re.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());Js(o,re.fromDom(n.extractContents())),n.insertNode(o.dom),aa(o).each(r=>r.dom.normalize()),a7(o).map(r=>{e.selection.setCursorLocation(r.dom,t7(r))})}},l7=e=>pl(e,_P),kP=e=>pi(e,_P),u7=(e,n)=>kP(n).each(o=>{const r=e.selection.getBookmark();Wc(o),e.selection.moveToBookmark(r)}),d7={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},kE=(e,n,o)=>{const r=o?"lastChild":"firstChild",i=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[i];if(u)return u;for(let g=e.parent;g&&g!==n;g=g.parent)if(u=g[i],u)return u}},m7=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!Mm(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},Kt=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class ki{static create(n,o){const r=new ki(n,d7[n]||1);return o&&Ct(o,(i,u)=>{r.attr(u,i)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!Q(n))return Te(n)&&Ct(n,(u,g)=>{r.attr(g,u)}),r;const i=r.attributes;if(i){if(o!==void 0){if(o===null){if(n in i.map){delete i.map[n];let u=i.length;for(;u--;)if(i[u].name===n)return i.splice(u,1),r}return r}if(n in i.map){let u=i.length;for(;u--;)if(i[u].name===n){i[u].value=o;break}}else i.push({name:n,value:o});return i.map[n]=o,r}return i.map[n]}}clone(){const n=this,o=new ki(n.name,n.type),r=n.attributes;if(r){const i=[];i.map={};for(let u=0,g=r.length;u<g;u++){const y=r[u];y.name!=="id"&&(i[i.length]={name:y.name,value:y.value},i.map[y.name]=y.value)}o.attributes=i}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,i=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):i&&(i.next=r),o.lastChild===n?(o.lastChild=i,i&&(i.next=null)):r&&(r.prev=i),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const i=o.parent||this;return r?(o===i.firstChild?i.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===i.lastChild?i.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=i,n}getAll(n){const o=this,r=[];for(let i=o.firstChild;i;i=kE(i,o))i.name===n&&r.push(i);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let i=n.firstChild;i;i=kE(i,n))o.push(i);let r=o.length;for(;r--;){const i=o[r];i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var i;const u=this;let g=u.firstChild;if(Kt(u))return!1;if(g)do{if(g.type===1){if(g.attr("data-mce-bogus"))continue;if(n[g.name]||Kt(g))return!1}if(g.type===8||g.type===3&&!m7(g)||g.type===3&&g.parent&&o[g.parent.name]&&Mm((i=g.value)!==null&&i!==void 0?i:"")||r&&r(g))return!1}while(g=kE(g,u));return!0}walk(n){return kE(this,null,n)}}const OP=at.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),AP=e=>Q(e.nodeValue)&&e.nodeValue.includes(Gr),OE=e=>`${e.length===0?"":`${zt(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,f7=(e,n)=>n.querySelectorAll(OE(e)),DP=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>AP(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),RP=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(AP(n)){const o=n.parentNode;return o&&cn(OP,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),g7=e=>DP(e).nextNode()!==null,h7=e=>RP(e).nextNode()!==null,AE=(e,n)=>n.querySelector(OE(e))!==null,MP=(e,n)=>{$e(f7(e,n),o=>{const r=re.fromDom(o);wa(r,"data-mce-bogus")==="all"?ho(r):$e(e,i=>{Du(r,i)&&Is(r,i)})})},p7=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},b7=R(p7,DP),yn=R(p7,RP),PP=(e,n)=>{const o=[{condition:qe(AE,n),action:qe(MP,n)},{condition:g7,action:b7},{condition:h7,action:yn}];let r=e,i=!1;return $e(o,({condition:u,action:g})=>{u(r)&&(i||(r=e.cloneNode(!0),i=!0),g(r))}),r},En=e=>{const n=Zr(e,"[data-mce-bogus]");$e(n,o=>{wa(o,"data-mce-bogus")==="all"?ho(o):Rm(o)?(dr(o,re.fromText(u1)),ho(o)):Wc(o)})},ZA=e=>{const n=Zr(e,"input");$e(n,o=>{Is(o,"name")})},qK=(e,n)=>{const o=za(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},KK=(e,n)=>{const o=e.getDoc(),r=hl(re.fromDom(e.getBody())),i=re.fromTag("div",o);ns(i,"data-mce-bogus","all"),xa(i,{position:"fixed",left:"-9999999px",top:"0"}),Om(i,n.innerHTML),En(i),ZA(i);const u=P2(r);Js(u,i);const g=uc(i.dom.innerText);return ho(i),g},v7=(e,n,o)=>{let r;return n.format==="raw"?r=at.trim(uc(PP(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=KK(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=qK(e,e.serializer.serialize(o,n)),n.format!=="text"&&!Cr(re.fromDom(o))&&Q(r)?at.trim(r):r},YK=(e,n)=>Z.from(e.getBody()).fold(ft(n.format==="tree"?new ki("body",11):""),o=>v7(e,n,o)),y7=at.makeMap,NP=e=>{const n=[];e=e||{};const o=e.indent,r=y7(e.indent_before||""),i=y7(e.indent_after||""),u=qf.getEncodeFunc(e.entity_encoding||"raw",e.entities),g=e.element_format!=="xhtml";return{start:(y,x,A)=>{if(o&&r[y]&&n.length>0){const I=n[n.length-1];I.length>0&&I!==`
`&&n.push(`
`)}if(n.push("<",y),x)for(let I=0,F=x.length;I<F;I++){const V=x[I];n.push(" ",V.name,'="',u(V.value,!0),'"')}if(!A||g?n[n.length]=">":n[n.length]=" />",A&&o&&i[y]&&n.length>0){const I=n[n.length-1];I.length>0&&I!==`
`&&n.push(`
`)}},end:y=>{let x;n.push("</",y,">"),o&&i[y]&&n.length>0&&(x=n[n.length-1],x.length>0&&x!==`
`&&n.push(`
`))},text:(y,x)=>{y.length>0&&(n[n.length]=x?y:u(y))},cdata:y=>{n.push("<![CDATA[",y,"]]>")},comment:y=>{n.push("<!--",y,"-->")},pi:(y,x)=>{x?n.push("<?",y," ",u(x),"?>"):n.push("<?",y,"?>"),o&&n.push(`
`)},doctype:y=>{n.push("<!DOCTYPE",y,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},ep=(e={},n=zd())=>{const o=NP(e);return e.validate="validate"in e?e.validate:!0,{serialize:i=>{const u=e.validate,g={3:x=>{var A;o.text((A=x.value)!==null&&A!==void 0?A:"",x.raw)},8:x=>{var A;o.comment((A=x.value)!==null&&A!==void 0?A:"")},7:x=>{o.pi(x.name,x.value)},10:x=>{var A;o.doctype((A=x.value)!==null&&A!==void 0?A:"")},4:x=>{var A;o.cdata((A=x.value)!==null&&A!==void 0?A:"")},11:x=>{let A=x;if(A=A.firstChild)do y(A);while(A=A.next)}};o.reset();const y=x=>{var A;const I=g[x.type];if(I)I(x);else{const F=x.name,V=F in n.getVoidElements();let J=x.attributes;if(u&&J&&J.length>1){const ne=[];ne.map={};const Y=n.getElementRule(x.name);if(Y){for(let oe=0,he=Y.attributesOrder.length;oe<he;oe++){const be=Y.attributesOrder[oe];if(be in J.map){const ye=J.map[be];ne.map[be]=ye,ne.push({name:be,value:ye})}}for(let oe=0,he=J.length;oe<he;oe++){const be=J[oe].name;if(!(be in ne.map)){const ye=J.map[be];ne.map[be]=ye,ne.push({name:be,value:ye})}}J=ne}}if(o.start(F,J,V),eu(F))Q(x.value)&&o.text(x.value,!0),o.end(F);else if(!V){let ne=x.firstChild;if(ne){(F==="pre"||F==="textarea")&&ne.type===3&&((A=ne.value)===null||A===void 0?void 0:A[0])===`
`&&o.text(`
`,!0);do y(ne);while(ne=ne.next)}o.end(F)}}};return i.type===1&&!e.inner?y(i):i.type===3?g[3](i):g[11](i),o.getContent()}}},ln=new Set;$e(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{ln.add(n)});const BP=["font","text-decoration","text-emphasis"],jA=(e,n)=>Rr(e.parseStyle(e.getAttrib(n,"style"))),w7=e=>ln.has(e),jC=(e,n)=>tr(jA(e,n),o=>!w7(o)),$P=e=>jt(e,n=>Po(BP,o=>$s(n,o))),C7=(e,n,o)=>{const r=jA(e,n),i=jA(e,o),u=g=>{var y,x;const A=(y=e.getStyle(n,g))!==null&&y!==void 0?y:"",I=(x=e.getStyle(o,g))!==null&&x!==void 0?x:"";return yo(A)&&yo(I)&&A!==I};return Po(r,g=>{const y=x=>Po(x,A=>A===g);if(!y(i)&&y(BP)){const x=$P(i);return Po(x,u)}else return u(g)})},IP=(e,n,o)=>Z.from(o.container()).filter(nt).exists(r=>{const i=e?0:-1;return n(r.data.charAt(o.offset()+i))}),GA=qe(IP,!0,Vh),DE=qe(IP,!1,Vh),S7=e=>{const n=e.container();return nt(n)&&(n.data.length===0||Gi(n.data)&&ug.isBookmarkNode(n.parentNode))},gb=(e,n)=>o=>V1(e?0:-1,o).filter(n).isSome(),x7=e=>si(e)&&nr(re.fromDom(e),"display")==="block",FP=e=>Un(e)&&!gv(e),E7=gb(!0,x7),T7=gb(!1,x7),GC=gb(!0,zs),P0=gb(!1,zs),LP=gb(!0,$u),kn=gb(!1,$u),hg=gb(!0,FP),sm=gb(!1,FP),HP=e=>e.slice(0,-1),zP=(e,n,o)=>Ca(n,e)?HP(rv(e,r=>o(r)||so(r,n))):[],qA=(e,n)=>zP(e,n,Xe),sf=(e,n)=>[e].concat(qA(e,n)),RE=(e,n,o)=>Sl(e,n,o,S7),_7=e=>n=>e.isBlock(Jn(n)),KA=(e,n,o)=>As(sf(re.fromDom(n.container()),e),_7(o)),VP=(e,n,o,r)=>RE(e,n.dom,o).forall(i=>KA(n,o,r).fold(()=>!au(i,o,n.dom),u=>!au(i,o,n.dom)&&Ca(u,re.fromDom(i.container())))),UP=(e,n,o,r)=>KA(n,o,r).fold(()=>RE(e,n.dom,o).forall(i=>!au(i,o,n.dom)),i=>RE(e,i.dom,o).isNone()),YA=qe(UP,!1),WP=qe(UP,!0),k7=qe(VP,!1),O7=qe(VP,!0),A7=e=>i0(e).exists(Rm),ME=(e,n,o,r)=>{const i=jt(sf(re.fromDom(o.container()),n),g=>r.isBlock(Jn(g))),u=Ks(i).getOr(n);return Yr(e,u.dom,o).filter(A7)},qC=(e,n,o)=>i0(n).exists(Rm)||ME(!0,e,n,o).isSome(),KC=(e,n,o)=>oA(n).exists(Rm)||ME(!1,e,n,o).isSome(),D7=qe(ME,!1),R7=qe(ME,!0),ZP=e=>De.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),jP=(e,n,o)=>{const r=jt(sf(re.fromDom(n.container()),e),i=>o.isBlock(Jn(i)));return Ks(r).getOr(e)},GP=(e,n,o)=>ZP(n)?DE(n):DE(n)||Ei(jP(e,n,o).dom,n).exists(DE),qP=(e,n,o)=>ZP(n)?GA(n):GA(n)||Ua(jP(e,n,o).dom,n).exists(GA),M7=e=>on(["pre","pre-wrap"],e),XA=e=>i0(e).bind(n=>hi(n,Vr)).exists(n=>M7(nr(n,"white-space"))),KP=(e,n)=>Ei(e.dom,n).isNone(),P7=(e,n)=>Ua(e.dom,n).isNone(),N7=(e,n,o)=>KP(e,n)||P7(e,n)||YA(e,n,o)||WP(e,n,o)||KC(e,n,o)||qC(e,n,o),hb=e=>Te(e)&&Un(e)&&Gm(e),YP=(e,n)=>o=>hb(new Zo(o,e)[n]()),XP=(e,n)=>{const o=Ua(e.dom,n).getOr(n),r=YP(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},B7=(e,n)=>{const o=Ei(e.dom,n).getOr(n),r=YP(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},JP=(e,n,o)=>XA(n)?!1:N7(e,n,o)||GP(e,n,o)||qP(e,n,o),N0=(e,n,o)=>XA(n)?!1:YA(e,n,o)||k7(e,n,o)||KC(e,n,o)||GP(e,n,o)||B7(e,n),QP=e=>{const n=e.container(),o=e.offset();return nt(n)&&o<n.data.length?De(n,o+1):e},B0=(e,n,o)=>XA(n)?!1:WP(e,n,o)||O7(e,n,o)||qC(e,n,o)||qP(e,n,o)||XP(e,n),PE=(e,n,o)=>N0(e,n,o)||B0(e,QP(n),o),Oi=(e,n)=>f0(e.charAt(n)),eN=(e,n)=>Vh(e.charAt(n)),$7=e=>{const n=e.container();return nt(n)&&yr(n.data,ro)},I7=e=>{const n=e.split("");return zt(n,(o,r)=>f0(o)&&r>0&&r<n.length-1&&Qm(n[r-1])&&Qm(n[r+1])?" ":o).join("")},tN=(e,n,o,r)=>{const i=n.data,u=De(n,0);return!o&&Oi(i,0)&&!PE(e,u,r)?(n.data=" "+i.slice(1),!0):o&&eN(i,0)&&N0(e,u,r)?(n.data=ro+i.slice(1),!0):!1},F7=e=>{const n=e.data,o=I7(n);return o!==n?(e.data=o,!0):!1},tp=(e,n,o,r)=>{const i=n.data,u=De(n,i.length-1);return!o&&Oi(i,i.length-1)&&!PE(e,u,r)?(n.data=i.slice(0,-1)+" ",!0):o&&eN(i,i.length-1)&&B0(e,u,r)?(n.data=i.slice(0,-1)+ro,!0):!1},L7=(e,n,o)=>{const r=n.container();if(!nt(r))return Z.none();if($7(n)){const i=tN(e,r,!1,o)||F7(r)||tp(e,r,!1,o);return to(i,n)}else if(PE(e,n,o)){const i=tN(e,r,!0,o)||tp(e,r,!0,o);return to(i,n)}else return Z.none()},H7=e=>{const n=re.fromDom(e.getBody());e.selection.isCollapsed()&&L7(n,De.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},_s=(e,n,o,r)=>{if(o===0)return;const i=re.fromDom(e),u=xs(i,A=>r.isBlock(Jn(A))).getOr(i),g=e.data.slice(n,n+o),y=n+o>=e.data.length&&B0(u,De(e,e.data.length),r),x=n===0&&N0(u,De(e,0),r);e.replaceData(n,o,Wf(g,4,x,y))},pb=(e,n,o)=>{const r=e.data.slice(n),i=r.length-Td(r).length;_s(e,n,i,o)},nN=(e,n,o)=>{const r=e.data.slice(0,n),i=r.length-Ou(r).length;_s(e,n-i,i,o)},Xr=(e,n,o,r,i=!0)=>{const u=Ou(e.data).length,g=i?e:n,y=i?n:e;return i?g.appendData(y.data):g.insertData(0,y.data),ho(re.fromDom(y)),r&&pb(g,u,o),g},z7=(e,n)=>{const o=e.container(),r=e.offset();return!De.isTextPosition(e)&&o===n.parentNode&&r>De.before(n).offset()},V7=(e,n)=>z7(n,e)?De(n.container(),n.offset()-1):n,pg=e=>nt(e)?De(e,0):De.before(e),wo=e=>nt(e)?De(e,e.data.length):De.after(e),JA=e=>fr(e.previousSibling)?Z.some(wo(e.previousSibling)):e.previousSibling?xl(e.previousSibling):Z.none(),QA=e=>fr(e.nextSibling)?Z.some(pg(e.nextSibling)):e.nextSibling?ii(e.nextSibling):Z.none(),U7=(e,n)=>Z.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>Ei(e,De.before(o))).orThunk(()=>Ua(e,De.after(n))),W7=(e,n)=>Ua(e,De.after(n)).orThunk(()=>Ei(e,De.before(n))),Z7=(e,n)=>JA(n).orThunk(()=>QA(n)).orThunk(()=>U7(e,n)),Kc=(e,n)=>QA(n).orThunk(()=>JA(n)).orThunk(()=>W7(e,n)),rd=(e,n,o)=>e?Kc(n,o):Z7(n,o),oN=(e,n,o)=>rd(e,n,o).map(qe(V7,o)),NE=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},e4=e=>n=>n.dom===e,BE=(e,n)=>n&&cn(e.schema.getBlockElements(),Jn(n)),sN=(e,n)=>{if(Ns(e)){const o=re.fromHtml('<br data-mce-bogus="1">');return n?$e(ur(e),r=>{tb(r)||ho(r)}):Rd(e),Js(e,o),Z.some(De.before(o.dom))}else return Z.none()},YC=(e,n,o,r)=>{const i=zc(e).filter(Ur),u=gl(e).filter(Ur);return ho(e),Wl(i,u,n,(g,y,x)=>{const A=g.dom,I=y.dom,F=A.data.length;return Xr(A,I,o,r),x.container()===I?De(A,F):x}).orThunk(()=>(r&&(i.each(g=>nN(g.dom,g.dom.length,o)),u.each(g=>pb(g.dom,0,o))),n))},$E=(e,n)=>cn(e.schema.getTextInlineElements(),Jn(n)),bg=(e,n,o,r=!0,i=!1)=>{const u=oN(n,e.getBody(),o.dom),g=xs(o,qe(BE,e),e4(e.getBody())),y=YC(o,u,e.schema,$E(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):g.bind(x=>sN(x,i)).fold(()=>{r&&NE(e,n,y)},x=>{r&&NE(e,n,Z.some(x))})},rN=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,XC=e=>rN.test(e),bb=(e,n)=>Vi(re.fromDom(n),RO(e))&&!Ln(e.schema,n)&&e.dom.isEditable(n),aN=e=>{var n;return jo.DOM.getStyle(e,"direction",!0)==="rtl"||XC((n=e.textContent)!==null&&n!==void 0?n:"")},rm=(e,n,o)=>jt(jo.DOM.getParents(o.container(),"*",n),e),ha=(e,n,o)=>{const r=rm(e,n,o);return Z.from(r[r.length-1])},JC=(e,n,o)=>{const r=Gd(n,e),i=Gd(o,e);return Te(r)&&r===i},du=e=>zu(e)||bv(e),mu=(e,n)=>{const o=n.container(),r=n.offset();return e?wi(o)?nt(o.nextSibling)?De(o.nextSibling,0):De.after(o):zu(n)?De(o,r+1):n:wi(o)?nt(o.previousSibling)?De(o.previousSibling,o.previousSibling.data.length):De.before(o):bv(n)?De(o,r-1):n},Vo=qe(mu,!0),iN=qe(mu,!1),np=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},QC=e=>{e.execCommand("delete")},IE=e=>np(e,"Delete"),t4=e=>np(e,"ForwardDelete"),n4=e=>n=>Ps(aa(n),e,so),j7=e=>_e(e)||Fu(e),$0=(e,n)=>Ca(e,n)?hi(n,j7,n4(e)):Z.none(),o4=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},s4=(e,n,o)=>Mr(ii(o),xl(o),(r,i)=>{const u=mu(!0,r),g=mu(!1,i),y=mu(!1,n);return e?Ua(o,y).exists(x=>x.isEqual(g)&&n.isEqual(u)):Ei(o,y).exists(x=>x.isEqual(u)&&n.isEqual(g))}).getOr(!0),r4=e=>(ev(e)?zc(e):Vc(e)).bind(r4).orThunk(()=>Z.some(e)),FE=(e,n,o,r=!0)=>{var i;n.deleteContents();const u=r4(o).getOr(o),g=re.fromDom((i=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&i!==void 0?i:o.dom);if(g.dom===e.getBody()?o4(e,r):Ns(g)&&(Hu(g),r&&e.selection.setCursorLocation(g.dom,0)),!so(o,g)){const y=Ps(aa(g),o)?[]:av(g);$e(y.concat(ur(o)),x=>{!so(x,g)&&!Ca(x,g)&&Ns(x)&&ho(x)})}},cN=(e,n,o)=>xs(e,n,o).isSome(),LE=(e,n)=>n1(e,n).isSome(),lN=(e,n)=>Wr(e,n).isSome(),G7=e=>n=>so(e,n),a4=e=>Zr(e,"td,th"),uN=(e,n)=>Yd(re.fromDom(e),n),q7=e=>Mr(e.startTable,e.endTable,(n,o)=>{const r=lN(n,u=>so(u,o)),i=lN(o,u=>so(u,n));return!r&&!i?e:{...e,startTable:r?Z.none():e.startTable,endTable:i?Z.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),dN=e=>q7(e),K7=(e,n)=>{const o=uN(e.startContainer,n),r=uN(e.endContainer,n),i=o.isSome(),u=r.isSome(),g=Mr(o,r,so).getOr(!1);return dN({startTable:o,endTable:r,isStartInTable:i,isEndInTable:u,isSameTable:g,isMultiTable:!g&&i&&u})},i4=(e,n)=>({start:e,end:n}),mN=(e,n,o)=>({rng:e,table:n,cells:o}),eS=ru.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),tS=(e,n)=>pl(re.fromDom(e),"td,th",n),I0=e=>!so(e.start,e.end),fN=(e,n)=>Yd(e.start,n).bind(o=>Yd(e.end,n).bind(r=>to(so(o,r),o))),Y7=(e,n)=>!I0(e)&&fN(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),gN=(e,n)=>{const o=tS(e.startContainer,n),r=tS(e.endContainer,n);return Mr(o,r,i4)},X7=e=>n=>Yd(n,e).bind(o=>$i(a4(o)).map(r=>i4(n,r))),hN=e=>n=>Yd(n,e).bind(o=>Ks(a4(o)).map(r=>i4(r,n))),Cc=e=>n=>fN(n,e).map(o=>mN(n,o,a4(o))),pN=(e,n,o,r)=>{if(o.collapsed||!e.forall(I0))return Z.none();if(n.isSameTable){const i=e.bind(Cc(r));return Z.some({start:i,end:i})}else{const i=tS(o.startContainer,r),u=tS(o.endContainer,r),g=i.bind(X7(r)).bind(Cc(r)),y=u.bind(hN(r)).bind(Cc(r));return Z.some({start:g,end:y})}},c4=(e,n)=>ea(e,o=>so(o,n)),nS=e=>Mr(c4(e.cells,e.rng.start),c4(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),l4=(e,n,o)=>e.exists(r=>Y7(r,o)&&EC(r.start,n)),u4=(e,n)=>{const{startTable:o,endTable:r}=n,i=e.cloneRange();return o.each(u=>i.setStartAfter(u.dom)),r.each(u=>i.setEndBefore(u.dom)),i},bN=(e,n,o,r)=>pN(e,n,o,r).bind(({start:i,end:u})=>i.or(u)).bind(i=>{const{isSameTable:u}=n,g=nS(i).getOr([]);if(u&&i.cells.length===g.length)return Z.some(eS.fullTable(i.table));if(g.length>0){if(u)return Z.some(eS.partialTable(g,Z.none()));{const y=u4(o,n);return Z.some(eS.partialTable(g,Z.some({...n,rng:y})))}}else return Z.none()}),J7=(e,n,o,r)=>pN(e,n,o,r).bind(({start:i,end:u})=>{const g=i.bind(nS).getOr([]),y=u.bind(nS).getOr([]);if(g.length>0&&y.length>0){const x=u4(o,n);return Z.some(eS.multiTable(g,y,x))}else return Z.none()}),Q7=(e,n)=>{const o=G7(e),r=gN(n,o),i=K7(n,o);return l4(r,n,o)?r.map(u=>eS.singleCellTable(n,u.start)):i.isMultiTable?J7(r,i,n,o):bN(r,i,n,o)},HE=e=>$e(e,n=>{Is(n,"contenteditable"),Hu(n)}),vN=(e,n)=>Z.from(e.dom.getParent(n,e.dom.isBlock)).map(re.fromDom),ad=(e,n,o)=>{o.each(r=>{n?ho(r):(Hu(r),e.selection.setCursorLocation(r.dom,0))})},d4=(e,n,o,r)=>{const i=o.cloneRange();r?(i.setStart(o.startContainer,o.startOffset),i.setEndAfter(n.dom.lastChild)):(i.setStartBefore(n.dom.firstChild),i.setEnd(o.endContainer,o.endOffset)),f4(e,i,n,!1).each(u=>u())},yN=e=>{const n=Uh(e),o=re.fromDom(e.selection.getNode());l1(o.dom)&&Ns(o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&Po(n,r=>so(r,o))&&ns(o,"data-mce-selected","1")},eH=(e,n,o)=>Z.some(()=>{const r=e.selection.getRng(),i=o.bind(({rng:u,isStartInTable:g})=>{const y=vN(e,g?u.endContainer:u.startContainer);u.deleteContents(),ad(e,g,y.filter(Ns));const x=g?n[0]:n[n.length-1];return d4(e,x,r,g),Ns(x)?Z.none():Z.some(g?n.slice(1):n.slice(0,-1))}).getOr(n);HE(i),yN(e)}),m4=(e,n,o,r)=>Z.some(()=>{const i=e.selection.getRng(),u=n[0],g=o[o.length-1];d4(e,u,i,!0),d4(e,g,i,!1);const y=Ns(u)?n:n.slice(1),x=Ns(g)?o:o.slice(0,-1);HE(y.concat(x)),r.deleteContents(),yN(e)}),f4=(e,n,o,r=!0)=>Z.some(()=>{FE(e,n,o,r)}),F0=(e,n)=>Z.some(()=>bg(e,!1,n)),tH=(e,n,o)=>Q7(n,o).bind(r=>r.fold(qe(f4,e),qe(F0,e),qe(eH,e),qe(m4,e))),L0=(e,n)=>sS(e,n),fu=(e,n,o,r)=>vb(n,r).fold(()=>tH(e,n,o),i=>L0(e,i)),oS=(e,n,o)=>{const r=re.fromDom(e.getBody()),i=e.selection.getRng();return o.length!==0?eH(e,o,Z.none()):fu(e,r,i,n)},Io=(e,n)=>As(sf(n,e),ji),vb=(e,n)=>As(sf(n,e),zi("caption")),wN=(e,n,o,r,i)=>Kd(o,e.getBody(),i).bind(u=>Io(n,re.fromDom(u.getNode())).bind(g=>so(g,r)?Z.none():Z.some(Dt))),sS=(e,n)=>Z.some(()=>{Hu(n),e.selection.setCursorLocation(n.dom,0)}),g4=(e,n,o,r)=>ii(e.dom).bind(i=>xl(e.dom).map(u=>n?o.isEqual(i)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(i))).getOr(!0),h4=(e,n)=>sS(e,n),p4=(e,n,o)=>vb(e,re.fromDom(o.getNode())).fold(()=>Z.some(Dt),r=>to(!so(r,n),Dt)),b4=(e,n,o,r,i)=>Kd(o,e.getBody(),i).fold(()=>Z.some(Dt),u=>g4(r,o,i,u)?h4(e,r):p4(n,r,u)),zE=(e,n,o,r)=>{const i=De.fromRangeStart(e.selection.getRng());return Io(o,r).bind(u=>Ns(u)?sS(e,u):wN(e,o,n,u,i))},v4=(e,n,o,r)=>{const i=De.fromRangeStart(e.selection.getRng());return Ns(r)?sS(e,r):b4(e,o,n,r,i)},y4=(e,n)=>e?LP(n):kn(n),CN=(e,n)=>{const o=De.fromRangeStart(e.selection.getRng());return y4(n,o)||Yr(n,e.getBody(),o).exists(r=>y4(n,r))},SN=(e,n,o)=>{const r=re.fromDom(e.getBody());return vb(r,o).fold(()=>zE(e,n,r,o).orThunk(()=>to(CN(e,n),Dt)),i=>v4(e,n,r,i))},VE=(e,n)=>{const o=re.fromDom(e.selection.getStart(!0)),r=Uh(e);return e.selection.isCollapsed()&&r.length===0?SN(e,n,o):oS(e,o,r)},op=(e,n)=>{let o=n;for(;o&&o!==e;){if(Fa(o)||Un(o))return o;o=o.parentNode}return null},H0=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],xN=at.each,rS=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,g)=>{if(u.nodeName!==g.nodeName||u.nodeType!==g.nodeType)return!1;const y=A=>{const I={};return xN(n.getAttribs(A),F=>{const V=F.nodeName.toLowerCase();V!=="style"&&!i(V)&&(I[V]=n.getAttrib(A,V))}),I},x=(A,I)=>{for(const F in A)if(cn(A,F)){const V=I[F];if(bt(V)||A[F]!==V)return!1;delete I[F]}for(const F in I)if(cn(I,F))return!1;return!0};return Mt(u)&&Mt(g)&&(!x(y(u),y(g))||!x(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(g,"style"))))?!1:!bc(u)&&!bc(g)},i=u=>Po(H0,g=>$s(u,g))||o.has(u);return{compare:r,isAttributeInternal:i}},EN=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),nH=e=>e.name==="summary",TN=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},w4=(e,n,o,r)=>{const i=o.name;for(let u=0,g=e.length;u<g;u++){const y=e[u];if(y.name===i){const x=r.nodes[i];x?x.nodes.push(o):r.nodes[i]={filter:y,nodes:[o]}}}if(o.attributes)for(let u=0,g=n.length;u<g;u++){const y=n[u],x=y.name;if(x in o.attributes.map){const A=r.attributes[x];A?A.nodes.push(o):r.attributes[x]={filter:y,nodes:[o]}}}},_N=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&TN(o,i=>{w4(e,n,i,r)}),r},aS=(e,n)=>{const o=(r,i)=>{Ct(r,u=>{const g=Dr(u.nodes);$e(u.filter.callbacks,y=>{for(let x=g.length-1;x>=0;x--){const A=g[x];(!(i?A.attr(u.filter.name)!==void 0:A.name===u.filter.name)||It(A.parent))&&g.splice(x,1)}g.length>0&&y(g,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},C4=(e,n,o,r={})=>{const i=_N(e,n,o);aS(i,r)},UE=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const u=new ki("br",1);n.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new ki("#text",3)).value=ro},kN=e=>{var n;return S4(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===ro},S4=(e,n)=>{const o=e==null?void 0:e.firstChild;return Te(o)&&o===e.lastChild&&o.name===n},ON=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},z0=(e,n,o,r)=>r.isEmpty(n,o,i=>ON(e,i)),AN=(e,n)=>Te(e)&&(n(e)||e.name==="br"),DN=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return Z.from(n)},WE=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const i of r)o&&!n.isValidChild(o.name,i.name)&&WE(i,n,o);e.unwrap()}},ZE=(e,n,o,r=Dt)=>{const i=n.getTextBlockElements(),u=n.getNonEmptyElements(),g=n.getWhitespaceElements(),y=at.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),x=new Set,A=I=>I!==o&&!y[I.name];for(let I=0;I<e.length;I++){const F=e[I];let V,J,ne;if(!F.parent||x.has(F))continue;if(i[F.name]&&F.parent.name==="li"){let oe=F.next;for(;oe&&i[oe.name];){oe.name="li",x.add(oe),F.parent.insert(oe,F.parent);oe=oe.next}F.unwrap();continue}const Y=[F];for(V=F.parent;V&&!n.isValidChild(V.name,F.name)&&A(V);V=V.parent)Y.push(V);if(V&&Y.length>1)if(jE(n,F,V))WE(F,n);else{Y.reverse(),J=Y[0].clone(),r(J);let oe=J;for(let he=0;he<Y.length-1;he++){n.isValidChild(oe.name,Y[he].name)&&he>0?(ne=Y[he].clone(),r(ne),oe.append(ne)):ne=oe;for(let be=Y[he].firstChild;be&&be!==Y[he+1];){const ye=be.next;ne.append(be),be=ye}oe=ne}z0(n,u,g,J)?V.insert(F,Y[0],!0):(V.insert(J,Y[0],!0),V.insert(F,J)),V=Y[0],(z0(n,u,g,V)||S4(V,"br"))&&V.empty().remove()}else if(F.parent){if(F.name==="li"){let oe=F.prev;if(oe&&(oe.name==="ul"||oe.name==="ol")){oe.append(F);continue}if(oe=F.next,oe&&(oe.name==="ul"||oe.name==="ol")&&oe.firstChild){oe.insert(F,oe.firstChild,!0);continue}const he=new ki("ul",1);r(he),F.wrap(he);continue}if(n.isValidChild(F.parent.name,"div")&&n.isValidChild("div",F.name)){const oe=new ki("div",1);r(oe),F.wrap(oe)}else WE(F,n)}}},x4=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},jE=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&x4(o,"a")?!0:nH(o)&&EN(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,RN=(e,n,o,r)=>{const i=document.createRange();return i.setStart(e,n),i.setEnd(o,r),i},MN=e=>{const n=De.fromRangeStart(e),o=De.fromRangeEnd(e),r=e.commonAncestorContainer;return Yr(!1,r,o).map(i=>!au(n,o,r)&&au(n,i,r)?RN(n.container(),n.offset(),i.container(),i.offset()):e).getOr(e)},GE=e=>e.collapsed?e:MN(e),PN=e=>Te(e.firstChild)&&e.firstChild===e.lastChild,NN=e=>e.name==="br"||e.value===ro,E4=(e,n)=>e.getBlockElements()[n.name]&&PN(n)&&NN(n.firstChild),qE=(e,n)=>{const o=e.getNonEmptyElements();return Te(n)&&(n.isEmpty(o)||E4(e,n))},KE=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),qE(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},YE=e=>{var n,o;const r=e.firstChild,i=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),i&&i.id==="mce_marker"&&((o=i.parentNode)===null||o===void 0||o.removeChild(i)),e},BN=(e,n,o)=>{const r=n.serialize(o),i=e.createFragment(r);return YE(i)},XE=e=>{var n;return jt((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},T4=e=>e.data===ro||No(e),iS=e=>Te(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&T4(e.firstChild),_4=e=>!e.firstChild||iS(e),$N=e=>e.length>0&&_4(e[e.length-1])?e.slice(0,-1):e,sp=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},k4=(e,n)=>!!sp(e,n),O4=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},cS=(e,n)=>{const o=De.before(e),i=iu(n).next(o);return i?i.toRange():null},vg=(e,n)=>{const o=De.after(e),i=iu(n).prev(o);return i?i.toRange():null},IN=(e,n,o,r)=>{const i=O4(e,r),u=e.parentNode;return u&&(u.insertBefore(i[0],e),at.each(n,g=>{u.insertBefore(g,e)}),u.insertBefore(i[1],e),u.removeChild(e)),vg(n[n.length-1],o)},oH=(e,n,o)=>{const r=e.parentNode;return r&&at.each(n,i=>{r.insertBefore(i,e)}),cS(e,o)},FN=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),vg(n[0],o)),LN=(e,n,o,r)=>{const i=BN(n,e,r),u=sp(n,o.startContainer),g=$N(XE(i.firstChild)),y=1,x=2,A=n.getRoot(),I=F=>{const V=De.fromRangeStart(o),J=iu(n.getRoot()),ne=F===y?J.prev(V):J.next(V),Y=ne==null?void 0:ne.getNode();return Y?sp(n,Y)!==u:!0};return u?I(y)?oH(u,g,A):I(x)?FN(u,g,A,n):IN(u,g,A,o):null},sH=["pre"],XK=(e,n,o,r)=>{var i;const u=n.firstChild,g=n.lastChild,y=g.attr("data-mce-type")==="bookmark"?g.prev:g,x=u===y,A=on(sH,u.name);if(x&&A){const I=u.attr("contenteditable")!=="false",F=((i=e.getParent(o,e.isBlock))===null||i===void 0?void 0:i.nodeName.toLowerCase())===u.name,V=Z.from(op(r,o)).forall(Fa);return I&&F&&V}else return!1},A4=l1,D4=(e,n,o)=>{if(Te(o)){const r=e.getParent(n.endContainer,A4);return o===r&&EC(re.fromDom(o),n)}else return!1},am=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const i=o.firstChild,u=o.lastChild;!i||i===u&&i.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},R4=(e,n,o)=>{Z.from(e.getParent(n,"td,th")).map(re.fromDom).each(r=>en(r,o))},JE=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const i=e.getBody(),u=rS(e);at.each(r.select("*[data-mce-fragment]"),g=>{if(Te(o[g.nodeName.toLowerCase()])&&jC(r,g)){for(let x=g.parentElement;Te(x)&&x!==i&&!C7(r,g,x);x=x.parentElement)if(u.compare(x,g)){r.remove(g,!0);break}}})}},M4=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},rH=e=>{at.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},HN=e=>!!e.getAttribute("data-mce-fragment"),aH=(e,n)=>Te(n)&&!e.schema.getVoidElements()[n.nodeName],zN=(e,n)=>{var o,r,i;let u;const g=e.dom,y=e.selection;if(!n)return;y.scrollIntoView(n);const x=op(e.getBody(),n);if(x&&g.getContentEditable(x)==="false"){g.remove(n),y.select(x);return}let A=g.createRng();const I=n.previousSibling;if(nt(I)){A.setStart(I,(r=(o=I.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const J=n.nextSibling;nt(J)&&(I.appendData(J.data),(i=J.parentNode)===null||i===void 0||i.removeChild(J))}else A.setStartBefore(n),A.setEndBefore(n);const F=J=>{let ne=De.fromRangeStart(J);return ne=iu(e.getBody()).next(ne),ne==null?void 0:ne.toRange()},V=g.getParent(n,g.isBlock);if(g.remove(n),V&&g.isEmpty(V)){const J=A4(V);Rd(re.fromDom(V)),A.setStart(V,0),A.setEnd(V,0),!J&&!HN(V)&&(u=F(A))?(A=u,g.remove(V)):g.add(V,g.create("br",J?{}:{"data-mce-bogus":"1"}))}y.setRng(A)},P4=e=>{const n=e.dom,o=GE(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,A4);D4(n,o,r)?f4(e,o,re.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&nt(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},iH=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return Z.some(n);return Z.none()},VN=(e,n,o)=>{var r;return Po(o.children(),EN)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},cH=(e,n,o)=>{var r,i;const u=e.selection,g=e.dom,y=e.parser,x=o.merge,A=ep({validate:!0},e.schema),I='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=uc(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,I);let F=u.getRng();const V=F.startContainer,J=e.getBody();V===J&&u.isCollapsed()&&g.isBlock(J.firstChild)&&aH(e,J.firstChild)&&g.isEmpty(J.firstChild)&&(F=g.createRng(),F.setStart(J.firstChild,0),F.setEnd(J.firstChild,0),u.setRng(F)),u.isCollapsed()||P4(e);const ne=u.getNode(),Y={context:ne.nodeName.toLowerCase(),data:o.data,insert:!0},oe=y.parse(n,Y);if(o.paste===!0&&KE(e.schema,oe)&&k4(g,ne))return F=LN(A,g,u.getRng(),oe),F&&u.setRng(F),n;o.paste===!0&&XK(g,oe,ne,e.getBody())&&((r=oe.firstChild)===null||r===void 0||r.unwrap()),M4(oe);let he=oe.lastChild;if(he&&he.attr("id")==="mce_marker"){const be=he;for(he=he.prev;he;he=he.walk(!0))if(he.type===3||!g.isBlock(he.name)){he.parent&&e.schema.isValidChild(he.parent.name,"span")&&he.parent.insert(be,he,he.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(ne),!Y.invalid&&!VN(g,ne,oe))n=A.serialize(oe),am(e,n,ne);else{e.selection.setContent(I);let be=u.getNode(),ye;const Ee=e.getBody();for(c1(be)?be=ye=Ee:ye=be;ye&&ye!==Ee;)be=ye,ye=ye.parentNode;n=be===Ee?Ee.innerHTML:g.getOuterHTML(be);const Ye=y.parse(n),st=iH(Ye),xt=st.bind(DN).getOr(Ye);st.each(Tt=>Tt.replace(oe));const Le=oe.children(),Me=(i=oe.parent)!==null&&i!==void 0?i:Ye;oe.unwrap();const Qe=jt(Le,Tt=>jE(e.schema,Tt,Me));ZE(Qe,e.schema,xt),C4(y.getNodeFilters(),y.getAttributeFilters(),Ye),n=A.serialize(Ye),be===Ee?g.setHTML(Ee,n):g.setOuterHTML(be,n)}return JE(e,x),zN(e,g.get("mce_marker")),rH(e.getBody()),R4(g,u.getStart(),e.schema),W2(e.schema,e.getBody(),u.getStart()),n},rp=e=>e instanceof ki,UN=e=>{Qh(e)&&ii(e.getBody()).each(n=>{const o=n.getNode(),r=$u(o)?ii(o).getOr(n):n;e.selection.setRng(r.toRange())})},N4=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&UN(e)},WN=(e,n,o,r)=>{if(o=uc(o),o.length===0||/^\s+$/.test(o)){const i='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+i+"</li>");const u=za(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=i,o=e.dom.createHTML(u,M1(e),o)):o||(o=i),N4(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=ep({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const i=Cr(re.fromDom(n))?o:at.trim(o);return N4(e,i,r.no_selection),{content:i,html:i}}},lH=(e,n,o,r)=>{C4(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const i=ep({validate:!1},e.schema).serialize(o),u=uc(Cr(re.fromDom(n))?i:at.trim(i));return N4(e,u,r.no_selection),{content:o,html:u}},uH=(e,n,o)=>Z.from(e.getBody()).map(r=>rp(n)?lH(e,r,n,o):WN(e,r,n,o)).getOr({content:n,html:rp(o.content)?"":o.content}),ZN=e=>ue(e)?e:Xe,dH=(e,n,o)=>{let r=e.dom;const i=ZN(o);for(;r.parentNode;){r=r.parentNode;const u=re.fromDom(r),g=n(u);if(g.isSome())return g;if(i(u))break}return Z.none()},B4=(e,n,o)=>{const r=n(e),i=ZN(o);return r.orThunk(()=>i(e)?Z.none():dH(e,n,i))},QE=v0,jN=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let i=0;i<r.length;i++){const u=r[i];if(fa(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},lS=(e,n,o,r,i)=>{const u=e.dom.getRoot();if(n===u)return!1;const g=e.dom.getParent(n,y=>jN(e,y,o)?!0:y.parentNode===u||!!af(e,y,o,r,!0));return!!af(e,g,o,r,i)},rf=(e,n,o)=>sr(o)&&QE(n,o.inline)||uu(o)&&QE(n,o.block)?!0:fa(o)?Mt(n)&&e.is(n,o.selector):!1,GN=(e,n,o,r,i,u)=>{const g=o[r],y=r==="attributes";if(ue(o.onmatch))return o.onmatch(n,o,r);if(g){if(wm(g)){for(let x=0;x<g.length;x++)if(y?e.getAttrib(n,g[x]):Wh(e,n,g[x]))return!0}else for(const x in g)if(cn(g,x)){const A=y?e.getAttrib(n,x):Wh(e,n,x),I=lu(g[x],u),F=It(A)||sa(A);if(F&&It(I))continue;if(i&&F&&!o.exact||(!i||o.exact)&&!QE(A,y0(I,x)))return!1}}return!0},af=(e,n,o,r,i)=>{const u=e.formatter.get(o),g=e.dom;if(u&&Mt(n))for(let y=0;y<u.length;y++){const x=u[y];if(rf(e.dom,n,x)&&GN(g,n,x,"attributes",i,r)&&GN(g,n,x,"styles",i,r)){const A=x.classes;if(A){for(let I=0;I<A.length;I++)if(!e.dom.hasClass(n,lu(A[I],r)))return}return x}}},V0=(e,n,o,r,i)=>{if(r)return lS(e,r,n,o,i);if(r=e.selection.getNode(),lS(e,r,n,o,i))return!0;const u=e.selection.getStart();return!!(u!==r&&lS(e,u,n,o,i))},qN=(e,n,o)=>{const r=[],i={},u=e.selection.getStart();return e.dom.getParent(u,g=>{for(let y=0;y<n.length;y++){const x=n[y];!i[x]&&af(e,g,x,o)&&(i[x]=!0,r.push(x))}},e.dom.getRoot()),r},KN=(e,n)=>{const o=i=>so(i,re.fromDom(e.getBody())),r=(i,u)=>af(e,i.dom,u)?Z.some(u):Z.none();return Z.from(e.selection.getStart(!0)).bind(i=>B4(re.fromDom(i),u=>Mc(n,g=>r(u,g)),o)).getOrNull()},mH=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const i=e.selection.getStart(),u=J1(r,i);for(let g=o.length-1;g>=0;g--){const y=o[g];if(!fa(y))return!0;for(let x=u.length-1;x>=0;x--)if(r.is(u[x],y.selector))return!0}}return!1},YN=(e,n,o)=>as(o,(r,i)=>{const u=OC(e,i);return e.formatter.matchNode(n,i,{},u)?r.concat([i]):r},[]),uS=Gr,yb=(e,n)=>e.importNode(n,!0),$4=e=>{if(e){const n=new Zo(e,e);for(let o=n.current();o;o=n.next())if(nt(o))return o}return null},eT=e=>{const n=re.fromTag("span");return Lc(n,{id:u0,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Js(n,re.fromText(uS)),n},XN=e=>{const n=$4(e);return n&&n.data.charAt(0)===uS&&n.deleteData(0,1),n},U0=(e,n,o)=>{const r=e.dom,i=e.selection;if(eb(n))bg(e,!1,re.fromDom(n),o,!0);else{const u=i.getRng(),g=r.getParent(n,r.isBlock),y=u.startContainer,x=u.startOffset,A=u.endContainer,I=u.endOffset,F=XN(n);r.remove(n,!0),y===F&&x>0&&u.setStart(F,x-1),A===F&&I>0&&u.setEnd(F,I-1),g&&r.isEmpty(g)&&Hu(re.fromDom(g)),i.setRng(u)}},tT=(e,n,o)=>{const r=e.dom,i=e.selection;if(n)U0(e,n,o);else if(n=ig(e.getBody(),i.getStart()),!n)for(;n=r.get(u0);)U0(e,n,o)},fH=(e,n,o)=>{var r,i;const u=e.dom,g=u.getParent(o,qe(hr,e.schema));g&&u.isEmpty(g)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(qM(re.fromDom(o)),u.isEmpty(o)?(i=o.parentNode)===null||i===void 0||i.replaceChild(n,o):u.insertAfter(n,o))},I4=(e,n)=>(e.appendChild(n),n),JN=(e,n)=>{var o;const r=Il(e,(u,g)=>I4(u,g.cloneNode(!1)),n),i=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return I4(r,i.createTextNode(uS))},gH=(e,n,o,r,i,u)=>{const g=e.formatter,y=e.dom,x=jt(Rr(g.get()),F=>F!==r&&!yr(F,"removeformat")),A=YN(e,o,x);if(jt(A,F=>!pA(e,F,r)).length>0){const F=o.cloneNode(!1);return y.add(n,F),g.remove(r,i,F,u),y.remove(F),Z.some(F)}else return Z.none()},nT=(e,n,o)=>{let r;const i=e.selection,u=e.formatter.get(n);if(!u)return;const g=i.getRng();let y=g.startOffset;const A=g.startContainer.nodeValue;r=ig(e.getBody(),i.getStart());const I=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(A&&y>0&&y<A.length&&I.test(A.charAt(y))&&I.test(A.charAt(y-1))){const F=i.getBookmark();g.collapse(!0);let V=Jd(e.dom,g,u);V=H(V),e.formatter.apply(n,o,V),i.moveToBookmark(F)}else{let F=r?$4(r):null;(!r||(F==null?void 0:F.data)!==uS)&&(r=yb(e.getDoc(),eT(!0).dom),F=r.firstChild,g.insertNode(r),y=1),e.formatter.apply(n,o,r),i.setCursorLocation(F,y)}},QN=(e,n,o,r)=>{const i=e.dom,u=e.selection;let g=!1;const y=e.formatter.get(n);if(!y)return;const x=u.getRng(),A=x.startContainer,I=x.startOffset;let F=A;nt(A)&&(I!==A.data.length&&(g=!0),F=F.parentNode);const V=[];let J;for(;F;){if(af(e,F,n,o,r)){J=F;break}F.nextSibling&&(g=!0),V.push(F),F=F.parentNode}if(J)if(g){const ne=u.getBookmark();x.collapse(!0);let Y=Jd(i,x,y,!0);Y=H(Y),e.formatter.remove(n,o,Y,r),u.moveToBookmark(ne)}else{const ne=ig(e.getBody(),J),Y=Te(ne)?i.getParents(J.parentNode,yt,ne):[],oe=eT(!1).dom;fH(e,oe,ne??J);const he=gH(e,oe,J,n,o,r),be=JN([...V,...he.toArray(),...Y],oe);ne&&U0(e,ne,Te(ne)),u.setCursorLocation(be,1),i.isEmpty(J)&&i.remove(J)}},F4=(e,n,o)=>{const r=e.selection,i=e.getBody();tT(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===uS&&tT(e,ig(i,r.getStart()),!0),(n===37||n===39)&&tT(e,ig(i,r.getStart()),!0)},hH=e=>nt(e)&&Ja(e.data,ro),pH=e=>{e.on("mouseup keydown",n=>{F4(e,n.keyCode,hH(e.selection.getRng().endContainer))})},L4=e=>{const n=eT(!1),o=JN(e,n.dom);return{caretContainer:n,caretPosition:De(o,0)}},oT=(e,n)=>{const{caretContainer:o,caretPosition:r}=L4(n);return dr(re.fromDom(e),o),ho(re.fromDom(e)),r},eB=(e,n)=>{const{caretContainer:o,caretPosition:r}=L4(n);return e.insertNode(o.dom),r},tB=(e,n)=>{if(pc(n.dom))return!1;const o=e.schema.getTextInlineElements();return cn(o,Jn(n))&&!pc(n.dom)&&!Kl(n.dom)},dS={},nB=mr(["pre"]),sT=(e,n)=>{dS[e]||(dS[e]=[]),dS[e].push(n)},yg=(e,n)=>{cn(dS,e)&&$e(dS[e],o=>{o(n)})};sT("pre",e=>{const n=e.selection.getRng(),o=i=>u=>{const g=u.previousSibling;return nB(g)&&on(i,g)},r=(i,u)=>{const g=re.fromDom(u),y=Zl(g).dom;ho(g),ko(re.fromDom(i),[re.fromTag("br",y),re.fromTag("br",y),...ur(g)])};if(!n.collapsed){const i=e.selection.getSelectedBlocks(),u=jt(jt(i,nB),o(i));$e(u,g=>{r(g.previousSibling,g)})}});const oB=["fontWeight","fontStyle","color","fontSize","fontFamily"],H4=e=>Ge(e.styles)&&Po(Rr(e.styles),n=>on(oB,n)),rr=e=>As(e,n=>sr(n)&&n.inline==="span"&&H4(n)),rT=(e,n)=>{const o=e.get(n);return _t(o)?rr(o):Z.none()},aT=(e,n)=>Ei(n,De.fromRangeStart(e)).isNone(),cf=(e,n)=>Ua(n,De.fromRangeEnd(e)).exists(o=>!No(o.getNode())||Ua(n,o).isSome())===!1,z4=e=>n=>pv(n)&&e.isEditable(n),sB=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return aT(o,n[0])&&cf(o,n[0])?n:[];{const r=Ks(n).filter(g=>aT(o,g)).toArray(),i=$i(n).filter(g=>cf(o,g)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(i)}},mS=e=>jt(sB(e),z4(e.dom)),rB=e=>jt(e.getSelectedBlocks(),z4(e.dom)),V4=at.each,ap=e=>Mt(e)&&!bc(e)&&!pc(e)&&!Kl(e),aB=(e,n)=>{for(let o=e;o;o=o[n]){if(nt(o)&&yo(o.data))return e;if(Mt(o)&&!bc(o))return o}return e},ip=(e,n,o)=>{const r=rS(e),i=Am(n)&&e.dom.isEditable(n),u=Am(o)&&e.dom.isEditable(o);if(i&&u){const g=aB(n,"previousSibling"),y=aB(o,"nextSibling");if(r.compare(g,y)){for(let x=g.nextSibling;x&&x!==y;){const A=x;x=x.nextSibling,g.appendChild(A)}return e.dom.remove(y),at.each(at.grep(y.childNodes),x=>{g.appendChild(x)}),g}}return o},iB=(e,n,o,r)=>{var i;if(r&&n.merge_siblings!==!1){const u=(i=ip(e,St(r),r))!==null&&i!==void 0?i:r;ip(e,u,St(u,!0))}},cp=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";V4(e.select(r,o),i=>{ap(i)&&e.isEditable(i)&&V4(n.styles,(u,g)=>{e.setStyle(i,g,"")})})}},Yc=(e,n,o)=>{V4(e.childNodes,r=>{ap(r)&&(n(r)&&o(r),r.hasChildNodes()&&Yc(r,n,o))})},iT=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},cT=(e,n)=>o=>!!(o&&Wh(e,o,n)),cB=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),iT(e,r)},wb=ru.generate([{keep:[]},{rename:["name"]},{removed:[]}]),lT=/^(src|href|style)$/,U4=at.each,Xc=v0,uT=e=>/^(TR|TH|TD)$/.test(e.nodeName),W4=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),dT=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],i=n[o?"startOffset":"endOffset"];if(Mt(r)){const u=r.childNodes.length-1;!o&&i&&i--,r=r.childNodes[i>u?u:i]}return nt(r)&&o&&i>=r.data.length&&(r=new Zo(r,e.getBody()).next()||r),nt(r)&&!o&&i===0&&(r=new Zo(r,e.getBody()).prev()||r),r},mT=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return uT(e)&&r?e.nodeName==="TR"&&r[o]||r:e},wg=(e,n,o,r)=>{var i;const u=e.create(o,r);return(i=n.parentNode)===null||i===void 0||i.insertBefore(u,n),u.appendChild(n),u},fT=(e,n,o,r,i)=>{const u=re.fromDom(n),g=re.fromDom(e.create(r,i)),y=o?Sa(u):e1(u);return ko(g,y),o?(dr(u,g),Bf(g,u)):(Uc(u,g),Js(g,u)),g.dom},bH=(e,n)=>n.links&&e.nodeName==="A",Z4=(e,n,o)=>{const r=n.parentNode;let i;const u=e.dom,g=za(e);uu(o)&&r===u.getRoot()&&(!o.list_block||!Xc(n,o.list_block))&&$e(Dr(n.childNodes),y=>{Xd(e,g,y.nodeName.toLowerCase())?i?i.appendChild(y):(i=wg(u,y,g),u.setAttribs(i,M1(e))):i=null}),!(C0(o)&&!Xc(o.inline,n))&&u.remove(n,!0)},lB=(e,n,o)=>Fn(e)?{name:n,value:null}:{name:e,value:lu(n,o)},uB=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},dB=(e,n,o,r,i)=>{let u=!1;U4(o.styles,(g,y)=>{const{name:x,value:A}=lB(y,g,r),I=y0(A,x);(o.remove_similar||ae(A)||!Mt(i)||Xc(Wh(e,i,x),I))&&e.setStyle(n,x,""),u=!0}),u&&uB(e,n)},vH=(e,n,o)=>{n==="removeformat"?$e(rB(e.selection),r=>{$e(oB,i=>e.dom.setStyle(r,i,"")),uB(e.dom,r)}):rT(e.formatter,n).each(r=>{$e(rB(e.selection),i=>dB(e.dom,i,r,o,null))})},W0=(e,n,o,r,i)=>{const u=e.dom,g=rS(e),y=e.schema;if(sr(n)&&h1(y,n.inline)&&Ln(y,r)&&r.parentElement===e.getBody())return Z4(e,r,n),wb.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!rf(u,r,n)&&!bH(r,n))return wb.keep();const x=r,A=n.preserve_attributes;if(sr(n)&&n.remove==="all"&&_t(A)){const I=jt(u.getAttribs(x),F=>on(A,F.name.toLowerCase()));if(u.removeAllAttribs(x),$e(I,F=>u.setAttrib(x,F.name,F.value)),I.length>0)return wb.rename("span")}if(n.remove!=="all"){dB(u,x,n,o,i),U4(n.attributes,(F,V)=>{const{name:J,value:ne}=lB(V,F,o);if(n.remove_similar||ae(ne)||!Mt(i)||Xc(u.getAttrib(i,J),ne)){if(J==="class"){const Y=u.getAttrib(x,J);if(Y){let oe="";if($e(Y.split(/\s+/),he=>{/mce\-\w+/.test(he)&&(oe+=(oe?" ":"")+he)}),oe){u.setAttrib(x,J,oe);return}}}if(lT.test(J)&&x.removeAttribute("data-mce-"+J),J==="style"&&mr(["li"])(x)&&u.getStyle(x,"list-style-type")==="none"){x.removeAttribute(J),u.setStyle(x,"list-style-type","none");return}J==="class"&&x.removeAttribute("className"),x.removeAttribute(J)}}),U4(n.classes,F=>{F=lu(F,o),(!Mt(i)||u.hasClass(i,F))&&u.removeClass(x,F)});const I=u.getAttribs(x);for(let F=0;F<I.length;F++){const V=I[F].nodeName;if(!g.isAttributeInternal(V))return wb.keep()}}return n.remove!=="none"?(Z4(e,x,n),wb.removed()):wb.keep()},yH=(e,n,o,r,i)=>{let u;return n.parentNode&&$e(J1(e.dom,n.parentNode).reverse(),g=>{if(!u&&Mt(g)&&g.id!=="_start"&&g.id!=="_end"){const y=af(e,g,o,r,i);y&&y.split!==!1&&(u=g)}}),u},mB=(e,n,o,r)=>W0(e,n,o,r,r).fold(ft(r),i=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,i)),ft(null)),j4=(e,n,o,r,i,u,g,y)=>{var x,A;let I,F;const V=e.dom;if(o){const J=o.parentNode;for(let ne=r.parentNode;ne&&ne!==J;ne=ne.parentNode){let Y=V.clone(ne,!1);for(let oe=0;oe<n.length&&(Y=mB(e,n[oe],y,Y),Y!==null);oe++);Y&&(I&&Y.appendChild(I),F||(F=Y),I=Y)}(!g.mixed||!V.isBlock(o))&&(r=(x=V.split(o,r))!==null&&x!==void 0?x:r),I&&F&&((A=i.parentNode)===null||A===void 0||A.insertBefore(I,i),F.appendChild(i),sr(g)&&iB(e,g,y,I))}return r},wH=(e,n,o,r,i)=>{const u=e.formatter.get(n),g=u[0],y=e.dom,x=e.selection,A=Y=>{const oe=yH(e,Y,n,o,i);return j4(e,u,oe,Y,Y,!0,g,o)},I=Y=>bc(Y)&&Mt(Y)&&(Y.id==="_start"||Y.id==="_end"),F=Y=>Po(u,oe=>Z0(e,oe,o,Y,Y)),V=Y=>{const oe=Dr(Y.childNodes),be=F(Y)||Po(u,Ye=>rf(y,Y,Ye)),ye=Y.parentNode;if(!be&&Te(ye)&&Q1(g)&&F(ye),g.deep&&oe.length)for(let Ye=0;Ye<oe.length;Ye++)V(oe[Ye]);$e(["underline","line-through","overline"],Ye=>{Mt(Y)&&e.dom.getStyle(Y,"text-decoration")===Ye&&Y.parentNode&&eE(y,Y.parentNode)===Ye&&Z0(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Ye}},void 0,Y)})},J=Y=>{const oe=y.get(Y?"_start":"_end");if(oe){let he=oe[Y?"firstChild":"lastChild"];return I(he)&&(he=he[Y?"firstChild":"lastChild"]),nt(he)&&he.data.length===0&&(he=Y?oe.previousSibling||oe.nextSibling:oe.nextSibling||oe.previousSibling),y.remove(oe,!0),he}else return null},ne=Y=>{let oe,he,be=Jd(y,Y,u,Y.collapsed);if(g.split){if(be=H(be),oe=dT(e,be,!0),he=dT(e,be),oe!==he){if(oe=mT(oe,!0),he=mT(he,!1),W4(y,oe,he)){const Ee=Z.from(oe.firstChild).getOr(oe);A(fT(y,Ee,!0,"span",{id:"_start","data-mce-type":"bookmark"})),J(!0);return}if(W4(y,he,oe)){const Ee=Z.from(he.lastChild).getOr(he);A(fT(y,Ee,!1,"span",{id:"_end","data-mce-type":"bookmark"})),J(!1);return}oe=wg(y,oe,"span",{id:"_start","data-mce-type":"bookmark"}),he=wg(y,he,"span",{id:"_end","data-mce-type":"bookmark"});const ye=y.createRng();ye.setStartAfter(oe),ye.setEndBefore(he),rb(y,ye,Ee=>{$e(Ee,Ye=>{!bc(Ye)&&!bc(Ye.parentNode)&&A(Ye)})}),A(oe),A(he),oe=J(!0),he=J()}else oe=he=A(oe);be.startContainer=oe.parentNode?oe.parentNode:oe,be.startOffset=y.nodeIndex(oe),be.endContainer=he.parentNode?he.parentNode:he,be.endOffset=y.nodeIndex(he)+1}rb(y,be,ye=>{$e(ye,V)})};if(r){if(K1(r)){const Y=y.createRng();Y.setStartBefore(r),Y.setEndAfter(r),ne(Y)}else ne(r);dg(e,n,r,o);return}!x.isCollapsed()||!sr(g)||Uh(e).length?(Y1(e,()=>ef(e,ne),Y=>sr(g)&&V0(e,n,o,Y)),e.nodeChanged()):QN(e,n,o,i),vH(e,n,o),dg(e,n,r,o)},G4=(e,n,o,r,i)=>{(r||e.selection.isEditable())&&wH(e,n,o,r,i)},Z0=(e,n,o,r,i)=>W0(e,n,o,r,i).fold(Xe,u=>(e.dom.rename(r,u),!0),yt),fB=at.each,CH=(e,n,o,r)=>{const i=u=>{if(Am(u)&&Mt(u.parentNode)&&e.isEditable(u)){const g=eE(e,u.parentNode);e.getStyle(u,"color")&&g?e.setStyle(u,"text-decoration",g):e.getStyle(u,"text-decoration")===g&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(at.walk(r,i,"childNodes"),i(r))},SH=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const i=cT(e,"fontSize");Yc(r,u=>i(u)&&e.isEditable(u),cB(e,"backgroundColor",lu(n.styles.backgroundColor,o)))}},xH=(e,n,o,r)=>{if(sr(n)&&(n.inline==="sub"||n.inline==="sup")){const i=cT(e,"fontSize");Yc(r,g=>i(g)&&e.isEditable(g),cB(e,"fontSize",""));const u=jt(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},EH=(e,n,o,r)=>{fB(n,i=>{sr(i)&&fB(e.dom.select(i.inline,r),u=>{ap(u)&&Z0(e,i,o,u,i.exact?u:null)}),cp(e.dom,i,r)})},TH=(e,n,o,r,i)=>{const u=i.parentNode;af(e,u,o,r)&&Z0(e,n,r,i)||n.merge_with_parents&&u&&e.dom.getParent(u,g=>af(e,g,o,r)?(Z0(e,n,r,i),!0):!1)},gT=at.each,_H=(e,n,o,r)=>{if(Tx(e)&&sr(n)&&o.parentNode){const i=G2(e.schema),u=LE(re.fromDom(o),g=>pc(g.dom));return va(i,r)&&Ns(re.fromDom(o.parentNode),!1)&&!u}else return!1},gB=(e,n,o,r)=>{if(gT(o.styles,(i,u)=>{e.setStyle(n,u,lu(i,r))}),o.styles){const i=e.getAttrib(n,"style");i&&e.setAttrib(n,"data-mce-style",i)}},kH=(e,n,o,r)=>{const i=e.formatter.get(n),u=i[0],g=!r&&e.selection.isCollapsed(),y=e.dom,x=e.selection,A=(ne,Y=u)=>{ue(Y.onformat)&&Y.onformat(ne,Y,o,r),gB(y,ne,Y,o),gT(Y.attributes,(oe,he)=>{y.setAttrib(ne,he,lu(oe,o))}),gT(Y.classes,oe=>{const he=lu(oe,o);y.hasClass(ne,he)||y.addClass(ne,he)})},I=(ne,Y)=>{let oe=!1;return gT(ne,he=>fa(he)?y.getContentEditable(Y)==="false"&&!he.ceFalseOverride||Te(he.collapsed)&&he.collapsed!==g?!0:y.is(Y,he.selector)&&!pc(Y)?(A(Y,he),oe=!0,!1):!0:!1),oe},F=ne=>{if(Q(ne)){const Y=y.create(ne);return A(Y),Y}else return null},V=(ne,Y,oe)=>{const he=[];let be=!0;const ye=u.inline||u.block,Ee=F(ye),Ye=Le=>w0(u)&&af(e,Le,n,o),st=(Le,Me,Qe)=>{const Tt=Zh(u)&&hr(e.schema,Le)&&Xd(e,Me,ye);return Qe&&Tt},xt=(Le,Me,Qe,Tt)=>{const Wt=Le.nodeName.toLowerCase(),Sn=Xd(e,ye,Wt)&&Xd(e,Me,ye),Mn=!oe&&nt(Le)&&Gi(Le.data),Ao=pc(Le),qo=!sr(u)||!ne.isBlock(Le);return(Qe||Tt)&&Sn&&!Mn&&!Ao&&qo};rb(ne,Y,Le=>{let Me;const Qe=Tt=>{let Wt=!1,Sn=be,Mn=!1;const Ao=Tt.parentNode,qo=Ao.nodeName.toLowerCase(),Gs=ne.getContentEditable(Tt);Te(Gs)&&(Sn=be,be=Gs==="true",Wt=!0,Mn=X1(e,Tt));const Ra=be&&!Wt;if(No(Tt)&&!_H(e,u,Tt,qo)){Me=null,uu(u)&&ne.remove(Tt);return}if(Ye(Tt)){Me=null;return}if(st(Tt,qo,Ra)){const Jr=ne.rename(Tt,ye);A(Jr),he.push(Jr),Me=null;return}if(fa(u)){let Jr=I(i,Tt);if(!Jr&&Te(Ao)&&Q1(u)&&(Jr=I(i,Ao)),!sr(u)||Jr){Me=null;return}}Te(Ee)&&xt(Tt,qo,Ra,Mn)?(Me||(Me=ne.clone(Ee,!1),Ao.insertBefore(Me,Tt),he.push(Me)),Mn&&Wt&&(be=Sn),Me.appendChild(Tt)):(Me=null,$e(Dr(Tt.childNodes),Qe),Wt&&(be=Sn),Me=null)};$e(Le,Qe)}),u.links===!0&&$e(he,Le=>{const Me=Qe=>{Qe.nodeName==="A"&&A(Qe,u),$e(Dr(Qe.childNodes),Me)};Me(Le)}),$e(he,Le=>{const Me=Wt=>{let Sn=0;return $e(Wt.childNodes,Mn=>{!Gc(Mn)&&!bc(Mn)&&Sn++}),Sn},Qe=Wt=>As(Wt.childNodes,_C).filter(Mn=>ne.getContentEditable(Mn)!=="false"&&rf(ne,Mn,u)).map(Mn=>{const Ao=ne.clone(Mn,!1);return A(Ao),ne.replace(Ao,Wt,!0),ne.remove(Mn,!0),Ao}).getOr(Wt),Tt=Me(Le);if((he.length>1||!ne.isBlock(Le))&&Tt===0){ne.remove(Le,!0);return}(sr(u)||uu(u)&&u.wrapper)&&(!u.exact&&Tt===1&&(Le=Qe(Le)),EH(e,i,o,Le),TH(e,u,n,o,Le),SH(ne,u,o,Le),CH(ne,u,o,Le),xH(ne,u,o,Le),iB(e,u,o,Le))})},J=K1(r)?r:x.getNode();if(y.getContentEditable(J)==="false"&&!X1(e,J)){r=J,I(i,r),Oa(e,n,r,o);return}if(u){if(r)if(K1(r)){if(!I(i,r)){const ne=y.createRng();ne.setStartBefore(r),ne.setEndAfter(r),V(y,Jd(y,ne,i),!0)}}else V(y,r,!0);else!g||!sr(u)||Uh(e).length?(x.setRng(GE(x.getRng())),Y1(e,()=>{ef(e,(ne,Y)=>{const oe=Y?ne:Jd(y,ne,i);V(y,oe,!1)})},yt),e.nodeChanged()):nT(e,n,o),rT(e.formatter,n).each(ne=>{$e(mS(e.selection),Y=>gB(y,Y,ne,o))});yg(n,e)}Oa(e,n,r,o)},hB=(e,n,o,r)=>{(r||e.selection.isEditable())&&kH(e,n,o,r)},pB=e=>cn(e,"vars"),OH=(e,n)=>{e.set({}),n.on("NodeChange",o=>{vB(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=Z.from(o.node).map(i=>K1(i)?i:i.startContainer).bind(i=>Mt(i)?Z.some(i):Z.from(i.parentElement)).getOrThunk(()=>q4(n));vB(n,r,e.get())})},q4=e=>e.selection.getStart(),bB=(e,n,o,r,i)=>Tu(n,y=>{const x=e.formatter.matchNode(y,o,i??{},r);return!bt(x)},y=>jN(e,y,o)?!0:r?!1:Te(e.formatter.matchNode(y,o,i,!0))),Cb=(e,n)=>{const o=n??q4(e);return jt(J1(e.dom,o),r=>Mt(r)&&!Kl(r))},vB=(e,n,o)=>{const r=Cb(e,n);Ct(o,(i,u)=>{const g=y=>{const x=bB(e,r,u,y.similar,pB(y)?y.vars:void 0),A=x.isSome();if(y.state.get()!==A){y.state.set(A);const I=x.getOr(n);pB(y)?y.callback(A,{node:I,format:u,parents:r}):$e(y.callbacks,F=>F(A,{node:I,format:u,parents:r}))}};$e([i.withSimilar,i.withoutSimilar],g),$e(i.withVars,g)})},AH=(e,n,o,r,i,u)=>{const g=n.get();$e(o.split(","),y=>{const x=Lo(g,y).getOrThunk(()=>{const I={withSimilar:{state:Ts(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Ts(!1),similar:!1,callbacks:[]},withVars:[]};return g[y]=I,I}),A=()=>{const I=Cb(e);return bB(e,I,y,i,u).isSome()};if(bt(u)){const I=i?x.withSimilar:x.withoutSimilar;I.callbacks.push(r),I.callbacks.length===1&&I.state.set(A())}else x.withVars.push({state:Ts(A()),similar:i,vars:u,callback:r})}),n.set(g)},DH=(e,n,o)=>{const r=e.get();$e(n.split(","),i=>Lo(r,i).each(u=>{r[i]={withSimilar:{...u.withSimilar,callbacks:jt(u.withSimilar.callbacks,g=>g!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:jt(u.withoutSimilar.callbacks,g=>g!==o)},withVars:jt(u.withVars,g=>g.callback!==o)}})),e.set(r)},RH=(e,n,o,r,i,u)=>(AH(e,n,o,r,i,u),{unbind:()=>DH(n,o,r)}),yB=(e,n,o,r)=>{const i=e.formatter.get(n);i&&(V0(e,n,o,r)&&(!("toggle"in i[0])||i[0].toggle)?G4(e,n,o,r):hB(e,n,o,r))},wB=at.explode,CB=()=>{const e={};return{addFilter:(i,u)=>{$e(wB(i),g=>{cn(e,g)||(e[g]={name:g,callbacks:[]}),e[g].callbacks.push(u)})},getFilters:()=>rl(e),removeFilter:(i,u)=>{$e(wB(i),g=>{if(cn(e,g))if(Te(u)){const y=e[g],x=jt(y.callbacks,A=>A!==u);x.length>0?y.callbacks=x:delete e[g]}else delete e[g]})}}},MH=(e,n)=>{$e(n,o=>{e.attr(o,null)})},PH=(e,n,o)=>{e.addNodeFilter("font",r=>{$e(r,i=>{const u=n.parse(i.attr("style")),g=i.attr("color"),y=i.attr("face"),x=i.attr("size");g&&(u.color=g),y&&(u["font-family"]=y),x&&cl(x).each(A=>{u["font-size"]=o[A-1]}),i.name="span",i.attr("style",n.serialize(u)),MH(i,["color","face","size"])})})},NH=(e,n,o)=>{e.addNodeFilter("strike",r=>{const i=n.type!=="html4";$e(r,u=>{if(i)u.name="s";else{const g=o.parse(u.attr("style"));g["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(g))}})})},BH=(e,n,o)=>{var r;const i=Av();n.convert_fonts_to_spans&&PH(e,i,at.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),NH(e,o,i)},$H=(e,n,o)=>{n.inline_styles&&BH(e,n,o)},SB=(e,n,o)=>{n.addNodeFilter("br",(r,i,u)=>{const g=at.extend({},o.getBlockElements()),y=o.getNonEmptyElements(),x=o.getWhitespaceElements();g.body=1;const A=I=>I.name in g||Id(o,I);for(let I=0,F=r.length;I<F;I++){let V=r[I],J=V.parent;if(J&&A(J)&&V===J.lastChild){let ne=V.prev;for(;ne;){const Y=ne.name;if(Y!=="span"||ne.attr("data-mce-type")!=="bookmark"){Y==="br"&&(V=null);break}ne=ne.prev}if(V&&(V.remove(),z0(o,y,x,J))){const Y=o.getElementRule(J.name);Y&&(Y.removeEmpty?J.remove():Y.paddEmpty&&UE(e,u,A,J))}}else{let ne=V;for(;J&&J.firstChild===ne&&J.lastChild===ne&&(ne=J,!g[J.name]);)J=J.parent;if(ne===J){const Y=new ki("#text",3);Y.value=ro,V.replace(Y)}}}})},IH=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),FH=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},fS=e=>{const[n,...o]=e.split(","),r=o.join(","),i=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(i){const u=i[2]===";base64",g=u?FH(r):decodeURIComponent(r);return Z.some({type:i[1],data:g,base64Encoded:u})}else return Z.none()},K4=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return Z.none()}const i=new Uint8Array(r.length);for(let u=0;u<i.length;u++)i[u]=r.charCodeAt(u);return Z.some(new Blob([i],{type:e}))},JK=e=>new Promise((n,o)=>{fS(e).bind(({type:r,data:i,base64Encoded:u})=>K4(r,i,u)).fold(()=>o("Invalid data URI"),n)}),gS=e=>$s(e,"blob:")?IH(e):$s(e,"data:")?JK(e):Promise.reject("Unknown URI format"),Y4=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var i;o((i=r.error)===null||i===void 0?void 0:i.message)},r.readAsDataURL(e)});let hS=0;const pS=e=>"blobid"+hS++,X4=(e,n,o)=>fS(e).bind(({data:r,type:i,base64Encoded:u})=>{if(n&&!u)return Z.none();{const g=u?r:btoa(r);return o(g,i)}}),LH=(e,n,o)=>{const r=e.create(pS(),n,o);return e.add(r),r},xB=(e,n,o=!1)=>X4(n,o,(r,i)=>Z.from(e.getByData(r,i)).orThunk(()=>K4(i,r).map(u=>LH(e,u,r)))),QK=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if($s(n,"blob:")){const r=e.getByUri(n);return Te(r)?Promise.resolve(r):gS(n).then(i=>Y4(i).then(u=>X4(u,!1,g=>Z.some(LH(e,i,g))).getOrThunk(o)))}else return $s(n,"data:")?xB(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},HH=e=>Te(e.attr("data-mce-bogus")),zH=e=>e.attr("src")===Et.transparentSrc||Te(e.attr("data-mce-placeholder")),eY=(e,n)=>{const{blob_cache:o}=n;if(o){const r=i=>{const u=i.attr("src");zH(i)||HH(i)||It(u)||xB(o,u,!0).each(g=>{i.attr("src",g.blobUri())})};e.addAttributeFilter("src",i=>$e(i,r))}},J4=(e,n)=>$s(e,`${n}/`),EB=(e,n,o,r,i)=>{let u;bt(e)?u="iframe":J4(e,"image")?u="img":J4(e,"video")?u="video":J4(e,"audio")?u="audio":u="iframe";const g=new ki(u,1);return g.attr(u==="audio"?{src:n}:{src:n,width:o,height:r}),(u==="audio"||u==="video")&&g.attr("controls",""),u==="iframe"&&i&&g.attr("sandbox",""),g},VH=(e,n)=>{const o=e.schema;n.remove_trailing_brs&&SB(n,e,o),e.addAttributeFilter("href",i=>{let u=i.length;const g=x=>x.split(" ").filter(I=>I.length>0).concat(["noopener"]).sort().join(" "),y=x=>{const A=x?at.trim(x):"";return/\b(noopener)\b/g.test(A)?A:g(A)};if(!n.allow_unsafe_link_target)for(;u--;){const x=i[u];x.name==="a"&&x.attr("target")==="_blank"&&x.attr("rel",y(x.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",i=>{let u=i.length,g,y,x,A;for(;u--;)if(A=i[u],A.name==="a"&&A.firstChild&&!A.attr("href"))for(x=A.parent,g=A.lastChild;g&&x;)y=g.prev,x.insert(g,A),g=y}),n.fix_list_elements&&e.addNodeFilter("ul,ol",i=>{let u=i.length,g,y;for(;u--;)if(g=i[u],y=g.parent,y&&(y.name==="ul"||y.name==="ol"))if(g.prev&&g.prev.name==="li")g.prev.append(g);else{const x=new ki("li",1);x.attr("style","list-style-type: none"),g.wrap(x)}});const r=o.getValidClasses();n.validate&&r&&e.addAttributeFilter("class",i=>{var u;let g=i.length;for(;g--;){const y=i[g],x=(u=y.attr("class"))!==null&&u!==void 0?u:"",A=at.explode(x," ");let I="";for(let F=0;F<A.length;F++){const V=A[F];let J=!1,ne=r["*"];ne&&ne[V]&&(J=!0),ne=r[y.name],!J&&ne&&ne[V]&&(J=!0),J&&(I&&(I+=" "),I+=V)}I.length||(I=null),y.attr("class",I)}}),eY(e,n),n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",i=>$e(i,u=>{u.replace(EB(u.attr("type"),u.name==="object"?u.attr("data"):u.attr("src"),u.attr("width"),u.attr("height"),n.sandbox_iframes))})),n.sandbox_iframes&&e.addNodeFilter("iframe",i=>$e(i,u=>u.attr("sandbox","")))};/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:Q4,setPrototypeOf:TB,isFrozen:hT,getPrototypeOf:_B,getOwnPropertyDescriptor:Br}=Object;let{freeze:kl,seal:im,create:UH}=Object,{apply:kB,construct:Ol}=typeof Reflect<"u"&&Reflect;kl||(kl=function(n){return n}),im||(im=function(n){return n}),kB||(kB=function(n,o,r){return n.apply(o,r)}),Ol||(Ol=function(n,o){return new n(...o)});const Sb=hu(Array.prototype.forEach),Cg=hu(Array.prototype.pop),id=hu(Array.prototype.push),pT=hu(String.prototype.toLowerCase),eD=hu(String.prototype.toString),xb=hu(String.prototype.match),lf=hu(String.prototype.replace),j0=hu(String.prototype.indexOf),OB=hu(String.prototype.trim),gu=hu(Object.prototype.hasOwnProperty),Sc=hu(RegExp.prototype.test),G0=WH(TypeError);function hu(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];return kB(e,n,r)}}function WH(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return Ol(e,o)}}function Uo(e,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:pT;TB&&TB(e,null);let r=n.length;for(;r--;){let i=n[r];if(typeof i=="string"){const u=o(i);u!==i&&(hT(n)||(n[r]=u),i=u)}e[i]=!0}return e}function ZH(e){for(let n=0;n<e.length;n++)gu(e,n)||(e[n]=null);return e}function Eb(e){const n=UH(null);for(const[o,r]of Q4(e))gu(e,o)&&(Array.isArray(r)?n[o]=ZH(r):r&&typeof r=="object"&&r.constructor===Object?n[o]=Eb(r):n[o]=r);return n}function bS(e,n){for(;e!==null;){const r=Br(e,n);if(r){if(r.get)return hu(r.get);if(typeof r.value=="function")return hu(r.value)}e=_B(e)}function o(){return null}return o}const AB=kl(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),tD=kl(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),bT=kl(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),jH=kl(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Tb=kl(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),DB=kl(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),RB=kl(["#text"]),nD=kl(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),oD=kl(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),sD=kl(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),vT=kl(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),GH=im(/\{\{[\w\W]*|[\w\W]*\}\}/gm),MB=im(/<%[\w\W]*|[\w\W]*%>/gm),PB=im(/\${[\w\W]*}/gm),NB=im(/^data-[\-\w.\u00B7-\uFFFF]/),BB=im(/^aria-[\-\w]+$/),rD=im(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),$B=im(/^(?:\w+script|data):/i),qH=im(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),IB=im(/^html$/i),KH=im(/^[a-z][.\w]*(-[.\w]+)+$/i);var yT=Object.freeze({__proto__:null,MUSTACHE_EXPR:GH,ERB_EXPR:MB,TMPLIT_EXPR:PB,DATA_ATTR:NB,ARIA_ATTR:BB,IS_ALLOWED_URI:rD,IS_SCRIPT_OR_DATA:$B,ATTR_WHITESPACE:qH,DOCTYPE_NAME:IB,CUSTOM_ELEMENT:KH});const Sg={element:1,text:3,progressingInstruction:7,comment:8,document:9},FB=function(){return typeof window>"u"?null:window},LB=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";o&&o.hasAttribute(i)&&(r=o.getAttribute(i));const u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML(g){return g},createScriptURL(g){return g}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function vS(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:FB();const n=Pn=>vS(Pn);if(n.version="3.1.7",n.removed=[],!e||!e.document||e.document.nodeType!==Sg.document)return n.isSupported=!1,n;let{document:o}=e;const r=o,i=r.currentScript,{DocumentFragment:u,HTMLTemplateElement:g,Node:y,Element:x,NodeFilter:A,NamedNodeMap:I=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:F,DOMParser:V,trustedTypes:J}=e,ne=x.prototype,Y=bS(ne,"cloneNode"),oe=bS(ne,"remove"),he=bS(ne,"nextSibling"),be=bS(ne,"childNodes"),ye=bS(ne,"parentNode");if(typeof g=="function"){const Pn=o.createElement("template");Pn.content&&Pn.content.ownerDocument&&(o=Pn.content.ownerDocument)}let Ee,Ye="";const{implementation:st,createNodeIterator:xt,createDocumentFragment:Le,getElementsByTagName:Me}=o,{importNode:Qe}=r;let Tt={};n.isSupported=typeof Q4=="function"&&typeof ye=="function"&&st&&st.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Wt,ERB_EXPR:Sn,TMPLIT_EXPR:Mn,DATA_ATTR:Ao,ARIA_ATTR:qo,IS_SCRIPT_OR_DATA:Gs,ATTR_WHITESPACE:Ra,CUSTOM_ELEMENT:Jr}=yT;let{IS_ALLOWED_URI:mt}=yT,kt=null;const no=Uo({},[...AB,...tD,...bT,...Tb,...RB]);let qn=null;const Lt=Uo({},[...nD,...oD,...sD,...vT]);let Ht=Object.seal(UH(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),it=null,hn=null,Zn=!0,Mo=!0,Ko=!1,Ri=!0,Qc=!1,pf=!0,Mi=!1,gd=!1,wn=!1,jn=!1,mo=!1,ks=!1,Bs=!0,Cu=!1;const Oy="user-content-";let Ay=!0,bf=!1,vf={},Dp=null;const Dy=Uo({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let p2=null;const vk=Uo({},["audio","video","img","source","image","track"]);let Ub=null;const yk=Uo({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Rp="http://www.w3.org/1998/Math/MathML",Ry="http://www.w3.org/2000/svg",hd="http://www.w3.org/1999/xhtml";let yf=hd,My=!1,Py=null;const b2=Uo({},[Rp,Ry,hd],eD);let Wb=null;const fM=["application/xhtml+xml","text/html"],wk="text/html";let Ga=null,Mp=null;const Ag=o.createElement("form"),v2=function(Pe){return Pe instanceof RegExp||Pe instanceof Function},Ae=function(){let Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Mp&&Mp===Pe)){if((!Pe||typeof Pe!="object")&&(Pe={}),Pe=Eb(Pe),Wb=fM.indexOf(Pe.PARSER_MEDIA_TYPE)===-1?wk:Pe.PARSER_MEDIA_TYPE,Ga=Wb==="application/xhtml+xml"?eD:pT,kt=gu(Pe,"ALLOWED_TAGS")?Uo({},Pe.ALLOWED_TAGS,Ga):no,qn=gu(Pe,"ALLOWED_ATTR")?Uo({},Pe.ALLOWED_ATTR,Ga):Lt,Py=gu(Pe,"ALLOWED_NAMESPACES")?Uo({},Pe.ALLOWED_NAMESPACES,eD):b2,Ub=gu(Pe,"ADD_URI_SAFE_ATTR")?Uo(Eb(yk),Pe.ADD_URI_SAFE_ATTR,Ga):yk,p2=gu(Pe,"ADD_DATA_URI_TAGS")?Uo(Eb(vk),Pe.ADD_DATA_URI_TAGS,Ga):vk,Dp=gu(Pe,"FORBID_CONTENTS")?Uo({},Pe.FORBID_CONTENTS,Ga):Dy,it=gu(Pe,"FORBID_TAGS")?Uo({},Pe.FORBID_TAGS,Ga):{},hn=gu(Pe,"FORBID_ATTR")?Uo({},Pe.FORBID_ATTR,Ga):{},vf=gu(Pe,"USE_PROFILES")?Pe.USE_PROFILES:!1,Zn=Pe.ALLOW_ARIA_ATTR!==!1,Mo=Pe.ALLOW_DATA_ATTR!==!1,Ko=Pe.ALLOW_UNKNOWN_PROTOCOLS||!1,Ri=Pe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Qc=Pe.SAFE_FOR_TEMPLATES||!1,pf=Pe.SAFE_FOR_XML!==!1,Mi=Pe.WHOLE_DOCUMENT||!1,jn=Pe.RETURN_DOM||!1,mo=Pe.RETURN_DOM_FRAGMENT||!1,ks=Pe.RETURN_TRUSTED_TYPE||!1,wn=Pe.FORCE_BODY||!1,Bs=Pe.SANITIZE_DOM!==!1,Cu=Pe.SANITIZE_NAMED_PROPS||!1,Ay=Pe.KEEP_CONTENT!==!1,bf=Pe.IN_PLACE||!1,mt=Pe.ALLOWED_URI_REGEXP||rD,yf=Pe.NAMESPACE||hd,Ht=Pe.CUSTOM_ELEMENT_HANDLING||{},Pe.CUSTOM_ELEMENT_HANDLING&&v2(Pe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ht.tagNameCheck=Pe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Pe.CUSTOM_ELEMENT_HANDLING&&v2(Pe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ht.attributeNameCheck=Pe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Pe.CUSTOM_ELEMENT_HANDLING&&typeof Pe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ht.allowCustomizedBuiltInElements=Pe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Qc&&(Mo=!1),mo&&(jn=!0),vf&&(kt=Uo({},RB),qn=[],vf.html===!0&&(Uo(kt,AB),Uo(qn,nD)),vf.svg===!0&&(Uo(kt,tD),Uo(qn,oD),Uo(qn,vT)),vf.svgFilters===!0&&(Uo(kt,bT),Uo(qn,oD),Uo(qn,vT)),vf.mathMl===!0&&(Uo(kt,Tb),Uo(qn,sD),Uo(qn,vT))),Pe.ADD_TAGS&&(kt===no&&(kt=Eb(kt)),Uo(kt,Pe.ADD_TAGS,Ga)),Pe.ADD_ATTR&&(qn===Lt&&(qn=Eb(qn)),Uo(qn,Pe.ADD_ATTR,Ga)),Pe.ADD_URI_SAFE_ATTR&&Uo(Ub,Pe.ADD_URI_SAFE_ATTR,Ga),Pe.FORBID_CONTENTS&&(Dp===Dy&&(Dp=Eb(Dp)),Uo(Dp,Pe.FORBID_CONTENTS,Ga)),Ay&&(kt["#text"]=!0),Mi&&Uo(kt,["html","head","body"]),kt.table&&(Uo(kt,["tbody"]),delete it.tbody),Pe.TRUSTED_TYPES_POLICY){if(typeof Pe.TRUSTED_TYPES_POLICY.createHTML!="function")throw G0('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Pe.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw G0('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ee=Pe.TRUSTED_TYPES_POLICY,Ye=Ee.createHTML("")}else Ee===void 0&&(Ee=LB(J,i)),Ee!==null&&typeof Ye=="string"&&(Ye=Ee.createHTML(""));kl&&kl(Pe),Mp=Pe}},Re=Uo({},["mi","mo","mn","ms","mtext"]),dt=Uo({},["annotation-xml"]),rt=Uo({},["title","style","font","a","script"]),Yt=Uo({},[...tD,...bT,...jH]),Vn=Uo({},[...Tb,...DB]),Os=function(Pe){let Vt=ye(Pe);(!Vt||!Vt.tagName)&&(Vt={namespaceURI:yf,tagName:"template"});const On=pT(Pe.tagName),vr=pT(Vt.tagName);return Py[Pe.namespaceURI]?Pe.namespaceURI===Ry?Vt.namespaceURI===hd?On==="svg":Vt.namespaceURI===Rp?On==="svg"&&(vr==="annotation-xml"||Re[vr]):!!Yt[On]:Pe.namespaceURI===Rp?Vt.namespaceURI===hd?On==="math":Vt.namespaceURI===Ry?On==="math"&&dt[vr]:!!Vn[On]:Pe.namespaceURI===hd?Vt.namespaceURI===Ry&&!dt[vr]||Vt.namespaceURI===Rp&&!Re[vr]?!1:!Vn[On]&&(rt[On]||!Yt[On]):!!(Wb==="application/xhtml+xml"&&Py[Pe.namespaceURI]):!1},br=function(Pe){id(n.removed,{element:Pe});try{ye(Pe).removeChild(Pe)}catch{oe(Pe)}},Or=function(Pe,Vt){try{id(n.removed,{attribute:Vt.getAttributeNode(Pe),from:Vt})}catch{id(n.removed,{attribute:null,from:Vt})}if(Vt.removeAttribute(Pe),Pe==="is"&&!qn[Pe])if(jn||mo)try{br(Vt)}catch{}else try{Vt.setAttribute(Pe,"")}catch{}},Ny=function(Pe){let Vt=null,On=null;if(wn)Pe="<remove></remove>"+Pe;else{const Pi=xb(Pe,/^[\r\n\t ]+/);On=Pi&&Pi[0]}Wb==="application/xhtml+xml"&&yf===hd&&(Pe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Pe+"</body></html>");const vr=Ee?Ee.createHTML(Pe):Pe;if(yf===hd)try{Vt=new V().parseFromString(vr,Wb)}catch{}if(!Vt||!Vt.documentElement){Vt=st.createDocument(yf,"template",null);try{Vt.documentElement.innerHTML=My?Ye:vr}catch{}}const rc=Vt.body||Vt.documentElement;return Pe&&On&&rc.insertBefore(o.createTextNode(On),rc.childNodes[0]||null),yf===hd?Me.call(Vt,Mi?"html":"body")[0]:Mi?Vt.documentElement:rc},By=function(Pe){return xt.call(Pe.ownerDocument||Pe,Pe,A.SHOW_ELEMENT|A.SHOW_COMMENT|A.SHOW_TEXT|A.SHOW_PROCESSING_INSTRUCTION|A.SHOW_CDATA_SECTION,null)},Ck=function(Pe){return Pe instanceof F&&(typeof Pe.nodeName!="string"||typeof Pe.textContent!="string"||typeof Pe.removeChild!="function"||!(Pe.attributes instanceof I)||typeof Pe.removeAttribute!="function"||typeof Pe.setAttribute!="function"||typeof Pe.namespaceURI!="string"||typeof Pe.insertBefore!="function"||typeof Pe.hasChildNodes!="function")},gM=function(Pe){return typeof y=="function"&&Pe instanceof y},wf=function(Pe,Vt,On){Tt[Pe]&&Sb(Tt[Pe],vr=>{vr.call(n,Vt,On,Mp)})},F6=function(Pe){let Vt=null;if(wf("beforeSanitizeElements",Pe,null),Ck(Pe))return br(Pe),!0;const On=Ga(Pe.nodeName);if(wf("uponSanitizeElement",Pe,{tagName:On,allowedTags:kt}),Pe.hasChildNodes()&&!gM(Pe.firstElementChild)&&Sc(/<[/\w]/g,Pe.innerHTML)&&Sc(/<[/\w]/g,Pe.textContent)||Pe.nodeType===Sg.progressingInstruction||pf&&Pe.nodeType===Sg.comment&&Sc(/<[/\w]/g,Pe.data))return br(Pe),!0;if(!kt[On]||it[On]){if(!it[On]&&L6(On)&&(Ht.tagNameCheck instanceof RegExp&&Sc(Ht.tagNameCheck,On)||Ht.tagNameCheck instanceof Function&&Ht.tagNameCheck(On)))return!1;if(Ay&&!Dp[On]){const vr=ye(Pe)||Pe.parentNode,rc=be(Pe)||Pe.childNodes;if(rc&&vr){const Pi=rc.length;for(let el=Pi-1;el>=0;--el){const pd=Y(rc[el],!0);pd.__removalCount=(Pe.__removalCount||0)+1,vr.insertBefore(pd,he(Pe))}}}return br(Pe),!0}return Pe instanceof x&&!Os(Pe)||(On==="noscript"||On==="noembed"||On==="noframes")&&Sc(/<\/no(script|embed|frames)/i,Pe.innerHTML)?(br(Pe),!0):(Qc&&Pe.nodeType===Sg.text&&(Vt=Pe.textContent,Sb([Wt,Sn,Mn],vr=>{Vt=lf(Vt,vr," ")}),Pe.textContent!==Vt&&(id(n.removed,{element:Pe.cloneNode()}),Pe.textContent=Vt)),wf("afterSanitizeElements",Pe,null),!1)},hM=function(Pe,Vt,On){if(Bs&&(Vt==="id"||Vt==="name")&&(On in o||On in Ag))return!1;if(!(Mo&&!hn[Vt]&&Sc(Ao,Vt))){if(!(Zn&&Sc(qo,Vt))){if(!qn[Vt]||hn[Vt]){if(!(L6(Pe)&&(Ht.tagNameCheck instanceof RegExp&&Sc(Ht.tagNameCheck,Pe)||Ht.tagNameCheck instanceof Function&&Ht.tagNameCheck(Pe))&&(Ht.attributeNameCheck instanceof RegExp&&Sc(Ht.attributeNameCheck,Vt)||Ht.attributeNameCheck instanceof Function&&Ht.attributeNameCheck(Vt))||Vt==="is"&&Ht.allowCustomizedBuiltInElements&&(Ht.tagNameCheck instanceof RegExp&&Sc(Ht.tagNameCheck,On)||Ht.tagNameCheck instanceof Function&&Ht.tagNameCheck(On))))return!1}else if(!Ub[Vt]){if(!Sc(mt,lf(On,Ra,""))){if(!((Vt==="src"||Vt==="xlink:href"||Vt==="href")&&Pe!=="script"&&j0(On,"data:")===0&&p2[Pe])){if(!(Ko&&!Sc(Gs,lf(On,Ra,"")))){if(On)return!1}}}}}}return!0},L6=function(Pe){return Pe!=="annotation-xml"&&xb(Pe,Jr)},H6=function(Pe){wf("beforeSanitizeAttributes",Pe,null);const{attributes:Vt}=Pe;if(!Vt)return;const On={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:qn};let vr=Vt.length;for(;vr--;){const rc=Vt[vr],{name:Pi,namespaceURI:el,value:pd}=rc,y2=Ga(Pi);let ac=Pi==="value"?pd:OB(pd);const z6=ac;if(On.attrName=y2,On.attrValue=ac,On.keepAttr=!0,On.forceKeepAttr=void 0,wf("uponSanitizeAttribute",Pe,On),ac=On.attrValue,On.forceKeepAttr)continue;if(!On.keepAttr){Or(Pi,Pe);continue}if(!Ri&&Sc(/\/>/i,ac)){Or(Pi,Pe);continue}Qc&&Sb([Wt,Sn,Mn],U6=>{ac=lf(ac,U6," ")});const V6=Ga(Pe.nodeName);if(!hM(V6,y2,ac)){Or(Pi,Pe);continue}if(Cu&&(y2==="id"||y2==="name")&&(Or(Pi,Pe),ac=Oy+ac),pf&&Sc(/((--!?|])>)|<\/(style|title)/i,ac)){Or(Pi,Pe);continue}if(Ee&&typeof J=="object"&&typeof J.getAttributeType=="function"&&!el)switch(J.getAttributeType(V6,y2)){case"TrustedHTML":{ac=Ee.createHTML(ac);break}case"TrustedScriptURL":{ac=Ee.createScriptURL(ac);break}}if(ac!==z6)try{el?Pe.setAttributeNS(el,Pi,ac):Pe.setAttribute(Pi,ac),Ck(Pe)?br(Pe):Cg(n.removed)}catch{}}wf("afterSanitizeAttributes",Pe,null)},Gq=function Pn(Pe){let Vt=null;const On=By(Pe);for(wf("beforeSanitizeShadowDOM",Pe,null);Vt=On.nextNode();)wf("uponSanitizeShadowNode",Vt,null),!F6(Vt)&&(Vt.content instanceof u&&Pn(Vt.content),H6(Vt));wf("afterSanitizeShadowDOM",Pe,null)};return n.sanitize=function(Pn){let Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Vt=null,On=null,vr=null,rc=null;if(My=!Pn,My&&(Pn="<!-->"),typeof Pn!="string"&&!gM(Pn))if(typeof Pn.toString=="function"){if(Pn=Pn.toString(),typeof Pn!="string")throw G0("dirty is not a string, aborting")}else throw G0("toString is not a function");if(!n.isSupported)return Pn;if(gd||Ae(Pe),n.removed=[],typeof Pn=="string"&&(bf=!1),bf){if(Pn.nodeName){const pd=Ga(Pn.nodeName);if(!kt[pd]||it[pd])throw G0("root node is forbidden and cannot be sanitized in-place")}}else if(Pn instanceof y)Vt=Ny("<!---->"),On=Vt.ownerDocument.importNode(Pn,!0),On.nodeType===Sg.element&&On.nodeName==="BODY"||On.nodeName==="HTML"?Vt=On:Vt.appendChild(On);else{if(!jn&&!Qc&&!Mi&&Pn.indexOf("<")===-1)return Ee&&ks?Ee.createHTML(Pn):Pn;if(Vt=Ny(Pn),!Vt)return jn?null:ks?Ye:""}Vt&&wn&&br(Vt.firstChild);const Pi=By(bf?Pn:Vt);for(;vr=Pi.nextNode();)F6(vr)||(vr.content instanceof u&&Gq(vr.content),H6(vr));if(bf)return Pn;if(jn){if(mo)for(rc=Le.call(Vt.ownerDocument);Vt.firstChild;)rc.appendChild(Vt.firstChild);else rc=Vt;return(qn.shadowroot||qn.shadowrootmode)&&(rc=Qe.call(r,rc,!0)),rc}let el=Mi?Vt.outerHTML:Vt.innerHTML;return Mi&&kt["!doctype"]&&Vt.ownerDocument&&Vt.ownerDocument.doctype&&Vt.ownerDocument.doctype.name&&Sc(IB,Vt.ownerDocument.doctype.name)&&(el="<!DOCTYPE "+Vt.ownerDocument.doctype.name+`>
`+el),Qc&&Sb([Wt,Sn,Mn],pd=>{el=lf(el,pd," ")}),Ee&&ks?Ee.createHTML(el):el},n.setConfig=function(){let Pn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ae(Pn),gd=!0},n.clearConfig=function(){Mp=null,gd=!1},n.isValidAttribute=function(Pn,Pe,Vt){Mp||Ae({});const On=Ga(Pn),vr=Ga(Pe);return hM(On,vr,Vt)},n.addHook=function(Pn,Pe){typeof Pe=="function"&&(Tt[Pn]=Tt[Pn]||[],id(Tt[Pn],Pe))},n.removeHook=function(Pn){if(Tt[Pn])return Cg(Tt[Pn])},n.removeHooks=function(Pn){Tt[Pn]&&(Tt[Pn]=[])},n.removeAllHooks=function(){Tt={}},n}var HB=vS();const zB=at.each,lp=at.trim,aD=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],VB={ftp:21,http:80,https:443,mailto:25},yS=["img","video"],UB=(e,n)=>Te(e)?!e:Te(n)?!on(yS,n):!0,iD=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},cD=(e,n,o)=>{const r=iD(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?UB(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class pu{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),i=/data:([^;]+)/.exec(r[0]);return i&&(o=i[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const i=qf.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!cD(r,i,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=lp(n),this.settings=o;const r=o.base_uri,i=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){i.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const y=r?r.path:new pu(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+i.toAbsPath(y,n);else{const x=/([^#?]*)([#?]?.*)/.exec(n);x&&(n=(r&&r.protocol||"http")+"://mce_host"+i.toAbsPath(y,x[1])+x[2])}}n=n.replace(/@@/g,"(mce_at)");const g=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);g&&zB(aD,(y,x)=>{let A=g[x];A&&(A=A.replace(/\(mce_at\)/g,"@@")),i[y]=A}),r&&(i.protocol||(i.protocol=r.protocol),i.userInfo||(i.userInfo=r.userInfo),!i.port&&i.host==="mce_host"&&(i.port=r.port),(!i.host||i.host==="mce_host")&&(i.host=r.host),i.source=""),u&&(i.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new pu(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),i=o.getURI();if(r===i||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===i)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new pu(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?VB[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,i="",u,g;const y=n.substring(0,n.lastIndexOf("/")).split("/"),x=o.split("/");if(y.length>=x.length){for(u=0,g=y.length;u<g;u++)if(u>=x.length||y[u]!==x[u]){r=u+1;break}}if(y.length<x.length){for(u=0,g=x.length;u<g;u++)if(u>=y.length||y[u]!==x[u]){r=u+1;break}}if(r===1)return o;for(u=0,g=y.length-(r-1);u<g;u++)i+="../";for(u=r-1,g=x.length;u<g;u++)u!==r-1?i+="/"+x[u]:i+=x[u];return i}toAbsPath(n,o){let r=0;const i=/\/$/.test(o)?"/":"",u=n.split("/"),g=o.split("/"),y=[];zB(u,F=>{F&&y.push(F)});const x=[];for(let F=g.length-1;F>=0;F--)if(!(g[F].length===0||g[F]===".")){if(g[F]===".."){r++;continue}if(r>0){r--;continue}x.push(g[F])}const A=y.length-r;let I;return A<=0?I=os(x).join("/"):I=y.slice(0,A).join("/")+"/"+os(x).join("/"),I.indexOf("/")!==0&&(I="/"+I),i&&I.lastIndexOf("/")!==I.length-1&&(I+=i),I}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const YH=at.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),lD="data-mce-type";let WB=0;const wT=(e,n,o,r,i)=>{var u,g,y,x;const A=n.validate,I=o.getSpecialElements();e.nodeType===Yp&&!n.allow_conditional_comments&&/^\[if/i.test((u=e.nodeValue)!==null&&u!==void 0?u:"")&&(e.nodeValue=" "+e.nodeValue);const F=(g=i==null?void 0:i.tagName)!==null&&g!==void 0?g:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){Te(i)&&(i.allowedTags[F]=!0);return}if(e.nodeType!==Fc||F==="body")return;const V=re.fromDom(e),J=Du(V,lD),ne=wa(V,"data-mce-bogus");if(!J&&Q(ne)){ne==="all"?ho(V):Wc(V);return}const Y=o.getElementRule(F);if(A&&!Y){cn(I,F)?ho(V):Wc(V);return}else Te(i)&&(i.allowedTags[F]=!0);if(A&&Y&&!J){if($e((y=Y.attributesForced)!==null&&y!==void 0?y:[],oe=>{ns(V,oe.name,oe.value==="{$uid}"?`mce_${WB++}`:oe.value)}),$e((x=Y.attributesDefault)!==null&&x!==void 0?x:[],oe=>{Du(V,oe.name)||ns(V,oe.name,oe.value==="{$uid}"?`mce_${WB++}`:oe.value)}),Y.attributesRequired&&!Po(Y.attributesRequired,oe=>Du(V,oe))){Wc(V);return}if(Y.removeEmptyAttrs&&Hc(V)){Wc(V);return}Y.outputName&&Y.outputName!==F&&ou(V,Y.outputName)}},XH=(e,n,o,r,i)=>{const u=e.tagName.toLowerCase(),{attrName:g,attrValue:y}=i;i.keepAttr=uD(n,o,r,u,g,y),i.keepAttr?(i.allowedAttributes[g]=!0,jB(g,o)&&(i.attrValue=g),n.allow_svg_data_urls&&$s(y,"data:image/svg+xml")&&(i.forceKeepAttr=!0)):ZB(e,g)&&(i.forceKeepAttr=!0)},uD=(e,n,o,r,i,u)=>o!=="html"&&!eu(r)?!0:!(i in YH&&cD(e,u,r))&&(!e.validate||n.isValid(r,i)||$s(i,"data-")||$s(i,"aria-")),ZB=(e,n)=>e.hasAttribute(lD)&&(n==="id"||n==="class"||n==="style"),jB=(e,n)=>e in n.getBoolAttrs(),JH=(e,n,o,r)=>{const{attributes:i}=e;for(let u=i.length-1;u>=0;u--){const g=i[u],y=g.name,x=g.value;!uD(n,o,r,e.tagName.toLowerCase(),y,x)&&!ZB(e,y)?e.removeAttribute(y):jB(y,o)&&e.setAttribute(y,y)}},QH=(e,n,o)=>{const r=HB();return r.addHook("uponSanitizeElement",(i,u)=>{wT(i,e,n,o.track(i),u)}),r.addHook("uponSanitizeAttribute",(i,u)=>{XH(i,e,n,o.current(),u)}),r},ez=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},tz=e=>{const n=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`),o={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:n};return HB().sanitize(e,o),e.innerHTML},nz=(e,n)=>{const o=Nm();if(e.sanitize){const r=QH(e,n,o);return{sanitizeHtmlElement:(u,g)=>{r.sanitize(u,ez(e,g)),r.removed=[],o.reset()},sanitizeNamespaceElement:tz}}else return{sanitizeHtmlElement:(u,g)=>{const y=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let x;for(;x=y.nextNode();){const A=o.track(x);wT(x,e,n,A),Mt(x)&&JH(x,e,n,A)}o.reset()},sanitizeNamespaceElement:Dt}},GB=at.makeMap,qB=at.extend,wS=(e,n,o,r)=>{const i=e.name,u=i in o&&i!=="title"&&i!=="textarea"&&i!=="noscript",g=n.childNodes;for(let y=0,x=g.length;y<x;y++){const A=g[y],I=new ki(A.nodeName.toLowerCase(),A.nodeType);if(Mt(A)){const F=A.attributes;for(let V=0,J=F.length;V<J;V++){const ne=F[V];I.attr(ne.name,ne.value)}eu(I.name)&&(r(A),I.value=A.innerHTML)}else nt(A)?(I.value=A.data,u&&(I.raw=!0)):(Pd(A)||$2(A)||Dm(A))&&(I.value=A.data);eu(I.name)||wS(I,A,o,r),e.append(I)}},Ai=(e,n,o)=>{const r=[];for(let i=e,u=i;i;u=i,i=i.walk()){const g=i;$e(n,y=>y(g)),It(g.parent)&&g!==e?i=u:r.push(g)}for(let i=r.length-1;i>=0;i--){const u=r[i];$e(o,g=>g(u))}},oz=(e,n,o,r)=>{const i=o.validate,u=n.getNonEmptyElements(),g=n.getWhitespaceElements(),y=qB(GB("script,style,head,html,body,title,meta,param"),n.getBlockElements()),x=G2(n),A=/[ \t\r\n]+/g,I=/^[ \t\r\n]+/,F=/[ \t\r\n]+$/,V=be=>{let ye=be.parent;for(;Te(ye);){if(ye.name in g)return!0;ye=ye.parent}return!1},J=be=>{let ye=be;for(;Te(ye);){if(ye.name in x)return z0(n,u,g,ye);ye=ye.parent}return!1},ne=be=>be.name in y||Id(n,be)||eu(be.name)&&be.parent===e,Y=(be,ye)=>{const Ee=ye?be.prev:be.next;return Te(Ee)||It(be.parent)?!1:ne(be.parent)&&(be.parent!==e||r.isRootContent===!0)};return[be=>{var ye;if(be.type===3&&!V(be)){let Ee=(ye=be.value)!==null&&ye!==void 0?ye:"";Ee=Ee.replace(A," "),(AN(be.prev,ne)||Y(be,!0))&&(Ee=Ee.replace(I,"")),Ee.length===0?be.remove():be.value=Ee}},be=>{var ye;if(be.type===1){const Ee=n.getElementRule(be.name);if(i&&Ee){const Ye=z0(n,u,g,be);Ee.paddInEmptyBlock&&Ye&&J(be)?UE(o,r,ne,be):Ee.removeEmpty&&Ye?ne(be)?be.remove():be.unwrap():Ee.paddEmpty&&(Ye||kN(be))&&UE(o,r,ne,be)}}else if(be.type===3&&!V(be)){let Ee=(ye=be.value)!==null&&ye!==void 0?ye:"";(be.next&&ne(be.next)||Y(be,!1))&&(Ee=Ee.replace(F,"")),Ee.length===0?be.remove():be.value=Ee}}]},CT=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},cd=(e={},n=zd())=>{const o=CB(),r=CB(),i={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,g=nz(i,n),y=(ye,Ee,Ye="html")=>{const st=Ye==="xhtml"?"application/xhtml+xml":"text/html",xt=cn(n.getSpecialElements(),Ee.toLowerCase()),Le=xt?`<${Ee}>${ye}</${Ee}>`:ye,Me=Ye==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Le}</body></html>`:`<body>${Le}</body>`,Qe=u.parseFromString(Me,st).body;return g.sanitizeHtmlElement(Qe,st),xt?Qe.firstChild:Qe},x=o.addFilter,A=o.getFilters,I=o.removeFilter,F=r.addFilter,V=r.getFilters,J=r.removeFilter,ne=(ye,Ee)=>{jE(n,ye)&&Ee.push(ye)},Y=(ye,Ee)=>{const Ye=Q(Ee.attr(lD)),st=Ee.type===1&&!cn(ye,Ee.name)&&!Id(n,Ee)&&!eu(Ee.name);return Ee.type===3||st&&!Ye},oe=(ye,Ee)=>{const Ye=qB(GB("script,style,head,html,body,title,meta,param"),n.getBlockElements()),st=/^[ \t\r\n]+/,xt=/[ \t\r\n]+$/;let Le=ye.firstChild,Me=null;const Qe=Tt=>{var Wt,Sn;Tt&&(Le=Tt.firstChild,Le&&Le.type===3&&(Le.value=(Wt=Le.value)===null||Wt===void 0?void 0:Wt.replace(st,"")),Le=Tt.lastChild,Le&&Le.type===3&&(Le.value=(Sn=Le.value)===null||Sn===void 0?void 0:Sn.replace(xt,"")))};if(n.isValidChild(ye.name,Ee.toLowerCase())){for(;Le;){const Tt=Le.next;Y(Ye,Le)?(Me||(Me=new ki(Ee,1),Me.attr(i.forced_root_block_attrs),ye.insert(Me,Le)),Me.append(Le)):(Qe(Me),Me=null),Le=Tt}Qe(Me)}},be={schema:n,addAttributeFilter:F,getAttributeFilters:V,removeAttributeFilter:J,addNodeFilter:x,getNodeFilters:A,removeNodeFilter:I,parse:(ye,Ee={})=>{var Ye;const st=i.validate,xt=(Ye=Ee.context)!==null&&Ye!==void 0?Ye:i.root_name,Le=y(ye,xt,Ee.format);g1(n,Le);const Me=new ki(xt,11);wS(Me,Le,n.getSpecialElements(),g.sanitizeNamespaceElement),Le.innerHTML="";const[Qe,Tt]=oz(Me,n,i,Ee),Wt=[],Sn=st?Gs=>ne(Gs,Wt):Dt,Mn={nodes:{},attributes:{}},Ao=Gs=>w4(A(),V(),Gs,Mn);if(Ai(Me,[Qe,Ao],[Tt,Sn]),Wt.reverse(),st&&Wt.length>0)if(Ee.context){const{pass:Gs,fail:Ra}=ws(Wt,Jr=>Jr.parent===Me);ZE(Ra,n,Me,Ao),Ee.invalid=Gs.length>0}else ZE(Wt,n,Me,Ao);const qo=CT(i,Ee);return qo&&(Me.name==="body"||Ee.isRootContent)&&oe(Me,qo),Ee.invalid||aS(Mn,Ee),Me}};return VH(be,i),$H(be,i,n),be},KB=e=>rp(e)?ep({validate:!1}).serialize(e):e,xc=(e,n,o)=>{const r=KB(e),i=n(r);if(i.isDefaultPrevented())return i;if(rp(e))if(i.content!==r){const u=cd({validate:!1,forced_root_block:!1,...o}).parse(i.content,{context:e.name});return{...i,content:u}}else return{...i,content:e};else return i},up=(e,n)=>{if(n.no_events)return Ci.value(n);{const o=CA(e,n);return o.isDefaultPrevented()?Ci.error(Bn(e,{content:"",...o}).content):Ci.value(o)}},dD=(e,n,o)=>o.no_events?n:xc(n,i=>Bn(e,{...o,content:i}),{sanitize:Dh(e),sandbox_iframes:s0(e)}).content,mD=(e,n)=>{if(n.no_events)return Ci.value(n);{const o=xc(n.content,r=>iP(e,{...n,content:r}),{sanitize:Dh(e),sandbox_iframes:s0(e)});return o.isDefaultPrevented()?(lE(e,o),Ci.error(void 0)):Ci.value(o)}},ST=(e,n,o)=>{o.no_events||lE(e,{...o,content:n})},fD=(e,n,o)=>({element:e,width:n,rows:o}),gD=(e,n)=>({element:e,cells:n}),CS=(e,n)=>({x:e,y:n}),xT=(e,n)=>ll(e,n).bind(cl).getOr(1),sz=(e,n,o,r,i)=>{const u=xT(i,"rowspan"),g=xT(i,"colspan"),y=e.rows;for(let x=o;x<o+u;x++){y[x]||(y[x]=gD(zv(r),[]));for(let A=n;A<n+g;A++){const I=y[x].cells;I[A]=x===o&&A===n?i:Qi(i)}}},YB=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},rz=(e,n,o)=>{for(;YB(e,n,o);)n++;return n},ET=e=>as(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),TT=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const i=o[r].cells;for(let u=0;u<i.length;u++)if(so(i[u],n))return Z.some(CS(u,r))}return Z.none()},XB=(e,n,o,r,i)=>{const u=[],g=e.rows;for(let y=o;y<=i;y++){const x=g[y].cells,A=n<r?x.slice(n,r+1):x.slice(r,n+1);u.push(gD(g[y].element,A))}return u},az=(e,n,o)=>{const r=n.x,i=n.y,u=o.x,g=o.y,y=i<g?XB(e,r,i,u,g):XB(e,r,g,u,i);return fD(e.element,ET(y),y)},uf=(e,n)=>{const o=Qi(e.element),r=re.fromTag("tbody");return ko(r,n),Js(o,r),o},hD=e=>zt(e.rows,n=>{const o=zt(n.cells,i=>{const u=zv(i);return Is(u,"colspan"),Is(u,"rowspan"),u}),r=Qi(n.element);return ko(r,o),r}),iz=e=>{const n=fD(Qi(e),0,[]);return $e(Zr(e,"tr"),(o,r)=>{$e(Zr(o,"td,th"),(i,u)=>{sz(n,rz(n,u,r),r,o,i)})}),fD(n.element,ET(n.rows),n.rows)},_T=e=>uf(e,hD(e)),pD=(e,n,o)=>TT(e,n).bind(r=>TT(e,o).map(i=>az(e,r,i))),JB=e=>As(e,n=>Jn(n)==="ul"||Jn(n)==="ol"),QB=(e,n)=>As(e,o=>Jn(o)==="li"&&EC(o,n)).fold(ft([]),o=>JB(e).map(r=>{const i=re.fromTag(Jn(r)),u=Wo(jg(r),(g,y)=>$s(y,"list-style"));return xa(i,u),[re.fromTag("li"),i]}).getOr([])),e$=(e,n)=>{const o=as(n,(r,i)=>(Js(i,r),i),e);return n.length>0?VC([o]):o},cz=e=>Fu(e)?aa(e).filter(Zi).fold(ft([]),n=>[e,n]):Zi(e)?[e]:[],lz=(e,n,o)=>{const r=re.fromDom(n.commonAncestorContainer),i=sf(r,e),u=jt(i,x=>o.isWrapper(Jn(x))),g=QB(i,n),y=u.concat(g.length?g:cz(r));return zt(y,Qi)},t$=()=>VC([]),uz=(e,n,o)=>e$(re.fromDom(n.cloneContents()),lz(e,n,o)),dz=(e,n)=>Nu(n,"table",qe(so,e)),n$=(e,n)=>dz(e,n[0]).bind(o=>{const r=n[0],i=n[n.length-1],u=iz(o);return pD(u,r,i).map(g=>VC([_T(g)]))}).getOrThunk(t$),mz=(e,n,o)=>n.length>0&&n[0].collapsed?t$():uz(e,n[0],o),fz=(e,n,o)=>{const r=dA(n,e);return r.length>0?n$(e,r):mz(e,n,o)},kT=(e,n)=>n>=0&&n<e.length&&Vh(e.charAt(n)),bD=e=>uc(e.innerText),vD=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),yD=e=>Z.from(e.selection.getRng()).map(n=>{var o;const r=Z.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),i=e.getBody(),u=vD(r),g=re.fromDom(n.cloneContents());En(g),ZA(g);const y=e.dom.add(i,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},g.dom),x=bD(y),A=uc((o=y.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(y),kT(A,0)||kT(A,A.length-1)){const I=r.getOr(i),F=bD(I),V=F.indexOf(x);if(V===-1)return x;{const J=kT(F,V-1),ne=kT(F,V+x.length);return(J?" ":"")+x+(ne?" ":"")}}else return x}).getOr(""),o$=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),i=e.selection.getSel(),u=WA(e,g0(i)),g=n.contextual?fz(re.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return g&&r.appendChild(g),e.selection.serializer.serialize(r,n)},wD=(e,n)=>{if(n.format==="text")return yD(e);{const o=o$(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},s$=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),r$=(e,n,o={})=>{const r=s$(o,n);return up(e,r).fold(Eo,i=>{const u=wD(e,i);return dD(e,u,i)})},SS=0,CD=1,SD=2,a$=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),i=new Array(o),u=(I,F,V)=>({start:I,end:F,diag:V}),g=(I,F,V,J,ne)=>{const Y=x(I,F,V,J);if(Y===null||Y.start===F&&Y.diag===F-J||Y.end===I&&Y.diag===I-V){let oe=I,he=V;for(;oe<F||he<J;)oe<F&&he<J&&e[oe]===n[he]?(ne.push([SS,e[oe]]),++oe,++he):F-I>J-V?(ne.push([SD,e[oe]]),++oe):(ne.push([CD,n[he]]),++he)}else{g(I,Y.start,V,Y.start-Y.diag,ne);for(let oe=Y.start;oe<Y.end;++oe)ne.push([SS,e[oe]]);g(Y.end,F,Y.end-Y.diag,J,ne)}},y=(I,F,V,J)=>{let ne=I;for(;ne-F<J&&ne<V&&e[ne]===n[ne-F];)++ne;return u(I,ne,F)},x=(I,F,V,J)=>{const ne=F-I,Y=J-V;if(ne===0||Y===0)return null;const oe=ne-Y,he=Y+ne,be=(he%2===0?he:he+1)/2;r[1+be]=I,i[1+be]=F+1;let ye,Ee,Ye,st,xt;for(ye=0;ye<=be;++ye){for(Ee=-ye;Ee<=ye;Ee+=2){for(Ye=Ee+be,Ee===-ye||Ee!==ye&&r[Ye-1]<r[Ye+1]?r[Ye]=r[Ye+1]:r[Ye]=r[Ye-1]+1,st=r[Ye],xt=st-I+V-Ee;st<F&&xt<J&&e[st]===n[xt];)r[Ye]=++st,++xt;if(oe%2!==0&&oe-ye<=Ee&&Ee<=oe+ye&&i[Ye-oe]<=r[Ye])return y(i[Ye-oe],Ee+I-V,F,J)}for(Ee=oe-ye;Ee<=oe+ye;Ee+=2){for(Ye=Ee+be-oe,Ee===oe-ye||Ee!==oe+ye&&i[Ye+1]<=i[Ye-1]?i[Ye]=i[Ye+1]-1:i[Ye]=i[Ye-1],st=i[Ye]-1,xt=st-I+V-Ee;st>=I&&xt>=V&&e[st]===n[xt];)i[Ye]=st--,xt--;if(oe%2===0&&-ye<=Ee&&Ee<=ye&&i[Ye]<=r[Ye+oe])return y(i[Ye],Ee+I-V,F,J)}}return null},A=[];return g(0,e.length,0,n.length,A),A},i$=e=>Mt(e)?e.outerHTML:nt(e)?qf.encodeRaw(e.data,!1):Pd(e)?"<!--"+e.data+"-->":"",xD=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},gz=(e,n,o)=>{const r=xD(n);if(e.hasChildNodes()&&o<e.childNodes.length){const i=e.childNodes[o];e.insertBefore(r,i)}else e.appendChild(r)},OT=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},hz=(e,n)=>{let o=0;$e(e,r=>{r[0]===SS?o++:r[0]===CD?(gz(n,r[1],o),o++):r[0]===SD&&OT(n,o)})},pz=(e,n)=>jt(zt(Dr(e.childNodes),R(uc,i$)),o=>o.length>0),bz=(e,n)=>{const o=zt(Dr(n.childNodes),i$);return hz(a$(o,e),n),n},c$=Ll(()=>document.implementation.createHTMLDocument("undo")),l$=e=>e.querySelector("iframe")!==null,vz=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),yz=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),AT=e=>{const n=e.serializer.getTempAttrs(),o=PP(e.getBody(),n);return l$(o)?vz(pz(o)):yz(uc(o.innerHTML))},ED=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?bz(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:Te(r)&&Gx(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},TD=e=>e.type==="fragmented"?e.fragments.join(""):e.content,_D=e=>{const n=re.fromTag("body",c$());return Om(n,TD(e)),$e(Zr(n,"*[data-mce-bogus]"),Wc),Nn(n)},tY=(e,n)=>TD(e)===TD(n),wz=(e,n)=>_D(e)===_D(n),kD=(e,n)=>!e||!n?!1:tY(e,n)?!0:wz(e,n),OD=e=>e.get()===0,DT=(e,n,o)=>{OD(o)&&(e.typing=n)},u$=(e,n)=>{e.typing&&(DT(e,!1,n),e.add())},Cz=e=>{e.typing&&(e.typing=!1,e.add())},Sz=(e,n,o)=>{OD(n)&&o.set(xh(e.selection))},d$=(e,n,o,r,i,u,g)=>{const y=AT(e),x=at.extend(u||{},y);if(!OD(r)||e.removed)return null;const A=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:x,lastLevel:A,originalEvent:g}).isDefaultPrevented()||A&&kD(A,x))return null;n.data[o.get()]&&i.get().each(V=>{n.data[o.get()].beforeBookmark=V});const I=B1(e);if(I&&n.data.length>I){for(let V=0;V<n.data.length-1;V++)n.data[V]=n.data[V+1];n.data.length--,o.set(n.data.length)}x.bookmark=xh(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(x),o.set(n.data.length-1);const F={level:x,lastLevel:A,originalEvent:g};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",F),e.dispatch("change",F)):e.dispatch("AddUndo",F),x},xz=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},Ez=(e,n,o,r,i)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,g=n.data[o.get()-1];ED(e,g,!0),n.transact(i)&&(n.data[o.get()-1].beforeBookmark=u)}},Tz=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],ED(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},_z=(e,n,o,r)=>{let i;return n.typing&&(n.add(),n.typing=!1,DT(n,!1,o)),r.get()>0&&(r.set(r.get()-1),i=n.data[r.get()],ED(e,i,!0),e.setDirty(!0),e.dispatch("Undo",{level:i})),i},kz=e=>{e.clear(),e.add()},nY=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!kD(AT(e),n.data[0]),oY=(e,n)=>n.get()<e.data.length-1&&!e.typing,Oz=(e,n,o)=>(u$(e,n),e.beforeChange(),e.ignore(o),e.add()),Az=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},sY=(e,n)=>{const o=e.dom,r=Te(n)?n:e.getBody();$e(o.select("table,a",r),i=>{switch(i.nodeName){case"TABLE":const u=IO(e),g=o.getAttrib(i,"border");(!g||g==="0")&&e.hasVisual?o.addClass(i,u):o.removeClass(i,u);break;case"A":if(!o.getAttrib(i,"href")){const y=o.getAttrib(i,"name")||i.id,x=Ox(e);y&&e.hasVisual?o.addClass(i,x):o.removeClass(i,x)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},m$=e=>({init:{bindEvents:Dt},undoManager:{beforeChange:(n,o)=>Sz(e,n,o),add:(n,o,r,i,u,g)=>d$(e,n,o,r,i,u,g),undo:(n,o,r)=>_z(e,n,o,r),redo:(n,o)=>Tz(e,n,o),clear:(n,o)=>xz(e,n,o),reset:n=>kz(n),hasUndo:(n,o)=>nY(e,n,o),hasRedo:(n,o)=>oY(n,o),transact:(n,o,r)=>Oz(n,o,r),ignore:(n,o)=>Az(n,o),extra:(n,o,r,i)=>Ez(e,n,o,r,i)},formatter:{match:(n,o,r,i)=>V0(e,n,o,r,i),matchAll:(n,o)=>qN(e,n,o),matchNode:(n,o,r,i)=>af(e,n,o,r,i),canApply:n=>mH(e,n),closest:n=>KN(e,n),apply:(n,o,r)=>hB(e,n,o,r),remove:(n,o,r,i)=>G4(e,n,o,r,i),toggle:(n,o,r)=>yB(e,n,o,r),formatChanged:(n,o,r,i,u)=>RH(e,n,o,r,i,u)},editor:{getContent:n=>YK(e,n),setContent:(n,o)=>uH(e,n,o),insertContent:(n,o)=>cH(e,n,o),addVisual:n=>sY(e,n)},selection:{getContent:(n,o)=>r$(e,n,o)},autocompleter:{addDecoration:n=>c7(e,n),removeDecoration:()=>u7(e,re.fromDom(e.getBody()))},raw:{getModel:()=>Z.none()}}),js=e=>{const n=A=>Ge(A)?A:{},{init:o,undoManager:r,formatter:i,editor:u,selection:g,autocompleter:y,raw:x}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(A,I,F)=>r.transact(F),ignore:(A,I)=>r.ignore(I),extra:(A,I,F,V)=>r.extra(F,V)},formatter:{match:(A,I,F,V)=>i.match(A,n(I),V),matchAll:i.matchAll,matchNode:i.matchNode,canApply:A=>i.canApply(A),closest:A=>i.closest(A),apply:(A,I,F)=>i.apply(A,n(I)),remove:(A,I,F,V)=>i.remove(A,n(I)),toggle:(A,I,F)=>i.toggle(A,n(I)),formatChanged:(A,I,F,V,J)=>i.formatChanged(I,F,V,J)},editor:{getContent:A=>u.getContent(A),setContent:(A,I)=>({content:u.setContent(A,I),html:""}),insertContent:(A,I)=>(u.insertContent(A),""),addVisual:u.addVisual},selection:{getContent:(A,I)=>g.getContent(I)},autocompleter:{addDecoration:y.addDecoration,removeDecoration:y.removeDecoration},raw:{getModel:()=>Z.some(x.getRawModel())}}},AD=()=>{const e=ft(null),n=ft("");return{init:{bindEvents:Dt},undoManager:{beforeChange:Dt,add:e,undo:e,redo:e,clear:Dt,reset:Dt,hasUndo:Xe,hasRedo:Xe,transact:e,ignore:Dt,extra:Dt},formatter:{match:Xe,matchAll:ft([]),matchNode:ft(void 0),canApply:Xe,closest:n,apply:Dt,remove:Dt,toggle:Dt,formatChanged:ft({unbind:Dt})},editor:{getContent:n,setContent:ft({content:"",html:""}),insertContent:ft(""),addVisual:Dt},selection:{getContent:n},autocompleter:{addDecoration:Dt,removeDecoration:Dt},raw:{getModel:ft(Z.none())}}},xg=e=>cn(e.plugins,"rtc"),Dz=e=>Lo(e.plugins,"rtc").bind(n=>Z.from(n.setup)),Rz=e=>{const n=e;return Dz(e).fold(()=>(n.rtcInstance=m$(e),Z.none()),o=>(n.rtcInstance=AD(),Z.some(()=>o().then(r=>(n.rtcInstance=js(r),r.rtc.isRemote)))))},dp=e=>e.rtcInstance?e.rtcInstance:m$(e),$r=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},rY=(e,n,o)=>{$r(e).undoManager.beforeChange(n,o)},Za=(e,n,o,r,i,u,g)=>$r(e).undoManager.add(n,o,r,i,u,g),f$=(e,n,o,r)=>$r(e).undoManager.undo(n,o,r),g$=(e,n,o)=>$r(e).undoManager.redo(n,o),h$=(e,n,o)=>{$r(e).undoManager.clear(n,o)},Mz=(e,n)=>{$r(e).undoManager.reset(n)},Pz=(e,n,o)=>$r(e).undoManager.hasUndo(n,o),RT=(e,n,o)=>$r(e).undoManager.hasRedo(n,o),Nz=(e,n,o,r)=>$r(e).undoManager.transact(n,o,r),DD=(e,n,o)=>{$r(e).undoManager.ignore(n,o)},Bz=(e,n,o,r,i)=>{$r(e).undoManager.extra(n,o,r,i)},p$=(e,n,o,r,i)=>$r(e).formatter.match(n,o,r,i),b$=(e,n,o)=>$r(e).formatter.matchAll(n,o),RD=(e,n,o,r,i)=>$r(e).formatter.matchNode(n,o,r,i),v$=(e,n)=>$r(e).formatter.canApply(n),MD=(e,n)=>$r(e).formatter.closest(n),$z=(e,n,o,r)=>{$r(e).formatter.apply(n,o,r)},Iz=(e,n,o,r,i)=>{$r(e).formatter.remove(n,o,r,i)},Fz=(e,n,o,r)=>{$r(e).formatter.toggle(n,o,r)},bu=(e,n,o,r,i,u)=>$r(e).formatter.formatChanged(n,o,r,i,u),Lz=(e,n)=>dp(e).editor.getContent(n),Hz=(e,n,o)=>dp(e).editor.setContent(n,o),zz=(e,n,o)=>dp(e).editor.insertContent(n,o),Vz=(e,n,o)=>$r(e).selection.getContent(n,o),Uz=(e,n)=>$r(e).editor.addVisual(n),PD=e=>$r(e).init.bindEvents(),Wz=(e,n)=>$r(e).autocompleter.addDecoration(n),Zz=e=>$r(e).autocompleter.removeDecoration(),jz=(e,n={})=>{const o=n.format?n.format:"html";return Vz(e,o,n)},xS=e=>e.dom.length===0?(ho(e),Z.none()):Z.some(e),Gz=(e,n)=>e.filter(o=>ug.isBookmarkNode(o.dom)).bind(n?gl:zc),qz=(e,n,o,r,i)=>{const u=e.dom,g=n.dom,y=r?u.length:g.length;r?(Xr(u,g,i,!1,!r),o.setStart(g,y)):(Xr(g,u,i,!1,!r),o.setEnd(g,y))},y$=(e,n,o)=>{aa(e).each(r=>{const i=e.dom;n&&N0(r,De(i,0),o)?pb(i,0,o):!n&&B0(r,De(i,i.length),o)&&nN(i,i.length,o)})},MT=(e,n,o,r,i)=>{e.bind(u=>((r?nN:pb)(u.dom,r?u.dom.length:0,i),n.filter(Ur).map(y=>qz(u,y,o,r,i)))).orThunk(()=>Gz(n,r).or(n).filter(Ur).map(g=>y$(g,r,i)))},Kz=(e,n,o)=>{const r=Z.from(n.firstChild).map(re.fromDom),i=Z.from(n.lastChild).map(re.fromDom);e.deleteContents(),e.insertNode(n);const u=r.bind(zc).filter(Ur).bind(xS),g=i.bind(gl).filter(Ur).bind(xS);MT(u,r,e,!0,o),MT(g,i,e,!1,o),e.collapse(!1)},Yz=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),aY=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),i=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...i,...n});return ep({validate:!1},e.schema).serialize(u)}else return n.content},Xz=(e,n,o={})=>{const r=Yz(o,n);mD(e,r).each(i=>{const u=aY(e,i),g=e.selection.getRng();Kz(g,g.createContextualFragment(u),e.schema),e.selection.setRng(g),mb(e,g),ST(e,u,i)})},w$=(e,n,o)=>{if(cn(e,n)){const r=jt(e[n],i=>i!==o);r.length===0?delete e[n]:e[n]=r}};var C$=(e,n)=>{let o,r;const i=(y,x)=>As(x,A=>e.is(A,y)),u=y=>e.getParents(y,void 0,e.getRoot()),g=()=>{o={},r={},n.on("NodeChange",y=>{const x=y.element,A=u(x),I={};Ct(o,(F,V)=>{i(V,A).each(J=>{r[V]||($e(F,ne=>{ne(!0,{node:J,selector:V,parents:A})}),r[V]=F),I[V]=F})}),Ct(r,(F,V)=>{I[V]||(delete r[V],$e(F,J=>{J(!1,{node:x,selector:V,parents:A})}))})})};return{selectorChangedWithUnbind:(y,x)=>(o||g(),o[y]||(o[y]=[]),o[y].push(x),i(y,u(n.selection.getStart())).each(()=>{r[y]=o[y]}),{unbind:()=>{w$(o,y,x),w$(r,y,x)}})}};const ND=e=>!!(e&&e.ownerDocument)&&Ca(re.fromDom(e.ownerDocument),re.fromDom(e)),Jz=e=>e?ND(e.startContainer)&&ND(e.endContainer):!1,mp=(e,n,o,r)=>{let i,u;const{selectorChangedWithUnbind:g}=C$(e,r),y=(mt,kt)=>{const no=e.createRng();Te(mt)&&Te(kt)?(no.setStart(mt,kt),no.setEnd(mt,kt),Ee(no),he(!1)):(TC(e,no,r.getBody(),!0),Ee(no))},x=mt=>jz(r,mt),A=(mt,kt)=>Xz(r,mt,kt),I=mt=>VA(r.getBody(),ye(),mt),F=mt=>xP(r.getBody(),ye(),mt),V=(mt,kt)=>Ra.getBookmark(mt,kt),J=mt=>Ra.moveToBookmark(mt),ne=(mt,kt)=>(e7(e,mt,kt).each(Ee),mt),Y=()=>{const mt=ye(),kt=be();return!mt||mt.item?!1:mt.compareEndPoints?mt.compareEndPoints("StartToEnd",mt)===0:!kt||mt.collapsed},oe=()=>{const mt=ye(),kt=r.getBody().querySelectorAll('[data-mce-selected="1"]');return kt.length>0?tr(kt,no=>e.isEditable(no.parentElement)):CP(e,mt)},he=mt=>{const kt=ye();kt.collapse(!!mt),Ee(kt)},be=()=>n.getSelection?n.getSelection():n.document.selection,ye=()=>{let mt;const kt=(qn,Lt,Ht)=>{try{return Lt.compareBoundaryPoints(qn,Ht)}catch{return-1}},no=n.document;if(Te(r.bookmark)&&!Qh(r)){const qn=FA(r);if(qn.isSome())return qn.map(Lt=>WA(r,[Lt])[0]).getOr(no.createRange())}try{const qn=be();qn&&!ql(qn.anchorNode)&&(qn.rangeCount>0?mt=qn.getRangeAt(0):mt=no.createRange(),mt=WA(r,[mt])[0])}catch{}if(mt||(mt=no.createRange()),c1(mt.startContainer)&&mt.collapsed){const qn=e.getRoot();mt.setStart(qn,0),mt.setEnd(qn,0)}return i&&u&&(kt(mt.START_TO_START,mt,i)===0&&kt(mt.END_TO_END,mt,i)===0?mt=u:(i=null,u=null)),mt},Ee=(mt,kt)=>{if(!Jz(mt))return;const no=be();if(mt=r.dispatch("SetSelectionRange",{range:mt,forward:kt}).range,no){u=mt;try{no.removeAllRanges(),no.addRange(mt)}catch{}kt===!1&&no.extend&&(no.collapse(mt.endContainer,mt.endOffset),no.extend(mt.startContainer,mt.startOffset)),i=no.rangeCount>0?no.getRangeAt(0):null}if(!mt.collapsed&&mt.startContainer===mt.endContainer&&(no!=null&&no.setBaseAndExtent)&&mt.endOffset-mt.startOffset<2&&mt.startContainer.hasChildNodes()){const Lt=mt.startContainer.childNodes[mt.startOffset];Lt&&Lt.nodeName==="IMG"&&(no.setBaseAndExtent(mt.startContainer,mt.startOffset,mt.endContainer,mt.endOffset),(no.anchorNode!==mt.startContainer||no.focusNode!==mt.endContainer)&&no.setBaseAndExtent(Lt,0,Lt,1))}r.dispatch("AfterSetSelectionRange",{range:mt,forward:kt})},Ye=mt=>(A(e.getOuterHTML(mt)),mt),st=()=>EP(r.getBody(),ye()),xt=(mt,kt)=>Q8(e,ye(),mt,kt),Le=()=>{const mt=be(),kt=mt==null?void 0:mt.anchorNode,no=mt==null?void 0:mt.focusNode;if(!mt||!kt||!no||ql(kt)||ql(no))return!0;const qn=e.createRng(),Lt=e.createRng();try{qn.setStart(kt,mt.anchorOffset),qn.collapse(!0),Lt.setStart(no,mt.focusOffset),Lt.collapse(!0)}catch{return!0}return qn.compareBoundaryPoints(qn.START_TO_START,Lt)<=0},Gs={dom:e,win:n,serializer:o,editor:r,expand:(mt={type:"word"})=>Ee(q(e).expand(ye(),mt)),collapse:he,setCursorLocation:y,getContent:x,setContent:A,getBookmark:V,moveToBookmark:J,select:ne,isCollapsed:Y,isEditable:oe,isForward:Le,setNode:Ye,getNode:st,getSel:be,setRng:Ee,getRng:ye,getStart:I,getEnd:F,getSelectedBlocks:xt,normalize:()=>{const mt=ye(),kt=be();if(!lg(kt)&&p0(r)){const no=O(e,mt);return no.each(qn=>{Ee(qn,Le())}),no.getOr(mt)}return mt},selectorChanged:(mt,kt)=>(g(mt,kt),Gs),selectorChangedWithUnbind:g,getScrollContainer:()=>{let mt,kt=e.getRoot();for(;kt&&kt.nodeName!=="BODY";){if(kt.scrollHeight>kt.clientHeight){mt=kt;break}kt=kt.parentNode}return mt},scrollIntoView:(mt,kt)=>{Te(mt)?Aa(r,mt,kt):mb(r,ye(),kt)},placeCaretAt:(mt,kt)=>Ee(yc(mt,kt,r.getDoc())),getBoundingClientRect:()=>{const mt=ye();return mt.collapsed?De.fromRangeStart(mt).getClientRects()[0]:mt.getBoundingClientRect()},destroy:()=>{n=i=u=null,Jr.destroy()}},Ra=ug(Gs),Jr=lP(Gs,r);return Gs.bookmarkManager=Ra,Gs.controlSelection=Jr,Gs},q0=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,i)=>{let u=r.length;for(;u--;){const g=r[u];g.attr("tabindex",g.attr("data-mce-tabindex")),g.attr(i,null)}}),e.addAttributeFilter("src,href,style",(r,i)=>{const u="data-mce-"+i,g=n.url_converter,y=n.url_converter_scope;let x=r.length;for(;x--;){const A=r[x];let I=A.attr(u);I!==void 0?(A.attr(i,I.length>0?I:null),A.attr(u,null)):(I=A.attr(i),i==="style"?I=o.serializeStyle(o.parseStyle(I),A.name):g&&(I=g.call(y,I,i,A.name)),A.attr(i,I.length>0?I:null))}}),e.addAttributeFilter("class",r=>{let i=r.length;for(;i--;){const u=r[i];let g=u.attr("class");g&&(g=g.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",g.length>0?g:null))}}),e.addAttributeFilter("data-mce-type",(r,i,u)=>{let g=r.length;for(;g--;){const y=r[g];y.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(Z.from(y.firstChild).exists(A=>{var I;return!Gi((I=A.value)!==null&&I!==void 0?I:"")})?y.unwrap():y.remove())}}),e.addNodeFilter("script,style",(r,i)=>{var u;const g=x=>x.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let y=r.length;for(;y--;){const x=r[y],A=x.firstChild,I=(u=A==null?void 0:A.value)!==null&&u!==void 0?u:"";if(i==="script"){const F=x.attr("type");F&&x.attr("type",F==="mce-no/type"?null:F.replace(/^mce\-/,"")),n.element_format==="xhtml"&&A&&I.length>0&&(A.value=`// <![CDATA[
`+g(I)+`
// ]]>`)}else n.element_format==="xhtml"&&A&&I.length>0&&(A.value=`<!--
`+g(I)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let i=r.length;for(;i--;){const u=r[i],g=u.value;n.preserve_cdata&&(g==null?void 0:g.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(g.replace(/^\[CDATA\[|\]\]$/g,""))):(g==null?void 0:g.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(g).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,i)=>{let u=r.length;for(;u--;){const g=r[u];g.type===7?g.remove():g.type===1&&i==="input"&&!g.attr("type")&&g.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{$e(r,i=>{i.attr("data-mce-type")==="format-caret"&&(i.isEmpty(e.schema.getNonEmptyElements())?i.remove():i.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,i)=>{let u=r.length;for(;u--;)r[u].attr(i,null)}),n.remove_trailing_brs&&SB(n,e,e.schema)},ES=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},S$=(e,n,o)=>{let r;const i=e.dom;let u=n.cloneNode(!0);const g=document.implementation;if(g.createHTMLDocument){const y=g.createHTMLDocument("");at.each(u.nodeName==="BODY"?u.childNodes:[u],x=>{y.body.appendChild(y.importNode(x,!0))}),u.nodeName!=="BODY"?u=y.body.firstChild:u=y.body,r=i.doc,i.doc=y}return NC(e,{...o,node:u}),r&&(i.doc=r),u},x$=(e,n)=>Te(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,Qz=(e,n,o)=>x$(e,o)?S$(e,n,o):n,E$=(e,n,o)=>{at.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,i)=>{let u=r.length;for(;u--;)r[u].attr(i,null)}),n.push(o))},eV=(e,n,o)=>!n.no_events&&e?vA(e,{...n,content:o}).content:o,tV=(e,n,o)=>{const r=uc(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||Cr(re.fromDom(n))?r:at.trim(r)},nV=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,i=e.parse(n,r);return ES(i),i},oV=(e,n,o)=>ep(e,n).serialize(o),T$=(e,n,o,r,i)=>{const u=oV(n,o,r);return eV(e,i,u)},sV=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},i=n&&n.dom?n.dom:jo.DOM,u=n&&n.schema?n.schema:zd(r),g=cd(r,u);q0(g,r,i);const y=(x,A={})=>{const I={format:"html",...A},F=Qz(n,x,I),V=tV(i,F,I),J=nV(g,V,I);return I.format==="tree"?J:T$(n,r,u,J,I)};return{schema:u,addNodeFilter:g.addNodeFilter,addAttributeFilter:g.addAttributeFilter,serialize:y,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:qe(E$,g,o),getTempAttrs:ft(o),getNodeFilters:g.getNodeFilters,getAttributeFilters:g.getAttributeFilters,removeNodeFilter:g.removeNodeFilter,removeAttributeFilter:g.removeAttributeFilter}},_$=(e,n)=>{const o=sV(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},TS="html",k$=(e,n)=>({...e,format:n,get:!0,getInner:!0}),O$=(e,n={})=>{const o=n.format?n.format:TS,r=k$(n,o);return up(e,r).fold(Eo,i=>{const u=Lz(e,i);return dD(e,u,i)})},rV="html",aV=(e,n)=>({format:rV,...e,set:!0,content:n}),BD=(e,n,o={})=>{const r=aV(o,n);return mD(e,r).map(i=>{const u=Hz(e,i.content,i);return ST(e,u.html,i),u.content}).getOr(n)},A$="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),iV="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),cV="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),D$=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],R$=(e,n)=>{const o=jt(n,r=>cn(e,r));return Qo(o)},iY=e=>{const n=R$(e,A$),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Qo(n)},cm=e=>R$(e,iV),PT=(e,n)=>{const o=at.makeMap(e.plugins," "),i=jt(n,u=>cn(o,u));return Qo(i)},lV=e=>PT(e,cV),uV=e=>PT(e,D$.map(n=>n.name)),dV=(e,n)=>{const o=iY(e),r=lV(n),i=r.length>0,u=o.length>0,g=n.theme==="mobile";if(i||u||g){const y=`
- `,x=g?`

Themes:${y}mobile`:"",A=i?`

Plugins:${y}${r.join(y)}`:"",I=u?`

Options:${y}${o.join(y)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+x+A+I)}},mV=e=>As(D$,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),Co=(e,n)=>{const o=cm(e),r=uV(n),i=r.length>0,u=o.length>0;if(i||u){const g=`
- `,y=i?`

Plugins:${g}${r.map(mV).join(g)}`:"",x=u?`

Options:${g}${o.join(g)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+y+x)}},cY=(e,n)=>{dV(e,n),Co(e,n)},NT=jo.DOM,fV=e=>{NT.setStyle(e.id,"display",e.orgDisplay)},cs=e=>Z.from(e).each(n=>n.destroy()),gV=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},_S=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),NT.unbind(n,"submit reset",e.formEventDelegate))},hV=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),i=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Te(i==null?void 0:i.nextSibling)&&NT.remove(i.nextSibling),Gh(e),e.editorManager.remove(e),!e.inline&&r&&fV(e),qh(e),NT.remove(e.getContainer()),cs(n),cs(o),e.destroy()}},pV=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),cs(o),cs(r)),_S(e),gV(e),e.destroyed=!0}},kS=(()=>{const e={};return{add:(i,u)=>{e[i]=u},get:i=>e[i]?e[i]:{icons:{}},has:i=>cn(e,i)}})(),vu=La.ModelManager,Ec=(e,n)=>n.dom[e],K0=(e,n)=>parseInt(nr(n,e),10),fp=qe(Ec,"clientWidth"),df=qe(Ec,"clientHeight"),OS=qe(K0,"margin-top"),$D=qe(K0,"margin-left"),ID=e=>e.dom.getBoundingClientRect(),M$=(e,n,o)=>{const r=fp(e),i=df(e);return n>=0&&o>=0&&n<=r&&o<=i},P$=(e,n,o,r)=>{const i=ID(n),u=e?i.left+n.dom.clientLeft+$D(n):0,g=e?i.top+n.dom.clientTop+OS(n):0,y=o-u,x=r-g;return{x:y,y:x}},bV=(e,n,o)=>{const r=re.fromDom(e.getBody()),i=e.inline?r:Pu(r),u=P$(e.inline,i,n,o);return M$(i,u.x,u.y)},vV=e=>Z.from(e).map(re.fromDom),N$=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return vV(n).map(Tm).getOr(!1)};var B$=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const FD=e=>{const n=[],o=()=>{const V=e.theme;return V&&V.getNotificationManagerImpl?V.getNotificationManagerImpl():B$()},r=()=>Z.from(n[0]),i=(V,J)=>V.type===J.type&&V.text===J.text&&!V.progressBar&&!V.timeout&&!J.progressBar&&!J.timeout,u=()=>{$e(n,V=>{V.reposition()})},g=V=>{n.push(V)},y=V=>{ea(n,J=>J===V).each(J=>{n.splice(J,1)})},x=(V,J=!0)=>e.removed||!N$(e)?{}:(J&&e.dispatch("BeforeOpenNotification",{notification:V}),As(n,ne=>i(o().getArgs(ne),V)).getOrThunk(()=>{e.editorManager.setActive(e);const ne=o().open(V,()=>{y(ne),u(),wP(e)&&r().fold(()=>e.focus(),Y=>vE(re.fromDom(Y.getEl())))});return g(ne),u(),e.dispatch("OpenNotification",{notification:{...ne}}),ne})),A=()=>{r().each(V=>{o().close(V),y(V),u()})},I=ft(n);return(V=>{V.on("SkinLoaded",()=>{const J=MO(V);J&&x({text:J,type:"warning",timeout:0},!1),u()}),V.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(u)}),V.on("remove",()=>{$e(n.slice(),J=>{o().close(J)})})})(e),{open:x,close:A,getNotifications:I}},_b=La.PluginManager,Eg=La.ThemeManager;var uY=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const $$=e=>{let n=[];const o=()=>{const Y=e.theme;return Y&&Y.getWindowManagerImpl?Y.getWindowManagerImpl():uY()},r=(Y,oe)=>(...he)=>oe?oe.apply(Y,he):void 0,i=Y=>{e.dispatch("OpenWindow",{dialog:Y})},u=Y=>{e.dispatch("CloseWindow",{dialog:Y})},g=Y=>{n.push(Y),i(Y)},y=Y=>{u(Y),n=jt(n,oe=>oe!==Y),n.length===0&&e.focus()},x=()=>Z.from(n[n.length-1]),A=Y=>{e.editorManager.setActive(e),M0(e),e.ui.show();const oe=Y();return g(oe),oe},I=(Y,oe)=>A(()=>o().open(Y,oe,y)),F=Y=>A(()=>o().openUrl(Y,y)),V=(Y,oe,he)=>{const be=o();be.alert(Y,r(he||be,oe))},J=(Y,oe,he)=>{const be=o();be.confirm(Y,r(he||be,oe))},ne=()=>{x().each(Y=>{o().close(Y),y(Y)})};return e.on("remove",()=>{$e(n,Y=>{o().close(Y)})}),{open:I,openUrl:F,alert:V,confirm:J,close:ne}},yV=(e,n)=>{e.notificationManager.open({type:"error",text:n})},BT=(e,n)=>{e._skinLoaded?yV(e,n):e.on("SkinLoaded",()=>{yV(e,n)})},wV=(e,n)=>{BT(e,wl.translate(["Failed to upload image: {0}",n]))},Al=(e,n,o)=>{nc(e,n,{message:o}),console.error(o)},$T=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,dY=(e,n,o)=>{Al(e,"PluginLoadError",$T("plugin",n,o))},CV=(e,n,o)=>{Al(e,"IconsLoadError",$T("icons",n,o))},AS=(e,n,o)=>{Al(e,"LanguageLoadError",$T("language",n,o))},SV=(e,n,o)=>{Al(e,"ThemeLoadError",$T("theme",n,o))},I$=(e,n,o)=>{Al(e,"ModelLoadError",$T("model",n,o))},F$=(e,n,o)=>{const r=wl.translate(["Failed to initialize plugin: {0}",n]);nc(e,"PluginLoadError",{message:r}),DS(r,o),BT(e,r)},DS=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},xV=e=>/^[a-z0-9\-]+$/i.test(e),LD=e=>"content/"+e+"/content.css",gp=e=>tinymce.Resource.has(LD(e)),EV=e=>L$(e,Jw(e)),TV=e=>L$(e,Cx(e)),L$=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",i=`content${e.editorManager.suffix}.css`;return zt(n,u=>gp(u)?u:xV(u)&&!e.inline?`${o}/${u}/${i}`:e.documentBaseURI.toAbsolute(u))},_V=e=>{e.contentCSS=e.contentCSS.concat(EV(e),TV(e))},kV=e=>e?Dr(e.getElementsByTagName("img")):[],OV=(e,n)=>{const o={};return{findAll:(i,u=yt)=>{const g=jt(kV(i),x=>{const A=x.src;return x.hasAttribute("data-mce-bogus")||x.hasAttribute("data-mce-placeholder")||!A||A===Et.transparentSrc?!1:$s(A,"blob:")?!e.isUploaded(A)&&u(x):$s(A,"data:")?u(x):!1}),y=zt(g,x=>{const A=x.src;if(cn(o,A))return o[A].then(I=>Q(I)?I:{image:x,blobInfo:I.blobInfo});{const I=QK(n,A).then(F=>(delete o[A],{image:x,blobInfo:F})).catch(F=>(delete o[A],F));return o[A]=I,I}});return Promise.all(y)}}},H$=()=>{let o={};const r=(V,J)=>({status:V,resultUri:J}),i=V=>V in o;return{hasBlobUri:i,getResultUri:V=>{const J=o[V];return J?J.resultUri:null},isPending:V=>i(V)?o[V].status===1:!1,isUploaded:V=>i(V)?o[V].status===2:!1,markPending:V=>{o[V]=r(1,null)},markUploaded:(V,J)=>{o[V]=r(2,J)},removeFailed:V=>{delete o[V]},destroy:()=>{o={}}}};let AV=0;const DV=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},IT=e=>e+AV+++DV(),RV=()=>{let e=[];const n=F=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[F.toLowerCase()]||"dat",o=(F,V,J,ne,Y)=>{if(Q(F))return r({id:F,name:ne,filename:Y,blob:V,base64:J});if(Ge(F))return r(F);throw new Error("Unknown input type")},r=F=>{if(!F.blob||!F.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const V=F.id||IT("blobid"),J=F.name||V,ne=F.blob;return{id:ft(V),name:ft(J),filename:ft(F.filename||J+"."+n(ne.type)),blob:ft(ne),base64:ft(F.base64),blobUri:ft(F.blobUri||URL.createObjectURL(ne)),uri:ft(F.uri)}},i=F=>{g(F.id())||e.push(F)},u=F=>As(e,F).getOrUndefined(),g=F=>u(V=>V.id()===F);return{create:o,add:i,get:g,getByUri:F=>u(V=>V.blobUri()===F),getByData:(F,V)=>u(J=>J.base64()===F&&J.blob().type===V),findFirst:u,removeByUri:F=>{e=jt(e,V=>V.blobUri()===F?(URL.revokeObjectURL(V.blobUri()),!1):!0)},destroy:()=>{$e(e,F=>{URL.revokeObjectURL(F.blobUri())}),e=[]}}},MV=(e,n)=>{const o={},r=(Y,oe)=>Y?Y.replace(/\/$/,"")+"/"+oe.replace(/^\//,""):oe,i=(Y,oe)=>new Promise((he,be)=>{const ye=new XMLHttpRequest;ye.open("POST",n.url),ye.withCredentials=n.credentials,ye.upload.onprogress=Ye=>{oe(Ye.loaded/Ye.total*100)},ye.onerror=()=>{be("Image upload failed due to a XHR Transport error. Code: "+ye.status)},ye.onload=()=>{if(ye.status<200||ye.status>=300){be("HTTP Error: "+ye.status);return}const Ye=JSON.parse(ye.responseText);if(!Ye||!Q(Ye.location)){be("Invalid JSON: "+ye.responseText);return}he(r(n.basePath,Ye.location))};const Ee=new FormData;Ee.append("file",Y.blob(),Y.filename()),ye.send(Ee)}),u=ue(n.handler)?n.handler:i,g=()=>new Promise(Y=>{Y([])}),y=(Y,oe)=>({url:oe,blobInfo:Y,status:!0}),x=(Y,oe)=>({url:"",blobInfo:Y,status:!1,error:oe}),A=(Y,oe)=>{at.each(o[Y],he=>{he(oe)}),delete o[Y]},I=(Y,oe,he)=>(e.markPending(Y.blobUri()),new Promise(be=>{let ye,Ee;try{const Ye=()=>{ye&&(ye.close(),Ee=Dt)},st=Le=>{Ye(),e.markUploaded(Y.blobUri(),Le),A(Y.blobUri(),y(Y,Le)),be(y(Y,Le))},xt=Le=>{Ye(),e.removeFailed(Y.blobUri()),A(Y.blobUri(),x(Y,Le)),be(x(Y,Le))};Ee=Le=>{Le<0||Le>100||Z.from(ye).orThunk(()=>Z.from(he).map(Xo)).each(Me=>{ye=Me,Me.progressBar.value(Le)})},oe(Y,Ee).then(st,Le=>{xt(Q(Le)?{message:Le}:Le)})}catch(Ye){be(x(Y,Ye))}})),F=Y=>Y===i,V=Y=>{const oe=Y.blobUri();return new Promise(he=>{o[oe]=o[oe]||[],o[oe].push(he)})},J=(Y,oe)=>(Y=at.grep(Y,he=>!e.isUploaded(he.blobUri())),Promise.all(at.map(Y,he=>e.isPending(he.blobUri())?V(he):I(he,u,oe))));return{upload:(Y,oe)=>!n.url&&F(u)?g():J(Y,oe)}},PV=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Y0=(e,n)=>MV(n,{url:kO(e),basePath:OO(e),credentials:Kw(e),handler:AO(e)}),NV=e=>{const n=H$(),o=Y0(e,n);return{upload:(r,i=!0)=>o.upload(r,i?PV(e):void 0)}},HD=(e,n)=>e.dom.isEmpty(n.dom)&&Te(e.schema.getTextBlockElements()[Jn(n)]),BV=e=>n=>{HD(e,n)&&Js(n,re.fromHtml('<br data-mce-bogus="1" />'))},$V=e=>{const n=RV();let o,r;const i=H$(),u=[],g=ye=>Ee=>e.selection?ye(Ee):[],y=ye=>ye+(ye.indexOf("?")===-1?"?":"&")+new Date().getTime(),x=(ye,Ee,Ye)=>{let st=0;do st=ye.indexOf(Ee,st),st!==-1&&(ye=ye.substring(0,st)+Ye+ye.substr(st+Ee.length),st+=Ye.length-Ee.length+1);while(st!==-1);return ye},A=(ye,Ee,Ye)=>{const st=`src="${Ye}"${Ye===Et.transparentSrc?' data-mce-placeholder="1"':""}`;return ye=x(ye,`src="${Ee}"`,st),ye=x(ye,'data-mce-src="'+Ee+'"','data-mce-src="'+Ye+'"'),ye},I=(ye,Ee)=>{$e(e.undoManager.data,Ye=>{Ye.type==="fragmented"?Ye.fragments=zt(Ye.fragments,st=>A(st,ye,Ee)):Ye.content=A(Ye.content,ye,Ee)})},F=(ye,Ee)=>{const Ye=e.convertURL(Ee,"src");I(ye.src,Ee),Lc(re.fromDom(ye),{src:P1(e)?y(Ee):Ee,"data-mce-src":Ye})},V=()=>(o||(o=Y0(e,i)),oe().then(g(ye=>{const Ee=zt(ye,Ye=>Ye.blobInfo);return o.upload(Ee,PV(e)).then(g(Ye=>{const st=[];let xt=!1;const Le=zt(Ye,(Me,Qe)=>{const{blobInfo:Tt,image:Wt}=ye[Qe];let Sn=!1;return Me.status&&wx(e)?(Me.url&&!yr(Wt.src,Me.url)&&(xt=!0),n.removeByUri(Wt.src),xg(e)||F(Wt,Me.url)):Me.error&&(Me.error.remove&&(I(Wt.src,Et.transparentSrc),st.push(Wt),Sn=!0),wV(e,Me.error.message)),{element:Wt,status:Me.status,uploadUri:Me.url,blobInfo:Tt,removed:Sn}});return st.length>0&&!xg(e)?e.undoManager.transact(()=>{$e($f(st),Me=>{const Qe=aa(Me);ho(Me),Qe.each(BV(e)),n.removeByUri(Me.dom.src)})}):xt&&e.undoManager.dispatchChange(),Le}))}))),J=()=>yx(e)?V():Promise.resolve([]),ne=ye=>tr(u,Ee=>Ee(ye)),Y=ye=>{u.push(ye)},oe=()=>(r||(r=OV(i,n)),r.findAll(e.getBody(),ne).then(g(ye=>{const Ee=jt(ye,Ye=>Q(Ye)?(BT(e,Ye),!1):Ye.uriType!=="blob");return xg(e)||$e(Ee,Ye=>{I(Ye.image.src,Ye.blobInfo.blobUri()),Ye.image.src=Ye.blobInfo.blobUri(),Ye.image.removeAttribute("data-mce-src")}),Ee}))),he=()=>{n.destroy(),i.destroy(),r=o=null},be=ye=>ye.replace(/src="(blob:[^"]+)"/g,(Ee,Ye)=>{const st=i.getResultUri(Ye);if(st)return'src="'+st+'"';let xt=n.getByUri(Ye);return xt||(xt=as(e.editorManager.get(),(Le,Me)=>Le||Me.editorUpload&&Me.editorUpload.blobCache.getByUri(Ye),void 0)),xt?'src="data:'+xt.blob().type+";base64,"+xt.base64()+'"':Ee});return e.on("SetContent",()=>{yx(e)?J():oe()}),e.on("RawSaveContent",ye=>{ye.content=be(ye.content)}),e.on("GetContent",ye=>{ye.source_view||ye.format==="raw"||ye.format==="tree"||(ye.content=be(ye.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",ye=>{$e(ye,Ee=>{const Ye=Ee.attr("src");if(!Ye||n.getByUri(Ye))return;const st=i.getResultUri(Ye);st&&Ee.attr("src",st)})})}),{blobCache:n,addFilter:Y,uploadImages:V,uploadImagesAuto:J,scanForImages:oe,destroy:he}},IV=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:i=>{n.setStyle(i,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:i=>{n.setStyle(i,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const i={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},g={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[g,i,u]:[i,g,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(i,u,g)=>Mt(i)&&i.hasAttribute("href"),onformat:(i,u,g)=>{at.each(g,(y,x)=>{n.setAttrib(i,x,y)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":i=>{var u;return(u=i==null?void 0:i.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return at.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),i=>{r[i]={block:i,remove:"all"}}),r},z$={remove_similar:!0,inherit:!1},ld={selector:"td,th",...z$},kb={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...ld},tablecellverticalalign:{styles:{"vertical-align":"%value"},...ld},tablecellbordercolor:{styles:{borderColor:"%value"},...ld},tablecellclass:{classes:["%value"],...ld},tableclass:{selector:"table",classes:["%value"],...z$},tablecellborderstyle:{styles:{borderStyle:"%value"},...ld},tablecellborderwidth:{styles:{borderWidth:"%value"},...ld}},FT=ft(kb),LT=e=>{const n={},o=g=>Te(g)?n[g]:n,r=g=>cn(n,g),i=(g,y)=>{g&&(Q(g)?(_t(y)||(y=[y]),$e(y,x=>{bt(x.deep)&&(x.deep=!fa(x)),bt(x.split)&&(x.split=!fa(x)||sr(x)),bt(x.remove)&&fa(x)&&!sr(x)&&(x.remove="none"),fa(x)&&sr(x)&&(x.mixed=!0,x.block_expand=!0),Q(x.classes)&&(x.classes=x.classes.split(/\s+/))}),n[g]=y):Ct(g,(x,A)=>{i(A,x)}))},u=g=>(g&&n[g]&&delete n[g],n);return i(IV(e)),i(FT()),i(NO(e)),{get:o,has:r,register:i,unregister:u}},mf=at.each,li=jo.DOM,X0=e=>Te(e)&&Ge(e),RS=(e,n)=>{const o=n&&n.schema||zd({}),r=(x,A)=>{A.classes.length>0&&li.addClass(x,A.classes.join(" ")),li.setAttribs(x,A.attrs)},i=x=>{const A=Q(x)?{name:x,classes:[],attrs:{}}:x,I=li.create(A.name);return r(I,A),I},u=(x,A)=>{const I=o.getElementRule(x.nodeName.toLowerCase()),F=I==null?void 0:I.parentsRequired;return F&&F.length?A&&on(F,A)?A:F[0]:!1},g=(x,A,I)=>{let F;const V=A[0],J=X0(V)?V.name:void 0,ne=u(x,J);if(ne)J===ne?(F=V,A=A.slice(1)):F=ne;else if(V)F=V,A=A.slice(1);else if(!I)return x;const Y=F?i(F):li.create("div");Y.appendChild(x),I&&at.each(I,he=>{const be=i(he);Y.insertBefore(be,x)});const oe=X0(F)?F.siblings:void 0;return g(Y,A,oe)},y=li.create("div");if(e.length>0){const x=e[0],A=i(x),I=X0(x)?x.siblings:void 0;y.appendChild(g(A,e.slice(1),I))}return y},V$=e=>{e=at.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,i,u,g,y)=>{switch(i){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":at.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(g==="["){const x=y.match(/([\w\-]+)(?:\=\"([^\"]+))?/);x&&(o.attrs[x[1]]=x[2])}return""})),o.name=n||"div",o},zD=e=>Q(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),at.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=at.map(n.split(/(?:~\+|~|\+)/),V$),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],VD=(e,n)=>{let o="",r=Ex(e);if(r==="")return"";const i=V=>Q(V)?V.replace(/%(\w+)/g,""):"",u=(V,J)=>li.getStyle(J??e.getBody(),V,!0);if(Q(n)){const V=e.formatter.get(n);if(!V)return"";n=V[0]}if("preview"in n){const V=n.preview;if(V===!1)return"";r=V||r}let g=n.block||n.inline||"span",y;const x=zD(n.selector);x.length>0?(x[0].name||(x[0].name=g),g=n.selector,y=RS(x,e)):y=RS([g],e);const A=li.select(g,y)[0]||y.firstChild;mf(n.styles,(V,J)=>{const ne=i(V);ne&&li.setStyle(A,J,ne)}),mf(n.attributes,(V,J)=>{const ne=i(V);ne&&li.setAttrib(A,J,ne)}),mf(n.classes,V=>{const J=i(V);li.hasClass(A,J)||li.addClass(A,J)}),e.dispatch("PreviewFormats"),li.setStyles(y,{position:"absolute",left:-65535}),e.getBody().appendChild(y);const I=u("fontSize"),F=/px$/.test(I)?parseInt(I,10):0;return mf(r.split(" "),V=>{let J=u(V,A);if(!(V==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(J)&&(J=u(V),ih(J).toLowerCase()==="#ffffff"))&&!(V==="color"&&ih(J).toLowerCase()==="#000000")){if(V==="font-size"&&/em|%$/.test(J)){if(F===0)return;J=parseFloat(J)/(/%$/.test(J)?100:1)*F+"px"}V==="border"&&J&&(o+="padding:0 2px;"),o+=V+":"+J+";"}}),e.dispatch("AfterPreviewFormats"),li.remove(y),o},U$=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},UD=e=>{const n=LT(e),o=Ts({});return U$(e),pH(e),xg(e)||OH(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,i,u)=>{$z(e,r,i,u)},remove:(r,i,u,g)=>{Iz(e,r,i,u,g)},toggle:(r,i,u)=>{Fz(e,r,i,u)},match:(r,i,u,g)=>p$(e,r,i,u,g),closest:r=>MD(e,r),matchAll:(r,i)=>b$(e,r,i),matchNode:(r,i,u,g)=>RD(e,r,i,u,g),canApply:r=>v$(e,r),formatChanged:(r,i,u,g)=>bu(e,o,r,i,u,g),getCssText:qe(VD,e)}},Ob=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},W$=(e,n,o)=>{const r=Ts(!1),i=x=>{DT(n,!1,o),n.add({},x)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",x=>{const A=x.command;Ob(A)||(u$(n,o),n.beforeChange())}),e.on("ExecCommand",x=>{const A=x.command;Ob(A)||i(x)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",i),e.on("dragend",i),e.on("keyup",x=>{const A=x.keyCode;if(x.isDefaultPrevented())return;const I=Et.os.isMacOS()&&x.key==="Meta";(A>=33&&A<=36||A>=37&&A<=40||A===45||x.ctrlKey||I)&&(i(),e.nodeChanged()),(A===46||A===8)&&e.nodeChanged(),r.get()&&n.typing&&!kD(AT(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",x=>{const A=x.keyCode;if(x.isDefaultPrevented())return;if(A>=33&&A<=36||A>=37&&A<=40||A===45){n.typing&&i(x);return}const I=x.ctrlKey&&!x.altKey||x.metaKey;if((A<16||A>20)&&A!==224&&A!==91&&!n.typing&&!I){n.beforeChange(),DT(n,!0,o),n.add({},x),r.set(!0);return}(Et.os.isMacOS()?x.metaKey:x.ctrlKey&&!x.altKey)&&n.beforeChange()}),e.on("mousedown",x=>{n.typing&&i(x)});const u=x=>x.inputType==="insertReplacementText",g=x=>x.inputType==="insertText"&&x.data===null,y=x=>x.inputType==="insertFromPaste"||x.inputType==="insertFromDrop";e.on("input",x=>{x.inputType&&(u(x)||g(x)||y(x))&&i(x)}),e.on("AddUndo Undo Redo ClearUndos",x=>{x.isDefaultPrevented()||e.nodeChanged()})},Z$=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},WD=e=>{const n=Lm(),o=Ts(0),r=Ts(0),i={data:[],typing:!1,beforeChange:()=>{rY(e,o,n)},add:(u,g)=>Za(e,i,r,o,n,u,g),dispatchChange:()=>{e.setDirty(!0);const u=AT(e);u.bookmark=xh(e.selection),e.dispatch("change",{level:u,lastLevel:sl(i.data,r.get()).getOrUndefined()})},undo:()=>f$(e,i,o,r),redo:()=>g$(e,r,i.data),clear:()=>{h$(e,i,r)},reset:()=>{Mz(e,i)},hasUndo:()=>Pz(e,i,r),hasRedo:()=>RT(e,i,r),transact:u=>Nz(e,i,o,u),ignore:u=>{DD(e,o,u)},extra:(u,g)=>{Bz(e,i,r,u,g)}};return xg(e)||W$(e,i,o),Z$(e),i},HT=[9,27,At.HOME,At.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,At.DOWN,At.UP,At.LEFT,At.RIGHT].concat(Et.browser.isFirefox()?[224]:[]),ZD="data-mce-placeholder",jD=e=>e.type==="keydown"||e.type==="keyup",GD=e=>{const n=e.keyCode;return n===At.BACKSPACE||n===At.DELETE},j$=e=>{if(jD(e)){const n=e.keyCode;return!GD(e)&&(At.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||on(HT,n))}else return!1},Tg=e=>jD(e)&&!(GD(e)||e.type==="keyup"&&e.keyCode===229),hp=(e,n,o)=>{if(Ns(re.fromDom(n),!1)){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},ud=e=>{var n;const o=e.dom,r=za(e),i=(n=tP(e))!==null&&n!==void 0?n:"",u=(g,y)=>{if(j$(g))return;const x=e.getBody(),A=Tg(g)?!1:hp(o,x,r);(o.getAttrib(x,ZD)!==""!==A||y)&&(o.setAttrib(x,ZD,A?i:null),o.setAttrib(x,"aria-placeholder",A?i:null),wA(e,A),e.on(A?"keydown":"keyup",u),e.off(A?"keyup":"keydown",u))};yo(i)&&e.on("init",g=>{u(g,!0),e.on("change SetContent ExecCommand",u),e.on("paste",y=>_l.setEditorTimeout(e,()=>u(y)))})},FV=(e,n)=>({block:e,position:n}),LV=(e,n)=>({from:e,to:n}),qD=(e,n)=>{const o=re.fromDom(e),r=re.fromDom(n.container());return $0(o,r).map(i=>FV(i,n))},HV=e=>!so(e.from.block,e.to.block),G$=(e,n)=>hi(n,i=>ji(i)||Fa(i.dom),i=>so(i,e)).filter(Vr).getOr(e),zV=(e,n)=>{const o=re.fromDom(e);return so(G$(o,n.from.block),G$(o,n.to.block))},VV=e=>Un(e.from.block.dom)===!1&&Un(e.to.block.dom)===!1,UV=e=>{const n=o=>_e(o)||xv(o.dom);return n(e.from.block)&&n(e.to.block)},WV=(e,n,o)=>No(o.position.getNode())&&!Ns(o.block)?Hh(!1,o.block.dom).bind(r=>r.isEqual(o.position)?Yr(n,e,r).bind(i=>qD(e,i)):Z.some(o)).getOr(o):o,ZV=(e,n,o)=>{const r=qD(e,De.fromRangeStart(o)),i=r.bind(u=>Yr(n,e,u.position).bind(g=>qD(e,g).map(y=>WV(e,n,y))));return Mr(r,i,LV).filter(u=>HV(u)&&zV(e,u)&&VV(u)&&UV(u))},jV=(e,n,o)=>o.collapsed?ZV(e,n,o):Z.none(),GV=(e,n)=>{const o=ur(e);return ea(o,r=>n.isBlock(Jn(r))).fold(ft(o),r=>o.slice(0,r))},zT=(e,n)=>{const o=GV(e,n);return $e(o,ho),o},VT=(e,n)=>{const o=sf(n,e);return As(o.reverse(),r=>Ns(r)).each(ho)},q$=e=>jt(e1(e),n=>!Ns(n)).length===0,qV=(e,n,o,r,i)=>{if(Ns(o))return Hu(o),ii(o.dom);q$(i)&&Ns(n)&&dr(i,re.fromTag("br"));const u=Ei(o.dom,De.before(i.dom));return $e(zT(n,r),g=>{dr(i,g)}),VT(e,n),u},KV=(e,n)=>e.isInline(Jn(n)),K$=(e,n,o,r)=>{if(Ns(o)){if(Ns(n)){const g=Il((y=>{const x=(A,I)=>Nf(A).fold(()=>I,F=>KV(r,F)?x(F,I.concat(Qi(F))):I);return x(y,[])})(o),(y,x)=>(s1(y,x),x),yi());Rd(n),Js(n,g)}return ho(o),ii(n.dom)}const i=xl(o.dom);return $e(zT(n,r),u=>{Js(o,u)}),VT(e,n),i},Y$=(e,n)=>{const o=sf(n,e);return Z.from(o[o.length-1])},KD=(e,n)=>Ca(n,e)?Y$(n,e):Z.none(),YD=(e,n)=>{Hh(e,n.dom).bind(o=>Z.from(o.getNode())).map(re.fromDom).filter(Rm).each(ho)},XD=(e,n,o,r)=>(YD(!0,n),YD(!1,o),KD(n,o).fold(qe(K$,e,n,o,r),qe(qV,e,n,o,r))),UT=(e,n,o,r,i)=>n?XD(e,r,o,i):XD(e,o,r,i),JD=(e,n)=>{const o=re.fromDom(e.getBody());return jV(o.dom,n,e.selection.getRng()).map(i=>()=>{UT(o,n,i.from.block,i.to.block,e.schema).each(u=>{e.selection.setRng(u.toRange())})})},YV=(e,n,o)=>{const r=n.getRng();return Mr($0(e,re.fromDom(r.startContainer)),$0(e,re.fromDom(r.endContainer)),(i,u)=>so(i,u)?Z.none():Z.some(()=>{r.deleteContents(),UT(e,!0,i,u,o).each(g=>{n.setRng(g.toRange())})})).getOr(Z.none())},lm=(e,n)=>{const o=re.fromDom(n),r=qe(so,e);return xs(o,ji,r).isSome()},dd=(e,n)=>lm(e,n.startContainer)||lm(e,n.endContainer),WT=(e,n)=>{const o=Ei(e.dom,De.fromRangeStart(n)).isNone(),r=Ua(e.dom,De.fromRangeEnd(n)).isNone();return!dd(e,n)&&o&&r},X$=e=>Z.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),ZT=e=>{const n=re.fromDom(e.getBody()),o=e.selection.getRng();return WT(n,o)?X$(e):YV(n,e.selection,e.schema)},jT=(e,n)=>e.selection.isCollapsed()?Z.none():ZT(e),ff=(e,n,o,r,i)=>Z.from(n._selectionOverrides.showCaret(e,o,r,i)),J$=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},J0=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?Z.none():Z.some(J$(n)),Q$=(e,n,o)=>{const r=bC(1,e.getBody(),n),i=De.fromRangeStart(r),u=i.getNode();if(r0(u))return ff(1,e,u,!i.isAtEnd(),!1);const g=i.getNode(!0);if(r0(g))return ff(1,e,g,!1,!1);const y=op(e.dom.getRoot(),i.getNode());return r0(y)?ff(1,e,y,!1,o):Z.none()},GT=(e,n,o)=>n.collapsed?Q$(e,n,o).getOr(n):n,qT=e=>hg(e)||GC(e),QD=e=>sm(e)||P0(e),XV=(e,n)=>{nt(n)&&n.data.length===0&&e.remove(n)},eI=(e,n,o,r,i,u)=>{ff(r,e,u.getNode(!i),i,!0).each(g=>{if(n.collapsed){const y=n.cloneRange();i?y.setEnd(g.startContainer,g.startOffset):y.setStart(g.endContainer,g.endOffset),y.deleteContents()}else n.deleteContents();e.selection.setRng(g)}),XV(e.dom,o)},JV=(e,n)=>{const o=e.selection.getRng();if(!nt(o.commonAncestorContainer))return Z.none();const r=n?Zs.Forwards:Zs.Backwards,i=iu(e.getBody()),u=qe(Wx,n?i.next:i.prev),g=n?qT:QD,y=Ym(r,e.getBody(),o),x=u(y),A=x&&mu(n,x);if(!A||!vC(y,A))return Z.none();if(g(A))return Z.some(()=>eI(e,o,y.getNode(),r,n,A));const I=u(A);return I&&g(I)&&vC(A,I)?Z.some(()=>eI(e,o,y.getNode(),r,n,I)):Z.none()},e3=(e,n)=>JV(e,n),KT=(e,n)=>{const o=e.getBody();return n?ii(o).filter(hg):xl(o).filter(sm)},t3=e=>{const n=e.selection.getRng();return!n.collapsed&&(KT(e,!0).exists(o=>o.isEqual(De.fromRangeStart(n)))||KT(e,!1).exists(o=>o.isEqual(De.fromRangeEnd(n))))},QV=e=>Te(e)&&(ji(re.fromDom(e))||Fu(re.fromDom(e))),Tc=ru.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),e9=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return Mt(o)&&o.getAttribute("data-mce-caret")===r},t9=(e,n,o,r,i)=>{const u=g=>i.isInline(g.nodeName.toLowerCase())&&!au(o,r,e);return Ux(!n,o).fold(()=>Ux(n,r).fold(Xe,u),u)},tI=(e,n,o,r)=>{const i=r.getNode(!n);return $0(re.fromDom(e),re.fromDom(o.getNode())).map(u=>Ns(u)?Tc.remove(u.dom):Tc.moveToElement(i)).orThunk(()=>Z.some(Tc.moveToElement(i)))},nI=(e,n,o,r)=>Yr(n,e,o).bind(i=>QV(i.getNode())||t9(e,n,o,i,r)?Z.none():n&&Un(i.getNode())||!n&&Un(i.getNode(!0))?tI(e,n,o,i):n&&sm(o)||!n&&hg(o)?Z.some(Tc.moveToPosition(i)):Z.none()),n9=(e,n)=>It(n)?Z.none():e&&Un(n.nextSibling)?Z.some(Tc.moveToElement(n.nextSibling)):!e&&Un(n.previousSibling)?Z.some(Tc.moveToElement(n.previousSibling)):Z.none(),o9=(e,n,o)=>o.fold(r=>Z.some(Tc.remove(r)),r=>Z.some(Tc.moveToElement(r)),r=>au(n,r,e)?Z.none():Z.some(Tc.moveToPosition(r))),s9=(e,n,o,r)=>e9(n,o)?n9(n,o.getNode(!n)).orThunk(()=>nI(e,n,o,r)):nI(e,n,o,r).bind(i=>o9(e,o,i)),YT=(e,n,o,r)=>{const i=bC(n?1:-1,e,o),u=De.fromRangeStart(i),g=re.fromDom(e);return!n&&sm(u)?Z.some(Tc.remove(u.getNode(!0))):n&&hg(u)?Z.some(Tc.remove(u.getNode())):!n&&hg(u)&&KC(g,u,r)?D7(g,u,r).map(y=>Tc.remove(y.getNode())):n&&sm(u)&&qC(g,u,r)?R7(g,u,r).map(y=>Tc.remove(y.getNode())):s9(e,n,u,r)},n3=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),bg(e,n,re.fromDom(o)),!0),r9=(e,n)=>o=>{const r=n?De.before(o):De.after(o);return e.selection.setRng(r.toRange()),!0},a9=e=>n=>(e.selection.setRng(n.toRange()),!0),oI=(e,n)=>Z.from(op(e.getBody(),n)),i9=(e,n)=>{const o=e.selection.getNode();return oI(e,o).filter(Un).fold(()=>YT(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold(n3(e,n),r9(e,n),a9(e))),()=>Z.some(Dt))},sI=e=>{$e(Zr(e,".mce-offscreen-selection"),ho)},c9=(e,n)=>{const o=e.selection.getNode();return Un(o)&&!l1(o)?oI(e,o.parentNode).filter(Un).fold(()=>Z.some(()=>{sI(re.fromDom(e.getBody())),bg(e,n,re.fromDom(e.selection.getNode())),o4(e)}),()=>Z.some(Dt)):t3(e)?Z.some(()=>{FE(e,e.selection.getRng(),re.fromDom(e.getBody()))}):Z.none()},rI=e=>{const n=e.dom,o=e.selection,r=op(e.getBody(),o.getNode());if(Fa(r)&&n.isBlock(r)&&n.isEmpty(r)){const i=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(i),o.setRng(De.before(i).toRange())}return!0},MS=(e,n)=>e.selection.isCollapsed()?i9(e,n):c9(e,n),l9=(e,n)=>{const o=De.fromRangeStart(e.selection.getRng());return Yr(n,e.getBody(),o).filter(r=>n?E7(r):T7(r)).bind(r=>V1(n?0:-1,r)).map(r=>()=>e.selection.select(r))},o3=(e,n)=>e.selection.isCollapsed()?l9(e,n):Z.none(),Q0=nt,aI=e=>Q0(e)&&e.data[0]===Gr,iI=e=>Q0(e)&&e.data[e.data.length-1]===Gr,cI=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Gr)},u9=e=>{var n;if(Q0(e.previousSibling))return iI(e.previousSibling)||e.previousSibling.appendData(Gr),e.previousSibling;if(Q0(e))return aI(e)||e.insertData(0,Gr),e;{const o=cI(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},XT=e=>{var n,o;if(Q0(e.nextSibling))return aI(e.nextSibling)||e.nextSibling.insertData(0,Gr),e.nextSibling;if(Q0(e))return iI(e)||e.appendData(Gr),e;{const r=cI(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},Ab=(e,n)=>e?u9(n):XT(n),d9=qe(Ab,!0),m9=qe(Ab,!1),PS=(e,n)=>nt(e.container())?Ab(n,e.container()):Ab(n,e.getNode()),lI=(e,n)=>{const o=n.get();return o&&e.container()===o&&wi(o)},s3=(e,n)=>n.fold(o=>{_r(e.get());const r=d9(o);return e.set(r),Z.some(De(r,r.length-1))},o=>ii(o).map(r=>{if(lI(r,e)){const i=e.get();return De(i,1)}else{_r(e.get());const i=PS(r,!0);return e.set(i),De(i,1)}}),o=>xl(o).map(r=>{if(lI(r,e)){const i=e.get();return De(i,i.length-1)}else{_r(e.get());const i=PS(r,!1);return e.set(i),De(i,i.length-1)}}),o=>{_r(e.get());const r=m9(o);return e.set(r),Z.some(De(r,1))}),uI=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return Z.none()},sc=ru.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),dI=(e,n)=>{const o=Gd(n,e);return o||e},f9=(e,n,o)=>{const r=Vo(o),i=dI(n,r.container());return ha(e,i,r).fold(()=>Ua(i,r).bind(qe(ha,e,i)).map(u=>sc.before(u)),Z.none)},g9=(e,n)=>ig(e,n)===null,mI=(e,n,o)=>ha(e,n,o).filter(qe(g9,n)),h9=(e,n,o)=>{const r=iN(o);return mI(e,n,r).bind(i=>Ei(i,r).isNone()?Z.some(sc.start(i)):Z.none())},p9=(e,n,o)=>{const r=Vo(o);return mI(e,n,r).bind(i=>Ua(i,r).isNone()?Z.some(sc.end(i)):Z.none())},b9=(e,n,o)=>{const r=iN(o),i=dI(n,r.container());return ha(e,i,r).fold(()=>Ei(i,r).bind(qe(ha,e,i)).map(u=>sc.after(u)),Z.none)},v9=e=>!aN(NS(e)),Da=(e,n,o)=>uI([f9,h9,p9,b9],[e,n,o]).filter(v9),NS=e=>e.fold(Eo,Eo,Eo,Eo),r3=e=>e.fold(ft("before"),ft("start"),ft("end"),ft("after")),BS=e=>e.fold(sc.before,sc.before,sc.after,sc.after),a3=e=>e.fold(sc.start,sc.start,sc.end,sc.end),fI=(e,n)=>r3(e)===r3(n)&&NS(e)===NS(n),y9=(e,n,o,r,i,u)=>Mr(ha(n,o,r),ha(n,o,i),(g,y)=>g!==y&&JC(o,g,y)?sc.after(e?g:y):u).getOr(u),gI=(e,n)=>e.fold(yt,o=>!fI(o,n)),w9=(e,n,o,r,i)=>{const u=mu(e,i);return Yr(e,o,u).map(qe(mu,e)).fold(()=>r.map(BS),x=>Da(n,o,x).map(qe(y9,e,n,o,u,x)).filter(qe(gI,r))).filter(v9)},C9=(e,n)=>e?n.fold(R(Z.some,sc.start),Z.none,R(Z.some,sc.after),Z.none):n.fold(Z.none,R(Z.some,sc.before),Z.none,R(Z.some,sc.end)),S9=(e,n,o,r)=>{const i=mu(e,r),u=Da(n,o,i);return Da(n,o,i).bind(qe(C9,e)).orThunk(()=>w9(e,n,o,u,r))},ey=e=>ue(e.selection.getSel().modify),i3=(e,n,o)=>{const r=e?1:-1;return n.setRng(De(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},hI=(e,n)=>{const o=n.selection.getRng(),r=e?De.fromRangeEnd(o):De.fromRangeStart(o);return ey(n)?e&&zu(r)?i3(!0,n.selection,r):!e&&bv(r)?i3(!1,n.selection,r):!1:!1};var um;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(um||(um={}));const ty=(e,n)=>e===Zs.Backwards?os(n):n,x9=(e,n,o)=>e===Zs.Forwards?n.next(o):n.prev(o),E9=(e,n,o,r)=>No(r.getNode(n===Zs.Forwards))?um.Br:au(o,r)===!1?um.Block:um.Wrap,pI=(e,n,o,r)=>{const i=iu(o);let u=r;const g=[];for(;u;){const y=x9(n,i,u);if(!y)break;if(No(y.getNode(!1)))return n===Zs.Forwards?{positions:ty(n,g).concat([y]),breakType:um.Br,breakAt:Z.some(y)}:{positions:ty(n,g),breakType:um.Br,breakAt:Z.some(y)};if(!y.isVisible()){u=y;continue}if(e(u,y)){const x=E9(o,n,u,y);return{positions:ty(n,g),breakType:x,breakAt:Z.some(y)}}g.push(y),u=y}return{positions:ty(n,g),breakType:um.Eol,breakAt:Z.none()}},T9=(e,n,o,r)=>n(o,r).breakAt.map(i=>{const u=n(o,i).positions;return e===Zs.Backwards?u.concat(i):[i].concat(u)}).getOr([]),bI=(e,n)=>as(e,(o,r)=>o.fold(()=>Z.some(r),i=>Mr(Ks(i.getClientRects()),Ks(r.getClientRects()),(u,g)=>{const y=Math.abs(n-u.left);return Math.abs(n-g.left)<=y?r:i}).or(o)),Z.none()),c3=(e,n)=>Ks(n.getClientRects()).bind(o=>bI(e,o.left)),_c=qe(pI,De.isAbove,-1),$S=qe(pI,De.isBelow,1),vI=qe(T9,-1,_c),pp=qe(T9,1,$S),l3=(e,n)=>_c(e,n).breakAt.isNone(),yI=(e,n)=>$S(e,n).breakAt.isNone(),JT=e=>ii(e).map(n=>[n].concat($S(e,n).positions)).getOr([]),_9=e=>xl(e).map(n=>_c(e,n).positions.concat(n)).getOr([]),k9=(e,n)=>c3(vI(e,n),n),O9=(e,n)=>c3(pp(e,n),n),A9=Un,wI=(e,n)=>Math.abs(e.left-n),CI=(e,n)=>Math.abs(e.right-n),_g=e=>va(e,"node"),SI=(e,n)=>Na(e,(o,r)=>{const i=Math.min(wI(o,n),CI(o,n)),u=Math.min(wI(r,n),CI(r,n));return u===i&&_g(r)&&A9(r.node)||u<i?r:o}),D9=e=>{const n=o=>zt(o,r=>{const i=eg(r);return i.node=e,i});if(Mt(e))return n(e.getClientRects());if(nt(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},xI=e=>Ya(e,D9);var IS;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(IS||(IS={}));const R9=(e,n,o,r)=>{let i=r;for(;i=Nh(i,e,vv,n);)if(o(i))return},QT=(e,n,o,r,i,u)=>{let g=0;const y=[],x=F=>{let V=xI([F]);e===-1&&(V=V.reverse());for(let J=0;J<V.length;J++){const ne=V[J];if(!o(ne,A)){if(y.length>0&&n(ne,Xa(y))&&g++,ne.line=g,i(ne))return!0;y.push(ne)}}return!1},A=Xa(u.getClientRects());if(!A)return y;const I=u.getNode();return I&&(x(I),R9(e,r,x,I)),y},u3=(e,n)=>n.line>e,d3=(e,n)=>n.line===e,EI=qe(QT,IS.Up,zm,ng),TI=qe(QT,IS.Down,ng,zm),m3=e=>Xa(e.getClientRects()),M9=(e,n,o,r)=>{const i=iu(n);let u,g,y,x;const A=[];let I=0;e===1?(u=i.next,g=ng,y=zm,x=De.after(r)):(u=i.prev,g=zm,y=ng,x=De.before(r));const F=m3(x);do{if(!x.isVisible())continue;const V=m3(x);if(y(V,F))continue;A.length>0&&g(V,Xa(A))&&I++;const J=eg(V);if(J.position=x,J.line=I,o(J))return A;A.push(J)}while(x=u(x));return A},ny=e=>n=>u3(e,n),oy=e=>n=>d3(e,n),gf=(e,n)=>{e.selection.setRng(n),mb(e,e.selection.getRng())},e_=(e,n,o)=>Z.some(GT(e,n,o)),f3=(e,n,o,r,i,u)=>{const g=n===Zs.Forwards,y=iu(e.getBody()),x=qe(Wx,g?y.next:y.prev),A=g?r:i;if(!o.collapsed){const ne=Ow(o);if(u(ne))return ff(n,e,ne,n===Zs.Backwards,!1);if(t3(e)){const Y=o.cloneRange();return Y.collapse(n===Zs.Backwards),Z.from(Y)}}const I=Ym(n,e.getBody(),o);if(A(I))return J0(e,I.getNode(!g));let F=x(I);const V=L2(o);if(F)F=mu(g,F);else return V?Z.some(o):Z.none();if(A(F))return ff(n,e,F.getNode(!g),g,!1);const J=x(F);return J&&A(J)&&vC(F,J)?ff(n,e,J.getNode(!g),g,!1):V?e_(e,F.toRange(),!1):Z.none()},g3=(e,n,o,r,i,u)=>{const g=Ym(n,e.getBody(),o),y=Xa(g.getClientRects()),x=n===IS.Down,A=e.getBody();if(!y)return Z.none();if(t3(e)){const oe=x?De.fromRangeEnd(o):De.fromRangeStart(o);return(x?O9:k9)(A,oe).orThunk(()=>Z.from(oe)).map(be=>be.toRange())}const F=(x?TI:EI)(A,ny(1),g),V=jt(F,oy(1)),J=y.left,ne=SI(V,J);if(ne&&u(ne.node)){const oe=Math.abs(J-ne.left),he=Math.abs(J-ne.right);return ff(n,e,ne.node,oe<he,!1)}let Y;if(r(g)?Y=g.getNode():i(g)?Y=g.getNode(!0):Y=Ow(o),Y){const oe=M9(n,A,ny(1),Y);let he=SI(jt(oe,oy(1)),J);if(he||(he=Xa(jt(oe,oy(0))),he))return e_(e,he.position.toRange(),!1)}return V.length===0?sy(e,x).filter(x?i:r).map(oe=>GT(e,oe.toRange(),!1)):Z.none()},sy=(e,n)=>{const o=e.selection.getRng(),r=n?De.fromRangeEnd(o):De.fromRangeStart(o),i=hC(r.container(),e.getBody());if(n){const u=$S(i,r);return $i(u.positions)}else{const u=_c(i,r);return Ks(u.positions)}},t_=(e,n,o)=>sy(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),bp=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},_I=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},h3=(e,n,o)=>s3(n,o).map(r=>(bp(e,r),o)),P9=(e,n,o)=>{const r=De.fromRangeStart(e);if(e.collapsed)return r;{const i=De.fromRangeEnd(e);return o?Ei(n,i).getOr(i):Ua(n,r).getOr(r)}},N9=(e,n,o)=>{const r=e.getBody(),i=P9(e.selection.getRng(),r,o),u=qe(bb,e);return S9(o,u,r,i).bind(y=>h3(e,n,y))},kI=(e,n,o)=>{const r=zt(Zr(re.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),g=>g.dom),i=jt(r,e),u=jt(o,e);$e(Cd(i,u),qe(_I,!1)),$e(Cd(u,i),qe(_I,!0))},B9=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=De.fromRangeStart(e.selection.getRng());De.isTextPosition(r)&&!du(r)&&(bp(e,Fx(o,r)),n.set(null))}},OI=(e,n,o,r)=>{if(n.selection.isCollapsed()){const i=jt(r,e);$e(i,u=>{const g=De.fromRangeStart(n.selection.getRng());Da(e,n.getBody(),g).bind(y=>h3(n,o,y))})}},$9=(e,n,o)=>sg(e)?N9(e,n,o).isSome():!1,AI=(e,n,o)=>sg(n)?hI(e,n):!1,I9=e=>{const n=Ts(null),o=qe(bb,e);return e.on("NodeChange",r=>{sg(e)&&(kI(o,e.dom,r.parents),B9(e,n),OI(o,e,n,r.parents))}),n},F9=qe(AI,!0),L9=qe(AI,!1),n_=(e,n,o)=>{if(sg(e)){const r=sy(e,n).getOrThunk(()=>{const i=e.selection.getRng();return n?De.fromRangeEnd(i):De.fromRangeStart(i)});return Da(qe(bb,e),e.getBody(),r).exists(i=>{const u=BS(i);return s3(o,u).exists(g=>(bp(e,g),!0))})}else return!1},H9=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},z9=e=>Mr(ii(e),xl(e),(n,o)=>{const r=mu(!0,n),i=mu(!1,o);return Ua(e,r).forall(u=>u.isEqual(i))}).getOr(!0),DI=(e,n)=>o=>s3(n,o).map(r=>()=>bp(e,r)),p3=(e,n,o,r)=>{const i=e.getBody(),u=qe(bb,e);e.undoManager.ignore(()=>{e.selection.setRng(H9(o,r)),IE(e),Da(u,i,De.fromRangeStart(e.selection.getRng())).map(a3).bind(DI(e,n)).each(ar)}),e.nodeChanged()},V9=(e,n)=>{const o=Gd(n,e);return o||e},Db=(e,n,o,r)=>{const i=V9(e.getBody(),r.container()),u=qe(bb,e),g=Da(u,i,r);return g.bind(x=>o?x.fold(ft(Z.some(a3(x))),Z.none,ft(Z.some(BS(x))),Z.none):x.fold(Z.none,ft(Z.some(BS(x))),Z.none,ft(Z.some(a3(x))))).map(DI(e,n)).getOrThunk(()=>{const x=Kd(o,i,r),A=x.bind(I=>Da(u,i,I));return Mr(g,A,()=>ha(u,i,r).bind(I=>z9(I)?Z.some(()=>{bg(e,o,re.fromDom(I))}):Z.none())).getOrThunk(()=>A.bind(()=>x.map(I=>()=>{o?p3(e,n,r,I):p3(e,n,I,r)})))})},o_=(e,n,o)=>{if(e.selection.isCollapsed()&&sg(e)){const r=De.fromRangeStart(e.selection.getRng());return Db(e,n,o,r)}return Z.none()},b3=e=>Ia(e)>1,v3=(e,n)=>{const o=re.fromDom(e.getBody()),r=re.fromDom(e.selection.getStart()),i=sf(r,o);return ea(i,n).fold(ft(i),u=>i.slice(0,u))},y3=e=>Ia(e)===1,vp=e=>v3(e,n=>e.schema.isBlock(Jn(n))||b3(n)),RI=e=>v3(e,n=>e.schema.isBlock(Jn(n))),Dl=(e,n)=>{const o=qe(tB,e);return Ya(n,r=>o(r)?[r.dom]:[])},yp=e=>{const n=RI(e);return Dl(e,n)},w3=(e,n,o,r)=>{const i=Dl(n,r);if(i.length===0)bg(n,e,o);else{const u=oT(o.dom,i);n.selection.setRng(u.toRange())}},U9=(e,n)=>{const o=jt(vp(e),y3);return $i(o).bind(r=>{const i=De.fromRangeStart(e.selection.getRng());return s4(n,i,r.dom)&&!tb(r)?Z.some(()=>w3(n,e,r,o)):Z.none()})},MI=(e,n)=>{const o=n.parentElement;return No(n)&&!ae(o)&&e.dom.isEmpty(o)},W9=e=>tb(re.fromDom(e)),PI=(e,n)=>{const o=e.selection.getStart(),r=MI(e,o)||W9(o)?oT(o,n):eB(e.selection.getRng(),n);e.selection.setRng(r.toRange())},Z9=(e,n)=>{const o=Cd(n,yp(e));o.length>0&&PI(e,o)},NI=e=>nt(e.startContainer),j9=e=>e.startOffset===0&&NI(e),BI=(e,n)=>{const o=n.startContainer.parentElement;return!ae(o)&&tB(e,re.fromDom(o))},G9=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!ae(n)&&!ae(o)&&n.isEqualNode(o)},q9=e=>{const n=e.endContainer;return e.endOffset===(nt(n)?n.length:n.childNodes.length)},ry=e=>G9(e)&&q9(e),C3=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),$I=e=>ry(e)||C3(e),II=e=>{const n=e.selection.getRng();return j9(n)&&BI(e,n)&&$I(n)},S3=e=>{if(II(e)){const n=yp(e);return Z.some(()=>{IE(e),Z9(e,n)})}else return Z.none()},x3=(e,n)=>e.selection.isCollapsed()?U9(e,n):S3(e),K9=(e,n)=>cN(e,o=>pc(o.dom),o=>n.isBlock(Jn(o))),Y9=e=>K9(re.fromDom(e.selection.getStart()),e.schema),X9=e=>{const n=e.selection.getRng();return n.collapsed&&(NI(n)||e.dom.isEmpty(n.startContainer))&&!Y9(e)},FS=e=>(X9(e)&&PI(e,[]),!0),E3=(e,n,o)=>Te(o)?Z.some(()=>{e._selectionOverrides.hideFakeCaret(),bg(e,n,re.fromDom(o))}):Z.none(),J9=(e,n)=>{const o=n?GC:P0,r=n?Zs.Forwards:Zs.Backwards,i=Ym(r,e.getBody(),e.selection.getRng());return o(i)?E3(e,n,i.getNode(!n)):Z.from(mu(n,i)).filter(u=>o(u)&&vC(i,u)).bind(u=>E3(e,n,u.getNode(!n)))},FI=(e,n)=>{const o=e.selection.getNode();return zs(o)?E3(e,n,o):Z.none()},T3=(e,n)=>e.selection.isCollapsed()?J9(e,n):FI(e,n),Q9=e=>hi(e,n=>Fa(n.dom)||Un(n.dom)).exists(n=>Fa(n.dom)),kc=e=>cl(e??"").getOr(0),LI=(e,n)=>{const o=e||vi(n)?"margin":"padding",r=nr(n,"direction")==="rtl"?"-right":"-left";return o+r},_3=(e,n,o,r,i,u)=>{const g=LI(o,re.fromDom(u)),y=kc(e.getStyle(u,g));if(n==="outdent"){const x=Math.max(0,y-r);e.setStyle(u,g,x?x+i:"")}else{const x=y+r+i;e.setStyle(u,g,x)}},HI=(e,n)=>tr(n,o=>{const r=LI(Xv(e),o),i=or(o,r).map(kc).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&i>0}),s_=e=>{const n=VI(e);return!e.mode.isReadOnly()&&(n.length>1||HI(e,n))},zI=e=>Zi(e)||Fu(e),eU=e=>aa(e).exists(zI),VI=e=>jt($f(e.selection.getSelectedBlocks()),n=>!zI(n)&&!eU(n)&&Q9(n)),UI=(e,n)=>{var o,r;const{dom:i}=e,u=Xw(e),g=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",y=kc(u),x=Xv(e);$e(VI(e),A=>{_3(i,n,x,y,g,A.dom)})},tU=e=>UI(e,"indent"),k3=e=>UI(e,"outdent"),WI=e=>{if(e.selection.isCollapsed()&&s_(e)){const n=e.dom,o=e.selection.getRng(),r=De.fromRangeStart(o),i=n.getParent(o.startContainer,n.isBlock);if(i!==null&&YA(re.fromDom(i),r,e.schema))return Z.some(()=>k3(e))}return Z.none()},ZI=(e,n,o)=>Mc([WI,MS,e3,(r,i)=>o_(r,n,i),JD,VE,o3,T3,jT,x3],r=>r(e,o)).filter(r=>e.selection.isEditable()),LS=(e,n)=>{ZI(e,n,!1).fold(()=>{e.selection.isEditable()&&(IE(e),o4(e))},ar)},kg=(e,n)=>{ZI(e,n,!0).fold(()=>{e.selection.isEditable()&&t4(e)},ar)},Rb=(e,n)=>{e.addCommand("delete",()=>{LS(e,n)}),e.addCommand("forwardDelete",()=>{kg(e,n)})},HS=5,O3=400,r_=e=>e.touches===void 0||e.touches.length!==1?Z.none():Z.some(e.touches[0]),jI=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>HS||r>HS},nU=e=>{const n=Lm(),o=Ts(!1),r=Iv(i=>{e.dispatch("longpress",{...i,type:"longpress"}),o.set(!0)},O3);e.on("touchstart",i=>{r_(i).each(u=>{r.cancel();const g={x:u.clientX,y:u.clientY,target:i.target};r.throttle(i),o.set(!1),n.set(g)})},!0),e.on("touchmove",i=>{r.cancel(),r_(i).each(u=>{n.on(g=>{jI(u,g)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",i=>{r.cancel(),i.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(i.target)).each(()=>{o.get()?i.preventDefault():e.dispatch("tap",{...i,type:"tap"})})},!0)},a_=(e,n)=>cn(e,n.nodeName),GI=(e,n)=>nt(n)?!0:Mt(n)?!a_(e.getBlockElements(),n)&&!bc(n)&&!Ln(e,n)&&!lw(n):!1,oU=(e,n,o)=>Po(qA(re.fromDom(o),re.fromDom(n)),r=>a_(e,r.dom)),sU=(e,n)=>{if(nt(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||a_(e,n.nextSibling)||lw(n.nextSibling)}return!1},qI=e=>e.dom.create(za(e),M1(e)),rU=e=>{const n=e.dom,o=e.selection,r=e.schema,i=r.getBlockElements(),u=o.getStart(),g=e.getBody();let y,x,A=!1;const I=za(e);if(!u||!Mt(u))return;const F=g.nodeName.toLowerCase();if(!r.isValidChild(F,I.toLowerCase())||oU(i,g,u))return;const V=o.getRng(),{startContainer:J,startOffset:ne,endContainer:Y,endOffset:oe}=V,he=Qh(e);let be=g.firstChild;for(;be;)if(Mt(be)&&Sv(r,be),GI(r,be)){if(sU(i,be)){x=be,be=be.nextSibling,n.remove(x);continue}y||(y=qI(e),g.insertBefore(y,be),A=!0),x=be,be=be.nextSibling,y.appendChild(x)}else y=null,be=be.nextSibling;A&&he&&(V.setStart(J,ne),V.setEnd(Y,oe),o.setRng(V),e.nodeChanged())},KI=(e,n,o)=>{const r=re.fromDom(qI(e)),i=yi();Js(r,i),o(n,r);const u=document.createRange();return u.setStartBefore(i.dom),u.setEndBefore(i.dom),u},aU=e=>{e.on("NodeChange",qe(rU,e))},A3=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,YI=(e,n,o)=>function(r){const i=arguments,u=i[i.length-2],g=u>0?n.charAt(u-1):"";if(g==='"')return r;if(g===">"){const y=n.lastIndexOf("<",u);if(y!==-1&&n.substring(y,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(i[0])+'">'+e.dom.encode(typeof i[1]=="string"?i[1]:i[0])+"</span>"},mY=(e,n,o)=>{let r=n.length,i=o.content;if(o.format!=="raw"){for(;r--;)i=i.replace(n[r],YI(e,i,aC(e)));o.content=i}},fY=(e,n)=>tr(e,o=>{const r=n.match(o);return r!==null&&r[0].length===n.length}),gY=e=>{const n="contenteditable",o=" "+at.trim(Px(e))+" ",r=" "+at.trim(aC(e))+" ",i=A3(o),u=A3(r),g=jO(e);g.length>0&&e.on("BeforeSetContent",y=>{mY(e,g,y)}),e.parser.addAttributeFilter("class",y=>{let x=y.length;for(;x--;){const A=y[x];i(A)?A.attr(n,"true"):u(A)&&A.attr(n,"false")}}),e.serializer.addAttributeFilter(n,y=>{let x=y.length;for(;x--;){const A=y[x];if(!i(A)&&!u(A))continue;const I=A.attr("data-mce-content");g.length>0&&I?fY(g,I)?(A.name="#text",A.type=3,A.raw=!0,A.value=I):A.remove():A.attr(n,null)}})},iU=e=>pi(re.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),cU=(e,n)=>{n.hasAttribute("data-mce-caret")&&(Nd(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},hY=(e,n)=>{const o=iU(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),cU(e,o);return}sw(o)&&(cU(e,o),e.undoManager.add())}},lU=e=>{e.on("keyup compositionstart",qe(hY,e))},XI=Un,pY=(e,n,o)=>f3(n,e,o,hg,sm,XI),uU=(e,n,o)=>g3(n,e,o,u=>hg(u)||LP(u),u=>sm(u)||kn(u),XI),Jc=e=>{const n=e.dom.create(za(e));return n.innerHTML='<br data-mce-bogus="1">',n},D3=(e,n,o)=>{const r=iu(e.getBody()),i=qe(Wx,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!i(De.fromRangeStart(o))){const y=re.fromDom(Jc(e));n===1?Uc(re.fromDom(u),y):dr(re.fromDom(u),y),e.selection.select(y.dom,!0),e.selection.collapse()}}},zS=(e,n)=>{const o=n?Zs.Forwards:Zs.Backwards,r=e.selection.getRng();return pY(o,e,r).orThunk(()=>(D3(e,o,r),Z.none()))},dU=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return uU(o,e,r).orThunk(()=>(D3(e,o,r),Z.none()))},JI=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return aN(o)?!n:n},R3=(e,n)=>zS(e,JI(e.selection,n)).exists(o=>(gf(e,o),!0)),i_=(e,n)=>dU(e,n).exists(o=>(gf(e,o),!0)),QI=(e,n)=>t_(e,n,n?sm:hg),c_=(e,n)=>KT(e,!n).map(o=>{const r=o.toRange(),i=e.selection.getRng();return n?r.setStart(i.startContainer,i.startOffset):r.setEnd(i.endContainer,i.endOffset),r}).exists(o=>(gf(e,o),!0)),eF=e=>on(["figcaption"],Jn(e)),mU=(e,n,o)=>{const r=qe(so,n);return hi(re.fromDom(e.container()),i=>o.isBlock(Jn(i)),r).filter(eF)},fU=(e,n,o)=>n?yI(e.dom,o):l3(e.dom,o),gU=(e,n)=>{const o=re.fromDom(e.getBody()),r=De.fromRangeStart(e.selection.getRng());return mU(r,o,e.schema).exists(()=>{if(fU(o,n,r)){const u=KI(e,o,n?Js:Bf);return e.selection.setRng(u),!0}else return!1})},l_=(e,n)=>e.selection.isCollapsed()?gU(e,n):!1,hU=(e,n,o)=>{const r=e.selection.getRng(),i=De.fromRangeStart(r);return e.getBody().firstChild===n&&l3(o,i)?(e.execCommand("InsertNewBlockBefore"),!0):!1},pU=(e,n)=>{const o=e.selection.getRng(),r=De.fromRangeStart(o);return e.getBody().lastChild===n&&yI(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},bY=(e,n)=>n?Z.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>pU(e,o)).getOr(!1):Z.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>Z.from(e.dom.getParent(o,"details")).map(r=>hU(e,r,o))).getOr(!1),tF=(e,n)=>bY(e,n),M3={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},vY=e=>zt(e,n=>({...M3,...n})),bU=e=>zt(e,n=>({...M3,...n})),nF=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,vU=(e,n)=>Ya(vY(e),o=>nF(o,n)?[o]:[]),P3=(e,n)=>Ya(bU(e),o=>nF(o,n)?[o]:[]),dn=(e,...n)=>()=>e.apply(null,n),ay=(e,n)=>As(vU(e,n),o=>o.action()),N3=(e,n)=>Mc(P3(e,n),o=>o.action()),oF=(e,n)=>{const o=n?Zs.Forwards:Zs.Backwards,r=e.selection.getRng();return f3(e,o,r,GC,P0,zs).exists(i=>(gf(e,i),!0))},sF=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return g3(e,o,r,GC,P0,zs).exists(i=>(gf(e,i),!0))},u_=(e,n)=>t_(e,n,n?P0:GC),rF=ru.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),VS={...rF,none:e=>rF.none(e)},yU=(e,n)=>yu(e,n,yt),yu=(e,n,o)=>Ya(ur(e),r=>Vi(r,n)?o(r)?[r]:[]:yu(r,n,o)),aF=(e,n,o=Xe)=>{if(o(n))return Z.none();if(on(e,Jn(n)))return Z.some(n);const r=i=>Vi(i,"table")||o(i);return Nu(n,e.join(","),r)},iF=(e,n)=>aF(["td","th"],e,n),wY=e=>yU(e,"th,td"),wU=(e,n)=>pl(e,"table",n),cF=(e,n,o,r,i=yt)=>{const u=r===1;if(!u&&o<=0)return VS.first(e[0]);if(u&&o>=e.length-1)return VS.last(e[e.length-1]);{const g=o+r,y=e[g];return i(y)?VS.middle(n,y):cF(e,n,g,r,i)}},CU=(e,n)=>wU(e,n).bind(o=>{const r=wY(o);return ea(r,u=>so(e,u)).map(u=>({index:u,all:r}))}),SU=(e,n,o)=>CU(e,o).fold(()=>VS.none(e),i=>cF(i.all,e,i.index,1,n)),d_=(e,n,o)=>CU(e,o).fold(()=>VS.none(),i=>cF(i.all,e,i.index,-1,n)),xU=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),B3=(e,n)=>Ya(n,o=>{const r=xU(eg(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),lF=(e,n,o)=>as(e,(r,i)=>r.fold(()=>Z.some(i),u=>{const g=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),y=Math.sqrt(Math.abs(i.x-n)+Math.abs(i.y-o));return Z.some(y<g?i:u)}),Z.none()),$3=(e,n,o,r,i)=>{const u=Zr(re.fromDom(o),"td,th,caption").map(y=>y.dom),g=jt(B3(e,u),y=>n(y,i));return lF(g,r,i).map(y=>y.cell)},uF=e=>e.bottom,EU=e=>e.top,TU=(e,n)=>e.y<n,_U=(e,n)=>e.y>n,kU=qe($3,uF,TU),m_=qe($3,EU,_U),OU=(e,n)=>Ks(n.getClientRects()).bind(o=>kU(e,o.left,o.top)).bind(o=>c3(_9(o),n)),AU=(e,n)=>$i(n.getClientRects()).bind(o=>m_(e,o.left,o.top)).bind(o=>c3(JT(o),n)),DU=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),I3=e=>e.breakType===um.Wrap&&e.positions.length===0,RU=e=>e.breakType===um.Br&&e.positions.length===1,dF=(e,n,o)=>{const r=e(n,o);return I3(r)||!No(o.getNode())&&RU(r)?!DU(e,n,r):r.breakAt.isNone()},mF=qe(dF,_c),MU=qe(dF,$S),PU=(e,n,o)=>{const r=De.fromRangeStart(n);return Hh(!e,o).exists(i=>i.isEqual(r))},NU=(e,n,o,r)=>{const i=e.selection.getRng(),u=n?1:-1;return H1()&&PU(n,i,o)?(ff(u,e,o,!n,!1).each(g=>{gf(e,g)}),!0):!1},BU=(e,n,o)=>OU(n,o).orThunk(()=>Ks(o.getClientRects()).bind(r=>bI(vI(e,De.before(n)),r.left))).getOr(De.before(n)),$U=(e,n,o)=>AU(n,o).orThunk(()=>Ks(o.getClientRects()).bind(r=>bI(pp(e,De.after(n)),r.left))).getOr(De.after(n)),fF=(e,n)=>{const o=n.getNode(e);return $u(o)?Z.some(o):Z.none()},F3=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?Uc:dr,i=KI(n,re.fromDom(o),r);gf(n,i)})},gF=(e,n,o)=>{const r=fF(!!n,o),i=n===!1;r.fold(()=>gf(e,o.toRange()),u=>Hh(i,e.getBody()).filter(g=>g.isEqual(o)).fold(()=>gf(e,o.toRange()),g=>F3(n,e,u)))},hF=(e,n,o,r)=>{const i=e.selection.getRng(),u=De.fromRangeStart(i),g=e.getBody();if(!n&&mF(r,u)){const y=BU(g,o,u);return gF(e,n,y),!0}else if(n&&MU(r,u)){const y=$U(g,o,u);return gF(e,n,y),!0}else return!1},pF=(e,n,o)=>Z.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>Z.from(e.dom.getParent(r,"table")).map(i=>o(e,n,i,r))).getOr(!1),bF=(e,n)=>pF(e,n,NU),L3=(e,n)=>pF(e,n,hF),IU=e=>{const n=nm.exact(e,0,e,0);return BA(n)},vF=(e,n,o)=>o.fold(Z.none,Z.none,(r,i)=>r7(i).map(u=>IU(u)),r=>(e.execCommand("mceTableInsertRowAfter"),yF(e,n,r))),yF=(e,n,o)=>vF(e,n,SU(o,xn)),Ir=(e,n,o)=>vF(e,n,d_(o,xn)),wF=(e,n)=>{const o=["table","li","dl"],r=re.fromDom(e.getBody()),i=y=>{const x=Jn(y);return so(y,r)||on(o,x)},u=e.selection.getRng(),g=re.fromDom(n?u.endContainer:u.startContainer);return iF(g,i).map(y=>(wU(y,i).each(I=>{e.model.table.clearSelectedCells(I.dom)}),e.selection.collapse(!n),(n?yF:Ir)(e,i,y).each(I=>{e.selection.setRng(I)}),!0)).getOr(!1)},FU=(e,n,o)=>{const r=Et.os.isMacOS()||Et.os.isiOS();ay([{keyCode:At.RIGHT,action:dn(R3,e,!0)},{keyCode:At.LEFT,action:dn(R3,e,!1)},{keyCode:At.UP,action:dn(i_,e,!1)},{keyCode:At.DOWN,action:dn(i_,e,!0)},...r?[{keyCode:At.UP,action:dn(c_,e,!1),metaKey:!0,shiftKey:!0},{keyCode:At.DOWN,action:dn(c_,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:At.RIGHT,action:dn(bF,e,!0)},{keyCode:At.LEFT,action:dn(bF,e,!1)},{keyCode:At.UP,action:dn(L3,e,!1)},{keyCode:At.DOWN,action:dn(L3,e,!0)},{keyCode:At.UP,action:dn(L3,e,!1)},{keyCode:At.UP,action:dn(tF,e,!1)},{keyCode:At.DOWN,action:dn(tF,e,!0)},{keyCode:At.RIGHT,action:dn(oF,e,!0)},{keyCode:At.LEFT,action:dn(oF,e,!1)},{keyCode:At.UP,action:dn(sF,e,!1)},{keyCode:At.DOWN,action:dn(sF,e,!0)},{keyCode:At.RIGHT,action:dn($9,e,n,!0)},{keyCode:At.LEFT,action:dn($9,e,n,!1)},{keyCode:At.RIGHT,ctrlKey:!r,altKey:r,action:dn(F9,e,n)},{keyCode:At.LEFT,ctrlKey:!r,altKey:r,action:dn(L9,e,n)},{keyCode:At.UP,action:dn(l_,e,!1)},{keyCode:At.DOWN,action:dn(l_,e,!0)}],o).each(i=>{o.preventDefault()})},LU=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||FU(e,n,o)})},md=(e,n)=>({container:e,offset:n}),iy=jo.DOM,US=e=>n=>e===n?-1:0,wp=e=>n=>e.isBlock(n)||on(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",WS=(e,n,o)=>{if(nt(e)&&n>=0)return Z.some(md(e,n));{const r=Hm(iy);return Z.from(r.backwards(e,n,US(e),o)).map(i=>md(i.container,i.container.data.length))}},CF=(e,n,o)=>{if(nt(e)&&n>=e.length)return Z.some(md(e,n));{const r=Hm(iy);return Z.from(r.forwards(e,n,US(e),o)).map(i=>md(i.container,0))}},ZS=(e,n,o)=>{if(!nt(e))return Z.none();const r=e.data;if(n>=0&&n<=r.length)return Z.some(md(e,n));{const i=Hm(iy);return Z.from(i.backwards(e,n,US(e),o)).bind(u=>{const g=u.container.data;return ZS(u.container,n+g.length,o)})}},f_=(e,n,o)=>{if(!nt(e))return Z.none();const r=e.data;if(n<=r.length)return Z.some(md(e,n));{const i=Hm(iy);return Z.from(i.forwards(e,n,US(e),o)).bind(u=>f_(u.container,n-r.length,o))}},jS=(e,n,o,r,i)=>{const u=Hm(e,wp(e));return Z.from(u.backwards(n,o,r,i))},SF=e=>e.collapsed&&nt(e.startContainer),GS=e=>uc(e.toString().replace(/\u00A0/g," ")),qS=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,Mb=(e,n)=>e.substring(n.length),KS=(e,n,o)=>{let r;const i=o.charAt(0);for(r=n-1;r>=0;r--){const u=e.charAt(r);if(qS(u))return Z.none();if(i===u&&yr(e,o,r,n))break}return Z.some(r)},fd=(e,n,o,r=0)=>{if(!SF(n))return Z.none();const i={text:"",offset:0},u=(y,x,A)=>(i.text=A+i.text,i.offset+=x,KS(i.text,i.offset,o).getOr(x)),g=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return jS(e,n.startContainer,n.startOffset,u,g).bind(y=>{const x=n.cloneRange();if(x.setStart(y.container,y.offset),x.setEnd(n.endContainer,n.endOffset),x.collapsed)return Z.none();const A=GS(x);return A.lastIndexOf(o)!==0||Mb(A,o).length<r?Z.none():Z.some({text:Mb(A,o),range:x,trigger:o})})},cy=(e,n,o,r=0)=>l7(re.fromDom(n.startContainer)).fold(()=>fd(e,n,o,r),i=>{const u=e.createRng();u.selectNode(i.dom);const g=GS(u);return Z.some({range:u,text:Mb(g,o),trigger:o})}),xF=e=>e.nodeType===Rf,EF=e=>e.nodeType===Fc,TF=e=>{if(xF(e))return md(e,e.data.length);{const n=e.childNodes;return n.length>0?TF(n[n.length-1]):md(e,n.length)}},H3=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?H3(o[n],0):o.length>0&&EF(e)&&o.length===n?TF(o[o.length-1]):md(e,n)},HU=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return jS(e,n.container,n.offset,(i,u)=>u===0?-1:u,r).filter(i=>{const u=i.container.data.charAt(i.offset-1);return!qS(u)}).isSome()},zU=e=>n=>{const o=H3(n.startContainer,n.startOffset);return!HU(e,o)},YS=(e,n,o)=>Mc(o.triggers,r=>cy(e,n,r)),VU=(e,n)=>{const o=n(),r=e.selection.getRng();return YS(e.dom,r,o).bind(i=>_F(e,n,i))},_F=(e,n,o,r={})=>{var i;const u=n(),y=(i=e.selection.getRng().startContainer.nodeValue)!==null&&i!==void 0?i:"",x=jt(u.lookupByTrigger(o.trigger),I=>o.text.length>=I.minChars&&I.matches.getOrThunk(()=>zU(e.dom))(o.range,y,o.text));if(x.length===0)return Z.none();const A=Promise.all(zt(x,I=>I.fetch(o.text,I.maxResults,r).then(V=>({matchText:o.text,items:V,columns:I.columns,onAction:I.onAction,highlightOn:I.highlightOn}))));return Z.some({lookupData:A,context:o})};var dm;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(dm||(dm={}));const z3=(e,n,o)=>e.stype===dm.Error?n(e.serror):o(e.svalue),UU=e=>{const n=[],o=[];return $e(e,r=>{z3(r,i=>o.push(i),i=>n.push(i))}),{values:n,errors:o}},WU=(e,n)=>e.stype===dm.Error?{stype:dm.Error,serror:n(e.serror)}:e,ZU=(e,n)=>e.stype===dm.Value?{stype:dm.Value,svalue:n(e.svalue)}:e,jU=(e,n)=>e.stype===dm.Value?n(e.svalue):e,GU=(e,n)=>e.stype===dm.Error?n(e.serror):e,kF=e=>({stype:dm.Value,svalue:e}),OF=e=>({stype:dm.Error,serror:e}),ja={fromResult:e=>e.fold(OF,kF),toResult:e=>z3(e,Ci.error,Ci.value),svalue:kF,partition:UU,serror:OF,bind:jU,bindError:GU,map:ZU,mapError:WU,fold:z3},g_=e=>Ge(e)&&Rr(e).length>100?" removed due to size":JSON.stringify(e,null,2),AF=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:ft("... (only showing first ten failures)")}]):e;return zt(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},XS=(e,n)=>ja.serror([{path:e,getErrorInfo:n}]),qU=(e,n,o)=>XS(e,()=>'Could not find valid *required* value for "'+n+'" in '+g_(o)),KU=(e,n)=>XS(e,()=>'Choice schema did not contain choice key: "'+n+'"'),YU=(e,n,o)=>XS(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+g_(n)),XU=(e,n)=>XS(e,ft(n)),DF=(e,n,o,r)=>Lo(o,r).fold(()=>YU(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),JU=(e,n)=>({extract:(i,u)=>Lo(u,e).fold(()=>KU(i,e),y=>DF(i,u,n,y)),toString:()=>"chooseOn("+e+"). Possible values: "+Rr(n)}),RF=(e,n)=>n,QU=(e,n)=>gn(e)&&gn(n)?JS(e,n):n,V3=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const i=n[r];for(const u in i)cn(i,u)&&(o[u]=e(o[u],i[u]))}return o},JS=V3(QU),eW=V3(RF),MF=()=>({tag:"required",process:{}}),tW=e=>({tag:"defaultedThunk",process:e}),U3=e=>tW(ft(e)),nW=()=>({tag:"option",process:{}}),oW=(e,n)=>e.length>0?ja.svalue(JS(n,eW.apply(void 0,e))):ja.svalue(n),W3=e=>R(ja.serror,bm)(e),PF={consolidateObj:(e,n)=>{const o=ja.partition(e);return o.errors.length>0?W3(o.errors):oW(o.values,n)},consolidateArr:e=>{const n=ja.partition(e);return n.errors.length>0?W3(n.errors):ja.svalue(n.values)}},sW=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),rW=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),NF=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},h_=e=>{const n=(r,i)=>ja.bindError(e(i),u=>XU(r,u)),o=ft("val");return{extract:n,toString:o}},BF=h_(ja.svalue),aW=(e,n,o,r)=>Lo(n,o).fold(()=>qU(e,o,n),r),$F=(e,n,o,r)=>{const i=Lo(e,n).getOrThunk(()=>o(e));return r(i)},iW=(e,n,o)=>o(Lo(e,n)),cW=(e,n,o,r)=>{const i=Lo(e,n).map(u=>u===!0?o(e):u);return r(i)},lW=(e,n,o,r,i)=>{const u=y=>i.extract(n.concat([r]),y),g=y=>y.fold(()=>ja.svalue(Z.none()),x=>{const A=i.extract(n.concat([r]),x);return ja.map(A,Z.some)});switch(e.tag){case"required":return aW(n,o,r,u);case"defaultedThunk":return $F(o,r,e.process,u);case"option":return iW(o,r,g);case"defaultedOptionThunk":return cW(o,r,e.process,g);case"mergeWithThunk":return $F(o,r,ft({}),y=>{const x=JS(e.process(o),y);return u(x)})}},uW=(e,n,o)=>{const r={},i=[];for(const u of o)NF(u,(g,y,x,A)=>{const I=lW(x,e,n,g,A);ja.fold(I,F=>{i.push(...F)},F=>{r[y]=F})},(g,y)=>{r[g]=y(n)});return i.length>0?ja.serror(i):ja.svalue(r)},Z3=e=>({extract:(r,i)=>uW(r,i,e),toString:()=>`obj{
`+zt(e,i=>NF(i,(u,g,y,x)=>u+" -> "+x.toString(),(u,g)=>"state("+u+")")).join(`
`)+"}"}),IF=e=>({extract:(r,i)=>{const u=zt(i,(g,y)=>e.extract(r.concat(["["+y+"]"]),g));return PF.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),TY=e=>h_(n=>e(n).fold(ja.serror,ja.svalue)),dW=(e,n,o)=>{const r=n.extract([e],o);return ja.mapError(r,i=>({input:o,errors:i}))},p_=(e,n,o)=>ja.toResult(dW(e,n,o)),FF=e=>`Errors: 
`+AF(e.errors).join(`
`)+`

Input object: `+g_(e.input),j3=(e,n)=>JU(e,oo(n,Z3)),mW=ft(BF),QS=(e,n)=>h_(o=>{const r=typeof o;return e(o)?ja.svalue(o):ja.serror(`Expected type: ${n} but got: ${r}`)}),LF=QS(Fn,"number"),b_=QS(Q,"string"),fW=QS(ut,"boolean"),G3=QS(ue,"function"),ly=sW,HF=rW,q3=e=>TY(n=>on(e,n)?Ci.value(n):Ci.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),zF=(e,n)=>ly(e,e,MF(),n),VF=e=>zF(e,b_),UF=e=>zF(e,G3),WF=(e,n)=>ly(e,e,MF(),IF(n)),K3=(e,n)=>ly(e,e,nW(),n),v_=e=>K3(e,b_),gW=e=>K3(e,G3),hW=(e,n)=>ly(e,e,U3(n),mW()),uy=(e,n,o)=>ly(e,e,U3(n),o),Fr=(e,n)=>uy(e,n,LF),hf=(e,n)=>uy(e,n,b_),ZF=(e,n,o)=>uy(e,n,q3(o)),jF=(e,n)=>uy(e,n,fW),Y3=(e,n)=>uy(e,n,G3),pW=(e,n,o)=>uy(e,n,IF(o)),bW=VF("type"),vW=UF("fetch"),y_=UF("onAction"),dy=Y3("onSetup",()=>Dt),_Y=v_("text"),yW=v_("icon"),wW=v_("tooltip"),mm=v_("label"),CW=jF("active",!1),SW=jF("enabled",!0),X3=jF("primary",!1),xW=e=>hW("columns",e),Pb=e=>hf("type",e),GF=Z3([bW,VF("trigger"),Fr("minChars",1),xW(1),Fr("maxResults",10),gW("matches"),vW,y_,pW("highlightOn",[],b_)]),EW=e=>p_("Autocompleter",GF,{trigger:e.ch,...e}),J3=[SW,wW,yW,_Y,dy],qF=[CW].concat(J3),KF=[Y3("predicate",Xe),ZF("scope","node",["node","editor"]),ZF("position","selection",["node","selection","line"])],YF=J3.concat([Pb("contextformbutton"),X3,y_,HF("original",Eo)]),Q3=qF.concat([Pb("contextformbutton"),X3,y_,HF("original",Eo)]),eR=J3.concat([Pb("contextformbutton")]),tR=qF.concat([Pb("contextformtogglebutton")]),TW=j3("type",{contextformbutton:YF,contextformtogglebutton:Q3});Z3([Pb("contextform"),Y3("initValue",ft("")),mm,WF("commands",TW),K3("launch",j3("type",{contextformbutton:eR,contextformtogglebutton:tR}))].concat(KF));const _W=e=>{const n=e.ui.registry.getAll().popups,o=oo(n,g=>EW(g).fold(y=>{throw new Error(FF(y))},Eo)),r=Fl(Fi(o,g=>g.trigger)),i=rl(o);return{dataset:o,triggers:r,lookupByTrigger:g=>jt(i,y=>y.trigger===g)}},kW=(e,n)=>{const o=Iv(n.load,50);e.on("keypress compositionend",r=>{r.which!==27&&o.throttle()}),e.on("keydown",r=>{const i=r.which;i===8?o.throttle():i===27&&n.cancelIfNecessary()}),e.on("remove",o.cancel)},OW=e=>{const n=Lm(),o=Ts(!1),r=n.isSet,i=()=>{r()&&(Zz(e),FC(e),o.set(!1),n.clear())},u=A=>{r()||(Wz(e,A.range),n.set({trigger:A.trigger,matchLength:A.text.length}))},g=Ll(()=>_W(e)),y=A=>n.get().map(I=>cy(e.dom,e.selection.getRng(),I.trigger).bind(F=>_F(e,g,F,A))).getOrThunk(()=>VU(e,g)),x=A=>{y(A).fold(i,I=>{u(I.context),I.lookupData.then(F=>{n.get().map(V=>{const J=I.context;V.trigger===J.trigger&&(J.text.length-V.matchLength>=10?i():(n.set({...V,matchLength:J.text.length}),o.get()?uE(e,{lookupData:F}):(o.set(!0),IC(e,{lookupData:F}))))})})})};e.addCommand("mceAutocompleterReload",(A,I)=>{const F=Ge(I)?I.fetchOptions:{};x(F)}),e.addCommand("mceAutocompleterClose",i),kW(e,{cancelIfNecessary:i,load:x})},JF=ts().browser.isSafari(),QF=e=>Hu(re.fromDom(e)),nR=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},w_=(e,n)=>Z.from(e.getParent(n.container(),"details")),C_=(e,n)=>w_(e,n).isSome(),AW=(e,n)=>{const o=Z.from(e.getParent(n.startContainer,"details")),r=Z.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const i=o.bind(u=>Z.from(e.select("summary",u)[0]));return Z.some({startSummary:i,startDetails:o,endDetails:r})}else return Z.none()},DW=(e,n)=>ii(n).exists(o=>o.isEqual(e)),RW=(e,n)=>xl(n).exists(o=>No(o.getNode())&&Ei(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),MW=(e,n)=>n.startSummary.exists(o=>DW(e,o)),PW=(e,n)=>n.startSummary.exists(o=>RW(e,o)),eL=(e,n)=>n.startDetails.exists(o=>Ei(o,e).forall(r=>n.startSummary.exists(i=>!i.contains(e.container())&&i.contains(r.container())))),oR=(e,n,o)=>o.startDetails.exists(r=>Ua(e,n).forall(i=>!r.contains(i.container()))),sR=(e,n)=>{const o=n.getNode();bt(o)||e.selection.setCursorLocation(o,n.offset())},rR=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const i=e.dom.select("summary",r)[0];i&&(o?ii(i):xl(i)).each(g=>sR(e,g))}else sR(e,n)},NW=(e,n)=>{const o=x=>x.contains(e.startContainer),r=x=>x.contains(e.endContainer),i=n.startSummary.exists(o),u=n.startSummary.exists(r),g=n.startDetails.forall(x=>n.endDetails.forall(A=>x!==A));return(i||u)&&!(i&&u)||g},tL=(e,n,o)=>{const{dom:r,selection:i}=e,u=e.getBody();if(o==="character"){const g=De.fromRangeStart(i.getRng()),y=r.getParent(g.container(),r.isBlock),x=w_(r,g),A=y&&r.isEmpty(y),I=ae(y==null?void 0:y.previousSibling),F=ae(y==null?void 0:y.nextSibling);return A&&(n?F:I)&&Kd(!n,u,g).exists(ne=>C_(r,ne)&&!Df(x,w_(r,ne)))?!0:Kd(n,u,g).fold(Xe,V=>{const J=w_(r,V);if(C_(r,V)&&!Df(x,J)){if(n||rR(e,V,!1),y&&A){if(n&&I)return!0;if(!n&&F)return!0;rR(e,V,n),e.dom.remove(y)}return!0}else return!1})}else return!1},BW=(e,n,o,r)=>{const u=e.selection.getRng(),g=De.fromRangeStart(u),y=e.getBody();return r==="selection"?NW(u,n):o?PW(g,n)||oR(y,g,n):MW(g,n)||eL(g,n)},S_=(e,n,o)=>AW(e.dom,e.selection.getRng()).fold(()=>tL(e,n,o),r=>BW(e,r,n,o)||tL(e,n,o)),nL=(e,n,o)=>{const r=e.selection,i=r.getNode(),u=r.getRng(),g=De.fromRangeStart(u);return Wi(i)?(o==="selection"&&nR(u,i)||s4(n,g,i)?QF(i):e.undoManager.transact(()=>{const y=r.getSel();let{anchorNode:x,anchorOffset:A,focusNode:I,focusOffset:F}=y??{};const V=()=>{Te(x)&&Te(A)&&Te(I)&&Te(F)&&(y==null||y.setBaseAndExtent(x,A,I,F))},J=()=>{x=y==null?void 0:y.anchorNode,A=y==null?void 0:y.anchorOffset,I=y==null?void 0:y.focusNode,F=y==null?void 0:y.focusOffset},ne=(oe,he)=>{$e(oe.childNodes,be=>{K1(be)&&he.appendChild(be)})},Y=e.dom.create("span",{"data-mce-bogus":"1"});ne(i,Y),i.appendChild(Y),V(),(o==="word"||o==="line")&&(y==null||y.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&nR(r.getRng(),Y)?QF(i):(e.execCommand(n?"ForwardDelete":"Delete"),J(),ne(Y,i),V()),e.dom.remove(Y)}),!0):!1},Cp=(e,n,o)=>S_(e,n,o)||JF&&nL(e,n,o)?Z.some(Dt):Z.none(),oL=e=>(n,o,r={})=>{const i=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:i,currentTarget:i,eventPhase:Event.AT_TARGET,originalTarget:i,explicitOriginalTarget:i,isTrusted:!1,srcElement:i,cancelable:!1,preventDefault:Dt,inputType:o},g=ch(new InputEvent(e));return n.dispatch(e,{...g,...u,...r})},e2=oL("input"),aR=oL("beforeinput"),$W=ts(),IW=$W.os,sL=IW.isMacOS()||IW.isiOS(),FW=$W.browser.isFirefox(),LW=(e,n,o)=>{const r=o.keyCode===At.BACKSPACE?"deleteContentBackward":"deleteContentForward",i=e.selection.isCollapsed(),u=i?"character":"selection",g=y=>i?y?"word":"line":"selection";N3([{keyCode:At.BACKSPACE,action:dn(WI,e)},{keyCode:At.BACKSPACE,action:dn(MS,e,!1)},{keyCode:At.DELETE,action:dn(MS,e,!0)},{keyCode:At.BACKSPACE,action:dn(e3,e,!1)},{keyCode:At.DELETE,action:dn(e3,e,!0)},{keyCode:At.BACKSPACE,action:dn(o_,e,n,!1)},{keyCode:At.DELETE,action:dn(o_,e,n,!0)},{keyCode:At.BACKSPACE,action:dn(VE,e,!1)},{keyCode:At.DELETE,action:dn(VE,e,!0)},{keyCode:At.BACKSPACE,action:dn(Cp,e,!1,u)},{keyCode:At.DELETE,action:dn(Cp,e,!0,u)},...sL?[{keyCode:At.BACKSPACE,altKey:!0,action:dn(Cp,e,!1,g(!0))},{keyCode:At.DELETE,altKey:!0,action:dn(Cp,e,!0,g(!0))},{keyCode:At.BACKSPACE,metaKey:!0,action:dn(Cp,e,!1,g(!1))}]:[{keyCode:At.BACKSPACE,ctrlKey:!0,action:dn(Cp,e,!1,g(!0))},{keyCode:At.DELETE,ctrlKey:!0,action:dn(Cp,e,!0,g(!0))}],{keyCode:At.BACKSPACE,action:dn(o3,e,!1)},{keyCode:At.DELETE,action:dn(o3,e,!0)},{keyCode:At.BACKSPACE,action:dn(T3,e,!1)},{keyCode:At.DELETE,action:dn(T3,e,!0)},{keyCode:At.BACKSPACE,action:dn(jT,e,!1)},{keyCode:At.DELETE,action:dn(jT,e,!0)},{keyCode:At.BACKSPACE,action:dn(JD,e,!1)},{keyCode:At.DELETE,action:dn(JD,e,!0)},{keyCode:At.BACKSPACE,action:dn(x3,e,!1)},{keyCode:At.DELETE,action:dn(x3,e,!0)}],o).filter(y=>e.selection.isEditable()).each(y=>{o.preventDefault(),aR(e,r).isDefaultPrevented()||(y(),e2(e,r))})},kY=(e,n,o)=>ay([{keyCode:At.BACKSPACE,action:dn(rI,e)},{keyCode:At.DELETE,action:dn(rI,e)},...sL?[{keyCode:At.BACKSPACE,altKey:!0,action:dn(FS,e)},{keyCode:At.DELETE,altKey:!0,action:dn(FS,e)},...o?[{keyCode:FW?224:91,action:dn(FS,e)}]:[]]:[{keyCode:At.BACKSPACE,ctrlKey:!0,action:dn(FS,e)},{keyCode:At.DELETE,ctrlKey:!0,action:dn(FS,e)}]],n),HW=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===At.BACKSPACE,r.isDefaultPrevented()||LW(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||kY(e,r,o),o=!1})},er=e=>{for(;e;){if(Mt(e)||nt(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},Sp=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=er(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(ro),n.firstChild)}const i=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new Zo(n,n);let g=n,y;for(;y=u.current();){if(nt(y)){i.setStart(y,0),i.setEnd(y,0);break}if(r[y.nodeName.toLowerCase()]){i.setStartBefore(y),i.setEndBefore(y);break}g=y,y=u.next()}y||(i.setStart(g,0),i.setEnd(g,0))}else No(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)):(i.setStart(n,0),i.setEnd(n,0));e.selection.setRng(i),mb(e,i)},Rl=(e,n)=>{const o=e.getRoot();let r,i=n;for(;i!==o&&i&&e.getContentEditable(i)!=="false";){if(e.getContentEditable(i)==="true"){r=i;break}i=i.parentNode}return i!==o?r:o},x_=e=>Z.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),rL=e=>x_(e).fold(ft(""),n=>n.nodeName.toUpperCase()),zW=e=>x_(e).filter(n=>Fu(re.fromDom(n))).isSome(),my=e=>{e.innerHTML='<br data-mce-bogus="1">'},iR=(e,n,o)=>{const r=e.dom;Z.from(o.style).map(r.parseStyle).each(x=>{const I={...jg(re.fromDom(n)),...x};r.setStyles(n,I)});const i=Z.from(o.class).map(x=>x.split(/\s+/)),u=Z.from(n.className).map(x=>jt(x.split(/\s+/),A=>A!==""));Mr(i,u,(x,A)=>{const I=jt(A,V=>!on(x,V)),F=[...x,...I];r.setAttrib(n,"class",F.join(" "))});const g=["style","class"],y=Wo(o,(x,A)=>!on(g,A));r.setAttribs(n,y)},fy=(e,n)=>{if(za(e).toLowerCase()===n.tagName.toLowerCase()){const r=M1(e);iR(e,n,r)}},cR=(e,n,o,r,i=!0,u,g)=>{const y=e.dom,x=e.schema,A=za(e),I=o?o.nodeName.toUpperCase():"";let F=n;const V=x.getTextInlineElements();let J;u||I==="TABLE"||I==="HR"?J=y.create(u||A,g||{}):J=o.cloneNode(!1);let ne=J;if(!i)y.setAttrib(J,"style",null),y.setAttrib(J,"class",null);else do if(V[F.nodeName]){if(pc(F)||bc(F))continue;const Y=F.cloneNode(!1);y.setAttrib(Y,"id",""),J.hasChildNodes()?(Y.appendChild(J.firstChild),J.appendChild(Y)):(ne=Y,J.appendChild(Y))}while((F=F.parentNode)&&F!==r);return fy(e,J),my(ne),J},VW=(e,n)=>e.dom.getParent(n,Ke),UW=(e,n,o)=>{let r=n;for(;r&&r!==e&&ae(r.nextSibling);){const i=r.parentElement;if(!i||!o(i))return Ke(i);r=i}return!1},WW=(e,n,o)=>!n&&o.nodeName.toLowerCase()===za(e)&&e.dom.isEmpty(o)&&UW(e.getBody(),o,r=>cn(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),ZW=(e,n,o)=>{var r,i,u;const g=n(za(e)),y=VW(e,o);y&&(e.dom.insertAfter(g,y),Sp(e,g),((u=(i=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||i===void 0?void 0:i.length)!==null&&u!==void 0?u:0)>1&&e.dom.remove(o))},jW=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,aL=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},iL=(e,n)=>{const o=e==null?void 0:e.parentNode;return Te(o)&&o.nodeName===n},cL=e=>Te(e)&&/^(OL|UL|LI)$/.test(e.nodeName),lR=e=>Te(e)&&/^(LI|DT|DD)$/.test(e.nodeName),GW=e=>cL(e)&&cL(e.parentNode),E_=e=>{const n=e.parentNode;return lR(n)?n:e},t2=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!Mt(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},uR=e=>as(Fi(jg(re.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),qW=(e,n,o,r,i)=>{const u=e.dom,g=e.selection.getRng(),y=o.parentNode;if(o===e.getBody()||!y)return;GW(o)&&(i="LI");const x=lR(r)?uR(r):void 0;let A=lR(r)&&x?n(i,{style:uR(r)}):n(i);if(t2(o,r,!0)&&t2(o,r,!1))if(iL(o,"LI")){const I=E_(o);u.insertAfter(A,I),aL(o)?u.remove(I):u.remove(o)}else u.replace(A,o);else if(t2(o,r,!0))iL(o,"LI")?(u.insertAfter(A,E_(o)),A.appendChild(u.doc.createTextNode(" ")),A.appendChild(o)):y.insertBefore(A,o),u.remove(r);else if(t2(o,r,!1))u.insertAfter(A,E_(o)),u.remove(r);else{o=E_(o);const I=g.cloneRange();I.setStartAfter(r),I.setEndAfter(o);const F=I.extractContents();if(i==="LI"&&jW(F,"LI")){const V=jt(zt(A.children,re.fromDom),go(zi("br")));A=F.firstChild,u.insertAfter(F,o),$e(V,J=>Bf(re.fromDom(A),J)),x&&A.setAttribute("style",x)}else u.insertAfter(F,o),u.insertAfter(A,o);u.remove(r)}Sp(e,A)},KW=e=>{$e(Gl(re.fromDom(e),Ur),n=>{const o=n.dom;o.nodeValue=uc(o.data)})},OY=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},dR=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),mR=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,fR=(e,n)=>Te(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",YW=(e,n,o)=>{var r;const i=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;Mt(u)&&!n[u.nodeName.toLowerCase()]&&i.push(u)}let g=i.length;for(;g--;)u=i[g],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||dR(e,u))&&e.remove(u)},T_=(e,n,o)=>nt(n)?e?o===1&&n.data.charAt(o-1)===Gr?0:o:o===n.data.length-1&&n.data.charAt(o)===Gr?n.data.length:o:o,XW=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,T_(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,T_(!1,e.endContainer,e.endOffset)),n},lL=e=>{let n=e;do nt(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},JW=(e,n,o,r,i)=>{var u,g;const y=e.dom,x=(u=Rl(y,r))!==null&&u!==void 0?u:y.getRoot();let A=y.getParent(r,y.isBlock);if(!A||!fR(y,A)){if(A=A||x,!A.hasChildNodes()){const J=y.create(n);return fy(e,J),A.appendChild(J),o.setStart(J,0),o.setEnd(J,0),J}let I=r;for(;I&&I.parentNode!==A;)I=I.parentNode;let F;for(;I&&!y.isBlock(I);)F=I,I=I.previousSibling;const V=(g=F==null?void 0:F.parentElement)===null||g===void 0?void 0:g.nodeName;if(F&&V&&e.schema.isValidChild(V,n.toLowerCase())){const J=F.parentNode,ne=y.create(n);for(fy(e,ne),J.insertBefore(ne,F),I=F;I&&!y.isBlock(I);){const Y=I.nextSibling;ne.appendChild(I),I=Y}o.setStart(r,i),o.setEnd(r,i)}}return r},QW=(e,n)=>{n.normalize();const o=n.lastChild;(!o||Mt(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},AY=(e,n)=>{const o=vx(e);return It(n)?!1:Q(o)?on(at.explode(o),n.nodeName.toLowerCase()):o},uL={insert:(e,n)=>{let o,r,i,u,g=!1;const y=e.dom,x=e.schema,A=x.getNonEmptyElements(),I=e.selection.getRng(),F=za(e),V=re.fromDom(I.startContainer),J=Ad(V,I.startOffset),ne=J.exists(Qe=>gs(Qe)&&!xn(Qe)),Y=I.collapsed&&ne,oe=(Qe,Tt)=>cR(e,o,st,Ye,_O(e),Qe,Tt),he=Qe=>{const Tt=T_(Qe,o,r);if(nt(o)&&(Qe?Tt>0:Tt<o.data.length))return!1;if(o.parentNode===st&&g&&!Qe||Qe&&Mt(o)&&o===st.firstChild)return!0;if(mR(o,"TABLE")||mR(o,"HR"))return g&&!Qe||!g&&Qe;const Wt=new Zo(o,st);nt(o)&&(Qe&&Tt===0?Wt.prev():!Qe&&Tt===o.data.length&&Wt.next());let Sn;for(;Sn=Wt.current();){if(Mt(Sn)){if(!Sn.getAttribute("data-mce-bogus")){const Mn=Sn.nodeName.toLowerCase();if(A[Mn]&&Mn!=="br")return!1}}else if(nt(Sn)&&!Mm(Sn.data))return!1;Qe?Wt.prev():Wt.next()}return!0},be=()=>{let Qe;return/^(H[1-6]|PRE|FIGURE)$/.test(i)&&xt!=="HGROUP"?Qe=oe(F):Qe=oe(),AY(e,u)&&fR(y,u)&&y.isEmpty(st,void 0,{includeZwsp:!0})?Qe=y.split(u,st):y.insertAfter(Qe,st),Sp(e,Qe),Qe};O(y,I).each(Qe=>{I.setStart(Qe.startContainer,Qe.startOffset),I.setEnd(Qe.endContainer,Qe.endOffset)}),o=I.startContainer,r=I.startOffset;const ye=!!(n&&n.shiftKey),Ee=!!(n&&n.ctrlKey);Mt(o)&&o.hasChildNodes()&&!Y&&(g=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,g&&nt(o)?r=o.data.length:r=0);const Ye=Rl(y,o);if(!Ye||OY(e,o))return;ye||(o=JW(e,F,I,o,r));let st=y.getParent(o,y.isBlock)||y.getRoot();u=Te(st==null?void 0:st.parentNode)?y.getParent(st.parentNode,y.isBlock):null,i=st?st.nodeName.toUpperCase():"";const xt=u?u.nodeName.toUpperCase():"";if(xt==="LI"&&!Ee){const Qe=u;st=Qe,u=Qe.parentNode,i=xt}if(Mt(u)&&WW(e,ye,st))return ZW(e,oe,st);if(/^(LI|DT|DD)$/.test(i)&&Mt(u)&&y.isEmpty(st)){qW(e,oe,u,st,F);return}if(!Y&&(st===e.getBody()||!fR(y,st)))return;const Le=st.parentNode;let Me;if(Y)Me=oe(F),J.fold(()=>{Js(V,re.fromDom(Me))},Qe=>{dr(Qe,re.fromDom(Me))}),e.selection.setCursorLocation(Me,0);else if(d1(st))Me=Nd(st),y.isEmpty(st)&&my(st),fy(e,Me),Sp(e,Me);else if(he(!1))Me=be();else if(he(!0)&&Le){Me=Le.insertBefore(oe(),st);const Qe=iv(re.fromDom(I.startContainer))&&I.collapsed;Sp(e,mR(st,"HR")||Qe?Me:st)}else{const Qe=XW(I).cloneRange();Qe.setEndAfter(st);const Tt=Qe.extractContents();KW(Tt),lL(Tt),Me=Tt.firstChild,y.insertAfter(Tt,st),YW(y,A,Me),QW(y,st),y.isEmpty(st)&&my(st),Me.normalize(),y.isEmpty(Me)?(y.remove(Me),be()):(fy(e,Me),Sp(e,Me))}y.setAttrib(Me,"id",""),e.dispatch("NewBlock",{newBlock:Me})},fakeEventName:"insertParagraph"},eZ=(e,n,o)=>{const r=new Zo(n,o);let i;const u=e.getNonEmptyElements();for(;i=r.next();)if(u[i.nodeName.toLowerCase()]||nt(i)&&i.length>0)return!0;return!1},dL=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),mb(e,r)},tZ=(e,n)=>{const o=e.selection,r=e.dom,i=o.getRng();let u,g=!1;O(r,i).each(J=>{i.setStart(J.startContainer,J.startOffset),i.setEnd(J.endContainer,J.endOffset)});let y=i.startOffset,x=i.startContainer;if(Mt(x)&&x.hasChildNodes()){const J=y>x.childNodes.length-1;x=x.childNodes[Math.min(y,x.childNodes.length-1)]||x,J&&nt(x)?y=x.data.length:y=0}let A=r.getParent(x,r.isBlock);const I=A&&A.parentNode?r.getParent(A.parentNode,r.isBlock):null,F=I?I.nodeName.toUpperCase():"",V=!!(n&&n.ctrlKey);F==="LI"&&!V&&(A=I),nt(x)&&y>=x.data.length&&(eZ(e.schema,x,A||r.getRoot())||(u=r.create("br"),i.insertNode(u),i.setStartAfter(u),i.setEndAfter(u),g=!0)),u=r.create("br"),Pw(r,i,u),dL(e,u,g),e.undoManager.add()},nZ=(e,n)=>{const o=re.fromTag("br");dr(re.fromDom(n),o),e.undoManager.add()},oZ=(e,n)=>{sZ(e.getBody(),n)||Uc(re.fromDom(n),re.fromTag("br"));const o=re.fromTag("br");Uc(re.fromDom(n),o),dL(e,o.dom,!1),e.undoManager.add()},__=e=>No(e.getNode()),sZ=(e,n)=>__(De.after(n))?!0:Ua(e,De.after(n)).map(o=>No(o.getNode())).getOr(!1),mL=e=>e&&e.nodeName==="A"&&"href"in e,gR=e=>e.fold(Xe,mL,mL,Xe),hR=e=>{const n=qe(bb,e),o=De.fromRangeStart(e.selection.getRng());return Da(n,e.getBody(),o).filter(gR)},rZ=(e,n)=>{n.fold(Dt,qe(nZ,e),qe(oZ,e),Dt)},aZ={insert:(e,n)=>{const o=hR(e);o.isSome()?o.each(qe(rZ,e)):tZ(e,n)},fakeEventName:"insertLineBreak"},fL=(e,n)=>x_(e).filter(o=>n.length>0&&Vi(re.fromDom(o),n)).isSome(),iZ=e=>fL(e,TO(e)),RY=e=>fL(e,Gw(e)),Ml=ru.generate([{br:[]},{block:[]},{none:[]}]),fm=(e,n)=>RY(e),gL=e=>(n,o)=>zW(n)===e,pR=(e,n)=>(o,r)=>rL(o)===e.toUpperCase()===n,cZ=e=>{const n=Rl(e.dom,e.selection.getStart());return It(n)},n2=e=>pR("pre",e),lZ=()=>pR("summary",!0),k_=e=>(n,o)=>xO(n)===e,uZ=(e,n)=>iZ(e),O_=(e,n)=>n,dZ=e=>{const n=za(e),o=Rl(e.dom,e.selection.getStart());return Te(o)&&e.schema.isValidChild(o.nodeName,n)},bR=e=>{const n=e.selection.getRng(),o=re.fromDom(n.startContainer),i=Ad(o,n.startOffset).map(u=>gs(u)&&!xn(u));return n.collapsed&&i.getOr(!0)},Pl=(e,n)=>(o,r)=>as(e,(u,g)=>u&&g(o,r),!0)?Z.some(n):Z.none(),A_=(e,n)=>uI([Pl([fm],Ml.none()),Pl([n2(!0),cZ],Ml.none()),Pl([lZ()],Ml.br()),Pl([n2(!0),k_(!1),O_],Ml.br()),Pl([n2(!0),k_(!1)],Ml.block()),Pl([n2(!0),k_(!0),O_],Ml.block()),Pl([n2(!0),k_(!0)],Ml.br()),Pl([gL(!0),O_],Ml.br()),Pl([gL(!0)],Ml.block()),Pl([uZ],Ml.br()),Pl([O_],Ml.br()),Pl([dZ],Ml.block()),Pl([bR],Ml.block())],[e,!!(n&&n.shiftKey)]).getOr(Ml.none()),D_=(e,n,o)=>{n.selection.isCollapsed()||QC(n),!(Te(o)&&aR(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),Te(o)&&e2(n,e.fakeEventName))},hL=(e,n)=>{const o=()=>D_(aZ,e,n),r=()=>D_(uL,e,n),i=A_(e,n);switch(EO(e)){case"linebreak":i.fold(o,o,Dt);break;case"block":i.fold(r,r,Dt);break;case"invert":i.fold(r,o,Dt);break;default:i.fold(o,r,Dt);break}},pL=ts(),mZ=pL.os.isiOS()&&pL.browser.isSafari(),bL=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),Cz(e.undoManager),e.undoManager.transact(()=>{hL(e,n)}))},vL=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(nt(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},fZ=e=>{let n=Z.none();const o=i=>{n=Z.some(i.selection.getBookmark()),i.undoManager.add()},r=(i,u)=>{i.undoManager.undo(),n.fold(Dt,g=>i.selection.moveToBookmark(g)),bL(i,u),n=Z.none()};e.on("keydown",i=>{i.keyCode===At.ENTER&&(mZ&&vL(e.selection.getRng())?o(e):bL(e,i))}),e.on("keyup",i=>{i.keyCode===At.ENTER&&n.each(()=>r(e,i))})},yL=(e,n,o)=>{const r=Et.os.isMacOS()||Et.os.isiOS();ay([{keyCode:At.END,action:dn(QI,e,!0)},{keyCode:At.HOME,action:dn(QI,e,!1)},...r?[]:[{keyCode:At.HOME,action:dn(c_,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:At.END,action:dn(c_,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:At.END,action:dn(u_,e,!0)},{keyCode:At.HOME,action:dn(u_,e,!1)},{keyCode:At.END,action:dn(n_,e,!0,n)},{keyCode:At.HOME,action:dn(n_,e,!1,n)}],o).each(i=>{o.preventDefault()})},wL=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||yL(e,n,o)})},gZ=e=>{e.on("input",n=>{n.isComposing||H7(e)})},hZ=ts(),vR=(e,n,o)=>{ay([{keyCode:At.PAGE_UP,action:dn(n_,e,!1,n)},{keyCode:At.PAGE_DOWN,action:dn(n_,e,!0,n)}],o)},CL=e=>e.stopImmediatePropagation(),SL=e=>e.keyCode===At.PAGE_UP||e.keyCode===At.PAGE_DOWN,o2=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",CL,!0):!o&&e.get()&&n.off("NodeChange",CL),e.set(o)},pZ=(e,n)=>{if(hZ.os.isMacOS())return;const o=Ts(!1);e.on("keydown",r=>{SL(r)&&o2(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||vR(e,n,r),SL(r)&&o.get()&&(o2(o,e,!1),e.nodeChanged())})},yR=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||Po(n.getTargetRanges(),o=>!CP(e.dom,o)))&&n.preventDefault()})},R_=(e,n)=>{const o=n.container(),r=n.offset();return nt(o)?(o.insertData(r,e),Z.some(De(o,r+e.length))):i0(n).map(i=>{const u=re.fromText(e);return n.isAtEnd()?Uc(i,u):dr(i,u),De(u.dom,e.length)})},wR=qe(R_,ro),xL=qe(R_," "),MY=(e,n,o)=>JP(e,n,o)?wR(n):xL(n),xp=e=>n=>n.fold(o=>Ei(e.dom,De.before(o)),o=>ii(o),o=>xl(o),o=>Ua(e.dom,De.after(o))),bZ=(e,n,o)=>r=>JP(e,r,o)?wR(n):xL(n),EL=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},vZ=(e,n)=>e.isEditable(e.getParent(n,"summary")),M_=e=>{const n=De.fromRangeStart(e.selection.getRng()),o=re.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=qe(bb,e),i=De.fromRangeStart(e.selection.getRng());return Da(r,e.getBody(),i).bind(xp(o)).map(u=>()=>bZ(o,n,e.schema)(u).each(EL(e)))}else return Z.none()},TL=e=>{const n=()=>{const o=re.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=De.fromRangeStart(e.selection.getRng());MY(o,r,e.schema).each(EL(e))};return to(Et.browser.isFirefox()&&e.selection.isEditable()&&vZ(e.dom,e.selection.getRng().startContainer),n)},_L=(e,n)=>{N3([{keyCode:At.SPACEBAR,action:dn(M_,e)},{keyCode:At.SPACEBAR,action:dn(TL,e)}],n).each(o=>{n.preventDefault(),aR(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),e2(e,"insertText",{data:" "}))})},yZ=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||_L(e,n)})},kL=e=>JO(e)?[{keyCode:At.TAB,action:dn(wF,e,!0)},{keyCode:At.TAB,shiftKey:!0,action:dn(wF,e,!1)}]:[],wZ=(e,n)=>{ay([...kL(e)],n).each(o=>{n.preventDefault()})},CZ=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||wZ(e,n)})},SZ=e=>{if(e.addShortcut("Meta+P","","mcePrint"),OW(e),xg(e))return Ts(null);{const n=I9(e);return yR(e),lU(e),LU(e,n),HW(e,n),fZ(e),yZ(e),gZ(e),CZ(e),wL(e,n),pZ(e,n),n}};class OL{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",i=>{const u=n.selection.getRng(),g={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(i.type==="nodechange"||!om(g,o))&&n.dispatch("SelectionChange"),o=g}),n.on("contextmenu",()=>{n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const i=n.selection.getStart(!0);i&&p0(n)&&!r.isSameElementPath(i)&&n.dom.isChildOf(i,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",i=>{!i.isDefaultPrevented()&&p0(n)&&(n.selection.getNode().nodeName==="IMG"?_l.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor.selection;let r;if(this.editor.initialized&&o&&!Qv(this.editor)&&!this.editor.mode.isReadOnly()){const i=this.editor.getBody();r=o.getStart(!0)||i,(r.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(r,i))&&(r=i);const u=[];this.editor.dom.getParent(r,g=>g===i?!0:(u.push(g),!1)),this.editor.dispatch("NodeChange",{...n,element:r,parents:u})}}isSameElementPath(n){let o;const r=this.editor,i=os(r.dom.getParents(n,yt,r.getBody()));if(i.length===this.lastPath.length){for(o=i.length;o>=0&&i[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=i,!0}return this.lastPath=i,!1}}const P_=Jf("image"),xZ=e=>{const n=e;return Z.from(n[P_])},CR=(e,n)=>{const o=e;o[P_]=n},N_=Jf("event"),B_=e=>{const n=e;return Z.from(n[N_])},s2=e=>n=>{const o=n;o[N_]=e},AL=(e,n)=>s2(n)(e),DL=s2(0),EZ=s2(2),$_=s2(1),_Z=(e=>n=>{const o=n;return Z.from(o[N_]).exists(r=>r===e)})(0),kZ=()=>Object.freeze({length:0,item:e=>null}),I_=Jf("mode"),OZ=e=>{const n=e;return Z.from(n[I_])},F_=e=>n=>{const o=n;o[I_]=e},RL=(e,n)=>F_(n)(e),ML=F_(0),SR=F_(2),PL=F_(1),NL=e=>n=>{const o=n;return Z.from(o[I_]).exists(r=>r===e)},Nb=NL(0),BL=NL(1),AZ=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(Nb(e))if(Q(o)){if(!bt(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{Nb(e)&&n.remove(o)},clear:()=>{Nb(e)&&n.clear()}}),DZ=["none","copy","link","move"],RZ=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],xR=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(i){on(DZ,i)&&(n=i)},get effectAllowed(){return o},set effectAllowed(i){_Z(r)&&on(RZ,i)&&(o=i)},get items(){return AZ(r,e.items)},get files(){return BL(r)?kZ():e.files},get types(){return e.types},setDragImage:(i,u,g)=>{Nb(r)&&(CR(r,{image:i,x:u,y:g}),e.setDragImage(i,u,g))},getData:i=>BL(r)?"":e.getData(i),setData:(i,u)=>{Nb(r)&&e.setData(i,u)},clearData:i=>{Nb(r)&&e.clearData(i)}};return ML(r),r},gy=e=>{const n=xR(),o=OZ(e);return SR(e),DL(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,xZ(e).each(r=>n.setDragImage(r.image,r.x,r.y)),$e(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),$e(e.files,r=>n.items.add(r)),B_(e).each(r=>{AL(n,r)}),o.each(r=>{RL(e,r),RL(n,r)}),n},MZ=e=>{const n=e.getData("text/html");return n===""?Z.none():Z.some(n)},$L=(e,n)=>e.setData("text/html",n),ER="x-tinymce/html",L_=ft(ER),TR="<!-- "+ER+" -->",PZ=e=>TR+e,IL=e=>e.replace(TR,""),FL=e=>e.indexOf(TR)!==-1,NZ=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),PY=(e,n)=>{let o="<"+e;const r=Fi(n,(i,u)=>u+'="'+qf.encodeAllRaw(i)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},H_=(e,n,o)=>{const r=e.split(/\n\n/),i=PY(n,o),u="</"+n+">",g=zt(r,x=>x.split(/\n/).join("<br />")),y=x=>i+x+u;return g.length===1?g[0]:zt(g,y).join("")},LL="%MCEPASTEBIN%",BZ=(e,n)=>{const{dom:o,selection:r}=e,i=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},LL);Et.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(i,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",g=>{g.stopPropagation()}),u.focus(),r.select(u,!0)},$Z=(e,n)=>{const o=e.dom;if(_R(e)){let r;const i=n.get();for(;r=_R(e);)o.remove(r),o.unbind(r);i&&e.selection.setRng(i)}n.set(null)},_R=e=>e.dom.get("mcepastebin"),IZ=e=>Te(e)&&e.id==="mcepastebin",FZ=e=>{const n=e.dom,o=(g,y)=>{g.appendChild(y),n.remove(y,!0)},[r,...i]=jt(e.getBody().childNodes,IZ);$e(i,g=>{o(r,g)});const u=n.select("div[id=mcepastebin]",r);for(let g=u.length-1;g>=0;g--){const y=n.create("div");r.insertBefore(y,u[g]),o(y,u[g])}return r?r.innerHTML:""},HL=e=>e===LL,LZ=e=>{const n=Ts(null);return{create:()=>BZ(e,n),remove:()=>$Z(e,n),getEl:()=>_R(e),getHtml:()=>FZ(e),getLastRng:n.get}},zL=(e,n)=>(at.each(n,o=>{ze(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),HZ=e=>{const n=zd(),o=cd({},n);let r="";const i=n.getVoidElements(),u=at.makeMap("script noscript style textarea video audio iframe object"," "),g=n.getBlockElements(),y=x=>{const A=x.name,I=x;if(A==="br"){r+=`
`;return}if(A!=="wbr"){if(i[A]&&(r+=" "),u[A]){r+=" ";return}if(x.type===3&&(r+=x.value),!(x.name in n.getVoidElements())){let F=x.firstChild;if(F)do y(F);while(F=F.next)}g[A]&&I.next&&(r+=`
`,A==="p"&&(r+=`
`))}};return e=zL(e,[/<!\[[^\]]+\]>/g]),y(o.parse(e)),r},VL=e=>(e=zL(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,i)=>!r&&!i?" ":ro],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),zZ=e=>{let n=0;return()=>e+n++},VZ=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return at.hasOwn(o,n)?"image/"+o[n]:"image/"+n},Go=(e,n)=>{const o=cd({sanitize:Dh(e),sandbox_iframes:s0(e)},e.schema);o.addNodeFilter("meta",i=>{at.each(i,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return ep({validate:!0},e.schema).serialize(r)},UL=(e,n)=>({content:e,cancelled:n}),WL=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),i=xA(e,r,o);return UL(i.node.innerHTML,i.isDefaultPrevented())},UZ=(e,n,o)=>{const r=SA(e,n,o),i=Go(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?WL(e,i,o):UL(i,r.isDefaultPrevented())},kR=(e,n,o)=>UZ(e,n,o),z_=(e,n)=>(e.insertContent(n,{merge:sC(e),paste:!0}),!0),OR=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),WZ=(e,n)=>OR(n)&&Po(Nx(e),o=>Ja(n.toLowerCase(),`.${o.toLowerCase()}`)),ZL=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),AR=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),ZZ=(e,n,o)=>!e.selection.isCollapsed()&&OR(n)?AR(e,n,o):!1,jZ=(e,n,o)=>WZ(e,n)?ZL(e,n,o):!1,GZ=(e,n)=>{at.each([ZZ,jZ,z_],o=>!o(e,n,z_))},jL=(e,n,o)=>{o||!Mx(e)?z_(e,n):GZ(e,n)},qZ=zZ("mceclip"),KZ=e=>{const n=xR();return $L(n,e),SR(n),n},Bb=(e,n,o,r,i)=>{const u=kR(e,n,o);if(!u.cancelled){const g=u.content,y=()=>jL(e,g,r);i?aR(e,"insertFromPaste",{dataTransfer:KZ(g)}).isDefaultPrevented()||(y(),e2(e,"insertFromPaste")):y()}},V_=(e,n,o,r)=>{const i=o||FL(n);Bb(e,IL(n),i,!1,r)},Ep=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),i=Wf(r,WO(e)),u=H_(i,za(e),M1(e));Bb(e,u,!1,!0,o)},hy=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},Tp=(e,n)=>n in e&&e[n].length>0,GL=e=>Tp(e,"text/html")||Tp(e,"text/plain"),py=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Te(o)?e.dom.encode(o[1]):void 0},YZ=(e,n,o,r)=>{const i=qZ(),u=P1(e)&&Te(o.name),g=u?py(e,o.name):i,y=u?o.name:void 0,x=n.create(i,o,r,g,y);return n.add(x),x},DR=(e,n)=>{fS(n.uri).each(({data:o,type:r,base64Encoded:i})=>{const u=i?o:btoa(o),g=n.file,y=e.editorUpload.blobCache,x=y.getByData(u,r),A=x??YZ(e,y,g,u);V_(e,`<img src="${A.blobUri()}">`,!1,!0)})},XZ=e=>e.type==="paste",qL=e=>Promise.all(zt(e,n=>Y4(n).then(o=>({file:n,uri:o})))),KL=e=>{const n=Nx(e);return o=>$s(o.type,"image/")&&Po(n,r=>VZ(r)===o.type)},RR=(e,n)=>{const o=n.items?Ya(Dr(n.items),i=>i.kind==="file"?[i.getAsFile()]:[]):[],r=n.files?Dr(n.files):[];return jt(o.length>0?o:r,KL(e))},MR=(e,n,o)=>{const r=XZ(n)?n.clipboardData:n.dataTransfer;if(t0(e)&&r){const i=RR(e,r);if(i.length>0)return n.preventDefault(),qL(i).then(u=>{o&&e.selection.setRng(o),$e(u,g=>{DR(e,g)})}),!0}return!1},JZ=e=>{var n,o;return Et.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},QZ=e=>At.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,U_=(e,n,o,r,i)=>{let u=VL(o);const g=Tp(n,L_())||FL(o),y=!g&&NZ(u),x=OR(u);(HL(u)||!u.length||y&&!x)&&(r=!0),(r||x)&&(Tp(n,"text/plain")&&y?u=n["text/plain"]:u=HZ(u)),!HL(u)&&(r?Ep(e,u,i):V_(e,u,g,i))},ej=(e,n,o)=>{let r;const i=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{QZ(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||JZ(u))return;const g=o.get()==="text"||r;r=!1;const y=hy(u.clipboardData);!GL(y)&&MR(e,u,i())||(Tp(y,"text/html")?(u.preventDefault(),U_(e,y,y["text/html"],g,!0)):Tp(y,"text/plain")&&Tp(y,"text/uri-list")?(u.preventDefault(),U_(e,y,y["text/plain"],g,!0)):(n.create(),_l.setEditorTimeout(e,()=>{const x=n.getHtml();n.remove(),U_(e,y,x,g,!1)},0)))})},YL=e=>{const n=i=>$s(i,"webkit-fake-url"),o=i=>$s(i,"data:"),r=i=>{var u;return((u=i.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(i,u,g)=>{if(!t0(e)&&r(g))for(const y of i){const x=y.attr("src");Q(x)&&!y.attr("data-mce-object")&&x!==Et.transparentSrc&&(n(x)||!n0(e)&&o(x))&&y.remove()}})},PR=(e,n,o)=>{ej(e,n,o),YL(e)},XL=(e,n)=>{n.get()==="text"?(n.set("html"),dE(e,!1)):(n.set("text"),dE(e,!0)),e.focus()},tj=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{XL(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&V_(e,r.html,r.internal,!1),r.text&&Ep(e,r.text,!1)})},nj=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(L_(),n),!0}catch{return!1}else return!1},JL=(e,n,o,r)=>{nj(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},NR=e=>(n,o)=>{const{dom:r,selection:i}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),g=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(g),r.add(e.getBody(),u);const y=i.getRng();g.focus();const x=r.createRng();x.selectNodeContents(g),i.setRng(x),_l.setEditorTimeout(e,()=>{i.setRng(y),r.remove(u),o()},0)},W_=e=>({html:PZ(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),oj=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),BR=e=>!e.selection.isCollapsed()||oj(e),QL=e=>n=>{!n.isDefaultPrevented()&&BR(e)&&e.selection.isEditable()&&JL(n,W_(e),NR(e),()=>{if(Et.browser.isChromium()||Et.browser.isFirefox()){const o=e.selection.getRng();_l.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},sj=e=>n=>{!n.isDefaultPrevented()&&BR(e)&&JL(n,W_(e),NR(e),Dt)},e5=e=>{e.on("cut",QL(e)),e.on("copy",sj(e))},t5=(e,n)=>{var o,r;return q.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},rj=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},n5=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},aj=e=>Po(e.files,n=>/^image\//.test(n.type)),ij=(e,n,o,r)=>{const i=e.getParent(o,g=>Ln(n,g));if(!ae(e.getParent(o,"summary")))return!0;if(i&&cn(r,"text/html")){const g=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!ae(g.querySelector(i.nodeName.toLowerCase()))}else return!1},Z_=e=>{e.on("input",n=>{const o=r=>ae(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=jt(e.dom.select("details"),o);$e(r,i=>{No(i.firstChild)&&i.firstChild.remove();const u=e.dom.create("summary");u.appendChild(yi().dom),i.prepend(u)})}})},cj=(e,n)=>{VO(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),t0(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&aj(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=t5(e,o);if(It(r))return;const i=hy(o.dataTransfer),u=Tp(i,L_());if((!GL(i)||rj(i))&&MR(e,o,r))return;const g=i[L_()],y=g||i["text/html"]||i["text/plain"],x=ij(e.dom,e.schema,r.startContainer,i),A=n.get();A&&!x||y&&(o.preventDefault(),_l.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(g||A&&x)&&e.execCommand("Delete"),n5(e,r);const I=VL(y);i["text/html"]?V_(e,I,u,!0):Ep(e,I,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{t0(e)&&!n.get()&&(o.preventDefault(),n5(e,t5(e,o))),o.type==="dragend"&&n.set(!1)}),Z_(e)},o5=e=>{const n=i=>u=>{i(e,u)},o=UO(e);ue(o)&&e.on("PastePreProcess",n(o));const r=Rx(e);ue(r)&&e.on("PastePostProcess",n(r))},lj=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},uj=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,$R=e=>at.trim(e).replace(uj,ih).toLowerCase(),s5=(e,n,o)=>{const r=nC(e);if(o||r==="all"||!oC(e))return n;const i=r?r.split(/[, ]/):[];if(i&&r!=="none"){const u=e.dom,g=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(y,x,A,I)=>{const F=u.parseStyle(u.decode(A)),V={};for(let ne=0;ne<i.length;ne++){const Y=F[i[ne]];let oe=Y,he=u.getStyle(g,i[ne],!0);/color/.test(i[ne])&&(oe=$R(oe),he=$R(he)),he!==oe&&(V[i[ne]]=Y)}const J=u.serializeStyle(V,"span");return J?x+' style="'+J+'"'+I:x+I})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,g,y,x)=>g+' style="'+y+'"'+x),n},dj=e=>{(Et.browser.isChromium()||Et.browser.isSafari())&&lj(e,s5)},mj=e=>{const n=Ts(!1),o=Ts(rC(e)?"text":"html"),r=LZ(e);dj(e),tj(e,o),o5(e),e.on("PreInit",()=>{e5(e),cj(e,n),PR(e,r,o)})},fj=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},gj=e=>{e.parser.addNodeFilter("details",n=>{const o=Kr(e);$e(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=nP(e);$e(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},hj=e=>{fj(e),gj(e)},r5=No,a5=nt,pj=e=>Un(e.dom),bj=e=>Fa(e.dom),i5=e=>n=>so(re.fromDom(e),n),vj=(e,n,o)=>hi(re.fromDom(e),r=>bj(r)||o.isBlock(Jn(r)),i5(n)).getOr(re.fromDom(n)).dom,c5=(e,n)=>hi(re.fromDom(e),pj,i5(n)),l5=(e,n,o)=>{const r=new Zo(e,n),i=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let g=o?e:i();g&&!r5(g);g=i())fr(g)&&(u=g);return u},yj=(e,n,o)=>{const i=De.fromRangeStart(e).getNode(),u=vj(i,n,o),g=l5(i,u,!1),y=l5(i,u,!0),x=document.createRange();return c5(g,u).fold(()=>{a5(g)?x.setStart(g,0):x.setStartBefore(g)},A=>x.setStartBefore(A.dom)),c5(y,u).fold(()=>{a5(y)?x.setEnd(y,y.data.length):x.setEndAfter(y)},A=>x.setEndAfter(A.dom)),x},u5=e=>{const n=yj(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(GE(n))},d5=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),u5(e))})};var by;(function(e){e.Before="before",e.After="after"})(by||(by={}));const wj=(e,n)=>Math.abs(e.left-n),Cj=(e,n)=>Math.abs(e.right-n),Sj=(e,n)=>e>=n.top&&e<=n.bottom,xj=(e,n)=>e.top<n.bottom&&e.bottom>n.top,Ej=(e,n)=>{const o=gO(e,n)/Math.min(e.height,n.height);return xj(e,n)&&o>.5},Tj=(e,n)=>{const o=jt(e,r=>Sj(n,r));return fO(o).fold(()=>[[],e],r=>{const{pass:i,fail:u}=ws(e,g=>Ej(g,r));return[i,u]})},j_=(e,n)=>({node:e.node,position:wj(e,n)<Cj(e,n)?by.Before:by.After}),m5=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),IR=(e,n,o,r)=>{const i=F=>fr(F.node)?Z.some(F):Mt(F.node)?IR(Dr(F.node.childNodes),n,o,!1):Z.none(),u=(F,V,J)=>i(V).filter(ne=>Math.abs(J(F,n,o)-J(ne,n,o))<2&&nt(ne.node)),g=(F,V)=>{const J=Qo(F,(ne,Y)=>V(ne,n,o)-V(Y,n,o));return Mc(J,i).map(ne=>r&&!nt(ne.node)&&J.length>1?u(ne,J[1],V).getOr(ne):ne)},[y,x]=Tj(xI(e),o),{pass:A,fail:I}=ws(x,F=>F.top<o);return g(y,m5).orThunk(()=>g(I,kw)).orThunk(()=>g(A,kw))},f5=(e,n,o,r)=>{const i=(u,g)=>{const y=A=>Mt(A)&&A.classList.contains("mce-drag-container"),x=jt(u.dom.childNodes,go(y));return g.fold(()=>IR(x,o,r,!0),A=>{const I=jt(x,F=>F!==A.dom);return IR(I,o,r,!0)}).orThunk(()=>(so(u,e)?Z.none():jl(u)).bind(I=>i(I,Z.some(u))))};return i(n,Z.none())},g5=(e,n,o)=>{const r=re.fromDom(e),i=Zl(r),g=re.fromPoint(i,n,o).filter(y=>Ca(r,y)).getOr(r);return f5(r,g,n,o)},G_=(e,n,o)=>g5(e,n,o).filter(r=>Ph(r.node)).map(r=>j_(r,n)),h5=e=>{var n,o;const r=e.getBoundingClientRect(),i=e.ownerDocument,u=i.documentElement,g=i.defaultView;return{top:r.top+((n=g==null?void 0:g.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=g==null?void 0:g.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},p5=e=>e.inline?h5(e.getBody()):{left:0,top:0},_j=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},b5=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},i={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:i},kj=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=h5(e.getContentAreaContainer()),r=b5(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},v5=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),Oj=(e,n)=>v5(p5(e),_j(e),kj(e,n)),y5=e=>({target:e,srcElement:e}),Aj=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...y5(o)}),r2=(e,n,o)=>{const r=qs("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:Dt,stopImmediatePropagation:Dt,stopPropagation:Dt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...y5(n)}},Dj=(e,n)=>{const o=gy(e);return n==="dragstart"?(DL(o),ML(o)):n==="drop"?(EZ(o),SR(o)):($_(o),PL(o)),o},Rj=(e,n,o,r)=>{const i=Dj(o,e);return bt(r)?r2(e,n,i):Aj(e,r,n,i)},a2=32,Mj=100,q_=8,K_=16,w5=Un,Pj=hO(w5,Fa),Y_=(e,n,o)=>w5(o)&&o!==n&&e.isEditable(o.parentElement),C5=(e,n,o)=>It(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),S5=(e,n,o,r)=>{const i=e.dom,u=n.cloneNode(!0);i.setStyles(u,{width:o,height:r}),i.setAttrib(u,"data-mce-selected",null);const g=i.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return i.setStyles(g,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),i.setStyles(u,{margin:0,boxSizing:"border-box"}),g.appendChild(u),g},Nj=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},X_=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},x5=X_("left",-a2),Bj=X_("left",a2),E5=X_("top",-a2),J_=X_("top",a2),FR=(e,n,o,r,i,u,g,y,x,A,I,F)=>{let V=0,J=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>i&&(V=n.pageX+o-i),n.pageY+r>u&&(J=n.pageY+r-u),e.style.width=o-V+"px",e.style.height=r-J+"px";const ne=x.clientHeight,Y=x.clientWidth,oe=g+x.getBoundingClientRect().top,he=y+x.getBoundingClientRect().left;I.on(be=>{be.intervalId.clear(),be.dragging&&F&&(g+q_>=ne?be.intervalId.set(J_(A)):g-q_<=0?be.intervalId.set(E5(A)):y+q_>=Y?be.intervalId.set(Bj(A)):y-q_<=0?be.intervalId.set(x5(A)):oe+K_>=window.innerHeight?be.intervalId.set(J_(window)):oe-K_<=0?be.intervalId.set(E5(window)):he+K_>=window.innerWidth?be.intervalId.set(Bj(window)):he-K_<=0&&be.intervalId.set(x5(window)))})},i2=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},$j=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);i2(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&Hu(re.fromDom(o))},Ij=e=>e.button===0,T5=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),Fj=(e,n)=>o=>{if(Ij(o)){const r=As(n.dom.getParents(o.target),Pj).getOr(null);if(Te(r)&&Y_(n.dom,n.getBody(),r)){const i=n.dom.getPos(r),u=n.getBody(),g=n.getDoc().documentElement;e.set({element:r,dataTransfer:xR(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:g.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:g.offsetHeight)-2,relX:o.pageX-i.x,relY:o.pageY-i.y,width:r.offsetWidth,height:r.offsetHeight,ghost:S5(n,r,r.offsetWidth,r.offsetHeight),intervalId:dO(Mj)})}}},LR=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),G_(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const i=e._selectionOverrides.showCaret(1,r.node,r.position===by.Before,!1);i?e.selection.setRng(i):e.selection.placeCaretAt(n,o)})},vy=(e,n,o,r,i)=>{n==="dragstart"&&$L(r,e.dom.getOuterHTML(o));const u=Rj(n,o,r,i);return e.dispatch(n,u)},Lj=(e,n)=>{const o=x1((i,u)=>LR(n,i,u),0);n.on("remove",o.cancel);const r=e;return i=>e.on(u=>{const g=Math.max(Math.abs(i.screenX-u.screenX),Math.abs(i.screenY-u.screenY));if(!u.dragging&&g>10){const y=vy(n,"dragstart",u.element,u.dataTransfer,i);if(Te(y.dataTransfer)&&(u.dataTransfer=y.dataTransfer),y.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const y=i.currentTarget===n.getDoc().documentElement,x=T5(u,Oj(n,i));Nj(u.ghost,n.getBody()),FR(u.ghost,x,u.width,u.height,u.maxX,u.maxY,i.clientY,i.clientX,n.getContentAreaContainer(),n.getWin(),r,y),o.throttle(i.clientX,i.clientY)}})},Hj=e=>{const n=e.getSel();if(Te(n)){const r=n.getRangeAt(0).startContainer;return nt(r)?r.parentNode:r}else return null},_5=(e,n)=>o=>{e.on(r=>{var i;if(r.intervalId.clear(),r.dragging){if(C5(n,Hj(n.selection),r.element)){const u=(i=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&i!==void 0?i:n.getBody();vy(n,"drop",u,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{$j(n.dom,r.element),MZ(r.dataTransfer).each(y=>n.insertContent(y)),n._selectionOverrides.hideFakeCaret()})}vy(n,"dragend",n.getBody(),r.dataTransfer,o)}}),O5(e)},k5=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>vy(n,"dragend",r.element,r.dataTransfer),i=>vy(n,"dragend",r.element,r.dataTransfer,i))}),O5(e)},NY=(e,n)=>o=>k5(e,n,Z.some(o)),O5=e=>{e.on(n=>{n.intervalId.clear(),i2(n.ghost)}),e.clear()},zj=e=>{const n=Lm(),o=jo.DOM,r=document,i=Fj(n,e),u=Lj(n,e),g=_5(n,e),y=NY(n,e);e.on("mousedown",i),e.on("mousemove",u),e.on("mouseup",g),o.bind(r,"mousemove",u),o.bind(r,"mouseup",y),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",y)}),e.on("keydown",x=>{x.keyCode===At.ESC&&k5(n,e,Z.none())})},Vj=e=>{const n=i=>{if(!i.isDefaultPrevented()){const u=i.dataTransfer;u&&(on(u.types,"Files")||u.files.length>0)&&(i.preventDefault(),i.type==="drop"&&BT(e,"Dropped file type is not supported"))}},o=i=>{TE(e,i.target)&&n(i)},r=()=>{const i=jo.DOM,u=e.dom,g=document,y=e.inline?e.getBody():e.getDoc(),x=["drop","dragover"];$e(x,A=>{i.bind(g,A,o),u.bind(y,A,n)}),e.on("remove",()=>{$e(x,A=>{i.unbind(g,A,o),u.unbind(y,A,n)})})};e.on("init",()=>{_l.setEditorTimeout(e,r,0)})},A5=e=>{zj(e),e0(e)&&Vj(e)},Uj=e=>{const n=x1(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=GT(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},D5=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(zs(o)){const r=op(e.getBody(),o),i=Un(r)?r:o;e.selection.getNode()!==i&&J0(e,i).each(u=>e.selection.setRng(u))}})})},c2=Un,R5=(e,n)=>op(e.getBody(),n),Wj=e=>{const n=e.selection,o=e.dom,r=e.getBody(),i=mC(e,r,o.isBlock,()=>Qh(e)),u="sel-"+o.uniqueId(),g="data-mce-selected";let y;const x=xt=>Te(xt)&&o.hasClass(xt,"mce-offscreen-selection"),A=xt=>xt!==r&&(c2(xt)||zs(xt))&&o.isChildOf(xt,r)&&o.isEditable(xt.parentNode),I=xt=>{xt&&n.setRng(xt)},F=(xt,Le,Me,Qe=!0)=>e.dispatch("ShowCaret",{target:Le,direction:xt,before:Me}).isDefaultPrevented()?null:(Qe&&n.scrollIntoView(Le,xt===-1),i.show(Me,Le)),V=xt=>{xt.hasAttribute("data-mce-caret")&&(Nd(xt),n.scrollIntoView(xt))},J=()=>{e.on("click",Le=>{o.isEditable(Le.target)||(Le.preventDefault(),e.focus())}),e.on("blur NewBlock",Ee),e.on("ResizeWindow FullscreenStateChanged",i.reposition),e.on("tap",Le=>{const Me=Le.target,Qe=R5(e,Me);c2(Qe)?(Le.preventDefault(),J0(e,Qe).each(ye)):A(Me)&&J0(e,Me).each(ye)},!0),e.on("mousedown",Le=>{const Me=Le.target;if(Me!==r&&Me.nodeName!=="HTML"&&!o.isChildOf(Me,r)||!bV(e,Le.clientX,Le.clientY))return;Ee(),st();const Qe=R5(e,Me);c2(Qe)?(Le.preventDefault(),J0(e,Qe).each(ye)):G_(r,Le.clientX,Le.clientY).each(Tt=>{Le.preventDefault();const Wt=F(1,Tt.node,Tt.position===by.Before,!1);I(Wt),Am(Qe)?Qe.focus():e.getBody().focus()})}),e.on("keypress",Le=>{At.modifierPressed(Le)||c2(n.getNode())&&Le.preventDefault()}),e.on("GetSelectionRange",Le=>{let Me=Le.range;if(y){if(!y.parentNode){y=null;return}Me=Me.cloneRange(),Me.selectNode(y),Le.range=Me}}),e.on("SetSelectionRange",Le=>{Le.range=oe(Le.range);const Me=ye(Le.range,Le.forward);Me&&(Le.range=Me)});const xt=Le=>Mt(Le)&&Le.id==="mcepastebin";e.on("AfterSetSelectionRange",Le=>{const Me=Le.range,Qe=Me.startContainer.parentElement;!Y(Me)&&!xt(Qe)&&st(),x(Qe)||Ee()}),A5(e),Uj(e),D5(e)},ne=xt=>la(xt)||zf(xt)||Yg(xt),Y=xt=>ne(xt.startContainer)||ne(xt.endContainer),oe=xt=>{const Le=e.schema.getVoidElements(),Me=o.createRng(),Qe=xt.startContainer,Tt=xt.startOffset,Wt=xt.endContainer,Sn=xt.endOffset;return cn(Le,Qe.nodeName.toLowerCase())?Tt===0?Me.setStartBefore(Qe):Me.setStartAfter(Qe):Me.setStart(Qe,Tt),cn(Le,Wt.nodeName.toLowerCase())?Sn===0?Me.setEndBefore(Wt):Me.setEndAfter(Wt):Me.setEnd(Wt,Sn),Me},he=(xt,Le)=>{const Me=re.fromDom(e.getBody()),Qe=e.getDoc(),Tt=pi(Me,"#"+u).getOrThunk(()=>{const Mn=re.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Qe);return ns(Mn,"id",u),Js(Me,Mn),Mn}),Wt=o.createRng();Rd(Tt),ko(Tt,[re.fromText(ro,Qe),re.fromDom(Le),re.fromText(ro,Qe)]),Wt.setStart(Tt.dom.firstChild,1),Wt.setEnd(Tt.dom.lastChild,0),xa(Tt,{top:o.getPos(xt,e.getBody()).y+"px"}),vE(Tt);const Sn=n.getSel();return Sn&&(Sn.removeAllRanges(),Sn.addRange(Wt)),Wt},be=xt=>{const Le=xt.cloneNode(!0),Me=e.dispatch("ObjectSelected",{target:xt,targetClone:Le});if(Me.isDefaultPrevented())return null;const Qe=he(xt,Me.targetClone),Tt=re.fromDom(xt);return $e(Zr(re.fromDom(e.getBody()),`*[${g}]`),Wt=>{so(Tt,Wt)||Is(Wt,g)}),o.getAttrib(xt,g)||xt.setAttribute(g,"1"),y=xt,st(),Qe},ye=(xt,Le)=>{if(!xt)return null;if(xt.collapsed){if(!Y(xt)){const Wt=Le?1:-1,Sn=Ym(Wt,r,xt),Mn=Sn.getNode(!Le);if(Te(Mn)){if(Ph(Mn))return F(Wt,Mn,Le?!Sn.isAtEnd():!1,!1);if(wi(Mn)&&Un(Mn.nextSibling)){const qo=o.createRng();return qo.setStart(Mn,0),qo.setEnd(Mn,0),qo}}const Ao=Sn.getNode(Le);if(Te(Ao)){if(Ph(Ao))return F(Wt,Ao,Le?!1:!Sn.isAtEnd(),!1);if(wi(Ao)&&Un(Ao.previousSibling)){const qo=o.createRng();return qo.setStart(Ao,1),qo.setEnd(Ao,1),qo}}}return null}let Me=xt.startContainer,Qe=xt.startOffset;const Tt=xt.endOffset;if(nt(Me)&&Qe===0&&c2(Me.parentNode)&&(Me=Me.parentNode,Qe=o.nodeIndex(Me),Me=Me.parentNode),!Mt(Me))return null;if(Tt===Qe+1&&Me===xt.endContainer){const Wt=Me.childNodes[Qe];if(A(Wt))return be(Wt)}return null},Ee=()=>{y&&y.removeAttribute(g),pi(re.fromDom(e.getBody()),"#"+u).each(ho),y=null},Ye=()=>{i.destroy(),y=null},st=()=>{i.hide()};return xg(e)||J(),{showCaret:F,showBlockCaretContainer:V,hideFakeCaret:st,destroy:Ye}},Zj=(e,n)=>{let o=n;for(let r=e.previousSibling;nt(r);r=r.previousSibling)o+=r.data.length;return o},M5=(e,n,o,r,i)=>{if(nt(o)&&(r<0||r>o.data.length))return[];const u=i&&nt(o)?[Zj(o,r)]:[r];let g=o;for(;g!==n&&g.parentNode;)u.push(e.nodeIndex(g,i)),g=g.parentNode;return g===n?u.reverse():[]},Q_=(e,n,o,r,i,u,g=!1)=>{const y=M5(e,n,o,r,g),x=M5(e,n,i,u,g);return{start:y,end:x}},jj=(e,n)=>{const o=n.slice(),r=o.pop();return Fn(r)?as(o,(u,g)=>u.bind(y=>Z.from(y.childNodes[g])),Z.some(e)).bind(u=>nt(u)&&(r<0||r>u.data.length)?Z.none():Z.some({node:u,offset:r})):Z.none()},P5=(e,n)=>jj(e,n.start).bind(({node:o,offset:r})=>jj(e,n.end).map(({node:i,offset:u})=>{const g=document.createRange();return g.setStart(o,r),g.setEnd(i,u),g})),N5=(e,n,o,r=!1)=>Q_(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),yy=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,nt(n.firstChild)&&Mm(n.firstChild.data)),yy(e,r,o)}},wy=(e,n,o,r=!0)=>{const i=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(nt(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),nt(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),yy(e,i,o),i!==u&&yy(e,u,o))},HR=(e,n)=>Z.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),B5=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:Yv(r).concat(e.blockPatterns),inlinePatterns:Vw(r).concat(e.inlinePatterns)}},$5=(e,n,o,r)=>{const i=e.createRng();return i.setStart(n,0),i.setEnd(o,r),i.toString()},I5=e=>/^\s[^\s]/.test(e),l2=(e,n,o)=>{CF(n,0,n).each(i=>{const u=i.container;f_(u,o.start.length,n).each(x=>{const A=e.createRng();A.setStart(u,0),A.setEnd(x.container,x.offset),wy(e,A,I=>I===n)});const g=re.fromDom(u),y=Jl(g);I5(y)&&lc(g,y.slice(1))})},F5=(e,n)=>{const o=e.dom,r=n.pattern,i=P5(o.getRoot(),n.range).getOrDie("Unable to resolve path range"),u=(g,y)=>{const x=y.get(g);return _t(x)&&Ks(x).exists(A=>cn(A,"block"))};return HR(e,i).each(g=>{r.type==="block-format"?u(r.format,e.formatter)&&e.undoManager.transact(()=>{l2(e.dom,g,r),e.formatter.apply(r.format)}):r.type==="block-command"&&e.undoManager.transact(()=>{l2(e.dom,g,r),e.execCommand(r.cmd,!1,r.value)})}),!0},L5=e=>Qo(e,(n,o)=>o.start.length-n.start.length),Gj=(e,n)=>{const o=L5(e),r=n.replace(ro," ");return As(o,i=>n.indexOf(i.start)===0||r.indexOf(i.start)===0)},qj=(e,n,o,r)=>{var i;const u=e.dom,g=za(e);if(!u.is(n,g))return[];const y=(i=n.textContent)!==null&&i!==void 0?i:"";return Gj(o.blockPatterns,y).map(x=>at.trim(y).length===x.start.length?[]:[{pattern:x,range:Q_(u,u.getRoot(),n,0,n,0,r)}]).getOr([])},H5=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();$e(n,r=>F5(e,r)),e.selection.moveToBookmark(o)},z5=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),ek=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},V5=(e,n,o)=>{const r=P5(e.getRoot(),o).getOrDie("Unable to resolve path range"),i=r.startContainer,u=r.endContainer,g=r.endOffset===0?u:u.splitText(r.endOffset),y=r.startOffset===0?i:i.splitText(r.startOffset),x=y.parentNode,A=g.parentNode;return{prefix:n,end:A.insertBefore(z5(e,n+"-end"),g),start:x.insertBefore(z5(e,n+"-start"),y)}},tk=(e,n,o)=>{yy(e,e.get(n.prefix+"-end"),o),yy(e,e.get(n.prefix+"-start"),o)},zR=e=>e.start.length===0,Kj=e=>(n,o)=>{const i=n.data.substring(0,o),u=i.lastIndexOf(e.charAt(e.length-1)),g=i.lastIndexOf(e);return g!==-1?g+e.length:u!==-1?u+1:-1},U5=(e,n,o,r)=>{const i=n.start;return jS(e,r.container,r.offset,Kj(i),o).bind(g=>{var y,x;const A=(x=(y=o.textContent)===null||y===void 0?void 0:y.indexOf(i))!==null&&x!==void 0?x:-1;if(A!==-1&&g.offset>=A+i.length){const F=e.createRng();return F.setStart(g.container,g.offset-i.length),F.setEnd(g.container,g.offset),Z.some(F)}else{const F=g.offset-i.length;return ZS(g.container,F,o).map(V=>{const J=e.createRng();return J.setStart(V.container,V.offset),J.setEnd(g.container,g.offset),J}).filter(V=>V.toString()===i).orThunk(()=>U5(e,n,o,md(g.container,0)))}})},Yj=(e,n,o,r,i,u=!1)=>{if(n.start.length===0&&!u){const g=e.createRng();return g.setStart(o,r),g.setEnd(o,r),Z.some(g)}return WS(o,r,i).bind(g=>U5(e,n,i,g).bind(x=>{var A;if(u){if(x.endContainer===g.container&&x.endOffset===g.offset)return Z.none();if(g.offset===0&&((A=x.endContainer.textContent)===null||A===void 0?void 0:A.length)===x.endOffset)return Z.none()}return Z.some(x)}))},Xj=(e,n,o,r)=>{const i=e.dom,u=i.getRoot(),g=o.pattern,y=o.position.container,x=o.position.offset;return ZS(y,x-o.pattern.end.length,n).bind(A=>{const I=Q_(i,u,A.container,A.offset,y,x,r);if(zR(g))return Z.some({matches:[{pattern:g,startRng:I,endRng:I}],position:A});{const F=nk(e,o.remainingPatterns,A.container,A.offset,n,r),V=F.getOr({matches:[],position:A}),J=V.position;return Yj(i,g,J.container,J.offset,n,F.isNone()).map(Y=>{const oe=N5(i,u,Y,r);return{matches:V.matches.concat([{pattern:g,startRng:oe,endRng:I}]),position:md(Y.startContainer,Y.startOffset)}})}})},nk=(e,n,o,r,i,u)=>{const g=e.dom;return WS(o,r,g.getRoot()).bind(y=>{const x=$5(g,i,o,r);for(let A=0;A<n.length;A++){const I=n[A];if(!Ja(x,I.end))continue;const F=n.slice();F.splice(A,1);const V=Xj(e,i,{pattern:I,remainingPatterns:F,position:y},u);if(V.isNone()&&r>0)return nk(e,n,o,r-1,i,u);if(V.isSome())return V}return Z.none()})},VR=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?$e(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},W5=(e,n,o,r)=>{const i=ek(e.dom,o);wy(e.dom,i,r),VR(e,n,i)},UR=(e,n,o,r,i)=>{const u=e.dom,g=ek(u,r),y=ek(u,o);wy(u,y,i),wy(u,g,i);const x={prefix:o.prefix,start:o.end,end:r.start},A=ek(u,x);VR(e,n,A)},WR=(e,n)=>{const o=Jf("mce_textpattern"),r=Il(n,(i,u)=>{const g=V5(e,o+`_end${i.length}`,u.endRng);return i.concat([{...u,endMarker:g}])},[]);return Il(r,(i,u)=>{const g=r.length-i.length-1,y=zR(u.pattern)?u.endMarker:V5(e,o+`_start${g}`,u.startRng);return i.concat([{...u,startMarker:y}])},[])},Jj=e=>Qo(e,(n,o)=>o.end.length-n.end.length),ZR=(e,n)=>{const o=tr(e,r=>Po(n,i=>r.pattern.start===i.pattern.start&&r.pattern.end===i.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},Z5=(e,n,o,r,i,u)=>{const g=nk(e,i.inlinePatterns,o,r,n,u).fold(()=>[],x=>x.matches),y=nk(e,Jj(i.inlinePatterns),o,r,n,u).fold(()=>[],x=>x.matches);return ZR(g,y)},j5=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),i=WR(o,n);$e(i,u=>{const g=o.getParent(u.startMarker.start,o.isBlock),y=x=>x===g;zR(u.pattern)?W5(e,u.pattern,u.endMarker,y):UR(e,u.pattern,u.startMarker,u.endMarker,y),tk(o,u.endMarker,y),tk(o,u.startMarker,y)}),e.selection.moveToBookmark(r)},G5=(e,n)=>{const o=e.selection.getRng();return HR(e,o).map(r=>{var i;const u=Math.max(0,o.startOffset),g=B5(n,r,(i=r.textContent)!==null&&i!==void 0?i:""),y=Z5(e,r,o.startContainer,u,g,!0),x=qj(e,r,g,!0);return x.length>0||y.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{jk(e),j5(e,y),H5(e,x);const A=e.selection.getRng(),I=WS(A.startContainer,A.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),I.each(F=>{const V=F.container;V.data.charAt(F.offset-1)===u1&&(V.deleteData(F.offset-1,1),yy(e.dom,V.parentNode,J=>J===e.dom.getRoot()))})}),!0):!1}).getOr(!1)},Qj=(e,n)=>{const o=e.selection.getRng();HR(e,o).map(r=>{const i=Math.max(0,o.startOffset-1),u=$5(e.dom,r,o.startContainer,i),g=B5(n,r,u),y=Z5(e,r,o.startContainer,i,g,!1);y.length>0&&e.undoManager.transact(()=>{j5(e,y)})})},q5=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},eG=(e,n)=>q5(e,n,(o,r)=>o===r.keyCode&&!At.modifierPressed(r)),tG=(e,n)=>q5(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),nG=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>Si(o0(e),ZO(e)),i=()=>cC(e);e.on("keydown",g=>{if(g.keyCode===13&&!At.modifierPressed(g)&&e.selection.isCollapsed()){const y=r();(y.inlinePatterns.length>0||y.blockPatterns.length>0||i())&&G5(e,y)&&g.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()){const g=r();(g.inlinePatterns.length>0||i())&&Qj(e,g)}};e.on("keyup",g=>{eG(o,g)&&u()}),e.on("keypress",g=>{tG(n,g)&&_l.setEditorTimeout(e,u)})},oG=e=>{nG(e)},sG=e=>{const n=at.each,o=At.BACKSPACE,r=At.DELETE,i=e.dom,u=e.selection,g=e.parser,y=Et.browser,x=y.isFirefox(),A=y.isChromium()||y.isSafari(),I=Et.deviceType.isiPhone()||Et.deviceType.isiPad(),F=Et.os.isMacOS()||Et.os.isiOS(),V=(Lt,Ht)=>{try{e.getDoc().execCommand(Lt,!1,String(Ht))}catch{}},J=Lt=>Lt.isDefaultPrevented(),ne=()=>{const Lt=it=>{const hn=i.create("body"),Zn=it.cloneContents();return hn.appendChild(Zn),u.serializer.serialize(hn,{format:"html"})},Ht=it=>{const hn=Lt(it),Zn=i.createRng();Zn.selectNode(e.getBody());const Mo=Lt(Zn);return hn===Mo};e.on("keydown",it=>{const hn=it.keyCode;if(!J(it)&&(hn===r||hn===o)&&e.selection.isEditable()){const Zn=e.selection.isCollapsed(),Mo=e.getBody();if(Zn&&!Ns(re.fromDom(Mo))||!Zn&&!Ht(e.selection.getRng()))return;it.preventDefault(),e.setContent(""),Mo.firstChild&&i.isBlock(Mo.firstChild)?e.selection.setCursorLocation(Mo.firstChild,0):e.selection.setCursorLocation(Mo,0),e.nodeChanged()}})},Y=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},oe=()=>{e.inline||i.bind(e.getDoc(),"mousedown mouseup",Lt=>{let Ht;if(Lt.target===e.getDoc().documentElement)if(Ht=u.getRng(),e.getBody().focus(),Lt.type==="mousedown"){if(la(Ht.startContainer))return;u.placeCaretAt(Lt.clientX,Lt.clientY)}else u.setRng(Ht)})},he=()=>{e.on("keydown",Lt=>{if(!J(Lt)&&Lt.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const Ht=u.getNode(),it=Ht.previousSibling;if(Ht.nodeName==="HR"){i.remove(Ht),Lt.preventDefault();return}it&&it.nodeName&&it.nodeName.toLowerCase()==="hr"&&(i.remove(it),Lt.preventDefault())}}})},be=()=>{Range.prototype.getClientRects||e.on("mousedown",Lt=>{if(!J(Lt)&&Lt.target.nodeName==="HTML"){const Ht=e.getBody();Ht.blur(),_l.setEditorTimeout(e,()=>{Ht.focus()})}})},ye=()=>{const Lt=Ox(e);e.on("click",Ht=>{const it=Ht.target;/^(IMG|HR)$/.test(it.nodeName)&&i.isEditable(it)&&(Ht.preventDefault(),e.selection.select(it),e.nodeChanged()),it.nodeName==="A"&&i.hasClass(it,Lt)&&it.childNodes.length===0&&i.isEditable(it.parentNode)&&(Ht.preventDefault(),u.select(it))})},Ee=()=>{const Lt=()=>{const it=i.getAttribs(u.getStart().cloneNode(!1));return()=>{const hn=u.getStart();hn!==e.getBody()&&(i.setAttrib(hn,"style",null),n(it,Zn=>{hn.setAttributeNode(Zn.cloneNode(!0))}))}},Ht=()=>!u.isCollapsed()&&i.getParent(u.getStart(),i.isBlock)!==i.getParent(u.getEnd(),i.isBlock);e.on("keypress",it=>{let hn;return!J(it)&&(it.keyCode===8||it.keyCode===46)&&Ht()?(hn=Lt(),e.getDoc().execCommand("delete",!1),hn(),it.preventDefault(),!1):!0}),i.bind(e.getDoc(),"cut",it=>{if(!J(it)&&Ht()){const hn=Lt();_l.setEditorTimeout(e,()=>{hn()})}})},Ye=()=>{e.on("keydown",Lt=>{if(!J(Lt)&&Lt.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const Ht=u.getNode().previousSibling;if(Ht&&Ht.nodeName&&Ht.nodeName.toLowerCase()==="table")return Lt.preventDefault(),!1}return!0})},st=()=>{e.on("keydown",Lt=>{if(J(Lt)||Lt.keyCode!==At.BACKSPACE)return;let Ht=u.getRng();const it=Ht.startContainer,hn=Ht.startOffset,Zn=i.getRoot();let Mo=it;if(!(!Ht.collapsed||hn!==0)){for(;Mo.parentNode&&Mo.parentNode.firstChild===Mo&&Mo.parentNode!==Zn;)Mo=Mo.parentNode;Mo.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,Mo),Ht=i.createRng(),Ht.setStart(it,0),Ht.setEnd(it,0),u.setRng(Ht))}})},xt=()=>{const Lt=()=>{V("StyleWithCSS",!1),V("enableInlineTableEditing",!1),Th(e)||V("enableObjectResizing",!1)};$1(e)||e.on("BeforeExecCommand mousedown",Lt)},Le=()=>{const Lt=()=>{n(i.select("a:not([data-mce-block])"),Ht=>{var it;let hn=Ht.parentNode;const Zn=i.getRoot();if((hn==null?void 0:hn.lastChild)===Ht){for(;hn&&!i.isBlock(hn);){if(((it=hn.parentNode)===null||it===void 0?void 0:it.lastChild)!==hn||hn===Zn)return;hn=hn.parentNode}i.add(hn,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Ht=>{(Ht.type==="setcontent"||Ht.command==="mceInsertLink")&&Lt()})},Me=()=>{e.on("init",()=>{V("DefaultParagraphSeparator",za(e))})},Qe=Lt=>{const Ht=Lt.getBody(),it=Lt.selection.getRng();return it.startContainer===it.endContainer&&it.startContainer===Ht&&it.startOffset===0&&it.endOffset===Ht.childNodes.length},Tt=()=>{e.on("keyup focusin mouseup",Lt=>{!At.modifierPressed(Lt)&&!Qe(e)&&u.normalize()},!0)},Wt=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Sn=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Mn=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",Lt=>{let Ht;Lt.target.nodeName==="HTML"&&(Ht=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Ht),e.selection.normalize(),e.nodeChanged())}))},Ao=()=>{F&&e.on("keydown",Lt=>{At.metaKeyPressed(Lt)&&!Lt.shiftKey&&(Lt.keyCode===37||Lt.keyCode===39)&&(Lt.preventDefault(),e.selection.getSel().modify("move",Lt.keyCode===37?"backward":"forward","lineboundary"))})},qo=()=>{e.on("click",Lt=>{let Ht=Lt.target;do if(Ht.tagName==="A"){Lt.preventDefault();return}while(Ht=Ht.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Gs=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",Lt=>{Lt.preventDefault()})})},Ra=()=>{g.addNodeFilter("br",Lt=>{let Ht=Lt.length;for(;Ht--;)Lt[Ht].attr("class")==="Apple-interchange-newline"&&Lt[Ht].remove()})},Jr=Dt,mt=()=>{if(!x||e.removed)return!1;const Lt=e.selection.getSel();return!Lt||!Lt.rangeCount||Lt.rangeCount===0},kt=()=>{A&&(oe(),ye(),Gs(),Y(),I&&(Sn(),Mn(),qo())),x&&(be(),xt(),Wt(),Ao())},no=()=>{e.on("drop",Lt=>{var Ht;const it=(Ht=Lt.dataTransfer)===null||Ht===void 0?void 0:Ht.getData("text/html");Q(it)&&/^<img[^>]*>$/.test(it)&&e.dispatch("dragend",new window.DragEvent("dragend",Lt))})},qn=()=>{st(),ne(),Et.windowsPhone||Tt(),A&&(oe(),ye(),Me(),Gs(),Ye(),Ra(),I?(Sn(),Mn(),qo()):Y()),x&&(he(),be(),Ee(),xt(),Le(),Wt(),Ao(),Ye(),no())};return xg(e)?kt():qn(),{refreshContentEditable:Jr,isHidden:mt}},ok=jo.DOM,rG=(e,n)=>{const o=re.fromDom(e.getBody()),r=cv(hl(o)),i=re.fromTag("style");ns(i,"type","text/css"),Js(i,re.fromText(n)),Js(r,i),e.on("remove",()=>{ho(i)})},jR=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,GR=e=>Wo(e,n=>bt(n)===!1),K5=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return GR({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:jR(e),sandbox_iframes:n("sandbox_iframes"),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},Y5=e=>{const n=e.options.get;return GR({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},aG=e=>{const n=e.options.get;return{...K5(e),...Y5(e),...GR({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},iG=e=>{const n=cd(K5(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const i=e.dom,u="data-mce-"+r;let g=o.length;for(;g--;){const y=o[g];let x=y.attr(r);if(x&&!y.attr(u)){if(x.indexOf("data:")===0||x.indexOf("blob:")===0)continue;r==="style"?(x=i.serializeStyle(i.parseStyle(x),y.name),x.length||(x=null),y.attr(u,x),y.attr(r,x)):r==="tabindex"?(y.attr(u,x),y.attr(r,null)):y.attr(u,e.convertURL(x,r,y.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const i=o[r],u=i.attr("type")||"no/type";u.indexOf("mce-")!==0&&i.attr("type","mce-"+u)}}),iC(e)&&n.addNodeFilter("#cdata",o=>{var r;let i=o.length;for(;i--;){const u=o[i];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const i=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(i)&&u.getAll("br").length===0&&u.append(new ki("br",1))}}),n},cG=e=>{const n=Ax(e);n&&_l.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},sk=e=>{const n=e.dom.getRoot();!e.inline&&(!p0(e)||e.selection.getStart(!0)===n)&&ii(n).each(o=>{const r=o.getNode(),i=$u(r)?ii(r).getOr(o):o;e.selection.setRng(i.toRange())})},lG=e=>{e.bindPendingEventDelegates(),e.initialized=!0,ab(e),e.focus(!0),sk(e),e.nodeChanged({initial:!0});const n=LO(e);ue(n)&&n.call(e,e),cG(e)},qR=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,uG=(e,n,o)=>{const{pass:r,fail:i}=ws(n,y=>tinymce.Resource.has(LD(y))),g=[...r.map(y=>{const x=tinymce.Resource.get(LD(y));return Q(x)?Promise.resolve(qR(e).loadRawCss(y,x)):Promise.resolve()}),qR(e).loadAll(i)];return e.inline?g:g.concat([e.ui.styleSheetLoader.loadAll(o)])},X5=e=>{const n=qR(e),o=Cx(e),r=e.contentCSS,i=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?i():e.on("remove",i)};if(e.contentStyles.length>0){let x="";at.each(e.contentStyles,A=>{x+=A+`\r
`}),e.dom.addStyle(x)}const g=Promise.all(uG(e,r,o)).then(u).catch(u),y=Jv(e);return y&&rG(e,y),g},dG=e=>{const n=e.getDoc(),o=e.getBody();tf(e),zO(e)||(n.body.spellcheck=!1,ok.setAttrib(o,"spellcheck","false")),e.quirks=sG(e),yA(e);const r=DO(e);r!==void 0&&(o.dir=r);const i=Dx(e);i&&e.on("BeforeSetContent",u=>{at.each(i,g=>{u.content=u.content.replace(g,y=>"<!--mce:protected "+escape(y)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},mG=e=>{xg(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},KR=e=>{e.removed!==!0&&(mG(e),lG(e))},fG=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},J5=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(ok.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=$1(e),e._editableRoot=jc(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&ok.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=$V(e),e.schema=zd(Y5(e)),e.dom=jo(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:jd(e),referrerPolicy:Rn(e),onSetAttrib:g=>{e.dispatch("SetAttrib",g)},force_hex_color:Rh(e)}),e.parser=iG(e),e.serializer=_$(aG(e),e),e.selection=mp(e.dom,e.getWin(),e.serializer,e),e.annotator=MC(e),e.formatter=UD(e),e.undoManager=WD(e),e._nodeChangeDispatcher=new OL(e),e._selectionOverrides=Wj(e),nU(e),hj(e),gY(e),xg(e)||(d5(e),oG(e));const i=SZ(e);Rb(e,i),aU(e),ud(e),mj(e);const u=Rz(e);dG(e),u.fold(()=>{const g=fG(e);X5(e).then(()=>{KR(e),g()})},g=>{e.setProgressState(!0),X5(e).then(()=>{g().then(y=>{e.setProgressState(!1),KR(e),PD(e)},y=>{e.notificationManager.open({type:"error",text:String(y)}),KR(e),PD(e)})})})},Q5=yt,gG=(e,n,o)=>qg(e,n,Q5,o),rk=jo.DOM,hG=(e,n,o,r)=>{const i=re.fromTag("iframe");return r.each(u=>ns(i,"tabindex",u)),Lc(i,o),Lc(i,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),Ru(i,"tox-edit-area__iframe"),i},pG=e=>{let n=bx(e)+"<html><head>";Ww(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=Zw(e),r=SO(e),i=e.translate(FO(e));return jw(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+jw(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${i}"><br></body></html>`,n},e6=(e,n)=>{const o=e.translate("Rich Text Area"),r=ll(re.fromDom(e.getElement()),"tabindex").bind(cl),i=hG(e.id,o,Uw(e),r).dom;i.onload=()=>{i.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=i,e.iframeHTML=pG(e),rk.add(n.iframeContainer,i)},u2=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,J5(e)};if(qO(e)||Et.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=gG(re.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},bG=(e,n)=>{e6(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=rk.isHidden(n.editorContainer)),e.getElement().style.display="none",rk.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,u2(e)},YR=jo.DOM,vG=(e,n,o)=>{const r=_b.get(o),i=_b.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=at.trim(o),r&&at.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,i)||{};e.plugins[o]=u,ue(u.init)&&(u.init(e,i),n.push(o))}catch(u){F$(e,o,u)}}},yG=e=>e.replace(/^\-/,""),wG=e=>{const n=[];$e(I1(e),o=>{vG(e,n,yG(o))})},CG=e=>{const n=at.trim(qw(e)),o=e.ui.registry.getAll().icons,r={...kS.get("default").icons,...kS.get(n).icons};Ct(r,(i,u)=>{cn(o,u)||e.ui.registry.addIcon(u,i)})},t6=e=>{const n=_h(e);if(Q(n)){const o=Eg.get(n);e.theme=o(e,Eg.urls[n])||{},ue(e.theme.init)&&e.theme.init(e,Eg.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},SG=e=>{const n=Qw(e),o=vu.get(n);e.model=o(e,vu.urls[n])},n6=e=>{const n=e.theme.renderUI;return n?n():s6(e)},xG=e=>{const n=e.getElement(),r=_h(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},o6=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),EG=e=>{const n=YR.create("div");return YR.insertAfter(n,e),o6(n,n)},s6=e=>{const n=e.getElement();return e.inline?o6(null):EG(n)},TG=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,Q(_h(e))?n6(e):ue(_h(e))?xG(e):s6(e)},_G=(e,n)=>{const o={show:Z.from(n.show).getOr(Dt),hide:Z.from(n.hide).getOr(Dt),isEnabled:Z.from(n.isEnabled).getOr(yt),setEnabled:r=>{e.mode.isReadOnly()||Z.from(n.setEnabled).each(i=>i(r))}};e.ui={...e.ui,...o}},kG=async e=>{e.dispatch("ScriptsLoaded"),CG(e),t6(e),SG(e),wG(e);const n=await TG(e);_G(e,Z.from(n.api).getOr({})),e.editorContainer=n.editorContainer,_V(e),e.inline?J5(e):bG(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},$b=jo.DOM,r6=e=>e.charAt(0)==="-",a6=(e,n)=>{const o=Yw(n),r=Va(n);if(!wl.hasCode(o)&&o!=="en"){const i=yo(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(i).catch(()=>{AS(n,i,o)})}},XR=(e,n)=>{const o=_h(e);if(Q(o)&&!r6(o)&&!cn(Eg.urls,o)){const r=PO(e),i=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;Eg.load(o,i).catch(()=>{SV(e,i,o)})}},i6=(e,n)=>{const o=Qw(e);if(o!=="plugin"&&!cn(vu.urls,o)){const r=xx(e),i=Q(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;vu.load(o,i).catch(()=>{I$(e,i,o)})}},c6=e=>Z.from(og(e)).filter(yo).map(n=>({url:n,name:Z.none()})),l6=(e,n,o)=>Z.from(n).filter(r=>yo(r)&&!kS.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:Z.some(r)})),OG=(e,n,o)=>{const r=l6(n,"default",o),i=c6(n).orThunk(()=>l6(n,qw(n),""));$e(Xs([r,i]),u=>{e.add(u.url).catch(()=>{CV(n,u.url,u.name.getOrUndefined())})})},AG=(e,n)=>{const o=(r,i)=>{_b.load(r,i).catch(()=>{dY(e,i,r)})};Ct(Zm(e),(r,i)=>{o(i,r),e.options.set("plugins",I1(e).concat(i))}),$e(I1(e),r=>{r=at.trim(r),r&&!_b.urls[r]&&!r6(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},u6=e=>{const n=_h(e);return!Q(n)||Te(Eg.get(n))},d6=e=>{const n=Qw(e);return Te(vu.get(n))},DG=(e,n)=>{const o=gr.ScriptLoader,r=()=>{!e.removed&&u6(e)&&d6(e)&&kG(e)};XR(e,n),i6(e,n),a6(o,e),OG(o,e,n),AG(e,n),o.loadQueue().then(r,r)},RG=(e,n)=>fw.forElement(e,{contentCssCors:Oh(n),referrerPolicy:Rn(n)}),JR=e=>{const n=e.id;wl.setCode(Yw(e));const o=()=>{$b.unbind(window,"ready",o),e.render()};if(!Ji.Event.domLoaded){$b.bind(window,"ready",o);return}if(!e.getElement())return;const r=re.fromDom(e.getElement()),i=Sm(r);e.on("remove",()=>{eo(r.dom.attributes,g=>Is(r,g.name)),Lc(r,i)}),e.ui.styleSheetLoader=RG(r,e),eC(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||$b.getParent(n,"form");u&&(e.formElement=u,BO(e)&&!hv(e.getElement())&&($b.insertAfter($b.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=g=>{e.dispatch(g.type,g)},$b.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),kx(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=$$(e),e.notificationManager=FD(e),XO(e)&&e.on("GetContent",g=>{g.save&&(g.content=$b.encode(g.content))}),Qu(e)&&e.on("submit",()=>{e.initialized&&e.save()}),N1(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),DG(e,e.suffix)},ak=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),EA(e,n))},ik=e=>e._editableRoot,Og=(e,n)=>({sections:ft(e),options:ft(n)}),d2=ts().deviceType,Ib=d2.isPhone(),m6=d2.isTablet(),m2=e=>{if(It(e))return[];{const n=_t(e)?e:e.split(/[ ,]/),o=zt(n,zl);return jt(o,yo)}},MG=(e,n)=>{const o=Ii(n,(r,i)=>on(e,i));return Og(o.t,o.f)},f6=(e,n,o={})=>{const r=e.sections(),i=Lo(r,n).getOr({});return at.extend({},o,i)},QR=(e,n)=>cn(e.sections(),n),eM=(e,n)=>QR(e,n)?e.sections()[n]:{},ck=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Lo(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),_p=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?at.extend({},e.external_plugins,r):r},Fb=(e,n)=>[...m2(e),...m2(n)],g6=(e,n,o,r)=>e&&QR(n,"mobile")?r:o,PG=(e,n,o,r)=>{const i=m2(o.forced_plugins),u=m2(r.plugins),g=eM(n,"mobile"),y=g.plugins?m2(g.plugins):u,x=g6(e,n,u,y),A=Fb(i,x);return at.extend(r,{forced_plugins:i,plugins:A})},NG=(e,n)=>e&&QR(n,"mobile"),BG=(e,n,o,r,i)=>{var u;const g=e?{mobile:ck((u=i.mobile)!==null&&u!==void 0?u:{},n)}:{},y=MG(["mobile"],JS(g,i)),x=at.extend(o,r,y.options(),NG(e,y)?f6(y,"mobile"):{},{external_plugins:_p(r,y.options())});return PG(e,y,r,x)},$G=(e,n)=>BG(Ib||m6,Ib,n,e,n),IG=(e,n)=>Uz(e,n),FG=e=>{const n=(r,i)=>{e.formatter.toggle(r,i),e.nodeChanged()},o=r=>()=>{$e("left,center,right,justify".split(","),i=>{r!==i&&e.formatter.remove("align"+i)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},h6=e=>{const n=o=>()=>{const r=e.selection,i=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return Po(i,u=>Te(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},LG=e=>{FG(e),h6(e)},HG=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let i=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Et.os.isMacOS()||Et.os.isiOS())&&(i=i.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:i,type:"error"})}}})},zG=(e,n,o,r)=>{const i=re.fromDom(e.getRoot());return N0(i,De.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),B0(i,De.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},BY=e=>{if(typeof e!="string"){const n=at.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},VG=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?zG(r,o.getRng(),n,e.schema):n},Cy=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=BY(n);mD(e,{...r,content:VG(e,o),format:"html",set:!1,selection:!0}).each(i=>{const u=zz(e,i.content,r);ST(e,u,i),e.addVisual()})}},UG=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{Cy(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{Cy(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{Cy(e,r)},mceInsertContent:(n,o,r)=>{Cy(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(Ah(e))}})},WG={"font-size":"size","font-family":"face"},p6=zi("font"),ZG=(e,n,o)=>{const r=u=>or(u,e).orThunk(()=>p6(u)?Lo(WG,e).bind(g=>ll(u,g)):Z.none()),i=u=>so(re.fromDom(n),u);return B4(re.fromDom(o),u=>r(u),i)},b6=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),jG=(e,n)=>Z.from(jo.DOM.getStyle(n,e,!0)),lk=e=>(n,o)=>Z.from(o).map(re.fromDom).filter(Vr).bind(r=>ZG(e,n,r.dom).or(jG(e,r.dom))).getOr(""),GG=lk("font-size"),qG=R(b6,lk("font-family")),KG=e=>ii(e.getBody()).bind(n=>{const o=n.container();return Z.from(nt(o)?o.parentNode:o)}),YG=e=>Z.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?Z.none():Z.from(e.selection.getStart(!0))}),v6=(e,n)=>YG(e).orThunk(qe(KG,e)).map(re.fromDom).filter(Vr).bind(n),f2=(e,n)=>v6(e,fo(Z.some,n)),tM=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=KO(e),i=YO(e);return i.length>0?i[o-1]||n:r[o-1]||n}else return n}else return n},nM=e=>{const n=e.split(/\s*,\s*/);return zt(n,o=>o.indexOf(" ")!==-1&&!($s(o,'"')||$s(o,"'"))?`'${o}'`:o).join(",")},XG=(e,n)=>{const o=tM(e,n);e.formatter.toggle("fontname",{value:nM(o)}),e.nodeChanged()},$Y=e=>f2(e,n=>qG(e.getBody(),n.dom)).getOr(""),IY=(e,n)=>{e.formatter.toggle("fontsize",{value:tM(e,n)}),e.nodeChanged()},JG=e=>f2(e,n=>GG(e.getBody(),n.dom)).getOr(""),y6=e=>f2(e,n=>{const o=re.fromDom(e.getBody()),r=B4(n,u=>or(u,"line-height"),qe(so,o)),i=()=>{const u=parseFloat(nr(n,"line-height")),g=parseFloat(nr(n,"font-size"));return String(u/g)};return r.getOrThunk(i)}).getOr(""),QG=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},eq=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,i)=>{n(o,{value:i})},BackColor:(o,r,i)=>{n("hilitecolor",{value:i})},FontName:(o,r,i)=>{XG(e,i)},FontSize:(o,r,i)=>{IY(e,i)},LineHeight:(o,r,i)=>{QG(e,i)},Lang:(o,r,i)=>{var u;n(o,{value:i.code,customValue:(u=i.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,i)=>{n(Q(i)?i:"p")},mceToggleFormat:(o,r,i)=>{n(i)}})},tq=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>$Y(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>JG(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>y6(e))},FY=e=>{eq(e),tq(e)},LY=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},w6=e=>{e.editorCommands.addCommands({Indent:()=>{tU(e)},Outdent:()=>{k3(e)}}),e.editorCommands.addCommands({Outdent:()=>s_(e)},"state")},C6=e=>{const n=(o,r,i)=>{const u=Q(i)?{href:i}:i,g=e.dom.getParent(e.selection.getNode(),"a");Ge(u)&&Q(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!g||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,g))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},nq=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{e.getDoc().execCommand(n);const o=e.dom.getParent(e.selection.getNode(),"ol,ul");if(o){const r=o.parentNode;if(r&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(r.nodeName)){const i=e.selection.getBookmark();e.dom.split(r,o),e.selection.moveToBookmark(i)}}}})},oq=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{const o=e.dom.getParent(e.selection.getNode(),"ul,ol");return o&&(n==="insertunorderedlist"&&o.tagName==="UL"||n==="insertorderedlist"&&o.tagName==="OL")}},"state")},sq=e=>{nq(e),oq(e)},HY=(e,n,o,r)=>{const i=e.dom,u=y=>i.isBlock(y)&&y.parentElement===o,g=u(n)?n:i.getParent(r,u,o);return Z.from(g).map(re.fromDom)},rq=(e,n)=>{const o=e.dom,r=e.selection.getRng(),i=n?e.selection.getStart():e.selection.getEnd(),u=n?r.startContainer:r.endContainer,g=Rl(o,u);if(!g||!g.isContentEditable)return;const y=n?dr:Uc,x=za(e);HY(e,i,g,u).each(A=>{const I=cR(e,u,A.dom,g,!1,x);y(A,re.fromDom(I)),e.selection.setCursorLocation(I,0),e.dispatch("NewBlock",{newBlock:I}),e2(e,"insertParagraph")})},zY=e=>rq(e,!0),aq=e=>rq(e,!1),VY=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{zY(e)},InsertNewBlockAfter:()=>{aq(e)}})},iq=e=>{e.editorCommands.addCommands({insertParagraph:()=>{D_(uL,e)},mceInsertNewLine:(n,o,r)=>{hL(e,r)},InsertLineBreak:(n,o,r)=>{D_(aZ,e)}})},Lb=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let i=0;e.dom.getParent(e.selection.getNode(),u=>Mt(u)&&i++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),Fa);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},oM=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const i=r??e.selection.getNode();if(i!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(i,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{J8(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},uk=e=>{LG(e),HG(e),LY(e),Lb(e),UG(e),C6(e),w6(e),VY(e),iq(e),sq(e),FY(e),oM(e)},S6=["toggleview"],sM=e=>on(S6,e.toLowerCase());class rM{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,i){const u=this.editor,g=n.toLowerCase(),y=i==null?void 0:i.skip_focus;if(u.removed||(g!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(g)&&!y?u.focus():F8(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const A=this.commands.exec[g];return ue(A)?(A(g,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!sM(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return ue(r)?r(o):!1}queryCommandValue(n){if(!sM(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return ue(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;Ct(n,(i,u)=>{$e(u.toLowerCase().split(","),g=>{r[o][g]=i})})}addCommand(n,o,r){const i=n.toLowerCase();this.commands.exec[i]=(u,g,y)=>o.call(r??this.editor,g,y)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const Hb="data-mce-contenteditable",cq=(e,n,o)=>{Od(e,n)&&!o?dl(e,n):o&&Ru(e,n)},aM=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},dk=(e,n)=>{e.dom.contentEditable=n?"true":"false"},kp=e=>{$e(Zr(e,'*[contenteditable="true"]'),n=>{ns(n,Hb,"true"),dk(n,!1)})},lq=e=>{$e(Zr(e,`*[${Hb}="true"]`),n=>{Is(n,Hb),dk(n,!0)})},x6=e=>{Z.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},uq=e=>{e.selection.setRng(e.selection.getRng())},mk=(e,n)=>{const o=re.fromDom(e.getBody());cq(o,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),x6(e),e.readonly=!0,dk(o,!1),kp(o)):(e.readonly=!1,e.hasEditableRoot()&&dk(o,!0),lq(o),aM(e,"StyleWithCSS",!1),aM(e,"enableInlineTableEditing",!1),aM(e,"enableObjectResizing",!1),wP(e)&&e.focus(),uq(e),e.nodeChanged())},zb=e=>e.readonly,E6=e=>{e.parser.addAttributeFilter("contenteditable",n=>{zb(e)&&$e(n,o=>{o.attr(Hb,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Hb,n=>{zb(e)&&$e(n,o=>{o.attr("contenteditable",o.attr(Hb))})}),e.serializer.addTempAttr(Hb)},dq=e=>{e.serializer?E6(e):e.on("PreInit",()=>{E6(e)})},T6=e=>e.type==="click",mq=["copy"],fq=e=>on(mq,e.type),gq=(e,n)=>pl(n,"a",r=>so(r,re.fromDom(e.getBody()))).bind(r=>ll(r,"href")),iM=(e,n)=>{if(T6(n)&&!At.metaKeyPressed(n)){const o=re.fromDom(n.target);gq(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const i=e.dom.select(`${r},[name="${Ed(r,"#")}"]`);i.length&&e.selection.scrollIntoView(i[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else fq(n)&&e.dispatch(n.type,n)},hq=e=>{e.on("ShowCaret",n=>{zb(e)&&n.preventDefault()}),e.on("ObjectSelected",n=>{zb(e)&&n.preventDefault()})},pq=at.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class pr{static isNative(n){return!!pq[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Xe}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),i=lh(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(i);const u=this.bindings[r];if(u)for(let g=0,y=u.length;g<y;g++){const x=u[g];if(!x.removed){if(x.once&&this.off(r,x.func),i.isImmediatePropagationStopped())return i;if(x.func.call(this.scope,i)===!1)return i.preventDefault(),i}}return i}on(n,o,r,i){if(o===!1&&(o=Xe),o){const u={func:o,removed:!1};i&&at.extend(u,i);const g=n.toLowerCase().split(" ");let y=g.length;for(;y--;){const x=g[y];let A=this.bindings[x];A||(A=[],this.toggleEvent(x,!0)),r?A=[u,...A]:A=[...A,u],this.bindings[x]=A}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let i=r.length;for(;i--;){const u=r[i];let g=this.bindings[u];if(!u)return Ct(this.bindings,(y,x)=>{this.toggleEvent(x,!1),delete this.bindings[x]}),this;if(g){if(!o)g.length=0;else{const y=ws(g,x=>x.func===o);g=y.fail,this.bindings[u]=g,$e(y.pass,x=>{x.removed=!0})}g.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else Ct(this.bindings,(r,i)=>{this.toggleEvent(i,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const g2=e=>(e._eventDispatcher||(e._eventDispatcher=new pr({scope:e,toggleEvent:(n,o)=>{pr.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),cM={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return lh(e.toLowerCase(),n??{},r);const i=g2(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!i.isPropagationStopped();)u.dispatch(e,i,!1),u=u.parent?u.parent():void 0}return i},on(e,n,o){return g2(this).on(e,n,o)},off(e,n){return g2(this).off(e,n)},once(e,n){return g2(this).once(e,n)},hasEventListeners(e){return g2(this).has(e)}},Sy=jo.DOM;let Op;const xy=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=Wm(e);return o?(e.eventRoot||(e.eventRoot=Sy.select(o)[0]),e.eventRoot):e.getBody()},bq=e=>!e.hidden&&!zb(e),_6=(e,n,o)=>{bq(e)?e.dispatch(n,o):zb(e)&&iM(e,o)},k6=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=xy(e,n);if(Wm(e)){if(Op||(Op={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Op&&(Ct(Op,(i,u)=>{e.dom.unbind(xy(e,u))}),Op=null)})),Op[n])return;const r=i=>{const u=i.target,g=e.editorManager.get();let y=g.length;for(;y--;){const x=g[y].getBody();(x===u||Sy.isChildOf(u,x))&&_6(g[y],n,i)}};Op[n]=r,Sy.bind(o,n,r)}else{const r=i=>{_6(e,n,i)};Sy.bind(o,n,r),e.delegates[n]=r}},O6={...cM,bindPendingEventDelegates(){const e=this;at.each(e._pendingNativeEvents,n=>{k6(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?k6(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(xy(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(Ct(e.delegates,(r,i)=>{e.dom.unbind(xy(e,i),i,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},vq=e=>Q(e)?{value:e.split(/[ ,]/),valid:!0}:An(e,Q)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},yq=e=>{const n=(()=>{switch(e){case"array":return _t;case"boolean":return ut;case"function":return ue;case"number":return Fn;case"object":return Ge;case"string":return Q;case"string[]":return vq;case"object[]":return o=>An(o,Ge);case"regexp":return o=>ze(o,RegExp);default:return yt}})();return o=>wu(o,n,`The value must be a ${e}.`)},wq=e=>Q(e.processor),A6=(e,n)=>{const o=sa(n.message)?"":`. ${n.message}`;return e+o},Vb=e=>e.valid,wu=(e,n,o="")=>{const r=n(e);return ut(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},Cq=(e,n,o)=>{if(!bt(n)){const r=wu(n,o);if(Vb(r))return r.value;console.error(A6(`Invalid default value passed for the "${e}" option`,r))}},Sq=(e,n)=>{const o={},r={},i=(F,V,J)=>{const ne=wu(V,J);return Vb(ne)?(r[F]=ne.value,!0):(console.warn(A6(`Invalid value passed for the ${F} option`,ne)),!1)},u=(F,V)=>{const J=wq(V)?yq(V.processor):V.processor,ne=Cq(F,V.default,J);o[F]={...V,default:ne,processor:J},Lo(r,F).orThunk(()=>Lo(n,F)).each(oe=>i(F,oe,J))},g=F=>cn(o,F);return{register:u,isRegistered:g,get:F=>Lo(r,F).orThunk(()=>Lo(o,F).map(V=>V.default)).getOrUndefined(),set:(F,V)=>{if(g(F)){const J=o[F];return J.immutable?(console.error(`"${F}" is an immutable option and cannot be updated`),!1):i(F,V,J.processor)}else return console.warn(`"${F}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:F=>{const V=g(F);return V&&delete r[F],V},isSet:F=>cn(r,F)}},xq=["design","readonly"],D6=(e,n,o,r)=>{const i=o[n.get()],u=o[r];try{u.activate()}catch(g){console.error(`problem while activating editor mode ${r}:`,g);return}i.deactivate(),i.editorReadOnly!==u.editorReadOnly&&mk(e,u.editorReadOnly),n.set(r),BC(e,r)},Eq=(e,n,o,r)=>{if(r!==o.get()){if(!cn(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?D6(e,o,n,r):e.on("init",()=>D6(e,o,n,r))}},Tq=(e,n,o)=>{if(on(xq,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},_q=e=>{const n=Ts("design"),o=Ts({design:{activate:Dt,deactivate:Dt,editorReadOnly:!1},readonly:{activate:Dt,deactivate:Dt,editorReadOnly:!0}});return dq(e),hq(e),{isReadOnly:()=>zb(e),set:r=>Eq(e,o.get(),n,r),get:()=>n.get(),register:(r,i)=>{o.set(Tq(o.get(),r,i))}}},lM=at.each,uM=at.explode,UY={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},R6=at.makeMap("alt,ctrl,shift,meta,access"),kq=e=>e in R6,Oq=e=>{const n={},o=Et.os.isMacOS()||Et.os.isiOS();lM(uM(e.toLowerCase(),"+"),u=>{kq(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=UY[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let i;for(i in R6)n[i]?r.push(i):n[i]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class M6{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(lM(o.shortcuts,i=>{o.matchShortcut(r,i)&&(o.pendingPatterns=i.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(i))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,i){const u=this,g=u.normalizeCommandFunc(r);return lM(uM(at.trim(n)),y=>{const x=u.createShortcut(y,o,g,i);u.shortcuts[x.id]=x}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:at.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,i){const u=at.map(uM(n,">"),Oq);return u[u.length-1]=at.extend(u[u.length-1],{func:r,scope:i||this.editor}),at.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const Aq=()=>{const e={},n={},o={},r={},i={},u={},g={},y={},x=(I,F)=>(V,J)=>{I[V.toLowerCase()]={...J,type:F}},A=(I,F)=>r[I.toLowerCase()]=F;return{addButton:x(e,"button"),addGroupToolbarButton:x(e,"grouptoolbarbutton"),addToggleButton:x(e,"togglebutton"),addMenuButton:x(e,"menubutton"),addSplitButton:x(e,"splitbutton"),addMenuItem:x(n,"menuitem"),addNestedMenuItem:x(n,"nestedmenuitem"),addToggleMenuItem:x(n,"togglemenuitem"),addAutocompleter:x(o,"autocompleter"),addContextMenu:x(i,"contextmenu"),addContextToolbar:x(u,"contexttoolbar"),addContextForm:x(u,"contextform"),addSidebar:x(g,"sidebar"),addView:x(y,"views"),addIcon:A,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:i,contextToolbars:u,sidebars:g,views:y})}},Dq=()=>{const e=Aq();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},Ey=jo.DOM,P6=at.extend,Rq=at.each;class fk{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,P6(this,O6);const i=this;this.id=n,this.hidden=!1;const u=$G(r.defaultOptions,o);this.options=Sq(i,u),px(i);const g=this.options.get;g("deprecation_warnings")&&cY(o,u);const y=g("suffix");y&&(r.suffix=y),this.suffix=r.suffix;const x=g("base_url");x&&r._setBaseUrl(x),this.baseUri=r.baseURI;const A=Rn(i);A&&(gr.ScriptLoader._setReferrerPolicy(A),jo.DOM.styleSheetLoader._setReferrerPolicy(A));const I=Oh(i);Te(I)&&jo.DOM.styleSheetLoader._setContentCssCors(I),La.languageLoad=g("language_load"),La.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new pu(Ww(i),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=eC(i),this.hasVisual=$O(i),this.shortcuts=new M6(this),this.editorCommands=new rM(this),uk(this);const F=g("cache_suffix");F&&(Et.cacheSuffix=F.replace(/^[\?\&]+/,"")),this.ui={registry:Dq(),styleSheetLoader:void 0,show:Dt,hide:Dt,setEnabled:Dt,isEnabled:yt},this.mode=_q(i),r.dispatch("SetupEditor",{editor:this});const V=tC(i);ue(V)&&V.call(i,i)}render(){JR(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return Qh(this)}translate(n){return wl.translate(n)}getParam(n,o,r){const i=this.options;return i.isRegistered(n)||(Te(r)?i.register(n,{processor:r,default:o}):i.register(n,{processor:yt,default:o})),!i.isSet(n)&&!bt(o)?o:i.get(n)}hasPlugin(n,o){return on(I1(this),n)?o?_b.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,i){this.shortcuts.add(n,o,r,i)}execCommand(n,o,r,i){return this.editorCommands.execCommand(n,o,r,i)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(Ey.show(n.getContainer()),Ey.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(Ey.hide(n.getContainer()),Ey.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const i={...n,load:!0},u=hv(r)?r.value:r.innerHTML,g=o.setContent(u,i);return i.no_events||o.dispatch("LoadContent",{...i,element:r}),g}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const i={...n,save:!0,element:r};let u=o.getContent(i);const g={...i,content:u};if(g.no_events||o.dispatch("SaveContent",g),g.format==="raw"&&o.dispatch("RawSaveContent",g),u=g.content,hv(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const y=Ey.getParent(o.id,"form");y&&Rq(y.elements,x=>x.name===o.id?(x.value=u,!1):!0)}return g.element=i.element=r=null,g.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return BD(this,n,o)}getContent(n){return O$(this,n)}insertContent(n,o){o&&(n=P6({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?BD(this,this.startContent,{format:"raw"}):BD(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||Ey.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Ey.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const i=this,u=i.options.get,g=HO(i);if(ue(g))return g.call(i,n,r,!0,o);if(!u("convert_urls")||r==="link"||Ge(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const y=new pu(n);return y.protocol!=="http"&&y.protocol!=="https"&&y.protocol!==""?n:u("relative_urls")?i.documentBaseURI.toRelative(n):(n=i.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){IG(this,n)}setEditableRoot(n){ak(this,n)}hasEditableRoot(){return ik(this)}remove(){hV(this)}destroy(n){pV(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Ty=jo.DOM,gk=at.each;let N6=!1,hk,Oc=[];const pk=e=>{const n=e.type;gk(Ap.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},B6=e=>{if(e!==N6){const n=jo.DOM;e?(n.bind(window,"resize",pk),n.bind(window,"scroll",pk)):(n.unbind(window,"resize",pk),n.unbind(window,"scroll",pk)),N6=e}},$6=e=>{const n=Oc;return Oc=jt(Oc,o=>e!==o),Ap.activeEditor===e&&(Ap.activeEditor=Oc.length>0?Oc[0]:null),Ap.focusedEditor===e&&(Ap.focusedEditor=null),n.length!==Oc.length},Mq=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&($6(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},Pq=document.compatMode!=="CSS1Compat",Ap={...cM,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"8.6",releaseDate:"TBD",i18n:wl,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=pu.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const i=window.tinymce||window.tinyMCEPreInit;if(i)n=i.base||i.baseURL,o=i.suffix;else{const u=document.getElementsByTagName("script");for(let g=0;g<u.length;g++){const y=u[g].src||"";if(y==="")continue;const x=y.substring(y.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(y)){x.indexOf(".min")!==-1&&(o=".min"),n=y.substring(0,y.lastIndexOf("/"));break}}if(!n&&document.currentScript){const g=document.currentScript.src;g.indexOf(".min")!==-1&&(o=".min"),n=g.substring(0,g.lastIndexOf("/"))}}e.baseURL=new pu(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new pu(e.baseURL),e.suffix=o,Z8(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&Ct(r,(i,u)=>{La.PluginManager.urls[u]=i})},init(e){const n=this;let o;const r=at.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),i=(I,F)=>I.inline&&F.tagName.toLowerCase()in r,u=I=>{let F=I.id;return F||(F=Lo(I,"name").filter(V=>!Ty.get(V)).getOrThunk(Ty.uniqueId),I.setAttribute("id",F)),F},g=I=>{const F=e[I];if(F)return F.apply(n,[])},y=I=>Et.browser.isIE()||Et.browser.isEdge()?(DS("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):Pq?(DS("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):Q(I.selector)?Ty.select(I.selector):Te(I.target)?[I.target]:[];let x=I=>{o=I};const A=()=>{let I=0;const F=[];let V;const J=(ne,Y,oe)=>{const he=new fk(ne,Y,n);F.push(he),he.on("init",()=>{++I===V.length&&x(F)}),he.targetElm=he.targetElm||oe,he.render()};Ty.unbind(window,"ready",A),g("onpageload"),V=Sd(y(e)),at.each(V,ne=>{Mq(n.get(ne.id))}),V=at.grep(V,ne=>!n.get(ne.id)),V.length===0?x([]):gk(V,ne=>{i(e,ne)?DS("Could not initialize inline editor on invalid inline target element",ne):J(u(ne),e,ne)})};return Ty.bind(window,"ready",A),new Promise(I=>{o?I(o):x=F=>{I(F)}})},get(e){return arguments.length===0?Oc.slice(0):Q(e)?As(Oc,n=>n.id===e).getOr(null):Fn(e)&&Oc[e]?Oc[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&Oc.push(e),B6(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),hk||(hk=r=>{const i=n.dispatch("BeforeUnload");if(i.returnValue)return r.preventDefault(),r.returnValue=i.returnValue,i.returnValue},window.addEventListener("beforeunload",hk))),e},createEditor(e,n){return this.add(new fk(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=Oc.length-1;r>=0;r--)n.remove(Oc[r]);return}if(Q(e)){gk(Ty.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,ae(n.get(o.id))?null:($6(o)&&n.dispatch("RemoveEditor",{editor:o}),Oc.length===0&&window.removeEventListener("beforeunload",hk),o.remove(),B6(Oc.length>0),o)},execCommand(e,n,o){var r;const i=this,u=Ge(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!i.get(u)){const g=o.options;new fk(u,g,i).render()}return!0}case"mceRemoveEditor":{const g=i.get(u);return g&&g.remove(),!0}case"mceToggleEditor":{const g=i.get(u);return g?(g.isHidden()?g.show():g.hide(),!0):(i.execCommand("mceAddEditor",!1,o),!0)}}return i.activeEditor?i.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{gk(Oc,e=>{e.save()})},addI18n:(e,n)=>{wl.add(e,n)},translate:e=>wl.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new pu(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new pu(this.baseURL)}};Ap.setup();const Nq=(()=>{const e=Lm(),n=u=>({items:u,types:Rr(u),getType:g=>Lo(u,g).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),i=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:i}})(),dM=Math.min,_y=Math.max,bk=Math.round,I6=(e,n,o)=>{let r=n.x,i=n.y;const u=e.w,g=e.h,y=n.w,x=n.h,A=(o||"").split("");return A[0]==="b"&&(i+=x),A[1]==="r"&&(r+=y),A[0]==="c"&&(i+=bk(x/2)),A[1]==="c"&&(r+=bk(y/2)),A[3]==="b"&&(i-=g),A[4]==="r"&&(r-=u),A[3]==="c"&&(i-=bk(g/2)),A[4]==="c"&&(r-=bk(u/2)),ky(r,i,u,g)},Bq=(e,n,o,r)=>{for(let i=0;i<r.length;i++){const u=I6(e,n,r[i]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[i]}return null},$q=(e,n,o)=>ky(e.x-n,e.y-o,e.w+n*2,e.h+o*2),Iq=(e,n)=>{const o=_y(e.x,n.x),r=_y(e.y,n.y),i=dM(e.x+e.w,n.x+n.w),u=dM(e.y+e.h,n.y+n.h);return i-o<0||u-r<0?null:ky(o,r,i-o,u-r)},Fq=(e,n,o)=>{let r=e.x,i=e.y,u=e.x+e.w,g=e.y+e.h;const y=n.x+n.w,x=n.y+n.h,A=_y(0,n.x-r),I=_y(0,n.y-i),F=_y(0,u-y),V=_y(0,g-x);return r+=A,i+=I,o&&(u+=A,g+=I,r-=F,i-=V),u-=F,g-=V,ky(r,i,u-r,g-i)},ky=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),Hq={inflate:$q,relativePosition:I6,findBestRelativePosition:Bq,intersect:Iq,clamp:Fq,create:ky,fromClientRect:e=>ky(e.left,e.top,e.width,e.height)},zq=(e,n,o=1e3)=>{let r=!1,i=null;const u=A=>(...I)=>{r||(r=!0,i!==null&&(clearTimeout(i),i=null),A.apply(null,I))},g=u(e),y=u(n);return{start:(...A)=>{!r&&i===null&&(i=setTimeout(()=>y.apply(null,A),o))},resolve:g,reject:y}},Vq=(()=>{const e={},n={},o={};return{load:(x,A)=>{const I=`Script at URL "${A}" failed to load`,F=`Script at URL "${A}" did not call \`tinymce.Resource.add('${x}', data)\` within 1 second`;if(e[x]!==void 0)return e[x];{const V=new Promise((J,ne)=>{const Y=zq(J,ne);n[x]=Y.resolve,gr.ScriptLoader.loadScript(A).then(()=>Y.start(F),()=>Y.reject(I))});return e[x]=V,V}},add:(x,A)=>{n[x]!==void 0&&(n[x](A),delete n[x]),e[x]=Promise.resolve(A),o[x]=A},has:x=>x in o,get:x=>o[x],unload:x=>{delete e[x]}}})(),Uq=()=>(()=>{let e={},n=[];const o={getItem:r=>{const i=e[r];return i||null},setItem:(r,i)=>{n.push(r),e[r]=String(i)},key:r=>n[r],removeItem:r=>{n=n.filter(i=>i===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let h2;try{const e="__storage_test__";h2=window.localStorage,h2.setItem(e,e),h2.removeItem(e)}catch{h2=Uq()}var Wq=h2;const Zq={geom:{Rect:Hq},util:{Delay:_l,Tools:at,VK:At,URI:pu,EventDispatcher:pr,Observable:cM,I18n:wl,LocalStorage:Wq,ImageUploader:NV},dom:{EventUtils:Ji,TreeWalker:Zo,TextSeeker:Hm,DOMUtils:jo,ScriptLoader:gr,RangeUtils:q,Serializer:_$,StyleSheetLoader:dw,ControlSelection:lP,BookmarkManager:ug,Selection:mp,Event:Ji.Event},html:{Styles:Av,Entities:qf,Node:ki,Schema:zd,DomParser:cd,Writer:NP,Serializer:ep},Env:Et,AddOnManager:La,Annotator:MC,Formatter:UD,UndoManager:WD,EditorCommands:rM,WindowManager:$$,NotificationManager:FD,EditorObservable:O6,Shortcuts:M6,Editor:fk,FocusManager:gP,EditorManager:Ap,DOM:jo.DOM,ScriptLoader:gr.ScriptLoader,PluginManager:_b,ThemeManager:Eg,ModelManager:vu,IconManager:kS,Resource:Vq,FakeClipboard:Nq,trim:at.trim,isArray:at.isArray,is:at.is,toArray:at.toArray,makeMap:at.makeMap,each:at.each,map:at.map,grep:at.grep,inArray:at.inArray,extend:at.extend,walk:at.walk,resolve:at.resolve,explode:at.explode,_addCacheSuffix:at._addCacheSuffix},mM=at.extend(Ap,Zq),jY=e=>{try{w.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(mM),jY(mM)})()})(eQ);var qoe=eQ.exports;const IK=WM(qoe);tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){const w=Object.getPrototypeOf,f=(t,s,a)=>{var c;return a(t,s.prototype)?!0:((c=t.constructor)===null||c===void 0?void 0:c.name)===s.name},p=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&f(t,String,(a,c)=>c.isPrototypeOf(a))?"string":s},C=t=>s=>p(s)===t,_=t=>s=>typeof s===t,P=t=>s=>t===s,N=(t,s)=>G(t)&&f(t,s,(a,c)=>w(a)===c),z=C("string"),G=C("object"),te=t=>N(t,Object),ie=C("array"),me=P(null),xe=_("boolean"),Fe=P(void 0),ve=t=>t==null,je=t=>!ve(t),He=_("function"),Zt=_("number"),ze=(t,s)=>{if(ie(t)){for(let a=0,c=t.length;a<c;++a)if(!s(t[a]))return!1;return!0}return!1},Q=()=>{},Ge=t=>()=>t(),gn=(t,s)=>(...a)=>t(s.apply(null,a)),_t=(t,s)=>a=>t(s(a)),ae=t=>()=>t,ut=t=>t,bt=(t,s)=>t===s;function It(t,...s){return(...a)=>{const c=s.concat(a);return t.apply(null,c)}}const Te=t=>s=>!t(s),ue=t=>()=>{throw new Error(t)},Fn=t=>t(),An=ae(!1),Dt=ae(!0);class R{constructor(s,a){this.tag=s,this.value=a}static some(s){return new R(!0,s)}static none(){return R.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?R.some(s(this.value)):R.none()}bind(s){return this.tag?s(this.value):R.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:R.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return je(s)?R.some(s):R.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}R.singletonNone=new R(!1);const fo=Array.prototype.slice,ft=Array.prototype.indexOf,Eo=Array.prototype.push,Jt=(t,s)=>ft.call(t,s),qe=(t,s)=>{const a=Jt(t,s);return a===-1?R.none():R.some(a)},go=(t,s)=>Jt(t,s)>-1,qs=(t,s)=>{for(let a=0,c=t.length;a<c;a++){const d=t[a];if(s(d,a))return!0}return!1},Xo=(t,s)=>{const a=[];for(let c=0;c<t;c++)a.push(s(c));return a},ar=(t,s)=>{const a=[];for(let c=0;c<t.length;c+=s){const d=fo.call(t,c,c+s);a.push(d)}return a},Xe=(t,s)=>{const a=t.length,c=new Array(a);for(let d=0;d<a;d++){const h=t[d];c[d]=s(h,d)}return c},yt=(t,s)=>{for(let a=0,c=t.length;a<c;a++){const d=t[a];s(d,a)}},Z=(t,s)=>{for(let a=t.length-1;a>=0;a--){const c=t[a];s(c,a)}},di=(t,s)=>{const a=[],c=[];for(let d=0,h=t.length;d<h;d++){const v=t[d];(s(v,d)?a:c).push(v)}return{pass:a,fail:c}},vo=(t,s)=>{const a=[];for(let c=0,d=t.length;c<d;c++){const h=t[c];s(h,c)&&a.push(h)}return a},ds=(t,s,a)=>(Z(t,(c,d)=>{a=s(a,c,d)}),a),To=(t,s,a)=>(yt(t,(c,d)=>{a=s(a,c,d)}),a),Sf=(t,s,a)=>{for(let c=0,d=t.length;c<d;c++){const h=t[c];if(s(h,c))return R.some(h);if(a(h,c))break}return R.none()},on=(t,s)=>Sf(t,s,An),Po=(t,s)=>{for(let a=0,c=t.length;a<c;a++){const d=t[a];if(s(d,a))return R.some(a)}return R.none()},zt=t=>{const s=[];for(let a=0,c=t.length;a<c;++a){if(!ie(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);Eo.apply(s,t[a])}return s},$e=(t,s)=>zt(Xe(t,s)),eo=(t,s)=>{for(let a=0,c=t.length;a<c;++a){const d=t[a];if(s(d,a)!==!0)return!1}return!0},ws=t=>{const s=fo.call(t,0);return s.reverse(),s},jt=(t,s)=>vo(t,a=>!go(s,a)),Il=(t,s)=>{const a={};for(let c=0,d=t.length;c<d;c++){const h=t[c];a[String(h)]=s(h,c)}return a},as=t=>[t],Tu=(t,s)=>{const a=fo.call(t,0);return a.sort(s),a},As=(t,s)=>s>=0&&s<t.length?R.some(t[s]):R.none(),ea=t=>As(t,0),bm=t=>As(t,t.length-1),Ya=He(Array.from)?Array.from:t=>fo.call(t),tr=(t,s)=>{for(let a=0;a<t.length;a++){const c=s(t[a],a);if(c.isSome())return c}return R.none()},os=Object.keys,Cd=Object.hasOwnProperty,Jo=(t,s)=>{const a=os(t);for(let c=0,d=a.length;c<d;c++){const h=a[c],v=t[h];s(v,h)}},Qo=(t,s)=>sl(t,(a,c)=>({k:c,v:s(a,c)})),sl=(t,s)=>{const a={};return Jo(t,(c,d)=>{const h=s(c,d);a[h.k]=h.v}),a},Ks=t=>(s,a)=>{t[a]=s},$i=(t,s,a,c)=>{Jo(t,(d,h)=>{(s(d,h)?a:c)(d,h)})},Dr=(t,s)=>{const a={},c={};return $i(t,s,Ks(a),Ks(c)),{t:a,f:c}},Mc=(t,s)=>{const a={};return $i(t,s,Ks(a),Q),a},Sd=(t,s)=>{const a=[];return Jo(t,(c,d)=>{a.push(s(c,d))}),a},Rr=(t,s)=>{const a=os(t);for(let c=0,d=a.length;c<d;c++){const h=a[c],v=t[h];if(s(v,h,t))return R.some(v)}return R.none()},vm=t=>Sd(t,ut),Ct=(t,s)=>oo(t,s)?R.from(t[s]):R.none(),oo=(t,s)=>Cd.call(t,s),ta=(t,s)=>oo(t,s)&&t[s]!==void 0&&t[s]!==null,Pa=(t,s,a=bt)=>t.exists(c=>a(c,s)),ym=(t,s,a=bt)=>Fi(t,s,a).getOr(t.isNone()&&s.isNone()),Ii=t=>{const s=[],a=c=>{s.push(c)};for(let c=0;c<t.length;c++)t[c].each(a);return s},Wo=t=>{const s=[];for(let a=0;a<t.length;a++){const c=t[a];if(c.isSome())s.push(c.getOrDie());else return R.none()}return R.some(s)},Fi=(t,s,a)=>t.isSome()&&s.isSome()?R.some(a(t.getOrDie(),s.getOrDie())):R.none(),rl=(t,s,a,c)=>t.isSome()&&s.isSome()&&a.isSome()?R.some(c(t.getOrDie(),s.getOrDie(),a.getOrDie())):R.none(),Lo=(t,s)=>t!=null?R.some(s(t)):R.none(),cn=(t,s)=>t?R.some(s):R.none(),va=(t,s)=>t+s,al=(t,s)=>t.substring(s),Fl=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,wm=(t,s)=>Ds(t,s)?al(t,s.length):t,na=(t,s)=>Li(t,s)?t:va(t,s),ir=(t,s,a=0,c)=>{const d=t.indexOf(s,a);return d!==-1?Fe(c)?!0:d+s.length<=c:!1},Ds=(t,s)=>Fl(t,s,0),Li=(t,s)=>Fl(t,s,t.length-s.length),il=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),Na=t=>t.length>0,Cs=t=>!Na(t),Xa=t=>t.style!==void 0&&He(t.style.getPropertyValue),Ll=(t,s)=>{const c=(s||document).createElement("div");if(c.innerHTML=t,!c.hasChildNodes()||c.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return Pc(c.childNodes[0])},Zp=(t,s)=>{const c=(s||document).createElement(t);return Pc(c)},_u=(t,s)=>{const c=(s||document).createTextNode(t);return Pc(c)},Pc=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},Ce={fromHtml:Ll,fromTag:Zp,fromText:_u,fromDom:Pc,fromPoint:(t,s,a)=>R.from(t.dom.elementFromPoint(s,a)).map(Pc)},oa=typeof window<"u"?window:Function("return this;")(),Hl=(t,s)=>{let a=s??oa;for(let c=0;c<t.length&&a!==void 0&&a!==null;++c)a=a[t[c]];return a},xf=(t,s)=>{const a=t.split(".");return Hl(a,s)},xd=(t,s)=>xf(t,s),Ho=(t,s)=>{const a=xd(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},$g=Object.getPrototypeOf,Ef=t=>Ho("HTMLElement",t),ku=t=>{const s=xf("ownerDocument.defaultView",t);return G(t)&&(Ef(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test($g(t).constructor.name))},Ed=9,yr=11,$s=1,Ja=3,Qa=t=>t.dom.nodeName.toLowerCase(),zl=t=>t.dom.nodeType,Td=t=>s=>zl(s)===t,Ou=t=>yo(t)&&ku(t.dom),yo=Td($s),sa=Td(Ja),ic=Td(Ed),cl=Td(yr),mi=t=>s=>yo(s)&&Qa(s)===t,Ys=(t,s)=>{const a=t.dom;if(a.nodeType!==$s)return!1;{const c=a;if(c.matches!==void 0)return c.matches(s);if(c.msMatchesSelector!==void 0)return c.msMatchesSelector(s);if(c.webkitMatchesSelector!==void 0)return c.webkitMatchesSelector(s);if(c.mozMatchesSelector!==void 0)return c.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},es=t=>t.nodeType!==$s&&t.nodeType!==Ed&&t.nodeType!==yr||t.childElementCount===0,ya=(t,s)=>{const a=s===void 0?document:s.dom;return es(a)?[]:Xe(a.querySelectorAll(t),Ce.fromDom)},Tf=(t,s)=>{const a=s===void 0?document:s.dom;return es(a)?R.none():R.from(a.querySelector(t)).map(Ce.fromDom)},So=(t,s)=>t.dom===s.dom,Hr=(t,s)=>{const a=t.dom,c=s.dom;return a===c?!1:a.contains(c)},Ba=t=>Ce.fromDom(t.dom.ownerDocument),cr=t=>ic(t)?t:Ba(t),Nc=t=>Ce.fromDom(cr(t).dom.documentElement),Bc=t=>Ce.fromDom(cr(t).dom.defaultView),ra=t=>R.from(t.dom.parentNode).map(Ce.fromDom),$c=t=>ra(t),Hi=t=>R.from(t.dom.parentElement).map(Ce.fromDom),Ig=(t,s)=>{const a=He(s)?s:An;let c=t.dom;const d=[];for(;c.parentNode!==null&&c.parentNode!==void 0;){const h=c.parentNode,v=Ce.fromDom(h);if(d.push(v),a(v)===!0)break;c=h}return d},Ic=t=>R.from(t.dom.offsetParent).map(Ce.fromDom),Fg=t=>R.from(t.dom.nextSibling).map(Ce.fromDom),fi=t=>Xe(t.dom.childNodes,Ce.fromDom),Vl=(t,s)=>{const a=t.dom.childNodes;return R.from(a[s]).map(Ce.fromDom)},_f=t=>Vl(t,0),kf=(t,s)=>({element:t,offset:s}),Lg=(t,s)=>{const a=fi(t);return a.length>0&&s<a.length?kf(a[s],0):kf(t,s)},K=t=>cl(t)&&je(t.dom.host),de=He(Element.prototype.attachShadow)&&He(Node.prototype.getRootNode),we=ae(de),Be=de?t=>Ce.fromDom(t.dom.getRootNode()):cr,ot=t=>K(t)?t:Ce.fromDom(cr(t).dom.body),an=t=>Do(t).isSome(),Do=t=>{const s=Be(t);return K(s)?R.some(s):R.none()},ts=t=>Ce.fromDom(t.dom.host),_o=t=>{if(we()&&je(t.target)){const s=Ce.fromDom(t.target);if(yo(s)&&ms(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return ea(a)}}return R.from(t.target)},ms=t=>je(t.dom.shadowRoot),Xn=t=>{const s=sa(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return Do(Ce.fromDom(s)).fold(()=>a.body.contains(s),_t(Xn,ts))},Rs=()=>ei(Ce.fromDom(document)),ei=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return Ce.fromDom(s)},Hg=(t,s,a)=>{if(z(a)||xe(a)||Zt(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},Et=(t,s,a)=>{Hg(t.dom,s,a)},Of=(t,s)=>{const a=t.dom;Jo(s,(c,d)=>{Hg(a,d,c)})},Ms=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},zr=(t,s)=>R.from(Ms(t,s)),Gp=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},Ss=(t,s)=>{t.dom.removeAttribute(s)},Vy=t=>To(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),Ul=(t,s,a)=>{if(!z(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);Xa(t)&&t.style.setProperty(s,a)},Af=(t,s)=>{Xa(t)&&t.style.removeProperty(s)},vn=(t,s,a)=>{const c=t.dom;Ul(c,s,a)},ti=(t,s)=>{const a=t.dom;Jo(s,(c,d)=>{Ul(a,d,c)})},at=(t,s)=>{const a=t.dom;Jo(s,(c,d)=>{c.fold(()=>{Af(a,d)},h=>{Ul(a,d,h)})})},Ps=(t,s)=>{const a=t.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!Xn(t)?Df(a,s):d},Df=(t,s)=>Xa(t)?t.style.getPropertyValue(s):"",Xs=(t,s)=>{const a=t.dom,c=Df(a,s);return R.from(c).filter(d=>d.length>0)},Mr=t=>{const s={},a=t.dom;if(Xa(a))for(let c=0;c<a.style.length;c++){const d=a.style.item(c);s[d]=a.style[d]}return s},Wl=(t,s,a)=>{const c=Ce.fromTag(t);return vn(c,s,a),Xs(c,s).isSome()},to=(t,s)=>{const a=t.dom;Af(a,s),Pa(zr(t,"style").map(il),"")&&Ss(t,"style")},gi=t=>t.dom.offsetWidth,wr=(t,s)=>{const a=(E,T)=>{if(!Zt(T)&&!T.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+T);const D=E.dom;Xa(D)&&(D.style[t]=T+"px")},c=E=>{const T=s(E);if(T<=0||T===null){const D=Ps(E,t);return parseFloat(D)||0}return T},d=c,h=(E,T)=>To(T,(D,B)=>{const L=Ps(E,B),U=L===void 0?0:parseInt(L,10);return isNaN(U)?D:D+U},0);return{set:a,get:c,getOuter:d,aggregate:h,max:(E,T,D)=>{const B=h(E,D);return T>B?T-B:0}}},_d=wr("height",t=>{const s=t.dom;return Xn(t)?s.getBoundingClientRect().height:s.offsetHeight}),fs=t=>_d.get(t),kd=t=>_d.getOuter(t),qp=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],c=_d.max(t,s,a);vn(t,"max-height",c+"px")},Kp=(t,s)=>({left:t,top:s,translate:(c,d)=>Kp(t+c,s+d)}),co=Kp,Yp=t=>{const s=t.getBoundingClientRect();return co(s.left,s.top)},Au=(t,s)=>t!==void 0?t:s!==void 0?s:0,cc=t=>{const s=t.dom.ownerDocument,a=s.body,c=s.defaultView,d=s.documentElement;if(a===t.dom)return co(a.offsetLeft,a.offsetTop);const h=Au(c==null?void 0:c.pageYOffset,d.scrollTop),v=Au(c==null?void 0:c.pageXOffset,d.scrollLeft),E=Au(d.clientTop,a.clientTop),T=Au(d.clientLeft,a.clientLeft);return Fc(t).translate(v-T,h-E)},Fc=t=>{const s=t.dom,c=s.ownerDocument.body;return c===s?co(c.offsetLeft,c.offsetTop):Xn(t)?Yp(s):co(0,0)},Rf=wr("width",t=>t.dom.offsetWidth),Jn=(t,s)=>Rf.set(t,s),lr=t=>Rf.get(t),$a=t=>Rf.getOuter(t),ev=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],c=Rf.max(t,s,a);vn(t,"max-width",c+"px")},gs=t=>{let s=!1,a;return(...c)=>(s||(s=!0,a=t.apply(null,c)),a)},Vr=(t,s,a,c)=>{const d=t.isiOS()&&/ipad/i.test(a)===!0,h=t.isiOS()&&!d,v=t.isiOS()||t.isAndroid(),E=v||c("(pointer:coarse)"),T=d||!h&&v&&c("(min-device-width:768px)"),D=h||v&&!T,B=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,L=!D&&!T&&!B;return{isiPad:ae(d),isiPhone:ae(h),isTablet:ae(T),isPhone:ae(D),isTouch:ae(E),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:ae(B),isDesktop:ae(L)}},Ur=(t,s)=>{for(let a=0;a<t.length;a++){const c=t[a];if(c.test(s))return c}},tv=(t,s)=>{const a=Ur(t,s);if(!a)return{major:0,minor:0};const c=d=>Number(s.replace(a,"$"+d));return zg(c(1),c(2))},Xp=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?zi():tv(t,a)},zi=()=>zg(0,0),zg=(t,s)=>({major:t,minor:s}),ns={nu:zg,detect:Xp,unknown:zi},Lc=(t,s)=>tr(s.brands,a=>{const c=a.brand.toLowerCase();return on(t,d=>{var h;return c===((h=d.brand)===null||h===void 0?void 0:h.toLowerCase())}).map(d=>({current:d.name,version:ns.nu(parseInt(a.version,10),0)}))}),wa=(t,s)=>{const a=String(s).toLowerCase();return on(t,c=>c.search(a))},ll=(t,s)=>wa(t,s).map(a=>{const c=ns.detect(a.versionRegexes,s);return{current:a.name,version:c}}),Du=(t,s)=>wa(t,s).map(a=>{const c=ns.detect(a.versionRegexes,s);return{current:a.name,version:c}}),Is=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Hc=t=>s=>ir(s,t),Sm=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>ir(t,"edge/")&&ir(t,"chrome")&&ir(t,"safari")&&ir(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Is],search:t=>ir(t,"chrome")&&!ir(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>ir(t,"msie")||ir(t,"trident")},{name:"Opera",versionRegexes:[Is,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Hc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Hc("firefox")},{name:"Safari",versionRegexes:[Is,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(ir(t,"safari")||ir(t,"mobile/"))&&ir(t,"applewebkit")}],Mf=[{name:"Windows",search:Hc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>ir(t,"iphone")||ir(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Hc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Hc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Hc("linux"),versionRegexes:[]},{name:"Solaris",search:Hc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Hc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Hc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],nv={browsers:ae(Sm),oses:ae(Mf)},ov="Edge",ul="Chromium",Vg="IE",ni="Opera",Ug="Firefox",sv="Safari",Ru=()=>Jp({current:void 0,version:ns.unknown()}),Jp=t=>{const s=t.current,a=t.version,c=d=>()=>s===d;return{current:s,version:a,isEdge:c(ov),isChromium:c(ul),isIE:c(Vg),isOpera:c(ni),isFirefox:c(Ug),isSafari:c(sv)}},dl={unknown:Ru,nu:Jp},Uy="Windows",Od="iOS",Wy="Android",Zy="Linux",jy="macOS",Pf="Solaris",Gy="FreeBSD",re="ChromeOS",Mu=()=>Vi({current:void 0,version:ns.unknown()}),Vi=t=>{const s=t.current,a=t.version,c=d=>()=>s===d;return{current:s,version:a,isWindows:c(Uy),isiOS:c(Od),isAndroid:c(Wy),isMacOS:c(jy),isLinux:c(Zy),isSolaris:c(Pf),isFreeBSD:c(Gy),isChromeOS:c(re)}},xm={unknown:Mu,nu:Vi},qy={detect:(t,s,a)=>{const c=nv.browsers(),d=nv.oses(),h=s.bind(T=>Lc(c,T)).orThunk(()=>ll(c,t)).fold(dl.unknown,dl.nu),v=Du(d,t).fold(xm.unknown,xm.nu),E=Vr(v,h,t,a);return{browser:h,os:v,deviceType:E}}},so=t=>window.matchMedia(t).matches;let Ca=gs(()=>qy.detect(navigator.userAgent,R.from(navigator.userAgentData),so));const ml=()=>Ca(),Zl=(t,s,a,c,d,h,v)=>({target:t,x:s,y:a,stop:c,prevent:d,kill:h,raw:v}),Pu=t=>{const s=Ce.fromDom(_o(t).getOr(t.target)),a=()=>t.stopPropagation(),c=()=>t.preventDefault(),d=gn(c,a);return Zl(s,t.clientX,t.clientY,a,c,d,t)},fl=(t,s)=>a=>{t(a)&&s(Pu(a))},aa=(t,s,a,c,d)=>{const h=fl(a,c);return t.dom.addEventListener(s,h,d),{unbind:It(av,t,s,h,d)}},jl=(t,s,a,c)=>aa(t,s,a,c,!1),rv=(t,s,a,c)=>aa(t,s,a,c,!0),av=(t,s,a,c)=>{t.dom.removeEventListener(s,a,c)},zc=(t,s)=>{ra(t).each(c=>{c.dom.insertBefore(s.dom,t.dom)})},gl=(t,s)=>{Fg(t).fold(()=>{ra(t).each(d=>{Sa(d,s)})},c=>{zc(c,s)})},e1=(t,s)=>{_f(t).fold(()=>{Sa(t,s)},c=>{t.dom.insertBefore(s.dom,c.dom)})},Sa=(t,s)=>{t.dom.appendChild(s.dom)},ur=(t,s,a)=>{Vl(t,a).fold(()=>{Sa(t,s)},c=>{zc(c,s)})},Ad=(t,s)=>{yt(s,a=>{Sa(t,a)})},Nf=t=>{t.dom.textContent="",yt(fi(t),s=>{Vc(s)})},Vc=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Ia=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,c=s.body.scrollTop||s.documentElement.scrollTop;return co(a,c)},iv=(t,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(t,s)},Ky=t=>{const s=t===void 0?window:t;return ml().browser.isFirefox()?R.none():R.from(s.visualViewport)},Wg=(t,s,a,c)=>({x:t,y:s,width:a,height:c,right:t+a,bottom:s+c}),Zg=t=>{const s=t===void 0?window:t,a=s.document,c=Ia(Ce.fromDom(a));return Ky(s).fold(()=>{const d=s.document.documentElement,h=d.clientWidth,v=d.clientHeight;return Wg(c.left,c.top,h,v)},d=>Wg(Math.max(d.pageLeft,c.left),Math.max(d.pageTop,c.top),d.width,d.height))},Em=()=>Ce.fromDom(document),hl=(t,s)=>t.view(s).fold(ae([]),c=>{const d=t.owner(c),h=hl(t,d);return[c].concat(h)}),cv=(t,s)=>{const a=s.owner(t),c=hl(s,a);return R.some(c)};var Xy=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?R.none():R.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(Ce.fromDom)},owner:t=>Ba(t)});const Dd=t=>{const s=Em(),a=Ia(s);return cv(t,Xy).fold(It(cc,t),d=>{const h=Fc(t),v=ds(d,(E,T)=>{const D=Fc(T);return{left:E.left+D.left,top:E.top+D.top}},{left:0,top:0});return co(v.left+h.left+a.left,v.top+h.top+a.top)})},t1=(t,s,a)=>({point:t,width:s,height:a}),Tm=(t,s,a,c)=>({x:t,y:s,width:a,height:c}),hs=(t,s,a,c)=>({x:t,y:s,width:a,height:c,right:t+a,bottom:s+c}),xs=t=>{const s=cc(t),a=$a(t),c=kd(t);return hs(s.left,s.top,a,c)},hi=t=>{const s=Dd(t),a=$a(t),c=kd(t);return hs(s.left,s.top,a,c)},n1=(t,s)=>{const a=Math.max(t.x,s.x),c=Math.max(t.y,s.y),d=Math.min(t.right,s.right),h=Math.min(t.bottom,s.bottom),v=d-a,E=h-c;return hs(a,c,v,E)},Jy=(t,s)=>To(s,(a,c)=>n1(a,c),t),Wr=()=>Zg(window);var Nu=tinymce.util.Tools.resolve("tinymce.ThemeManager");const pi=t=>{const s=h=>h(t),a=ae(t),c=()=>d,d={tag:!0,inner:t,fold:(h,v)=>v(t),isValue:Dt,isError:An,map:h=>xn.value(h(t)),mapError:c,bind:s,exists:s,forall:s,getOr:a,or:c,getOrThunk:a,orThunk:c,getOrDie:a,each:h=>{h(t)},toOptional:()=>R.some(t)};return d},pl=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(c,d)=>c(t),isValue:An,isError:Dt,map:s,mapError:c=>xn.error(c(t)),bind:s,exists:An,forall:Dt,getOr:ut,or:ut,getOrThunk:Fn,orThunk:Fn,getOrDie:ue(String(t)),each:Q,toOptional:R.none};return a},xn={value:pi,error:pl,fromOption:(t,s)=>t.fold(()=>pl(s),pi)};var oi;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(oi||(oi={}));const Bu=(t,s,a)=>t.stype===oi.Error?s(t.serror):a(t.svalue),_m=t=>{const s=[],a=[];return yt(t,c=>{Bu(c,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},o1=(t,s)=>t.stype===oi.Error?{stype:oi.Error,serror:s(t.serror)}:t,uv=(t,s)=>t.stype===oi.Value?{stype:oi.Value,svalue:s(t.svalue)}:t,xa=(t,s)=>t.stype===oi.Value?s(t.svalue):t,nr=(t,s)=>t.stype===oi.Error?s(t.serror):t,bi=t=>({stype:oi.Value,svalue:t}),or=t=>({stype:oi.Error,serror:t}),Hs={fromResult:t=>t.fold(or,bi),toResult:t=>Bu(t,xn.error,xn.value),svalue:bi,partition:_m,serror:or,bind:xa,bindError:nr,map:uv,mapError:o1,fold:Bu},dr=(t,s,a,c)=>({tag:"field",key:t,newKey:s,presence:a,prop:c}),Uc=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),Bf=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},Js=(t,s)=>s,s1=(t,s)=>te(t)&&te(s)?ko(t,s):s,dv=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let c=0;c<s.length;c++){const d=s[c];for(const h in d)oo(d,h)&&(a[h]=t(a[h],d[h]))}return a},ko=dv(s1),Rd=dv(Js),ho=()=>({tag:"required",process:{}}),Wc=t=>({tag:"defaultedThunk",process:t}),Gg=t=>Wc(ae(t)),$f=()=>({tag:"option",process:{}}),Nn=t=>({tag:"mergeWithThunk",process:t}),Om=t=>Nn(ae(t)),mv=(t,s)=>t.length>0?Hs.svalue(ko(s,Rd.apply(void 0,t))):Hs.svalue(s),r1=t=>gn(Hs.serror,zt)(t),fv={consolidateObj:(t,s)=>{const a=Hs.partition(t);return a.errors.length>0?r1(a.errors):mv(a.values,s)},consolidateArr:t=>{const s=Hs.partition(t);return s.errors.length>0?r1(s.errors):Hs.svalue(s.values)}},qg=t=>G(t)&&os(t).length>100?" removed due to size":JSON.stringify(t,null,2),a1=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:ae("... (only showing first ten failures)")}]):t;return Xe(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},k=(t,s)=>Hs.serror([{path:t,getErrorInfo:s}]),$=(t,s,a)=>k(t,()=>'Could not find valid *required* value for "'+s+'" in '+qg(a)),W=(t,s)=>k(t,()=>'Choice schema did not contain choice key: "'+s+'"'),se=(t,s,a)=>k(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+qg(s)),fe=(t,s)=>k(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),tt=(t,s)=>k(t,ae(s)),Ft=t=>{const s=(c,d)=>Hs.bindError(t(d),h=>tt(c,h)),a=ae("val");return{extract:s,toString:a}},bn=Ft(Hs.svalue),pn=(t,s,a,c)=>Ct(s,a).fold(()=>$(t,a,s),c),rn=(t,s,a,c)=>{const d=Ct(t,s).getOrThunk(()=>a(t));return c(d)},ps=(t,s,a)=>a(Ct(t,s)),Pr=(t,s,a,c)=>{const d=Ct(t,s).map(h=>h===!0?a(t):h);return c(d)},Ui=(t,s,a,c,d)=>{const h=E=>d.extract(s.concat([c]),E),v=E=>E.fold(()=>Hs.svalue(R.none()),T=>{const D=d.extract(s.concat([c]),T);return Hs.map(D,R.some)});switch(t.tag){case"required":return pn(s,a,c,h);case"defaultedThunk":return rn(a,c,t.process,h);case"option":return ps(a,c,v);case"defaultedOptionThunk":return Pr(a,c,t.process,v);case"mergeWithThunk":return rn(a,c,ae({}),E=>{const T=ko(t.process(a),E);return h(T)})}},Gl=(t,s,a)=>{const c={},d=[];for(const h of a)Bf(h,(v,E,T,D)=>{const B=Ui(T,t,s,v,D);Hs.fold(B,L=>{d.push(...L)},L=>{c[E]=L})},(v,E)=>{c[v]=E(s)});return d.length>0?Hs.serror(d):Hs.svalue(c)},Zr=t=>({extract:(c,d)=>t().extract(c,d),toString:()=>t().toString()}),N2=t=>os(Mc(t,je)),Zo=t=>{const s=Ut(t),a=ds(t,(d,h)=>Bf(h,v=>ko(d,{[v]:!0}),ae(d)),{});return{extract:(d,h)=>{const v=xe(h)?[]:N2(h),E=vo(v,T=>!ta(a,T));return E.length===0?s.extract(d,h):fe(d,E)},toString:s.toString}},Ut=t=>({extract:(c,d)=>Gl(c,d,t),toString:()=>`obj{
`+Xe(t,d=>Bf(d,(h,v,E,T)=>h+" -> "+T.toString(),(h,v)=>"state("+h+")")).join(`
`)+"}"}),ql=t=>({extract:(c,d)=>{const h=Xe(d,(v,E)=>t.extract(c.concat(["["+E+"]"]),v));return fv.consolidateArr(h)},toString:()=>"array("+t.toString()+")"}),Mt=(t,s)=>{const a=s!==void 0?s:ut;return{extract:(h,v)=>{const E=[];for(const T of t){const D=T.extract(h,v);if(D.stype===oi.Value)return{stype:oi.Value,svalue:a(D.svalue)};E.push(D)}return fv.consolidateArr(E)},toString:()=>"oneOf("+Xe(t,h=>h.toString()).join(", ")+")"}},Am=(t,s)=>{const a=(h,v)=>ql(Ft(t)).extract(h,v);return{extract:(h,v)=>{const E=os(v),T=a(h,E);return Hs.bind(T,D=>{const B=Xe(D,L=>dr(L,L,ho(),s));return Ut(B).extract(h,v)})},toString:()=>"setOf("+s.toString()+")"}},GM=(t,s)=>{const a=gs(s);return{extract:(h,v)=>a().extract(h,v),toString:()=>a().toString()}},Md=gn(ql,Ut),mr=ae(bn),If=(t,s)=>Ft(a=>{const c=typeof a;return t(a)?Hs.svalue(a):Hs.serror(`Expected type: ${s} but got: ${c}`)}),i1=If(Zt,"number"),jr=If(z,"string"),Kl=If(xe,"boolean"),gv=If(He,"function"),$u=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>$u(t[s]));default:return!1}},B2=Ft(t=>$u(t)?Hs.svalue(t):Hs.serror("Expected value to be acceptable for sending via postMessage")),hv=(t,s,a,c)=>Ct(a,c).fold(()=>se(t,a,c),h=>h.extract(t.concat(["branch: "+c]),s)),nt=(t,s)=>({extract:(d,h)=>Ct(h,t).fold(()=>W(d,t),E=>hv(d,h,s,E)),toString:()=>"chooseOn("+t+"). Possible values: "+os(s)}),$2=()=>ql(bn),Dm=t=>Ft(s=>t(s).fold(Hs.serror,Hs.svalue)),Pd=(t,s)=>Am(a=>Hs.fromResult(t(a)),s),c1=(t,s,a)=>{const c=s.extract([t],a);return Hs.mapError(c,d=>({input:a,errors:d}))},Es=(t,s,a)=>Hs.toResult(c1(t,s,a)),No=t=>t.fold(s=>{throw new Error(Fa(s))},ut),si=(t,s,a)=>No(Es(t,s,a)),Fa=t=>`Errors: 
`+a1(t.errors).join(`
`)+`

Input object: `+qg(t.input),Un=(t,s)=>nt(t,Qo(s,Ut)),l1=(t,s)=>GM(t,s),ia=dr,zs=Uc,pv=t=>Dm(s=>go(t,s)?xn.value(s):xn.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),Ke=t=>ia(t,t,ho(),mr()),Wi=(t,s)=>ia(t,t,ho(),s),u1=t=>Wi(t,i1),ro=t=>Wi(t,jr),Yl=(t,s)=>ia(t,t,ho(),pv(s)),Zk=t=>Wi(t,Kl),Xl=t=>Wi(t,gv),tw=(t,s)=>ia(t,t,$f(),Ft(a=>Hs.serror("The field: "+t+" is forbidden. "+s))),Jl=(t,s)=>ia(t,t,ho(),Ut(s)),nw=(t,s)=>ia(t,t,ho(),Md(s)),lc=(t,s)=>ia(t,t,ho(),ql(s)),po=t=>ia(t,t,$f(),mr()),Iu=(t,s)=>ia(t,t,$f(),s),Ff=t=>Iu(t,i1),ca=t=>Iu(t,jr),ow=(t,s)=>Iu(t,pv(s)),Lf=t=>Iu(t,gv),Hf=(t,s)=>Iu(t,ql(s)),vi=(t,s)=>Iu(t,Ut(s)),Rm=(t,s)=>Iu(t,Zo(s)),_e=(t,s)=>ia(t,t,Gg(s),mr()),Zi=(t,s,a)=>ia(t,t,Gg(s),a),Fu=(t,s)=>Zi(t,s,i1),Lu=(t,s)=>Zi(t,s,jr),ji=(t,s,a)=>Zi(t,s,pv(a)),Cr=(t,s)=>Zi(t,s,Kl),Nr=(t,s)=>Zi(t,s,gv),qM=(t,s)=>Zi(t,s,B2),yi=(t,s,a)=>Zi(t,s,ql(a)),Hu=(t,s,a)=>Zi(t,s,Ut(a)),en=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},Gi={generate:t=>{if(!ie(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return yt(t,(c,d)=>{const h=os(c);if(h.length!==1)throw new Error("one and only one name per case");const v=h[0],E=c[v];if(a[v]!==void 0)throw new Error("duplicate key detected:"+v);if(v==="cata")throw new Error("cannot have a case named cata (sorry)");if(!ie(E))throw new Error("case arguments must be an array");s.push(v),a[v]=(...T)=>{const D=T.length;if(D!==E.length)throw new Error("Wrong number of arguments to case "+v+". Expected "+E.length+" ("+E+"), got "+D);return{fold:(...L)=>{if(L.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+L.length);return L[d].apply(null,T)},match:L=>{const U=os(L);if(s.length!==U.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+U.join(","));if(!eo(s,X=>go(U,X)))throw new Error("Not all branches were specified when using match. Specified: "+U.join(", ")+`
Required: `+s.join(", "));return L[v].apply(null,T)},log:L=>{console.log(L,{constructors:s,constructor:v,params:T})}}}}),a}};Gi.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const uc=t=>{const s=[],a=[];return yt(t,c=>{c.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},jk=(t,s)=>{const a={};return Jo(t,(c,d)=>{go(s,d)||(a[d]=c)}),a},Gk=(t,s)=>({[t]:s}),Kg=t=>{const s={};return yt(t,a=>{s[a.key]=a.value}),s},d1=(t,s)=>jk(t,s),wi=(t,s)=>Gk(t,s),la=t=>Kg(t),sw=(t,s)=>t.length===0?xn.value(s):xn.value(ko(s,Rd.apply(void 0,t))),qk=t=>xn.error(zt(t)),zu=(t,s)=>{const a=uc(t);return a.errors.length>0?qk(a.errors):sw(a.values,s)},bv=t=>He(t)?t:An,I2=(t,s,a)=>{let c=t.dom;const d=bv(a);for(;c.parentNode;){c=c.parentNode;const h=Ce.fromDom(c),v=s(h);if(v.isSome())return v;if(d(h))break}return R.none()},zf=(t,s,a)=>{const c=s(t),d=bv(a);return c.orThunk(()=>d(t)?R.none():I2(t,s,d))},Yg=(t,s)=>So(t.element,s.event.target),F2={can:Dt,abort:An,run:Q},Nd=t=>{if(!ta(t,"can")&&!ta(t,"abort")&&!ta(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...F2,...t}},L2=(t,s)=>(...a)=>To(t,(c,d)=>c&&s(d).apply(void 0,a),!0),H2=(t,s)=>(...a)=>To(t,(c,d)=>c||s(d).apply(void 0,a),!1),rw=t=>He(t)?{can:Dt,abort:An,run:t}:t,aw=t=>{const s=L2(t,d=>d.can),a=H2(t,d=>d.abort);return{can:s,abort:a,run:(...d)=>{yt(t,h=>{h.run.apply(void 0,d)})}}},qr=ae,Vu=qr("touchstart"),Xg=qr("touchmove"),Vf=qr("touchend"),z2=qr("touchcancel"),fr=qr("mousedown"),Jg=qr("mousemove"),Qg=qr("mouseout"),iw=qr("mouseup"),Bd=qr("mouseover"),qi=qr("focusin"),vv=qr("focusout"),bl=qr("keydown"),Mm=qr("keyup"),Uf=qr("input"),eh=qr("change"),$d=qr("click"),Kk=qr("transitioncancel"),Wf=qr("transitionend"),cw=qr("transitionstart"),V2=qr("selectstart"),Vs=t=>ae("alloy."+t),th={tap:Vs("tap")},Ql=Vs("focus"),Pm=Vs("blur.post"),Zf=Vs("paste.post"),jf=Vs("receive"),Ki=Vs("execute"),Ns=Vs("focus.item"),eu=th.tap,lw=Vs("longpress"),m1=Vs("sandbox.close"),yv=Vs("typeahead.cancel"),Nm=Vs("system.init"),f1=Vs("system.touchmove"),wv=Vs("system.touchend"),Uu=Vs("system.scroll"),tu=Vs("system.resize"),dc=Vs("system.attached"),Bm=Vs("system.detached"),$m=Vs("system.dismissRequested"),U2=Vs("system.repositionRequested"),Cv=Vs("focusmanager.shifted"),g1=Vs("slotcontainer.visibility"),Sv=Vs("system.external.element.scroll"),W2=Vs("change.tab"),xv=Vs("dismiss.tab"),h1=Vs("highlight"),p1=Vs("dehighlight"),Ln=(t,s)=>{b1(t,t.element,s,{})},qt=(t,s,a)=>{b1(t,t.element,s,a)},Id=t=>{Ln(t,Ki())},Ev=(t,s,a)=>{b1(t,s,a,{})},b1=(t,s,a,c)=>{const d={target:s,...c};t.getSystem().triggerEvent(a,s,d)},Yk=(t,s,a,c)=>{const d={...c,target:s};t.getSystem().triggerEvent(a,s,d)},uw=(t,s,a,c)=>{t.getSystem().triggerEvent(a,s,c.event)},zo=t=>la(t),dw=(t,s)=>({key:t,value:Nd({abort:s})}),mw=(t,s)=>({key:t,value:Nd({can:s})}),fw=t=>({key:t,value:Nd({run:(s,a)=>{a.event.prevent()}})}),We=(t,s)=>({key:t,value:Nd({run:s})}),Tv=(t,s,a)=>({key:t,value:Nd({run:(c,d)=>{s.apply(void 0,[c,d].concat(a))}})}),Xk=t=>s=>We(t,s),v1=t=>s=>({key:t,value:Nd({run:(a,c)=>{Yg(a,c)&&s(a,c)}})}),Jk=(t,s)=>We(t,(a,c)=>{a.getSystem().getByUid(s).each(d=>{uw(d,d.element,t,c)})}),nh=(t,s,a)=>{const c=s.partUids[a];return Jk(t,c)},gw=(t,s)=>We(t,(a,c)=>{const d=c.event,h=a.getSystem().getByDom(d.target).getOrThunk(()=>zf(d.target,E=>a.getSystem().getByDom(E).toOptional(),An).getOr(a));s(a,h,c)}),Fd=t=>We(t,(s,a)=>{a.cut()}),Qk=t=>We(t,(s,a)=>{a.stop()}),Wu=(t,s)=>v1(t)(s),Bo=v1(dc()),Zu=v1(Bm()),hw=v1(Nm()),vl=Xk(Ki()),Ld=(t,s)=>{const c=(s||document).createElement("div");return c.innerHTML=t,fi(Ce.fromDom(c))},pw=t=>t.dom.innerHTML,Gf=(t,s)=>{const c=Ba(t).dom,d=Ce.fromDom(c.createDocumentFragment()),h=Ld(s,c);Ad(d,h),Nf(t),Sa(t,d)},Z2=t=>{const s=Ce.fromTag("div"),a=Ce.fromDom(t.dom.cloneNode(!0));return Sa(s,a),pw(s)},_v=(t,s)=>Ce.fromDom(t.dom.cloneNode(s)),bw=t=>_v(t,!1),eO=t=>_v(t,!0),vw=t=>{if(K(t))return"#shadow-root";{const s=bw(t);return Z2(s)}},ju=t=>vw(t),KM=(t,s,a)=>So(s,t.element)&&!So(s,a),yw=zo([mw(Ql(),(t,s)=>{const a=s.event,c=a.originator,d=a.target;return KM(t,c,d)?(console.warn(Ql()+` did not get interpreted by the desired target. 
Originator: `+ju(c)+`
Target: `+ju(d)+`
Check the `+Ql()+" event handlers"),!1):!0})]);var qf=Object.freeze({__proto__:null,events:yw});let ua=0;const Rt=t=>{const a=new Date().getTime(),c=Math.floor(Math.random()*1e9);return ua++,t+"_"+c+ua+String(a)},tO=ae("alloy-id-"),ww=ae("data-alloy-id"),nO=tO(),j2=ww(),Kf=(t,s)=>{const a=Rt(nO+t);return oh(s,a),a},oh=(t,s)=>{Object.defineProperty(t.dom,j2,{value:s,writable:!0})},y1=t=>{const s=yo(t)?t.dom[j2]:null;return R.from(s)},sh=t=>Rt(t),kv=ut,Hd=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+ju(t().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},c=d=>()=>{console.warn(s(d))};return{debugInfo:ae("fake"),triggerEvent:c("triggerEvent"),triggerFocus:c("triggerFocus"),triggerEscape:c("triggerEscape"),broadcast:c("broadcast"),broadcastOn:c("broadcastOn"),broadcastEvent:c("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:An}},nu=Hd(),w1=(t,s,a)=>{const c=a.toString(),d=c.indexOf(")")+1,h=c.indexOf("("),v=c.substring(h+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Zc(v.slice(0,1).concat(v.slice(3)))}),t},Zc=t=>Xe(t,s=>Li(s,"/*")?s.substring(0,s.length-2):s),Ov=(t,s)=>{const a=t.toString(),c=a.indexOf(")")+1,d=a.indexOf("("),h=a.substring(d+1,c-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Zc(h)}),t},G2=(t,s)=>{const a=s.toString(),c=a.indexOf(")")+1,d=a.indexOf("("),h=a.substring(d+1,c-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Zc(h.slice(1))}),t},rh=Rt("alloy-premade"),zd=t=>(Object.defineProperty(t.element.dom,rh,{value:t.uid,writable:!0}),wi(rh,t)),oO=t=>oo(t.dom,rh),ah=t=>Ct(t,rh),Yf=t=>G2((s,...a)=>t(s.getApis(),s,...a),t),yl={init:()=>Yi({readState:ae("No State required")})},Yi=t=>t,sO=(t,s)=>{const a=Xe(s,d=>vi(d.name(),[Ke("config"),_e("state",yl)])),c=Es("component.behaviours",Ut(a),t.behaviours).fold(d=>{throw new Error(Fa(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},ut);return{list:s,data:Qo(c,d=>{const h=d.map(v=>({config:v.config,state:v.state.init(v.config)}));return ae(h)})}},q2=t=>t.list,K2=t=>t.data,Cw=(t,s)=>{const a={};return Jo(t,(c,d)=>{Jo(c,(h,v)=>{const E=Ct(a,v).getOr([]);a[v]=E.concat([s(d,h)])})}),a},Xi=t=>({classes:Fe(t.classes)?[]:t.classes,attributes:Fe(t.attributes)?{}:t.attributes,styles:Fe(t.styles)?{}:t.styles}),ih=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),Av=(t,s,a,c)=>{const d={...s};yt(a,B=>{d[B.name()]=B.exhibit(t,c)});const h=Cw(d,(B,L)=>({name:B,modification:L})),v=B=>ds(B,(L,U)=>({...U.modification,...L}),{}),E=ds(h.classes,(B,L)=>L.modification.concat(B),[]),T=v(h.attributes),D=v(h.styles);return Xi({classes:E,attributes:T,styles:D})},Dv=(t,s,a,c)=>{try{const d=Tu(a,(h,v)=>{const E=h[s],T=v[s],D=c.indexOf(E),B=c.indexOf(T);if(D===-1)throw new Error("The ordering for "+t+" does not have an entry for "+E+`.
Order specified: `+JSON.stringify(c,null,2));if(B===-1)throw new Error("The ordering for "+t+" does not have an entry for "+T+`.
Order specified: `+JSON.stringify(c,null,2));return D<B?-1:B<D?1:0});return xn.value(d)}catch(d){return xn.error([d])}},rO=(t,s)=>({handler:t,purpose:s}),Y2=(t,s)=>({cHandler:t,purpose:s}),Sw=(t,s)=>Y2(It.apply(void 0,[t.handler].concat(s)),t.purpose),ch=t=>t.cHandler,lh=(t,s)=>({name:t,handler:s}),Rv=(t,s)=>{const a={};return yt(t,c=>{a[c.name()]=c.handlers(s)}),a},aO=(t,s,a)=>{const c={...a,...Rv(s,t)};return Cw(c,lh)},Mv=(t,s,a,c)=>{const d=aO(t,a,c);return xw(d,s)},uh=t=>{const s=rw(t);return(a,c,...d)=>{const h=[a,c].concat(d);s.abort.apply(void 0,h)?c.stop():s.can.apply(void 0,h)&&s.run.apply(void 0,h)}},iO=(t,s)=>xn.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Xe(s,a=>a.name),null,2)]),C1=(t,s,a)=>{const c=s[a];return c?Dv("Event: "+a,"name",t,c).map(d=>{const h=Xe(d,v=>v.handler);return aw(h)}):iO(a,t)},xw=(t,s)=>{const a=Sd(t,(c,d)=>(c.length===1?xn.value(c[0].handler):C1(c,s,d)).map(v=>{const E=uh(v),T=c.length>1?vo(s[d],D=>qs(c,B=>B.name===D)).join(" > "):c[0].name;return wi(d,rO(E,T))}));return zu(a,{})},Ji="alloy.base.behaviour",Pv=Ut([ia("dom","dom",ho(),Ut([Ke("tag"),_e("styles",{}),_e("classes",[]),_e("attributes",{}),po("value"),po("innerHtml")])),Ke("components"),Ke("uid"),_e("events",{}),_e("apis",{}),ia("eventOrder","eventOrder",Om({[Ki()]:["disabling",Ji,"toggling","typeaheadevents"],[Ql()]:[Ji,"focusing","keying"],[Nm()]:[Ji,"disabling","toggling","representing"],[Uf()]:[Ji,"representing","streaming","invalidating"],[Bm()]:[Ji,"representing","item-events","tooltipping"],[fr()]:["focusing",Ji,"item-type-events"],[Vu()]:["focusing",Ji,"item-type-events"],[Bd()]:["item-type-events","tooltipping"],[jf()]:["receiving","reflecting","tooltipping"]}),mr()),po("domModification")]),X2=t=>Es("custom.definition",Pv,t),Nv=t=>({...t.dom,uid:t.uid,domChildren:Xe(t.components,s=>s.element)}),YM=t=>t.domModification.fold(()=>Xi({}),Xi),Bv=t=>t.events,Im=(t,s)=>{const a=Ms(t,s);return a===void 0||a===""?[]:a.split(" ")},Gu=(t,s,a)=>{const d=Im(t,s).concat([a]);return Et(t,s,d.join(" ")),!0},Ew=(t,s,a)=>{const c=vo(Im(t,s),d=>d!==a);return c.length>0?Et(t,s,c.join(" ")):Ss(t,s),!1},dh=t=>t.dom.classList!==void 0,$v=t=>Im(t,"class"),J2=(t,s)=>Gu(t,"class",s),jo=(t,s)=>Ew(t,"class",s),cO=(t,s)=>go($v(t),s)?jo(t,s):J2(t,s),Us=(t,s)=>{dh(t)?t.dom.classList.add(s):J2(t,s)},Q2=t=>{(dh(t)?t.dom.classList:$v(t)).length===0&&Ss(t,"class")},bs=(t,s)=>{dh(t)?t.dom.classList.remove(s):jo(t,s),Q2(t)},mh=(t,s)=>{const a=dh(t)?t.dom.classList.toggle(s):cO(t,s);return Q2(t),a},gr=(t,s)=>dh(t)&&t.dom.classList.contains(s),Ts=(t,s)=>{yt(s,a=>{Us(t,a)})},mc=(t,s)=>{yt(s,a=>{bs(t,a)})},Tw=(t,s)=>{yt(s,a=>{mh(t,a)})},da=(t,s)=>eo(s,a=>gr(t,a)),S1=t=>{const s=t.dom.classList,a=new Array(s.length);for(let c=0;c<s.length;c++){const d=s.item(c);d!==null&&(a[c]=d)}return a},fh=t=>dh(t)?S1(t):$v(t),qu=t=>t.dom.value,gh=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},Fm=(t,s,a)=>Vl(t,s).map(d=>{if(a.exists(v=>!So(v,d))){const v=a.map(Qa).getOr("span"),E=Ce.fromTag(v);return zc(d,E),E}else return d}),Vd=(t,s,a)=>{a.fold(()=>Sa(t,s),c=>{So(c,s)||(zc(c,s),Vc(c))})},lO=(t,s,a)=>{const c=Xe(s,a),d=fi(t);return yt(d.slice(c.length),Vc),c},ex=(t,s,a,c)=>{const d=Vl(t,s),h=c(a,d),v=Fm(t,s,d);return Vd(t,h.element,v),h},XM=(t,s,a)=>lO(t,s,(c,d)=>ex(t,d,c,a)),JM=(t,s)=>lO(t,s,(a,c)=>{const d=Vl(t,c);return Vd(t,a,d),a}),wl=(t,s)=>{const a=os(t),c=os(s),d=jt(c,a),h=Dr(t,(v,E)=>!oo(s,E)||v!==s[E]).t;return{toRemove:d,toSet:h}},La=(t,s)=>{const{class:a,style:c,...d}=Vy(s),{toSet:h,toRemove:v}=wl(t.attributes,d),E=()=>{yt(v,Oe=>Ss(s,Oe)),Of(s,h)},T=Mr(s),{toSet:D,toRemove:B}=wl(t.styles,T),L=()=>{yt(B,Oe=>to(s,Oe)),ti(s,D)},U=fh(s),j=jt(U,t.classes),X=jt(t.classes,U),ce=()=>{Ts(s,X),mc(s,j)},ke=Oe=>{Gf(s,Oe)},pe=()=>{const Oe=t.domChildren;JM(s,Oe)},ge=()=>{const Oe=s,Je=t.value.getOrUndefined();Je!==qu(Oe)&&gh(Oe,Je??"")};return E(),ce(),L(),t.innerHtml.fold(pe,ke),ge(),s},uO=t=>{const s=Ce.fromTag(t.tag);Of(s,t.attributes),Ts(s,t.classes),ti(s,t.styles),t.innerHtml.each(c=>Gf(s,c));const a=t.domChildren;return Ad(s,a),t.value.each(c=>{gh(s,c)}),s},dO=(t,s)=>{try{const a=La(t,s);return R.some(a)}catch{return R.none()}},Lm=t=>t.innerHtml.isSome()&&t.domChildren.length>0,x1=(t,s)=>{const a=d=>Qa(d)===t.tag&&!Lm(t)&&!oO(d),c=s.filter(a).bind(d=>dO(t,d)).getOrThunk(()=>uO(t));return oh(c,t.uid),c},Iv=t=>{const s=Ct(t,"behaviours").getOr({});return $e(os(s),a=>{const c=s[a];return je(c)?[c.me]:[]})},Fv=(t,s)=>sO(t,s),Ku=t=>{const s=Iv(t);return Fv(t,s)},hh=(t,s,a)=>{const c=Nv(t),d=YM(t),h={"alloy.base.modification":d},v=s.length>0?Av(a,h,s,c):d;return ih(c,v)},ph=(t,s,a)=>{const c={"alloy.base.behaviour":Bv(t)};return Mv(a,t.eventOrder,s,c).getOrDie()},bh=(t,s)=>{const a=()=>Oe,c=en(nu),d=No(X2(t)),h=Ku(t),v=q2(h),E=K2(h),T=hh(d,v,E),D=x1(T,s),B=ph(d,v,E),L=en(d.components),U=Je=>{c.set(Je)},j=()=>{c.set(Hd(a))},X=()=>{const Je=fi(D),Ve=$e(Je,Ie=>c.get().getByDom(Ie).fold(()=>[],as));L.set(Ve)},ce=Je=>{const Ve=E;return(He(Ve[Je.name()])?Ve[Je.name()]:()=>{throw new Error("Could not find "+Je.name()+" in "+JSON.stringify(t,null,2))})()},ke=Je=>He(E[Je.name()]),pe=()=>d.apis,ge=Je=>E[Je]().map(Ve=>Ve.state.readState()).getOr("not enabled"),Oe={uid:t.uid,getSystem:c.get,config:ce,hasConfigured:ke,spec:t,readState:ge,getApis:pe,connect:U,disconnect:j,element:D,syncComponents:X,components:L.get,events:B};return Oe},Xf=(t,s)=>{const a=Ct(t,"components").getOr([]);return s.fold(()=>Xe(a,Ea),c=>Xe(a,(d,h)=>Lv(d,Vl(c,h))))},tx=(t,s)=>{const{events:a,...c}=kv(t),d=Xf(c,s),h={...c,events:{...qf,...a},components:d};return xn.value(bh(h,s))},Fs=t=>{const s=Ce.fromText(t);return nx({element:s})},nx=t=>{const s=si("external.component",Zo([Ke("element"),po("uid")]),t),a=en(Hd()),c=E=>{a.set(E)},d=()=>{a.set(Hd(()=>v))},h=s.uid.getOrThunk(()=>sh("external"));oh(s.element,h);const v={uid:h,getSystem:a.get,config:R.none,hasConfigured:An,connect:c,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:ae("No state"),syncComponents:Q,components:ae([]),events:{}};return zd(v)},vh=sh,ox=t=>oo(t,"uid"),Lv=(t,s)=>ah(t).getOrThunk(()=>{const a=ox(t)?t:{uid:vh(""),...t};return tx(a,s).getOrDie()}),Ea=t=>Lv(t,R.none()),fc=zd;var sx=(t,s,a,c,d)=>t(a,c)?R.some(a):He(d)&&d(a)?R.none():s(a,c,d);const Hv=(t,s,a)=>{let c=t.dom;const d=He(a)?a:An;for(;c.parentNode;){c=c.parentNode;const h=Ce.fromDom(c);if(s(h))return R.some(h);if(d(h))break}return R.none()},Jf=(t,s,a)=>sx((d,h)=>h(d),Hv,t,s,a),mO=(t,s)=>{const a=d=>s(Ce.fromDom(d));return on(t.dom.childNodes,a).map(Ce.fromDom)},rx=(t,s)=>{const a=c=>{for(let d=0;d<c.childNodes.length;d++){const h=Ce.fromDom(c.childNodes[d]);if(s(h))return R.some(h);const v=a(c.childNodes[d]);if(v.isSome())return v}return R.none()};return a(t.dom)},_w=(t,s,a)=>Jf(t,s,a).isSome(),Qi=(t,s,a)=>Hv(t,c=>Ys(c,s),a),zv=(t,s)=>mO(t,a=>Ys(a,s)),Ws=(t,s)=>Tf(s,t),ou=(t,s,a)=>sx((d,h)=>Ys(d,h),Qi,t,s,a),yh="aria-controls",Hm=t=>Jf(t,a=>{if(!yo(a))return!1;const c=Ms(a,"id");return c!==void 0&&c.indexOf(yh)>-1}).bind(a=>{const c=Ms(a,"id"),d=Be(a);return Ws(d,`[${yh}="${c}"]`)}),Qf=()=>{const t=Rt(yh);return{id:t,link:c=>{Et(c,yh,t)},unlink:c=>{Ss(c,yh)}}},eg=(t,s)=>Hm(s).exists(a=>Ud(t,a)),Ud=(t,s)=>_w(s,a=>So(a,t.element),An)||eg(t,s),ax="unknown";var tg;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(tg||(tg={}));const zm=en({}),ng=(t,s)=>{const a=[],c=new Date().getTime();return{logEventCut:(d,h,v)=>{a.push({outcome:"cut",target:h,purpose:v})},logEventStopped:(d,h,v)=>{a.push({outcome:"stopped",target:h,purpose:v})},logNoParent:(d,h,v)=>{a.push({outcome:"no-parent",target:h,purpose:v})},logEventNoHandlers:(d,h)=>{a.push({outcome:"no-handlers-left",target:h})},logEventResponse:(d,h,v)=>{a.push({outcome:"response",purpose:v,target:h})},write:()=>{const d=new Date().getTime();go(["mousemove","mouseover","mouseout",Nm()],t)||console.log(t,{event:t,time:d-c,target:s.dom,sequence:Xe(a,h=>go(["cut","stopped","response"],h.outcome)?"{"+h.purpose+"} "+h.outcome+" at ("+ju(h.target)+")":h.outcome)})}}},ix=(t,s,a)=>{switch(Ct(zm.get(),t).orThunk(()=>{const d=os(zm.get());return tr(d,h=>t.indexOf(h)>-1?R.some(zm.get()[h]):R.none())}).getOr(tg.NORMAL)){case tg.NORMAL:return a(Ow());case tg.LOGGING:{const d=ng(t,s),h=a(d);return d.write(),h}case tg.STOP:return!0}},fO=["alloy/data/Fields","alloy/debugging/Debugging"],kw=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return on(s,a=>a.indexOf("alloy")>0&&!qs(fO,c=>a.indexOf(c)>-1)).getOr(ax)}else return ax},gO={logEventCut:Q,logEventStopped:Q,logNoParent:Q,logEventNoHandlers:Q,logEventResponse:Q,write:Q},Vv=(t,s,a)=>ix(t,s,a),Ow=ae(gO),ec=ae([Ke("menu"),Ke("selectedMenu")]),cx=ae([Ke("item"),Ke("selectedItem")]);ae(Ut(cx().concat(ec())));const wh=ae(Ut(cx())),lx=Jl("initSize",[Ke("numColumns"),Ke("numRows")]),hO=()=>Wi("markers",wh()),E1=()=>Jl("markers",[Ke("backgroundMenu")].concat(ec()).concat(cx())),Vm=t=>Jl("markers",Xe(t,Ke)),Uv=(t,s,a)=>(kw(),ia(s,s,a,Dm(c=>xn.value((...d)=>c.apply(void 0,d))))),Wn=t=>Uv("onHandler",t,Gg(Q)),tc=t=>Uv("onKeyboardHandler",t,Gg(R.none)),su=t=>Uv("onHandler",t,ho()),Aw=t=>Uv("onKeyboardHandler",t,ho()),Oo=(t,s)=>zs(t,ae(s)),T1=t=>zs(t,ut),Dw=ae(lx),Sr=(t,s,a,c,d,h,v,E=!1)=>({x:t,y:s,bubble:a,direction:c,placement:d,restriction:h,label:`${v}-${d}`,alwaysFit:E}),Yu=Gi.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Um=(t,s,a,c,d,h,v,E,T)=>t.fold(s,a,c,d,h,v,E,T),Rw=(t,s,a,c)=>t.fold(s,s,c,c,s,c,a,a),Wv=(t,s,a,c)=>t.fold(s,c,s,c,a,a,s,c),_1=Yu.southeast,Mw=Yu.southwest,Zv=Yu.northeast,Xu=Yu.northwest,Wd=Yu.south,pO=Yu.north,De=Yu.east,k1=Yu.west,Ch=(t,s,a,c)=>{const d=t+s;return d>c?a:d<a?c:d},gc=(t,s,a)=>Math.min(Math.max(t,s),a),Pw=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},is=(t,s)=>Il(["left","right","top","bottom"],a=>Ct(s,a).map(c=>Pw(t,c))),jv=(t,s,a)=>{const c=(T,D)=>s[T].map(B=>{const L=T==="top"||T==="bottom",U=L?a.top:a.left,X=(T==="left"||T==="top"?Math.max:Math.min)(B,D)+U;return L?gc(X,t.y,t.bottom):gc(X,t.x,t.right)}).getOr(D),d=c("left",t.x),h=c("top",t.y),v=c("right",t.right),E=c("bottom",t.bottom);return hs(d,h,v-d,E-h)},Zd="layout",Nw=t=>t.x,Gv=(t,s)=>t.x+t.width/2-s.width/2,Bw=(t,s)=>t.x+t.width-s.width,O1=(t,s)=>t.y-s.height,Sh=t=>t.y+t.height,$w=(t,s)=>t.y+t.height/2-s.height/2,bO=t=>t.x+t.width,ri=(t,s)=>t.x-s.width,xr=(t,s,a)=>Sr(Nw(t),Sh(t),a.southeast(),_1(),"southeast",is(t,{left:1,top:3}),Zd),ma=(t,s,a)=>Sr(Bw(t,s),Sh(t),a.southwest(),Mw(),"southwest",is(t,{right:0,top:3}),Zd),ai=(t,s,a)=>Sr(Nw(t),O1(t,s),a.northeast(),Zv(),"northeast",is(t,{left:1,bottom:2}),Zd),Ta=(t,s,a)=>Sr(Bw(t,s),O1(t,s),a.northwest(),Xu(),"northwest",is(t,{right:0,bottom:2}),Zd),Ha=(t,s,a)=>Sr(Gv(t,s),O1(t,s),a.north(),pO(),"north",is(t,{bottom:2}),Zd),Er=(t,s,a)=>Sr(Gv(t,s),Sh(t),a.south(),Wd(),"south",is(t,{top:3}),Zd),Iw=(t,s,a)=>Sr(bO(t),$w(t,s),a.east(),De(),"east",is(t,{left:0}),Zd),A1=(t,s,a)=>Sr(ri(t,s),$w(t,s),a.west(),k1(),"west",is(t,{right:1}),Zd),Fw=()=>[xr,ma,ai,Ta,Er,Ha,Iw,A1],D1=()=>[ma,xr,Ta,ai,Er,Ha,Iw,A1],Lw=()=>[ai,Ta,xr,ma,Ha,Er],ux=()=>[Ta,ai,ma,xr,Ha,Er],qv=()=>[xr,ma,ai,Ta,Er,Ha],Hw=()=>[ma,xr,Ta,ai,Er,Ha],vO=(t,s)=>s.universal?t:vo(t,a=>go(s.channels,a));var dx=Object.freeze({__proto__:null,events:t=>zo([We(jf(),(s,a)=>{const c=t.channels,d=os(c),h=a,v=vO(d,h);yt(v,E=>{const T=c[E],D=T.schema,B=si("channel["+E+`] data
Receiver: `+ju(s.element),D,h.data);T.onReceive(s,B)})})])}),wO=[Wi("channels",Pd(xn.value,Zo([su("onReceive"),_e("schema",mr())])))];const xh=(t,s,a)=>vl(c=>{a(c,t,s)}),Kv=(t,s,a)=>hw((c,d)=>{a(c,t,s)}),mx=(t,s,a,c,d,h)=>{const v=Zo(t),E=vi(s,[Rm("config",t)]);return ru(v,E,s,a,c,d,h)},QM=(t,s,a,c,d,h)=>{const v=t,E=vi(s,[Iu("config",t)]);return ru(v,E,s,a,c,d,h)},Ci=(t,s,a)=>w1((d,...h)=>{const v=[d].concat(h);return d.config({name:ae(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},E=>{const T=Array.prototype.slice.call(v,1);return s.apply(void 0,[d,E.config,E.state].concat(T))})},a,s),eP=t=>({key:t,value:void 0}),ru=(t,s,a,c,d,h,v)=>{const E=L=>ta(L,a)?L[a]():R.none(),T=Qo(d,(L,U)=>Ci(a,L,U)),B={...Qo(h,(L,U)=>Ov(L,U)),...T,revoke:It(eP,a),config:L=>{const U=si(a+"-config",t,L);return{key:a,value:{config:U,me:B,configAsRaw:gs(()=>si(a+"-config",t,L)),initialConfig:L,state:v}}},schema:ae(s),exhibit:(L,U)=>Fi(E(L),Ct(c,"exhibit"),(j,X)=>X(U,j.config,j.state)).getOrThunk(()=>Xi({})),name:ae(a),handlers:L=>E(L).map(U=>Ct(c,"events").getOr(()=>({}))(U.config,U.state)).getOr({})};return B},lt=t=>la(t),zw=Zo([Ke("fields"),Ke("name"),_e("active",{}),_e("apis",{}),_e("state",yl),_e("extra",{})]),Tr=t=>{const s=si("Creating behaviour: "+t.name,zw,t);return mx(s.fields,s.name,s.active,s.apis,s.extra,s.state)},fx=Zo([Ke("branchKey"),Ke("branches"),Ke("name"),_e("active",{}),_e("apis",{}),_e("state",yl),_e("extra",{})]),Yv=t=>{const s=si("Creating behaviour: "+t.name,fx,t);return QM(Un(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},Vw=ae(void 0),Si=Tr({fields:wO,name:"receiving",active:dx});var gx=Object.freeze({__proto__:null,exhibit:(t,s)=>Xi({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const xi=(t,s=!1)=>t.dom.focus({preventScroll:s}),Eh=t=>t.dom.blur(),R1=t=>{const s=Be(t).dom;return t.dom===s.activeElement},Ju=(t=Em())=>R.from(t.dom.activeElement).map(Ce.fromDom),Cl=t=>Ju(Be(t)).filter(s=>t.dom.contains(s.dom)),Ot=(t,s)=>{const a=Be(s),c=Ju(a).bind(h=>{const v=E=>So(h,E);return v(s)?R.some(s):rx(s,v)}),d=t(s);return c.each(h=>{Ju(a).filter(v=>So(v,h)).fold(()=>{xi(h)},Q)}),d},hc=(t,s,a,c,d)=>{const h=v=>v+"px";return{position:t,left:s.map(h),top:a.map(h),right:c.map(h),bottom:d.map(h)}},hx=t=>({...t,position:R.some(t.position)}),px=(t,s)=>{at(t,hx(s))},Uw=Gi.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),bx=(t,s,a,c,d,h)=>{const v=s.rect,E=v.x-a,T=v.y-c,D=v.width,B=v.height,L=d-(E+D),U=h-(T+B),j=R.some(E),X=R.some(T),ce=R.some(L),ke=R.some(U),pe=R.none();return Um(s.direction,()=>hc(t,j,X,pe,pe),()=>hc(t,pe,X,ce,pe),()=>hc(t,j,pe,pe,ke),()=>hc(t,pe,pe,ce,ke),()=>hc(t,j,X,pe,pe),()=>hc(t,j,pe,pe,ke),()=>hc(t,j,X,pe,pe),()=>hc(t,pe,X,ce,pe))},Ww=(t,s)=>t.fold(()=>{const a=s.rect;return hc("absolute",R.some(a.x),R.some(a.y),R.none(),R.none())},(a,c,d,h)=>bx("absolute",s,a,c,d,h),(a,c,d,h)=>bx("fixed",s,a,c,d,h)),Zw=(t,s)=>{const a=It(Dd,s),c=t.fold(a,a,()=>{const v=Ia();return Dd(s).translate(-v.left,-v.top)}),d=$a(s),h=kd(s);return hs(c.left,c.top,d,h)},SO=(t,s)=>s.fold(()=>t.fold(Wr,Wr,hs),a=>t.fold(ae(a),ae(a),()=>{const c=jw(t,a.x,a.y);return hs(c.left,c.top,a.width,a.height)})),jw=(t,s,a)=>{const c=co(s,a),d=()=>{const h=Ia();return c.translate(-h.left,-h.top)};return t.fold(ae(c),ae(c),d)},xO=(t,s,a,c)=>t.fold(s,a,c);Uw.none;const za=Uw.relative,M1=Uw.fixed,EO=(t,s)=>({anchorBox:t,origin:s}),TO=(t,s)=>EO(t,s),Gw="data-alloy-placement",_O=(t,s)=>{Et(t,Gw,s)},vx=t=>zr(t,Gw),yx=t=>Ss(t,Gw),P1=Gi.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),wx=(t,s)=>{const{x:a,y:c,right:d,bottom:h}=s,{x:v,y:E,right:T,bottom:D,width:B,height:L}=t,U=v>=a&&v<=d,j=E>=c&&E<=h,X=U&&j,ce=T<=d&&T>=a,ke=D<=h&&D>=c,pe=ce&&ke,ge=Math.min(B,v>=a?d-v:T-a),Oe=Math.min(L,E>=c?h-E:D-c);return{originInBounds:X,sizeInBounds:pe,visibleW:ge,visibleH:Oe}},qw=(t,s)=>{const{x:a,y:c,right:d,bottom:h}=s,{x:v,y:E,width:T,height:D}=t,B=Math.max(a,d-T),L=Math.max(c,h-D),U=gc(v,a,B),j=gc(E,c,L),X=Math.min(U+T,d)-U,ce=Math.min(j+D,h)-j;return hs(U,j,X,ce)},og=(t,s,a)=>{const c=ae(s.bottom-a.y),d=ae(a.bottom-s.y),h=Rw(t,d,d,c),v=ae(s.right-a.x),E=ae(a.right-s.x);return{maxWidth:Wv(t,E,E,v),maxHeight:h}},kO=(t,s,a,c)=>{const d=t.bubble,h=d.offset,v=jv(c,t.restriction,h),E=t.x+h.left,T=t.y+h.top,D=hs(E,T,s,a),{originInBounds:B,sizeInBounds:L,visibleW:U,visibleH:j}=wx(D,v),X=B&&L,ce=X?D:qw(D,v),ke=ce.width>0&&ce.height>0,{maxWidth:pe,maxHeight:ge}=og(t.direction,ce,c),Oe={rect:ce,maxHeight:ge,maxWidth:pe,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:T};return X||t.alwaysFit?P1.fit(Oe):P1.nofit(Oe,U,j,ke)},OO=(t,s,a,c,d,h)=>{const v=c.width,E=c.height,T=(B,L,U,j,X)=>{const ce=B(a,c,d,t,h),ke=kO(ce,v,E,h);return ke.fold(ae(ke),(pe,ge,Oe,Je)=>(X===Je?Oe>j||ge>U:!X&&Je)?ke:P1.nofit(L,U,j,X))};return To(s,(B,L)=>{const U=It(T,L);return B.fold(ae(B),U)},P1.nofit({rect:a,maxHeight:c.height,maxWidth:c.width,direction:_1(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(ut,ut)},Kw=t=>{const s=en(R.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(R.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:E=>{a(),s.set(R.some(E))}}},AO=()=>Kw(t=>t.destroy()),jd=()=>Kw(t=>t.unbind()),Rn=()=>{const t=Kw(Q);return{...t,on:a=>t.get().each(a)}},Yw=Dt,Va=(t,s,a)=>jl(t,s,Yw,a),Xv=(t,s,a)=>rv(t,s,Yw,a),Xw=Pu,Jw=["top","bottom","right","left"],Jv="data-alloy-transition-timer",Cx=(t,s)=>da(t,s.classes),DO=(t,s,a)=>a.exists(c=>{const d=t.mode;return d==="all"?!0:c[d]!==s[d]}),RO=(t,s)=>{const a=c=>parseFloat(c).toFixed(3);return Rr(s,(c,d)=>{const h=t[d].map(a),v=c.map(a);return!ym(h,v)}).isSome()},Th=t=>{const s=h=>{const E=Ps(t,h).split(/\s*,\s*/);return vo(E,Na)},a=h=>{if(z(h)&&/^[\d.]+/.test(h)){const v=parseFloat(h);return Li(h,"ms")?v:v*1e3}else return 0},c=s("transition-delay"),d=s("transition-duration");return To(d,(h,v,E)=>{const T=a(c[E])+a(v);return Math.max(h,T)},0)},Sx=(t,s)=>{const a=jd(),c=jd();let d;const h=D=>{var B;const L=(B=D.raw.pseudoElement)!==null&&B!==void 0?B:"";return So(D.target,t)&&Cs(L)&&go(Jw,D.raw.propertyName)},v=D=>{if(ve(D)||h(D)){a.clear(),c.clear();const B=D==null?void 0:D.raw.type;(ve(B)||B===Wf())&&(clearTimeout(d),Ss(t,Jv),mc(t,s.classes))}},E=Va(t,cw(),D=>{h(D)&&(E.unbind(),a.set(Va(t,Wf(),v)),c.set(Va(t,Kk(),v)))}),T=Th(t);requestAnimationFrame(()=>{d=setTimeout(v,T+17),Et(t,Jv,d)})},tP=(t,s)=>{Ts(t,s.classes),zr(t,Jv).each(a=>{clearTimeout(parseInt(a,10)),Ss(t,Jv)}),Sx(t,s)},Wm=(t,s,a,c,d,h)=>{const v=DO(c,d,h);if(v||Cx(t,c)){vn(t,"position",a.position);const E=Zw(s,t),T=Ww(s,{...d,rect:E}),D=Il(Jw,B=>T[B]);RO(a,D)&&(at(t,D),v&&tP(t,c),gi(t))}else mc(t,c.classes)},MO=t=>({width:$a(t),height:kd(t)}),_h=(t,s,a,c)=>{to(s,"max-height"),to(s,"max-width");const d=MO(s);return OO(s,c.preference,t,d,a,c.bounds)},PO=(t,s)=>{const a=s.classes;mc(t,a.off),Ts(t,a.on)},Qw=(t,s,a)=>{const c=a.maxHeightFunction;c(t,s.maxHeight)},xx=(t,s,a)=>{const c=a.maxWidthFunction;c(t,s.maxWidth)},sg=(t,s,a)=>{const c=Ww(a.origin,s);a.transition.each(d=>{Wm(t,a.origin,c,d,s,a.lastPlacement)}),px(t,c)},NO=(t,s)=>{_O(t,s.placement)},Ex=(t,s)=>{qp(t,Math.floor(s))},Tx=ae((t,s)=>{Ex(t,s),ti(t,{"overflow-x":"hidden","overflow-y":"auto"})}),kh=ae((t,s)=>{Ex(t,s)}),_x=(t,s,a)=>t[s]===void 0?a:t[s],eC=(t,s,a,c,d,h,v,E)=>{const T=_x(v,"maxHeightFunction",Tx()),D=_x(v,"maxWidthFunction",Q),B=t.anchorBox,L=t.origin,U={bounds:SO(L,h),origin:L,preference:c,maxHeightFunction:T,maxWidthFunction:D,lastPlacement:d,transition:E};return BO(B,s,a,U)},BO=(t,s,a,c)=>{const d=_h(t,s,a,c);return sg(s,d,c),NO(s,d),PO(s,d),Qw(s,d,c),xx(s,d,c),{layout:d.layout,placement:d.placement}},kx=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Qu=(t,s,a,c=1)=>{const d=t*c,h=s*c,v=T=>Ct(a,T).getOr([]),E=(T,D,B)=>{const L=jt(kx,B);return{offset:co(T,D),classesOn:$e(B,v),classesOff:$e(L,v)}};return{southeast:()=>E(-t,s,["top","alignLeft"]),southwest:()=>E(t,s,["top","alignRight"]),south:()=>E(-t/2,s,["top","alignCentre"]),northeast:()=>E(-t,-s,["bottom","alignLeft"]),northwest:()=>E(t,-s,["bottom","alignRight"]),north:()=>E(-t/2,-s,["bottom","alignCentre"]),east:()=>E(t,-s/2,["valignCentre","left"]),west:()=>E(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>E(d,h,["top","alignLeft","inset"]),insetNorthwest:()=>E(-d,h,["top","alignRight","inset"]),insetNorth:()=>E(-d/2,h,["top","alignCentre","inset"]),insetSoutheast:()=>E(d,-h,["bottom","alignLeft","inset"]),insetSouthwest:()=>E(-d,-h,["bottom","alignRight","inset"]),insetSouth:()=>E(-d/2,-h,["bottom","alignCentre","inset"]),insetEast:()=>E(-d,-h/2,["valignCentre","right","inset"]),insetWest:()=>E(d,-h/2,["valignCentre","left","inset"])}},N1=()=>Qu(0,0,{}),B1=ut,Qv=(t,s)=>a=>$1(a)==="rtl"?s:t,$1=t=>Ps(t,"direction")==="rtl"?"rtl":"ltr";var jc;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(jc||(jc={}));const Oh="data-alloy-vertical-dir",I1=t=>_w(t,s=>yo(s)&&Ms(s,"data-alloy-vertical-dir")===jc.BottomToTop),Zm=()=>vi("layouts",[Ke("onLtr"),Ke("onRtl"),po("onBottomLtr"),po("onBottomRtl")]),e0=(t,s,a,c,d,h,v)=>{const E=v.map(I1).getOr(!1),T=s.layouts.map(j=>j.onLtr(t)),D=s.layouts.map(j=>j.onRtl(t)),B=E?s.layouts.bind(j=>j.onBottomLtr.map(X=>X(t))).or(T).getOr(d):T.getOr(a),L=E?s.layouts.bind(j=>j.onBottomRtl.map(X=>X(t))).or(D).getOr(h):D.getOr(c);return Qv(B,L)(t)},$O=(t,s,a)=>{const c=s.hotspot,d=Zw(a,c.element),h=e0(t.element,s,qv(),Hw(),Lw(),ux(),R.some(s.hotspot.element));return R.some(B1({anchorBox:d,bubble:s.bubble.getOr(N1()),overrides:s.overrides,layouts:h}))};var IO=[Ke("hotspot"),po("bubble"),_e("overrides",{}),Zm(),Oo("placement",$O)];const Ox=(t,s,a)=>{const c=jw(a,s.x,s.y),d=hs(c.left,c.top,s.width,s.height),h=e0(t.element,s,Fw(),D1(),Fw(),D1(),R.none());return R.some(B1({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:h}))};var FO=[Ke("x"),Ke("y"),_e("height",0),_e("width",0),_e("bubble",N1()),_e("overrides",{}),Zm(),Oo("placement",Ox)];const tC=Gi.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),LO=t=>t.fold(ut,(s,a,c)=>s.translate(-a,-c)),HO=t=>t.fold(ut,ut),Ax=t=>To(t,(s,a)=>s.translate(a.left,a.top),co(0,0)),zO=t=>{const s=Xe(t,LO);return Ax(s)},Dx=t=>{const s=Xe(t,HO);return Ax(s)},VO=tC.screen,t0=tC.absolute,UO=(t,s,a)=>{const c=Bc(a.root).dom,d=h=>{const v=Ba(h),E=Ba(t.element);return So(v,E)};return R.from(c.frameElement).map(Ce.fromDom).filter(d).map(cc)},Rx=(t,s,a)=>{const c=Ba(t.element),d=Ia(c),h=UO(t,s,a).getOr(d);return t0(h,d.left,d.top)},Ah=(t,s,a,c)=>{const d=VO(co(t,s));return R.some(t1(d,a,c))},nC=(t,s,a,c,d)=>t.map(h=>{const v=[s,h.point],E=xO(c,()=>Dx(v),()=>Dx(v),()=>zO(v)),T=Tm(E.left,E.top,h.width,h.height),D=a.showAbove?Lw():qv(),B=a.showAbove?ux():Hw(),L=e0(d,a,D,B,D,B,R.none());return B1({anchorBox:T,bubble:a.bubble.getOr(N1()),overrides:a.overrides,layouts:L})}),oC=(t,s,a)=>{const c=Rx(t,a,s);return s.node.filter(Xn).bind(d=>{const h=d.dom.getBoundingClientRect(),v=Ah(h.left,h.top,h.width,h.height),E=s.node.getOr(t.element);return nC(v,c,s,a,E)})};var sC=[Ke("node"),Ke("root"),po("bubble"),Zm(),_e("overrides",{}),_e("showAbove",!1),Oo("placement",oC)];const Mx="\uFEFF",rC=" ",n0={create:(t,s,a,c)=>({start:t,soffset:s,finish:a,foffset:c})},o0=Gi.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ZO=(t,s,a,c)=>t.fold(s,a,c),aC=t=>t.fold(ut,ut,ut),Px=o0.before,jO=o0.on,iC=o0.after,GO={before:Px,on:jO,after:iC,cata:ZO,getStart:aC},Dh=Gi.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),qO=t=>Dh.exact(t.start,t.soffset,t.finish,t.foffset),cC=t=>t.match({domRange:s=>Ce.fromDom(s.startContainer),relative:(s,a)=>GO.getStart(s),exact:(s,a,c,d)=>s}),KO=Dh.domRange,YO=Dh.relative,XO=Dh.exact,Nx=t=>{const s=cC(t);return Bc(s)},JO=n0.create,Kr={domRange:KO,relative:YO,exact:XO,exactFromRange:qO,getWin:Nx,range:JO},nP=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,c)=>{t.setStart(a.dom,c)},a=>{t.setStartAfter(a.dom)})},Rh=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,c)=>{t.setEnd(a.dom,c)},a=>{t.setEndAfter(a.dom)})},s0=(t,s,a)=>{const c=t.document.createRange();return nP(c,s),Rh(c,a),c},Bx=(t,s,a,c,d)=>{const h=t.document.createRange();return h.setStart(s.dom,a),h.setEnd(c.dom,d),h},lC=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),$x=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?R.some(a).map(lC):R.none()},Ix=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?R.some(s).map(lC):R.none()},rg=Gi.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),F1=(t,s,a)=>s(Ce.fromDom(a.startContainer),a.startOffset,Ce.fromDom(a.endContainer),a.endOffset),QO=(t,s)=>s.match({domRange:a=>({ltr:ae(a),rtl:R.none}),relative:(a,c)=>({ltr:gs(()=>s0(t,a,c)),rtl:gs(()=>R.some(s0(t,c,a)))}),exact:(a,c,d,h)=>({ltr:gs(()=>Bx(t,a,c,d,h)),rtl:gs(()=>R.some(Bx(t,d,h,a,c)))})}),eA=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>rg.rtl(Ce.fromDom(d.endContainer),d.endOffset,Ce.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>F1(t,rg.ltr,a)):F1(t,rg.ltr,a)},L1=(t,s)=>{const a=QO(t,s);return eA(t,a)},uC=(t,s)=>L1(t,s).match({ltr:(c,d,h,v)=>{const E=t.document.createRange();return E.setStart(c.dom,d),E.setEnd(h.dom,v),E},rtl:(c,d,h,v)=>{const E=t.document.createRange();return E.setStart(h.dom,v),E.setEnd(c.dom,d),E}});rg.ltr,rg.rtl;const Fx=(t,s,a)=>vo(Ig(t,a),s),_r=(t,s)=>ya(s,t),Lx=(t,s,a,c)=>{const h=Ba(t).dom.createRange();return h.setStart(t.dom,s),h.setEnd(a.dom,c),h},dC=(t,s,a,c)=>{const d=Lx(t,s,a,c),h=So(t,a)&&s===c;return d.collapsed&&!h},oP=t=>R.from(t.getSelection()),Mh=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return R.some(n0.create(Ce.fromDom(s.startContainer),s.startOffset,Ce.fromDom(a.endContainer),a.endOffset))}else return R.none()},tA=t=>{if(t.anchorNode===null||t.focusNode===null)return Mh(t);{const s=Ce.fromDom(t.anchorNode),a=Ce.fromDom(t.focusNode);return dC(s,t.anchorOffset,a,t.focusOffset)?R.some(n0.create(s,t.anchorOffset,a,t.focusOffset)):Mh(t)}},Hx=t=>oP(t).filter(s=>s.rangeCount>0).bind(tA),mC=(t,s)=>{const a=uC(t,s);return $x(a)},H1=(t,s)=>{const a=uC(t,s);return Ix(a)},Ph=((t,s)=>{const a=h=>{if(!t(h))throw new Error("Can only get "+s+" value of a "+s+" node");return c(h).getOr("")},c=h=>t(h)?R.from(h.dom.nodeValue):R.none();return{get:a,getOption:c,set:(h,v)=>{if(!t(h))throw new Error("Can only set raw "+s+" value of a "+s+" node");h.dom.nodeValue=v}}})(sa,"text"),nA=t=>Ph.get(t),jm=(t,s)=>({element:t,offset:s}),zx=(t,s)=>{const a=fi(t);if(a.length===0)return jm(t,s);if(s<a.length)return jm(a[s],0);{const c=a[a.length-1],d=sa(c)?nA(c).length:fi(c).length;return jm(c,d)}},Gm=(t,s)=>sa(t)?jm(t,s):zx(t,s),qm=t=>t.foffset!==void 0,fC=(t,s)=>s.getSelection.getOrThunk(()=>()=>Hx(t))().map(c=>{if(qm(c)){const d=Gm(c.start,c.soffset),h=Gm(c.finish,c.foffset);return Kr.range(d.element,d.offset,h.element,h.offset)}else return c}),Vx=(t,s,a)=>{const c=Bc(s.root).dom,d=Rx(t,a,s),h=fC(c,s).bind(T=>{if(qm(T))return H1(c,Kr.exactFromRange(T)).orThunk(()=>{const B=Ce.fromText(Mx);zc(T.start,B);const L=mC(c,Kr.exact(B,0,B,1));return Vc(B),L}).bind(B=>Ah(B.left,B.top,B.width,B.height));{const D=Qo(T,L=>L.dom.getBoundingClientRect()),B={left:Math.min(D.firstCell.left,D.lastCell.left),right:Math.max(D.firstCell.right,D.lastCell.right),top:Math.min(D.firstCell.top,D.lastCell.top),bottom:Math.max(D.firstCell.bottom,D.lastCell.bottom)};return Ah(B.left,B.top,B.right-B.left,B.bottom-B.top)}}),E=fC(c,s).bind(T=>qm(T)?yo(T.start)?R.some(T.start):Hi(T.start):R.some(T.firstCell)).getOr(t.element);return nC(h,d,s,a,E)};var sP=[po("getSelection"),Ke("root"),po("bubble"),Zm(),_e("overrides",{}),_e("showAbove",!1),Oo("placement",Vx)];const gC="link-layout",Km=t=>t.x+t.width,ed=(t,s)=>t.x-s.width,z1=(t,s)=>t.y-s.height+t.height,Nh=t=>t.y,hC=(t,s,a)=>Sr(Km(t),Nh(t),a.southeast(),_1(),"southeast",is(t,{left:0,top:2}),gC),Gd=(t,s,a)=>Sr(ed(t,s),Nh(t),a.southwest(),Mw(),"southwest",is(t,{right:1,top:2}),gC),au=(t,s,a)=>Sr(Km(t),z1(t,s),a.northeast(),Zv(),"northeast",is(t,{left:0,bottom:3}),gC),V1=(t,s,a)=>Sr(ed(t,s),z1(t,s),a.northwest(),Xu(),"northwest",is(t,{right:1,bottom:3}),gC),a0=()=>[hC,Gd,au,V1],U1=()=>[Gd,hC,V1,au],pC=(t,s,a)=>{const c=Zw(a,s.item.element),d=e0(t.element,s,a0(),U1(),a0(),U1(),R.none());return R.some(B1({anchorBox:c,bubble:N1(),overrides:s.overrides,layouts:d}))};var Bh=[Ke("item"),Zm(),_e("overrides",{}),Oo("placement",pC)],W1=Un("type",{selection:sP,node:sC,hotspot:IO,submenu:Bh,makeshift:FO});const bC=[lc("classes",jr),ji("mode","all",["all","layout","placement"])],Ux=[_e("useFixed",An),po("getBounds")],Ym=[Wi("anchor",W1),vi("transition",bC)],i0=()=>{const t=document.documentElement;return M1(0,0,t.clientWidth,t.clientHeight)},oA=t=>{const s=cc(t.element),a=t.element.dom.getBoundingClientRect();return za(s.left,s.top,a.width,a.height)},Wx=(t,s,a,c,d,h)=>{const v=TO(s.anchorBox,t);return eC(v,c.element,s.bubble,s.layouts,d,a,s.overrides,h)},vC=(t,s,a,c,d)=>{const h=R.none();Zs(t,s,a,c,d,h)},Zs=(t,s,a,c,d,h)=>{const v=si("placement.info",Ut(Ym),d),E=v.anchor,T=c.element,D=a.get(c.uid);Ot(()=>{vn(T,"position","fixed");const B=Xs(T,"visibility");vn(T,"visibility","hidden");const L=s.useFixed()?i0():oA(t);E.placement(t,E,L).each(U=>{const j=h.orThunk(()=>s.getBounds.map(Fn)),X=Wx(L,U,j,c,D,v.transition);a.set(c.uid,X)}),B.fold(()=>{to(T,"visibility")},U=>{vn(T,"visibility",U)}),Xs(T,"left").isNone()&&Xs(T,"top").isNone()&&Xs(T,"right").isNone()&&Xs(T,"bottom").isNone()&&Pa(Xs(T,"position"),"fixed")&&to(T,"position")},T)};var Zx=Object.freeze({__proto__:null,position:vC,positionWithinBounds:Zs,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,c)=>{const d=c.element;yt(["position","left","right","top","bottom"],h=>to(d,h)),yx(d),a.clear(c.uid)}}),Xm=Object.freeze({__proto__:null,init:()=>{let t={};return Yi({readState:()=>t,clear:d=>{je(d)?delete t[d]:t={}},set:(d,h)=>{t[d]=h},get:d=>Ct(t,d)})}});const _a=Tr({fields:Ux,name:"positioning",active:gx,apis:Zx,state:Xm}),$h=t=>t.getSystem().isConnected(),Z1=t=>{Ln(t,Bm());const s=t.components();yt(s,Z1)},Ih=t=>{const s=t.components();yt(s,Ih),Ln(t,dc())},yC=(t,s)=>{t.getSystem().addToWorld(s),Xn(t.element)&&Ih(s)},Fh=t=>{Z1(t),t.getSystem().removeFromWorld(t)},ag=(t,s)=>{Sa(t.element,s.element)},iu=t=>{yt(t.components(),s=>Vc(s.element)),Nf(t.element),t.syncComponents()},sA=(t,s,a)=>{const c=t.components();iu(t);const d=a(s),h=jt(c,d);yt(h,v=>{Z1(v),t.getSystem().removeFromWorld(v)}),yt(d,v=>{$h(v)?ag(t,v):(t.getSystem().addToWorld(v),ag(t,v),Xn(t.element)&&Ih(v))}),t.syncComponents()},rA=(t,s,a)=>{const c=t.components(),d=$e(s,E=>ah(E).toArray());yt(c,E=>{go(d,E)||Fh(E)});const h=a(s),v=jt(c,h);yt(v,E=>{$h(E)&&Fh(E)}),yt(h,E=>{$h(E)||yC(t,E)}),t.syncComponents()},Jm=(t,s)=>{Lh(t,s,Sa)},Lh=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),Xn(t.element)&&Ih(s),t.syncComponents()},l0=t=>{Z1(t),Vc(t.element),t.getSystem().removeFromWorld(t)},td=t=>{const s=ra(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());l0(t),s.each(a=>{a.syncComponents()})},wC=t=>{const s=t.components();yt(s,l0),Nf(t.element),t.syncComponents()},Yr=(t,s)=>{Sl(t,s,Sa)},Kd=(t,s)=>{Sl(t,s,gl)},Sl=(t,s,a)=>{a(t,s.element);const c=fi(s.element);yt(c,d=>{s.getByDom(d).each(Ih)})},Hh=t=>{const s=fi(t.element);yt(s,a=>{t.getByDom(a).each(Z1)}),Vc(t.element)},Ua=(t,s,a,c)=>{a.get().each(v=>{wC(t)});const d=s.getAttachPoint(t);Jm(d,t);const h=t.getSystem().build(c);return Jm(t,h),a.set(h),h},Ei=(t,s,a,c)=>{const d=Ua(t,s,a,c);return s.onOpen(t,d),d},ii=(t,s,a,c)=>a.get().map(()=>Ua(t,s,a,c)),xl=(t,s,a,c,d)=>{j1(t,s),Ei(t,s,a,c),d(),G1(t,s)},u0=(t,s,a)=>{a.get().each(c=>{wC(t),td(t),s.onClose(t,c),a.clear()})},pc=(t,s,a)=>a.isOpen(),ig=(t,s,a,c)=>pc(t,s,a)&&a.get().exists(d=>s.isPartOf(t,d,c)),CC=(t,s,a)=>a.get(),aA=(t,s,a,c)=>{Xs(t.element,s).fold(()=>{Ss(t.element,a)},d=>{Et(t.element,a,d)}),vn(t.element,s,c)},jx=(t,s,a)=>{zr(t.element,a).fold(()=>to(t.element,s),c=>vn(t.element,s,c))},j1=(t,s,a)=>{const c=s.getAttachPoint(t);vn(t.element,"position",_a.getMode(c)),aA(t,"visibility",s.cloakVisibilityAttr,"hidden")},Gx=t=>qs(["top","left","right","bottom"],s=>Xs(t,s).isSome()),G1=(t,s,a)=>{Gx(t.element)||to(t.element,"position"),jx(t,"visibility",s.cloakVisibilityAttr)};var d0=Object.freeze({__proto__:null,cloak:j1,decloak:G1,open:Ei,openWhileCloaked:xl,close:u0,isOpen:pc,isPartOf:ig,getState:CC,setContent:ii}),qx=Object.freeze({__proto__:null,events:(t,s)=>zo([We(m1(),(a,c)=>{u0(a,t,s)})])}),cA=[Wn("onOpen"),Wn("onClose"),Ke("isPartOf"),Ke("getAttachPoint"),_e("cloakVisibilityAttr","data-precloak-visibility")],Kx=Object.freeze({__proto__:null,init:()=>{const t=Rn(),s=ae("not-implemented");return Yi({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const Hn=Tr({fields:cA,name:"sandboxing",active:qx,apis:d0,state:Kx}),cu=ae("dismiss.popups"),cg=ae("reposition.popups"),SC=ae("mouse.released"),Yx=Zo([_e("isExtraPart",An),vi("fireEventInstead",[_e("event",$m())])]),q1=t=>{const s=si("Dismissal",Yx,t);return{[cu()]:{schema:Zo([Ke("target")]),onReceive:(a,c)=>{Hn.isOpen(a)&&(Hn.isPartOf(a,c.target)||s.isExtraPart(a,c.target)||s.fireEventInstead.fold(()=>Hn.close(a),h=>Ln(a,h.event)))}}}},lA=Zo([vi("fireEventInstead",[_e("event",U2())]),Xl("doReposition")]),zh=t=>{const s=si("Reposition",lA,t);return{[cg()]:{onReceive:a=>{Hn.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),c=>Ln(a,c.event))}}}},m0=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},bc=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var Qm=Object.freeze({__proto__:null,onLoad:m0,onUnload:bc,setValue:(t,s,a,c)=>{s.store.manager.setValue(t,s,a,c)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),h0=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[Bo((c,d)=>{m0(c,t,s)}),Zu((c,d)=>{bc(c,t,s)})]:[Kv(t,s,m0)];return zo(a)}});const lg=()=>{const t=en(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,c=()=>{t.set(null)};return Yi({set:t.set,get:t.get,isNotSet:a,clear:c,readState:s})},uA=()=>Yi({readState:Q}),Xx=()=>{const t=en({}),s=en({});return Yi({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:v=>Ct(t.get(),v).orThunk(()=>Ct(s.get(),v)),update:v=>{const E=t.get(),T=s.get(),D={},B={};yt(v,L=>{D[L.value]=L,Ct(L,"meta").each(U=>{Ct(U,"text").each(j=>{B[j]=L})})}),t.set({...E,...D}),s.set({...T,...B})},clear:()=>{t.set({}),s.set({})}})};var Uh=Object.freeze({__proto__:null,memory:lg,dataset:Xx,manual:uA,init:t=>t.store.manager.state(t)});const Yd=(t,s,a,c)=>{const d=s.store;a.update([c]),d.setValue(t,c),s.onSetValue(t,c)},mA=(t,s,a)=>{const c=s.store,d=c.getDataKey(t);return a.lookup(d).getOrThunk(()=>c.getFallbackEntry(d))},fA=(t,s,a)=>{s.store.initialValue.each(d=>{Yd(t,s,a,d)})},Jx=(t,s,a)=>{a.clear()};var xC=[po("initialValue"),Ke("getFallbackEntry"),Ke("getDataKey"),Ke("setValue"),Oo("manager",{setValue:Yd,getValue:mA,onLoad:fA,onUnload:Jx,state:Xx})];const EC=(t,s,a)=>s.store.getValue(t),TC=(t,s,a,c)=>{s.store.setValue(t,c),s.onSetValue(t,c)},p0=(t,s,a)=>{s.store.initialValue.each(c=>{s.store.setValue(t,c)})};var ef=[Ke("getValue"),_e("setValue",Q),po("initialValue"),Oo("manager",{setValue:TC,getValue:EC,onLoad:p0,onUnload:Q,state:yl.init})];const Qx=(t,s,a,c)=>{a.set(c),s.onSetValue(t,c)},K1=(t,s,a)=>a.get(),_C=(t,s,a)=>{s.store.initialValue.each(c=>{a.isNotSet()&&a.set(c)})},gA=(t,s,a)=>{a.clear()};var Y1=[po("initialValue"),Oo("manager",{setValue:Qx,getValue:K1,onLoad:_C,onUnload:gA,state:lg})],hA=[Zi("store",{mode:"memory"},Un("mode",{memory:Y1,manual:ef,dataset:xC})),Wn("onSetValue"),_e("resetOnDom",!1)];const St=Tr({fields:hA,name:"representing",active:h0,apis:Qm,extra:{setValueFrom:(t,s)=>{const a=St.getValue(s);St.setValue(t,a)}},state:Uh}),hr=(t,s)=>Hu(t,{},Xe(s,a=>tw(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([zs("dump",ut)])),Xd=t=>t.dump,Qs=(t,s)=>({...lt(s),...t.dump}),Gc={field:hr,augment:Qs,get:Xd},b0="placeholder",X1=Gi.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),lu=t=>oo(t,"uiType"),v0=(t,s,a,c)=>t.exists(d=>d!==a.owner)?X1.single(!0,ae(a)):Ct(c,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+os(c)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),y0=(t,s,a,c)=>lu(a)&&a.uiType===b0?v0(t,s,a,c):X1.single(!1,ae(a)),Wh=(t,s,a,c)=>y0(t,s,a,c).fold((h,v)=>{const E=lu(a)?v(s,a.config,a.validated):v(s),T=Ct(E,"components").getOr([]),D=$e(T,B=>Wh(t,s,B,c));return[{...E,components:D}]},(h,v)=>{if(lu(a)){const E=v(s,a.config,a.validated);return a.validated.preprocess.getOr(ut)(E)}else return v(s)}),eE=(t,s,a,c)=>$e(a,d=>Wh(t,s,d,c)),J1=(t,s)=>{let a=!1;const c=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},h=()=>s.fold((v,E)=>v,(v,E)=>v);return{name:ae(t),required:h,used:c,replace:d}},kC=(t,s,a,c)=>{const d=Qo(c,(v,E)=>J1(E,v)),h=eE(t,s,a,d);return Jo(d,v=>{if(v.used()===!1&&v.required())throw new Error("Placeholder: "+v.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),h},OC=X1.single,pA=X1.multiple,uu=ae(b0),w0=Gi.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Zh=_e("factory",{sketch:ut}),fa=_e("schema",[]),sr=Ke("name"),C0=ia("pname","pname",Wc(t=>"<alloy."+Rt(t.name)+">"),mr()),Q1=zs("schema",()=>[po("preprocess")]),S0=_e("defaults",ae({})),eb=_e("overrides",ae({})),tb=Ut([Zh,fa,sr,C0,S0,eb]),jh=Ut([Zh,fa,sr,S0,eb]),tE=Ut([Zh,fa,sr,C0,S0,eb]),nb=Ut([Zh,Q1,sr,Ke("unit"),C0,S0,eb]),nE=t=>t.fold(R.some,R.none,R.some,R.some),oE=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},sE=t=>t.fold(ut,ut,ut,ut),qc=(t,s)=>a=>{const c=si("Converting part type",s,a);return t(c)},ka=qc(w0.required,tb),El=qc(w0.external,jh),Ti=qc(w0.optional,tE),ob=qc(w0.group,nb),x0=ae("entirety");var rE=Object.freeze({__proto__:null,required:ka,external:El,optional:Ti,group:ob,asNamedPart:nE,name:oE,asCommon:sE,original:x0});const sb=(t,s,a,c)=>ko(s.defaults(t,a,c),a,{uid:t.partUids[s.name]},s.overrides(t,a,c)),bA=(t,s,a)=>{const c={},d={};return yt(a,h=>{h.fold(v=>{c[v.pname]=OC(!0,(E,T,D)=>v.factory.sketch(sb(E,v,T,D)))},v=>{const E=s.parts[v.name];d[v.name]=ae(v.factory.sketch(sb(s,v,E[x0()]),E))},v=>{c[v.pname]=OC(!1,(E,T,D)=>v.factory.sketch(sb(E,v,T,D)))},v=>{c[v.pname]=pA(!0,(E,T,D)=>{const B=E[v.name];return Xe(B,L=>v.factory.sketch(ko(v.defaults(E,L,D),L,v.overrides(E,L))))})})}),{internals:ae(c),externals:ae(d)}},Jd=(t,s)=>{const a={};return yt(s,c=>{nE(c).each(d=>{const h=rb(t,d.pname);a[d.name]=v=>{const E=si("Part: "+d.name+" in "+t,Ut(d.schema),v);return{...h,config:v,validated:E}}})}),a},rb=(t,s)=>({uiType:uu(),owner:t,name:s}),AC=(t,s,a)=>({uiType:uu(),owner:t,name:s,config:a,validated:{}}),aE=t=>$e(t,s=>s.fold(R.none,R.some,R.none,R.none).map(a=>Jl(a.name,a.schema.concat([T1(x0())]))).toArray()),iE=t=>Xe(t,oE),DC=(t,s,a)=>bA(t,s,a),E0=(t,s,a)=>kC(R.some(t),s,s.components,a),$o=(t,s,a)=>{const c=s.partUids[a];return t.getSystem().getByUid(c).toOptional()},Qd=(t,s,a)=>$o(t,s,a).getOrDie("Could not find part: "+a),cE=(t,s,a)=>{const c={},d=s.partUids,h=t.getSystem();return yt(a,v=>{c[v]=ae(h.getByUid(d[v]))}),c},RC=(t,s)=>{const a=t.getSystem();return Qo(s.partUids,(c,d)=>ae(a.getByUid(c)))},MC=t=>os(t.partUids),ug=(t,s,a)=>{const c={},d=s.partUids,h=t.getSystem();return yt(a,v=>{c[v]=ae(h.getByUid(d[v]).getOrDie())}),c},PC=(t,s)=>{const a=iE(s);return la(Xe(a,c=>({key:c,value:t+"-"+c})))},NC=t=>ia("partUids","partUids",Nn(s=>PC(s.uid,t)),mr());var vA=Object.freeze({__proto__:null,generate:Jd,generateOne:AC,schemas:aE,names:iE,substitutes:DC,components:E0,defaultUids:PC,defaultUidsSchema:NC,getAllParts:RC,getAllPartNames:MC,getPart:$o,getPartOrDie:Qd,getParts:cE,getPartsOrDie:ug});const Gh=(t,s)=>(t.length>0?[Jl("parts",t)]:[]).concat([Ke("uid"),_e("dom",{}),_e("components",[]),T1("originalSpec"),_e("debug.sketcher",{})]).concat(s),qh=(t,s,a,c,d)=>{const h=Gh(c,d);return si(t+" [SpecSchema]",Zo(h.concat(s)),a)},BC=(t,s,a,c)=>{const d=tf(c),h=qh(t,s,d,[],[]);return a(h,d)},$C=(t,s,a,c,d)=>{const h=tf(d),v=aE(a),E=NC(a),T=qh(t,s,h,v,[E]),D=DC(t,T,a),B=E0(t,T,D.internals());return c(T,B,h,D.externals())},Tl=t=>oo(t,"uid"),tf=t=>Tl(t)?t:{...t,uid:sh("uid")},yA=t=>t.uid!==void 0,ab=Zo([Ke("name"),Ke("factory"),Ke("configFields"),_e("apis",{}),_e("extraApis",{})]),wA=Zo([Ke("name"),Ke("factory"),Ke("configFields"),Ke("partFields"),_e("apis",{}),_e("extraApis",{})]),nc=t=>{const s=si("Sketcher for "+t.name,ab,t),a=h=>BC(s.name,s.configFields,s.factory,h),c=Qo(s.apis,Yf),d=Qo(s.extraApis,(h,v)=>Ov(h,v));return{name:s.name,configFields:s.configFields,sketch:a,...c,...d}},Oa=t=>{const s=si("Sketcher for "+t.name,wA,t),a=v=>$C(s.name,s.configFields,s.partFields,s.factory,v),c=Jd(s.name,s.partFields),d=Qo(s.apis,Yf),h=Qo(s.extraApis,(v,E)=>Ov(v,E));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:c,...d,...h}},dg=t=>mi("input")(t)&&Ms(t,"type")!=="radio"||mi("textarea")(t);var lE=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const CA=[Ke("find")],Bn=Tr({fields:CA,name:"composing",apis:lE}),IC=["input","button","textarea","select"],uE=(t,s,a)=>{(s.disabled()?mE:ib)(t,s)},FC=(t,s)=>s.useNative===!0&&go(IC,Qa(t.element)),SA=t=>Gp(t.element,"disabled"),xA=t=>{Et(t.element,"disabled","disabled")},dE=t=>{Ss(t.element,"disabled")},EA=t=>Ms(t.element,"aria-disabled")==="true",At=t=>{Et(t.element,"aria-disabled","true")},nf=t=>{Et(t.element,"aria-disabled","false")},mE=(t,s,a)=>{s.disableClass.each(d=>{Us(t.element,d)}),(FC(t,s)?xA:At)(t),s.onDisabled(t)},ib=(t,s,a)=>{s.disableClass.each(d=>{bs(t.element,d)}),(FC(t,s)?dE:nf)(t),s.onEnabled(t)},cb=(t,s)=>FC(t,s)?SA(t):EA(t);var cP=Object.freeze({__proto__:null,enable:ib,disable:mE,isDisabled:cb,onLoad:uE,set:(t,s,a,c)=>{(c?mE:ib)(t,s)}}),_A=Object.freeze({__proto__:null,exhibit:(t,s)=>Xi({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>zo([dw(Ki(),(a,c)=>cb(a,t)),Kv(t,s,uE)])}),fE=[Nr("disabled",An),_e("useNative",!0),po("disableClass"),Wn("onDisabled"),Wn("onEnabled")];const sn=Tr({fields:fE,name:"disabling",active:_A,apis:cP}),em=(t,s,a,c)=>{const d=_r(t.element,"."+s.highlightClass);yt(d,h=>{qs(c,E=>So(E.element,h))||(bs(h,s.highlightClass),t.getSystem().getByDom(h).each(E=>{s.onDehighlight(t,E),Ln(E,p1())}))})},gE=(t,s,a)=>em(t,s,a,[]),kA=(t,s,a,c)=>{T0(t,s,a,c)&&(bs(c.element,s.highlightClass),s.onDehighlight(t,c),Ln(c,p1()))},lb=(t,s,a,c)=>{em(t,s,a,[c]),T0(t,s,a,c)||(Us(c.element,s.highlightClass),s.onHighlight(t,c),Ln(c,h1()))},OA=(t,s,a)=>{Kh(t,s).each(c=>{lb(t,s,a,c)})},hE=(t,s,a)=>{HC(t,s).each(c=>{lb(t,s,a,c)})},LC=(t,s,a,c)=>{DA(t,s,a,c).fold(d=>{throw d},d=>{lb(t,s,a,d)})},pE=(t,s,a,c)=>{const d=_0(t,s);on(d,c).each(v=>{lb(t,s,a,v)})},T0=(t,s,a,c)=>gr(c.element,s.highlightClass),AA=(t,s,a)=>Ws(t.element,"."+s.highlightClass).bind(c=>t.getSystem().getByDom(c).toOptional()),DA=(t,s,a,c)=>{const d=_r(t.element,"."+s.itemClass);return R.from(d[c]).fold(()=>xn.error(new Error("No element found with index "+c)),t.getSystem().getByDom)},Kh=(t,s,a)=>Ws(t.element,"."+s.itemClass).bind(c=>t.getSystem().getByDom(c).toOptional()),HC=(t,s,a)=>{const c=_r(t.element,"."+s.itemClass);return(c.length>0?R.some(c[c.length-1]):R.none()).bind(h=>t.getSystem().getByDom(h).toOptional())},bE=(t,s,a,c)=>{const d=_r(t.element,"."+s.itemClass);return Po(d,v=>gr(v,s.highlightClass)).bind(v=>{const E=Ch(v,c,0,d.length-1);return t.getSystem().getByDom(d[E]).toOptional()})},RA=(t,s,a)=>bE(t,s,a,-1),MA=(t,s,a)=>bE(t,s,a,1),_0=(t,s,a)=>{const c=_r(t.element,"."+s.itemClass);return Ii(Xe(c,d=>t.getSystem().getByDom(d).toOptional()))};var nd=Object.freeze({__proto__:null,dehighlightAll:gE,dehighlight:kA,highlight:lb,highlightFirst:OA,highlightLast:hE,highlightAt:LC,highlightBy:pE,isHighlighted:T0,getHighlighted:AA,getFirst:Kh,getLast:HC,getPrevious:RA,getNext:MA,getCandidates:_0}),k0=[Ke("highlightClass"),Ke("itemClass"),Wn("onHighlight"),Wn("onDehighlight")];const ao=Tr({fields:k0,name:"highlighting",apis:nd}),PA=[8],tm=[9],od=[13],O0=[27],vc=[32],A0=[37],nm=[38],Yh=[39],ub=[40],zC=(t,s,a)=>{const c=ws(t.slice(0,s)),d=ws(t.slice(s+1));return on(c.concat(d),a)},NA=(t,s,a)=>{const c=ws(t.slice(0,s));return on(c,a)},VC=(t,s,a)=>{const c=t.slice(0,s),d=t.slice(s+1);return on(d.concat(c),a)},BA=(t,s,a)=>{const c=t.slice(s+1);return on(c,a)},zn=t=>s=>{const a=s.raw;return go(t,a.which)},yc=t=>s=>eo(t,a=>a(s)),om=t=>t.raw.shiftKey===!0,$A=t=>t.raw.ctrlKey===!0,Xh=Te(om),Qn=(t,s)=>({matches:t,classification:s}),IA=(t,s)=>on(t,c=>c.matches(s)).map(c=>c.classification),UC=(t,s,a)=>{s.exists(d=>a.exists(h=>So(h,d)))||qt(t,Cv(),{prevFocus:s,newFocus:a})},l=()=>{const t=a=>Cl(a.element);return{get:t,set:(a,c)=>{const d=t(a);a.getSystem().triggerFocus(c,a.element);const h=t(a);UC(a,d,h)}}},m=()=>{const t=a=>ao.getHighlighted(a).map(c=>c.element);return{get:t,set:(a,c)=>{const d=t(a);a.getSystem().getByDom(c).fold(Q,v=>{ao.highlight(a,v)});const h=t(a);UC(a,d,h)}}};var b;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(b||(b={}));const S=(t,s,a,c,d)=>{const h=()=>t.concat([_e("focusManager",l()),Zi("focusInside","onFocus",Dm(D=>go(["onFocus","onEnterOrSpace","onApi"],D)?xn.value(D):xn.error("Invalid value for focusInside"))),Oo("handler",T),Oo("state",s),Oo("sendFocusIn",d)]),v=(D,B,L,U,j)=>{const X=L(D,B,U,j);return IA(X,B.event).bind(ce=>ce(D,B,U,j))},T={schema:h,processKey:v,toEvents:(D,B)=>{const L=D.focusInside!==b.OnFocusMode?R.none():d(D).map(X=>We(Ql(),(ce,ke)=>{X(ce,D,B),ke.stop()})),U=(X,ce)=>{const ke=zn(vc.concat(od))(ce.event);D.focusInside===b.OnEnterOrSpaceMode&&ke&&Yg(X,ce)&&d(D).each(pe=>{pe(X,D,B),ce.stop()})},j=[We(bl(),(X,ce)=>{v(X,ce,a,D,B).fold(()=>{U(X,ce)},ke=>{ce.stop()})}),We(Mm(),(X,ce)=>{v(X,ce,c,D,B).each(ke=>{ce.stop()})})];return zo(L.toArray().concat(j))}};return T},O=t=>{const s=[po("onEscape"),po("onEnter"),_e("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),_e("firstTabstop",0),_e("useTabstopAt",Dt),po("visibilitySelector")].concat([t]),a=(pe,ge)=>{const Oe=pe.visibilitySelector.bind(Je=>ou(ge,Je)).getOr(ge);return fs(Oe)>0},c=(pe,ge)=>{const Oe=_r(pe.element,ge.selector),Je=vo(Oe,Ve=>a(ge,Ve));return R.from(Je[ge.firstTabstop])},d=(pe,ge)=>ge.focusManager.get(pe).bind(Oe=>ou(Oe,ge.selector)),h=(pe,ge)=>a(pe,ge)&&pe.useTabstopAt(ge),v=(pe,ge,Oe)=>{c(pe,ge).each(Je=>{ge.focusManager.set(pe,Je)})},E=(pe,ge,Oe,Je,Ve)=>Ve(ge,Oe,Ie=>h(Je,Ie)).fold(()=>Je.cyclic?R.some(!0):R.none(),Ie=>(Je.focusManager.set(pe,Ie),R.some(!0))),T=(pe,ge,Oe,Je)=>{const Ve=_r(pe.element,Oe.selector);return d(pe,Oe).bind(Ie=>Po(Ve,It(So,Ie)).bind(gt=>E(pe,Ve,gt,Oe,Je)))},D=(pe,ge,Oe)=>{const Je=Oe.cyclic?zC:NA;return T(pe,ge,Oe,Je)},B=(pe,ge,Oe)=>{const Je=Oe.cyclic?VC:BA;return T(pe,ge,Oe,Je)},L=pe=>$c(pe).bind(_f).exists(ge=>So(ge,pe)),U=(pe,ge,Oe)=>d(pe,Oe).filter(Je=>!Oe.useTabstopAt(Je)).bind(Je=>(L(Je)?D:B)(pe,ge,Oe)),j=(pe,ge,Oe)=>Oe.onEnter.bind(Je=>Je(pe,ge)),X=(pe,ge,Oe)=>Oe.onEscape.bind(Je=>Je(pe,ge)),ce=ae([Qn(yc([om,zn(tm)]),D),Qn(zn(tm),B),Qn(yc([Xh,zn(od)]),j)]),ke=ae([Qn(zn(O0),X),Qn(zn(tm),U)]);return S(s,yl.init,ce,ke,()=>R.some(v))};var M=O(zs("cyclic",An)),H=O(zs("cyclic",Dt));const q=(t,s,a)=>(Ev(t,a,Ki()),R.some(!0)),ee=(t,s,a)=>dg(a)&&zn(vc)(s.event)?R.none():q(t,s,a),le=(t,s)=>R.some(!0),Se=[_e("execute",ee),_e("useSpace",!1),_e("useEnter",!0),_e("useControlEnter",!1),_e("useDown",!1)],et=(t,s,a)=>a.execute(t,s,t.element),vt=(t,s,a,c)=>{const d=a.useSpace&&!dg(t.element)?vc:[],h=a.useEnter?od:[],v=a.useDown?ub:[],E=d.concat(h).concat(v);return[Qn(zn(E),et)].concat(a.useControlEnter?[Qn(yc([$A,zn(od)]),et)]:[])},pt=(t,s,a,c)=>a.useSpace&&!dg(t.element)?[Qn(zn(vc),le)]:[];var Ze=S(Se,yl.init,vt,pt,()=>R.none());const wt=()=>{const t=Rn();return Yi({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,h)=>{t.set({numRows:d,numColumns:h})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var Nt=Object.freeze({__proto__:null,flatgrid:wt,init:t=>t.state(t)});const mn=t=>(s,a,c,d)=>{const h=t(s.element);return Ls(h,s,a,c,d)},_n=(t,s)=>{const a=Qv(t,s);return mn(a)},ss=(t,s)=>{const a=Qv(s,t);return mn(a)},kr=t=>(s,a,c,d)=>Ls(t,s,a,c,d),Ls=(t,s,a,c,d)=>c.focusManager.get(s).bind(v=>t(s.element,v,c,d)).map(v=>(c.focusManager.set(s,v),!0)),_i=kr,mg=kr,fg=kr,WC=t=>t.offsetWidth<=0&&t.offsetHeight<=0,D0=t=>!WC(t.dom),Ro=(t,s)=>Po(t,s).map(a=>({index:a,candidates:t})),Wa=(t,s,a)=>{const c=v=>So(v,s),d=_r(t,a),h=vo(d,D0);return Ro(h,c)},ga=(t,s)=>Po(t,a=>So(s,a)),wc=(t,s,a,c)=>{const d=Math.floor(s/a),h=s%a;return c(d,h).bind(v=>{const E=v.row*a+v.column;return E>=0&&E<t.length?R.some(t[E]):R.none()})},oc=(t,s,a,c,d)=>wc(t,s,c,(h,v)=>{const T=h===a-1?t.length-h*c:c,D=Ch(v,d,0,T-1);return R.some({row:h,column:D})}),of=(t,s,a,c,d)=>wc(t,s,c,(h,v)=>{const E=Ch(h,d,0,a-1),D=E===a-1?t.length-E*c:c,B=gc(v,0,D-1);return R.some({row:E,column:B})}),ci=(t,s,a,c)=>oc(t,s,a,c,1),ZC=(t,s,a,c)=>oc(t,s,a,c,-1),db=(t,s,a,c)=>of(t,s,a,c,-1),sd=(t,s,a,c)=>of(t,s,a,c,1),Aa=[Ke("selector"),_e("execute",ee),tc("onEscape"),_e("captureTab",!1),Dw()],mb=(t,s,a)=>{Ws(t.element,s.selector).each(c=>{s.focusManager.set(t,c)})},vE=(t,s)=>s.focusManager.get(t).bind(a=>ou(a,s.selector)),yE=(t,s,a,c)=>vE(t,a).bind(d=>a.execute(t,s,d)),Jh=t=>(s,a,c,d)=>Wa(s,a,c.selector).bind(h=>t(h.candidates,h.index,d.getNumRows().getOr(c.initSize.numRows),d.getNumColumns().getOr(c.initSize.numColumns))),wE=(t,s,a)=>a.captureTab?R.some(!0):R.none(),R0=(t,s,a)=>a.onEscape(t,s),CE=Jh(ZC),gg=Jh(ci),uP=Jh(db),N8=Jh(sd),B8=ae([Qn(zn(A0),_n(CE,gg)),Qn(zn(Yh),ss(CE,gg)),Qn(zn(nm),_i(uP)),Qn(zn(ub),mg(N8)),Qn(yc([om,zn(tm)]),wE),Qn(yc([Xh,zn(tm)]),wE),Qn(zn(vc.concat(od)),yE)]),$8=ae([Qn(zn(O0),R0),Qn(zn(vc),le)]);var I8=S(Aa,wt,B8,$8,()=>R.some(mb));const dP=(t,s,a,c,d)=>{const h=E=>Qa(E)==="button"&&Ms(E,"disabled")==="disabled",v=(E,T,D)=>d(E,T,c,0,D.length-1,D[T],B=>h(D[B])?v(E,B,D):R.from(D[B]));return Wa(t,a,s).bind(E=>{const T=E.index,D=E.candidates;return v(T,T,D)})},mP=(t,s,a,c)=>dP(t,s,a,c,(d,h,v,E,T,D,B)=>{const L=gc(h+v,E,T);return L===d?R.from(D):B(L)}),M0=(t,s,a,c)=>dP(t,s,a,c,(d,h,v,E,T,D,B)=>{const L=Ch(h,v,E,T);return L===d?R.none():B(L)}),FA=[Ke("selector"),_e("getInitial",R.none),_e("execute",ee),tc("onEscape"),_e("executeOnMove",!1),_e("allowVertical",!0),_e("allowHorizontal",!0),_e("cycles",!0)],F8=(t,s)=>s.focusManager.get(t).bind(a=>ou(a,s.selector)),fP=(t,s,a)=>F8(t,a).bind(c=>a.execute(t,s,c)),gP=(t,s,a)=>{s.getInitial(t).orThunk(()=>Ws(t.element,s.selector)).each(c=>{s.focusManager.set(t,c)})},hP=(t,s,a)=>(a.cycles?M0:mP)(t,a.selector,s,-1),pP=(t,s,a)=>(a.cycles?M0:mP)(t,a.selector,s,1),_l=t=>(s,a,c,d)=>t(s,a,c,d).bind(()=>c.executeOnMove?fP(s,a,c):R.some(!0)),L8=(t,s,a)=>a.onEscape(t,s),H8=(t,s,a,c)=>{const d=[...a.allowHorizontal?A0:[]].concat(a.allowVertical?nm:[]),h=[...a.allowHorizontal?Yh:[]].concat(a.allowVertical?ub:[]);return[Qn(zn(d),_l(_n(hP,pP))),Qn(zn(h),_l(ss(hP,pP))),Qn(zn(od),fP),Qn(zn(vc),fP)]},z8=ae([Qn(zn(vc),le),Qn(zn(O0),L8)]);var V8=S(FA,yl.init,H8,z8,()=>R.some(gP));const SE=(t,s,a)=>R.from(t[s]).bind(c=>R.from(c[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),fb=(t,s,a,c)=>{const h=t[s].length,v=Ch(a,c,0,h-1);return SE(t,s,v)},xE=(t,s,a,c)=>{const d=Ch(a,c,0,t.length-1),h=t[d].length,v=gc(s,0,h-1);return SE(t,d,v)},bP=(t,s,a,c)=>{const h=t[s].length,v=gc(a+c,0,h-1);return SE(t,s,v)},EE=(t,s,a,c)=>{const d=gc(a+c,0,t.length-1),h=t[d].length,v=gc(s,0,h-1);return SE(t,d,v)},TE=(t,s,a)=>fb(t,s,a,1),LA=(t,s,a)=>fb(t,s,a,-1),U8=(t,s,a)=>xE(t,a,s,-1),W8=(t,s,a)=>xE(t,a,s,1),Z8=(t,s,a)=>bP(t,s,a,-1),j8=(t,s,a)=>bP(t,s,a,1),G8=(t,s,a)=>EE(t,a,s,-1),q8=(t,s,a)=>EE(t,a,s,1),vP=[Jl("selectors",[Ke("row"),Ke("cell")]),_e("cycles",!0),_e("previousSelector",R.none),_e("execute",ee)],HA=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return Ws(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},K8=(t,s,a)=>Cl(t.element).bind(c=>a.execute(t,s,c)),Y8=(t,s)=>Xe(t,a=>_r(a,s.selectors.cell)),_E=(t,s)=>(a,c,d)=>{const h=d.cycles?t:s;return ou(c,d.selectors.row).bind(v=>{const E=_r(v,d.selectors.cell);return ga(E,c).bind(T=>{const D=_r(a,d.selectors.row);return ga(D,v).bind(B=>{const L=Y8(D,d);return h(L,B,T).map(U=>U.cell)})})})},yP=_E(LA,Z8),Qh=_E(TE,j8),wP=_E(U8,G8),X8=_E(W8,q8),zA=ae([Qn(zn(A0),_n(yP,Qh)),Qn(zn(Yh),ss(yP,Qh)),Qn(zn(nm),_i(wP)),Qn(zn(ub),mg(X8)),Qn(zn(vc.concat(od)),K8)]),J8=ae([Qn(zn(vc),le)]);var CP=S(vP,yl.init,zA,J8,()=>R.some(HA));const SP=[Ke("selector"),_e("execute",ee),_e("moveOnTab",!1)],VA=(t,s,a)=>a.focusManager.get(t).bind(c=>a.execute(t,s,c)),xP=(t,s,a)=>{Ws(t.element,s.selector).each(c=>{s.focusManager.set(t,c)})},UA=(t,s,a)=>M0(t,a.selector,s,-1),EP=(t,s,a)=>M0(t,a.selector,s,1),Q8=(t,s,a,c)=>a.moveOnTab?fg(UA)(t,s,a,c):R.none(),e7=(t,s,a,c)=>a.moveOnTab?fg(EP)(t,s,a,c):R.none(),WA=ae([Qn(zn(nm),fg(UA)),Qn(zn(ub),fg(EP)),Qn(yc([om,zn(tm)]),Q8),Qn(yc([Xh,zn(tm)]),e7),Qn(zn(od),VA),Qn(zn(vc),VA)]),t7=ae([Qn(zn(vc),le)]);var n7=S(SP,yl.init,WA,t7,()=>R.some(xP));const o7=[tc("onSpace"),tc("onEnter"),tc("onShiftEnter"),tc("onLeft"),tc("onRight"),tc("onTab"),tc("onShiftTab"),tc("onUp"),tc("onDown"),tc("onEscape"),_e("stopSpaceKeyup",!1),po("focusIn")],s7=(t,s,a)=>[Qn(zn(vc),a.onSpace),Qn(yc([Xh,zn(od)]),a.onEnter),Qn(yc([om,zn(od)]),a.onShiftEnter),Qn(yc([om,zn(tm)]),a.onShiftTab),Qn(yc([Xh,zn(tm)]),a.onTab),Qn(zn(nm),a.onUp),Qn(zn(ub),a.onDown),Qn(zn(A0),a.onLeft),Qn(zn(Yh),a.onRight),Qn(zn(vc),a.onSpace)],TP=(t,s,a)=>[...a.stopSpaceKeyup?[Qn(zn(vc),le)]:[],Qn(zn(O0),a.onEscape)];var r7=S(o7,yl.init,s7,TP,t=>t.focusIn);const a7=M.schema(),i7=H.schema(),_P=V8.schema(),c7=I8.schema(),l7=CP.schema(),kP=Ze.schema(),u7=n7.schema(),d7=r7.schema();var kE=Object.freeze({__proto__:null,acyclic:a7,cyclic:i7,flow:_P,flatgrid:c7,matrix:l7,execution:kP,menu:u7,special:d7});const m7=t=>ta(t,"setGridSize"),Kt=Yv({branchKey:"mode",branches:kE,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},c=>{c(t,s,a)})},setGridSize:(t,s,a,c,d)=>{m7(a)?a.setGridSize(c,d):console.error("Layout does not support setGridSize")}},state:Nt}),ki=(t,s)=>{Ot(()=>{sA(t,s,()=>Xe(s,t.getSystem().build))},t.element)},OP=(t,s)=>{Ot(()=>{rA(t,s,()=>XM(t.element,s,t.getSystem().buildOrPatch))},t.element)},AP=(t,s,a,c)=>{Fh(s);const d=ex(t.element,a,c,t.getSystem().buildOrPatch);yC(t,d),t.syncComponents()},OE=(t,s,a)=>{const c=t.getSystem().build(a);Lh(t,c,s)},f7=(t,s,a,c)=>{td(s),OE(t,(d,h)=>ur(d,h,a),c)},DP=(t,s,a,c)=>(s.reuseDom?OP:ki)(t,c),RP=(t,s,a,c)=>{OE(t,Sa,c)},g7=(t,s,a,c)=>{OE(t,e1,c)},h7=(t,s,a,c)=>{const d=AE(t);on(d,v=>So(c.element,v.element)).each(td)},AE=(t,s)=>t.components(),MP=(t,s,a,c,d)=>{const h=AE(t);return R.from(h[c]).map(v=>(d.fold(()=>td(v),E=>{(s.reuseDom?AP:f7)(t,v,c,E)}),v))};var b7=Object.freeze({__proto__:null,append:RP,prepend:g7,remove:h7,replaceAt:MP,replaceBy:(t,s,a,c,d)=>{const h=AE(t);return Po(h,c).bind(v=>MP(t,s,a,v,d))},set:DP,contents:AE});const yn=Tr({fields:[Cr("reuseDom",!0)],name:"replacing",apis:b7}),PP=(t,s)=>{const a=zo(s);return Tr({fields:[Ke("enabled")],name:t,active:{events:ae(a)}})},En=(t,s)=>{const a=PP(t,s);return{key:t,value:{config:{},me:a,configAsRaw:ae({}),initialConfig:{},state:yl}}},ZA=(t,s)=>{s.ignore||(xi(t.element),s.onFocus(t))};var v7=Object.freeze({__proto__:null,focus:ZA,blur:(t,s)=>{s.ignore||Eh(t.element)},isFocused:t=>R1(t.element)}),NP=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return Xi(a)},events:t=>zo([We(Ql(),(s,a)=>{ZA(s,t),a.stop()})].concat(t.stopMousedown?[We(fr(),(s,a)=>{a.event.prevent()})]:[]))}),ep=[Wn("onFocus"),_e("stopMousedown",!1),_e("ignore",!1)];const ln=Tr({fields:ep,name:"focusing",active:NP,apis:v7}),BP=t=>({init:()=>{const a=en(t);return{get:()=>a.get(),set:E=>a.set(E),clear:()=>a.set(t),readState:()=>a.get()}}}),jA=(t,s,a)=>{const c=s.aria;c.update(t,c,a.get())},w7=(t,s,a)=>{s.toggleClass.each(c=>{a.get()?Us(t.element,c):bs(t.element,c)})},jC=(t,s,a,c)=>{const d=a.get();a.set(c),w7(t,s,a),jA(t,s,a),d!==c&&s.onToggled(t,c)},$P=(t,s,a)=>{jC(t,s,a,!a.get())},C7=(t,s,a)=>{jC(t,s,a,!0)},IP=(t,s,a)=>{jC(t,s,a,!1)},GA=(t,s,a)=>a.get(),DE=(t,s,a)=>{jC(t,s,a,s.selected)};var S7=Object.freeze({__proto__:null,onLoad:DE,toggle:$P,isOn:GA,on:C7,off:IP,set:jC}),FP=Object.freeze({__proto__:null,exhibit:()=>Xi({}),events:(t,s)=>{const a=xh(t,s,$P),c=Kv(t,s,DE);return zo(zt([t.toggleOnExecute?[a]:[],[c]]))}});const E7=(t,s,a)=>{Et(t.element,"aria-pressed",a),s.syncWithExpanded&&P0(t,s,a)},T7=(t,s,a)=>{Et(t.element,"aria-selected",a)},GC=(t,s,a)=>{Et(t.element,"aria-checked",a)},P0=(t,s,a)=>{Et(t.element,"aria-expanded",a)};var LP=[_e("selected",!1),po("toggleClass"),_e("toggleOnExecute",!0),Wn("onToggled"),Zi("aria",{mode:"none"},Un("mode",{pressed:[_e("syncWithExpanded",!1),Oo("update",E7)],checked:[Oo("update",GC)],expanded:[Oo("update",P0)],selected:[Oo("update",T7)],none:[Oo("update",Q)]}))];const kn=Tr({fields:LP,name:"toggling",active:FP,apis:S7,state:BP(!1)}),hg=()=>{const t=(s,a)=>{a.stop(),Id(s)};return[We($d(),t),We(eu(),t),Fd(Vu()),Fd(fr())]},sm=t=>{const s=a=>vl((c,d)=>{a(c),d.stop()});return zo(zt([t.map(s).toArray(),hg()]))},HP="alloy.item-hover",zP="alloy.item-focus",qA="alloy.item-toggled",sf=t=>{(Cl(t.element).isNone()||ln.isFocused(t))&&(ln.isFocused(t)||ln.focus(t),qt(t,HP,{item:t}))},RE=t=>{qt(t,zP,{item:t})},_7=(t,s)=>{qt(t,qA,{item:t,state:s})},KA=ae(HP),VP=ae(zP),UP=ae(qA),YA=t=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),WP=t=>({aria:{mode:"checked"},...Mc(t,(s,a)=>a!=="exclusive"),onToggled:(s,a)=>{He(t.onToggled)&&t.onToggled(s,a),_7(s,a)}}),k7=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:YA(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Gc.augment(t.itemBehaviours,[t.toggling.fold(kn.revoke,s=>kn.config(WP(s))),ln.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{RE(s)}}),Kt.config({mode:"execution"}),St.config({store:{mode:"memory",initialValue:t.data}}),En("item-type-events",[...hg(),We(Bd(),sf),We(Ns(),ln.focus)])]),components:t.components,eventOrder:t.eventOrder}),O7=[Ke("data"),Ke("components"),Ke("dom"),_e("hasSubmenu",!1),po("toggling"),Gc.field("itemBehaviours",[kn,ln,Kt,St]),_e("ignoreFocus",!1),_e("domModification",{}),Oo("builder",k7),_e("eventOrder",{})],A7=t=>({dom:t.dom,components:t.components,events:zo([Qk(Ns())])}),ME=[Ke("dom"),Ke("components"),Oo("builder",A7)],qC=ae("item-widget"),KC=ae([ka({name:"widget",overrides:t=>({behaviours:lt([St.config({store:{mode:"manual",getValue:s=>t.data,setValue:Q}})])})})]),D7=t=>{const s=DC(qC(),t,KC()),a=E0(qC(),t,s.internals()),c=h=>$o(h,t,"widget").map(v=>(Kt.focusIn(v),v)),d=(h,v)=>dg(v.event.target)?R.none():(t.autofocus&&v.setSource(h.element),R.none());return{dom:t.dom,components:a,domModification:t.domModification,events:zo([vl((h,v)=>{c(h).each(E=>{v.stop()})}),We(Bd(),sf),We(Ns(),(h,v)=>{t.autofocus?c(h):ln.focus(h)})]),behaviours:Gc.augment(t.widgetBehaviours,[St.config({store:{mode:"memory",initialValue:t.data}}),ln.config({ignore:t.ignoreFocus,onFocus:h=>{RE(h)}}),Kt.config({mode:"special",focusIn:t.autofocus?h=>{c(h)}:Vw(),onLeft:d,onRight:d,onEscape:(h,v)=>!ln.isFocused(h)&&!t.autofocus?(ln.focus(h),R.some(!0)):(t.autofocus&&v.setSource(h.element),R.none())})])}},R7=[Ke("uid"),Ke("data"),Ke("components"),Ke("dom"),_e("autofocus",!1),_e("ignoreFocus",!1),Gc.field("widgetBehaviours",[St,ln,Kt]),_e("domModification",{}),NC(KC()),Oo("builder",D7)],ZP=Un("type",{widget:R7,item:O7,separator:ME}),jP=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),GP=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),qP=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),M7=ae([ob({factory:{sketch:t=>{const s=si("menu.spec item",ZP,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>oo(s,"uid")?s:{...s,uid:sh("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),XA=ae([Ke("value"),Ke("items"),Ke("dom"),Ke("components"),_e("eventOrder",{}),hr("menuBehaviours",[ao,St,Bn,Kt]),Zi("movement",{mode:"menu",moveOnTab:!0},Un("mode",{grid:[Dw(),Oo("config",jP)],matrix:[Oo("config",GP),Ke("rowSelector"),_e("previousSelector",R.none)],menu:[_e("moveOnTab",!0),Oo("config",qP)]})),hO(),_e("fakeFocus",!1),_e("focusManager",l()),Wn("onHighlight"),Wn("onDehighlight")]),KP=ae("alloy.menu-focus"),P7=(t,s)=>{const a=_r(t.element,'[role="menuitemradio"][aria-checked="true"]');yt(a,c=>{So(c,s.element)||t.getSystem().getByDom(c).each(d=>{kn.off(d)})})},N7=(t,s,a,c)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Qs(t.menuBehaviours,[ao.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),St.config({store:{mode:"memory",initialValue:t.value}}),Bn.config({find:R.some}),Kt.config(t.movement.config(t,t.movement))]),events:zo([We(VP(),(d,h)=>{const v=h.event;d.getSystem().getByDom(v.target).each(E=>{ao.highlight(d,E),h.stop(),qt(d,KP(),{menu:d,item:E})})}),We(KA(),(d,h)=>{const v=h.event.item;ao.highlight(d,v)}),We(UP(),(d,h)=>{const{item:v,state:E}=h.event;E&&Ms(v.element,"role")==="menuitemradio"&&P7(d,v)})]),components:s,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}),hb=Oa({name:"Menu",configFields:XA(),partFields:M7(),factory:N7}),YP=t=>sl(t,(s,a)=>({k:s,v:a})),XP=(t,s,a,c)=>Ct(a,c).bind(d=>Ct(t,d).bind(h=>{const v=XP(t,s,a,h);return R.some([h].concat(v))})).getOr([]),B7=(t,s)=>{const a={};Jo(t,(v,E)=>{yt(v,T=>{a[T]=E})});const c=s,d=YP(s),h=Qo(d,(v,E)=>[E].concat(XP(a,c,d,E)));return Qo(a,v=>Ct(h,v).getOr([v]))},JP=()=>{const t=en({}),s=en({}),a=en({}),c=Rn(),d=en({}),h=()=>{t.set({}),s.set({}),a.set({}),c.clear()},v=()=>c.get().isNone(),E=(Ve,Ie)=>{s.set({...s.get(),[Ve]:{type:"prepared",menu:Ie}})},T=(Ve,Ie,ct,gt)=>{c.set(Ve),t.set(ct),s.set(Ie),d.set(gt);const Tn=B7(gt,ct);a.set(Tn)},D=Ve=>Rr(t.get(),(Ie,ct)=>Ie===Ve),B=(Ve,Ie,ct)=>ce(Ve).bind(gt=>D(Ve).bind(Tn=>Ie(Tn).map($t=>({triggeredMenu:gt,triggeringItem:$t,triggeringPath:ct})))),L=(Ve,Ie)=>{const ct=vo(pe(Ve).toArray(),gt=>ce(gt).isSome());return Ct(a.get(),Ve).bind(gt=>{const Tn=ws(ct.concat(gt)),$t=$e(Tn,(tn,un)=>B(tn,Ie,Tn.slice(0,un+1)).fold(()=>Pa(c.get(),tn)?[]:[R.none()],bo=>[R.some(bo)]));return Wo($t)})},U=Ve=>Ct(t.get(),Ve).map(Ie=>{const ct=Ct(a.get(),Ve).getOr([]);return[Ie].concat(ct)}),j=Ve=>Ct(a.get(),Ve).bind(Ie=>Ie.length>1?R.some(Ie.slice(1)):R.none()),X=Ve=>Ct(a.get(),Ve),ce=Ve=>ke(Ve).bind(N0),ke=Ve=>Ct(s.get(),Ve),pe=Ve=>Ct(t.get(),Ve);return{setMenuBuilt:E,setContents:T,expand:U,refresh:X,collapse:j,lookupMenu:ke,lookupItem:pe,otherMenus:Ve=>{const Ie=d.get();return jt(os(Ie),Ve)},getPrimary:()=>c.get().bind(ce),getMenus:()=>s.get(),clear:h,isClear:v,getTriggeringPath:L}},N0=t=>t.type==="prepared"?R.some(t.menu):R.none(),QP={init:JP,extractPreparedMenu:N0},B0=Rt("tiered-menu-item-highlight"),PE=Rt("tiered-menu-item-dehighlight");var Oi;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(Oi||(Oi={}));const eN=(t,s)=>{const a=Rn(),c=(ht,Bt,fn)=>Qo(fn,($n,nn)=>{const Cn=()=>hb.sketch({...$n,value:nn,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Fo,io)=>{qt(Fo,B0,{menuComp:Fo,itemComp:io})},onDehighlight:(Fo,io)=>{qt(Fo,PE,{menuComp:Fo,itemComp:io})},focusManager:t.fakeFocus?m():l()});return nn===Bt?{type:"prepared",menu:ht.getSystem().build(Cn())}:{type:"notbuilt",nbMenu:Cn}}),d=QP.init(),h=ht=>{const Bt=c(ht,t.data.primary,t.data.menus),fn=T();return d.setContents(t.data.primary,Bt,t.data.expansions,fn),d.getPrimary()},v=ht=>St.getValue(ht).value,E=(ht,Bt,fn)=>tr(Bt,$n=>{if(!$n.getSystem().isConnected())return R.none();const nn=ao.getCandidates($n);return on(nn,Cn=>v(Cn)===fn)}),T=ht=>Qo(t.data.menus,(Bt,fn)=>$e(Bt.items,$n=>$n.type==="separator"?[]:[$n.data.value])),D=ao.highlight,B=(ht,Bt)=>{D(ht,Bt),ao.getHighlighted(Bt).orThunk(()=>ao.getFirst(Bt)).each(fn=>{t.fakeFocus?ao.highlight(Bt,fn):Ev(ht,fn.element,Ns())})},L=(ht,Bt)=>Ii(Xe(Bt,fn=>ht.lookupMenu(fn).bind($n=>$n.type==="prepared"?R.some($n.menu):R.none()))),U=(ht,Bt,fn)=>{const $n=L(Bt,Bt.otherMenus(fn));yt($n,nn=>{mc(nn.element,[t.markers.backgroundMenu]),t.stayInDom||yn.remove(ht,nn)})},j=ht=>a.get().getOrThunk(()=>{const Bt={},fn=_r(ht.element,`.${t.markers.item}`),$n=vo(fn,nn=>Ms(nn,"aria-haspopup")==="true");return yt($n,nn=>{ht.getSystem().getByDom(nn).each(Cn=>{const Fo=v(Cn);Bt[Fo]=Cn})}),a.set(Bt),Bt}),X=(ht,Bt)=>{const fn=j(ht);Jo(fn,($n,nn)=>{const Cn=go(Bt,nn);Et($n.element,"aria-expanded",Cn)})},ce=(ht,Bt,fn)=>R.from(fn[0]).bind($n=>Bt.lookupMenu($n).bind(nn=>{if(nn.type==="notbuilt")return R.none();{const Cn=nn.menu,Fo=L(Bt,fn.slice(1));return yt(Fo,io=>{Us(io.element,t.markers.backgroundMenu)}),Xn(Cn.element)||yn.append(ht,fc(Cn)),mc(Cn.element,[t.markers.backgroundMenu]),B(ht,Cn),U(ht,Bt,fn),R.some(Cn)}}));let ke;(function(ht){ht[ht.HighlightSubmenu=0]="HighlightSubmenu",ht[ht.HighlightParent=1]="HighlightParent"})(ke||(ke={}));const pe=(ht,Bt,fn)=>{if(fn.type==="notbuilt"){const $n=ht.getSystem().build(fn.nbMenu());return d.setMenuBuilt(Bt,$n),$n}else return fn.menu},ge=(ht,Bt,fn=ke.HighlightSubmenu)=>{if(Bt.hasConfigured(sn)&&sn.isDisabled(Bt))return R.some(Bt);{const $n=v(Bt);return d.expand($n).bind(nn=>(X(ht,nn),R.from(nn[0]).bind(Cn=>d.lookupMenu(Cn).bind(Fo=>{const io=pe(ht,Cn,Fo);return Xn(io.element)||yn.append(ht,fc(io)),t.onOpenSubmenu(ht,Bt,io,ws(nn)),fn===ke.HighlightSubmenu?(ao.highlightFirst(io),ce(ht,d,nn)):(ao.dehighlightAll(io),R.some(Bt))}))))}},Oe=(ht,Bt)=>{const fn=v(Bt);return d.collapse(fn).bind($n=>(X(ht,$n),ce(ht,d,$n).map(nn=>(t.onCollapseMenu(ht,Bt,nn),nn))))},Je=(ht,Bt)=>{const fn=v(Bt);return d.refresh(fn).bind($n=>(X(ht,$n),ce(ht,d,$n)))},Ve=(ht,Bt)=>dg(Bt.element)?R.none():ge(ht,Bt,ke.HighlightSubmenu),Ie=(ht,Bt)=>dg(Bt.element)?R.none():Oe(ht,Bt),ct=(ht,Bt)=>Oe(ht,Bt).orThunk(()=>t.onEscape(ht,Bt).map(()=>ht)),gt=ht=>(Bt,fn)=>ou(fn.getSource(),`.${t.markers.item}`).bind($n=>Bt.getSystem().getByDom($n).toOptional().bind(nn=>ht(Bt,nn).map(Dt))),Tn=zo([We(KP(),(ht,Bt)=>{const fn=Bt.event.item;d.lookupItem(v(fn)).each(()=>{const $n=Bt.event.menu;ao.highlight(ht,$n);const nn=v(Bt.event.item);d.refresh(nn).each(Cn=>U(ht,d,Cn))})}),vl((ht,Bt)=>{const fn=Bt.event.target;ht.getSystem().getByDom(fn).each($n=>{v($n).indexOf("collapse-item")===0&&Oe(ht,$n),ge(ht,$n,ke.HighlightSubmenu).fold(()=>{t.onExecute(ht,$n)},Q)})}),Bo((ht,Bt)=>{h(ht).each(fn=>{yn.append(ht,fc(fn)),t.onOpenMenu(ht,fn),t.highlightOnOpen===Oi.HighlightMenuAndItem?B(ht,fn):t.highlightOnOpen===Oi.HighlightJustMenu&&D(ht,fn)})}),We(B0,(ht,Bt)=>{t.onHighlightItem(ht,Bt.event.menuComp,Bt.event.itemComp)}),We(PE,(ht,Bt)=>{t.onDehighlightItem(ht,Bt.event.menuComp,Bt.event.itemComp)}),...t.navigateOnHover?[We(KA(),(ht,Bt)=>{const fn=Bt.event.item;Je(ht,fn),ge(ht,fn,ke.HighlightParent),t.onHover(ht,fn)})]:[]]),$t=ht=>ao.getHighlighted(ht).bind(ao.getHighlighted),tn=ht=>{$t(ht).each(Bt=>{Oe(ht,Bt)})},un=ht=>{d.getPrimary().each(Bt=>{B(ht,Bt)})},bo=ht=>R.from(ht.components()[0]).filter(Bt=>Ms(Bt.element,"role")==="menu"),Kn={collapseMenu:tn,highlightPrimary:un,repositionMenus:ht=>{d.getPrimary().bind(fn=>$t(ht).bind($n=>{const nn=v($n),Cn=vm(d.getMenus()),Fo=Ii(Xe(Cn,QP.extractPreparedMenu));return d.getTriggeringPath(nn,io=>E(ht,Fo,io))}).map($n=>({primary:fn,triggeringPath:$n}))).fold(()=>{bo(ht).each(fn=>{t.onRepositionMenu(ht,fn,[])})},({primary:fn,triggeringPath:$n})=>{t.onRepositionMenu(ht,fn,$n)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Qs(t.tmenuBehaviours,[Kt.config({mode:"special",onRight:gt(Ve),onLeft:gt(Ie),onEscape:gt(ct),focusIn:(ht,Bt)=>{d.getPrimary().each(fn=>{Ev(ht,fn.element,Ns())})}}),ao.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Bn.config({find:ht=>ao.getHighlighted(ht)}),yn.config({})]),eventOrder:t.eventOrder,apis:Kn,events:Tn}},$7=ae("collapse-item"),I7=(t,s,a)=>({primary:t,menus:s,expansions:a}),tN=(t,s)=>({primary:t,menus:wi(t,s),expansions:{}}),F7=t=>({value:Rt($7()),meta:{text:t}}),tp=nc({name:"TieredMenu",configFields:[Aw("onExecute"),Aw("onEscape"),su("onOpenMenu"),su("onOpenSubmenu"),Wn("onRepositionMenu"),Wn("onCollapseMenu"),_e("highlightOnOpen",Oi.HighlightMenuAndItem),Jl("data",[Ke("primary"),Ke("menus"),Ke("expansions")]),_e("fakeFocus",!1),Wn("onHighlightItem"),Wn("onDehighlightItem"),Wn("onHover"),E1(),Ke("dom"),_e("navigateOnHover",!0),_e("stayInDom",!1),hr("tmenuBehaviours",[Kt,ao,Bn,yn]),_e("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:eN,extraApis:{tieredData:I7,singleData:tN,collapseItem:F7}}),L7=(t,s,a,c,d)=>{const h=()=>t.lazySink(s),v=c.type==="horizontal"?{layouts:{onLtr:()=>qv(),onRtl:()=>Hw()}}:{},E=D=>D.length===2,T=D=>E(D)?v:{};return tp.sketch({dom:{tag:"div"},data:c.data,markers:c.menu.markers,highlightOnOpen:c.menu.highlightOnOpen,fakeFocus:c.menu.fakeFocus,onEscape:()=>(Hn.close(s),t.onEscape.map(D=>D(s)),R.some(!0)),onExecute:()=>R.some(!0),onOpenMenu:(D,B)=>{_a.positionWithinBounds(h().getOrDie(),B,a,d())},onOpenSubmenu:(D,B,L,U)=>{const j=h().getOrDie();_a.position(j,L,{anchor:{type:"submenu",item:B,...T(U)}})},onRepositionMenu:(D,B,L)=>{const U=h().getOrDie();_a.positionWithinBounds(U,B,a,d()),yt(L,j=>{const X=T(j.triggeringPath);_a.position(U,j.triggeredMenu,{anchor:{type:"submenu",item:j.triggeringItem,...X}})})}})},H7=(t,s)=>{const a=(U,j)=>t.getRelated(U).exists(ce=>Ud(ce,j)),c=(U,j)=>{Hn.setContent(U,j)},d=(U,j,X)=>{const ce=R.none;h(U,j,X,ce)},h=(U,j,X,ce)=>{const ke=t.lazySink(U).getOrDie();Hn.openWhileCloaked(U,j,()=>_a.positionWithinBounds(ke,U,X,ce())),St.setValue(U,R.some({mode:"position",config:X,getBounds:ce}))},v=(U,j,X)=>{E(U,j,X,R.none)},E=(U,j,X,ce)=>{const ke=L7(t,U,j,X,ce);Hn.open(U,ke),St.setValue(U,R.some({mode:"menu",menu:ke}))},T=U=>{Hn.isOpen(U)&&(St.setValue(U,R.none()),Hn.close(U))},D=U=>Hn.getState(U),B=U=>{Hn.isOpen(U)&&St.getValue(U).each(j=>{switch(j.mode){case"menu":Hn.getState(U).each(tp.repositionMenus);break;case"position":const X=t.lazySink(U).getOrDie();_a.positionWithinBounds(X,U,j.config,j.getBounds());break}})},L={setContent:c,showAt:d,showWithinBounds:h,showMenuAt:v,showMenuWithinBounds:E,hide:T,getContent:D,reposition:B,isOpen:Hn.isOpen};return{uid:t.uid,dom:t.dom,behaviours:Qs(t.inlineBehaviours,[Hn.config({isPartOf:(U,j,X)=>Ud(j,X)||a(U,X),getAttachPoint:U=>t.lazySink(U).getOrDie(),onOpen:U=>{t.onShow(U)},onClose:U=>{t.onHide(U)}}),St.config({store:{mode:"memory",initialValue:R.none()}}),Si.config({channels:{...q1({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(U=>({fireEventInstead:{event:U.event}})).getOr({})}),...zh({...t.fireRepositionEventInstead.map(U=>({fireEventInstead:{event:U.event}})).getOr({}),doReposition:B})}})]),eventOrder:t.eventOrder,apis:L}},_s=nc({name:"InlineView",configFields:[Ke("lazySink"),Wn("onShow"),Wn("onHide"),Lf("onEscape"),hr("inlineBehaviours",[Hn,St,Si]),vi("fireDismissalEventInstead",[_e("event",$m())]),vi("fireRepositionEventInstead",[_e("event",U2())]),_e("getRelated",R.none),_e("isExtraPart",An),_e("eventOrder",R.none)],factory:H7,apis:{showAt:(t,s,a,c)=>{t.showAt(s,a,c)},showWithinBounds:(t,s,a,c,d)=>{t.showWithinBounds(s,a,c,d)},showMenuAt:(t,s,a,c)=>{t.showMenuAt(s,a,c)},showMenuWithinBounds:(t,s,a,c,d)=>{t.showMenuWithinBounds(s,a,c,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}});var pb=tinymce.util.Tools.resolve("tinymce.util.Delay");const Xr=nc({name:"Button",factory:t=>{const s=sm(t.action),a=t.dom.tag,c=h=>Ct(t.dom,"attributes").bind(v=>Ct(v,h)),d=()=>{if(a==="button"){const h=c("type").getOr("button"),v=c("role").map(E=>({role:E})).getOr({});return{type:h,...v}}else return{role:t.role.getOr(c("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:Gc.augment(t.buttonBehaviours,[ln.config({}),Kt.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[_e("uid",void 0),Ke("dom"),_e("components",[]),Gc.field("buttonBehaviours",[ln,Kt]),po("action"),po("role"),_e("eventOrder",{})]}),z7=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return To(s,(a,c)=>c.name==="class"?a:{...a,[c.name]:c.value},{})},V7=t=>Array.prototype.slice.call(t.dom.classList,0),pg=t=>{const s=Ce.fromHtml(t),a=fi(s),c=z7(s),d=V7(s),h=a.length===0?{}:{innerHtml:pw(s)};return{tag:Qa(s),classes:d,attributes:c,...h}},wo=t=>{const s=yA(t)&&ta(t,"uid")?t.uid:sh("memento");return{get:h=>h.getSystem().getByUid(s).getOrDie(),getOpt:h=>h.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:JA,setPrototypeOf:QA,isFrozen:U7,getPrototypeOf:W7,getOwnPropertyDescriptor:Z7}=Object;let{freeze:Kc,seal:rd,create:oN}=Object,{apply:NE,construct:e4}=typeof Reflect<"u"&&Reflect;Kc||(Kc=function(s){return s}),rd||(rd=function(s){return s}),NE||(NE=function(s,a,c){return s.apply(a,c)}),e4||(e4=function(s,a){return new s(...a)});const BE=du(Array.prototype.forEach),sN=du(Array.prototype.pop),YC=du(Array.prototype.push),$E=du(String.prototype.toLowerCase),bg=du(String.prototype.toString),rN=du(String.prototype.match),XC=du(String.prototype.replace),bb=du(String.prototype.indexOf),aN=du(String.prototype.trim),rm=du(Object.prototype.hasOwnProperty),ha=du(RegExp.prototype.test),JC=mu(TypeError);function du(t){return function(s){for(var a=arguments.length,c=new Array(a>1?a-1:0),d=1;d<a;d++)c[d-1]=arguments[d];return NE(t,s,c)}}function mu(t){return function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return e4(t,a)}}function Vo(t,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$E;QA&&QA(t,null);let c=s.length;for(;c--;){let d=s[c];if(typeof d=="string"){const h=a(d);h!==d&&(U7(s)||(s[c]=h),d=h)}t[d]=!0}return t}function iN(t){for(let s=0;s<t.length;s++)rm(t,s)||(t[s]=null);return t}function np(t){const s=oN(null);for(const[a,c]of JA(t))rm(t,a)&&(Array.isArray(c)?s[a]=iN(c):c&&typeof c=="object"&&c.constructor===Object?s[a]=np(c):s[a]=c);return s}function QC(t,s){for(;t!==null;){const c=Z7(t,s);if(c){if(c.get)return du(c.get);if(typeof c.value=="function")return du(c.value)}t=W7(t)}function a(){return null}return a}const IE=Kc(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),t4=Kc(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),n4=Kc(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),j7=Kc(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),$0=Kc(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),o4=Kc(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),s4=Kc(["#text"]),r4=Kc(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),FE=Kc(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),cN=Kc(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),LE=Kc(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),lN=rd(/\{\{[\w\W]*|[\w\W]*\}\}/gm),G7=rd(/<%[\w\W]*|[\w\W]*%>/gm),a4=rd(/\${[\w\W]*}/gm),uN=rd(/^data-[\-\w.\u00B7-\uFFFF]/),q7=rd(/^aria-[\-\w]+$/),dN=rd(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),K7=rd(/^(?:\w+script|data):/i),i4=rd(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),mN=rd(/^html$/i),eS=rd(/^[a-z][.\w]*(-[.\w]+)+$/i);var tS=Object.freeze({__proto__:null,MUSTACHE_EXPR:lN,ERB_EXPR:G7,TMPLIT_EXPR:a4,DATA_ATTR:uN,ARIA_ATTR:q7,IS_ALLOWED_URI:dN,IS_SCRIPT_OR_DATA:K7,ATTR_WHITESPACE:i4,DOCTYPE_NAME:mN,CUSTOM_ELEMENT:eS});const I0={element:1,text:3,progressingInstruction:7,comment:8,document:9},fN=function(){return typeof window>"u"?null:window},Y7=function(s,a){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let c=null;const d="data-tt-policy-suffix";a&&a.hasAttribute(d)&&(c=a.getAttribute(d));const h="dompurify"+(c?"#"+c:"");try{return s.createPolicy(h,{createHTML(v){return v},createScriptURL(v){return v}})}catch{return console.warn("TrustedTypes policy "+h+" could not be created."),null}};function gN(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fN();const s=In=>gN(In);if(s.version="3.1.7",s.removed=[],!t||!t.document||t.document.nodeType!==I0.document)return s.isSupported=!1,s;let{document:a}=t;const c=a,d=c.currentScript,{DocumentFragment:h,HTMLTemplateElement:v,Node:E,Element:T,NodeFilter:D,NamedNodeMap:B=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:L,DOMParser:U,trustedTypes:j}=t,X=T.prototype,ce=QC(X,"cloneNode"),ke=QC(X,"remove"),pe=QC(X,"nextSibling"),ge=QC(X,"childNodes"),Oe=QC(X,"parentNode");if(typeof v=="function"){const In=a.createElement("template");In.content&&In.content.ownerDocument&&(a=In.content.ownerDocument)}let Je,Ve="";const{implementation:Ie,createNodeIterator:ct,createDocumentFragment:gt,getElementsByTagName:Tn}=a,{importNode:$t}=c;let tn={};s.isSupported=typeof JA=="function"&&typeof Oe=="function"&&Ie&&Ie.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:un,ERB_EXPR:bo,TMPLIT_EXPR:Xt,DATA_ATTR:Kn,ARIA_ATTR:ht,IS_SCRIPT_OR_DATA:Bt,ATTR_WHITESPACE:fn,CUSTOM_ELEMENT:$n}=tS;let{IS_ALLOWED_URI:nn}=tS,Cn=null;const Fo=Vo({},[...IE,...t4,...n4,...$0,...s4]);let io=null;const ui=Vo({},[...r4,...FE,...cN,...LE]);let ls=Object.seal(oN(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ac=null,bd=null,Pp=!0,Np=!0,Zb=!1,Sk=!0,Bp=!1,pM=!0,jb=!1,bM=!1,qq=!1,xk=!1,W6=!1,Z6=!1,KY=!0,YY=!1;const gQ="user-content-";let Kq=!0,vM=!1,Ek={},Tk=null;const XY=Vo({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let JY=null;const QY=Vo({},["audio","video","img","source","image","track"]);let Yq=null;const eX=Vo({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),j6="http://www.w3.org/1998/Math/MathML",G6="http://www.w3.org/2000/svg",Gb="http://www.w3.org/1999/xhtml";let _k=Gb,Xq=!1,Jq=null;const hQ=Vo({},[j6,G6,Gb],bg);let yM=null;const pQ=["application/xhtml+xml","text/html"],bQ="text/html";let Dc=null,kk=null;const vQ=a.createElement("form"),tX=function(Ne){return Ne instanceof RegExp||Ne instanceof Function},Qq=function(){let Ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(kk&&kk===Ne)){if((!Ne||typeof Ne!="object")&&(Ne={}),Ne=np(Ne),yM=pQ.indexOf(Ne.PARSER_MEDIA_TYPE)===-1?bQ:Ne.PARSER_MEDIA_TYPE,Dc=yM==="application/xhtml+xml"?bg:$E,Cn=rm(Ne,"ALLOWED_TAGS")?Vo({},Ne.ALLOWED_TAGS,Dc):Fo,io=rm(Ne,"ALLOWED_ATTR")?Vo({},Ne.ALLOWED_ATTR,Dc):ui,Jq=rm(Ne,"ALLOWED_NAMESPACES")?Vo({},Ne.ALLOWED_NAMESPACES,bg):hQ,Yq=rm(Ne,"ADD_URI_SAFE_ATTR")?Vo(np(eX),Ne.ADD_URI_SAFE_ATTR,Dc):eX,JY=rm(Ne,"ADD_DATA_URI_TAGS")?Vo(np(QY),Ne.ADD_DATA_URI_TAGS,Dc):QY,Tk=rm(Ne,"FORBID_CONTENTS")?Vo({},Ne.FORBID_CONTENTS,Dc):XY,Ac=rm(Ne,"FORBID_TAGS")?Vo({},Ne.FORBID_TAGS,Dc):{},bd=rm(Ne,"FORBID_ATTR")?Vo({},Ne.FORBID_ATTR,Dc):{},Ek=rm(Ne,"USE_PROFILES")?Ne.USE_PROFILES:!1,Pp=Ne.ALLOW_ARIA_ATTR!==!1,Np=Ne.ALLOW_DATA_ATTR!==!1,Zb=Ne.ALLOW_UNKNOWN_PROTOCOLS||!1,Sk=Ne.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Bp=Ne.SAFE_FOR_TEMPLATES||!1,pM=Ne.SAFE_FOR_XML!==!1,jb=Ne.WHOLE_DOCUMENT||!1,xk=Ne.RETURN_DOM||!1,W6=Ne.RETURN_DOM_FRAGMENT||!1,Z6=Ne.RETURN_TRUSTED_TYPE||!1,qq=Ne.FORCE_BODY||!1,KY=Ne.SANITIZE_DOM!==!1,YY=Ne.SANITIZE_NAMED_PROPS||!1,Kq=Ne.KEEP_CONTENT!==!1,vM=Ne.IN_PLACE||!1,nn=Ne.ALLOWED_URI_REGEXP||dN,_k=Ne.NAMESPACE||Gb,ls=Ne.CUSTOM_ELEMENT_HANDLING||{},Ne.CUSTOM_ELEMENT_HANDLING&&tX(Ne.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ls.tagNameCheck=Ne.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ne.CUSTOM_ELEMENT_HANDLING&&tX(Ne.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ls.attributeNameCheck=Ne.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ne.CUSTOM_ELEMENT_HANDLING&&typeof Ne.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ls.allowCustomizedBuiltInElements=Ne.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Bp&&(Np=!1),W6&&(xk=!0),Ek&&(Cn=Vo({},s4),io=[],Ek.html===!0&&(Vo(Cn,IE),Vo(io,r4)),Ek.svg===!0&&(Vo(Cn,t4),Vo(io,FE),Vo(io,LE)),Ek.svgFilters===!0&&(Vo(Cn,n4),Vo(io,FE),Vo(io,LE)),Ek.mathMl===!0&&(Vo(Cn,$0),Vo(io,cN),Vo(io,LE))),Ne.ADD_TAGS&&(Cn===Fo&&(Cn=np(Cn)),Vo(Cn,Ne.ADD_TAGS,Dc)),Ne.ADD_ATTR&&(io===ui&&(io=np(io)),Vo(io,Ne.ADD_ATTR,Dc)),Ne.ADD_URI_SAFE_ATTR&&Vo(Yq,Ne.ADD_URI_SAFE_ATTR,Dc),Ne.FORBID_CONTENTS&&(Tk===XY&&(Tk=np(Tk)),Vo(Tk,Ne.FORBID_CONTENTS,Dc)),Kq&&(Cn["#text"]=!0),jb&&Vo(Cn,["html","head","body"]),Cn.table&&(Vo(Cn,["tbody"]),delete Ac.tbody),Ne.TRUSTED_TYPES_POLICY){if(typeof Ne.TRUSTED_TYPES_POLICY.createHTML!="function")throw JC('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Ne.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw JC('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Je=Ne.TRUSTED_TYPES_POLICY,Ve=Je.createHTML("")}else Je===void 0&&(Je=Y7(j,d)),Je!==null&&typeof Ve=="string"&&(Ve=Je.createHTML(""));Kc&&Kc(Ne),kk=Ne}},nX=Vo({},["mi","mo","mn","ms","mtext"]),oX=Vo({},["annotation-xml"]),yQ=Vo({},["title","style","font","a","script"]),sX=Vo({},[...t4,...n4,...j7]),rX=Vo({},[...$0,...o4]),wQ=function(Ne){let Gt=Oe(Ne);(!Gt||!Gt.tagName)&&(Gt={namespaceURI:_k,tagName:"template"});const Dn=$E(Ne.tagName),Lr=$E(Gt.tagName);return Jq[Ne.namespaceURI]?Ne.namespaceURI===G6?Gt.namespaceURI===Gb?Dn==="svg":Gt.namespaceURI===j6?Dn==="svg"&&(Lr==="annotation-xml"||nX[Lr]):!!sX[Dn]:Ne.namespaceURI===j6?Gt.namespaceURI===Gb?Dn==="math":Gt.namespaceURI===G6?Dn==="math"&&oX[Lr]:!!rX[Dn]:Ne.namespaceURI===Gb?Gt.namespaceURI===G6&&!oX[Lr]||Gt.namespaceURI===j6&&!nX[Lr]?!1:!rX[Dn]&&(yQ[Dn]||!sX[Dn]):!!(yM==="application/xhtml+xml"&&Jq[Ne.namespaceURI]):!1},$p=function(Ne){YC(s.removed,{element:Ne});try{Oe(Ne).removeChild(Ne)}catch{ke(Ne)}},wM=function(Ne,Gt){try{YC(s.removed,{attribute:Gt.getAttributeNode(Ne),from:Gt})}catch{YC(s.removed,{attribute:null,from:Gt})}if(Gt.removeAttribute(Ne),Ne==="is"&&!io[Ne])if(xk||W6)try{$p(Gt)}catch{}else try{Gt.setAttribute(Ne,"")}catch{}},aX=function(Ne){let Gt=null,Dn=null;if(qq)Ne="<remove></remove>"+Ne;else{const Rc=rN(Ne,/^[\r\n\t ]+/);Dn=Rc&&Rc[0]}yM==="application/xhtml+xml"&&_k===Gb&&(Ne='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ne+"</body></html>");const Lr=Je?Je.createHTML(Ne):Ne;if(_k===Gb)try{Gt=new U().parseFromString(Lr,yM)}catch{}if(!Gt||!Gt.documentElement){Gt=Ie.createDocument(_k,"template",null);try{Gt.documentElement.innerHTML=Xq?Ve:Lr}catch{}}const Nl=Gt.body||Gt.documentElement;return Ne&&Dn&&Nl.insertBefore(a.createTextNode(Dn),Nl.childNodes[0]||null),_k===Gb?Tn.call(Gt,jb?"html":"body")[0]:jb?Gt.documentElement:Nl},iX=function(Ne){return ct.call(Ne.ownerDocument||Ne,Ne,D.SHOW_ELEMENT|D.SHOW_COMMENT|D.SHOW_TEXT|D.SHOW_PROCESSING_INSTRUCTION|D.SHOW_CDATA_SECTION,null)},cX=function(Ne){return Ne instanceof L&&(typeof Ne.nodeName!="string"||typeof Ne.textContent!="string"||typeof Ne.removeChild!="function"||!(Ne.attributes instanceof B)||typeof Ne.removeAttribute!="function"||typeof Ne.setAttribute!="function"||typeof Ne.namespaceURI!="string"||typeof Ne.insertBefore!="function"||typeof Ne.hasChildNodes!="function")},lX=function(Ne){return typeof E=="function"&&Ne instanceof E},qb=function(Ne,Gt,Dn){tn[Ne]&&BE(tn[Ne],Lr=>{Lr.call(s,Gt,Dn,kk)})},uX=function(Ne){let Gt=null;if(qb("beforeSanitizeElements",Ne,null),cX(Ne))return $p(Ne),!0;const Dn=Dc(Ne.nodeName);if(qb("uponSanitizeElement",Ne,{tagName:Dn,allowedTags:Cn}),Ne.hasChildNodes()&&!lX(Ne.firstElementChild)&&ha(/<[/\w]/g,Ne.innerHTML)&&ha(/<[/\w]/g,Ne.textContent)||Ne.nodeType===I0.progressingInstruction||pM&&Ne.nodeType===I0.comment&&ha(/<[/\w]/g,Ne.data))return $p(Ne),!0;if(!Cn[Dn]||Ac[Dn]){if(!Ac[Dn]&&mX(Dn)&&(ls.tagNameCheck instanceof RegExp&&ha(ls.tagNameCheck,Dn)||ls.tagNameCheck instanceof Function&&ls.tagNameCheck(Dn)))return!1;if(Kq&&!Tk[Dn]){const Lr=Oe(Ne)||Ne.parentNode,Nl=ge(Ne)||Ne.childNodes;if(Nl&&Lr){const Rc=Nl.length;for(let vd=Rc-1;vd>=0;--vd){const Ip=ce(Nl[vd],!0);Ip.__removalCount=(Ne.__removalCount||0)+1,Lr.insertBefore(Ip,pe(Ne))}}}return $p(Ne),!0}return Ne instanceof T&&!wQ(Ne)||(Dn==="noscript"||Dn==="noembed"||Dn==="noframes")&&ha(/<\/no(script|embed|frames)/i,Ne.innerHTML)?($p(Ne),!0):(Bp&&Ne.nodeType===I0.text&&(Gt=Ne.textContent,BE([un,bo,Xt],Lr=>{Gt=XC(Gt,Lr," ")}),Ne.textContent!==Gt&&(YC(s.removed,{element:Ne.cloneNode()}),Ne.textContent=Gt)),qb("afterSanitizeElements",Ne,null),!1)},dX=function(Ne,Gt,Dn){if(KY&&(Gt==="id"||Gt==="name")&&(Dn in a||Dn in vQ))return!1;if(!(Np&&!bd[Gt]&&ha(Kn,Gt))){if(!(Pp&&ha(ht,Gt))){if(!io[Gt]||bd[Gt]){if(!(mX(Ne)&&(ls.tagNameCheck instanceof RegExp&&ha(ls.tagNameCheck,Ne)||ls.tagNameCheck instanceof Function&&ls.tagNameCheck(Ne))&&(ls.attributeNameCheck instanceof RegExp&&ha(ls.attributeNameCheck,Gt)||ls.attributeNameCheck instanceof Function&&ls.attributeNameCheck(Gt))||Gt==="is"&&ls.allowCustomizedBuiltInElements&&(ls.tagNameCheck instanceof RegExp&&ha(ls.tagNameCheck,Dn)||ls.tagNameCheck instanceof Function&&ls.tagNameCheck(Dn))))return!1}else if(!Yq[Gt]){if(!ha(nn,XC(Dn,fn,""))){if(!((Gt==="src"||Gt==="xlink:href"||Gt==="href")&&Ne!=="script"&&bb(Dn,"data:")===0&&JY[Ne])){if(!(Zb&&!ha(Bt,XC(Dn,fn,"")))){if(Dn)return!1}}}}}}return!0},mX=function(Ne){return Ne!=="annotation-xml"&&rN(Ne,$n)},fX=function(Ne){qb("beforeSanitizeAttributes",Ne,null);const{attributes:Gt}=Ne;if(!Gt)return;const Dn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:io};let Lr=Gt.length;for(;Lr--;){const Nl=Gt[Lr],{name:Rc,namespaceURI:vd,value:Ip}=Nl,CM=Dc(Rc);let tl=Rc==="value"?Ip:aN(Ip);const SQ=tl;if(Dn.attrName=CM,Dn.attrValue=tl,Dn.keepAttr=!0,Dn.forceKeepAttr=void 0,qb("uponSanitizeAttribute",Ne,Dn),tl=Dn.attrValue,Dn.forceKeepAttr)continue;if(!Dn.keepAttr){wM(Rc,Ne);continue}if(!Sk&&ha(/\/>/i,tl)){wM(Rc,Ne);continue}Bp&&BE([un,bo,Xt],hX=>{tl=XC(tl,hX," ")});const gX=Dc(Ne.nodeName);if(!dX(gX,CM,tl)){wM(Rc,Ne);continue}if(YY&&(CM==="id"||CM==="name")&&(wM(Rc,Ne),tl=gQ+tl),pM&&ha(/((--!?|])>)|<\/(style|title)/i,tl)){wM(Rc,Ne);continue}if(Je&&typeof j=="object"&&typeof j.getAttributeType=="function"&&!vd)switch(j.getAttributeType(gX,CM)){case"TrustedHTML":{tl=Je.createHTML(tl);break}case"TrustedScriptURL":{tl=Je.createScriptURL(tl);break}}if(tl!==SQ)try{vd?Ne.setAttributeNS(vd,Rc,tl):Ne.setAttribute(Rc,tl),cX(Ne)?$p(Ne):sN(s.removed)}catch{}}qb("afterSanitizeAttributes",Ne,null)},CQ=function In(Ne){let Gt=null;const Dn=iX(Ne);for(qb("beforeSanitizeShadowDOM",Ne,null);Gt=Dn.nextNode();)qb("uponSanitizeShadowNode",Gt,null),!uX(Gt)&&(Gt.content instanceof h&&In(Gt.content),fX(Gt));qb("afterSanitizeShadowDOM",Ne,null)};return s.sanitize=function(In){let Ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Gt=null,Dn=null,Lr=null,Nl=null;if(Xq=!In,Xq&&(In="<!-->"),typeof In!="string"&&!lX(In))if(typeof In.toString=="function"){if(In=In.toString(),typeof In!="string")throw JC("dirty is not a string, aborting")}else throw JC("toString is not a function");if(!s.isSupported)return In;if(bM||Qq(Ne),s.removed=[],typeof In=="string"&&(vM=!1),vM){if(In.nodeName){const Ip=Dc(In.nodeName);if(!Cn[Ip]||Ac[Ip])throw JC("root node is forbidden and cannot be sanitized in-place")}}else if(In instanceof E)Gt=aX("<!---->"),Dn=Gt.ownerDocument.importNode(In,!0),Dn.nodeType===I0.element&&Dn.nodeName==="BODY"||Dn.nodeName==="HTML"?Gt=Dn:Gt.appendChild(Dn);else{if(!xk&&!Bp&&!jb&&In.indexOf("<")===-1)return Je&&Z6?Je.createHTML(In):In;if(Gt=aX(In),!Gt)return xk?null:Z6?Ve:""}Gt&&qq&&$p(Gt.firstChild);const Rc=iX(vM?In:Gt);for(;Lr=Rc.nextNode();)uX(Lr)||(Lr.content instanceof h&&CQ(Lr.content),fX(Lr));if(vM)return In;if(xk){if(W6)for(Nl=gt.call(Gt.ownerDocument);Gt.firstChild;)Nl.appendChild(Gt.firstChild);else Nl=Gt;return(io.shadowroot||io.shadowrootmode)&&(Nl=$t.call(c,Nl,!0)),Nl}let vd=jb?Gt.outerHTML:Gt.innerHTML;return jb&&Cn["!doctype"]&&Gt.ownerDocument&&Gt.ownerDocument.doctype&&Gt.ownerDocument.doctype.name&&ha(mN,Gt.ownerDocument.doctype.name)&&(vd="<!DOCTYPE "+Gt.ownerDocument.doctype.name+`>
`+vd),Bp&&BE([un,bo,Xt],Ip=>{vd=XC(vd,Ip," ")}),Je&&Z6?Je.createHTML(vd):vd},s.setConfig=function(){let In=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Qq(In),bM=!0},s.clearConfig=function(){kk=null,bM=!1},s.isValidAttribute=function(In,Ne,Gt){kk||Qq({});const Dn=Dc(In),Lr=Dc(Ne);return dX(Dn,Lr,Gt)},s.addHook=function(In,Ne){typeof Ne=="function"&&(tn[In]=tn[In]||[],YC(tn[In],Ne))},s.removeHook=function(In){if(tn[In])return sN(tn[In])},s.removeHooks=function(In){tn[In]&&(tn[In]=[])},s.removeAllHooks=function(){tn={}},s}var X7=gN();const hN=t=>X7().sanitize(t);var Cc=tinymce.util.Tools.resolve("tinymce.util.I18n");const pN={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},c4="temporary-placeholder",nS=t=>()=>Ct(t,c4).getOr("!not found!"),l4=(t,s)=>{const a=t.toLowerCase();if(Cc.isRtl()){const c=na(a,"-rtl");return oo(s,c)?c:a}else return a},u4=(t,s)=>Ct(s,l4(t,s)),bN=(t,s)=>{const a=s();return u4(t,a).getOrThunk(nS(a))},J7=(t,s,a)=>{const c=s();return u4(t,c).or(a).getOrThunk(nS(c))},Q7=t=>Cc.isRtl()?oo(pN,t):!1,HE=()=>En("add-focusable",[Bo(t=>{zv(t.element,"svg").each(s=>Et(s,"focusable","false"))})]),vN=(t,s,a,c)=>{var d,h;const v=Q7(s)?["tox-icon--flip"]:[],E=Ct(a,l4(s,a)).or(c).getOrThunk(nS(a));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(v),innerHtml:E},behaviours:lt([...(h=t.behaviours)!==null&&h!==void 0?h:[],HE()])}},ad=(t,s,a,c=R.none())=>vN(s,t,a(),c),d4=(t,s,a)=>{const c=a(),d=on(t,h=>oo(c,l4(h,c)));return vN(s,d.getOr(c4),c,R.none())},yN={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},m4=nc({name:"Notification",factory:t=>{const s=wo({dom:pg(`<p>${hN(t.translationProvider(t.text))}</p>`),behaviours:lt([yn.config({})])}),a=j=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${j}%`}}}),c=j=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${j}%`}}),d=wo({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(0)]},c(0)],behaviours:lt([yn.config({})])}),E={updateProgress:(j,X)=>{j.getSystem().isConnected()&&d.getOpt(j).each(ce=>{yn.set(ce,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(X)]},c(X)])})},updateText:(j,X)=>{if(j.getSystem().isConnected()){const ce=s.get(j);yn.set(ce,[Fs(X)])}}},T=zt([t.icon.toArray(),t.level.toArray(),t.level.bind(j=>R.from(yN[j])).toArray()]),D=wo(Xr.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[ad("close",{tag:"span",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:j=>{t.onAction(j)}})),B=d4(T,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),L={dom:{tag:"div",classes:["tox-notification__body"]},components:[s.asSpec()],behaviours:lt([yn.config({})])},U=[B,L];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(j=>["tox-notification","tox-notification--in",`tox-notification--${j}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:lt([ln.config({}),En("notification-events",[We(qi(),j=>{D.getOpt(j).each(ln.focus)})])]),components:U.concat(t.progress?[d.asSpec()]:[]).concat(t.closeButton?[D.asSpec()]:[]),apis:E}},configFields:[po("level"),Ke("progress"),po("icon"),Ke("onAction"),Ke("text"),Ke("iconProvider"),Ke("translationProvider"),Cr("closeButton",!0)],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var f4=(t,s,a)=>{const c=s.backstage.shared,d=()=>{const T=xs(Ce.fromDom(t.getContentAreaContainer())),D=Wr(),B=gc(D.x,T.x,T.right),L=gc(D.y,T.y,T.bottom),U=Math.max(T.right,D.right),j=Math.max(T.bottom,D.bottom);return R.some(hs(B,L,U-B,j-L))};return{open:(T,D)=>{const B=()=>{D(),_s.hide(U)},L=Ea(m4.sketch({text:T.text,level:go(["success","error","warning","warn","info"],T.type)?T.type:void 0,progress:T.progressBar===!0,icon:T.icon,closeButton:T.closeButton,onAction:B,iconProvider:c.providers.icons,translationProvider:c.providers.translate})),U=Ea(_s.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:c.getSink,fireDismissalEventInstead:{},...c.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));a.add(U),Zt(T.timeout)&&T.timeout>0&&pb.setEditorTimeout(t,()=>{B()},T.timeout);const X={close:B,reposition:()=>{const ce=fc(L),ke={maxHeightFunction:kh()},pe=t.notificationManager.getNotifications();if(pe[0]===X){const ge={...c.anchors.banner(),overrides:ke};_s.showWithinBounds(U,ce,{anchor:ge},d)}else qe(pe,X).each(ge=>{const Oe=pe[ge-1].getEl(),Je={type:"node",root:Rs(),node:R.some(Ce.fromDom(Oe)),overrides:ke,layouts:{onRtl:()=>[Er],onLtr:()=>[Er]}};_s.showWithinBounds(U,ce,{anchor:Je},d)})},text:ce=>{m4.updateText(L,ce)},settings:T,getEl:()=>L.element.dom,progressBar:{value:ce=>{m4.updateProgress(L,ce)}}};return X},close:T=>{T.close()},getArgs:T=>T.settings}},F0=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),tH=tinymce.util.Tools.resolve("tinymce.EditorManager"),L0=tinymce.util.Tools.resolve("tinymce.Env"),fu;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(fu||(fu={}));var oS;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(oS||(oS={}));const Io=t=>s=>s.options.get(t),vb=t=>s=>R.from(t(s)),wN=t=>{const s=L0.deviceType.isPhone(),a=L0.deviceType.isTablet()||s,c=t.options.register,d=v=>z(v)||v===!1,h=v=>z(v)||Zt(v);c("skin",{processor:v=>z(v)||v===!1,default:"oxide"}),c("skin_url",{processor:"string"}),c("height",{processor:h,default:Math.max(t.getElement().offsetHeight,400)}),c("width",{processor:h,default:F0.DOM.getStyle(t.getElement(),"width")}),c("min_height",{processor:"number",default:100}),c("min_width",{processor:"number"}),c("max_height",{processor:"number"}),c("max_width",{processor:"number"}),c("style_formats",{processor:"object[]"}),c("style_formats_merge",{processor:"boolean",default:!1}),c("style_formats_autohide",{processor:"boolean",default:!1}),c("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),c("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),c("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),c("font_size_input_default_unit",{processor:"string",default:"pt"}),c("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),c("content_langs",{processor:"object[]"}),c("removed_menuitems",{processor:"string",default:""}),c("menubar",{processor:v=>z(v)||xe(v),default:!s}),c("menu",{processor:"object",default:{}}),c("toolbar",{processor:v=>xe(v)||z(v)||ie(v)?{value:v,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),Xo(9,v=>{c("toolbar"+(v+1),{processor:"string"})}),c("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),c("toolbar_groups",{processor:"object",default:{}}),c("toolbar_location",{processor:"string",default:oS.auto}),c("toolbar_persist",{processor:"boolean",default:!1}),c("toolbar_sticky",{processor:"boolean",default:t.inline}),c("toolbar_sticky_offset",{processor:"number",default:0}),c("fixed_toolbar_container",{processor:"string",default:""}),c("fixed_toolbar_container_target",{processor:"object"}),c("ui_mode",{processor:"string",default:"combined"}),c("file_picker_callback",{processor:"function"}),c("file_picker_validator_handler",{processor:"function"}),c("file_picker_types",{processor:"string"}),c("typeahead_urls",{processor:"boolean",default:!0}),c("anchor_top",{processor:d,default:"#top"}),c("anchor_bottom",{processor:d,default:"#bottom"}),c("draggable_modal",{processor:"boolean",default:!1}),c("statusbar",{processor:"boolean",default:!0}),c("elementpath",{processor:"boolean",default:!0}),c("branding",{processor:"boolean",default:!0}),c("promotion",{processor:"boolean",default:!0}),c("resize",{processor:v=>v==="both"||xe(v),default:!L0.deviceType.isTouch()}),c("sidebar_show",{processor:"string"}),c("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),c("default_font_stack",{processor:"string[]",default:[]})},sS=Io("readonly"),g4=Io("height"),h4=Io("width"),p4=vb(Io("min_width")),b4=vb(Io("min_height")),zE=vb(Io("max_width")),v4=vb(Io("max_height")),y4=vb(Io("style_formats")),CN=Io("style_formats_merge"),SN=Io("style_formats_autohide"),VE=Io("content_langs"),op=Io("removed_menuitems"),H0=Io("toolbar_mode"),xN=Io("toolbar_groups"),rS=Io("toolbar_location"),EN=Io("fixed_toolbar_container"),nH=Io("fixed_toolbar_container_target"),TN=Io("toolbar_persist"),w4=Io("toolbar_sticky_offset"),_N=Io("menubar"),aS=Io("toolbar"),C4=Io("file_picker_callback"),UE=Io("file_picker_validator_handler"),kN=Io("font_size_input_default_unit"),S4=Io("file_picker_types"),ON=Io("typeahead_urls"),z0=Io("anchor_top"),AN=Io("anchor_bottom"),DN=Io("draggable_modal"),WE=Io("statusbar"),ZE=Io("elementpath"),x4=Io("branding"),jE=Io("resize"),RN=Io("paste_as_text"),MN=Io("sidebar_show"),GE=Io("promotion"),PN=Io("help_accessibility"),NN=Io("default_font_stack"),E4=t=>t.options.get("skin")===!1,qE=t=>t.options.get("menubar")!==!1,KE=t=>{const s=t.options.get("skin_url");if(E4(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return tH.baseURL+"/skins/ui/"+a}},YE=t=>R.from(t.options.get("skin_url")),BN=t=>t.options.get("line_height_formats").split(" "),XE=t=>{const s=aS(t),a=z(s),c=ie(s)&&s.length>0;return!iS(t)&&(c||a||s===!0)},T4=t=>{const s=Xo(9,c=>t.options.get("toolbar"+(c+1))),a=vo(s,z);return cn(a.length>0,a)},iS=t=>T4(t).fold(()=>{const s=aS(t);return ze(s,z)&&s.length>0},Dt),_4=t=>rS(t)===oS.bottom,$N=t=>{var s;if(!t.inline)return R.none();const a=(s=EN(t))!==null&&s!==void 0?s:"";if(a.length>0)return Ws(Rs(),a);const c=nH(t);return je(c)?R.some(Ce.fromDom(c)):R.none()},sp=t=>t.inline&&$N(t).isSome(),k4=t=>$N(t).getOrThunk(()=>ot(Be(Ce.fromDom(t.getElement())))),O4=t=>t.inline&&!qE(t)&&!XE(t)&&!iS(t),cS=t=>(t.options.get("toolbar_sticky")||t.inline)&&!sp(t)&&!O4(t),vg=t=>!sp(t)&&t.options.get("ui_mode")==="split",IN=t=>{const s=t.options.get("menu");return Qo(s,a=>({...a,items:a.items}))};var oH=Object.freeze({__proto__:null,get ToolbarMode(){return fu},get ToolbarLocation(){return oS},register:wN,getSkinUrl:KE,getSkinUrlOption:YE,isReadOnly:sS,isSkinDisabled:E4,getHeightOption:g4,getWidthOption:h4,getMinWidthOption:p4,getMinHeightOption:b4,getMaxWidthOption:zE,getMaxHeightOption:v4,getUserStyleFormats:y4,shouldMergeStyleFormats:CN,shouldAutoHideStyleFormats:SN,getLineHeightFormats:BN,getContentLanguages:VE,getRemovedMenuItems:op,isMenubarEnabled:qE,isMultipleToolbars:iS,isToolbarEnabled:XE,isToolbarPersist:TN,getMultipleToolbarsOption:T4,getUiContainer:k4,useFixedContainer:sp,isSplitUiMode:vg,getToolbarMode:H0,isDraggableModal:DN,isDistractionFree:O4,isStickyToolbar:cS,getStickyToolbarOffset:w4,getToolbarLocation:rS,isToolbarLocationBottom:_4,getToolbarGroups:xN,getMenus:IN,getMenubar:_N,getToolbar:aS,getFilePickerCallback:C4,getFilePickerTypes:S4,useTypeaheadUrls:ON,getAnchorTop:z0,getAnchorBottom:AN,getFilePickerValidatorHandler:UE,getFontSizeInputDefaultUnit:kN,useStatusBar:WE,useElementPath:ZE,promotionEnabled:GE,useBranding:x4,getResize:jE,getPasteAsText:RN,getSidebarShow:MN,useHelpAccessibility:PN,getDefaultFontStack:NN});const FN="[data-mce-autocompleter]",LN=t=>ou(t,FN),sH=t=>Ws(t,FN),A4={setup:(t,s)=>{const a=(d,h)=>{qt(d,bl(),{raw:h})},c=()=>t.getMenu().bind(ao.getHighlighted);s.on("keydown",d=>{const h=d.which;t.isActive()&&(t.isMenuOpen()?h===13?(c().each(Id),d.preventDefault()):h===40?(c().fold(()=>{t.getMenu().each(ao.highlightFirst)},v=>{a(v,d)}),d.preventDefault(),d.stopImmediatePropagation()):(h===37||h===38||h===39)&&c().each(v=>{a(v,d),d.preventDefault(),d.stopImmediatePropagation()}):(h===13||h===38||h===40)&&t.cancelIfNecessary())}),s.on("NodeChange",d=>{t.isActive()&&!t.isProcessingAction()&&LN(Ce.fromDom(d.element)).isNone()&&t.cancelIfNecessary()})}};var D4;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(D4||(D4={}));var am=D4;const R4="tox-menu-nav__js",JE="tox-collection__item",M4="tox-swatch",rH={normal:R4,color:M4},HN="tox-collection__item--enabled",aH="tox-collection__group-heading",zN="tox-collection__item-icon",P4="tox-collection__item-label",iH="tox-collection__item-accessory",VN="tox-collection__item-caret",cH="tox-collection__item-checkmark",rp="tox-collection__item--active",UN="tox-collection__item-container",N4="tox-collection__item-container--column",WN="tox-collection__item-container--row",lH="tox-collection__item-container--align-right",uH="tox-collection__item-container--align-left",ZN="tox-collection__item-container--valign-top",dH="tox-collection__item-container--valign-middle",B4="tox-collection__item-container--valign-bottom",QE=t=>Ct(rH,t).getOr(R4),jN=t=>t==="color"?"tox-swatches":"tox-menu",lS=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:jN(t),tieredMenu:"tox-tiered-menu"}),rf=t=>{const s=lS(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:QE(t)}},GN=(t,s,a)=>{const c=lS(a);return{tag:"div",classes:zt([[c.menu,`tox-menu-${s}-column`],t?[c.hasIcons]:[]])}},af=[hb.parts.items({})],V0=(t,s,a)=>{const c=lS(a);return{dom:{tag:"div",classes:zt([[c.tieredMenu]])},markers:rf(a)}},qN=ae([po("data"),_e("inputAttributes",{}),_e("inputStyles",{}),_e("tag","input"),_e("inputClasses",[]),Wn("onSetValue"),_e("styles",{}),_e("eventOrder",{}),hr("inputBehaviours",[St,ln]),_e("selectOnFocus",!0)]),KN=t=>lt([ln.config({onFocus:t.selectOnFocus?s=>{const a=s.element,c=qu(a);a.dom.setSelectionRange(0,c.length)}:Q})]),mH=t=>({...KN(t),...Qs(t.inputBehaviours,[St.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>qu(s.element),setValue:(s,a)=>{qu(s.element)!==a&&gh(s.element,a)}},onSetValue:t.onSetValue})])}),YN=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),uS=(t,s)=>({uid:t.uid,dom:YN(t),components:[],behaviours:mH(t),eventOrder:t.eventOrder}),yb=nc({name:"Input",configFields:qN(),factory:uS}),$4=Rt("refetch-trigger-event"),eT=Rt("redirect-menu-item-interaction"),XN="tox-menu__searcher",U0=t=>Ws(t.element,`.${XN}`).bind(s=>t.getSystem().getByDom(s).toOptional()),tT=U0,fH=(t,s)=>{St.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},I4=t=>{const s=St.getValue(t),a=t.element.dom.selectionStart,c=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:c}},JN=(t,s)=>{zr(s.element,"id").each(a=>Et(t.element,"aria-activedescendant",a))},gH=t=>{const s=(d,h)=>(h.cut(),R.none()),a=(d,h)=>{const v={interactionEvent:h.event,eventType:h.event.raw.type};return qt(d,eT,v),R.some(!0)},c="searcher-events";return{dom:{tag:"div",classes:[JE]},components:[yb.sketch({inputClasses:[XN,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:lt([En(c,[We(Uf(),d=>{Ln(d,$4)}),We(bl(),(d,h)=>{h.event.raw.key==="Escape"&&h.stop()})]),Kt.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[c,Kt.name()]}})]}},nT="tox-collection--results__js",QN=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:Rt("aria-item-search-result-id"),"aria-selected":"false"}}}:t},F4=(t,s)=>a=>{const c=ar(a,s);return Xe(c,d=>({dom:t,components:d}))},hH=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[hb.parts.items({preprocess:t!=="auto"?F4({tag:"div",classes:["tox-swatches__row"]},t):ut})]}]}),pH=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[hb.parts.items({preprocess:F4({tag:"div",classes:["tox-collection__group"]},t)})]}),L4=(t,s)=>{const a=[];let c=[];return yt(t,(d,h)=>{s(d,h)?(c.length>0&&a.push(c),c=[],(oo(d.dom,"innerHtml")||d.components&&d.components.length>0)&&c.push(d)):c.push(d)}),c.length>0&&a.push(c),Xe(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},oT=(t,s,a)=>hb.parts.items({preprocess:c=>{const d=Xe(c,a);return t!=="auto"&&t>1?F4({tag:"div",classes:["tox-collection__group"]},t)(d):L4(d,(h,v)=>s[v].type==="separator")}}),eB=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[oT(t,s,ut)]}),tB=(t,s,a=!0)=>{const c=Rt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",nT].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:c}},components:[oT(t,s,QN)]}},dS=(t,s,a)=>{const c=Rt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[gH({i18n:Cc.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],nT],attributes:{id:c}},components:[oT(t,s,QN)]}]}},nB=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[hb.parts.items({preprocess:a=>L4(a,(c,d)=>t[d].type==="separator")})]}),sT=t=>qs(t,s=>"icon"in s&&s.icon!==void 0),yg=t=>(console.error(Fa(t)),console.log(t),R.none()),oB=(t,s,a,c,d)=>{const h=nB(a);return{value:t,dom:h.dom,components:h.components,items:a}},H4=(t,s,a,c,d)=>{const h=()=>d.menuType!=="searchable"?eB(c,a):d.searchMode.searchMode==="search-with-field"?dS(c,a,d.searchMode):tB(c,a);if(d.menuType==="color"){const v=hH(c);return{value:t,dom:v.dom,components:v.components,items:a}}else if(d.menuType==="normal"&&c==="auto"){const v=eB(c,a);return{value:t,dom:v.dom,components:v.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const v=h();return{value:t,dom:v.dom,components:v.components,items:a}}else if(d.menuType==="listpreview"&&c!=="auto"){const v=pH(c);return{value:t,dom:v.dom,components:v.components,items:a}}else return{value:t,dom:GN(s,c,d.menuType),components:af,items:a}},rr=ro("type"),rT=ro("name"),aT=ro("label"),cf=ro("text"),z4=ro("title"),sB=ro("icon"),mS=ro("value"),rB=Xl("fetch"),V4=Xl("getSubmenuItems"),ap=Xl("onAction"),aB=Xl("onItemAction"),ip=Nr("onSetup",()=>Q),iB=ca("name"),cp=ca("text"),Yc=ca("icon"),iT=ca("tooltip"),cT=ca("label"),cB=ca("shortcut"),wb=Lf("select"),lT=Cr("active",!1),U4=Cr("borderless",!1),Xc=Cr("enabled",!0),uT=Cr("primary",!1),W4=t=>_e("columns",t),dT=_e("meta",{}),mT=Nr("onAction",Q),wg=t=>Lu("type",t),fT=t=>ia("name","name",Wc(()=>Rt(`${t}-name`)),jr),bH=t=>ia("value","value",Wc(()=>Rt(`${t}-value`)),mr()),Z4=Ut([rr,cp]),lB=t=>Es("separatormenuitem",Z4,t),uB=Ut([wg("autocompleteitem"),lT,Xc,dT,mS,cp,Yc]),dB=t=>Es("Autocompleter.Separator",Z4,t),vH=t=>Es("Autocompleter.Item",uB,t),W0=[Xc,iT,Yc,cp,ip],yH=Ut([rr,ap].concat(W0)),mB=t=>Es("toolbarbutton",yH,t),j4=[lT].concat(W0),wH=Ut(j4.concat([rr,ap])),G4=t=>Es("ToggleButton",wH,t),Z0=[Nr("predicate",An),ji("scope","node",["node","editor"]),ji("position","selection",["node","selection","line"])],fB=W0.concat([wg("contextformbutton"),uT,ap,zs("original",ut)]),CH=j4.concat([wg("contextformbutton"),uT,ap,zs("original",ut)]),SH=W0.concat([wg("contextformbutton")]),xH=j4.concat([wg("contextformtogglebutton")]),EH=Un("type",{contextformbutton:fB,contextformtogglebutton:CH}),TH=Ut([wg("contextform"),Nr("initValue",ae("")),cT,lc("commands",EH),Iu("launch",Un("type",{contextformbutton:SH,contextformtogglebutton:xH}))].concat(Z0)),gT=t=>Es("ContextForm",TH,t),_H=Ut([wg("contexttoolbar"),ro("items")].concat(Z0)),gB=t=>Es("ContextToolbar",_H,t),kH=[rr,ro("src"),ca("alt"),yi("classes",[],jr)],hB=Ut(kH),pB=[rr,cf,iB,yi("classes",["tox-collection__item-label"],jr)],OH=Ut(pB),q4=Zr(()=>nt("type",{cardimage:hB,cardtext:OH,cardcontainer:bB})),bB=Ut([rr,Lu("direction","horizontal"),Lu("align","left"),Lu("valign","middle"),lc("items",q4)]),Cb=[Xc,cp,cB,bH("menuitem"),dT],vB=Ut([rr,cT,lc("items",q4),ip,mT].concat(Cb)),AH=t=>Es("cardmenuitem",vB,t),DH=Ut([rr,lT,Yc].concat(Cb)),RH=t=>Es("choicemenuitem",DH,t),yB=[rr,ro("fancytype"),mT],wB=[_e("initData",{})].concat(yB),CB=[Lf("select"),Hu("initData",{},[Cr("allowCustomColors",!0),Lu("storageKey","default"),Hf("colors",mr())])].concat(yB),MH=Un("fancytype",{inserttable:wB,colorswatch:CB}),PH=t=>Es("fancymenuitem",MH,t),NH=Ut([rr,ip,mT,Yc].concat(Cb)),BH=t=>Es("menuitem",NH,t),$H=Ut([rr,V4,ip,Yc].concat(Cb)),SB=t=>Es("nestedmenuitem",$H,t),IH=Ut([rr,Yc,lT,ip,ap].concat(Cb)),FH=t=>Es("togglemenuitem",IH,t),fS=(t,s,a)=>{const c=_r(t.element,"."+a);if(c.length>0){const d=Po(c,h=>{const v=h.dom.getBoundingClientRect().top,E=c[0].dom.getBoundingClientRect().top;return Math.abs(v-E)>s}).getOr(c.length);return R.some({numColumns:d,numRows:Math.ceil(c.length/d)})}else return R.none()},K4=(t,s)=>lt([En(t,s)]),gS={namedEvents:K4,unnamedEvents:t=>K4(Rt("unnamed-events"),t)},Y4=Rt("tooltip.exclusive"),hS=Rt("tooltip.show"),pS=Rt("tooltip.hide"),X4=(t,s,a)=>{t.getSystem().broadcastOn([Y4],{})};var xB=Object.freeze({__proto__:null,hideAllExclusive:X4,setComponents:(t,s,a,c)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&yn.set(d,c)})}}),HH=Object.freeze({__proto__:null,events:(t,s)=>{const a=d=>{s.getTooltip().each(h=>{td(h),t.onHide(d,h),s.clearTooltip()}),s.clearTimer()},c=d=>{if(!s.isShowing()){X4(d);const h=t.lazySink(d).getOrDie(),v=d.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:zo(t.mode==="normal"?[We(Bd(),E=>{Ln(d,hS)}),We(Qg(),E=>{Ln(d,pS)})]:[]),behaviours:lt([yn.config({})])});s.setTooltip(v),Jm(h,v),t.onShow(d,v),_a.position(h,v,{anchor:t.anchor(d)})}};return zo(zt([[We(hS,d=>{s.resetTimer(()=>{c(d)},t.delay)}),We(pS,d=>{s.resetTimer(()=>{a(d)},t.delay)}),We(jf(),(d,h)=>{const v=h;v.universal||go(v.channels,Y4)&&a(d)}),Zu(d=>{a(d)})],t.mode==="normal"?[We(qi(),d=>{Ln(d,hS)}),We(Pm(),d=>{Ln(d,pS)}),We(Bd(),d=>{Ln(d,hS)}),We(Qg(),d=>{Ln(d,pS)})]:[We(h1(),(d,h)=>{Ln(d,hS)}),We(p1(),d=>{Ln(d,pS)})]]))}}),zH=[Ke("lazySink"),Ke("tooltipDom"),_e("exclusive",!0),_e("tooltipComponents",[]),_e("delay",300),ji("mode","normal",["normal","follow-highlight"]),_e("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:ae([Er,Ha,xr,ai,ma,Ta]),onRtl:ae([Er,Ha,xr,ai,ma,Ta])}})),Wn("onHide"),Wn("onShow")],J4=Object.freeze({__proto__:null,init:()=>{const t=Rn(),s=Rn(),a=()=>{t.on(clearTimeout)},c=(h,v)=>{a(),t.set(setTimeout(h,v))},d=ae("not-implemented");return Yi({getTooltip:s.get,isShowing:s.isSet,setTooltip:s.set,clearTooltip:s.clear,clearTimer:a,resetTimer:c,readState:d})}});const EB=Tr({fields:zH,name:"tooltipping",active:HH,state:J4,apis:xB}),VH=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Q4="silver.readonly",TB=Ut([Zk("readonly")]),hT=(t,s)=>{const c=t.mainUi.outerContainer.element,d=[t.mainUi.mothership,...t.uiMotherships];s&&yt(d,h=>{h.broadcastOn([cu()],{target:c})}),yt(d,h=>{h.broadcastOn([Q4],{readonly:s})})},_B=(t,s)=>{t.on("init",()=>{t.mode.isReadOnly()&&hT(s,!0)}),t.on("SwitchMode",()=>hT(s,t.mode.isReadOnly())),sS(t)&&t.mode.set("readonly")},Br=()=>Si.config({channels:{[Q4]:{schema:TB,onReceive:(t,s)=>{sn.set(t,s.readonly)}}}}),Ol={item:t=>sn.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>sn.config({disabled:t}),splitButton:t=>sn.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>sn.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},Sb=(t,s)=>{const a=t.getApi(s);return c=>{c(a)}},Cg=(t,s)=>Bo(a=>{Sb(t,a)(d=>{const h=t.onSetup(d);He(h)&&s.set(h)})}),id=(t,s)=>Zu(a=>Sb(t,a)(s.get())),pT=(t,s)=>vl((a,c)=>{Sb(t,a)(t.onAction),!t.triggersSubmenu&&s===am.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&Ln(a,m1()),c.stop())}),eD={[Ki()]:["disabling","alloy.base.behaviour","toggling","item-events"]},xb=Ii,lf=(t,s,a,c)=>{const d=en(Q);return{type:"item",dom:s.dom,components:xb(s.optComponents),data:t.data,eventOrder:eD,hasSubmenu:t.triggersSubmenu,itemBehaviours:lt([En("item-events",[pT(t,a),Cg(t,d),id(t,d)]),Ol.item(()=>!t.enabled||c.isDisabled()),Br(),yn.config({})].concat(t.itemBehaviours))}},j0=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),OB=t=>{const s=L0.os.isMacOS()||L0.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},h=t.split("+"),v=Xe(h,E=>{const T=E.toLowerCase().trim();return oo(d,T)?d[T]:E});return s?v.join(""):v.join("+")},gu=(t,s,a=[zN])=>ad(t,{tag:"div",classes:a},s),Sc=t=>({dom:{tag:"div",classes:[P4]},components:[Fs(Cc.translate(t))]}),G0=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),hu=(t,s)=>({dom:{tag:"div",classes:[P4]},components:[{dom:{tag:t.tag,styles:t.styles},components:[Fs(Cc.translate(s))]}]}),WH=t=>({dom:{tag:"div",classes:[iH]},components:[Fs(OB(t))]}),Uo=t=>gu("checkmark",t,[cH]),ZH=t=>gu("chevron-right",t,[VN]),Eb=t=>gu("chevron-down",t,[VN]),bS=(t,s)=>{const a=t.direction==="vertical"?N4:WN,c=t.align==="left"?uH:lH;return{dom:{tag:"div",classes:[UN,a,c,(()=>{switch(t.valign){case"top":return ZN;case"middle":return dH;case"bottom":return B4}})()]},components:s}},AB=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),tD=(t,s,a)=>{const c="custom",d="remove",h=t.ariaLabel,v=t.value,E=t.iconContent.map(D=>J7(D,s.icons,a));return{dom:(()=>{const D=M4,B=E.getOr(""),U={tag:"div",attributes:h.map(j=>({title:s.translate(j)})).getOr({}),classes:[D]};return v===c?{...U,tag:"button",classes:[...U.classes,"tox-swatches__picker-btn"],innerHtml:B}:v===d?{...U,classes:[...U.classes,"tox-swatch--remove"],innerHtml:B}:je(v)?{...U,attributes:{...U.attributes,"data-mce-color":v},styles:{"background-color":v},innerHtml:B}:U})(),optComponents:[]}},bT=t=>{const s=t.map(a=>({attributes:{title:Cc.translate(a),id:Rt("menu-item")}})).getOr({});return{tag:"div",classes:[R4,JE],...s}},jH=(t,s,a,c)=>{const d={tag:"div",classes:[zN]},h=U=>ad(U,d,s.icons,c),v=()=>R.some({dom:d}),E=a?t.iconContent.map(h).orThunk(v):R.none(),T=t.checkMark,D=R.from(t.meta).fold(()=>Sc,U=>oo(U,"style")?It(hu,U.style):Sc),B=t.htmlContent.fold(()=>t.textContent.map(D),U=>R.some(G0(U,[P4])));return{dom:bT(t.ariaLabel),optComponents:[E,B,t.shortcutContent.map(WH),T,t.caret]}},Tb=(t,s,a,c=R.none())=>t.presets==="color"?tD(t,s,c):jH(t,s,a,c),DB=(t,s)=>Ct(t,"tooltipWorker").map(a=>[EB.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:c=>({type:"submenu",item:c,overrides:{maxHeightFunction:kh}}),mode:"follow-highlight",onShow:(c,d)=>{a(h=>{EB.setComponents(c,[nx({element:Ce.fromDom(h)})])})}})]).getOr([]),RB=t=>F0.DOM.encode(t),nD=(t,s)=>{const a=Cc.translate(t),c=RB(a);if(s.length>0){const d=new RegExp(VH(s),"gi");return c.replace(d,h=>`<span class="tox-autocompleter-highlight">${h}</span>`)}else return c},oD=(t,s,a,c,d,h,v,E=!0)=>{const T=Tb({presets:c,textContent:R.none(),htmlContent:a?t.text.map(D=>nD(D,s)):R.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:R.none(),checkMark:R.none(),caret:R.none(),value:t.value},v.providers,E,t.icon);return lf({data:j0(t),enabled:t.enabled,getApi:ae({}),onAction:D=>d(t.value,t.meta),onSetup:ae(Q),triggersSubmenu:!1,itemBehaviours:DB(t.meta,v)},T,h,v.providers)},sD=(t,s)=>Xe(t,a=>{switch(a.type){case"cardcontainer":return bS(a,sD(a.items,s));case"cardimage":return AB(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(h=>go(s.cardText.highlightOn,h))?R.from(s.cardText.matchText).getOr(""):"";return G0(nD(a.text,d),a.classes)}}),vT=(t,s,a,c)=>{const d=v=>({isEnabled:()=>!sn.isDisabled(v),setEnabled:E=>{sn.set(v,!E),yt(_r(v.element,"*"),T=>{v.getSystem().getByDom(T).each(D=>{D.hasConfigured(sn)&&sn.set(D,!E)})})}}),h={dom:bT(t.label),optComponents:[R.some({dom:{tag:"div",classes:[UN,WN]},components:sD(t.items,c)})]};return lf({data:j0({text:R.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:R.from(c.itemBehaviours).getOr([])},h,s,a.providers)},GH=(t,s,a,c,d,h,v,E=!0)=>{const T=B=>({setActive:L=>{kn.set(B,L)},isActive:()=>kn.isOn(B),isEnabled:()=>!sn.isDisabled(B),setEnabled:L=>sn.set(B,!L)}),D=Tb({presets:a,textContent:s?t.text:R.none(),htmlContent:R.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:R.none(),checkMark:s?R.some(Uo(v.icons)):R.none(),caret:R.none(),value:t.value},v,E);return ko(lf({data:j0(t),enabled:t.enabled,getApi:T,onAction:B=>c(t.value),onSetup:B=>(B.setActive(d),Q),triggersSubmenu:!1,itemBehaviours:[]},D,h,v),{toggling:{toggleClass:HN,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},MB=Jd(qC(),KC()),PB=t=>({value:$B(t)}),NB=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,BB=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rD=t=>NB.test(t)||BB.test(t),$B=t=>wm(t,"#").toUpperCase(),qH=t=>rD(t)?R.some({value:$B(t)}):R.none(),IB=t=>({value:t.value.replace(NB,(a,c,d,h)=>c+c+d+d+h+h)}),KH=t=>{const s=IB(t),a=BB.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},yT=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},Sg=t=>{const s=yT(t.red)+yT(t.green)+yT(t.blue);return PB(s)},FB=Math.min,LB=Math.max,vS=Math.round,HB=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,zB=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,lp=(t,s,a,c)=>({red:t,green:s,blue:a,alpha:c}),aD=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},VB=t=>{let s,a,c;const d=(t.hue||0)%360;let h=t.saturation/100,v=t.value/100;if(h=LB(0,FB(h,1)),v=LB(0,FB(v,1)),h===0)return s=a=c=vS(255*v),lp(s,a,c,1);const E=d/60,T=v*h,D=T*(1-Math.abs(E%2-1)),B=v-T;switch(Math.floor(E)){case 0:s=T,a=D,c=0;break;case 1:s=D,a=T,c=0;break;case 2:s=0,a=T,c=D;break;case 3:s=0,a=D,c=T;break;case 4:s=D,a=0,c=T;break;case 5:s=T,a=0,c=D;break;default:s=a=c=0}return s=vS(255*(s+B)),a=vS(255*(a+B)),c=vS(255*(c+B)),lp(s,a,c,1)},yS=t=>{const s=KH(t),a=parseInt(s[1],16),c=parseInt(s[2],16),d=parseInt(s[3],16);return lp(a,c,d,1)},UB=(t,s,a,c)=>{const d=parseInt(t,10),h=parseInt(s,10),v=parseInt(a,10),E=parseFloat(c);return lp(d,h,v,E)},iD=t=>{if(t==="transparent")return R.some(lp(0,0,0,0));const s=HB.exec(t);if(s!==null)return R.some(UB(s[1],s[2],s[3],"1"));const a=zB.exec(t);return a!==null?R.some(UB(a[1],a[2],a[3],a[4])):R.none()},cD=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,pu=lp(255,0,0,1),YH=t=>{t.dispatch("SkinLoaded")},lD=(t,s)=>{t.dispatch("SkinLoadError",s)},WB=t=>{t.dispatch("ResizeEditor")},wT=(t,s)=>{t.dispatch("ResizeContent",s)},XH=(t,s)=>{t.dispatch("ScrollContent",s)},uD=(t,s)=>{t.dispatch("TextColorChange",s)},ZB=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},jB=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),JH=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},QH=(t,s)=>{t.dispatch("StylesTextUpdate",s)},ez=(t,s)=>{t.dispatch("AlignTextUpdate",s)},tz=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},nz=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},GB=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},qB=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},wS=(t,s)=>()=>{t(),s()},Ai=t=>cd(t,"NodeChange",s=>{s.setEnabled(t.selection.isEditable())}),oz=(t,s)=>a=>{const c=jd(),d=()=>{a.setActive(t.formatter.match(s));const h=t.formatter.formatChanged(s,a.setActive);c.set(h)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),c.clear()}},CT=(t,s)=>a=>{const c=Ai(t)(a),d=oz(t,s)(a);return()=>{c(),d()}},cd=(t,s,a)=>c=>{const d=()=>a(c),h=()=>{a(c),t.on(s,d)};return t.initialized?h():t.once("init",h),()=>{t.off("init",h),t.off(s,d)}},KB=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},xc=(t,s)=>()=>t.execCommand(s);var up=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const dD={},mD=(t,s=10)=>{const a=up.getItem(t),c=z(a)?JSON.parse(a):[],h=(D=>s-D.length<0?D.slice(0,s):D)(c),v=D=>{qe(h,D).each(E),h.unshift(D),h.length>s&&h.pop(),up.setItem(t,JSON.stringify(h))},E=D=>{h.splice(D,1)};return{add:v,state:()=>h.slice(0)}},ST=t=>Ct(dD,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=up.getItem(s);if(ve(a)){const d=up.getItem("tinymce-custom-colors");up.setItem(s,je(d)?d:"[]")}const c=mD(s,10);return dD[t]=c,c}),fD=t=>Xe(ST(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),gD=(t,s)=>{ST(t).add(s)},CS=(t,s,a)=>({hue:t,saturation:s,value:a}),xT=t=>{let s=0,a=0,c=0;const d=t.red/255,h=t.green/255,v=t.blue/255,E=Math.min(d,Math.min(h,v)),T=Math.max(d,Math.max(h,v));if(E===T)return c=E,CS(0,0,c*100);const D=d===E?h-v:v===E?d-h:v-d;return s=d===E?3:v===E?1:5,s=60*(s-D/(T-E)),a=(T-E)/T,c=T,CS(Math.round(s),Math.round(a*100),Math.round(c*100))},sz=t=>xT(yS(t)),YB=t=>Sg(VB(t)),rz=t=>qH(t).orThunk(()=>iD(t).map(Sg)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const c=a.getImageData(0,0,1,1).data,d=c[0],h=c[1],v=c[2],E=c[3];return Sg(lp(d,h,v,E))}),ET="forecolor",TT="hilitecolor",XB=5,az=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:"#"+rz(t[a]).value,icon:"checkmark",type:"choiceitem"});return s},uf=t=>s=>s.options.get(t),hD="#000000",iz=t=>{const s=t.options.register,a=d=>ze(d,z)?{value:az(d),valid:!0}:{valid:!1,message:"Must be an array of strings."},c=d=>Zt(d)&&d>0?{value:d,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:c,default:pD(t)}),s("color_cols_foreground",{processor:c,default:JB(t,ET)}),s("color_cols_background",{processor:c,default:JB(t,TT)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:hD}),s("color_default_background",{processor:"string",default:hD})},_T=(t,s)=>s===ET&&t.options.isSet("color_map_foreground")?uf("color_map_foreground")(t):s===TT&&t.options.isSet("color_map_background")?uf("color_map_background")(t):uf("color_map")(t),pD=(t,s="default")=>Math.max(XB,Math.ceil(Math.sqrt(_T(t,s).length))),JB=(t,s)=>{const a=uf("color_cols")(t),c=pD(t,s);return a===pD(t)?c:a},QB=(t,s="default")=>Math.round(s===ET?uf("color_cols_foreground")(t):s===TT?uf("color_cols_background")(t):uf("color_cols")(t)),e$=uf("custom_colors"),cz=uf("color_default_foreground"),lz=uf("color_default_background"),t$="rgba(0, 0, 0, 0)",uz=t=>iD(t).exists(s=>s.alpha!==0),dz=t=>zf(t,s=>{if(yo(s)){const a=Ps(s,"background-color");return cn(uz(a),a)}else return R.none()}).getOr(t$),n$=(t,s)=>{const a=Ce.fromDom(t.selection.getStart()),c=s==="hilitecolor"?dz(a):Ps(a,"color");return iD(c).map(d=>"#"+Sg(d).value)},mz=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},fz=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},kT=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{mz(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{fz(t,s)})},bD=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},vD=(t,s,a,c)=>{a==="custom"?a$(t)(h=>{h.each(v=>{gD(s,v),t.execCommand("mceApplyTextcolor",s,v),c(v)})},n$(t,s).getOr(hD)):a==="remove"?(c(""),t.execCommand("mceRemoveTextcolor",s)):(c(a),t.execCommand("mceApplyTextcolor",s,a))},yD=(t,s,a)=>t.concat(fD(s).concat(bD(a))),o$=(t,s,a)=>c=>{c(yD(t,s,a))},wD=(t,s,a)=>{const c=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(c,a)},s$=(t,s)=>{t.setTooltip(s)},r$=(t,s)=>a=>{const c=n$(t,s);return Pa(c,a.toUpperCase())},SS=(t,s,a)=>{if(Cs(a))return s==="forecolor"?"Text color":"Background color";const c=s==="forecolor"?"Text color {0}":"Background color {0}",d=yD(_T(t,s),s,!1),h=on(d,v=>v.value===a).getOr({text:""}).text;return t.translate([c,t.translate(h)])},CD=(t,s,a,c)=>{t.ui.registry.addSplitButton(s,{tooltip:SS(t,a,c.get()),presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:r$(t,a),columns:QB(t,a),fetch:o$(_T(t,a),a,e$(t)),onAction:d=>{vD(t,a,c.get(),Q)},onItemAction:(d,h)=>{vD(t,a,h,v=>{c.set(v),uD(t,{name:s,color:v})})},onSetup:d=>{wD(d,s,c.get());const h=v=>{v.name===s&&(wD(d,v.name,v.color),s$(d,SS(t,a,v.color)))};return t.on("TextColorChange",h),wS(Ai(t)(d),()=>{t.off("TextColorChange",h)})}})},SD=(t,s,a,c,d)=>{t.ui.registry.addNestedMenuItem(s,{text:c,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:h=>(s$(h,SS(t,a,d.get())),wD(h,s,d.get()),Ai(t)(h)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:r$(t,a),initData:{storageKey:a},onAction:h=>{vD(t,a,h.value,v=>{d.set(v),uD(t,{name:s,color:v})})}}]})},a$=t=>(s,a)=>{let c=!1;const d=E=>{const D=E.getData().colorpicker;c?(s(R.from(D)),E.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",D]))},h=(E,T)=>{T.name==="hex-valid"&&(c=T.value)},v={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:v,onAction:h,onSubmit:d,onClose:Q,onCancel:()=>{s(R.none())}})},i$=t=>{kT(t);const s=cz(t),a=lz(t),c=en(s),d=en(a);CD(t,"forecolor","forecolor",c),CD(t,"backcolor","hilitecolor",d),SD(t,"forecolor","forecolor","Text color",c),SD(t,"backcolor","hilitecolor","Background color",d)},xD=(t,s,a,c,d,h,v,E)=>{const T=sT(s),B=gz(s,a,c,d!=="color"?"normal":"color",h,v,E);return H4(t,T,B,c,{menuType:d})},gz=(t,s,a,c,d,h,v)=>Ii(Xe(t,E=>E.type==="choiceitem"?RH(E).fold(yg,T=>R.some(GH(T,a===1,c,s,h(T.value),d,v,sT(t)))):R.none())),OT=(t,s)=>{const a=rf(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?Ws(d.element,"[aria-checked=true]"):R.none()}},hz=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${M4}`:`.${JE}`}},pz=(t,s)=>{const a=bz(t,s),c=s.colorinput.getColorCols(t.initData.storageKey),d="color",v={...xD(Rt("menu-value"),a,E=>{t.onAction({value:E})},c,d,am.CLOSE_ON_EXECUTE,t.select.getOr(An),s.shared.providers),markers:rf(d),movement:OT(c,d)};return{type:"widget",data:{value:Rt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[MB.widget(hb.sketch(v))]}},bz=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>yD(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),c=>c.concat(bD(a)))},c$=Rt("cell-over"),l$=Rt("cell-execute"),vz=t=>(s,a)=>t.shared.providers.translate(["{0} columns, {1} rows",a,s]),yz=(t,s,a)=>{const c=v=>qt(v,c$,{row:t,col:s}),d=v=>qt(v,l$,{row:t,col:s}),h=(v,E)=>{E.stop(),d(v)};return Ea({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:lt([En("insert-table-picker-cell",[We(Bd(),ln.focus),We(Ki(),d),We($d(),h),We(eu(),h)]),kn.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),ln.config({onFocus:c})])})},AT=(t,s,a)=>{const c=[];for(let d=0;d<s;d++){const h=[];for(let v=0;v<a;v++){const E=t(d+1,v+1);h.push(yz(d,v,E))}c.push(h)}return c},ED=(t,s,a,c,d)=>{for(let h=0;h<c;h++)for(let v=0;v<d;v++)kn.set(t[h][v],h<=s&&v<=a)},TD=t=>$e(t,s=>Xe(s,fc)),_D=(t,s)=>Fs(`${s}x${t}`),wz={inserttable:(t,s)=>{const d=vz(s),h=AT(d,10,10),v=_D(0,0),E=wo({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[v],behaviours:lt([yn.config({})])});return{type:"widget",data:{value:Rt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[MB.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:TD(h).concat(E.asSpec()),behaviours:lt([En("insert-table-picker",[Bo(T=>{yn.set(E.get(T),[v])}),gw(c$,(T,D,B)=>{const{row:L,col:U}=B.event;ED(h,L,U,10,10),yn.set(E.get(T),[_D(L+1,U+1)])}),gw(l$,(T,D,B)=>{const{row:L,col:U}=B.event;t.onAction({numRows:L+1,numColumns:U+1}),Ln(T,m1())})]),Kt.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:pz},kD=(t,s)=>Ct(wz,t.fancytype).map(a=>a(t,s)),OD=(t,s,a,c=!0,d=!1)=>{const h=d?Eb(a.icons):ZH(a.icons),v=T=>({isEnabled:()=>!sn.isDisabled(T),setEnabled:D=>sn.set(T,!D),setIconFill:(D,B)=>{Ws(T.element,`svg path[class="${D}"], rect[class="${D}"]`).each(L=>{Et(L,"fill",B)})},setTooltip:D=>{const B=a.translate(D);Of(T.element,{"aria-label":B,title:B})}}),E=Tb({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:R.none(),ariaLabel:t.text,caret:R.some(h),checkMark:R.none(),shortcutContent:t.shortcut},a,c);return lf({data:j0(t),getApi:v,enabled:t.enabled,onAction:Q,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},E,s,a)},DT=(t,s,a,c=!0)=>{const d=v=>({isEnabled:()=>!sn.isDisabled(v),setEnabled:E=>sn.set(v,!E)}),h=Tb({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:R.none(),ariaLabel:t.text,caret:R.none(),checkMark:R.none(),shortcutContent:t.shortcut},a,c);return lf({data:j0(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},h,s,a)},u$=t=>({type:"separator",dom:{tag:"div",classes:[JE,aH]},components:t.text.map(Fs).toArray()}),Cz=(t,s,a,c=!0)=>{const d=v=>({setActive:E=>{kn.set(v,E)},isActive:()=>kn.isOn(v),isEnabled:()=>!sn.isDisabled(v),setEnabled:E=>sn.set(v,!E)}),h=Tb({iconContent:t.icon,textContent:t.text,htmlContent:R.none(),ariaLabel:t.text,checkMark:R.some(Uo(a.icons)),caret:R.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,c);return ko(lf({data:j0(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},h,s,a),{toggling:{toggleClass:HN,toggleOnExecute:!1,selected:t.active}})},Sz=oD,d$=u$,xz=DT,Ez=OD,Tz=Cz,_z=kD,kz=vT;var Oz=Object.freeze({__proto__:null,getCoupled:(t,s,a,c)=>a.getOrCreate(t,s,c),getExistingCoupled:(t,s,a,c)=>a.getExisting(t,s,c)}),Az=[Wi("others",Pd(xn.value,mr()))],m$=Object.freeze({__proto__:null,init:()=>{const t={},s=(h,v)=>{if(os(h.others).length===0)throw new Error("Cannot find any known coupled components");return Ct(t,v)},a=(h,v,E)=>s(v,E).getOrThunk(()=>{const D=Ct(v.others,E).getOrDie("No information found for coupled component: "+E)(h),B=h.getSystem().build(D);return t[E]=B,B}),c=(h,v,E)=>s(v,E).orThunk(()=>(Ct(v.others,E).getOrDie("No information found for coupled component: "+E),R.none())),d=ae({});return Yi({readState:d,getExisting:c,getOrCreate:a})}});const js=Tr({fields:Az,name:"coupling",apis:Oz,state:m$}),AD=t=>{let s=R.none(),a=[];const c=D=>AD(B=>{d(L=>{B(D(L))})}),d=D=>{v()?T(D):a.push(D)},h=D=>{v()||(s=R.some(D),E(a),a=[])},v=()=>s.isSome(),E=D=>{yt(D,T)},T=D=>{s.each(B=>{setTimeout(()=>{D(B)},0)})};return t(h),{get:d,map:c,isReady:v}},Dz={nu:AD,pure:t=>AD(s=>{s(t)})},Rz=t=>{setTimeout(()=>{throw t},0)},dp=t=>{const s=T=>{t().then(T,Rz)};return{map:T=>dp(()=>t().then(T)),bind:T=>dp(()=>t().then(D=>T(D).toPromise())),anonBind:T=>dp(()=>t().then(()=>T.toPromise())),toLazy:()=>Dz.nu(s),toCached:()=>{let T=null;return dp(()=>(T===null&&(T=t()),T))},toPromise:t,get:s}},Za={nu:t=>dp(()=>new Promise(t)),pure:t=>dp(()=>Promise.resolve(t))},f$=ae("sink"),g$=ae(Ti({name:f$(),overrides:ae({dom:{tag:"div"},behaviours:lt([_a.config({useFixed:Dt})]),events:zo([Fd(bl()),Fd(fr()),Fd($d())])})})),h$=(t,s)=>{const a=t.getHotspot(s).getOr(s),c="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:c,hotspot:a,overrides:d}),h=>({type:c,hotspot:a,overrides:d,layouts:h}))},Mz=(t,s,a)=>{const c=t.fetch;return c(a).map(s)},Pz=(t,s,a,c,d,h,v)=>{const E=Mz(t,s,c),T=p$(c,t);return E.map(D=>D.bind(B=>R.from(tp.sketch({...h.menu(),uid:sh(""),data:B,highlightOnOpen:v,onOpenMenu:(L,U)=>{const j=T().getOrDie();_a.position(j,U,{anchor:a}),Hn.decloak(d)},onOpenSubmenu:(L,U,j)=>{const X=T().getOrDie();_a.position(X,j,{anchor:{type:"submenu",item:U}}),Hn.decloak(d)},onRepositionMenu:(L,U,j)=>{const X=T().getOrDie();_a.position(X,U,{anchor:a}),yt(j,ce=>{_a.position(X,ce.triggeredMenu,{anchor:{type:"submenu",item:ce.triggeringItem}})})},onEscape:()=>(ln.focus(c),Hn.close(d),R.some(!0))}))))},RT=(t,s,a,c,d,h,v)=>{const E=h$(t,a);return Pz(t,s,E,a,c,d,v).map(D=>(D.fold(()=>{Hn.isOpen(c)&&Hn.close(c)},B=>{Hn.cloak(c),Hn.open(c,B),h(c)}),c))},Nz=(t,s,a,c,d,h,v)=>(Hn.close(c),Za.pure(c)),DD=(t,s,a,c,d,h)=>{const v=js.getCoupled(a,"sandbox");return(Hn.isOpen(v)?Nz:RT)(t,s,a,v,c,d,h)},Bz=(t,s,a)=>{const c=Bn.getCurrent(s).getOr(s),d=lr(t.element);a?vn(c.element,"min-width",d+"px"):Jn(c.element,d)},p$=(t,s)=>t.getSystem().getByUid(s.uid+"-"+f$()).map(a=>()=>xn.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>xn.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),b$=t=>{Hn.getState(t).each(s=>{tp.repositionMenus(s)})},RD=(t,s,a)=>{const c=Qf(),d=(E,T)=>{const D=h$(t,s);c.link(s.element),t.matchWidth&&Bz(D.hotspot,T,t.useMinWidth),t.onOpen(D,E,T),a!==void 0&&a.onOpen!==void 0&&a.onOpen(E,T)},h=(E,T)=>{c.unlink(s.element),a!==void 0&&a.onClose!==void 0&&a.onClose(E,T)},v=p$(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:c.id,role:"listbox"}},behaviours:Gc.augment(t.sandboxBehaviours,[St.config({store:{mode:"memory",initialValue:s}}),Hn.config({onOpen:d,onClose:h,isPartOf:(E,T,D)=>Ud(T,D)||Ud(s,D),getAttachPoint:()=>v().getOrDie()}),Bn.config({find:E=>Hn.getState(E).bind(T=>Bn.getCurrent(T))}),Si.config({channels:{...q1({isExtraPart:An}),...zh({doReposition:b$})}})])}},v$=t=>{const s=js.getCoupled(t,"sandbox");b$(s)},MD=()=>[_e("sandboxClasses",[]),Gc.field("sandboxBehaviours",[Bn,Si,Hn,St])],$z=ae([Ke("dom"),Ke("fetch"),Wn("onOpen"),tc("onExecute"),_e("getHotspot",R.some),_e("getAnchorOverrides",ae({})),Zm(),hr("dropdownBehaviours",[kn,js,Kt,ln]),Ke("toggleClass"),_e("eventOrder",{}),po("lazySink"),_e("matchWidth",!1),_e("useMinWidth",!1),po("role")].concat(MD())),Iz=ae([El({schema:[E1(),_e("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),g$()]),Fz=(t,s,a,c)=>{const d=B=>Ct(t.dom,"attributes").bind(L=>Ct(L,B)),h=B=>{Hn.getState(B).each(L=>{tp.highlightPrimary(L)})},v=(B,L,U)=>DD(t,ut,B,c,L,U),E=B=>{v(B,h,Oi.HighlightMenuAndItem).get(Q)},T={expand:B=>{kn.isOn(B)||v(B,Q,Oi.HighlightNone).get(Q)},open:B=>{kn.isOn(B)||v(B,Q,Oi.HighlightMenuAndItem).get(Q)},refetch:B=>js.getExistingCoupled(B,"sandbox").fold(()=>v(B,Q,Oi.HighlightMenuAndItem).map(Q),U=>RT(t,ut,B,U,c,Q,Oi.HighlightMenuAndItem).map(Q)),isOpen:kn.isOn,close:B=>{kn.isOn(B)&&v(B,Q,Oi.HighlightMenuAndItem).get(Q)},repositionMenus:B=>{kn.isOn(B)&&v$(B)}},D=(B,L)=>(Id(B),R.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:Qs(t.dropdownBehaviours,[kn.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),js.config({others:{sandbox:B=>RD(t,B,{onOpen:()=>kn.on(B),onClose:()=>kn.off(B)})}}),Kt.config({mode:"special",onSpace:D,onEnter:D,onDown:(B,L)=>{if(bu.isOpen(B)){const U=js.getCoupled(B,"sandbox");h(U)}else bu.open(B);return R.some(!0)},onEscape:(B,L)=>bu.isOpen(B)?(bu.close(B),R.some(!0)):R.none()}),ln.config({})]),events:sm(R.some(E)),eventOrder:{...t.eventOrder,[Ki()]:["disabling","toggling","alloy.base.behaviour"]},apis:T,domModification:{attributes:{"aria-haspopup":"true",...t.role.fold(()=>({}),B=>({role:B})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},bu=Oa({name:"Dropdown",configFields:$z(),partFields:Iz(),factory:Fz,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),Lz=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},Hz=t=>{const s=St.getValue(t),a=U0(t).map(I4);bu.refetch(s).get(()=>{const c=js.getCoupled(s,"sandbox");a.each(d=>U0(c).each(h=>fH(h,d)))})},zz=(t,s)=>{Vz(t).each(a=>{Yk(t,a.element,s.event.eventType,s.event.interactionEvent)})},Vz=t=>Hn.getState(t).bind(ao.getHighlighted).bind(ao.getHighlighted),Uz=t=>gr(t.element,nT)?R.some(t.element):Ws(t.element,"."+nT),PD=(t,s,a)=>{tT(t).each(c=>{JN(c,a),Uz(s).each(h=>{zr(h,"id").each(v=>Et(c.element,"aria-controls",v))})}),Et(a.element,"aria-selected","true")},Wz=(t,s,a)=>{Et(a.element,"aria-selected","false")},Zz=t=>{tT(t).each(s=>ln.focus(s))},jz=t=>js.getExistingCoupled(t,"sandbox").bind(U0).map(I4).map(a=>a.fetchPattern).getOr("");var xS;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(xS||(xS={}));const Gz=(t,s,a,c,d)=>{const h=a.shared.providers,v=E=>d?{...E,shortcut:R.none(),icon:E.text.isSome()?R.none():E.icon}:E;switch(t.type){case"menuitem":return BH(t).fold(yg,E=>R.some(xz(v(E),s,h,c)));case"nestedmenuitem":return SB(t).fold(yg,E=>R.some(Ez(v(E),s,h,c,d)));case"togglemenuitem":return FH(t).fold(yg,E=>R.some(Tz(v(E),s,h,c)));case"separator":return lB(t).fold(yg,E=>R.some(d$(E)));case"fancymenuitem":return PH(t).fold(yg,E=>_z(E,a));default:return console.error("Unknown item in general menu",t),R.none()}},qz=(t,s,a,c,d,h,v)=>{const E=c===1,T=!E||sT(t);return Ii(Xe(t,D=>{switch(D.type){case"separator":return dB(D).fold(yg,B=>R.some(d$(B)));case"cardmenuitem":return AH(D).fold(yg,B=>R.some(kz({...B,onAction:L=>{B.onAction(L),a(B.value,B.meta)}},d,h,{itemBehaviours:DB(B.meta,h),cardText:{matchText:s,highlightOn:v}})));case"autocompleteitem":default:return vH(D).fold(yg,B=>R.some(Sz(B,s,E,"normal",a,d,h,T)))}}))},y$=(t,s,a,c,d,h)=>{const v=sT(s),E=Ii(Xe(s,B=>{const L=j=>d?!oo(j,"text"):v,U=j=>Gz(j,a,c,L(j),d);return B.type==="nestedmenuitem"&&B.getSubmenuItems().length<=0?U({...B,enabled:!1}):U(B)})),T=Lz(h);return(d?oB:H4)(t,v,E,1,T)},MT=t=>tp.singleData(t.value,t),Kz=(t,s,a,c)=>{const d=OT(s,c),h=rf(c);return{data:MT({...t,movement:d,menuBehaviours:gS.unnamedEvents(s!=="auto"?[]:[Bo((v,E)=>{fS(v,4,h.item).each(({numColumns:T,numRows:D})=>{Kt.setGridSize(v,D,T)})})])}),menu:{markers:rf(c),fakeFocus:a===xS.ContentFocus}}},Yz=(t,s)=>LN(Ce.fromDom(s.startContainer)).map(a=>{const c=t.createRng();return c.selectNode(a.dom),c}),Xz={register:(t,s)=>{const a=Rt("autocompleter"),c=en(!1),d=en(!1),h=Ea(_s.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:lt([En("dismissAutocompleter",[We($m(),()=>B()),We(h1(),(ke,pe)=>{zr(pe.event.target,"id").each(ge=>Et(Ce.fromDom(t.getBody()),"aria-activedescendant",ge))})])]),lazySink:s.getSink})),v=()=>_s.isOpen(h),E=d.get,T=()=>{if(v()){_s.hide(h),t.dom.remove(a,!1);const ke=Ce.fromDom(t.getBody());zr(ke,"aria-owns").filter(pe=>pe===a).each(()=>{Ss(ke,"aria-owns"),Ss(ke,"aria-activedescendant")})}},D=()=>_s.getContent(h).bind(ke=>As(ke.components(),0)),B=()=>t.execCommand("mceAutocompleterClose"),L=ke=>{const pe=tr(ke,ge=>R.from(ge.columns)).getOr(1);return $e(ke,ge=>{const Oe=ge.items;return qz(Oe,ge.matchText,(Je,Ve)=>{const Ie=t.selection.getRng();Yz(t.dom,Ie).each(ct=>{const gt={hide:()=>B(),reload:Tn=>{T(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:Tn})}};c.set(!0),ge.onAction(gt,ct,Je,Ve),c.set(!1)})},pe,am.BUBBLE_TO_SANDBOX,s,ge.highlightOn)})},U=(ke,pe)=>{sH(Ce.fromDom(t.getBody())).each(ge=>{const Oe=tr(ke,Je=>R.from(Je.columns)).getOr(1);_s.showMenuAt(h,{anchor:{type:"node",root:Ce.fromDom(t.getBody()),node:R.from(ge)}},Kz(H4("autocompleter-value",!0,pe,Oe,{menuType:"normal"}),Oe,xS.ContentFocus,"normal"))}),D().each(ao.highlightFirst)},j=ke=>{const pe=L(ke);pe.length>0?(U(ke,pe),Et(Ce.fromDom(t.getBody()),"aria-owns",a),t.inline||X()):T()},X=()=>{t.dom.get(a)&&t.dom.remove(a,!1);const ke=t.getDoc().documentElement,pe=t.selection.getNode(),ge=eO(h.element);ti(ge,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${pe.offsetTop}px`,left:`${pe.offsetLeft}px`}),t.dom.add(ke,ge.dom),Ws(ge,'[role="menu"]').each(Oe=>{to(Oe,"position"),to(Oe,"max-height")})};t.on("AutocompleterStart",({lookupData:ke})=>{d.set(!0),c.set(!1),j(ke)}),t.on("AutocompleterUpdate",({lookupData:ke})=>j(ke)),t.on("AutocompleterEnd",()=>{T(),d.set(!1),c.set(!1)});const ce={cancelIfNecessary:B,isMenuOpen:v,isActive:E,isProcessingAction:c.get,getMenu:D};A4.setup(ce,t)}},w$=["visible","hidden","clip"],C$=t=>il(t).length>0&&!go(w$,t),ND=t=>{if(Ou(t)){const s=Ps(t,"overflow-x"),a=Ps(t,"overflow-y");return C$(s)||C$(a)}else return!1},Jz=t=>{const s=Fx(t,ND),a=s.length===0?Do(t).map(ts).map(c=>Fx(c,ND)).getOr([]):s;return ea(a).map(c=>({element:c,others:a.slice(1)}))},mp=(t,s)=>vg(t)?Jz(s):R.none(),q0=t=>{const s=[...Xe(t.others,xs),Wr()];return Jy(xs(t.element),s)},ES=(t,s,a)=>ou(t,s,a).isSome(),S$=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...h)=>{a=setTimeout(()=>{t.apply(null,h),a=null},s)}}},x$=5,Qz=400,E$=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?R.none():R.some(s.touches[0])},eV=(t,s)=>{const a=Math.abs(t.clientX-s.x),c=Math.abs(t.clientY-s.y);return a>x$||c>x$},tV=t=>{const s=Rn(),a=en(!1),c=S$(D=>{t.triggerEvent(lw(),D),a.set(!0)},Qz),d=D=>(E$(D).each(B=>{c.cancel();const L={x:B.clientX,y:B.clientY,target:D.target};c.schedule(D),a.set(!1),s.set(L)}),R.none()),h=D=>(c.cancel(),E$(D).each(B=>{s.on(L=>{eV(B,L)&&s.clear()})}),R.none()),v=D=>{c.cancel();const B=L=>So(L.target,D.target);return s.get().filter(B).map(L=>a.get()?(D.prevent(),!1):t.triggerEvent(eu(),D))},E=la([{key:Vu(),value:d},{key:Xg(),value:h},{key:Vf(),value:v}]);return{fireIfReady:(D,B)=>Ct(E,B).bind(L=>L(D))}},nV=t=>t.raw.which===PA[0]&&!go(["input","textarea"],Qa(t.target))&&!ES(t.target,'[contenteditable="true"]'),oV=(t,s)=>{const a={stopBackspace:!0,...s},c=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=tV(a),h=Xe(c.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),j=>Va(t,j,X=>{d.fireIfReady(X,j).each(ke=>{ke&&X.kill()}),a.triggerEvent(j,X)&&X.kill()})),v=Rn(),E=Va(t,"paste",j=>{d.fireIfReady(j,"paste").each(ce=>{ce&&j.kill()}),a.triggerEvent("paste",j)&&j.kill(),v.set(setTimeout(()=>{a.triggerEvent(Zf(),j)},0))}),T=Va(t,"keydown",j=>{a.triggerEvent("keydown",j)?j.kill():a.stopBackspace&&nV(j)&&j.prevent()}),D=Va(t,"focusin",j=>{a.triggerEvent("focusin",j)&&j.kill()}),B=Rn(),L=Va(t,"focusout",j=>{a.triggerEvent("focusout",j)&&j.kill(),B.set(setTimeout(()=>{a.triggerEvent(Pm(),j)},0))});return{unbind:()=>{yt(h,j=>{j.unbind()}),T.unbind(),D.unbind(),L.unbind(),E.unbind(),v.on(clearTimeout),B.on(clearTimeout)}}},T$=(t,s)=>{const a=Ct(t,"target").getOr(s);return en(a)},sV=(t,s)=>{const a=en(!1),c=en(!1);return{stop:()=>{a.set(!0)},cut:()=>{c.set(!0)},isStopped:a.get,isCut:c.get,event:t,setSource:s.set,getSource:s.get}},_$=t=>{const s=en(!1);return{stop:()=>{s.set(!0)},cut:Q,isStopped:s.get,isCut:An,event:t,setSource:ue("Cannot set source of a broadcasted event"),getSource:ue("Cannot get source of a broadcasted event")}},TS=Gi.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),k$=(t,s,a,c,d,h)=>{const v=t(s,c),E=sV(a,d);return v.fold(()=>(h.logEventNoHandlers(s,c),TS.complete()),T=>{const D=T.descHandler;return ch(D)(E),E.isStopped()?(h.logEventStopped(s,T.element,D.purpose),TS.stopped()):E.isCut()?(h.logEventCut(s,T.element,D.purpose),TS.complete()):ra(T.element).fold(()=>(h.logNoParent(s,T.element,D.purpose),TS.complete()),L=>(h.logEventResponse(s,T.element,D.purpose),TS.resume(L)))})},O$=(t,s,a,c,d,h)=>k$(t,s,a,c,d,h).fold(Dt,v=>O$(t,s,a,v,d,h),An),rV=(t,s,a,c,d)=>{const h=T$(a,c);return k$(t,s,a,c,h,d)},aV=(t,s,a)=>{const c=_$(s);return yt(t,d=>{const h=d.descHandler;ch(h)(c)}),c.isStopped()},BD=(t,s,a,c)=>A$(t,s,a,a.target,c),A$=(t,s,a,c,d)=>{const h=T$(a,c);return O$(t,s,a,c,h,d)},iV=(t,s)=>({element:t,descHandler:s}),cV=(t,s)=>({id:t,descHandler:s}),D$=()=>{const t={},s=(v,E,T)=>{Jo(T,(D,B)=>{const L=t[B]!==void 0?t[B]:{};L[E]=Sw(D,v),t[B]=L})},a=(v,E)=>y1(E).bind(T=>Ct(v,T)).map(T=>iV(E,T));return{registerId:s,unregisterId:v=>{Jo(t,(E,T)=>{oo(E,v)&&delete E[v]})},filterByType:v=>Ct(t,v).map(E=>Sd(E,(T,D)=>cV(D,T))).getOr([]),find:(v,E,T)=>Ct(t,E).bind(D=>zf(T,B=>a(D,B),v))}},R$=()=>{const t=D$(),s={},a=D=>{const B=D.element;return y1(B).getOrThunk(()=>Kf("uid-",D.element))},c=(D,B)=>{const L=s[B];if(L===D)h(D);else throw new Error('The tagId "'+B+'" is already used by: '+ju(L.element)+`
Cannot use it for: `+ju(D.element)+`
The conflicting element is`+(Xn(L.element)?" ":" not ")+"already in the DOM")},d=D=>{const B=a(D);ta(s,B)&&c(D,B);const L=[D];t.registerId(L,B,D.events),s[B]=D},h=D=>{y1(D.element).each(B=>{delete s[B],t.unregisterId(B)})};return{find:(D,B,L)=>t.find(D,B,L),filter:D=>t.filterByType(D),register:d,unregister:h,getById:D=>Ct(s,D)}},cm=nc({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:Xd(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[_e("components",[]),hr("containerBehaviours",[]),_e("events",{}),_e("domModification",{}),_e("eventOrder",{})]}),PT=t=>{const s=pe=>ra(t.element).fold(Dt,ge=>So(pe,ge)),a=R$(),c=(pe,ge)=>a.find(s,pe,ge),d=oV(t.element,{triggerEvent:(pe,ge)=>Vv(pe,ge.target,Oe=>BD(c,pe,ge,Oe))}),h={debugInfo:ae("real"),triggerEvent:(pe,ge,Oe)=>{Vv(pe,ge,Je=>A$(c,pe,Oe,ge,Je))},triggerFocus:(pe,ge)=>{y1(pe).fold(()=>{xi(pe)},Oe=>{Vv(Ql(),pe,Je=>(rV(c,Ql(),{originator:ge,kill:Q,prevent:Q,target:pe},pe,Je),!1))})},triggerEscape:(pe,ge)=>{h.triggerEvent("keydown",pe.element,ge.event)},getByUid:pe=>ce(pe),getByDom:pe=>ke(pe),build:Ea,buildOrPatch:Lv,addToGui:pe=>{T(pe)},removeFromGui:pe=>{D(pe)},addToWorld:pe=>{v(pe)},removeFromWorld:pe=>{E(pe)},broadcast:pe=>{U(pe)},broadcastOn:(pe,ge)=>{j(pe,ge)},broadcastEvent:(pe,ge)=>{X(pe,ge)},isConnected:Dt},v=pe=>{pe.connect(h),sa(pe.element)||(a.register(pe),yt(pe.components(),v),h.triggerEvent(Nm(),pe.element,{target:pe.element}))},E=pe=>{sa(pe.element)||(yt(pe.components(),E),a.unregister(pe)),pe.disconnect()},T=pe=>{Jm(t,pe)},D=pe=>{td(pe)},B=()=>{d.unbind(),Vc(t.element)},L=pe=>{const ge=a.filter(jf());yt(ge,Oe=>{const Je=Oe.descHandler;ch(Je)(pe)})},U=pe=>{L({universal:!0,data:pe})},j=(pe,ge)=>{L({universal:!1,channels:pe,data:ge})},X=(pe,ge)=>{const Oe=a.filter(pe);return aV(Oe,ge)},ce=pe=>a.getById(pe).fold(()=>xn.error(new Error('Could not find component with uid: "'+pe+'" in system.')),xn.value),ke=pe=>{const ge=y1(pe).getOr("not found");return ce(ge)};return v(t),{root:t,element:t.element,destroy:B,add:T,remove:D,getByUid:ce,getByDom:ke,addToWorld:v,removeFromWorld:E,broadcast:U,broadcastOn:j,broadcastEvent:X}},lV=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Xe(t.items,s.interpreter)}),uV=ae([_e("prefix","form-field"),hr("fieldBehaviours",[Bn,St])]),dV=ae([Ti({schema:[Ke("dom")],name:"label"}),Ti({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Ke("text")],name:"aria-descriptor"}),ka({factory:{sketch:t=>{const s=d1(t,["factory"]);return t.factory.sketch(s)}},schema:[Ke("factory")],name:"field"})]),mV=(t,s,a,c)=>{const d=Qs(t.fieldBehaviours,[Bn.config({find:E=>$o(E,t,"field")}),St.config({store:{mode:"manual",getValue:E=>Bn.getCurrent(E).bind(St.getValue),setValue:(E,T)=>{Bn.getCurrent(E).each(D=>{St.setValue(D,T)})}}})]),h=zo([Bo((E,T)=>{const D=cE(E,t,["label","field","aria-descriptor"]);D.field().each(B=>{const L=Rt(t.prefix);D.label().each(U=>{Et(U.element,"for",L),Et(B.element,"id",L)}),D["aria-descriptor"]().each(U=>{const j=Rt(t.prefix);Et(U.element,"id",j),Et(B.element,"aria-describedby",j)})})})]),v={getField:E=>$o(E,t,"field"),getLabel:E=>$o(E,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:h,apis:v}},Co=Oa({name:"FormField",configFields:uV(),partFields:dV(),factory:mV,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var NT=Object.freeze({__proto__:null,exhibit:(t,s)=>Xi({attributes:la([{key:s.tabAttr,value:"true"}])})}),fV=[_e("tabAttr","data-alloy-tabstop")];const cs=Tr({fields:fV,name:"tabstopping",active:NT});var gV=tinymce.util.Tools.resolve("tinymce.html.Entities");const _S=(t,s,a,c)=>{const d=pV(t,s,a,c);return Co.sketch(d)},hV=(t,s)=>_S(t,s,[],[]),pV=(t,s,a,c)=>({dom:kS(a),components:t.toArray().concat([s]),fieldBehaviours:lt(c)}),lY=()=>kS([]),kS=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),vu=(t,s)=>Co.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Fs(s.translate(t))]}),Ec=Rt("form-component-change"),K0=Rt("form-close"),fp=Rt("form-cancel"),df=Rt("form-action"),OS=Rt("form-submit"),$D=Rt("form-block"),ID=Rt("form-unblock"),M$=Rt("form-tabchange"),P$=Rt("form-resize"),bV=(t,s,a)=>{const c=t.label.map(j=>vu(j,s)),d=s.icons(),h=j=>{var X;return(X=d[j])!==null&&X!==void 0?X:j},v=j=>(X,ce)=>{ou(ce.event.target,"[data-collection-item-value]").each(ke=>{j(X,ce,ke,Ms(ke,"data-collection-item-value"))})},E=(j,X)=>{const ce=Xe(X,ge=>{const Oe=Cc.translate(ge.text),Je=t.columns===1?`<div class="tox-collection__item-label">${Oe}</div>`:"",Ve=`<div class="tox-collection__item-icon">${h(ge.icon)}</div>`,Ie={_:" "," - ":" ","-":" "},ct=Oe.replace(/\_| \- |\-/g,Tn=>Ie[Tn]);return`<div class="tox-collection__item${s.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${gV.encodeAllRaw(ge.value)}" title="${ct}" aria-label="${ct}">${Ve}${Je}</div>`}),ke=t.columns!=="auto"&&t.columns>1?ar(ce,t.columns):[ce],pe=Xe(ke,ge=>`<div class="tox-collection__group">${ge.join("")}</div>`);Gf(j.element,pe.join(""))},T=v((j,X,ce,ke)=>{X.stop(),s.isDisabled()||qt(j,df,{name:t.name,value:ke})}),D=[We(Bd(),v((j,X,ce)=>{xi(ce)})),We($d(),T),We(eu(),T),We(qi(),v((j,X,ce)=>{Ws(j.element,"."+rp).each(ke=>{bs(ke,rp)}),Us(ce,rp)})),We(vv(),v(j=>{Ws(j.element,"."+rp).each(X=>{bs(X,rp)})})),vl(v((j,X,ce,ke)=>{qt(j,df,{name:t.name,value:ke})}))],B=(j,X)=>Xe(_r(j.element,".tox-collection__item"),X),L=Co.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:ut},behaviours:lt([sn.config({disabled:s.isDisabled,onDisabled:j=>{B(j,X=>{Us(X,"tox-collection__item--state-disabled"),Et(X,"aria-disabled",!0)})},onEnabled:j=>{B(j,X=>{bs(X,"tox-collection__item--state-disabled"),Ss(X,"aria-disabled")})}}),Br(),yn.config({}),St.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(j,X)=>{E(j,X),t.columns==="auto"&&fS(j,5,"tox-collection__item").each(({numRows:ce,numColumns:ke})=>{Kt.setGridSize(j,ce,ke)}),Ln(j,P$)}}),cs.config({}),Kt.config(hz(t.columns,"normal")),En("collection-events",D)]),eventOrder:{[Ki()]:["disabling","alloy.base.behaviour","collection-events"]}});return _S(c,L,["tox-form__group--collection"],[])},vV=["input","textarea"],N$=t=>{const s=Qa(t);return go(vV,s)},B$=(t,s)=>{const a=s.getRoot(t).getOr(t.element);bs(a,s.invalidClass),s.notify.each(c=>{N$(t.element)&&Et(t.element,"aria-invalid",!1),c.getContainer(t).each(d=>{Gf(d,c.validHtml)}),c.onValid(t)})},FD=(t,s,a,c)=>{const d=s.getRoot(t).getOr(t.element);Us(d,s.invalidClass),s.notify.each(h=>{N$(t.element)&&Et(t.element,"aria-invalid",!0),h.getContainer(t).each(v=>{Gf(v,c)}),h.onInvalid(t,c)})},_b=(t,s,a)=>s.validator.fold(()=>Za.pure(xn.value(!0)),c=>c.validate(t)),Eg=(t,s,a)=>(s.notify.each(c=>{c.onValidate(t)}),_b(t,s).map(c=>t.getSystem().isConnected()?c.fold(d=>(FD(t,s,a,d),xn.error(d)),d=>(B$(t,s),xn.value(d))):xn.error("No longer in system")));var $$=Object.freeze({__proto__:null,markValid:B$,markInvalid:FD,query:_b,run:Eg,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return gr(a,s.invalidClass)}}),BT=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>zo([We(a.onEvent,c=>{Eg(c,t,s).get(ut)})].concat(a.validateOnLoad?[Bo(c=>{Eg(c,t,s).get(Q)})]:[]))).getOr({})}),wV=[Ke("invalidClass"),_e("getRoot",R.none),vi("notify",[_e("aria","alert"),_e("getContainer",R.none),_e("validHtml",""),Wn("onValid"),Wn("onInvalid"),Wn("onValidate")]),vi("validator",[Ke("validate"),_e("onEvent","input"),_e("validateOnLoad",!0)])];const Al=Tr({fields:wV,name:"invalidating",active:BT,apis:$$,extra:{validation:t=>s=>{const a=St.getValue(s);return Za.pure(t(a))}}});var CV=Object.freeze({__proto__:null,events:()=>zo([dw(V2(),Dt)]),exhibit:()=>Xi({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const AS=Tr({fields:[],name:"unselecting",active:CV}),SV=(t,s)=>bu.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:lt([Ol.button(s.providers.isDisabled),Br(),AS.config({}),cs.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>Za.nu(c=>t.fetch(c)).map(c=>R.from(MT(ko(xD(Rt("menu-value"),c,d=>{t.onItemAction(a,d)},t.columns,t.presets,am.CLOSE_ON_EXECUTE,An,s.providers),{movement:OT(t.columns,t.presets)})))),parts:{menu:V0(!1,1,t.presets)}}),I$=Rt("color-input-change"),F$=Rt("color-swatch-change"),DS=Rt("color-picker-cancel"),xV=(t,s,a,c)=>{const d=Co.parts.field({factory:yb,inputClasses:["tox-textfield"],data:c,onSetValue:D=>Al.run(D).get(Q),inputBehaviours:lt([sn.config({disabled:s.providers.isDisabled}),Br(),cs.config({}),Al.config({invalidClass:"tox-textbox-field-invalid",getRoot:D=>Hi(D.element),notify:{onValid:D=>{const B=St.getValue(D);qt(D,I$,{color:B})}},validator:{validateOnLoad:!1,validate:D=>{const B=St.getValue(D);if(B.length===0)return Za.pure(xn.value(!0));{const L=Ce.fromTag("span");vn(L,"background-color",B);const U=Xs(L,"background-color").fold(()=>xn.error("blah"),j=>xn.value(B));return Za.pure(U)}}}})]),selectOnFocus:!1}),h=t.label.map(D=>vu(D,s.providers)),v=(D,B)=>{qt(D,F$,{value:B})},E=(D,B)=>{T.getOpt(D).each(L=>{B==="custom"?a.colorPicker(U=>{U.fold(()=>Ln(L,DS),j=>{v(L,j),gD(t.storageKey,j)})},"#ffffff"):B==="remove"?v(L,""):v(L,B)})},T=wo(SV({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[ma,xr,Er],onLtr:()=>[xr,ma,Er]},components:[],fetch:o$(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:E},s));return Co.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:h.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,T.asSpec()]}]),fieldBehaviours:lt([En("form-field-events",[We(I$,(D,B)=>{T.getOpt(D).each(L=>{vn(L.element,"background-color",B.event.color)}),qt(D,Ec,{name:t.name})}),We(F$,(D,B)=>{Co.getField(D).each(L=>{St.setValue(L,B.event.value),Bn.getCurrent(D).each(ln.focus)})}),We(DS,(D,B)=>{Co.getField(D).each(L=>{Bn.getCurrent(D).each(ln.focus)})})])])})},LD=Ti({schema:[Ke("dom")],name:"label"}),gp=t=>Ti({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),c=>({events:zo([Tv(Vu(),(d,h,v)=>c(d,v),[s]),Tv(fr(),(d,h,v)=>c(d,v),[s]),Tv(Jg(),(d,h,v)=>{v.mouseIsDown.get()&&c(d,v)},[s])])}))}),EV=gp("top-left"),TV=gp("top"),L$=gp("top-right"),_V=gp("right"),kV=gp("bottom-right"),OV=gp("bottom"),H$=gp("bottom-left"),AV=gp("left"),DV=ka({name:"thumb",defaults:ae({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:zo([nh(Vu(),t,"spectrum"),nh(Xg(),t,"spectrum"),nh(Vf(),t,"spectrum"),nh(fr(),t,"spectrum"),nh(Jg(),t,"spectrum"),nh(iw(),t,"spectrum")])})}),IT=t=>om(t.event),RV=ka({schema:[zs("mouseIsDown",()=>en(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,c=(d,h)=>a.getValueFromEvent(h).map(v=>a.setValueFrom(d,t,v));return{behaviours:lt([Kt.config({mode:"special",onLeft:(d,h)=>a.onLeft(d,t,IT(h)),onRight:(d,h)=>a.onRight(d,t,IT(h)),onUp:(d,h)=>a.onUp(d,t,IT(h)),onDown:(d,h)=>a.onDown(d,t,IT(h))}),cs.config({}),ln.config({})]),events:zo([We(Vu(),c),We(Xg(),c),We(fr(),c),We(Jg(),(d,h)=>{t.mouseIsDown.get()&&c(d,h)})])}}});var MV=[LD,AV,_V,TV,OV,EV,L$,H$,kV,DV,RV];const Y0=ae("slider.change.value"),NV=t=>t.type.indexOf("touch")!==-1,HD=t=>{const s=t.event.raw;if(NV(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?R.some(a.touches[0]).map(c=>co(c.clientX,c.clientY)):R.none()}else{const a=s;return a.clientX!==void 0?R.some(a).map(c=>co(c.clientX,c.clientY)):R.none()}},BV="top",$V="right",IV="bottom",z$="left",ld=t=>t.model.minX,kb=t=>t.model.minY,FT=t=>t.model.minX-1,LT=t=>t.model.minY-1,mf=t=>t.model.maxX,li=t=>t.model.maxY,X0=t=>t.model.maxX+1,RS=t=>t.model.maxY+1,V$=(t,s,a)=>s(t)-a(t),zD=t=>V$(t,mf,ld),VD=t=>V$(t,li,kb),U$=t=>zD(t)/2,UD=t=>VD(t)/2,Ob=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,W$=t=>t.snapToGrid,Z$=t=>t.snapStart,WD=t=>t.rounded,HT=(t,s)=>t[s+"-edge"]!==void 0,ZD=t=>HT(t,z$),jD=t=>HT(t,$V),GD=t=>HT(t,BV),j$=t=>HT(t,IV),Tg=t=>t.model.value.get(),hp=(t,s)=>({x:t,y:s}),ud=(t,s)=>{qt(t,Y0(),{value:s})},FV=(t,s)=>{ud(t,hp(FT(s),LT(s)))},LV=(t,s)=>{ud(t,LT(s))},qD=(t,s)=>{ud(t,hp(U$(s),LT(s)))},HV=(t,s)=>{ud(t,hp(X0(s),LT(s)))},G$=(t,s)=>{ud(t,X0(s))},zV=(t,s)=>{ud(t,hp(X0(s),UD(s)))},VV=(t,s)=>{ud(t,hp(X0(s),RS(s)))},UV=(t,s)=>{ud(t,RS(s))},WV=(t,s)=>{ud(t,hp(U$(s),RS(s)))},ZV=(t,s)=>{ud(t,hp(FT(s),RS(s)))},jV=(t,s)=>{ud(t,FT(s))},GV=(t,s)=>{ud(t,hp(FT(s),UD(s)))},zT=(t,s,a,c)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-c),VT=(t,s,a,c)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+c),q$=(t,s,a)=>Math.max(s,Math.min(a,t)),qV=(t,s,a,c,d)=>d.fold(()=>{const h=t-s,v=Math.round(h/c)*c;return q$(s+v,s-1,a+1)},h=>{const v=(t-h)%c,E=Math.round(v/c),T=Math.floor((t-h)/c),D=Math.floor((a-h)/c),B=Math.min(D,T+E),L=h+B*c;return Math.max(h,L)}),KV=(t,s,a)=>Math.min(a,Math.max(t,s))-s,K$=t=>{const{min:s,max:a,range:c,value:d,step:h,snap:v,snapStart:E,rounded:T,hasMinEdge:D,hasMaxEdge:B,minBound:L,maxBound:U,screenRange:j}=t,X=D?s-1:s,ce=B?a+1:a;if(d<L)return X;if(d>U)return ce;{const ke=KV(d,L,U),pe=q$(ke/j*c+s,X,ce);return v&&pe>=s&&pe<=a?qV(pe,s,a,h,E):T?Math.round(pe):pe}},Y$=t=>{const{min:s,max:a,range:c,value:d,hasMinEdge:h,hasMaxEdge:v,maxBound:E,maxOffset:T,centerMinEdge:D,centerMaxEdge:B}=t;return d<s?h?0:D:d>a?v?E:B:(d-s)/c*T},KD="top",YD="right",XD="bottom",UT="left",JD="width",YV="height",lm=t=>t.element.dom.getBoundingClientRect(),dd=(t,s)=>t[s],WT=t=>{const s=lm(t);return dd(s,UT)},X$=t=>{const s=lm(t);return dd(s,YD)},ZT=t=>{const s=lm(t);return dd(s,KD)},jT=t=>{const s=lm(t);return dd(s,XD)},ff=t=>{const s=lm(t);return dd(s,JD)},J$=t=>{const s=lm(t);return dd(s,YV)},J0=(t,s,a)=>(t+s)/2-a,Q$=(t,s)=>{const a=lm(t),c=lm(s),d=dd(a,UT),h=dd(a,YD),v=dd(c,UT);return J0(d,h,v)},GT=(t,s)=>{const a=lm(t),c=lm(s),d=dd(a,KD),h=dd(a,XD),v=dd(c,KD);return J0(d,h,v)},qT=(t,s)=>{qt(t,Y0(),{value:s})},QD=(t,s,a)=>{const c={min:ld(s),max:mf(s),range:zD(s),value:a,step:Ob(s),snap:W$(s),snapStart:Z$(s),rounded:WD(s),hasMinEdge:ZD(s),hasMaxEdge:jD(s),minBound:WT(t),maxBound:X$(t),screenRange:ff(t)};return K$(c)},XV=(t,s,a)=>{const c=QD(t,s,a);return qT(t,c),c},eI=(t,s)=>{const a=ld(s);qT(t,a)},JV=(t,s)=>{const a=mf(s);qT(t,a)},e3=(t,s,a,c)=>{const h=(t>0?VT:zT)(Tg(a),ld(a),mf(a),Ob(a,c));return qT(s,h),R.some(h)},KT=t=>(s,a,c)=>e3(t,s,a,c).map(Dt),t3=t=>HD(t).map(a=>a.left),QV=(t,s,a,c,d)=>{const v=ff(t),E=c.bind(B=>R.some(Q$(B,t))).getOr(0),T=d.bind(B=>R.some(Q$(B,t))).getOr(v),D={min:ld(s),max:mf(s),range:zD(s),value:a,hasMinEdge:ZD(s),hasMaxEdge:jD(s),minBound:WT(t),maxBound:X$(t),maxOffset:v,centerMinEdge:E,centerMaxEdge:T};return Y$(D)},Tc=(t,s,a,c,d,h)=>{const v=QV(s,h,a,c,d);return WT(s)-WT(t)+v},e9=(t,s,a,c)=>{const d=Tg(a),h=Tc(t,c.getSpectrum(t),d,c.getLeftEdge(t),c.getRightEdge(t),a),v=lr(s.element)/2;vn(s.element,"left",h-v+"px")},t9=KT(-1),tI=KT(1),nI=R.none,n9=R.none,o9={"top-left":R.none(),top:R.none(),"top-right":R.none(),right:R.some(G$),"bottom-right":R.none(),bottom:R.none(),"bottom-left":R.none(),left:R.some(jV)};var s9=Object.freeze({__proto__:null,setValueFrom:XV,setToMin:eI,setToMax:JV,findValueOfOffset:QD,getValueFromEvent:t3,findPositionOfValue:Tc,setPositionFromValue:e9,onLeft:t9,onRight:tI,onUp:nI,onDown:n9,edgeActions:o9});const YT=(t,s)=>{qt(t,Y0(),{value:s})},n3=(t,s,a)=>{const c={min:kb(s),max:li(s),range:VD(s),value:a,step:Ob(s),snap:W$(s),snapStart:Z$(s),rounded:WD(s),hasMinEdge:GD(s),hasMaxEdge:j$(s),minBound:ZT(t),maxBound:jT(t),screenRange:J$(t)};return K$(c)},r9=(t,s,a)=>{const c=n3(t,s,a);return YT(t,c),c},a9=(t,s)=>{const a=kb(s);YT(t,a)},oI=(t,s)=>{const a=li(s);YT(t,a)},i9=(t,s,a,c)=>{const h=(t>0?VT:zT)(Tg(a),kb(a),li(a),Ob(a,c));return YT(s,h),R.some(h)},sI=t=>(s,a,c)=>i9(t,s,a,c).map(Dt),c9=t=>HD(t).map(a=>a.top),rI=(t,s,a,c,d)=>{const v=J$(t),E=c.bind(B=>R.some(GT(B,t))).getOr(0),T=d.bind(B=>R.some(GT(B,t))).getOr(v),D={min:kb(s),max:li(s),range:VD(s),value:a,hasMinEdge:GD(s),hasMaxEdge:j$(s),minBound:ZT(t),maxBound:jT(t),maxOffset:v,centerMinEdge:E,centerMaxEdge:T};return Y$(D)},MS=(t,s,a,c,d,h)=>{const v=rI(s,h,a,c,d);return ZT(s)-ZT(t)+v},l9=(t,s,a,c)=>{const d=Tg(a),h=MS(t,c.getSpectrum(t),d,c.getTopEdge(t),c.getBottomEdge(t),a),v=fs(s.element)/2;vn(s.element,"top",h-v+"px")},o3=R.none,Q0=R.none,aI=sI(-1),iI=sI(1),cI={"top-left":R.none(),top:R.some(LV),"top-right":R.none(),right:R.none(),"bottom-right":R.none(),bottom:R.some(UV),"bottom-left":R.none(),left:R.none()};var u9=Object.freeze({__proto__:null,setValueFrom:r9,setToMin:a9,setToMax:oI,findValueOfOffset:n3,getValueFromEvent:c9,findPositionOfValue:MS,setPositionFromValue:l9,onLeft:o3,onRight:Q0,onUp:aI,onDown:iI,edgeActions:cI});const XT=(t,s)=>{qt(t,Y0(),{value:s})},Ab=(t,s)=>({x:t,y:s}),d9=(t,s,a)=>{const c=QD(t,s,a.left),d=n3(t,s,a.top),h=Ab(c,d);return XT(t,h),h},m9=(t,s,a,c,d)=>{const h=t>0?VT:zT,v=s?Tg(c).x:h(Tg(c).x,ld(c),mf(c),Ob(c,d)),E=s?h(Tg(c).y,kb(c),li(c),Ob(c,d)):Tg(c).y;return XT(a,Ab(v,E)),R.some(v)},PS=(t,s)=>(a,c,d)=>m9(t,s,a,c,d).map(Dt),lI=(t,s)=>{const a=ld(s),c=kb(s);XT(t,Ab(a,c))},s3=(t,s)=>{const a=mf(s),c=li(s);XT(t,Ab(a,c))},uI=t=>HD(t),sc=(t,s,a,c)=>{const d=Tg(a),h=Tc(t,c.getSpectrum(t),d.x,c.getLeftEdge(t),c.getRightEdge(t),a),v=MS(t,c.getSpectrum(t),d.y,c.getTopEdge(t),c.getBottomEdge(t),a),E=lr(s.element)/2,T=fs(s.element)/2;vn(s.element,"left",h-E+"px"),vn(s.element,"top",v-T+"px")},dI=PS(-1,!1),f9=PS(1,!1),g9=PS(-1,!0),mI=PS(1,!0),h9={"top-left":R.some(FV),top:R.some(qD),"top-right":R.some(HV),right:R.some(zV),"bottom-right":R.some(VV),bottom:R.some(WV),"bottom-left":R.some(ZV),left:R.some(GV)};var p9=Object.freeze({__proto__:null,setValueFrom:d9,setToMin:lI,setToMax:s3,getValueFromEvent:uI,setPositionFromValue:sc,onLeft:dI,onRight:f9,onUp:g9,onDown:mI,edgeActions:h9});const b9=[_e("stepSize",1),_e("speedMultiplier",10),_e("onChange",Q),_e("onChoose",Q),_e("onInit",Q),_e("onDragStart",Q),_e("onDragEnd",Q),_e("snapToGrid",!1),_e("rounded",!0),po("snapStart"),Wi("model",Un("mode",{x:[_e("minX",0),_e("maxX",100),zs("value",t=>en(t.mode.minX)),Ke("getInitialValue"),Oo("manager",s9)],y:[_e("minY",0),_e("maxY",100),zs("value",t=>en(t.mode.minY)),Ke("getInitialValue"),Oo("manager",u9)],xy:[_e("minX",0),_e("maxX",100),_e("minY",0),_e("maxY",100),zs("value",t=>en({x:t.mode.minX,y:t.mode.minY})),Ke("getInitialValue"),Oo("manager",p9)]})),hr("sliderBehaviours",[Kt,St]),zs("mouseIsDown",()=>en(!1))],Da=Oa({name:"Slider",configFields:b9,partFields:MV,factory:(t,s,a,c)=>{const d=Ve=>Qd(Ve,t,"thumb"),h=Ve=>Qd(Ve,t,"spectrum"),v=Ve=>$o(Ve,t,"left-edge"),E=Ve=>$o(Ve,t,"right-edge"),T=Ve=>$o(Ve,t,"top-edge"),D=Ve=>$o(Ve,t,"bottom-edge"),B=t.model,L=B.manager,U=(Ve,Ie)=>{L.setPositionFromValue(Ve,Ie,t,{getLeftEdge:v,getRightEdge:E,getTopEdge:T,getBottomEdge:D,getSpectrum:h})},j=(Ve,Ie)=>{B.value.set(Ie);const ct=d(Ve);U(Ve,ct)},X=(Ve,Ie)=>{j(Ve,Ie);const ct=d(Ve);return t.onChange(Ve,ct,Ie),R.some(!0)},ce=Ve=>{L.setToMin(Ve,t)},ke=Ve=>{L.setToMax(Ve,t)},pe=Ve=>{const Ie=()=>{$o(Ve,t,"thumb").each(gt=>{const Tn=B.value.get();t.onChoose(Ve,gt,Tn)})},ct=t.mouseIsDown.get();t.mouseIsDown.set(!1),ct&&Ie()},ge=(Ve,Ie)=>{Ie.stop(),t.mouseIsDown.set(!0),t.onDragStart(Ve,d(Ve))},Oe=(Ve,Ie)=>{Ie.stop(),t.onDragEnd(Ve,d(Ve)),pe(Ve)},Je=Ve=>{$o(Ve,t,"spectrum").map(Kt.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Qs(t.sliderBehaviours,[Kt.config({mode:"special",focusIn:Je}),St.config({store:{mode:"manual",getValue:Ve=>B.value.get(),setValue:j}}),Si.config({channels:{[SC()]:{onReceive:pe}}})]),events:zo([We(Y0(),(Ve,Ie)=>{X(Ve,Ie.event.value)}),Bo((Ve,Ie)=>{const ct=B.getInitialValue();B.value.set(ct);const gt=d(Ve);U(Ve,gt);const Tn=h(Ve);t.onInit(Ve,gt,Tn,B.value.get())}),We(Vu(),ge),We(Vf(),Oe),We(fr(),(Ve,Ie)=>{Je(Ve),ge(Ve,Ie)}),We(iw(),Oe)]),apis:{resetToMin:ce,resetToMax:ke,setValue:j,refresh:U},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),NS=Rt("rgb-hex-update"),r3=Rt("slider-update"),BS=Rt("palette-update"),a3=(t,s)=>{const a=Da.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),c=Da.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return Da.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:ae(0)},components:[a,c],sliderBehaviours:lt([ln.config({})]),onChange:(d,h,v)=>{Et(d.element,"aria-valuenow",Math.floor(360-v*3.6)),qt(d,r3,{value:v})}})},fI="form",y9=[hr("formBehaviours",[St])],gI=t=>"<alloy.field."+t+">",w9=t=>{const s=(()=>{const h=[];return{field:(E,T)=>(h.push(E),AC(fI,gI(E),T)),record:ae(h)}})(),a=t(s),c=s.record(),d=Xe(c,h=>ka({name:h,pname:gI(h)}));return $C(fI,y9,d,S9,a)},C9=(t,s)=>t.fold(()=>xn.error(s),xn.value),S9=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Qs(t.formBehaviours,[St.config({store:{mode:"manual",getValue:a=>{const c=RC(a,t);return Qo(c,(d,h)=>d().bind(v=>{const E=Bn.getCurrent(v);return C9(E,new Error(`Cannot find a current component to extract the value from for form part '${h}': `+ju(v.element)))}).map(St.getValue))},setValue:(a,c)=>{Jo(c,(d,h)=>{$o(a,t,h).each(v=>{Bn.getCurrent(v).each(E=>{St.setValue(E,d)})})})}}})]),apis:{getField:(a,c)=>$o(a,t,c).bind(Bn.getCurrent)}}),ey={getField:Yf((t,s,a)=>t.getField(s,a)),sketch:w9},i3=Rt("valid-input"),hI=Rt("invalid-input"),um=Rt("validating-input"),ty="colorcustom.rgb.",x9=(t,s,a,c)=>{const d=(U,j)=>Al.config({invalidClass:s("invalid"),notify:{onValidate:X=>{qt(X,um,{type:U})},onValid:X=>{qt(X,i3,{type:U,value:St.getValue(X)})},onInvalid:X=>{qt(X,hI,{type:U,value:St.getValue(X)})}},validator:{validate:X=>{const ce=St.getValue(X),ke=j(ce)?xn.value(!0):xn.error(t("aria.input.invalid"));return Za.pure(ke)},validateOnLoad:!1}}),h=(U,j,X,ce,ke)=>{const pe=t(ty+"range"),ge=Co.parts.label({dom:{tag:"label",attributes:{"aria-label":ce}},components:[Fs(X)]}),Oe=Co.parts.field({data:ke,factory:yb,inputAttributes:{type:"text",...j==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:lt([d(j,U),cs.config({})]),onSetValue:ct=>{Al.isInvalid(ct)&&Al.run(ct).get(Q)}}),Je=[ge,Oe],Ve=j!=="hex"?[Co.parts["aria-descriptor"]({text:pe})]:[],Ie=Je.concat(Ve);return{dom:{tag:"div",attributes:{role:"presentation"}},components:Ie}},v=(U,j)=>{const X=Sg(j);return ey.getField(U,"hex").each(ce=>{ln.isFocused(ce)||St.setValue(U,{hex:X.value})}),X},E=(U,j)=>{const X=j.red,ce=j.green,ke=j.blue;St.setValue(U,{red:X,green:ce,blue:ke})},T=wo({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),D=(U,j)=>{T.getOpt(U).each(X=>{vn(X.element,"background-color","#"+j.value)})};return nc({factory:()=>{const U={red:en(R.some(255)),green:en(R.some(255)),blue:en(R.some(255)),hex:en(R.some("ffffff"))},j=(un,bo)=>{const Xt=yS(bo);E(un,Xt),pe(Xt)},X=un=>U[un].get(),ce=(un,bo)=>{U[un].set(bo)},ke=()=>X("red").bind(un=>X("green").bind(bo=>X("blue").map(Xt=>lp(un,bo,Xt,1)))),pe=un=>{const bo=un.red,Xt=un.green,Kn=un.blue;ce("red",R.some(bo)),ce("green",R.some(Xt)),ce("blue",R.some(Kn))},ge=(un,bo)=>{const Xt=bo.event;Xt.type!=="hex"?ce(Xt.type,R.none()):c(un)},Oe=(un,bo)=>{a(un);const Xt=PB(bo);ce("hex",R.some(Xt.value));const Kn=yS(Xt);E(un,Kn),pe(Kn),qt(un,NS,{hex:Xt}),D(un,Xt)},Je=(un,bo,Xt)=>{const Kn=parseInt(Xt,10);ce(bo,R.some(Kn)),ke().each(ht=>{const Bt=v(un,ht);qt(un,NS,{hex:Bt}),D(un,Bt)})},Ve=un=>un.type==="hex",Ie=(un,bo)=>{const Xt=bo.event;Ve(Xt)?Oe(un,Xt.value):Je(un,Xt.type,Xt.value)},ct=un=>({label:t(ty+un+".label"),description:t(ty+un+".description")}),gt=ct("red"),Tn=ct("green"),$t=ct("blue"),tn=ct("hex");return ko(ey.sketch(un=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[un.field("red",Co.sketch(h(aD,"red",gt.label,gt.description,255))),un.field("green",Co.sketch(h(aD,"green",Tn.label,Tn.description,255))),un.field("blue",Co.sketch(h(aD,"blue",$t.label,$t.description,255))),un.field("hex",Co.sketch(h(rD,"hex",tn.label,tn.description,"ffffff"))),T.asSpec()],formBehaviours:lt([Al.config({invalidClass:s("form-invalid")}),En("rgb-form-events",[We(i3,Ie),We(hI,ge),We(um,ge)])])})),{apis:{updateHex:(un,bo)=>{St.setValue(un,{hex:bo.value}),j(un,bo),D(un,bo)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(U,j,X)=>{U.updateHex(j,X)}},extraApis:{}})},E9=(t,s)=>{const a=Da.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),c=Da.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(D,B)=>{const{width:L,height:U}=D,j=D.getContext("2d");if(j===null)return;j.fillStyle=B,j.fillRect(0,0,L,U);const X=j.createLinearGradient(0,0,L,0);X.addColorStop(0,"rgba(255,255,255,1)"),X.addColorStop(1,"rgba(255,255,255,0)"),j.fillStyle=X,j.fillRect(0,0,L,U);const ce=j.createLinearGradient(0,0,0,U);ce.addColorStop(0,"rgba(0,0,0,0)"),ce.addColorStop(1,"rgba(0,0,0,1)"),j.fillStyle=ce,j.fillRect(0,0,L,U)},h=(D,B)=>{const L=D.components()[0].element.dom,U=CS(B,100,100),j=VB(U);d(L,cD(j))},v=(D,B)=>{const L=xT(yS(B));Da.setValue(D,{x:L.saturation,y:100-L.value}),Et(D.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",L.saturation,L.value]))};return nc({factory:D=>{const B=ae({x:0,y:0}),L=(X,ce,ke)=>{Zt(ke)||Et(X.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(ke.x),Math.floor(100-ke.y)])),qt(X,BS,{value:ke})},U=(X,ce,ke,pe)=>{d(ke.element.dom,cD(pu))},j=lt([Bn.config({find:R.some}),ln.config({})]);return Da.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:B},rounded:!1,components:[a,c],onChange:L,onInit:U,sliderBehaviours:j})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(D,B,L)=>{h(B,L)},setThumb:(D,B,L)=>{v(B,L)}},extraApis:{}})},pI=(t,s)=>{const a=d=>{const h=x9(t,s,d.onValidHex,d.onInvalidHex),v=E9(t,s),E=Ie=>(100-Ie)/100*360,T=Ie=>100-Ie/360*100,D={paletteRgba:en(pu),paletteHue:en(0)},B=wo(a3(t,s)),L=wo(v.sketch({})),U=wo(h.sketch({})),j=(Ie,ct,gt)=>{L.getOpt(Ie).each(Tn=>{v.setHue(Tn,gt)})},X=(Ie,ct)=>{U.getOpt(Ie).each(gt=>{h.updateHex(gt,ct)})},ce=(Ie,ct,gt)=>{B.getOpt(Ie).each(Tn=>{Da.setValue(Tn,T(gt))})},ke=(Ie,ct)=>{L.getOpt(Ie).each(gt=>{v.setThumb(gt,ct)})},pe=(Ie,ct)=>{const gt=yS(Ie);D.paletteRgba.set(gt),D.paletteHue.set(ct)},ge=(Ie,ct,gt,Tn)=>{pe(ct,gt),yt(Tn,$t=>{$t(Ie,ct,gt)})},Oe=()=>{const Ie=[X];return(ct,gt)=>{const Tn=gt.event.value,$t=D.paletteHue.get(),tn=CS($t,Tn.x,100-Tn.y),un=YB(tn);ge(ct,un,$t,Ie)}},Je=()=>{const Ie=[j,X];return(ct,gt)=>{const Tn=E(gt.event.value),$t=D.paletteRgba.get(),tn=xT($t),un=CS(Tn,tn.saturation,tn.value),bo=YB(un);ge(ct,bo,Tn,Ie)}},Ve=()=>{const Ie=[j,ce,ke];return(ct,gt)=>{const Tn=gt.event.hex,$t=sz(Tn);ge(ct,Tn,$t.hue,Ie)}};return{uid:d.uid,dom:d.dom,components:[L.asSpec(),B.asSpec(),U.asSpec()],behaviours:lt([En("colour-picker-events",[We(NS,Ve()),We(BS,Oe()),We(r3,Je())]),Bn.config({find:Ie=>U.getOpt(Ie)}),Kt.config({mode:"acyclic"})])}};return nc({name:"ColourPicker",configFields:[Ke("dom"),_e("onValidHex",Q),_e("onInvalidHex",Q)],factory:a})},_c={self:()=>Bn.config({find:R.some}),memento:t=>Bn.config({find:t.getOpt}),childAt:t=>Bn.config({find:s=>Vl(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},$S=Ut([_e("preprocess",ut),_e("postprocess",ut)]),vI=(t,s)=>{const a=si("RepresentingConfigs.memento processors",$S,s);return St.config({store:{mode:"manual",getValue:c=>{const d=t.get(c),h=St.getValue(d);return a.postprocess(h)},setValue:(c,d)=>{const h=a.preprocess(d),v=t.get(c);St.setValue(v,h)}}})},pp=(t,s,a)=>St.config({store:{mode:"manual",...t.map(c=>({initialValue:c})).getOr({}),getValue:s,setValue:a}}),l3=(t,s,a)=>pp(t,c=>s(c.element),(c,d)=>a(c.element,d)),yI=t=>l3(t,pw,Gf),JT=t=>St.config({store:{mode:"memory",initialValue:t}}),_9={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},k9=t=>s=>z(s)?t.translate(_9[s]):t.translate(s),O9=(t,s,a)=>{const c=T=>"tox-"+T,d=pI(k9(s),c),h=T=>{qt(T,df,{name:"hex-valid",value:!0})},v=T=>{qt(T,df,{name:"hex-valid",value:!1})},E=wo(d.sketch({dom:{tag:"div",classes:[c("color-picker-container")],attributes:{role:"presentation"}},onValidHex:h,onInvalidHex:v}));return{dom:{tag:"div"},components:[E.asSpec()],behaviours:lt([pp(a,T=>{const D=E.get(T);return Bn.getCurrent(D).bind(U=>St.getValue(U).hex).map(U=>"#"+wm(U,"#")).getOr("")},(T,D)=>{const B=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,L=R.from(B.exec(D)).bind(X=>As(X,1)),U=E.get(T);Bn.getCurrent(U).fold(()=>{console.log("Can not find form")},X=>{St.setValue(X,{hex:L.getOr("")}),ey.getField(X,"hex").each(ce=>{Ln(ce,Uf())})})}),_c.self()])}};var A9=tinymce.util.Tools.resolve("tinymce.Resource");const wI=t=>oo(t,"init"),CI=t=>{const s=Rn(),a=wo({dom:{tag:t.tag}}),c=Rn();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:lt([En("custom-editor-events",[Bo(d=>{a.getOpt(d).each(h=>{(wI(t)?t.init(h.element.dom):A9.load(t.scriptId,t.scriptUrl).then(v=>v(h.element.dom,t.settings))).then(v=>{c.on(E=>{v.setValue(E)}),c.clear(),s.set(v)})})})]),pp(R.none(),()=>s.get().fold(()=>c.get().getOr(""),d=>d.getValue()),(d,h)=>{s.get().fold(()=>c.set(h),v=>v.setValue(h))}),_c.self()]),components:[a.asSpec()]}};var _g=tinymce.util.Tools.resolve("tinymce.util.Tools");const SI=(t,s)=>{const a=_g.explode(s.getOption("images_file_types")),c=d=>qs(a,h=>Li(d.name.toLowerCase(),`.${h.toLowerCase()}`));return vo(Ya(t),c)},D9=(t,s,a)=>{const c=(U,j)=>{j.stop()},d=U=>(j,X)=>{yt(U,ce=>{ce(j,X)})},h=(U,j)=>{var X;if(!sn.isDisabled(U)){const ce=j.event.raw;E(U,(X=ce.dataTransfer)===null||X===void 0?void 0:X.files)}},v=(U,j)=>{const X=j.event.raw.target;E(U,X.files)},E=(U,j)=>{j&&(St.setValue(U,SI(j,s)),qt(U,Ec,{name:t.name}))},T=wo({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:lt([En("input-file-events",[Fd($d()),Fd(eu())])])}),D=U=>({uid:U.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:lt([JT(a.getOr([])),_c.self(),sn.config({}),kn.config({toggleClass:"dragenter",toggleOnExecute:!1}),En("dropzone-events",[We("dragenter",d([c,kn.toggle])),We("dragleave",d([c,kn.toggle])),We("dragover",c),We("drop",d([c,h])),We(eh(),v)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Fs(s.translate("Drop an image here"))]},Xr.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Fs(s.translate("Browse for an image")),T.asSpec()],action:j=>{T.get(j).element.dom.click()},buttonBehaviours:lt([cs.config({}),Ol.button(s.isDisabled),Br()])})]}]}),B=t.label.map(U=>vu(U,s)),L=Co.parts.field({factory:{sketch:D}});return _S(B,L,["tox-form__group--stretched"],[])},xI=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:Xe(t.items,s.interpreter)}),IS=(t,s)=>{let a=null,c=null;return{cancel:()=>{me(a)||(clearTimeout(a),a=null,c=null)},throttle:(...v)=>{c=v,me(a)&&(a=setTimeout(()=>{const E=c;a=null,c=null,t.apply(null,E)},s))}}},R9=(t,s)=>{let a=null;return{cancel:()=>{me(a)||(clearTimeout(a),a=null)},throttle:(...h)=>{me(a)&&(a=setTimeout(()=>{a=null,t.apply(null,h)},s))}}},QT=(t,s)=>{let a=null;const c=()=>{me(a)||(clearTimeout(a),a=null)};return{cancel:c,throttle:(...h)=>{c(),a=setTimeout(()=>{a=null,t.apply(null,h)},s)}}},u3=Rt("alloy-fake-before-tabstop"),d3=Rt("alloy-fake-after-tabstop"),EI=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:lt([ln.config({ignore:!0}),cs.config({})])}),TI=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[EI([u3]),s,EI([d3])],behaviours:lt([_c.childAt(1)])}),m3=(t,s)=>{qt(t,bl(),{raw:{which:9,shiftKey:s}})},M9=(t,s)=>{const a=s.element;gr(a,u3)?m3(t,!0):gr(a,d3)&&m3(t,!1)},ny=t=>ES(t,["."+u3,"."+d3].join(","),An),oy=Rt("update-dialog"),gf=Rt("update-title"),e_=Rt("update-body"),f3=Rt("update-footer"),g3=Rt("body-send-message"),sy=Rt("dialog-focus-shifted"),t_=ml().browser,bp=t_.isSafari(),_I=t_.isFirefox(),h3=bp||_I,P9=t_.isChromium(),N9=({scrollTop:t,scrollHeight:s,clientHeight:a})=>Math.ceil(t)+a>=s,kI=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),B9=(t,s)=>{const a=t.body;return R.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!P9&&!bp||je(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:t.documentElement)},OI=(t,s,a)=>{const c=t.dom;R.from(c.contentDocument).fold(a,d=>{let h=0;const v=B9(d,s).map(T=>(h=T.scrollTop,T)).forall(N9),E=()=>{const T=c.contentWindow;je(T)&&(v?kI(T,"bottom"):!v&&h3&&h!==0&&kI(T,h))};bp&&c.addEventListener("load",E,{once:!0}),d.open(),d.write(s),d.close(),bp||E()})},AI=cn(h3,bp?500:200).map(t=>IS(OI,t)),I9=(t,s)=>{const a=en(t.getOr(""));return{getValue:c=>a.get(),setValue:(c,d)=>{if(a.get()!==d){const h=c.element,v=()=>Et(h,"srcdoc",d);s?AI.fold(ae(OI),E=>E.throttle)(h,d,v):v()}a.set(d)}}},F9=(t,s,a)=>{const c="tox-dialog__iframe",d=t.transparent?[]:[`${c}--opaque`],h=t.border?["tox-navobj-bordered"]:[],v={...t.label.map(L=>({title:L})).getOr({}),...a.map(L=>({srcdoc:L})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},E=I9(a,t.streamContent),T=t.label.map(L=>vu(L,s)),D=L=>TI(R.from(h),{uid:L.uid,dom:{tag:"iframe",attributes:v,classes:[c,...d]},behaviours:lt([cs.config({}),ln.config({}),pp(a,E.getValue,E.setValue),Si.config({channels:{[sy]:{onReceive:(U,j)=>{j.newFocus.each(X=>{Hi(U.element).each(ce=>{(So(U.element,X)?Us:bs)(ce,"tox-navobj-bordered-focus")})})}}}})])}),B=Co.parts.field({factory:{sketch:D}});return _S(T,B,["tox-form__group--stretched"],[])},L9=t=>new Promise((s,a)=>{const c=()=>{h(),s(t)},d=[Va(t,"load",c),Va(t,"error",()=>{h(),a("Unable to load data from image: "+t.dom.src)})],h=()=>yt(d,v=>v.unbind());t.dom.complete&&c()}),n_=(t,s,a,c,d)=>{const h=a*d,v=c*d,E=Math.max(0,t/2-h/2),T=Math.max(0,s/2-v/2);return{left:E.toString()+"px",top:T.toString()+"px",width:h.toString()+"px",height:v.toString()+"px"}},H9=(t,s,a)=>{const c=lr(t),d=fs(t);return Math.min(c/s,d/a,1)},z9=(t,s)=>{const a=en(s.getOr({url:""})),c=wo({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(T=>({src:T.url})).getOr({})}}),d=wo({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[c.asSpec()]}),h=(T,D)=>{const B={url:D.url};D.zoom.each(U=>B.zoom=U),D.cachedWidth.each(U=>B.cachedWidth=U),D.cachedHeight.each(U=>B.cachedHeight=U),a.set(B);const L=()=>{const{cachedWidth:U,cachedHeight:j,zoom:X}=B;if(!Fe(U)&&!Fe(j)){if(Fe(X)){const ke=H9(T.element,U,j);B.zoom=ke}const ce=n_(lr(T.element),fs(T.element),U,j,B.zoom);d.getOpt(T).each(ke=>{ti(ke.element,ce)})}};c.getOpt(T).each(U=>{const j=U.element;D.url!==Ms(j,"src")&&(Et(j,"src",D.url),bs(T.element,"tox-imagepreview__loaded")),L(),L9(j).then(X=>{T.getSystem().isConnected()&&(Us(T.element,"tox-imagepreview__loaded"),B.cachedWidth=X.dom.naturalWidth,B.cachedHeight=X.dom.naturalHeight,L())})})},v={};t.height.each(T=>v.height=T);const E=s.map(T=>({url:T.url,zoom:R.from(T.zoom),cachedWidth:R.from(T.cachedWidth),cachedHeight:R.from(T.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:v,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:lt([_c.self(),pp(E,()=>a.get(),h)])}},DI=(t,s)=>{const a="tox-label",c=t.align==="center"?[`${a}--center`]:[],d=t.align==="end"?[`${a}--end`]:[],h={dom:{tag:"label",classes:[a,...c,...d]},components:[Fs(s.providers.translate(t.label))]},v=Xe(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[h,...v],behaviours:lt([_c.self(),yn.config({}),yI(R.none()),Kt.config({mode:"acyclic"})])}},p3=Rt("toolbar.button.execute"),V9=t=>vl((s,a)=>{Sb(t,s)(c=>{qt(s,p3,{buttonApi:c}),t.onAction(c)})}),Db=Rt("common-button-display-events"),o_={[Ki()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],[dc()]:["toolbar-button-events",Db],[fr()]:["focusing","alloy.base.behaviour",Db]},b3=t=>vn(t.element,"width",Ps(t.element,"width")),v3=(t,s,a)=>ad(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),y3=(t,s)=>v3(t,s,[]),vp=(t,s)=>v3(t,s,[yn.config({})]),RI=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[Fs(a.translate(t))],behaviours:lt([yn.config({})])}),Dl=Rt("update-menu-text"),yp=Rt("update-menu-icon"),w3=(t,s,a)=>{const c=en(Q),d=t.text.map(U=>wo(RI(U,s,a.providers))),h=t.icon.map(U=>wo(vp(U,a.providers.icons))),v=(U,j)=>{const X=St.getValue(U);return ln.focus(X),qt(X,"keydown",{raw:j.event.raw}),bu.close(X),R.some(!0)},E=t.role.fold(()=>({}),U=>({role:U})),T=t.tooltip.fold(()=>({}),U=>{const j=a.providers.translate(U);return{title:j,"aria-label":j}}),D=ad("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),B=Rt("common-button-display-events");return wo(bu.sketch({...t.uid?{uid:t.uid}:{},...E,dom:{tag:"button",classes:[s,`${s}--select`].concat(Xe(t.classes,U=>`${s}--${U}`)),attributes:{...T}},components:xb([h.map(U=>U.asSpec()),d.map(U=>U.asSpec()),R.some(D)]),matchWidth:!0,useMinWidth:!0,onOpen:(U,j,X)=>{t.searchable&&Zz(X)},dropdownBehaviours:lt([...t.dropdownBehaviours,Ol.button(()=>t.disabled||a.providers.isDisabled()),Br(),AS.config({}),yn.config({}),En("dropdown-events",[Cg(t,c),id(t,c)]),En(B,[Bo((U,j)=>b3(U))]),En("menubutton-update-display-text",[We(Dl,(U,j)=>{d.bind(X=>X.getOpt(U)).each(X=>{yn.set(X,[Fs(a.providers.translate(j.event.text))])})}),We(yp,(U,j)=>{h.bind(X=>X.getOpt(U)).each(X=>{yn.set(X,[vp(j.event.icon,a.providers.icons)])})})])]),eventOrder:ko(o_,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[dc()]:["toolbar-button-events","dropdown-events",B]}),sandboxBehaviours:lt([Kt.config({mode:"special",onLeft:v,onRight:v}),En("dropdown-sandbox-events",[We($4,(U,j)=>{Hz(U),j.stop()}),We(eT,(U,j)=>{zz(U,j),j.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...V0(!1,t.columns,t.presets),fakeFocus:t.searchable,onHighlightItem:PD,onCollapseMenu:(U,j,X)=>{ao.getHighlighted(X).each(ce=>{PD(U,X,ce)})},onDehighlightItem:Wz}},getAnchorOverrides:()=>({maxHeightFunction:(U,j)=>{Tx()(U,j-10)}}),fetch:U=>Za.nu(It(t.fetch,U))})).asSpec()},U9=t=>z(t),MI=t=>t.type==="separator",W9=t=>oo(t,"getSubmenuItems"),PI={type:"separator"},Z9=(t,s)=>{const a=To(t,(c,d)=>U9(d)?d===""?c:d==="|"?c.length>0&&!MI(c[c.length-1])?c.concat([PI]):c:oo(s,d.toLowerCase())?c.concat([s[d.toLowerCase()]]):c:c.concat([d]),[]);return a.length>0&&MI(a[a.length-1])&&a.pop(),a},NI=(t,s)=>{const a=t.getSubmenuItems(),c=BI(a,s),d=ko(c.menus,{[t.value]:c.items}),h=ko(c.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:h}},j9=t=>{const s=Ct(t,"value").getOrThunk(()=>Rt("generated-menu-item"));return ko({value:s},t)},BI=(t,s)=>{const a=Z9(z(t)?t.split(" "):t,s);return ds(a,(c,d)=>{if(W9(d)){const h=j9(d),v=NI(h,s);return{menus:ko(c.menus,v.menus),items:[v.item,...c.items],expansions:ko(c.expansions,v.expansions)}}else return{...c,items:[d,...c.items]}},{menus:{},expansions:{},items:[]})},G9=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),q9=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),ry=(t,s,a,c)=>{const d=Rt("primary-menu"),h=BI(t,a.shared.providers.menuItems());if(h.items.length===0)return R.none();const v=G9(c),E=y$(d,h.items,s,a,c.isHorizontalMenu,v),T=q9(c),D=Qo(h.menus,(L,U)=>y$(U,L,s,a,!1,T)),B=ko(D,wi(d,E));return R.from(tp.tieredData(d,B,h.expansions))},C3=t=>!oo(t,"items"),$I="data-value",II=(t,s,a,c)=>Xe(a,d=>C3(d)?{type:"togglemenuitem",text:d.text,value:d.value,active:d.value===c,onAction:()=>{St.setValue(t,d.value),qt(t,Ec,{name:s}),ln.focus(t)}}:{type:"nestedmenuitem",text:d.text,getSubmenuItems:()=>II(t,s,d.items,c)}),S3=(t,s)=>tr(t,a=>C3(a)?cn(a.value===s,a):S3(a.items,s)),x3=(t,s,a)=>{const c=s.shared.providers,d=a.bind(T=>S3(t.items,T)).orThunk(()=>ea(t.items).filter(C3)),h=t.label.map(T=>vu(T,c)),v=Co.parts.field({dom:{},factory:{sketch:T=>w3({uid:T.uid,text:d.map(D=>D.text),icon:R.none(),tooltip:t.label,role:R.none(),fetch:(D,B)=>{const L=II(D,t.name,t.items,St.getValue(D));B(ry(L,am.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:R.none()}))},onSetup:ae(Q),getApi:ae({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[cs.config({}),pp(d.map(D=>D.value),D=>Ms(D.element,$I),(D,B)=>{S3(t.items,B).each(L=>{Et(D.element,$I,L.value),qt(D,Dl,{text:L.text})})})]},"tox-listbox",s.shared)}}),E={dom:{tag:"div",classes:["tox-listboxfield"]},components:[v]};return Co.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:zt([h.toArray(),[E]]),fieldBehaviours:lt([sn.config({disabled:ae(!t.enabled),onDisabled:T=>{Co.getField(T).each(sn.disable)},onEnabled:T=>{Co.getField(T).each(sn.enable)}})])})},K9=(t,s)=>({dom:{tag:"div",classes:t.classes},components:Xe(t.items,s.shared.interpreter)}),Y9=(t,s)=>{const a=Xe(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),c=t.data.map(d=>wi("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:Qs(t.selectBehaviours,[ln.config({}),St.config({store:{mode:"manual",getValue:d=>qu(d.element),setValue:(d,h)=>{const v=ea(t.options);on(t.options,T=>T.value===h).isSome()?gh(d.element,h):d.element.dom.selectedIndex===-1&&h===""&&v.each(T=>gh(d.element,T.value))},...c}})])}},X9=nc({name:"HtmlSelect",configFields:[Ke("options"),hr("selectBehaviours",[ln,St]),_e("selectClasses",[]),_e("selectAttributes",{}),po("data")],factory:Y9}),FS=(t,s,a)=>{const c=Xe(t.items,T=>({text:s.translate(T.text),value:T.value})),d=t.label.map(T=>vu(T,s)),h=Co.parts.field({dom:{},...a.map(T=>({data:T})).getOr({}),selectAttributes:{size:t.size},options:c,factory:X9,selectBehaviours:lt([sn.config({disabled:()=>!t.enabled||s.isDisabled()}),cs.config({}),En("selectbox-change",[We(eh(),(T,D)=>{qt(T,Ec,{name:t.name})})])])}),v=t.size>1?R.none():R.some(ad("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),E={dom:{tag:"div",classes:["tox-selectfield"]},components:zt([[h],v.toArray()])};return Co.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:zt([d.toArray(),[E]]),fieldBehaviours:lt([sn.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:T=>{Co.getField(T).each(sn.disable)},onEnabled:T=>{Co.getField(T).each(sn.enable)}}),Br()])})},E3=ae([_e("field1Name","field1"),_e("field2Name","field2"),su("onLockedChange"),Vm(["lockClass"]),_e("locked",!1),Gc.field("coupledFieldBehaviours",[Bn,St])]),J9=(t,s,a)=>$o(t,s,a).bind(Bn.getCurrent),FI=(t,s)=>ka({factory:Co,name:t,overrides:a=>({fieldBehaviours:lt([En("coupled-input-behaviour",[We(Uf(),c=>{J9(c,a,s).each(d=>{$o(c,a,"lock").each(h=>{kn.isOn(h)&&a.onLockedChange(c,d,h)})})})])])})}),T3=ae([FI("field1","field2"),FI("field2","field1"),ka({factory:Xr,schema:[Ke("dom")],name:"lock",overrides:t=>({buttonBehaviours:lt([kn.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),Q9=(t,s,a,c)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Gc.augment(t.coupledFieldBehaviours,[Bn.config({find:R.some}),St.config({store:{mode:"manual",getValue:d=>{const h=ug(d,t,["field1","field2"]);return{[t.field1Name]:St.getValue(h.field1()),[t.field2Name]:St.getValue(h.field2())}},setValue:(d,h)=>{const v=ug(d,t,["field1","field2"]);ta(h,t.field1Name)&&St.setValue(v.field1(),h[t.field1Name]),ta(h,t.field2Name)&&St.setValue(v.field2(),h[t.field2Name])}}})]),apis:{getField1:d=>$o(d,t,"field1"),getField2:d=>$o(d,t,"field2"),getLock:d=>$o(d,t,"lock")}}),kc=Oa({name:"FormCoupledInputs",configFields:E3(),partFields:T3(),factory:Q9,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),LI=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let c=t.value.toFixed(a(t.unit));return c.indexOf(".")!==-1&&(c=c.replace(/\.?0*$/,"")),c+t.unit},_3=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const c=parseFloat(a[1]),d=a[2];return xn.value({value:c,unit:d})}else return xn.error(t)},HI=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},c=d=>oo(a,d);return t.unit===s?R.some(t.value):c(t.unit)&&c(s)?a[t.unit]===a[s]?R.some(t.value):R.some(t.value/a[t.unit]*a[s]):R.none()},s_=t=>R.none(),zI=(t,s)=>a=>HI(a,s).map(c=>({value:c*t,unit:s})),eU=(t,s)=>{const a=_3(t).toOptional(),c=_3(s).toOptional();return Fi(a,c,(d,h)=>HI(d,h.unit).map(v=>h.value/v).map(v=>zI(v,h.unit)).getOr(s_)).getOr(s_)},VI=(t,s)=>{let a=s_;const c=Rt("ratio-event"),d=L=>ad(L,{tag:"span",classes:["tox-icon","tox-lock-icon__"+L]},s.icons),h=kc.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:s.translate(t.label.getOr("Constrain proportions"))}},components:[d("lock"),d("unlock")],buttonBehaviours:lt([sn.config({disabled:()=>!t.enabled||s.isDisabled()}),Br(),cs.config({})])}),v=L=>({dom:{tag:"div",classes:["tox-form__group"]},components:L}),E=L=>Co.parts.field({factory:yb,inputClasses:["tox-textfield"],inputBehaviours:lt([sn.config({disabled:()=>!t.enabled||s.isDisabled()}),Br(),cs.config({}),En("size-input-events",[We(qi(),(U,j)=>{qt(U,c,{isField1:L})}),We(eh(),(U,j)=>{qt(U,Ec,{name:t.name})})])]),selectOnFocus:!1}),T=L=>({dom:{tag:"label",classes:["tox-label"]},components:[Fs(s.translate(L))]}),D=kc.parts.field1(v([Co.parts.label(T("Width")),E(!0)])),B=kc.parts.field2(v([Co.parts.label(T("Height")),E(!1)]));return kc.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[D,B,v([T(rC),h])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(L,U,j)=>{_3(St.getValue(L)).each(X=>{a(X).each(ce=>{St.setValue(U,LI(ce))})})},coupledFieldBehaviours:lt([sn.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:L=>{kc.getField1(L).bind(Co.getField).each(sn.disable),kc.getField2(L).bind(Co.getField).each(sn.disable),kc.getLock(L).each(sn.disable)},onEnabled:L=>{kc.getField1(L).bind(Co.getField).each(sn.enable),kc.getField2(L).bind(Co.getField).each(sn.enable),kc.getLock(L).each(sn.enable)}}),Br(),En("size-input-events2",[We(c,(L,U)=>{const j=U.event.isField1,X=j?kc.getField1(L):kc.getField2(L),ce=j?kc.getField2(L):kc.getField1(L),ke=X.map(St.getValue).getOr(""),pe=ce.map(St.getValue).getOr("");a=eU(ke,pe)})])])})},UI=(t,s,a)=>{const c=Da.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Fs(s.translate(t.label))]}),d=Da.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),h=Da.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Da.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:ae(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[c,d,h],sliderBehaviours:lt([_c.self(),ln.config({})]),onChoose:(v,E,T)=>{qt(v,Ec,{name:t.name,value:T})}})},tU=(t,s)=>{const a=E=>({dom:{tag:"th",innerHtml:s.translate(E)}}),c=E=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Xe(E,a)}]}),d=E=>({dom:{tag:"td",innerHtml:s.translate(E)}}),h=E=>({dom:{tag:"tr"},components:Xe(E,d)}),v=E=>({dom:{tag:"tbody"},components:Xe(E,h)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[c(t.header),v(t.cells)],behaviours:lt([cs.config({}),ln.config({})])}},k3=(t,s)=>{const a=t.label.map(j=>vu(j,s)),c=[sn.config({disabled:()=>t.disabled||s.isDisabled()}),Br(),Kt.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:j=>(Ln(j,OS),R.some(!0))}),En("textfield-change",[We(Uf(),(j,X)=>{qt(j,Ec,{name:t.name})}),We(Zf(),(j,X)=>{qt(j,Ec,{name:t.name})})]),cs.config({})],d=t.validation.map(j=>Al.config({getRoot:X=>Hi(X.element),invalidClass:"tox-invalid",validator:{validate:X=>{const ce=St.getValue(X),ke=j.validator(ce);return Za.pure(ke===!0?xn.value(ce):xn.error(ke))},validateOnLoad:j.validateOnLoad}})).toArray(),h=t.placeholder.fold(ae({}),j=>({placeholder:s.translate(j)})),v=t.inputMode.fold(ae({}),j=>({inputmode:j})),E={...h,...v},T=Co.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(j=>({data:j})).getOr({}),inputAttributes:E,inputClasses:[t.classname],inputBehaviours:lt(zt([c,d])),selectOnFocus:!1,factory:yb}),D=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[T]}:T,L=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),U=[sn.config({disabled:()=>t.disabled||s.isDisabled(),onDisabled:j=>{Co.getField(j).each(sn.disable)},onEnabled:j=>{Co.getField(j).each(sn.enable)}}),Br()];return _S(a,D,L,U)},WI=(t,s,a)=>k3({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:R.none(),maximized:t.maximized,data:a},s),ZI=(t,s,a)=>k3({name:t.name,multiline:!0,label:t.label,inputMode:R.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:R.none(),maximized:t.maximized,data:a},s),LS=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),kg=t=>t.dimension.property,Rb=(t,s)=>t.dimension.getDimension(s),HS=(t,s)=>{const a=LS(t,s);mc(a,[s.shrinkingClass,s.growingClass])},O3=(t,s)=>{bs(t.element,s.openClass),Us(t.element,s.closedClass),vn(t.element,kg(s),"0px"),gi(t.element)},r_=(t,s)=>{bs(t.element,s.closedClass),Us(t.element,s.openClass),to(t.element,kg(s))},jI=(t,s,a,c)=>{a.setCollapsed(),vn(t.element,kg(s),Rb(s,t.element)),HS(t,s),O3(t,s),s.onStartShrink(t),s.onShrunk(t)},nU=(t,s,a,c)=>{const d=c.getOrThunk(()=>Rb(s,t.element));a.setCollapsed(),vn(t.element,kg(s),d),gi(t.element);const h=LS(t,s);bs(h,s.growingClass),Us(h,s.shrinkingClass),O3(t,s),s.onStartShrink(t)},a_=(t,s,a)=>{const c=Rb(s,t.element);(c==="0px"?jI:nU)(t,s,a,R.some(c))},GI=(t,s,a)=>{const c=LS(t,s),d=gr(c,s.shrinkingClass),h=Rb(s,t.element);r_(t,s);const v=Rb(s,t.element);(d?()=>{vn(t.element,kg(s),h),gi(t.element)}:()=>{O3(t,s)})(),bs(c,s.shrinkingClass),Us(c,s.growingClass),r_(t,s),vn(t.element,kg(s),v),a.setExpanded(),s.onStartGrow(t)},oU=(t,s,a)=>{if(a.isExpanded()){to(t.element,kg(s));const c=Rb(s,t.element);vn(t.element,kg(s),c)}},sU=(t,s,a)=>{a.isExpanded()||GI(t,s,a)},qI=(t,s,a)=>{a.isExpanded()&&a_(t,s,a)},rU=(t,s,a)=>{a.isExpanded()&&jI(t,s,a)},KI=(t,s,a)=>a.isExpanded(),aU=(t,s,a)=>a.isCollapsed(),A3=(t,s,a)=>{const c=LS(t,s);return gr(c,s.growingClass)===!0},YI=(t,s,a)=>{const c=LS(t,s);return gr(c,s.shrinkingClass)===!0};var iU=Object.freeze({__proto__:null,refresh:oU,grow:sU,shrink:qI,immediateShrink:rU,hasGrown:KI,hasShrunk:aU,isGrowing:A3,isShrinking:YI,isTransitioning:(t,s,a)=>A3(t,s)||YI(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?a_:GI)(t,s,a)},disableTransitions:HS,immediateGrow:(t,s,a)=>{a.isExpanded()||(r_(t,s),vn(t.element,kg(s),Rb(s,t.element)),HS(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),lU=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const c=s.expanded;return Xi(c?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:wi(s.dimension.property,"0px")})},events:(t,s)=>zo([Wu(Wf(),(a,c)=>{c.event.raw.propertyName===t.dimension.property&&(HS(a,t),s.isExpanded()&&to(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),XI=[Ke("closedClass"),Ke("openClass"),Ke("shrinkingClass"),Ke("growingClass"),po("getAnimationRoot"),Wn("onShrunk"),Wn("onStartShrink"),Wn("onGrown"),Wn("onStartGrow"),_e("expanded",!1),Wi("dimension",Un("property",{width:[Oo("property","width"),Oo("getDimension",t=>lr(t)+"px")],height:[Oo("property","height"),Oo("getDimension",t=>fs(t)+"px")]}))],uU=Object.freeze({__proto__:null,init:t=>{const s=en(t.expanded),a=()=>"expanded: "+s.get();return Yi({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:It(s.set,!1),setExpanded:It(s.set,!0),readState:a})}});const Jc=Tr({fields:XI,name:"sliding",active:lU,apis:iU,state:uU}),D3=t=>({isEnabled:()=>!sn.isDisabled(t),setEnabled:s=>sn.set(t,!s),setActive:s=>{const a=t.element;s?(Us(a,"tox-tbtn--enabled"),Et(a,"aria-pressed",!0)):(bs(a,"tox-tbtn--enabled"),Ss(a,"aria-pressed"))},isActive:()=>gr(t.element,"tox-tbtn--enabled"),setText:s=>{qt(t,Dl,{text:s})},setIcon:s=>qt(t,yp,{icon:s})}),zS=(t,s,a,c,d=!0)=>w3({text:t.text,icon:t.icon,tooltip:t.tooltip,searchable:t.search.isSome(),role:c,fetch:(h,v)=>{const E={pattern:t.search.isSome()?jz(h):""};t.fetch(T=>{v(ry(T,am.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},E,D3(h))},onSetup:t.onSetup,getApi:D3,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[cs.config({})]:[]]},s,a.shared),dU=(t,s,a)=>{const c=h=>v=>{const E=!v.isActive();v.setActive(E),h.storage.set(E),a.shared.getSink().each(T=>{s().getOpt(T).each(D=>{xi(D.element),qt(D,df,{name:h.name,value:h.storage.get()})})})},d=h=>v=>{v.setActive(h.storage.get())};return h=>{h(Xe(t,v=>{const E=v.text.fold(()=>({}),T=>({text:T}));return{type:v.type,active:!1,...E,onAction:c(v),onSetup:d(v)}}))}},JI=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{title:t,"aria-label":t}},components:[Fs(t)]}),R3=Rt("leaf-label-event-id"),i_=({leaf:t,onLeafAction:s,visible:a,treeId:c,selectedId:d,backstage:h})=>{const v=t.menu.map(T=>zS(T,"tox-mbtn",h,R.none(),a)),E=[JI(t.title)];return v.each(T=>E.push(T)),Xr.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:E,role:"treeitem",action:T=>{s(t.id),T.getSystem().broadcastOn([`update-active-item-${c}`],{value:t.id})},eventOrder:{[bl()]:[R3,"keying"]},buttonBehaviours:lt([...a?[cs.config({})]:[],kn.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Si.config({channels:{[`update-active-item-${c}`]:{onReceive:(T,D)=>{(D.value===t.id?kn.on:kn.off)(T)}}}}),En(R3,[Bo((T,D)=>{d.each(B=>{(B===t.id?kn.on:kn.off)(T)})}),We(bl(),(T,D)=>{const B=D.event.raw.code==="ArrowLeft",L=D.event.raw.code==="ArrowRight";B?(Qi(T.element,".tox-tree--directory").each(U=>{T.getSystem().getByDom(U).each(j=>{zv(U,".tox-tree--directory__label").each(X=>{j.getSystem().getByDom(X).each(ln.focus)})})}),D.stop()):L&&D.stop()})])])})},QI=(t,s,a)=>ad(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:a},s),c_=(t,s)=>QI(t,s,[]),eF=Rt("directory-label-event-id"),mU=({directory:t,visible:s,noChildren:a,backstage:c})=>{const d=t.menu.map(E=>zS(E,"tox-mbtn",c,R.none())),h=[{dom:{tag:"div",classes:["tox-chevron"]},components:[c_("chevron-right",c.shared.providers.icons)]},JI(t.title)];d.each(E=>{h.push(E)});const v=E=>{Qi(E.element,".tox-tree--directory").each(T=>{E.getSystem().getByDom(T).each(D=>{const B=!kn.isOn(D);kn.toggle(D),qt(E,"expand-tree-node",{expanded:B,node:t.id})})})};return Xr.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:h,action:v,eventOrder:{[bl()]:[eF,"keying"]},buttonBehaviours:lt([...s?[cs.config({})]:[],En(eF,[We(bl(),(E,T)=>{const D=T.event.raw.code==="ArrowRight",B=T.event.raw.code==="ArrowLeft";D&&a&&T.stop(),(D||B)&&Qi(E.element,".tox-tree--directory").each(L=>{E.getSystem().getByDom(L).each(U=>{!kn.isOn(U)&&D||kn.isOn(U)&&B?(v(E),T.stop()):B&&!kn.isOn(U)&&(Qi(U.element,".tox-tree--directory").each(j=>{zv(j,".tox-tree--directory__label").each(X=>{U.getSystem().getByDom(X).each(ln.focus)})}),T.stop())})})})])])})},fU=({children:t,onLeafAction:s,visible:a,treeId:c,expandedIds:d,selectedId:h,backstage:v})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(E=>E.type==="leaf"?i_({leaf:E,selectedId:h,onLeafAction:s,visible:a,treeId:c,backstage:v}):l_({directory:E,expandedIds:d,selectedId:h,onLeafAction:s,labelTabstopping:a,treeId:c,backstage:v})),behaviours:lt([Jc.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),yn.config({})])}),gU=Rt("directory-event-id"),l_=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:c,backstage:d,expandedIds:h,selectedId:v})=>{const{children:E}=t,T=en(h),D=L=>E.map(U=>U.type==="leaf"?i_({leaf:U,selectedId:v,onLeafAction:s,visible:L,treeId:c,backstage:d}):l_({directory:U,expandedIds:T.get(),selectedId:v,onLeafAction:s,labelTabstopping:L,treeId:c,backstage:d})),B=h.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[mU({directory:t,visible:a,noChildren:t.children.length===0,backstage:d}),fU({children:E,expandedIds:h,selectedId:v,onLeafAction:s,visible:B,treeId:c,backstage:d})],behaviours:lt([En(gU,[Bo((L,U)=>{kn.set(L,B)}),We("expand-tree-node",(L,U)=>{const{expanded:j,node:X}=U.event;T.set(j?[...T.get(),X]:T.get().filter(ce=>ce!==X))})]),kn.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(L,U)=>{const j=L.components()[1],X=D(U);U?Jc.grow(j):Jc.shrink(j),yn.set(j,X)}})])}},hU=Rt("tree-event-id"),pU=(t,s)=>{const a=t.onLeafAction.getOr(Q),c=t.onToggleExpand.getOr(Q),d=t.defaultExpandedIds,h=en(d),v=en(t.defaultSelectedId),E=Rt("tree-id"),T=(D,B)=>t.items.map(L=>L.type==="leaf"?i_({leaf:L,selectedId:D,onLeafAction:a,visible:!0,treeId:E,backstage:s}):l_({directory:L,selectedId:D,onLeafAction:a,expandedIds:B,labelTabstopping:!0,treeId:E,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:T(v.get(),h.get()),behaviours:lt([Kt.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),En(hU,[We("expand-tree-node",(D,B)=>{const{expanded:L,node:U}=B.event;h.set(L?[...h.get(),U]:h.get().filter(j=>j!==U)),c(h.get(),{expanded:L,node:U})})]),Si.config({channels:{[`update-active-item-${E}`]:{onReceive:(D,B)=>{v.set(R.some(B.value)),yn.set(D,T(R.some(B.value),h.get()))}}}}),yn.config({})])}};var tF=Object.freeze({__proto__:null,events:(t,s)=>{const c=t.stream.streams.setup(t,s);return zo([We(t.event,c),Zu(()=>s.cancel())].concat(t.cancelEvent.map(d=>[We(d,()=>s.cancel())]).getOr([])))}});const M3=t=>{const s=en(null);return Yi({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:h=>{s.set(h)},cancel:()=>{const h=s.get();h!==null&&h.cancel()}})};var bU=Object.freeze({__proto__:null,throttle:M3,init:t=>t.stream.streams.state(t)});const nF=(t,s)=>{const a=t.stream,c=QT(t.onStream,a.delay);return s.setTimer(c),(d,h)=>{c.throttle(d,h),a.stopEvent&&h.stop()}};var vU=[Wi("stream",Un("mode",{throttle:[Ke("delay"),_e("stopEvent",!0),Oo("streams",{setup:nF,state:M3})]})),_e("event","input"),po("cancelEvent"),su("onStream")];const P3=Tr({fields:vU,name:"streaming",active:tF,state:bU}),dn=(t,s,a)=>{const c=St.getValue(a);St.setValue(s,c),N3(s)},ay=(t,s)=>{const a=t.element,c=qu(a),d=a.dom;Ms(a,"type")!=="number"&&s(d,c)},N3=t=>{ay(t,(s,a)=>s.setSelectionRange(a.length,a.length))},oF=(t,s)=>{ay(t,(a,c)=>a.setSelectionRange(s,c.length))},sF=(t,s,a)=>{if(t.selectsOver){const c=St.getValue(s),d=t.getDisplayText(c),h=St.getValue(a);return t.getDisplayText(h).indexOf(d)===0?R.some(()=>{dn(t,s,a),oF(s,d.length)}):R.none()}else return R.none()},u_=ae("alloy.typeahead.itemexecute"),rF=(t,s,a,c)=>{const d=(L,U,j)=>{t.previewing.set(!1);const X=js.getCoupled(L,"sandbox");if(Hn.isOpen(X))Bn.getCurrent(X).each(ce=>{ao.getHighlighted(ce).fold(()=>{j(ce)},()=>{uw(X,ce.element,"keydown",U)})});else{const ce=ke=>{Bn.getCurrent(ke).each(j)};RT(t,v(L),L,X,c,ce,Oi.HighlightMenuAndItem).get(Q)}},h=KN(t),v=L=>U=>U.map(j=>{const X=vm(j.menus),ce=$e(X,pe=>vo(pe.items,ge=>ge.type==="item"));return St.getState(L).update(Xe(ce,pe=>pe.data)),j}),E=L=>Bn.getCurrent(L),T="typeaheadevents",D=[ln.config({}),St.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:L=>qu(L.element),getFallbackEntry:L=>({value:L,meta:{}}),setValue:(L,U)=>{gh(L.element,t.model.getDisplayText(U))},...t.initialData.map(L=>wi("initialValue",L)).getOr({})}}),P3.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(L,U)=>{const j=js.getCoupled(L,"sandbox");if(ln.isFocused(L)&&qu(L.element).length>=t.minChars){const ce=E(j).bind(pe=>ao.getHighlighted(pe).map(St.getValue));t.previewing.set(!0);const ke=pe=>{E(j).each(ge=>{ce.fold(()=>{t.model.selectsOver&&ao.highlightFirst(ge)},Oe=>{ao.highlightBy(ge,Je=>St.getValue(Je).value===Oe.value),ao.getHighlighted(ge).orThunk(()=>(ao.highlightFirst(ge),R.none()))})})};RT(t,v(L),L,j,c,ke,Oi.HighlightJustMenu).get(Q)}},cancelEvent:yv()}),Kt.config({mode:"special",onDown:(L,U)=>(d(L,U,ao.highlightFirst),R.some(!0)),onEscape:L=>{const U=js.getCoupled(L,"sandbox");return Hn.isOpen(U)?(Hn.close(U),R.some(!0)):R.none()},onUp:(L,U)=>(d(L,U,ao.highlightLast),R.some(!0)),onEnter:L=>{const U=js.getCoupled(L,"sandbox"),j=Hn.isOpen(U);if(j&&!t.previewing.get())return E(U).bind(X=>ao.getHighlighted(X)).map(X=>(qt(L,u_(),{item:X}),!0));{const X=St.getValue(L);return Ln(L,yv()),t.onExecute(U,L,X),j&&Hn.close(U),R.some(!0)}}}),kn.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),js.config({others:{sandbox:L=>RD(t,L,{onOpen:()=>kn.on(L),onClose:()=>{t.lazyTypeaheadComp.get().each(U=>Ss(U.element,"aria-activedescendant")),kn.off(L)}})}}),En(T,[Bo(L=>{t.lazyTypeaheadComp.set(R.some(L))}),Zu(L=>{t.lazyTypeaheadComp.set(R.none())}),vl(L=>{const U=Q;DD(t,v(L),L,c,U,Oi.HighlightMenuAndItem).get(Q)}),We(u_(),(L,U)=>{const j=js.getCoupled(L,"sandbox");dn(t.model,L,U.event.item),Ln(L,yv()),t.onItemExecute(L,j,U.event.item,St.getValue(L)),Hn.close(j),N3(L)})].concat(t.dismissOnBlur?[We(Pm(),L=>{const U=js.getCoupled(L,"sandbox");Cl(U.element).isNone()&&Hn.close(U)})]:[]))],B={[Bm()]:[St.name(),P3.name(),T],...t.eventOrder};return{uid:t.uid,dom:YN(ko(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...h,...Qs(t.typeaheadBehaviours,D)},eventOrder:B}},yY=ae([po("lazySink"),Ke("fetch"),_e("minChars",5),_e("responseTime",1e3),Wn("onOpen"),_e("getHotspot",R.some),_e("getAnchorOverrides",ae({})),_e("layouts",R.none()),_e("eventOrder",{}),Hu("model",{},[_e("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),_e("selectsOver",!0),_e("populateFromBrowse",!0)]),Wn("onSetValue"),tc("onExecute"),Wn("onItemExecute"),_e("inputClasses",[]),_e("inputAttributes",{}),_e("inputStyles",{}),_e("matchWidth",!0),_e("useMinWidth",!1),_e("dismissOnBlur",!0),Vm(["openClass"]),po("initialData"),hr("typeaheadBehaviours",[ln,St,P3,Kt,kn,js]),zs("lazyTypeaheadComp",()=>en(R.none)),zs("previewing",()=>en(!0))].concat(qN()).concat(MD())),VS=ae([El({schema:[E1()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,c)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{sF(t.model,d,c).fold(()=>{t.model.selectsOver?(ao.dehighlight(a,c),t.previewing.set(!0)):t.previewing.set(!1)},h=>{h(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&dn(t.model,d,c),zr(c.element,"id").each(h=>Et(d.element,"aria-activedescendant",h))})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(c=>(qt(c,u_(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(c=>{t.model.populateFromBrowse&&dn(t.model,c,a)})}})})]),yU=Oa({name:"Typeahead",configFields:yY(),partFields:VS(),factory:rF}),yu=t=>({...t,toCached:()=>yu(t.toCached()),bindFuture:T=>yu(t.bind(D=>D.fold(B=>Za.pure(xn.error(B)),B=>T(B)))),bindResult:T=>yu(t.map(D=>D.bind(T))),mapResult:T=>yu(t.map(D=>D.map(T))),mapError:T=>yu(t.map(D=>D.mapError(T))),foldResult:(T,D)=>t.map(B=>B.fold(T,D)),withTimeout:(T,D)=>yu(Za.nu(B=>{let L=!1;const U=setTimeout(()=>{L=!0,B(xn.error(D()))},T);t.get(j=>{L||(clearTimeout(U),B(j))})}))}),aF=t=>yu(Za.nu(t)),iF=t=>yu(Za.pure(xn.value(t))),SU={nu:aF,wrap:yu,pure:iF,value:iF,error:t=>yu(Za.pure(xn.error(t))),fromResult:t=>yu(Za.pure(t)),fromFuture:t=>yu(t.map(xn.value)),fromPromise:t=>aF(s=>{t.then(a=>{s(xn.value(a))},a=>{s(xn.error(a))})})},d_=(t,s,a=[],c,d,h)=>{const v=s.fold(()=>({}),D=>({action:D})),E={buttonBehaviours:lt([Ol.button(()=>!t.enabled||h.isDisabled()),Br(),cs.config({}),En("button press",[fw("click"),fw("mousedown")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...v},T=ko(E,{dom:c});return ko(T,{components:d})},xU=(t,s,a,c=[])=>{const d=t.tooltip.map(T=>({"aria-label":a.translate(T),title:a.translate(T)})).getOr({}),h={tag:"button",classes:["tox-tbtn"],attributes:d},v=t.icon.map(T=>y3(T,a.icons)),E=xb([v]);return d_(t,s,c,h,E,a)},B3=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},lF=(t,s,a,c=[],d=[])=>{const h=a.translate(t.text),v=t.icon.map(U=>y3(U,a.icons)),E=[v.getOrThunk(()=>Fs(h))],T=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),L={tag:"button",classes:[...B3(T),...v.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{title:h}};return d_(t,s,c,L,E,a)},$3=(t,s,a,c=[],d=[])=>{const h=lF(t,R.some(s),a,c,d);return Xr.sketch(h)},uF=(t,s)=>a=>{s==="custom"?qt(a,df,{name:t,value:{}}):s==="submit"?Ln(a,OS):s==="cancel"?Ln(a,fp):console.error("Unknown button type: ",s)},EU=(t,s)=>s==="menu",TU=(t,s)=>s==="custom"||s==="cancel"||s==="submit",_U=(t,s)=>s==="togglebutton",kU=(t,s)=>{var a,c;const d=t.icon.map(ge=>vp(ge,s.icons)).map(wo),h=ge=>{qt(ge,df,{name:t.name,value:{setIcon:Oe=>{d.map(Je=>Je.getOpt(ge).each(Ve=>{yn.set(Ve,[vp(Oe,s.icons)])}))}}})},v=t.buttonType.getOr(t.primary?"primary":"secondary"),E={...t,name:(a=t.name)!==null&&a!==void 0?a:"",tooltip:R.from(t.tooltip),enabled:(c=t.enabled)!==null&&c!==void 0?c:!1},T=E.tooltip.map(ge=>({"aria-label":s.translate(ge),title:s.translate(ge)})).getOr({}),D=B3(v??"secondary"),B=t.icon.isSome()&&t.text.isSome(),L={tag:"button",classes:[...D.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...B?["tox-button--icon-and-text"]:[]],attributes:T},U=[],j=s.translate(t.text.getOr("")),X=Fs(j),ke=[...xb([d.map(ge=>ge.asSpec())]),...t.text.isSome()?[X]:[]],pe=d_(E,R.some(h),U,L,ke,s);return Xr.sketch(pe)},m_=(t,s,a)=>{if(EU(t,s)){const c=()=>v,d=t,h={...t,type:"menubutton",search:R.none(),onSetup:E=>(E.setEnabled(t.enabled),Q),fetch:dU(d.items,c,a)},v=wo(zS(h,"tox-tbtn",a,R.none()));return v.asSpec()}else if(TU(t,s)){const c=uF(t.name,s),d={...t,borderless:!1};return $3(d,c,a.shared.providers,[])}else{if(_U(t,s))return kU(t,a.shared.providers);throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},OU=(t,s)=>{const a=uF(t.name,"custom");return hV(R.none(),Co.parts.field({factory:Xr,...lF(t,R.some(a),s,[JT(""),_c.self()])}))},AU={type:"separator"},DU=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:Q}),I3=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:Q}),RU=t=>Xe(t,DU),dF=(t,s)=>vo(s,a=>a.type===t),mF=(t,s)=>RU(dF(t,s)),MU=t=>mF("header",t.targets),PU=t=>mF("anchor",t.targets),NU=t=>R.from(t.anchorTop).map(s=>I3("<top>",s)).toArray(),BU=t=>R.from(t.anchorBottom).map(s=>I3("<bottom>",s)).toArray(),$U=t=>Xe(t,s=>I3(s,s)),fF=t=>To(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(AU,a),[]),F3=(t,s)=>{const a=t.toLowerCase();return vo(s,c=>{var d;const h=c.meta!==void 0&&c.meta.text!==void 0?c.meta.text:c.text,v=(d=c.value)!==null&&d!==void 0?d:"";return ir(h.toLowerCase(),a)||ir(v.toLowerCase(),a)})},gF=(t,s,a)=>{var c,d;const h=St.getValue(s),v=(d=(c=h==null?void 0:h.meta)===null||c===void 0?void 0:c.text)!==null&&d!==void 0?d:h.value;return a.getLinkInformation().fold(()=>[],T=>{const D=F3(v,$U(a.getHistory(t)));return t==="file"?fF([D,F3(v,MU(T)),F3(v,zt([NU(T),PU(T),BU(T)]))]):D})},hF=Rt("aria-invalid"),pF=(t,s,a,c)=>{const d=s.shared.providers,h=ge=>{const Oe=St.getValue(ge);a.addToHistory(Oe.value,t.filetype)},v={...c.map(ge=>({initialData:ge})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":hF,type:"url"},minChars:0,responseTime:0,fetch:ge=>{const Oe=gF(t.filetype,ge,a),Je=ry(Oe,am.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:R.none()});return Za.pure(Je)},getHotspot:ge=>X.getOpt(ge),onSetValue:(ge,Oe)=>{ge.hasConfigured(Al)&&Al.run(ge).get(Q)},typeaheadBehaviours:lt([...a.getValidationHandler().map(ge=>Al.config({getRoot:Oe=>Hi(Oe.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(Oe,Je)=>{B.getOpt(Oe).each(Ve=>{Et(Ve.element,"title",d.translate(Je))})}},validator:{validate:Oe=>{const Je=St.getValue(Oe);return SU.nu(Ve=>{ge({type:t.filetype,url:Je.value},Ie=>{if(Ie.status==="invalid"){const ct=xn.error(Ie.message);Ve(ct)}else{const ct=xn.value(Ie.message);Ve(ct)}})})},validateOnLoad:!1}})).toArray(),sn.config({disabled:()=>!t.enabled||d.isDisabled()}),cs.config({}),En("urlinput-events",[We(Uf(),ge=>{const Oe=qu(ge.element),Je=Oe.trim();Je!==Oe&&gh(ge.element,Je),t.filetype==="file"&&qt(ge,Ec,{name:t.name})}),We(eh(),ge=>{qt(ge,Ec,{name:t.name}),h(ge)}),We(Zf(),ge=>{qt(ge,Ec,{name:t.name}),h(ge)})])]),eventOrder:{[Uf()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:ge=>ge.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:V0(!1,1,"normal")},onExecute:(ge,Oe,Je)=>{qt(Oe,OS,{})},onItemExecute:(ge,Oe,Je,Ve)=>{h(ge),qt(ge,Ec,{name:t.name})}},E=Co.parts.field({...v,factory:yU}),T=t.label.map(ge=>vu(ge,d)),B=wo(((ge,Oe,Je=ge,Ve=ge)=>ad(Je,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+ge],attributes:{title:d.translate(Ve),"aria-live":"polite",...Oe.fold(()=>({}),Ie=>({id:Ie}))}},d.icons))("invalid",R.some(hF),"warning")),L=wo({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[B.asSpec()]}),U=a.getUrlPicker(t.filetype),j=Rt("browser.url.event"),X=wo({dom:{tag:"div",classes:["tox-control-wrap"]},components:[E,L.asSpec()],behaviours:lt([sn.config({disabled:()=>!t.enabled||d.isDisabled()})])}),ce=wo($3({name:t.name,icon:R.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:R.none(),borderless:!0},ge=>Ln(ge,j),d,[],["tox-browse-url"])),ke=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:zt([[X.asSpec()],U.map(()=>ce.asSpec()).toArray()])}),pe=ge=>{Bn.getCurrent(ge).each(Oe=>{const Je=St.getValue(Oe),Ve={fieldname:t.name,...Je};U.each(Ie=>{Ie(Ve).get(ct=>{St.setValue(Oe,ct),qt(ge,Ec,{name:t.name})})})})};return Co.sketch({dom:lY(),components:T.toArray().concat([ke()]),fieldBehaviours:lt([sn.config({disabled:()=>!t.enabled||d.isDisabled(),onDisabled:ge=>{Co.getField(ge).each(sn.disable),ce.getOpt(ge).each(sn.disable)},onEnabled:ge=>{Co.getField(ge).each(sn.enable),ce.getOpt(ge).each(sn.enable)}}),Br(),En("url-input-events",[We(j,pe)])])})},bF=(t,s)=>{const a=bN(t.icon,s.icons);return cm.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:a},components:t.url?[Xr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(t.iconTooltip)}},action:c=>qt(c,df,{name:"alert-banner",value:t.url}),buttonBehaviours:lt([HE()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},L3=(t,s)=>{t.dom.checked=s},IU=t=>t.dom.checked,vF=(t,s,a)=>{const c=T=>(T.element.dom.click(),R.some(!0)),d=Co.parts.field({factory:{sketch:ut},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:lt([_c.self(),sn.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:T=>{Hi(T.element).each(D=>Us(D,"tox-checkbox--disabled"))},onEnabled:T=>{Hi(T.element).each(D=>bs(D,"tox-checkbox--disabled"))}}),cs.config({}),ln.config({}),l3(a,IU,L3),Kt.config({mode:"special",onEnter:c,onSpace:c,stopSpaceKeyup:!0}),En("checkbox-events",[We(eh(),(T,D)=>{qt(T,Ec,{name:t.name})})])])}),h=Co.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Fs(s.translate(t.label))],behaviours:lt([AS.config({})])}),v=T=>ad(T==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+T]},s.icons),E=wo({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[v("checked"),v("unchecked")]});return Co.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,E.asSpec(),h],fieldBehaviours:lt([sn.config({disabled:()=>!t.enabled||s.isDisabled()}),Br()])})},yF=t=>t.presets==="presentation"?cm.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):cm.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:lt([cs.config({}),ln.config({})])}),Ir=t=>(s,a,c,d)=>Ct(a,"name").fold(()=>t(a,d,R.none()),h=>s.field(h,t(a,d,Ct(c,h)))),wF=t=>(s,a,c,d)=>{const h=ko(a,{source:"dynamic"});return Ir(t)(s,h,c,d)},FU={bar:Ir((t,s)=>lV(t,s.shared)),collection:Ir((t,s,a)=>bV(t,s.shared.providers,a)),alertbanner:Ir((t,s)=>bF(t,s.shared.providers)),input:Ir((t,s,a)=>WI(t,s.shared.providers,a)),textarea:Ir((t,s,a)=>ZI(t,s.shared.providers,a)),label:Ir((t,s)=>DI(t,s.shared)),iframe:wF((t,s,a)=>F9(t,s.shared.providers,a)),button:Ir((t,s)=>OU(t,s.shared.providers)),checkbox:Ir((t,s,a)=>vF(t,s.shared.providers,a)),colorinput:Ir((t,s,a)=>xV(t,s.shared,s.colorinput,a)),colorpicker:Ir((t,s,a)=>O9(t,s.shared.providers,a)),dropzone:Ir((t,s,a)=>D9(t,s.shared.providers,a)),grid:Ir((t,s)=>xI(t,s.shared)),listbox:Ir((t,s,a)=>x3(t,s,a)),selectbox:Ir((t,s,a)=>FS(t,s.shared.providers,a)),sizeinput:Ir((t,s)=>VI(t,s.shared.providers)),slider:Ir((t,s,a)=>UI(t,s.shared.providers,a)),urlinput:Ir((t,s,a)=>pF(t,s,s.urlinput,a)),customeditor:Ir(CI),htmlpanel:Ir(yF),imagepreview:Ir((t,s,a)=>z9(t,a)),table:Ir((t,s)=>tU(t,s.shared.providers)),tree:Ir((t,s)=>pU(t,s)),panel:Ir((t,s)=>K9(t,s))},LU={field:(t,s)=>s,record:ae([])},md=(t,s,a,c)=>{const d=ko(c,{shared:{interpreter:h=>iy(t,h,a,d)}});return iy(t,s,a,d)},iy=(t,s,a,c)=>Ct(FU,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),d=>d(t,s,a,c)),US=(t,s,a)=>iy(LU,t,s,a),wp="layout-inset",WS=t=>t.x,CF=(t,s)=>t.x+t.width/2-s.width/2,ZS=(t,s)=>t.x+t.width-s.width,f_=t=>t.y,jS=(t,s)=>t.y+t.height-s.height,SF=(t,s)=>t.y+t.height/2-s.height/2,GS=(t,s,a)=>Sr(ZS(t,s),jS(t,s),a.insetSouthwest(),Xu(),"southwest",is(t,{right:0,bottom:3}),wp),qS=(t,s,a)=>Sr(WS(t),jS(t,s),a.insetSoutheast(),Zv(),"southeast",is(t,{left:1,bottom:3}),wp),Mb=(t,s,a)=>Sr(ZS(t,s),f_(t),a.insetNorthwest(),Mw(),"northwest",is(t,{right:0,top:2}),wp),KS=(t,s,a)=>Sr(WS(t),f_(t),a.insetNortheast(),_1(),"northeast",is(t,{left:1,top:2}),wp),fd=(t,s,a)=>Sr(CF(t,s),f_(t),a.insetNorth(),Wd(),"north",is(t,{top:2}),wp),cy=(t,s,a)=>Sr(CF(t,s),jS(t,s),a.insetSouth(),pO(),"south",is(t,{bottom:3}),wp),xF=(t,s,a)=>Sr(ZS(t,s),SF(t,s),a.insetEast(),k1(),"east",is(t,{right:0}),wp),EF=(t,s,a)=>Sr(WS(t),SF(t,s),a.insetWest(),De(),"west",is(t,{left:1}),wp),TF=t=>{switch(t){case"north":return fd;case"northeast":return KS;case"northwest":return Mb;case"south":return cy;case"southeast":return qS;case"southwest":return GS;case"east":return xF;case"west":return EF}},H3=(t,s,a,c,d)=>vx(c).map(TF).getOr(fd)(t,s,a,c,d),HU=t=>{switch(t){case"north":return cy;case"northeast":return qS;case"northwest":return GS;case"south":return fd;case"southeast":return KS;case"southwest":return Mb;case"east":return EF;case"west":return xF}},zU=(t,s,a,c,d)=>vx(c).map(HU).getOr(fd)(t,s,a,c,d),YS={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},VU=(t,s,a)=>{const d={maxHeightFunction:kh()},h=()=>({type:"node",root:ot(Be(t())),node:R.from(t()),bubble:Qu(12,12,YS),layouts:{onRtl:()=>[KS],onLtr:()=>[Mb]},overrides:d}),v=()=>({type:"hotspot",hotspot:s(),bubble:Qu(-12,12,YS),layouts:{onRtl:()=>[xr,ma,Er],onLtr:()=>[ma,xr,Er]},overrides:d});return()=>a()?h():v()},_F=(t,s,a,c)=>{const h={maxHeightFunction:kh()},v=()=>({type:"node",root:ot(Be(s())),node:R.from(s()),bubble:Qu(12,12,YS),layouts:{onRtl:()=>[fd],onLtr:()=>[fd]},overrides:h}),E=()=>t?{type:"node",root:ot(Be(s())),node:R.from(s()),bubble:Qu(0,-kd(s()),YS),layouts:{onRtl:()=>[Ha],onLtr:()=>[Ha]},overrides:h}:{type:"hotspot",hotspot:a(),bubble:Qu(0,0,YS),layouts:{onRtl:()=>[Ha],onLtr:()=>[Ha]},overrides:h};return()=>c()?v():E()},dm=(t,s,a)=>{const c=()=>({type:"node",root:ot(Be(t())),node:R.from(t()),layouts:{onRtl:()=>[fd],onLtr:()=>[fd]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[Er],onLtr:()=>[Er]}});return()=>a()?c():d()},z3=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng(),c=t.model.table.getSelectedCells();if(c.length>1){const d=c[0],h=c[c.length-1],v={firstCell:Ce.fromDom(d),lastCell:Ce.fromDom(h)};return R.some(v)}return R.some(Kr.range(Ce.fromDom(a.startContainer),a.startOffset,Ce.fromDom(a.endContainer),a.endOffset))}}),UU=t=>s=>({type:"node",root:t(),node:s}),WU=(t,s,a,c)=>{const d=sp(t),h=()=>Ce.fromDom(t.getBody()),v=()=>Ce.fromDom(t.getContentAreaContainer()),E=()=>d||!c();return{inlineDialog:VU(v,s,E),inlineBottomDialog:_F(t.inline,v,a,E),banner:dm(v,s,E),cursor:z3(t,h),node:UU(h)}},ZU=t=>(s,a)=>{a$(t)(s,a)},jU=t=>()=>e$(t),GU=t=>s=>_T(t,s),kF=t=>s=>QB(t,s),OF=t=>({colorPicker:ZU(t),hasCustomColors:jU(t),getColors:GU(t),getColorCols:kF(t)}),CY=t=>()=>DN(t),SY=t=>({isDraggableModal:CY(t)}),ja=t=>{const s=en(_4(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},g_=t=>ta(t,"items"),AF=t=>ta(t,"format"),XS=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],qU=t=>oo(t,"items"),KU=t=>oo(t,"block"),YU=t=>oo(t,"inline"),XU=t=>oo(t,"selector"),DF=t=>To(t,(s,a)=>{if(qU(a)){const c=DF(a.items);return{customFormats:s.customFormats.concat(c.customFormats),formats:s.formats.concat([{title:a.title,items:c.formats}])}}else if(YU(a)||KU(a)||XU(a)){const d=`custom-${z(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),JU=(t,s)=>{const a=DF(s),c=d=>{yt(d,h=>{t.formatter.has(h.name)||t.formatter.register(h.name,h.format)})};return t.formatter?c(a.customFormats):t.on("init",()=>{c(a.customFormats)}),a.formats},RF=t=>y4(t).map(s=>{const a=JU(t,s);return CN(t)?XS.concat(a):a}).getOr(XS),QU=t=>{const s=os(t);return s.length===1&&go(s,"title")},V3=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),JS=(t,s,a,c)=>{const d=T=>V3(T,a,c),h=T=>{const D=E(T.items);return{...T,type:"submenu",getStyleItems:ae(D)}},v=T=>{const D=z(T.name)?T.name:Rt(T.title),B=`custom-${D}`,L={...T,type:"formatter",format:B,isSelected:a(B),getStylePreview:c(B)};return t.formatter.register(D,L),L},E=T=>Xe(T,D=>g_(D)?h(D):AF(D)?d(D):QU(D)?{...D,type:"separator"}:v(D));return E(s)},eW=t=>{const s=E=>()=>t.formatter.match(E),a=E=>()=>{const T=t.formatter.get(E);return T!==void 0?R.some({tag:T.length>0&&(T[0].inline||T[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(E))}):R.none()},c=en([]),d=en([]),h=en(!1);return t.on("PreInit",E=>{const T=RF(t),D=JS(t,T,s,a);c.set(D)}),t.on("addStyleModifications",E=>{const T=JS(t,E.items,s,a);d.set(T),h.set(E.replace)}),{getData:()=>{const E=h.get()?[]:c.get(),T=d.get();return E.concat(T)}}},MF=t=>je(t)&&t.nodeType===1,tW=_g.trim,U3=t=>s=>!!(MF(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),nW=U3("true"),oW=U3("false"),W3=(t,s,a,c,d)=>({type:t,title:s,url:a,level:c,attach:d}),xY=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return nW(s)}return!1},EY=(t,s)=>Xe(_r(Ce.fromDom(s),t),a=>a.dom),PF=t=>t.innerText||t.textContent,sW=t=>t.id?t.id:Rt("h"),rW=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,NF=t=>rW(t)&&BF(t),h_=t=>t&&/^(H[1-6])$/.test(t.nodeName),BF=t=>xY(t)&&!oW(t),aW=t=>h_(t)&&BF(t),$F=t=>h_(t)?parseInt(t.nodeName.substr(1),10):0,iW=t=>{var s;const a=sW(t),c=()=>{t.id=a};return W3("header",(s=PF(t))!==null&&s!==void 0?s:"","#"+a,$F(t),c)},cW=t=>{const s=t.id||t.name,a=PF(t);return W3("anchor",a||"#"+s,"#"+s,0,Q)},lW=t=>Xe(vo(t,aW),iW),uW=t=>Xe(vo(t,NF),cW),Z3=t=>EY("h1,h2,h3,h4,h5,h6,a:not([href])",t),IF=t=>tW(t.title).length>0,dW={find:t=>{const s=Z3(t);return vo(lW(s).concat(uW(s)),IF)}},p_="tinymce-url-history",FF=5,j3=t=>z(t)&&/^https?/.test(t),mW=t=>ie(t)&&t.length<=FF&&eo(t,j3),QS=t=>G(t)&&Rr(t,s=>!mW(s)).isNone(),LF=()=>{const t=up.getItem(p_);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+p_+" was not valid JSON",a),{};throw a}return QS(s)?s:(console.log("Local storage "+p_+" was not valid format",s),{})},b_=t=>{if(!QS(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));up.setItem(p_,JSON.stringify(t))},fW=t=>{const s=LF();return Ct(s,t).getOr([])},G3=(t,s)=>{if(!j3(t))return;const a=LF(),c=Ct(a,s).getOr([]),d=vo(c,h=>h!==t);a[s]=[t].concat(d).slice(0,FF),b_(a)},ly=t=>!!t,HF=t=>Qo(_g.makeMap(t,/[, ]/),ly),q3=t=>R.from(C4(t)),zF=t=>{const s=R.from(S4(t)).filter(ly).map(HF);return q3(t).fold(An,a=>s.fold(Dt,c=>os(c).length>0?c:!1))},VF=(t,s)=>{const a=zF(t);return xe(a)?a?q3(t):R.none():a[s]?q3(t):R.none()},UF=(t,s)=>VF(t,s).map(a=>c=>Za.nu(d=>{const h=(E,T)=>{if(!z(E))throw new Error("Expected value to be string");if(T!==void 0&&!G(T))throw new Error("Expected meta to be a object");d({value:E,meta:T})},v={filetype:s,fieldname:c.fieldname,...R.from(c.meta).getOr({})};a.call(t,h,c.value,v)})),WF=t=>R.from(t).filter(z).getOrUndefined(),K3=t=>ON(t)?R.some({targets:dW.find(t.getBody()),anchorTop:WF(z0(t)),anchorBottom:WF(AN(t))}):R.none(),v_=t=>R.from(UE(t)),gW=t=>({getHistory:fW,addToHistory:G3,getLinkInformation:()=>K3(t),getValidationHandler:()=>v_(t),getUrlPicker:s=>UF(t,s)}),hW=(t,s,a,c)=>{const d=en(!1),h=ja(s),v={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:Cc.translate,isDisabled:()=>s.mode.isReadOnly()||!s.ui.isEnabled(),getOption:s.options.get},E=gW(s),T=eW(s),D=OF(s),B=SY(s),L=()=>d.get(),U=ke=>d.set(ke),j={shared:{providers:v,anchors:WU(s,a,c,h.isPositionedAtTop),header:h},urlinput:E,styles:T,colorinput:D,dialog:B,isContextMenuOpen:L,setContextMenuState:U},X={...j,shared:{...j.shared,interpreter:ke=>US(ke,{},X),getSink:t.popup}},ce={...j,shared:{...j.shared,interpreter:ke=>US(ke,{},ce),getSink:t.dialog}};return{popup:X,dialog:ce}},uy=(t,s,a)=>{const c=(Ie,ct)=>{yt([s,...a],gt=>{gt.broadcastEvent(Ie,ct)})},d=(Ie,ct)=>{yt([s,...a],gt=>{gt.broadcastOn([Ie],ct)})},h=Ie=>d(cu(),{target:Ie.target}),v=Em(),E=Va(v,"touchstart",h),T=Va(v,"touchmove",Ie=>c(f1(),Ie)),D=Va(v,"touchend",Ie=>c(wv(),Ie)),B=Va(v,"mousedown",h),L=Va(v,"mouseup",Ie=>{Ie.raw.button===0&&d(SC(),{target:Ie.target})}),U=Ie=>d(cu(),{target:Ce.fromDom(Ie.target)}),j=Ie=>{Ie.button===0&&d(SC(),{target:Ce.fromDom(Ie.target)})},X=()=>{yt(t.editorManager.get(),Ie=>{t!==Ie&&Ie.dispatch("DismissPopups",{relatedTarget:t})})},ce=Ie=>c(Uu(),Xw(Ie)),ke=Ie=>{d(cg(),{}),c(tu(),Xw(Ie))},pe=Be(Ce.fromDom(t.getElement())),ge=Xv(pe,"scroll",Ie=>{requestAnimationFrame(()=>{const ct=t.getContainer();if(ct!=null){const Tn=mp(t,s.element).map($t=>[$t.element,...$t.others]).getOr([]);qs(Tn,$t=>So($t,Ie.target))&&(t.dispatch("ElementScroll",{target:Ie.target.dom}),c(Sv(),Ie))}})}),Oe=()=>d(cg(),{}),Je=Ie=>{Ie.state&&d(cu(),{target:Ce.fromDom(t.getContainer())})},Ve=Ie=>{d(cu(),{target:Ce.fromDom(Ie.relatedTarget.getContainer())})};t.on("PostRender",()=>{t.on("click",U),t.on("tap",U),t.on("mouseup",j),t.on("mousedown",X),t.on("ScrollWindow",ce),t.on("ResizeWindow",ke),t.on("ResizeEditor",Oe),t.on("AfterProgressState",Je),t.on("DismissPopups",Ve)}),t.on("remove",()=>{t.off("click",U),t.off("tap",U),t.off("mouseup",j),t.off("mousedown",X),t.off("ScrollWindow",ce),t.off("ResizeWindow",ke),t.off("ResizeEditor",Oe),t.off("AfterProgressState",Je),t.off("DismissPopups",Ve),B.unbind(),E.unbind(),T.unbind(),D.unbind(),L.unbind(),ge.unbind()}),t.on("detach",()=>{yt([s,...a],Hh),yt([s,...a],Ie=>Ie.destroy())})},Fr=vA,hf=rE,ZF=ae([_e("shell",!1),Ke("makeItem"),_e("setupItem",Q),Gc.field("listBehaviours",[yn])]),Y3=Ti({name:"items",overrides:()=>({behaviours:lt([yn.config({})])})}),pW=ae([Y3]),bW=ae("CustomList"),vW=(t,s,a,c)=>{const d=(E,T)=>{v(E).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},D=>{const B=yn.contents(D),L=T.length,U=L-B.length,j=U>0?Xo(U,()=>t.makeItem()):[],X=B.slice(L);yt(X,ke=>yn.remove(D,ke)),yt(j,ke=>yn.append(D,ke));const ce=yn.contents(D);yt(ce,(ke,pe)=>{t.setupItem(E,ke,T[pe],pe)})})},h=t.shell?{behaviours:[yn.config({})],components:[]}:{behaviours:[],components:s},v=E=>t.shell?R.some(E):$o(E,t,"items");return{uid:t.uid,dom:t.dom,components:h.components,behaviours:Qs(t.listBehaviours,h.behaviours),apis:{setItems:d}}},y_=Oa({name:bW(),configFields:ZF(),partFields:pW(),factory:vW,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),dy=ae([Ke("dom"),_e("shell",!0),hr("toolbarBehaviours",[yn])]),yW=ae([Ti({name:"groups",overrides:()=>({behaviours:lt([yn.config({})])})})]),wW=(t,s,a,c)=>{const d=(E,T)=>{h(E).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},D=>{yn.set(D,T)})},h=E=>t.shell?R.some(E):$o(E,t,"groups"),v=t.shell?{behaviours:[yn.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:v.components,behaviours:Qs(t.toolbarBehaviours,v.behaviours),apis:{setGroups:d,refresh:Q},domModification:{attributes:{role:"group"}}}},mm=Oa({name:"Toolbar",configFields:dy(),partFields:yW(),factory:wW,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),CW=Q,SW=An,X3=ae([]);var xW=Object.freeze({__proto__:null,setup:CW,isDocked:SW,getBehaviours:X3});const Pb=t=>(Pa(Xs(t,"position"),"fixed")?R.none():Ic(t)).orThunk(()=>{const c=Ce.fromTag("span");return ra(t).bind(d=>{Sa(d,c);const h=Ic(c);return Vc(c),h})}),GF=t=>Pb(t).map(cc).getOrThunk(()=>co(0,0)),EW=(t,s)=>{const a=t.element;Us(a,s.transitionClass),bs(a,s.fadeOutClass),Us(a,s.fadeInClass),s.onShow(t)},J3=(t,s)=>{const a=t.element;Us(a,s.transitionClass),bs(a,s.fadeInClass),Us(a,s.fadeOutClass),s.onHide(t)},qF=(t,s)=>t.y<s.bottom&&t.bottom>s.y,KF=(t,s)=>t.y>=s.y,YF=(t,s)=>t.bottom<=s.bottom,Q3=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),eR=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),tR=t=>t.box.x-t.win.x,TW=(t,s,a)=>{const c=s.win,d=s.box,h=tR(s);return tr(t,v=>{switch(v){case"bottom":return YF(d,a.bounds)?R.none():R.some(eR(c,h,a));case"top":return KF(d,a.bounds)?R.none():R.some(Q3(c,h,a));default:return R.none()}}).getOr({location:"no-dock"})},_W=(t,s,a)=>eo(t,c=>{switch(c){case"bottom":return YF(s,a.bounds);case"top":return KF(s,a.bounds)}}),kW=(t,s)=>{const a=s.optScrollEnv.fold(ae(t.bounds.y),c=>c.scrollElmTop+(t.bounds.y-c.currentScrollTop));return co(t.bounds.x,a)},OW=(t,s)=>{const a=s.optScrollEnv.fold(ae(t.y),c=>t.y+c.currentScrollTop-c.scrollElmTop);return co(t.x,a)},XF=(t,s,a)=>a.getInitialPos().map(c=>{const d=kW(c,s);return{box:hs(d.left,d.top,lr(t),fs(t)),location:c.location}}),JF=(t,s,a,c,d)=>{const h=OW(s,a),v=hs(h.left,h.top,s.width,s.height);c.setInitialPos({style:Mr(t),position:Ps(t,"position")||"static",bounds:v,location:d.location})},QF=(t,s,a,c,d)=>{c.getInitialPos().fold(()=>JF(t,s,a,c,d),()=>Q)},nR=(t,s,a)=>a.getInitialPos().bind(c=>{var d;switch(a.clearInitialPos(),c.position){case"static":return R.some({morph:"static"});case"absolute":const h=Pb(t).getOr(Rs()),v=xs(h),E=(d=h.dom.scrollTop)!==null&&d!==void 0?d:0;return R.some({morph:"absolute",positionCss:hc("absolute",Ct(c.style,"left").map(T=>s.x-v.x),Ct(c.style,"top").map(T=>s.y-v.y+E),Ct(c.style,"right").map(T=>v.right-s.right),Ct(c.style,"bottom").map(T=>v.bottom-s.bottom))});default:return R.none()}}),w_=(t,s,a)=>XF(t,s,a).filter(({box:c})=>_W(a.getModes(),c,s)).bind(({box:c})=>nR(t,c,a)),C_=t=>{switch(t.location){case"top":return R.some({morph:"fixed",positionCss:hc("fixed",R.some(t.leftX),R.some(t.topY),R.none(),R.none())});case"bottom":return R.some({morph:"fixed",positionCss:hc("fixed",R.some(t.leftX),R.none(),R.none(),R.some(t.bottomY))});default:return R.none()}},AW=(t,s,a)=>{const c=xs(t),d=Wr(),h=TW(a.getModes(),{win:d,box:c},s);return h.location==="top"||h.location==="bottom"?(JF(t,c,s,a,h),C_(h)):R.none()},DW=(t,s,a)=>w_(t,s,a).orThunk(()=>s.optScrollEnv.bind(c=>XF(t,s,a)).bind(({box:c,location:d})=>{const h=Wr(),v=tR({win:h,box:c}),E=d==="top"?Q3(h,v,s):eR(h,v,s);return C_(E)})),RW=(t,s,a)=>{const c=t.element;return Pa(Xs(c,"position"),"fixed")?DW(c,s,a):AW(c,s,a)},MW=(t,s,a)=>{const c=t.element;return XF(c,s,a).bind(({box:d})=>nR(c,d,a))},PW=(t,s,a,c)=>{const d=xs(t),h=Wr(),v=tR({win:h,box:d}),E=c(h,v,s);return E.location==="bottom"||E.location==="top"?(QF(t,d,s,a,E),C_(E)):R.none()},eL=(t,s,a)=>{a.setDocked(!1),yt(["left","right","top","bottom","position"],c=>to(t.element,c)),s.onUndocked(t)},oR=(t,s,a,c)=>{const d=c.position==="fixed";a.setDocked(d),px(t.element,c),(d?s.onDocked:s.onUndocked)(t)},sR=(t,s,a,c,d=!1)=>{s.contextual.each(h=>{h.lazyContext(t).each(v=>{const E=qF(v,c.bounds);E!==a.isVisible()&&(a.setVisible(E),d&&!E?(Ts(t.element,[h.fadeOutClass]),h.onHide(t)):(E?EW:J3)(t,h))})})},rR=(t,s,a,c,d)=>{sR(t,s,a,c,!0),oR(t,s,a,d.positionCss)},NW=(t,s,a,c,d)=>{switch(d.morph){case"static":return eL(t,s,a);case"absolute":return oR(t,s,a,d.positionCss);case"fixed":return rR(t,s,a,c,d)}},tL=(t,s,a)=>{const c=s.lazyViewport(t);sR(t,s,a,c),RW(t,c,a).each(d=>{NW(t,s,a,c,d)})},BW=(t,s,a)=>{const c=t.element;a.setDocked(!1);const d=s.lazyViewport(t);MW(t,d,a).each(h=>{switch(h.morph){case"static":{eL(t,s,a);break}case"absolute":{oR(t,s,a,h.positionCss);break}}}),a.setVisible(!0),s.contextual.each(h=>{mc(c,[h.fadeInClass,h.fadeOutClass,h.transitionClass]),h.onShow(t)}),S_(t,s,a)},S_=(t,s,a)=>{t.getSystem().isConnected()&&tL(t,s,a)},nL=(t,s,a)=>{a.isDocked()&&BW(t,s,a)},Cp=t=>(s,a,c)=>{const d=a.lazyViewport(s);PW(s.element,d,c,t).each(v=>{rR(s,a,c,d,v)})},oL=Cp(Q3),e2=Cp(eR);var sL=Object.freeze({__proto__:null,refresh:S_,reset:nL,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,c)=>a.setModes(c),forceDockToTop:oL,forceDockToBottom:e2}),FW=Object.freeze({__proto__:null,events:(t,s)=>zo([Wu(Wf(),(a,c)=>{t.contextual.each(d=>{gr(a.element,d.transitionClass)&&(mc(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),c.stop()})}),We(Uu(),(a,c)=>{S_(a,t,s)}),We(Sv(),(a,c)=>{S_(a,t,s)}),We(tu(),(a,c)=>{nL(a,t,s)})])}),LW=[vi("contextual",[ro("fadeInClass"),ro("fadeOutClass"),ro("transitionClass"),Xl("lazyContext"),Wn("onShow"),Wn("onShown"),Wn("onHide"),Wn("onHidden")]),Nr("lazyViewport",()=>({bounds:Wr(),optScrollEnv:R.none()})),yi("modes",["top","bottom"],jr),Wn("onDocked"),Wn("onUndocked")],HW=Object.freeze({__proto__:null,init:t=>{const s=en(!1),a=en(!0),c=Rn(),d=en(t.modes),h=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return Yi({isDocked:s.get,setDocked:s.set,getInitialPos:c.get,setInitialPos:c.set,clearInitialPos:c.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:h})}});const er=Tr({fields:LW,name:"docking",active:FW,apis:sL,state:HW}),Sp=ae(Rt("toolbar-height-change")),Rl={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},x_="tox-tinymce--toolbar-sticky-on",rL="tox-tinymce--toolbar-sticky-off",zW=(t,s)=>{const a=Ba(s),d=Bc(s).dom.innerHeight,h=Ia(a),v=Ce.fromDom(t.elm),E=hi(v),T=fs(v),D=E.y,B=D+T,L=cc(s),U=fs(s),j=L.top,X=j+U,ce=Math.abs(j-h.top)<2,ke=Math.abs(X-(h.top+d))<2;if(ce&&D<X)iv(h.left,D-U,a);else if(ke&&B>j){const pe=D-d+T+U;iv(h.left,pe,a)}},my=(t,s)=>go(er.getModes(t),s),iR=t=>{const s=c=>kd(c)+(parseInt(Ps(c,"margin-top"),10)||0)+(parseInt(Ps(c,"margin-bottom"),10)||0),a=t.element;Hi(a).each(c=>{const d="padding-"+er.getModes(t)[0];if(er.isDocked(t)){const h=lr(c);vn(a,"width",h+"px"),vn(c,d,s(a)+"px")}else to(a,"width"),to(c,d)})},fy=(t,s)=>{s?(bs(t,Rl.fadeOutClass),Ts(t,[Rl.transitionClass,Rl.fadeInClass])):(bs(t,Rl.fadeInClass),Ts(t,[Rl.fadeOutClass,Rl.transitionClass]))},cR=(t,s)=>{const a=Ce.fromDom(t.getContainer());s?(Us(a,x_),bs(a,rL)):(Us(a,rL),bs(a,x_))},VW=(t,s)=>{const a=Ba(s);Ju(a).filter(c=>!So(s,c)).filter(c=>So(c,Ce.fromDom(a.dom.body))||Hr(t,c)).each(()=>xi(s))},UW=(t,s)=>Cl(t).orThunk(()=>s().toOptional().bind(a=>Cl(a.element))),WW=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(er.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(iR)}),t.on("SkinLoaded",()=>{a().each(c=>{er.isDocked(c)?er.reset(c):er.refresh(c)})}),t.on("FullscreenStateChanged",()=>{a().each(er.reset)})),t.on("AfterScrollIntoView",c=>{a().each(d=>{er.refresh(d);const h=d.element;D0(h)&&zW(c,h)})}),t.on("PostRender",()=>{cR(t,!1)})},ZW=t=>t().map(er.isDocked).getOr(!1),jW=()=>[Si.config({channels:{[Sp()]:{onReceive:iR}}})],aL=(t,s)=>{const a=Rn(),c=s.getSink,d=E=>{c().each(T=>E(T.element))},h=E=>{t.inline||iR(E),cR(t,er.isDocked(E)),E.getSystem().broadcastOn([cg()],{}),c().each(T=>T.getSystem().broadcastOn([cg()],{}))},v=t.inline?[]:jW();return[ln.config({}),er.config({contextual:{lazyContext:E=>{const T=kd(E.element),D=t.inline?t.getContentAreaContainer():t.getContainer();return R.from(D).map(B=>{const L=xs(Ce.fromDom(B));return mp(t,E.element).fold(()=>{const j=L.height-T,X=L.y+(my(E,"top")?0:T);return hs(L.x,X,L.width,j)},j=>{const X=n1(L,q0(j)),ce=my(E,"top")?X.y:X.y+T;return hs(X.x,ce,X.width,X.height-T)})})},onShow:()=>{d(E=>fy(E,!0))},onShown:E=>{d(T=>mc(T,[Rl.transitionClass,Rl.fadeInClass])),a.get().each(T=>{VW(E.element,T),a.clear()})},onHide:E=>{UW(E.element,c).fold(a.clear,a.set),d(T=>fy(T,!1))},onHidden:()=>{d(E=>mc(E,[Rl.transitionClass]))},...Rl},lazyViewport:E=>mp(t,E.element).fold(()=>{const D=Wr(),B=w4(t),L=D.y+(my(E,"top")?B:0),U=D.height-(my(E,"bottom")?B:0);return{bounds:hs(D.x,L,D.width,U),optScrollEnv:R.none()}},D=>({bounds:q0(D),optScrollEnv:R.some({currentScrollTop:D.element.dom.scrollTop,scrollElmTop:cc(D.element).top})})),modes:[s.header.getDockingMode()],onDocked:h,onUndocked:h}),...v]};var iL=Object.freeze({__proto__:null,setup:WW,isDocked:ZW,getBehaviours:aL});const cL=t=>{const s=t.editor,a=t.sticky?aL:X3;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:lt(a(s,t.sharedBackstage))}},lR=Ut([rr,Wi("items",Mt([Md([rT,lc("items",jr)]),jr]))].concat(W0)),GW=t=>Es("GroupToolbarButton",lR,t),E_=[ca("text"),ca("tooltip"),ca("icon"),Zi("search",!1,Mt([Kl,Ut([ca("placeholder")])],t=>xe(t)?t?R.some({placeholder:R.none()}):R.none():R.some(t))),Xl("fetch"),Nr("onSetup",()=>Q)],t2=Ut([rr,...E_]),uR=t=>Es("menubutton",t2,t),qW=Ut([rr,iT,Yc,cp,wb,rB,ip,ji("presets","normal",["normal","color","listpreview"]),W4(1),ap,aB]),KW=t=>Es("SplitButton",qW,t);var dR=nc({factory:(t,s)=>{const a=(d,h)=>{const v=Xe(h,E=>{const T={type:"menubutton",text:E.text,fetch:B=>{B(E.getItems())}},D=uR(T).mapError(B=>Fa(B)).getOrDie();return zS(D,"tox-mbtn",s.backstage,R.some("menuitem"))});yn.set(d,v)},c={focus:Kt.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:lt([yn.config({}),En("menubar-events",[Bo(d=>{t.onSetup(d)}),We(Bd(),(d,h)=>{Ws(d.element,".tox-mbtn--active").each(v=>{ou(h.event.target,".tox-mbtn").each(E=>{So(v,E)||d.getSystem().getByDom(v).each(T=>{d.getSystem().getByDom(E).each(D=>{bu.expand(D),bu.close(T),ln.focus(D)})})})})}),We(Cv(),(d,h)=>{h.event.prevFocus.bind(v=>d.getSystem().getByDom(v).toOptional()).each(v=>{h.event.newFocus.bind(E=>d.getSystem().getByDom(E).toOptional()).each(E=>{bu.isOpen(v)&&(bu.expand(E),bu.close(v))})})})]),Kt.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),R.some(!0))}),cs.config({})]),apis:c,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Ke("dom"),Ke("uid"),Ke("onEscape"),Ke("backstage"),_e("onSetup",Q)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const mR="⚡️Upgrade",fR="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",YW=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:fR,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:mR}}]}),T_="container",XW=[hr("slotBehaviours",[])],lL=t=>"<alloy.field."+t+">",JW=t=>{const s=(()=>{const h=[];return{slot:(E,T)=>(h.push(E),AC(T_,lL(E),T)),record:ae(h)}})(),a=t(s),c=s.record(),d=Xe(c,h=>ka({name:h,pname:lL(h)}));return $C(T_,XW,d,QW,a)},QW=(t,s)=>{const a=ce=>MC(t),c=(ce,ke)=>$o(ce,t,ke),d=(ce,ke)=>(pe,ge)=>$o(pe,t,ge).map(Oe=>ce(Oe,ge)).getOr(ke),h=ce=>(ke,pe)=>{yt(pe,ge=>ce(ke,ge))},v=(ce,ke)=>Ms(ce.element,"aria-hidden")!=="true",E=(ce,ke)=>{if(!v(ce)){const pe=ce.element;to(pe,"display"),Ss(pe,"aria-hidden"),qt(ce,g1(),{name:ke,visible:!0})}},T=(ce,ke)=>{if(v(ce)){const pe=ce.element;vn(pe,"display","none"),Et(pe,"aria-hidden","true"),qt(ce,g1(),{name:ke,visible:!1})}},D=d(v,!1),B=d(T),L=h(B),U=ce=>L(ce,a()),j=d(E),X={getSlotNames:a,getSlot:c,isShowing:D,hideSlot:B,hideAllSlots:U,showSlot:j};return{uid:t.uid,dom:t.dom,components:s,behaviours:Xd(t.slotBehaviours),apis:X}},Di={...Qo({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>Yf(t)),sketch:JW},DY=Ut([Yc,iT,Nr("onShow",Q),Nr("onHide",Q),ip]),uL=t=>Es("sidebar",DY,t),eZ=t=>{const{sidebars:s}=t.ui.registry.getAll();yt(os(s),a=>{const c=s[a],d=()=>Pa(R.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:c.icon,tooltip:c.tooltip,onAction:h=>{t.execCommand("ToggleSidebar",!1,a),h.setActive(d())},onSetup:h=>{h.setActive(d());const v=()=>h.setActive(d());return t.on("ToggleSidebar",v),()=>{t.off("ToggleSidebar",v)}}})})},dL=t=>({element:()=>t.element.dom}),tZ=(t,s)=>{const a=Xe(os(s),c=>{const d=s[c],h=No(uL(d));return{name:c,getApi:dL,onSetup:h.onSetup,onShow:h.onShow,onHide:h.onHide}});return Xe(a,c=>{const d=en(Q);return t.slot(c.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:gS.unnamedEvents([Cg(c,d),id(c,d),We(g1(),(h,v)=>{const E=v.event;on(a,D=>D.name===E.name).each(D=>{(E.visible?D.onShow:D.onHide)(D.getApi(h))})})])})})},nZ=t=>Di.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:tZ(s,t),slotBehaviours:gS.unnamedEvents([Bo(a=>Di.hideAllSlots(a))])})),oZ=(t,s,a)=>{Bn.getCurrent(t).each(d=>{yn.set(d,[nZ(s)]);const h=a==null?void 0:a.toLowerCase();z(h)&&oo(s,h)&&Bn.getCurrent(d).each(v=>{Di.showSlot(v,h),Jc.immediateGrow(d),to(d.element,"width"),__(t.element,"region")})})},__=(t,s)=>{Et(t,"role",s)},sZ=(t,s)=>{Bn.getCurrent(t).each(c=>{Bn.getCurrent(c).each(h=>{Jc.hasGrown(c)?Di.isShowing(h,s)?(Jc.shrink(c),__(t.element,"presentation")):(Di.hideAllSlots(h),Di.showSlot(h,s),__(t.element,"region")):(Di.hideAllSlots(h),Di.showSlot(h,s),Jc.grow(c),__(t.element,"region"))})})},mL=t=>Bn.getCurrent(t).bind(a=>Jc.isGrowing(a)||Jc.hasGrown(a)?Bn.getCurrent(a).bind(h=>on(Di.getSlotNames(h),v=>Di.isShowing(h,v))):R.none()),gR=Rt("FixSizeEvent"),hR=Rt("AutoSizeEvent"),rZ=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:lt([cs.config({}),ln.config({}),Jc.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Bn.getCurrent(s).each(Di.hideAllSlots),Ln(s,hR)},onGrown:s=>{Ln(s,hR)},onStartGrow:s=>{qt(s,gR,{width:Xs(s.element,"width").getOr("")})},onStartShrink:s=>{qt(s,gR,{width:lr(s.element)+"px"})}}),yn.config({}),Bn.config({find:s=>{const a=yn.contents(s);return ea(a)}})])}],behaviours:lt([_c.childAt(0),En("sidebar-sliding-events",[We(gR,(s,a)=>{vn(s.element,"width",a.event.width)}),We(hR,(s,a)=>{to(s.element,"width")})])])});var fL=Object.freeze({__proto__:null,block:(t,s,a,c)=>{Et(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),h=lt([Kt.config({mode:"special",onTab:()=>R.some(!0),onShiftTab:()=>R.some(!0)}),ln.config({})]),v=c(d,h),E=d.getSystem().build(v);yn.append(d,fc(E)),E.hasConfigured(Kt)&&s.focus&&Kt.focusIn(E),a.isBlocked()||s.onBlock(t),a.blockWith(()=>yn.remove(d,E))},unblock:(t,s,a)=>{Ss(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()},isBlocked:(t,s,a)=>a.isBlocked()}),iZ=[Nr("getRoot",R.none),Cr("focus",!0),Wn("onBlock"),Wn("onUnblock")],Ml=Object.freeze({__proto__:null,init:()=>{const t=AO(),s=a=>{t.set({destroy:a})};return Yi({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const fm=Tr({fields:iZ,name:"blocking",apis:fL,state:Ml}),gL=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:pg('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),pR=t=>Bn.getCurrent(t).each(s=>xi(s.element,!0)),cZ=(t,s)=>{const a="tabindex",c=`data-mce-${a}`;R.from(t.iframeElement).map(Ce.fromDom).each(d=>{s?(zr(d,a).each(h=>Et(d,c,h)),Et(d,a,-1)):(Ss(d,a),zr(d,c).each(h=>{Et(d,a,h),Ss(d,c)}))})},n2=(t,s,a,c)=>{const d=s.element;if(cZ(t,a),a)fm.block(s,gL(c)),to(d,"display"),Ss(d,"aria-hidden"),t.hasFocus()&&pR(s);else{const h=Bn.getCurrent(s).exists(v=>R1(v.element));fm.unblock(s),vn(d,"display","none"),Et(d,"aria-hidden","true"),h&&t.focus()}},lZ=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:lt([yn.config({}),fm.config({focus:!1}),Bn.config({find:s=>ea(s.components())})]),components:[]}),k_=t=>t.type==="focusin",uZ=t=>k_(t)?(t.composed?ea(t.composedPath()):R.from(t.target)).map(Ce.fromDom).filter(yo).exists(a=>gr(a,"mce-pastebin")):!1,O_=(t,s,a)=>{const c=en(!1),d=Rn(),h=E=>{c.get()&&!uZ(E)&&(E.preventDefault(),pR(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",h),t.on("BeforeExecCommand",E=>{E.command.toLowerCase()==="mcefocus"&&E.value!==!0&&h(E)})});const v=E=>{E!==c.get()&&(c.set(E),n2(t,s(),E,a.providers),ZB(t,E))};t.on("ProgressState",E=>{if(d.on(clearTimeout),Zt(E.time)){const T=pb.setEditorTimeout(t,()=>v(E.state),E.time);d.set(T)}else v(E.state),d.clear()})},dZ=(t,s)=>To(t,(d,h)=>s(h,d.len).fold(ae(d),E=>({len:E.finish,list:d.list.concat([E])})),{len:0,list:[]}).list,bR=(t,s,a)=>({within:t,extra:s,withinWidth:a}),Pl=(t,s,a)=>{const c=dZ(t,(E,T)=>{const D=a(E);return R.some({element:E,start:T,finish:T+D,width:D})}),d=vo(c,E=>E.finish<=s),h=ds(d,(E,T)=>E+T.width,0),v=c.slice(d.length);return{within:d,extra:v,withinWidth:h}},A_=t=>Xe(t,s=>s.element),D_=(t,s,a)=>{const c=A_(t.concat(s));return bR(c,[],a)},hL=(t,s,a,c)=>{const d=A_(t).concat([a]);return bR(d,A_(s),c)},pL=(t,s,a)=>bR(A_(t),[],a),mZ=(t,s,a)=>{const c=Pl(s,t,a);return c.extra.length===0?R.some(c):R.none()},bL=(t,s,a,c)=>{const d=mZ(t,s,a).getOrThunk(()=>Pl(s,t-a(c),a)),h=d.within,v=d.extra,E=d.withinWidth;return v.length===1&&v[0].width<=a(c)?D_(h,v,E):v.length>=1?hL(h,v,c,E):pL(h,v,E)},vL=(t,s)=>{const a=Xe(s,c=>fc(c));mm.setGroups(t,a)},fZ=t=>tr(t,s=>Cl(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),yL=(t,s,a)=>{const c=s.builtGroups.get();if(c.length===0)return;const d=Qd(t,s,"primary"),h=js.getCoupled(t,"overflowGroup");vn(d.element,"visibility","hidden");const v=c.concat([h]),E=fZ(v);a([]),vL(d,v);const T=lr(d.element),D=bL(T,s.builtGroups.get(),B=>lr(B.element),h);D.extra.length===0?(yn.remove(d,h),a([])):(vL(d,D.within),a(D.extra)),to(d.element,"visibility"),gi(d.element),E.each(ln.focus)},wL=ae([hr("splitToolbarBehaviours",[js]),zs("builtGroups",()=>en([]))]),gZ=ae([Vm(["overflowToggledClass"]),Lf("getOverflowBounds"),Ke("lazySink"),zs("overflowGroups",()=>en([])),Wn("onOpened"),Wn("onClosed")].concat(wL())),hZ=ae([ka({factory:mm,schema:dy(),name:"primary"}),El({schema:dy(),name:"overflow"}),El({name:"overflow-button"}),El({name:"overflow-group"})]),vR=ae((t,s)=>{ev(t,Math.floor(s))}),CL=ae([Vm(["toggledClass"]),Ke("lazySink"),Xl("fetch"),Lf("getBounds"),vi("fireDismissalEventInstead",[_e("event",$m())]),Zm(),Wn("onToggled")]),SL=ae([El({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:lt([kn.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),El({factory:mm,schema:dy(),name:"toolbar",overrides:t=>({toolbarBehaviours:lt([Kt.config({mode:"cyclic",onEscape:s=>($o(s,t,"button").each(ln.focus),R.none())})])})})]),o2=Rn(),pZ=(t,s)=>{o2.set(!0),yR(t,s),o2.clear()},yR=(t,s)=>{const a=js.getCoupled(t,"toolbarSandbox");Hn.isOpen(a)?Hn.close(a):Hn.open(a,s.toolbar())},R_=(t,s,a,c)=>{const d=a.getBounds.map(v=>v()),h=a.lazySink(t).getOrDie();_a.positionWithinBounds(h,s,{anchor:{type:"hotspot",hotspot:t,layouts:c,overrides:{maxWidthFunction:vR()}}},d)},wR=(t,s,a,c,d)=>{mm.setGroups(s,d),R_(t,s,a,c),kn.on(t)},xL=(t,s,a)=>{const c=Qf(),d=(v,E)=>{const T=o2.get().getOr(!1);a.fetch().get(D=>{wR(t,E,a,s.layouts,D),c.link(t.element),T||Kt.focusIn(E)})},h=()=>{kn.off(t),o2.get().getOr(!1)||ln.focus(t),c.unlink(t.element)};return{dom:{tag:"div",attributes:{id:c.id}},behaviours:lt([Kt.config({mode:"special",onEscape:v=>(Hn.close(v),R.some(!0))}),Hn.config({onOpen:d,onClose:h,isPartOf:(v,E,T)=>Ud(E,T)||Ud(t,T),getAttachPoint:()=>a.lazySink(t).getOrDie()}),Si.config({channels:{...q1({isExtraPart:An,...a.fireDismissalEventInstead.map(v=>({fireEventInstead:{event:v.event}})).getOr({})}),...zh({doReposition:()=>{Hn.getState(js.getCoupled(t,"toolbarSandbox")).each(v=>{R_(t,v,a,s.layouts)})}})}})])}},xp=Oa({name:"FloatingToolbarButton",factory:(t,s,a,c)=>({...Xr.sketch({...c.button(),action:d=>{yR(d,c)},buttonBehaviours:Gc.augment({dump:c.button().buttonBehaviours},[js.config({others:{toolbarSandbox:d=>xL(d,a,t)}})])}),apis:{setGroups:(d,h)=>{Hn.getState(js.getCoupled(d,"toolbarSandbox")).each(v=>{wR(d,v,t,a.layouts,h)})},reposition:d=>{Hn.getState(js.getCoupled(d,"toolbarSandbox")).each(h=>{R_(d,h,t,a.layouts)})},toggle:d=>{yR(d,c)},toggleWithoutFocusing:d=>{pZ(d,c)},getToolbar:d=>Hn.getState(js.getCoupled(d,"toolbarSandbox")),isOpen:d=>Hn.isOpen(js.getCoupled(d,"toolbarSandbox"))}}),configFields:CL(),partFields:SL(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),bZ=ae([Ke("items"),Vm(["itemSelector"]),hr("tgroupBehaviours",[Kt])]),EL=ae([ob({name:"items",unit:"item"})]),vZ=(t,s,a,c)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Qs(t.tgroupBehaviours,[Kt.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),M_=Oa({name:"ToolbarGroup",configFields:bZ(),partFields:EL(),factory:vZ}),TL=t=>Xe(t,s=>fc(s)),_L=(t,s,a)=>{yL(t,a,c=>{a.overflowGroups.set(c),s.getOpt(t).each(d=>{xp.setGroups(d,TL(c))})})},yZ=(t,s,a,c)=>{const d=wo(xp.sketch({fetch:()=>Za.nu(h=>{h(TL(t.overflowGroups.get()))}),layouts:{onLtr:()=>[ma,xr],onRtl:()=>[xr,ma],onBottomLtr:()=>[Ta,ai],onBottomRtl:()=>[ai,Ta]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:c["overflow-button"](),toolbar:c.overflow()},onToggled:(h,v)=>t[v?"onOpened":"onClosed"](h)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:Qs(t.splitToolbarBehaviours,[js.config({others:{overflowGroup:()=>M_.sketch({...c["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(h,v)=>{t.builtGroups.set(Xe(v,h.getSystem().build)),_L(h,d,t)},refresh:h=>_L(h,d,t),toggle:h=>{d.getOpt(h).each(v=>{xp.toggle(v)})},toggleWithoutFocusing:h=>{d.getOpt(h).each(xp.toggleWithoutFocusing)},isOpen:h=>d.getOpt(h).map(xp.isOpen).getOr(!1),reposition:h=>{d.getOpt(h).each(v=>{xp.reposition(v)})},getOverflow:h=>d.getOpt(h).bind(xp.getToolbar)},domModification:{attributes:{role:"group"}}}},kL=Oa({name:"SplitFloatingToolbar",configFields:gZ(),partFields:hZ(),factory:yZ,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),wZ=ae([Vm(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Wn("onOpened"),Wn("onClosed")].concat(wL())),CZ=ae([ka({factory:mm,schema:dy(),name:"primary"}),ka({factory:mm,schema:dy(),name:"overflow",overrides:t=>({toolbarBehaviours:lt([Jc.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{$o(s,t,"overflow-button").each(a=>{kn.off(a),ln.focus(a)}),t.onClosed(s)},onGrown:s=>{Kt.focusIn(s),t.onOpened(s)},onStartGrow:s=>{$o(s,t,"overflow-button").each(kn.on)}}),Kt.config({mode:"acyclic",onEscape:s=>($o(s,t,"overflow-button").each(ln.focus),R.some(!0))})])})}),El({name:"overflow-button",overrides:t=>({buttonBehaviours:lt([kn.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),El({name:"overflow-group"})]),SZ=(t,s)=>$o(t,s,"overflow").map(Jc.hasGrown).getOr(!1),OL=(t,s)=>{$o(t,s,"overflow-button").bind(()=>$o(t,s,"overflow")).each(a=>{P_(t,s),Jc.toggleGrow(a)})},P_=(t,s)=>{$o(t,s,"overflow").each(a=>{yL(t,s,c=>{const d=Xe(c,h=>fc(h));mm.setGroups(a,d)}),$o(t,s,"overflow-button").each(c=>{Jc.hasGrown(a)&&kn.on(c)}),Jc.refresh(a)})},xZ=(t,s,a,c)=>{const d="alloy.toolbar.toggle",h=(v,E)=>{const T=Xe(E,v.getSystem().build);t.builtGroups.set(T)};return{uid:t.uid,dom:t.dom,components:s,behaviours:Qs(t.splitToolbarBehaviours,[js.config({others:{overflowGroup:v=>M_.sketch({...c["overflow-group"](),items:[Xr.sketch({...c["overflow-button"](),action:E=>{Ln(v,d)}})]})}}),En("toolbar-toggle-events",[We(d,v=>{OL(v,t)})])]),apis:{setGroups:(v,E)=>{h(v,E),P_(v,t)},refresh:v=>P_(v,t),toggle:v=>OL(v,t),isOpen:v=>SZ(v,t)},domModification:{attributes:{role:"group"}}}},CR=Oa({name:"SplitSlidingToolbar",configFields:wZ(),partFields:CZ(),factory:xZ,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),N_=t=>{const s=t.title.fold(()=>({}),a=>({attributes:{title:a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...s},components:[M_.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:lt([cs.config({}),ln.config({})])}},B_=t=>M_.sketch(N_(t)),s2=(t,s)=>{const a=Bo(c=>{const d=Xe(t.initGroups,B_);mm.setGroups(c,d)});return lt([Ol.toolbarButton(t.providers.isDisabled),Br(),Kt.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),En("toolbar-events",[a])])},AL=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":N_({title:R.none(),items:[]}),"overflow-button":xU({icon:R.some("more-drawer"),enabled:!0,tooltip:R.some("Reveal or hide additional toolbar items")},R.none(),t.providers)},splitToolbarBehaviours:s2(t,s)}},DL=t=>{const s=AL(t),a=4,c=kL.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return kL.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,h=hi(d),v=Nc(d),E=hi(v),T=Math.max(v.dom.scrollHeight,E.height);return hs(h.x+a,E.y,h.width-a*2,T)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[c],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},EZ=t=>{const s=CR.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=CR.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),c=AL(t);return CR.sketch({...c,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([Sp()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([Sp()],{type:"closed"}),t.onToggled(d,!1)}})},$_=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return mm.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===fu.scrolling?["tox-toolbar--scrolling"]:[])},components:[mm.parts.groups({})],toolbarBehaviours:s2(t,s)})},TZ=[cp,Yc,ca("tooltip"),ji("buttonType","secondary",["primary","secondary"]),Cr("borderless",!1),Xl("onAction")],_Z=[...TZ,cf,Yl("type",["button"])],kZ=[...TZ,Cr("active",!1),Yl("type",["togglebutton"])],I_={button:_Z,togglebutton:kZ},OZ=[Yl("type",["group"]),yi("buttons",[],Un("type",I_))],F_=Un("type",{...I_,group:OZ}),RL=Ut([yi("buttons",[],F_),Xl("onShow"),Xl("onHide")]),ML=t=>Es("view",RL,t),SR=(t,s)=>{var a,c;const d=t.type==="togglebutton",h=t.icon.map(Oe=>vp(Oe,s.icons)).map(wo),E=Oe=>{const Je=ct=>{h.map(gt=>gt.getOpt(Oe).each(Tn=>{yn.set(Tn,[vp(ct,s.icons)])}))},Ve=ct=>{const gt=Oe.element;ct?(Us(gt,"tox-button--enabled"),Et(gt,"aria-pressed",!0)):(bs(gt,"tox-button--enabled"),Ss(gt,"aria-pressed"))},Ie=()=>gr(Oe.element,"tox-button--enabled");if(d)return t.onAction({setIcon:Je,setActive:Ve,isActive:Ie});if(t.type==="button")return t.onAction({setIcon:Je})},T={...t,name:d?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:R.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},D=B3((c=t.buttonType)!==null&&c!==void 0?c:"secondary"),B=d?t.text.map(s.translate):R.some(s.translate(t.text)),L=B.map(Fs),U=T.tooltip.or(B).map(Oe=>({"aria-label":s.translate(Oe),title:s.translate(Oe)})).getOr({}),j=h.map(Oe=>Oe.asSpec()),X=xb([j,L]),ce=t.icon.isSome()&&L.isSome(),ke={tag:"button",classes:D.concat(...t.icon.isSome()&&!ce?["tox-button--icon"]:[]).concat(...ce?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:U},pe=[],ge=d_(T,R.some(E),pe,ke,X,s);return Xr.sketch(ge)},PL=(t,s)=>SR(t,s),NL=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Xe(t.buttons,a=>PL(a,s))}),Nb=ml().deviceType,BL=Nb.isPhone(),AZ=Nb.isTablet(),DZ=t=>{let s=!1;const a=Xe(t.buttons,c=>c.type==="group"?(s=!0,NL(c,t.providers)):PL(c,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...BL||AZ?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:lt([ln.config({}),Kt.config({mode:"flow",selector:"button, .tox-button",focusInside:b.OnEnterOrSpaceMode})]),components:s?a:[cm.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),cm.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},RZ=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-view__pane"]}}),xR=(t,s,a,c)=>{const d={getPane:h=>Fr.getPart(h,t,"pane"),getOnShow:h=>t.viewConfig.onShow,getOnHide:h=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,apis:d}};var gy=Oa({name:"silver.View",configFields:[Ke("viewConfig")],partFields:[Ti({factory:{sketch:DZ},schema:[Ke("buttons"),Ke("providers")],name:"header"}),Ti({factory:{sketch:RZ},schema:[],name:"pane"})],factory:xR,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const MZ=(t,s,a)=>Sd(s,(c,d)=>{const h=No(ML(c));return t.slot(d,gy.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:h,components:[...h.buttons.length>0?[gy.parts.header({buttons:h.buttons,providers:a})]:[],gy.parts.pane({})]}))}),$L=(t,s)=>Di.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:MZ(a,t,s),slotBehaviours:gS.unnamedEvents([Bo(c=>Di.hideAllSlots(c))])})),ER=t=>on(Di.getSlotNames(t),s=>Di.isShowing(t,s)),L_=t=>{const s=t.element;vn(s,"display","none"),Et(s,"aria-hidden","true")},TR=t=>{const s=t.element;to(s,"display"),Ss(s,"aria-hidden")},PZ=t=>({getContainer:ae(t)}),IL=(t,s,a)=>{Di.getSlot(t,s).each(c=>{gy.getPane(c).each(d=>{a(c)(PZ(d.element.dom))})})},FL=(t,s)=>IL(t,s,gy.getOnShow),NZ=(t,s)=>IL(t,s,gy.getOnHide);var H_=nc({factory:(t,s)=>{const h={setViews:(v,E)=>{yn.set(v,[$L(E,s.backstage.shared.providers)])},whichView:v=>Bn.getCurrent(v).bind(ER),toggleView:(v,E,T,D)=>Bn.getCurrent(v).exists(B=>{const L=ER(B),U=L.exists(X=>D===X),j=Di.getSlot(B,D).isSome();return j&&(Di.hideAllSlots(B),U?(L_(v),E()):(T(),TR(v),Di.showSlot(B,D),FL(B,D)),L.each(X=>NZ(B,X))),j})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:lt([yn.config({}),Bn.config({find:v=>{const E=yn.contents(v);return ea(E)}})]),apis:h}},name:"silver.ViewWrapper",configFields:[Ke("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,c,d)=>t.toggleView(s,a,c,d),whichView:(t,s)=>t.whichView(s)}});const LL=(t,s,a)=>{let c=!1;const d={getSocket:h=>Fr.getPart(h,t,"socket"),setSidebar:(h,v,E)=>{Fr.getPart(h,t,"sidebar").each(T=>oZ(T,v,E))},toggleSidebar:(h,v)=>{Fr.getPart(h,t,"sidebar").each(E=>sZ(E,v))},whichSidebar:h=>Fr.getPart(h,t,"sidebar").bind(mL).getOrNull(),getHeader:h=>Fr.getPart(h,t,"header"),getToolbar:h=>Fr.getPart(h,t,"toolbar"),setToolbar:(h,v)=>{Fr.getPart(h,t,"toolbar").each(E=>{const T=Xe(v,B_);E.getApis().setGroups(E,T)})},setToolbars:(h,v)=>{Fr.getPart(h,t,"multiple-toolbar").each(E=>{const T=Xe(v,D=>Xe(D,B_));y_.setItems(E,T)})},refreshToolbar:h=>{Fr.getPart(h,t,"toolbar").each(E=>E.getApis().refresh(E))},toggleToolbarDrawer:h=>{Fr.getPart(h,t,"toolbar").each(v=>{Lo(v.getApis().toggle,E=>E(v))})},toggleToolbarDrawerWithoutFocusing:h=>{Fr.getPart(h,t,"toolbar").each(v=>{Lo(v.getApis().toggleWithoutFocusing,E=>E(v))})},isToolbarDrawerToggled:h=>Fr.getPart(h,t,"toolbar").bind(v=>R.from(v.getApis().isOpen).map(E=>E(v))).getOr(!1),getThrobber:h=>Fr.getPart(h,t,"throbber"),focusToolbar:h=>{Fr.getPart(h,t,"toolbar").orThunk(()=>Fr.getPart(h,t,"multiple-toolbar")).each(E=>{Kt.focusIn(E)})},setMenubar:(h,v)=>{Fr.getPart(h,t,"menubar").each(E=>{dR.setMenus(E,v)})},focusMenubar:h=>{Fr.getPart(h,t,"menubar").each(v=>{dR.focus(v)})},setViews:(h,v)=>{Fr.getPart(h,t,"viewWrapper").each(E=>{H_.setViews(E,v)})},toggleView:(h,v)=>Fr.getPart(h,t,"viewWrapper").exists(E=>H_.toggleView(E,()=>d.showMainView(h),()=>d.hideMainView(h),v)),whichView:h=>Fr.getPart(h,t,"viewWrapper").bind(H_.whichView).getOrNull(),hideMainView:h=>{c=d.isToolbarDrawerToggled(h),c&&d.toggleToolbarDrawer(h),Fr.getPart(h,t,"editorContainer").each(v=>{const E=v.element;vn(E,"display","none"),Et(E,"aria-hidden","true")})},showMainView:h=>{c&&d.toggleToolbarDrawer(h),Fr.getPart(h,t,"editorContainer").each(v=>{const E=v.element;to(E,"display"),Ss(E,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:d,behaviours:t.behaviours}},BZ=hf.optional({factory:dR,name:"menubar",schema:[Ke("backstage")]}),$Z=t=>t.type===fu.sliding?EZ:t.type===fu.floating?DL:$_,_R=hf.optional({factory:{sketch:t=>y_.sketch({uid:t.uid,dom:t.dom,listBehaviours:lt([Kt.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>$_({type:t.type,uid:Rt("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),R.some(!0))}),setupItem:(s,a,c,d)=>{mm.setGroups(a,c)},shell:!0})},name:"multiple-toolbar",schema:[Ke("dom"),Ke("onEscape")]}),IZ=hf.optional({factory:{sketch:t=>{const s=$Z(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),R.some(!0)),onToggled:(c,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[Ke("dom"),Ke("onEscape"),Ke("getSink")]}),FZ=hf.optional({factory:{sketch:cL},name:"header",schema:[Ke("dom")]}),HL=hf.optional({factory:{sketch:YW},name:"promotion",schema:[Ke("dom")]}),LZ=hf.optional({name:"socket",schema:[Ke("dom")]}),zL=hf.optional({factory:{sketch:rZ},name:"sidebar",schema:[Ke("dom")]}),HZ=hf.optional({factory:{sketch:lZ},name:"throbber",schema:[Ke("dom")]}),VL=hf.optional({factory:H_,name:"viewWrapper",schema:[Ke("backstage")]}),zZ=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),VZ=hf.optional({factory:{sketch:zZ},name:"editorContainer",schema:[]});var Go=Oa({name:"OuterContainer",factory:LL,configFields:[Ke("dom"),Ke("behaviours")],partFields:[FZ,BZ,IZ,_R,LZ,zL,HL,HZ,VL,VZ],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,c)=>{t.setSidebar(s,a,c)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const UL="file edit view insert format tools table help",WL={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template inserttemplate codesample inserttable accordion | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},UZ=(t,s,a)=>{const c=op(a).split(/[ ,]/);return{text:t.title,getItems:()=>$e(t.items,d=>{const h=d.toLowerCase();return h.trim().length===0?[]:qs(c,v=>v===h)?[]:h==="separator"||h==="|"?[{type:"separator"}]:s.menuItems[h]?[s.menuItems[h]]:[]})}},kR=t=>t.split(" "),z_=(t,s)=>{const a={...WL,...s.menus},c=os(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?kR(UL):kR(s.menubar===!1?"":s.menubar),h=vo(d,E=>{const T=oo(WL,E);return c?T||Ct(s.menus,E).exists(D=>oo(D,"items")):T}),v=Xe(h,E=>{const T=a[E];return UZ({title:T.title,items:kR(T.items)},s,t)});return vo(v,E=>{const T=D=>z(D)||D.type!=="separator";return E.getItems().length>0&&qs(E.getItems(),T)})},OR=t=>{const s=()=>{t._skinLoaded=!0,YH(t)};return()=>{t.initialized?s():t.on("init",s)}},WZ=(t,s)=>()=>lD(t,{message:s}),ZL=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),AR=(t,s,a,c)=>(t.on("remove",()=>c.unloadRawCss(s)),c.loadRawCss(s,a)),ZZ=async(t,s)=>{const c="ui/"+YE(t).getOr("default")+"/skin.css",d=tinymce.Resource.get(c);if(z(d))return Promise.resolve(AR(t,c,d,t.ui.styleSheetLoader));{const h=s+"/skin.min.css";return ZL(t,h,t.ui.styleSheetLoader)}},jZ=async(t,s)=>{if(an(Ce.fromDom(t.getElement()))){const d="ui/"+YE(t).getOr("default")+"/skin.shadowdom.css",h=tinymce.Resource.get(d);if(z(h))return AR(t,d,h,F0.DOM.styleSheetLoader),Promise.resolve();{const v=s+"/skin.shadowdom.min.css";return ZL(t,v,F0.DOM.styleSheetLoader)}}},GZ=async(t,s)=>{YE(s).fold(()=>{const c=KE(s);c&&s.contentCSS.push(c+(t?"/content.inline":"/content")+".min.css")},c=>{const d="ui/"+c+(t?"/content.inline":"/content")+".css",h=tinymce.Resource.get(d);if(z(h))AR(s,d,h,s.ui.styleSheetLoader);else{const v=KE(s);v&&s.contentCSS.push(v+(t?"/content.inline":"/content")+".min.css")}});const a=KE(s);if(!E4(s)&&z(a))return Promise.all([ZZ(s,a),jZ(s,a)]).then()},jL=(t,s)=>GZ(t,s).then(OR(s),WZ(s,"Skin could not be loaded")),qZ=It(jL,!1),KZ=It(jL,!0),Bb=(t,s,a)=>t.translate([s,t.translate(a)]),V_=(t,s)=>{const a=(v,E,T,D)=>{const B=t.shared.providers.translate(v.title);if(v.type==="separator")return R.some({type:"separator",text:B});if(v.type==="submenu"){const L=$e(v.getStyleItems(),U=>c(U,E,D));return E===0&&L.length<=0?R.none():R.some({type:"nestedmenuitem",text:B,enabled:L.length>0,getSubmenuItems:()=>$e(v.getStyleItems(),U=>c(U,E,D))})}else return R.some({type:"togglemenuitem",text:B,icon:v.icon,active:v.isSelected(D),enabled:!T,onAction:s.onAction(v),...v.getStylePreview().fold(()=>({}),L=>({meta:{style:L}}))})},c=(v,E,T)=>{const D=v.type==="formatter"&&s.isInvalid(v);return E===0?D?[]:a(v,E,!1,T).toArray():a(v,E,D,T).toArray()},d=v=>{const E=s.getCurrentValue(),T=s.shouldHide?0:1;return $e(v,D=>c(D,T,E))};return{validateItems:d,getFetch:(v,E)=>(T,D)=>{const B=E(),L=d(B),U=ry(L,am.CLOSE_ON_EXECUTE,v,{isHorizontalMenu:!1,search:R.none()});D(U)}}},Ep=(t,s,a)=>{const c=a.dataset,d=c.type==="basic"?()=>Xe(c.data,h=>V3(h,a.isSelectedFor,a.getPreviewFor)):c.getData;return{items:V_(s,a),getStyleItems:d}},hy=(t,s,a,c,d)=>{const{items:h,getStyleItems:v}=Ep(t,s,a),E=D=>({getComponent:ae(D),setTooltip:B=>{const L=s.shared.providers.translate(B);Of(D.element,{"aria-label":L,title:L})}}),T=D=>{const B=L=>D.setTooltip(Bb(t,c,L.value));return t.on(d,B),wS(cd(t,"NodeChange",L=>{const U=L.getComponent();a.updateText(U),sn.set(L.getComponent(),!t.selection.isEditable())})(D),()=>t.off(d,B))};return w3({text:a.icon.isSome()?R.none():a.text,icon:a.icon,tooltip:R.from(a.tooltip),role:R.none(),fetch:h.getFetch(s,v),onSetup:T,getApi:E,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",s.shared)},Tp=t=>Xe(t,s=>{let a=s,c=s;const d=s.split("=");return d.length>1&&(a=d[0],c=d[1]),{title:a,format:c}}),GL=t=>({type:"basic",data:t});var py;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(py||(py={}));const YZ=(t,s)=>s===py.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),DR=(t,s,a)=>{const c=t.options.get(s);return{type:"basic",data:Tp(YZ(c,a))}},XZ="Align",qL="Alignment {0}",KL="left",RR=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],MR=t=>{const s=()=>on(RR,E=>t.formatter.match(E.format)),a=E=>()=>t.formatter.match(E),c=E=>R.none,d=E=>{const D=s().fold(ae(KL),B=>B.title.toLowerCase());qt(E,yp,{icon:`align-${D}`}),ez(t,{value:D})},h=GL(RR),v=E=>()=>on(RR,T=>T.format===E.format).each(T=>t.execCommand(T.command));return{tooltip:Bb(t,qL,KL),text:R.none(),icon:R.some("align-left"),isSelectedFor:a,getCurrentValue:R.none,getPreviewFor:c,onAction:v,updateText:d,dataset:h,shouldHide:!1,isInvalid:E=>!t.formatter.canApply(E.format)}},JZ=(t,s)=>hy(t,s,MR(t),qL,"AlignTextUpdate"),QZ=(t,s)=>{const a=Ep(t,s,MR(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(XZ),onSetup:Ai(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},U_=(t,s)=>{const a=s(),c=Xe(a,d=>d.format);return R.from(t.formatter.closest(c)).bind(d=>on(a,h=>h.format===d)).orThunk(()=>cn(t.formatter.match("p"),{title:"Paragraph",format:"p"}))},ej="Blocks",YL="Block {0}",PR="Paragraph",XL=t=>{const s=h=>()=>t.formatter.match(h),a=h=>()=>{const v=t.formatter.get(h);return v?R.some({tag:v.length>0&&(v[0].inline||v[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(h))}):R.none()},c=h=>{const E=U_(t,()=>d.data).fold(ae(PR),T=>T.title);qt(h,Dl,{text:E}),GB(t,{value:E})},d=DR(t,"block_formats",py.SemiColon);return{tooltip:Bb(t,YL,PR),text:R.some(PR),icon:R.none(),isSelectedFor:s,getCurrentValue:R.none,getPreviewFor:a,onAction:KB(t),updateText:c,dataset:d,shouldHide:!1,isInvalid:h=>!t.formatter.canApply(h.format)}},tj=(t,s)=>hy(t,s,XL(t),YL,"BlocksTextUpdate"),nj=(t,s)=>{const a=Ep(t,s,XL(t));t.ui.registry.addNestedMenuItem("blocks",{text:ej,onSetup:Ai(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},JL="Fonts",NR="Font {0}",W_="System Font",oj=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],BR=t=>{const s=t.split(/\s*,\s*/);return Xe(s,a=>a.replace(/^['"]+|['"]+$/g,""))},QL=(t,s)=>s.length>0&&eo(s,a=>t.indexOf(a.toLowerCase())>-1),sj=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const a=BR(t.toLowerCase());return QL(a,oj)||QL(a,s)}else return!1},e5=t=>{const s=()=>{const T=X=>X?BR(X)[0]:"",D=t.queryCommandValue("FontName"),B=E.data,L=D?D.toLowerCase():"",U=NN(t);return{matchOpt:on(B,X=>{const ce=X.format;return ce.toLowerCase()===L||T(ce).toLowerCase()===T(L).toLowerCase()}).orThunk(()=>cn(sj(L,U),{title:W_,format:L})),font:D}},a=T=>D=>D.exists(B=>B.format===T),c=()=>{const{matchOpt:T}=s();return T},d=T=>()=>R.some({tag:"div",styles:T.indexOf("dings")===-1?{"font-family":T}:{}}),h=T=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,T.format)})},v=T=>{const{matchOpt:D,font:B}=s(),L=D.fold(ae(B),U=>U.title);qt(T,Dl,{text:L}),qB(t,{value:L})},E=DR(t,"font_family_formats",py.SemiColon);return{tooltip:Bb(t,NR,W_),text:R.some(W_),icon:R.none(),isSelectedFor:a,getCurrentValue:c,getPreviewFor:d,onAction:h,updateText:v,dataset:E,shouldHide:!1,isInvalid:An}},t5=(t,s)=>hy(t,s,e5(t),NR,"FontFamilyTextUpdate"),rj=(t,s)=>{const a=Ep(t,s,e5(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(JL),onSetup:Ai(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},n5={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},aj=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),c="\\.",d=E=>`(?:${E})?`,v=`[+-]?(?:${["Infinity",t+c+d(t)+d(a),c+t+d(a),t+d(a)].join("|")})`;return new RegExp(`^(${v})(.*)$`)})(),ij=(t,s)=>qs(s,a=>qs(n5[a],c=>t===c)),Z_=(t,s)=>R.from(aj.exec(t)).bind(c=>{const d=Number(c[1]),h=c[2];return ij(h,s)?R.some({value:d,unit:h}):R.none()}),cj=(t,s)=>Z_(t,s).map(({value:a,unit:c})=>a+c),o5={tab:ae(9),escape:ae(27),enter:ae(13),backspace:ae(8),delete:ae(46),left:ae(37),up:ae(38),right:ae(39),down:ae(40),space:ae(32),home:ae(36),end:ae(35),pageUp:ae(33),pageDown:ae(34)},lj=(t,s,a)=>{let c=R.none();const d=ge=>ge.map(Oe=>St.getValue(Oe)).getOr(""),h=cd(t,"NodeChange SwitchMode",ge=>{const Oe=ge.getComponent();c=R.some(Oe),a.updateInputValue(Oe),sn.set(Oe,!t.selection.isEditable())}),v=ge=>({getComponent:ae(ge)}),E=en(Q),T=Rt("custom-number-input-events"),D=(ge,Oe,Je)=>{const Ve=d(c),Ie=a.getNewValue(Ve,ge),ct=Ve.length-`${Ie}`.length,gt=c.map($t=>$t.element.dom.selectionStart-ct),Tn=c.map($t=>$t.element.dom.selectionEnd-ct);a.onAction(Ie,Je),c.each($t=>{St.setValue($t,Ie),Oe&&(gt.each(tn=>$t.element.dom.selectionStart=tn),Tn.each(tn=>$t.element.dom.selectionEnd=tn))})},B=(ge,Oe)=>D((Je,Ve)=>Je-Ve,ge,Oe),L=(ge,Oe)=>D((Je,Ve)=>Je+Ve,ge,Oe),U=ge=>Hi(ge.element).fold(R.none,Oe=>(xi(Oe),R.some(!0))),j=ge=>R1(ge.element)?(_f(ge.element).each(Oe=>xi(Oe)),R.some(!0)):R.none(),X=(ge,Oe,Je,Ve)=>{const Ie=en(Q),ct=s.shared.providers.translate(Je),gt=Rt("altExecuting"),Tn=cd(t,"NodeChange SwitchMode",tn=>{sn.set(tn.getComponent(),!t.selection.isEditable())}),$t=tn=>{sn.isDisabled(tn)||ge(!0)};return Xr.sketch({dom:{tag:"button",attributes:{title:ct,"aria-label":ct},classes:Ve.concat(Oe)},components:[y3(Oe,s.shared.providers.icons)],buttonBehaviours:lt([sn.config({}),En(gt,[Cg({onSetup:Tn,getApi:v},Ie),id({getApi:v},Ie),We(bl(),(tn,un)=>{(un.event.raw.keyCode===o5.space()||un.event.raw.keyCode===o5.enter())&&(sn.isDisabled(tn)||ge(!1))}),We($d(),$t),We(Vf(),$t)])]),eventOrder:{[bl()]:[gt,"keying"],[$d()]:[gt,"alloy.base.behaviour"],[Vf()]:[gt,"alloy.base.behaviour"]}})},ce=wo(X(ge=>B(!1,ge),"minus","Decrease font size",[])),ke=wo(X(ge=>L(!1,ge),"plus","Increase font size",[])),pe=wo({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[yb.sketch({inputBehaviours:lt([sn.config({}),En(T,[Cg({onSetup:h,getApi:v},E),id({getApi:v},E)]),En("input-update-display-text",[We(Dl,(ge,Oe)=>{St.setValue(ge,Oe.event.text)}),We(vv(),ge=>{a.onAction(St.getValue(ge))}),We(eh(),ge=>{a.onAction(St.getValue(ge))})]),Kt.config({mode:"special",onEnter:ge=>(D(ut,!0,!0),R.some(!0)),onEscape:U,onUp:ge=>(L(!0,!1),R.some(!0)),onDown:ge=>(B(!0,!1),R.some(!0)),onLeft:(ge,Oe)=>(Oe.cut(),R.none()),onRight:(ge,Oe)=>(Oe.cut(),R.none())})])})],behaviours:lt([ln.config({}),Kt.config({mode:"special",onEnter:j,onSpace:j,onEscape:U}),En("input-wrapper-events",[We(Bd(),ge=>{yt([ce,ke],Oe=>{const Je=Ce.fromDom(Oe.get(ge).element.dom);R1(Je)&&Eh(Je)})})])])});return{dom:{tag:"div",classes:["tox-number-input"]},components:[ce.asSpec(),pe.asSpec(),ke.asSpec()],behaviours:lt([ln.config({}),Kt.config({mode:"flow",focusInside:b.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:ge=>R1(ge.element)?R.none():(xi(ge.element),R.some(!0))})])}},uj="Font sizes",$R="Font size {0}",s5="12pt",dj={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},mj={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},fj=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},gj=(t,s)=>/[0-9.]+px$/.test(t)?fj(parseInt(t,10)*72/96,s||0)+"pt":Ct(mj,t).getOr(t),hj=t=>Ct(dj,t).getOr(""),r5=t=>{const s=()=>{let T=R.none();const D=E.data,B=t.queryCommandValue("FontSize");if(B)for(let L=3;T.isNone()&&L>=0;L--){const U=gj(B,L),j=hj(U);T=on(D,X=>X.format===B||X.format===U||X.format===j)}return{matchOpt:T,size:B}},a=T=>D=>D.exists(B=>B.format===T),c=()=>{const{matchOpt:T}=s();return T},d=ae(R.none),h=T=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,T.format)})},v=T=>{const{matchOpt:D,size:B}=s(),L=D.fold(ae(B),U=>U.title);qt(T,Dl,{text:L}),tz(t,{value:L})},E=DR(t,"font_size_formats",py.Space);return{tooltip:Bb(t,$R,s5),text:R.some(s5),icon:R.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:c,onAction:h,updateText:v,dataset:E,shouldHide:!1,isInvalid:An}},a5=(t,s)=>hy(t,s,r5(t),$R,"FontSizeTextUpdate"),pj=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},bj=16,i5=t=>t>=0,vj=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:c=>qt(c,Dl,{text:s()}),onAction:(c,d)=>t.execCommand("FontSize",!1,c,{skip_focus:!d}),getNewValue:(c,d)=>{Z_(c,["unsupportedLength","empty"]);const h=s(),v=Z_(c,["unsupportedLength","empty"]).or(Z_(h,["unsupportedLength","empty"])),E=v.map(U=>U.value).getOr(bj),T=kN(t),D=v.map(U=>U.unit).filter(U=>U!=="").getOr(T),B=d(E,pj(D).step),L=`${i5(B)?B:E}${D}`;return L!==h&&nz(t,{value:L}),L}}},c5=(t,s)=>lj(t,s,vj(t)),l5=(t,s)=>{const a=Ep(t,s,r5(t));t.ui.registry.addNestedMenuItem("fontsize",{text:uj,onSetup:Ai(t),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},yj="Formats",u5="Format {0}",d5=(t,s)=>{const a="Paragraph",c=v=>()=>t.formatter.match(v),d=v=>()=>{const E=t.formatter.get(v);return E!==void 0?R.some({tag:E.length>0&&(E[0].inline||E[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(v))}):R.none()},h=v=>{const E=L=>g_(L)?$e(L.items,E):AF(L)?[{title:L.title,format:L.format}]:[],T=$e(RF(t),E),B=U_(t,ae(T)).fold(ae(a),L=>L.title);qt(v,Dl,{text:B}),QH(t,{value:B})};return{tooltip:Bb(t,u5,a),text:R.some(a),icon:R.none(),isSelectedFor:c,getCurrentValue:R.none,getPreviewFor:d,onAction:KB(t),updateText:h,shouldHide:SN(t),isInvalid:v=>!t.formatter.canApply(v.format),dataset:s}},by=(t,s)=>{const a={type:"advanced",...s.styles};return hy(t,s,d5(t,a),u5,"StylesTextUpdate")},wj=(t,s)=>{const a={type:"advanced",...s.styles},c=Ep(t,s,d5(t,a));t.ui.registry.addNestedMenuItem("styles",{text:yj,onSetup:Ai(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},Cj=ae([Ke("toggleClass"),Ke("fetch"),su("onExecute"),_e("getHotspot",R.some),_e("getAnchorOverrides",ae({})),Zm(),su("onItemExecute"),po("lazySink"),Ke("dom"),Wn("onOpen"),hr("splitDropdownBehaviours",[js,Kt,ln]),_e("matchWidth",!1),_e("useMinWidth",!1),_e("eventOrder",{}),po("role")].concat(MD())),Sj=ka({factory:Xr,schema:[Ke("dom")],name:"arrow",defaults:()=>({buttonBehaviours:lt([ln.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(Id)},buttonBehaviours:lt([kn.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),xj=ka({factory:Xr,schema:[Ke("dom")],name:"button",defaults:()=>({buttonBehaviours:lt([ln.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),Ej=ae([Sj,xj,Ti({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Ke("text")],name:"aria-descriptor"}),El({schema:[E1()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(c=>{t.onItemExecute(c,s,a)})}})}),g$()]),Tj=(t,s,a,c)=>{const d=B=>{Bn.getCurrent(B).each(L=>{ao.highlightFirst(L),Kt.focusIn(L)})},h=B=>{DD(t,ut,B,c,d,Oi.HighlightMenuAndItem).get(Q)},v=B=>(h(B),R.some(!0)),E=B=>{const L=Qd(B,t,"button");return Id(L),R.some(!0)},T={...zo([Bo((B,L)=>{$o(B,t,"aria-descriptor").each(j=>{const X=Rt("aria");Et(j.element,"id",X),Et(B.element,"aria-describedby",X)})})]),...sm(R.some(h))},D={repositionMenus:B=>{kn.isOn(B)&&v$(B)}};return{uid:t.uid,dom:t.dom,components:s,apis:D,eventOrder:{...t.eventOrder,[Ki()]:["disabling","toggling","alloy.base.behaviour"]},events:T,behaviours:Qs(t.splitDropdownBehaviours,[js.config({others:{sandbox:B=>{const L=Qd(B,t,"arrow");return RD(t,B,{onOpen:()=>{kn.on(L),kn.on(B)},onClose:()=>{kn.off(L),kn.off(B)}})}}}),Kt.config({mode:"special",onSpace:E,onEnter:E,onDown:v}),ln.config({}),kn.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},j_=Oa({name:"SplitDropdown",configFields:Cj(),partFields:Ej(),factory:Tj,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),m5=t=>({isEnabled:()=>!sn.isDisabled(t),setEnabled:s=>sn.set(t,!s),setText:s=>qt(t,Dl,{text:s}),setIcon:s=>qt(t,yp,{icon:s})}),IR=t=>({setActive:s=>{kn.set(t,s)},isActive:()=>kn.isOn(t),isEnabled:()=>!sn.isDisabled(t),setEnabled:s=>sn.set(t,!s),setText:s=>qt(t,Dl,{text:s}),setIcon:s=>qt(t,yp,{icon:s})}),f5=(t,s)=>t.map(a=>({"aria-label":s.translate(a),title:s.translate(a)})).getOr({}),g5=Rt("focus-button"),G_=(t,s,a,c,d)=>{const h=s.map(E=>wo(RI(E,"tox-tbtn",d))),v=t.map(E=>wo(vp(E,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:f5(a,d)},components:xb([v.map(E=>E.asSpec()),h.map(E=>E.asSpec())]),eventOrder:{[fr()]:["focusing","alloy.base.behaviour",Db],[dc()]:[Db,"toolbar-group-button-events"]},buttonBehaviours:lt([Ol.toolbarButton(d.isDisabled),Br(),En(Db,[Bo((E,T)=>b3(E)),We(Dl,(E,T)=>{h.bind(D=>D.getOpt(E)).each(D=>{yn.set(D,[Fs(d.translate(T.event.text))])})}),We(yp,(E,T)=>{v.bind(D=>D.getOpt(E)).each(D=>{yn.set(D,[vp(T.event.icon,d.icons)])})}),We(fr(),(E,T)=>{T.event.prevent(),Ln(E,g5)})])].concat(c.getOr([])))}},h5=(t,s,a,c)=>{const d=s.shared,h=en(Q),v={toolbarButtonBehaviours:[],getApi:m5,onSetup:t.onSetup},E=[En("toolbar-group-button-events",[Cg(v,h),id(v,h)])];return xp.sketch({lazySink:d.getSink,fetch:()=>Za.nu(T=>{T(Xe(a(t.items),B_))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:G_(t.icon,t.text,t.tooltip,R.some(E),d.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:c}}}})},p5=(t,s,a)=>{var c;const d=en(Q),h=G_(t.icon,t.text,t.tooltip,R.none(),a);return Xr.sketch({dom:h.dom,components:h.components,eventOrder:o_,buttonBehaviours:{...lt([En("toolbar-button-events",[V9({onAction:t.onAction,getApi:s.getApi}),Cg(s,d),id(s,d)]),Ol.toolbarButton(()=>!t.enabled||a.isDisabled()),Br()].concat(s.toolbarButtonBehaviours)),[Db]:(c=h.buttonBehaviours)===null||c===void 0?void 0:c[Db]}})},_j=(t,s)=>b5(t,s,[]),b5=(t,s,a)=>p5(t,{toolbarButtonBehaviours:a.length>0?[En("toolbarButtonWith",a)]:[],getApi:m5,onSetup:t.onSetup},s),kj=(t,s)=>v5(t,s,[]),v5=(t,s,a)=>p5(t,{toolbarButtonBehaviours:[yn.config({}),kn.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[En("toolbarToggleButtonWith",a)]:[]),getApi:IR,onSetup:t.onSetup},s),Oj=(t,s,a)=>c=>Za.nu(d=>s.fetch(d)).map(d=>R.from(MT(ko(xD(Rt("menu-value"),d,h=>{s.onItemAction(t(c),h)},s.columns,s.presets,am.CLOSE_ON_EXECUTE,s.select.getOr(An),a),{movement:OT(s.columns,s.presets),menuBehaviours:gS.unnamedEvents(s.columns!=="auto"?[]:[Bo((h,v)=>{fS(h,4,QE(s.presets)).each(({numRows:E,numColumns:T})=>{Kt.setGridSize(h,E,T)})})])})))),y5=(t,s)=>{const a=h=>({isEnabled:()=>!sn.isDisabled(h),setEnabled:v=>sn.set(h,!v),setIconFill:(v,E)=>{Ws(h.element,`svg path[class="${v}"], rect[class="${v}"]`).each(T=>{Et(T,"fill",E)})},setActive:v=>{Et(h.element,"aria-pressed",v),Ws(h.element,"span").each(E=>{h.getSystem().getByDom(E).each(T=>kn.set(T,v))})},isActive:()=>Ws(h.element,"span").exists(v=>h.getSystem().getByDom(v).exists(kn.isOn)),setText:v=>Ws(h.element,"span").each(E=>h.getSystem().getByDom(E).each(T=>qt(T,Dl,{text:v}))),setIcon:v=>Ws(h.element,"span").each(E=>h.getSystem().getByDom(E).each(T=>qt(T,yp,{icon:v}))),setTooltip:v=>{const E=s.providers.translate(v);Of(h.element,{"aria-label":E,title:E})}}),c=en(Q),d={getApi:a,onSetup:t.onSetup};return j_.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...f5(t.tooltip,s.providers)}},onExecute:h=>{const v=a(h);v.isEnabled()&&t.onAction(v)},onItemExecute:(h,v,E)=>{},splitDropdownBehaviours:lt([Ol.splitButton(s.providers.isDisabled),Br(),En("split-dropdown-events",[Bo((h,v)=>b3(h)),We(g5,ln.focus),Cg(d,c),id(d,c)]),AS.config({})]),eventOrder:{[dc()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:Oj(a,t,s.providers),parts:{menu:V0(!1,t.columns,t.presets)},components:[j_.parts.button(G_(t.icon,t.text,R.none(),R.some([kn.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),s.providers)),j_.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:bN("chevron-down",s.providers.icons)},buttonBehaviours:lt([Ol.splitButton(s.providers.isDisabled),Br(),HE()])}),j_.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},Aj=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],r2=(t,s)=>(a,c,d)=>{const h=t(a).mapError(v=>Fa(v)).getOrDie();return s(h,c,d)},Dj={button:r2(mB,(t,s)=>_j(t,s.shared.providers)),togglebutton:r2(G4,(t,s)=>kj(t,s.shared.providers)),menubutton:r2(uR,(t,s)=>zS(t,"tox-tbtn",s,R.none(),!1)),splitbutton:r2(KW,(t,s)=>y5(t,s.shared)),grouptoolbarbutton:r2(GW,(t,s,a)=>{const c=a.ui.registry.getAll().buttons,d=v=>Y_(a,{buttons:c,toolbar:v,allowToolbarGroups:!1},s,R.none()),h={[Oh]:s.shared.header.isPositionedAtTop()?jc.TopToBottom:jc.BottomToTop};switch(H0(a)){case fu.floating:return h5(t,s,d,h);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},Rj=(t,s,a)=>Ct(Dj,t.type).fold(()=>(console.error("skipping button defined by",t),R.none()),c=>R.some(c(t,s,a))),a2={styles:by,fontsize:a5,fontsizeinput:c5,fontfamily:t5,blocks:tj,align:JZ},Mj=t=>{const s=Xe(Aj,a=>{const c=vo(a.items,d=>oo(t,d)||oo(a2,d));return{name:a.name,items:c}});return vo(s,a=>a.items.length>0)},q_=t=>{const s=t.split("|");return Xe(s,a=>({items:a.trim().split(" ")}))},K_=t=>ze(t,s=>oo(s,"name")&&oo(s,"items")),w5=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?Mj(a):z(s)?q_(s):K_(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},Pj=(t,s,a,c,d,h)=>Ct(s,a.toLowerCase()).orThunk(()=>h.bind(v=>tr(v,E=>Ct(s,E+a.toLowerCase())))).fold(()=>Ct(a2,a.toLowerCase()).map(v=>v(t,d)),v=>v.type==="grouptoolbarbutton"&&!c?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),R.none()):Rj(v,d,t)),Y_=(t,s,a,c)=>{const d=w5(s),h=Xe(d,v=>{const E=$e(v.items,T=>T.trim().length===0?[]:Pj(t,s.buttons,T,s.allowToolbarGroups,a,c).toArray());return{title:R.from(t.translate(v.name)),items:E}});return vo(h,v=>v.items.length>0)},C5=(t,s,a,c)=>{const d=s.mainUi.outerContainer,h=a.toolbar,v=a.buttons;if(ze(h,z)){const E=h.map(T=>{const D={toolbar:T,buttons:v,allowToolbarGroups:a.allowToolbarGroups};return Y_(t,D,c,R.none())});Go.setToolbars(d,E)}else Go.setToolbar(d,Y_(t,a,c,R.none()))},S5=ml(),Nj=S5.os.isiOS()&&S5.os.version.major<=12,X_=(t,s)=>{const{uiMotherships:a}=s,c=t.dom;let d=t.getWin();const h=t.getDoc().documentElement,v=en(co(d.innerWidth,d.innerHeight)),E=en(co(h.offsetWidth,h.offsetHeight)),T=()=>{const U=v.get();(U.left!==d.innerWidth||U.top!==d.innerHeight)&&(v.set(co(d.innerWidth,d.innerHeight)),wT(t))},D=()=>{const U=t.getDoc().documentElement,j=E.get();(j.left!==U.offsetWidth||j.top!==U.offsetHeight)&&(E.set(co(U.offsetWidth,U.offsetHeight)),wT(t))},B=U=>{XH(t,U)};c.bind(d,"resize",T),c.bind(d,"scroll",B);const L=Xv(Ce.fromDom(t.getBody()),"load",D);t.on("hide",()=>{yt(a,U=>{vn(U.element,"display","none")})}),t.on("show",()=>{yt(a,U=>{to(U.element,"display")})}),t.on("NodeChange",D),t.on("remove",()=>{L.unbind(),c.unbind(d,"resize",T),c.unbind(d,"scroll",B),d=null})},x5=(t,s,a)=>{vg(t)&&Kd(a.mainUi.mothership.element,a.popupUi.mothership),Yr(s,a.dialogUi.mothership)};var E5=Object.freeze({__proto__:null,render:(t,s,a,c,d)=>{const{mainUi:h,uiMotherships:v}=s,E=en(0),T=h.outerContainer;qZ(t);const D=Ce.fromDom(d.targetNode),B=ot(Be(D));Kd(D,h.mothership),x5(t,B,s),t.on("SkinLoaded",()=>{Go.setSidebar(T,a.sidebar,MN(t)),C5(t,s,a,c),E.set(t.getWin().innerWidth),Go.setMenubar(T,z_(t,a)),Go.setViews(T,a.views),X_(t,s)});const L=Go.getSocket(T).getOrDie("Could not find expected socket element");if(Nj){ti(L.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const ce=R9(()=>{t.dispatch("ScrollContent")},20),ke=Va(L.element,"scroll",ce.throttle);t.on("remove",ke.unbind)}_B(t,s),t.addCommand("ToggleSidebar",(ce,ke)=>{Go.toggleSidebar(T,ke),t.dispatch("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",()=>{var ce;return(ce=Go.whichSidebar(T))!==null&&ce!==void 0?ce:""}),t.addCommand("ToggleView",(ce,ke)=>{if(Go.toggleView(T,ke)){const pe=T.element;h.mothership.broadcastOn([cu()],{target:pe}),yt(v,ge=>{ge.broadcastOn([cu()],{target:pe})}),me(Go.whichView(T))&&(t.focus(),t.nodeChanged(),Go.refreshToolbar(T))}}),t.addQueryValueHandler("ToggleView",()=>{var ce;return(ce=Go.whichView(T))!==null&&ce!==void 0?ce:""});const U=H0(t),j=()=>{Go.refreshToolbar(s.mainUi.outerContainer)};(U===fu.sliding||U===fu.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const ce=t.getWin().innerWidth;ce!==E.get()&&(j(),E.set(ce))});const X={setEnabled:ce=>{hT(s,!ce)},isEnabled:()=>!sn.isDisabled(T)};return{iframeContainer:L.element.dom,editorContainer:T.element.dom,api:X}}});const J_=t=>/^[0-9\.]+(|px)$/i.test(""+t)?R.some(parseInt(""+t,10)):R.none(),FR=t=>Zt(t)?t+"px":t,i2=(t,s,a)=>{const c=s.filter(h=>t<h),d=a.filter(h=>t>h);return c.or(d).getOr(t)},$j=t=>{const s=g4(t),a=b4(t),c=v4(t);return J_(s).map(d=>i2(d,a,c))},Ij=t=>$j(t).getOr(g4(t)),T5=t=>{const s=h4(t),a=p4(t),c=zE(t);return J_(s).map(d=>i2(d,a,c))},Fj=t=>T5(t).getOr(h4(t)),{ToolbarLocation:LR,ToolbarMode:vy}=oH,Lj=40,Hj=(t,s,a,c,d)=>{const{mainUi:h,uiMotherships:v}=a,E=F0.DOM,T=sp(t),D=cS(t),B=zE(t).or(T5(t)),L=c.shared.header,U=L.isPositionedAtTop,j=H0(t),X=j===vy.sliding||j===vy.floating,ce=en(!1),ke=()=>ce.get()&&!t.removed,pe=Xt=>X?Xt.fold(ae(0),Kn=>Kn.components().length>1?fs(Kn.components()[1].element):0):0,ge=Xt=>{switch(rS(t)){case LR.auto:const Kn=Go.getToolbar(h.outerContainer),ht=pe(Kn),Bt=fs(Xt.element)-ht,fn=xs(s);if(fn.y>Bt)return"top";{const nn=Nc(s),Cn=Math.max(nn.dom.scrollHeight,fs(nn));return fn.bottom<Cn-Bt||Wr().bottom<fn.bottom-Bt?"bottom":"top"}case LR.bottom:return"bottom";case LR.top:default:return"top"}},Oe=Xt=>{d.on(Kn=>{er.setModes(Kn,[Xt]),L.setDockingMode(Xt);const ht=U()?jc.TopToBottom:jc.BottomToTop;Et(Kn.element,Oh,ht)})},Je=()=>{d.on(Xt=>{const Kn=B.getOrThunk(()=>{const ht=J_(Ps(Rs(),"margin-left")).getOr(0);return lr(Rs())-cc(s).left+ht});vn(Xt.element,"max-width",Kn+"px")})},Ve=Xt=>{d.on(Kn=>{const ht=Go.getToolbar(h.outerContainer),Bt=pe(ht),fn=xs(s),{top:$n,left:nn}=Ie(t,h.outerContainer.element).fold(()=>({top:U()?Math.max(fn.y-fs(Kn.element)+Bt,0):fn.bottom,left:fn.x}),io=>{var ui;const ls=xs(io),Ac=(ui=io.dom.scrollTop)!==null&&ui!==void 0?ui:0,bd=So(io,Rs()),Pp=bd?Math.max(fn.y-fs(Kn.element)+Bt,0):fn.y-ls.y+Ac-fs(Kn.element)+Bt;return{top:U()?Pp:fn.bottom,left:bd?fn.x:fn.x-ls.x}}),Cn={position:"absolute",left:Math.round(nn)+"px",top:Math.round($n)+"px"},Fo=Xt.map(io=>{const ui=Ia(),ls=150,Ac=window.innerWidth-(nn-ui.left);return{width:Math.max(Math.min(io,Ac),ls)+"px"}}).getOr({});ti(h.outerContainer.element,{...Cn,...Fo})})},Ie=(Xt,Kn)=>vg(Xt)?Pb(Kn):R.none(),ct=()=>{yt(v,Xt=>{Xt.broadcastOn([cg()],{})})},gt=()=>{if(T)return R.none();if(cc(h.outerContainer.element).left+$a(h.outerContainer.element)>=window.innerWidth-Lj||Xs(h.outerContainer.element,"width").isSome()){vn(h.outerContainer.element,"position","absolute"),vn(h.outerContainer.element,"left","0px"),to(h.outerContainer.element,"width");const Kn=$a(h.outerContainer.element);return R.some(Kn)}else return R.none()},Tn=Xt=>{if(!ke())return;T||Je();const Kn=T?R.none():gt();X&&Go.refreshToolbar(h.outerContainer),T||Ve(Kn),D&&d.on(Xt),ct()},$t=()=>T||!D||!ke()?!1:d.get().exists(Xt=>{const Kn=L.getDockingMode(),ht=ge(Xt);return ht!==Kn?(Oe(ht),!0):!1});return{isVisible:ke,isPositionedAtTop:U,show:()=>{ce.set(!0),vn(h.outerContainer.element,"display","flex"),E.addClass(t.getBody(),"mce-edit-focus"),yt(v,Xt=>{to(Xt.element,"display")}),$t(),vg(t)?Tn(Xt=>er.isDocked(Xt)?er.reset(Xt):er.refresh(Xt)):Tn(er.refresh)},hide:()=>{ce.set(!1),vn(h.outerContainer.element,"display","none"),E.removeClass(t.getBody(),"mce-edit-focus"),yt(v,Xt=>{vn(Xt.element,"display","none")})},update:Tn,updateMode:()=>{$t()&&Tn(er.reset)},repositionPopups:ct}},_5=(t,s)=>{const a=xs(t);return{pos:s?a.y:a.bottom,bounds:a}},k5=(t,s,a,c)=>{const d=en(_5(s,a.isPositionedAtTop())),h=D=>{const{pos:B,bounds:L}=_5(s,a.isPositionedAtTop()),{pos:U,bounds:j}=d.get(),X=L.height!==j.height||L.width!==j.width;d.set({pos:B,bounds:L}),X&&wT(t,D),a.isVisible()&&(U!==B?a.update(er.reset):X&&(a.updateMode(),a.repositionPopups()))};c||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(er.reset)),t.on("NodeChange keydown",D=>{requestAnimationFrame(()=>h(D))});let v=0;const E=QT(()=>a.update(er.refresh),33);t.on("ScrollWindow",()=>{const D=Ia().left;D!==v&&(v=D,E.throttle()),a.updateMode()}),vg(t)&&t.on("ElementScroll",D=>{a.update(er.refresh)});const T=jd();T.set(Xv(Ce.fromDom(t.getBody()),"load",D=>h(D.raw))),t.on("remove",()=>{T.clear()})};var O5=Object.freeze({__proto__:null,render:(t,s,a,c,d)=>{const{mainUi:h}=s,v=Rn(),E=Ce.fromDom(d.targetNode),T=Hj(t,E,s,c,v),D=TN(t);KZ(t);const B=()=>{if(v.isSet()){T.show();return}v.set(Go.getHeader(h.outerContainer).getOrDie());const U=k4(t);vg(t)?(Kd(E,h.mothership),Kd(E,s.popupUi.mothership)):Yr(U,h.mothership),Yr(U,s.dialogUi.mothership),C5(t,s,a,c),Go.setMenubar(h.outerContainer,z_(t,a)),T.show(),k5(t,E,T,D),t.nodeChanged()};t.on("show",B),t.on("hide",T.hide),D||(t.on("focus",B),t.on("blur",T.hide)),t.on("init",()=>{(t.hasFocus()||D)&&B()}),_B(t,s);const L={show:B,hide:T.hide,setEnabled:U=>{hT(s,!U)},isEnabled:()=>!sn.isDisabled(h.outerContainer)};return{editorContainer:h.outerContainer.element.dom,api:L}}});const zj=()=>{const t=Rn(),s=Rn(),a=Rn();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const h=t.get().map(E=>E.mothership),v=s.get().map(E=>E.mothership);return h.fold(()=>v.toArray(),E=>v.fold(()=>[E],T=>So(E.element,T.element)?[E]:[E,T]))},lazyGetInOuterOrDie:(h,v)=>()=>a.get().bind(E=>v(E.outerContainer)).getOrDie(`Could not find ${h} element in OuterContainer`)}},Vj="contexttoolbar-show",A5="contexttoolbar-hide",Uj=t=>({hide:()=>Ln(t,m1()),getValue:()=>St.getValue(t)}),D5=(t,s)=>We(p3,(a,c)=>{const d=t.get(a),h=Uj(d);s.onAction(h,c.event.buttonApi)}),c2=(t,s,a)=>{const{primary:c,...d}=s.original,h=No(mB({...d,type:"button",onAction:Q}));return b5(h,a,[D5(t,s)])},R5=(t,s,a)=>{const{primary:c,...d}=s.original,h=No(G4({...d,type:"togglebutton",onAction:Q}));return v5(h,a,[D5(t,s)])},Wj=t=>t.type==="contextformtogglebutton",Zj=(t,s,a)=>Wj(s)?R5(t,s,a):c2(t,s,a),M5=(t,s,a)=>{const c=Xe(s,v=>wo(Zj(t,v,a)));return{asSpecs:()=>Xe(c,v=>v.asSpec()),findPrimary:v=>tr(s,(E,T)=>E.primary?R.from(c[T]).bind(D=>D.getOpt(v)).filter(Te(sn.isDisabled)):R.none())}},Q_=(t,s)=>{const a=t.label.fold(()=>({}),h=>({"aria-label":h})),c=wo(yb.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:lt([Kt.config({mode:"special",onEnter:h=>d.findPrimary(h).map(v=>(Id(v),!0)),onLeft:(h,v)=>(v.cut(),R.none()),onRight:(h,v)=>(v.cut(),R.none())})])})),d=M5(c,t.commands,s);return[{title:R.none(),items:[c.asSpec()]},{title:R.none(),items:d.asSpecs()}]},P5={renderContextForm:(t,s,a)=>$_({type:t,uid:Rt("context-toolbar"),initGroups:Q_(s,a),onEscape:R.none,cyclicKeying:!0,providers:a}),buildInitGroups:Q_},N5=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,yy=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=Lg(Ce.fromDom(t.startContainer),t.startOffset).element;return(sa(a)?ra(a):R.some(a)).filter(yo).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},wy=t=>{const s=t.selection.getRng(),a=yy(s);if(t.inline){const c=Ia();return hs(c.left+a.left,c.top+a.top,a.width,a.height)}else{const c=hi(Ce.fromDom(t.getBody()));return hs(c.x+a.left,c.y+a.top,a.width,a.height)}},HR=(t,s)=>s.filter(a=>Xn(a)&&Ou(a)).map(hi).getOrThunk(()=>wy(t)),B5=(t,s,a)=>{const c=Math.max(t.x+a,s.x),d=Math.min(t.right-a,s.right);return{x:c,width:d-c}},$5=(t,s,a,c,d,h)=>{const v=Ce.fromDom(t.getContainer()),E=Ws(v,".tox-editor-header").getOr(v),T=xs(E),D=T.y>=s.bottom,B=c&&!D;if(t.inline&&B)return{y:Math.max(T.bottom+h,a.y),bottom:a.bottom};if(t.inline&&!B)return{y:a.y,bottom:Math.min(T.y-h,a.bottom)};const L=d==="line"?xs(v):s;return B?{y:Math.max(T.bottom+h,a.y),bottom:Math.min(L.bottom-h,a.bottom)}:{y:Math.max(L.y+h,a.y),bottom:Math.min(T.y-h,a.bottom)}},I5=(t,s,a,c=0)=>{const d=Zg(window),h=xs(Ce.fromDom(t.getContentAreaContainer())),v=qE(t)||XE(t)||iS(t),{x:E,width:T}=B5(h,d,c);if(t.inline&&!v)return hs(E,d.y,T,d.height);{const D=s.header.isPositionedAtTop(),{y:B,bottom:L}=$5(t,h,d,D,a,c);return hs(E,B,T,L-B)}},l2=12,F5={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},L5={maxHeightFunction:kh(),maxWidthFunction:vR()},Gj=(t,s)=>{const a=t.selection.getRng(),c=Lg(Ce.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&So(c.element,s)},qj=(t,s,a)=>{const c=Xs(t,"position");vn(t,"position",s);const d=a(t);return c.each(h=>vn(t,"position",h)),d},H5=t=>t==="node",z5=(t,s,a,c,d)=>{const h=wy(t),v=c.lastElement().exists(E=>So(a,E));if(Gj(t,a))return v?H3:fd;if(v)return qj(s,c.getMode(),()=>N5(h,xs(s),-20)&&!c.isReposition()?zU:H3);{const E=c.getMode()==="fixed"?d.y+Ia().top:d.y,T=fs(s)+l2;return E+T<=h.y?fd:cy}},ek=(t,s,a,c)=>{const d=T=>(D,B,L,U,j)=>{const X=z5(t,U,T,a,j),ce={...D,y:j.y,height:j.height};return{...X(ce,B,L,U,j),alwaysFit:!0}},h=T=>H5(c)?[d(T)]:[];return s?{onLtr:T=>[Er,xr,ma,ai,Ta,Ha].concat(h(T)),onRtl:T=>[Er,ma,xr,Ta,ai,Ha].concat(h(T))}:{onLtr:T=>[Ha,Er,ai,xr,Ta,ma].concat(h(T)),onRtl:T=>[Ha,Er,Ta,ma,ai,xr].concat(h(T))}},V5=(t,s,a,c)=>s==="line"?{bubble:Qu(l2,0,F5),layouts:{onLtr:()=>[Iw],onRtl:()=>[A1]},overrides:L5}:{bubble:Qu(0,l2,F5,1/l2),layouts:ek(t,a,c,s),overrides:L5},tk=(t,s)=>{const a=vo(s,h=>h.predicate(t.dom)),{pass:c,fail:d}=di(a,h=>h.type==="contexttoolbar");return{contextToolbars:c,contextForms:d}},zR=t=>{if(t.length<=1)return t;{const s=h=>qs(t,v=>v.position===h),a=h=>vo(t,v=>v.position===h),c=s("selection"),d=s("node");if(c||d)if(d&&c){const h=a("node"),v=Xe(a("selection"),E=>({...E,position:"node"}));return h.concat(v)}else return a(c?"selection":"node");else return a("line")}},Kj=t=>{if(t.length<=1)return t;{const s=c=>on(t,d=>d.position===c);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(c=>c.position).fold(()=>[],c=>vo(t,d=>d.position===c))}},U5=(t,s,a)=>{const c=tk(t,s);if(c.contextForms.length>0)return R.some({elem:t,toolbars:[c.contextForms[0]]});{const d=tk(t,a);if(d.contextForms.length>0)return R.some({elem:t,toolbars:[d.contextForms[0]]});if(c.contextToolbars.length>0||d.contextToolbars.length>0){const h=zR(c.contextToolbars.concat(d.contextToolbars));return R.some({elem:t,toolbars:h})}else return R.none()}},Yj=(t,s,a)=>t(s)?R.none():I2(s,c=>{if(yo(c)){const{contextToolbars:d,contextForms:h}=tk(c,a.inNodeScope),v=h.length>0?h:Kj(d);return v.length>0?R.some({elem:c,toolbars:v}):R.none()}else return R.none()},t),Xj=(t,s)=>{const a=Ce.fromDom(s.getBody()),c=v=>So(v,a),d=v=>!c(v)&&!Hr(a,v),h=Ce.fromDom(s.selection.getNode());return d(h)?R.none():U5(h,t.inNodeScope,t.inEditorScope).orThunk(()=>Yj(c,h,t))},nk=(t,s)=>{const a={},c=[],d=[],h={},v={},E=(B,L)=>{const U=No(gT(L));a[B]=U,U.launch.map(j=>{h["form:"+B]={...L.launch,type:j.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(U)}}}),U.scope==="editor"?d.push(U):c.push(U),v[B]=U},T=(B,L)=>{gB(L).each(U=>{L.scope==="editor"?d.push(U):c.push(U),v[B]=U})},D=os(t);return yt(D,B=>{const L=t[B];L.type==="contextform"?E(B,L):L.type==="contexttoolbar"&&T(B,L)}),{forms:a,inNodeScope:c,inEditorScope:d,lookupTable:v,formNavigators:h}},VR=Rt("forward-slide"),W5=Rt("backward-slide"),UR=Rt("change-slide-event"),WR="tox-pop--resizing",Jj=t=>{const s=en([]);return _s.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:a=>{s.set([]),_s.getContent(a).each(c=>{to(c.element,"visibility")}),bs(a.element,WR),to(a.element,"width")},inlineBehaviours:lt([En("context-toolbar-events",[Wu(Wf(),(a,c)=>{c.event.raw.propertyName==="width"&&(bs(a.element,WR),to(a.element,"width"))}),We(UR,(a,c)=>{const d=a.element;to(d,"width");const h=lr(d);_s.setContent(a,c.event.contents),Us(d,WR);const v=lr(d);vn(d,"width",h+"px"),_s.getContent(a).each(E=>{c.event.focus.bind(T=>(xi(T),Cl(d))).orThunk(()=>(Kt.focusIn(E),Ju(Be(d))))}),setTimeout(()=>{vn(a.element,"width",v+"px")},0)}),We(VR,(a,c)=>{_s.getContent(a).each(d=>{s.set(s.get().concat([{bar:d,focus:Ju(Be(a.element))}]))}),qt(a,UR,{contents:c.event.forwardContents,focus:R.none()})}),We(W5,(a,c)=>{bm(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),qt(a,UR,{contents:fc(d.bar),focus:d.focus})})})]),Kt.config({mode:"special",onEscape:a=>bm(s.get()).fold(()=>t.onEscape(),c=>(Ln(a,W5),R.some(!0)))})]),lazySink:()=>xn.value(t.sink)})},ZR="tox-pop--transition",Z5=(t,s,a,c)=>{const d=c.backstage,h=d.shared,v=ml().deviceType.isTouch,E=Rn(),T=Rn(),D=Rn(),B=Ea(Jj({sink:a,onEscape:()=>(t.focus(),R.some(!0))})),L=()=>{const $t=D.get().getOr("node"),tn=H5($t)?1:0;return I5(t,h,$t,tn)},U=()=>!t.removed&&!(v()&&d.isContextMenuOpen()),j=$t=>Pa(Fi($t,E.get(),So),!0),X=()=>{if(U()){const $t=L(),tn=Pa(D.get(),"node")?HR(t,E.get()):wy(t);return $t.height<=0||!N5(tn,$t,.01)}else return!0},ce=()=>{E.clear(),T.clear(),D.clear(),_s.hide(B)},ke=()=>{if(_s.isOpen(B)){const $t=B.element;to($t,"display"),X()?vn($t,"display","none"):(T.set(0),_s.reposition(B))}},pe=$t=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[$t],behaviours:lt([Kt.config({mode:"acyclic"}),En("pop-dialog-wrap-events",[Bo(tn=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>Kt.focusIn(tn))}),Zu(tn=>{t.shortcuts.remove("ctrl+F9")})])])}),ge=gs(()=>nk(s,$t=>{const tn=Ve([$t]);qt(B,VR,{forwardContents:pe(tn)})})),Oe=($t,tn)=>Y_(t,{buttons:$t,toolbar:tn.items,allowToolbarGroups:!1},c.backstage,R.some(["form:"])),Je=($t,tn)=>P5.buildInitGroups($t,tn),Ve=$t=>{const{buttons:tn}=t.ui.registry.getAll(),un=ge(),bo={...tn,...un.formNavigators},Xt=H0(t)===fu.scrolling?fu.scrolling:fu.default,Kn=zt(Xe($t,ht=>ht.type==="contexttoolbar"?Oe(bo,ht):Je(ht,h.providers)));return $_({type:Xt,uid:Rt("context-toolbar"),initGroups:Kn,onEscape:R.none,cyclicKeying:!0,providers:h.providers})},Ie=($t,tn)=>{const un=$t==="node"?h.anchors.node(tn):h.anchors.cursor(),bo=V5(t,$t,v(),{lastElement:E.get,isReposition:()=>Pa(T.get(),0),getMode:()=>_a.getMode(a)});return ko(un,bo)},ct=($t,tn)=>{if(Tn.cancel(),!U())return;const un=Ve($t),bo=$t[0].position,Xt=Ie(bo,tn);D.set(bo),T.set(1);const Kn=B.element;to(Kn,"display"),j(tn)||(bs(Kn,ZR),_a.reset(a,B)),_s.showWithinBounds(B,pe(un),{anchor:Xt,transition:{classes:[ZR],mode:"placement"}},()=>R.some(L())),tn.fold(E.clear,E.set),X()&&vn(Kn,"display","none")};let gt=!1;const Tn=QT(()=>{if(!(!t.hasFocus()||t.removed||gt))if(gr(B.element,ZR))Tn.throttle();else{const $t=ge();Xj($t,t).fold(ce,tn=>{ct(tn.toolbars,R.some(tn.elem))})}},17);t.on("init",()=>{t.on("remove",ce),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",ke),t.on("click keyup focus SetContent",Tn.throttle),t.on(A5,ce),t.on(Vj,$t=>{const tn=ge();Ct(tn.lookupTable,$t.toolbarKey).each(un=>{ct([un],cn($t.target!==t,$t.target)),_s.getContent(B).each(Kt.focusIn)})}),t.on("focusout",$t=>{pb.setEditorTimeout(t,()=>{Cl(a.element).isNone()&&Cl(B.element).isNone()&&ce()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&ce()}),t.on("AfterProgressState",$t=>{$t.state?ce():t.hasFocus()&&Tn.throttle()}),t.on("dragstart",()=>{gt=!0}),t.on("dragend drop",()=>{gt=!1}),t.on("NodeChange",$t=>{Cl(B.element).fold(Tn.throttle,Q)})})},j5=t=>{yt([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:xc(t,a.cmd),onSetup:CT(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Ai(t),onAction:xc(t,"JustifyNone")})},G5=(t,s)=>{const a=()=>{const c=s.getOptions(t),d=s.getCurrent(t).map(s.hash),h=Rn();return Xe(c,v=>({type:"togglemenuitem",text:s.display(v),onSetup:E=>{const T=B=>{B&&(h.on(L=>L.setActive(!1)),h.set(E)),E.setActive(B)};T(Pa(d,s.hash(v)));const D=s.watcher(t,v,T);return()=>{h.clear(),D()}},onAction:()=>s.setCurrent(t,v)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:c=>c(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},Qj=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:BN,hash:s=>cj(s,["fixed","relative","empty"]).getOr(s),display:ut,watcher:(s,a,c)=>s.formatter.formatChanged("lineheight",c,!1,{value:a}).unbind,getCurrent:s=>R.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:Ai(t),onMenuSetup:Ai(t)}),q5=t=>R.from(VE(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:ae(a),hash:c=>Fe(c.customCode)?c.code:`${c.code}/${c.customCode}`,display:c=>c.title,watcher:(c,d,h)=>{var v;return c.formatter.formatChanged("lang",h,!1,{value:d.code,customValue:(v=d.customCode)!==null&&v!==void 0?v:null}).unbind},getCurrent:c=>{const d=Ce.fromDom(c.selection.getNode());return zf(d,h=>R.some(h).filter(yo).bind(v=>zr(v,"lang").map(T=>{const D=zr(v,"data-mce-lang").getOrUndefined();return{code:T,customCode:D,title:""}})))},setCurrent:(c,d)=>c.execCommand("Lang",!1,d),onToolbarSetup:c=>{const d=jd();return c.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",c.setActive,!0)),wS(d.clear,Ai(t)(c))},onMenuSetup:Ai(t)})),eG=t=>{G5(t,Qj(t)),q5(t).each(s=>G5(t,s))},tG=(t,s)=>{QZ(t,s),rj(t,s),wj(t,s),nj(t,s),l5(t,s)},nG=t=>cd(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),oG=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:nG(t),onAction:xc(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Ai(t),onAction:xc(t,"indent")})},sG=t=>{oG(t)},ok=(t,s)=>a=>{a.setActive(s.get());const c=d=>{s.set(d.state),a.setActive(d.state)};return t.on("PastePlainTextToggle",c),wS(()=>t.off("PastePlainTextToggle",c),Ai(t)(a))},rG=t=>{const s=en(RN(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:ok(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:ok(t,s)})},jR=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},GR=t=>{_g.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:CT(t,s.name),onAction:jR(t,s.name)})});for(let s=1;s<=6;s++){const a="h"+s;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:CT(t,a),onAction:jR(t,a)})}},K5=t=>{_g.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:xc(t,s.action)})}),_g.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Ai(t),onAction:xc(t,s.action)})})},Y5=t=>{_g.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:xc(t,s.action),onSetup:CT(t,s.name)})})},aG=t=>{GR(t),K5(t),Y5(t)},iG=t=>{_g.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:xc(t,s.action)})}),_g.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:Ai(t),onAction:xc(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Ai(t),onAction:jR(t,"code")})},cG=t=>{aG(t),iG(t)},sk=(t,s)=>cd(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),lG=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:sk(t,"hasUndo"),onAction:xc(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:sk(t,"hasRedo"),onAction:xc(t,"redo")})},qR=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:sk(t,"hasUndo"),onAction:xc(t,"undo")}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:sk(t,"hasRedo"),onAction:xc(t,"redo")})},uG=t=>{lG(t),qR(t)},X5=t=>cd(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),dG=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:X5(t),onAction:xc(t,"mceToggleVisualAid")})},mG=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:xc(t,"mceToggleVisualAid")})},KR=t=>{mG(t),dG(t)},fG=(t,s)=>{j5(t),cG(t),tG(t,s),uG(t),i$(t),KR(t),sG(t),eG(t),rG(t)},J5=t=>z(t)?t.split(/[ ,]/):t,Q5=t=>s=>s.options.get(t),gG=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:z(a)||ze(a,z)?{value:J5(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},rk=Q5("contextmenu_never_use_native"),hG=Q5("contextmenu_avoid_overlap"),pG=t=>e6(t).length===0,e6=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:vo(a,c=>oo(s,c))},u2=(t,s)=>({type:"makeshift",x:t,y:s}),bG=(t,s,a)=>u2(t.x+s,t.y+a),YR=t=>t.type==="longpress"||t.type.indexOf("touch")===0,vG=t=>{if(YR(t)){const s=t.touches[0];return u2(s.pageX,s.pageY)}else return u2(t.pageX,t.pageY)},yG=t=>{if(YR(t)){const s=t.touches[0];return u2(s.clientX,s.clientY)}else return u2(t.clientX,t.clientY)},wG=(t,s)=>{const a=F0.DOM.getPos(t);return bG(s,a.x,a.y)},CG=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?vG(s):wG(t.getContentAreaContainer(),yG(s)):t6(t),t6=t=>({type:"selection",root:Ce.fromDom(t.selection.getNode())}),SG=t=>({type:"node",node:R.some(Ce.fromDom(t.selection.getNode())),root:Ce.fromDom(t.getBody())}),n6=(t,s,a)=>{switch(a){case"node":return SG(t);case"point":return CG(t,s);case"selection":return t6(t)}},xG=(t,s,a,c,d,h)=>{const v=a(),E=n6(t,s,h);ry(v,am.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!1,search:R.none()}).map(T=>{s.preventDefault(),_s.showMenuAt(d,{anchor:E},{menu:{markers:rf("normal")},data:T})})},o6={onLtr:()=>[Er,xr,ma,ai,Ta,Ha,fd,cy,KS,qS,Mb,GS],onRtl:()=>[Er,ma,xr,Ta,ai,Ha,fd,cy,Mb,GS,KS,qS]},EG=12,s6={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},TG=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const c=s.touches[0],d=a.getRng();return mC(t.getWin(),Kr.domRange(d)).exists(v=>v.left<=c.clientX&&v.right>=c.clientX&&v.top<=c.clientY&&v.bottom>=c.clientY)}},_G=t=>{const s=t.selection.getRng(),a=()=>{pb.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),h()};t.once("touchend",a);const c=v=>{v.preventDefault(),v.stopImmediatePropagation()};t.on("mousedown",c,!0);const d=()=>h();t.once("longpresscancel",d);const h=()=>{t.off("touchend",a),t.off("longpresscancel",d),t.off("mousedown",c)}},kG=(t,s,a)=>{const c=n6(t,s,a);return{bubble:Qu(0,a==="point"?EG:0,s6),layouts:o6,overrides:{maxWidthFunction:vR(),maxHeightFunction:kh()},...c}},$b=(t,s,a,c,d,h,v)=>{const E=kG(t,s,h);ry(a,am.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!0,search:R.none()}).map(T=>{s.preventDefault();const D=v?Oi.HighlightMenuAndItem:Oi.HighlightNone;_s.showMenuWithinBounds(d,{anchor:E},{menu:{markers:rf("normal"),highlightOnOpen:D},data:T,type:"horizontal"},()=>R.some(I5(t,c.shared,h==="node"?"node":"selection"))),t.dispatch(A5)})},r6=(t,s,a,c,d,h)=>{const v=ml(),E=v.os.isiOS(),T=v.os.isMacOS(),D=v.os.isAndroid(),B=v.deviceType.isTouch(),L=()=>!(D||E||T&&B),U=()=>{const j=a();$b(t,s,j,c,d,h,L())};if((T||E)&&h!=="node"){const j=()=>{_G(t),U()};TG(t,s)?j():(t.once("selectionchange",j),t.once("touchend",()=>t.off("selectionchange",j)))}else U()},a6=t=>z(t)?t==="|":t.type==="separator",XR={type:"separator"},i6=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(z(t))return t;switch(t.type){case"separator":return XR;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const c=t.getSubmenuItems();return z(c)?c:Xe(c,i6)}};default:const a=t;return{type:"menuitem",...s(a),onAction:Ge(a.onAction)}}},c6=(t,s)=>{if(s.length===0)return t;const c=bm(t).filter(d=>!a6(d)).fold(()=>[],d=>[XR]);return t.concat(c).concat(s).concat([XR])},l6=(t,s,a)=>{const c=To(s,(d,h)=>Ct(t,h.toLowerCase()).map(v=>{const E=v.update(a);if(z(E)&&Na(il(E)))return c6(d,E.split(" "));if(ie(E)&&E.length>0){const T=Xe(E,i6);return c6(d,T)}else return d}).getOrThunk(()=>d.concat([h])),[]);return c.length>0&&a6(c[c.length-1])&&c.pop(),c},OG=(t,s)=>s.ctrlKey&&!rk(t),AG=t=>t.type==="longpress"||oo(t,"touches"),u6=(t,s)=>!AG(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),d6=(t,s)=>u6(t,s)?t.selection.getStart(!0):s.target,DG=(t,s)=>{const a=hG(t),c=u6(t,s)?"selection":"point";if(Na(a)){const d=d6(t,s);return ES(Ce.fromDom(d),a)?"node":c}else return c},RG=(t,s,a)=>{const d=ml().deviceType.isTouch,h=Ea(_s.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:lt([En("dismissContextMenu",[We($m(),(T,D)=>{Hn.close(T),t.focus()})])])})),v=()=>_s.hide(h),E=T=>{if(rk(t)&&T.preventDefault(),OG(t,T)||pG(t))return;const D=DG(t,T),B=()=>{const U=d6(t,T),j=t.ui.registry.getAll(),X=e6(t);return l6(j.contextMenus,X,U)};(d()?r6:xG)(t,T,B,a,h,D)};t.on("init",()=>{const T="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(T,v),t.on("longpress contextmenu",E)})},JR=Gi.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),ak=t=>s=>s.translate(-t.left,-t.top),ik=t=>s=>s.translate(t.left,t.top),Og=t=>(s,a)=>To(t,(c,d)=>d(c),co(s,a)),d2=(t,s,a)=>t.fold(Og([ik(a),ak(s)]),Og([ak(s)]),Og([])),Ib=(t,s,a)=>t.fold(Og([ik(a)]),Og([]),Og([ik(s)])),m6=(t,s,a)=>t.fold(Og([]),Og([ak(a)]),Og([ik(s),ak(a)])),m2=(t,s,a,c,d,h)=>{const v=Ib(t,d,h),E=Ib(s,d,h);return Math.abs(v.left-E.left)<=a&&Math.abs(v.top-E.top)<=c},MG=(t,s,a,c,d,h)=>{const v=Ib(t,d,h),E=Ib(s,d,h),T=Math.abs(v.left-E.left),D=Math.abs(v.top-E.top);return co(T,D)},f6=(t,s,a)=>{const c=t.fold((d,h)=>({position:R.some("absolute"),left:R.some(d+"px"),top:R.some(h+"px")}),(d,h)=>({position:R.some("absolute"),left:R.some(d-a.left+"px"),top:R.some(h-a.top+"px")}),(d,h)=>({position:R.some("fixed"),left:R.some(d+"px"),top:R.some(h+"px")}));return{right:R.none(),bottom:R.none(),...c}},QR=(t,s,a)=>t.fold((c,d)=>ck(c+s,d+a),(c,d)=>_p(c+s,d+a),(c,d)=>Fb(c+s,d+a)),eM=(t,s,a,c)=>{const d=(h,v)=>(E,T)=>{const D=h(s,a,c);return v(E.getOr(D.left),T.getOr(D.top))};return t.fold(d(m6,ck),d(Ib,_p),d(d2,Fb))},ck=JR.offset,_p=JR.absolute,Fb=JR.fixed,g6=(t,s)=>{const a=Ms(t,s);return Fe(a)?NaN:parseInt(a,10)},PG=(t,s)=>{const a=t.element,c=g6(a,s.leftAttr),d=g6(a,s.topAttr);return isNaN(c)||isNaN(d)?R.none():R.some(co(c,d))},NG=(t,s,a)=>{const c=t.element;Et(c,s.leftAttr,a.left+"px"),Et(c,s.topAttr,a.top+"px")},BG=(t,s)=>{const a=t.element;Ss(a,s.leftAttr),Ss(a,s.topAttr)},$G=(t,s,a,c)=>PG(t,s).fold(()=>a,d=>Fb(d.left+c.left,d.top+c.top)),IG=(t,s,a,c,d,h)=>{const v=$G(t,s,a,c),E=s.mustSnap?LG(t,s,v,d,h):HG(t,s,v,d,h),T=d2(v,d,h);return NG(t,s,T),E.fold(()=>({coord:Fb(T.left,T.top),extra:R.none()}),D=>({coord:D.output,extra:D.extra}))},FG=(t,s)=>{BG(t,s)},h6=(t,s,a,c)=>tr(t,d=>{const h=d.sensor;return m2(s,h,d.range.left,d.range.top,a,c)?R.some({output:eM(d.output,s,a,c),extra:d.extra}):R.none()}),LG=(t,s,a,c,d)=>{const h=s.getSnapPoints(t);return h6(h,a,c,d).orThunk(()=>To(h,(T,D)=>{const B=D.sensor,L=MG(a,B,D.range.left,D.range.top,c,d);return T.deltas.fold(()=>({deltas:R.some(L),snap:R.some(D)}),U=>{const j=(L.left+L.top)/2,X=(U.left+U.top)/2;return j<=X?{deltas:R.some(L),snap:R.some(D)}:T})},{deltas:R.none(),snap:R.none()}).snap.map(T=>({output:eM(T.output,a,c,d),extra:T.extra})))},HG=(t,s,a,c,d)=>{const h=s.getSnapPoints(t);return h6(h,a,c,d)},zG=(t,s,a)=>({coord:eM(t.output,t.output,s,a),extra:t.extra});var VG=Object.freeze({__proto__:null,snapTo:(t,s,a,c)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const h=Ba(t.element),v=Ia(h),E=GF(d),T=zG(c,v,E),D=f6(T.coord,v,E);at(d,D)}}});const Cy="data-initial-z-index",UG=t=>{ra(t.element).filter(yo).each(s=>{zr(s,Cy).fold(()=>to(s,"z-index"),a=>vn(s,"z-index",a)),Ss(s,Cy)})},WG=t=>{ra(t.element).filter(yo).each(s=>{Xs(s,"z-index").each(a=>{Et(s,Cy,a)}),vn(s,"z-index",Ps(t.element,"z-index"))})},p6=(t,s)=>{t.getSystem().addToGui(s),WG(s)},ZG=t=>{UG(t),t.getSystem().removeFromGui(t)},b6=(t,s,a)=>t.getSystem().build(cm.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var jG=vi("snaps",[Ke("getSnapPoints"),Wn("onSensor"),Ke("leftAttr"),Ke("topAttr"),_e("lazyViewport",Wr),_e("mustSnap",!1)]);const lk=[_e("useFixed",An),Ke("blockerClass"),_e("getTarget",ut),_e("onDrag",Q),_e("repositionTarget",!0),_e("onDrop",Q),Nr("getBounds",Wr),jG],GG=t=>rl(Xs(t,"left"),Xs(t,"top"),Xs(t,"position"),(s,a,c)=>(c==="fixed"?Fb:ck)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=cc(t);return _p(s.left,s.top)}),qG=(t,s,a,c,d)=>{const h=d.bounds,v=Ib(s,a,c),E=gc(v.left,h.x,h.x+h.width-d.width),T=gc(v.top,h.y,h.y+h.height-d.height),D=_p(E,T);return s.fold(()=>{const B=m6(D,a,c);return ck(B.left,B.top)},ae(D),()=>{const B=d2(D,a,c);return Fb(B.left,B.top)})},KG=(t,s,a,c,d,h,v)=>{const E=s.fold(()=>{const T=QR(a,h.left,h.top),D=d2(T,c,d);return Fb(D.left,D.top)},T=>{const D=IG(t,T,a,h,c,d);return D.extra.each(B=>{T.onSensor(t,B)}),D.coord});return qG(t,E,c,d,v)},YG=(t,s,a,c)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const h=Ba(t.element),v=Ia(h),E=GF(d),T=GG(d),D=KG(t,s.snaps,T,v,E,c,a),B=f6(D,v,E);at(d,B)}s.onDrag(t,d,c)},v6=(t,s)=>({bounds:t.getBounds(),height:kd(s.element),width:$a(s.element)}),f2=(t,s,a,c,d)=>{const h=a.update(c,d),v=a.getStartData().getOrThunk(()=>v6(s,t));h.each(E=>{YG(t,s,v,E)})},tM=(t,s,a,c)=>{s.each(ZG),a.snaps.each(h=>{FG(t,h)});const d=a.getTarget(t.element);c.reset(),a.onDrop(t,d)},nM=t=>(s,a)=>{const c=d=>{a.setStartData(v6(s,d))};return zo([We(Uu(),d=>{a.getStartData().each(()=>c(d))}),...t(s,a,c)])},XG=t=>zo([We(fr(),t.forceDrop),We(iw(),t.drop),We(Jg(),(s,a)=>{t.move(a.event)}),We(Qg(),t.delayDrop)]);var JG=Object.freeze({__proto__:null,getData:t=>R.from(co(t.x,t.y)),getDelta:(t,s)=>co(s.left-t.left,s.top-t.top)});const y6=(t,s,a)=>[We(fr(),(c,d)=>{if(d.event.raw.button!==0)return;d.stop();const v=()=>tM(c,R.some(D),t,s),E=S$(v,200),T={drop:v,delayDrop:E.schedule,forceDrop:v,move:L=>{E.cancel(),f2(c,t,s,JG,L)}},D=b6(c,t.blockerClass,XG(T));(()=>{a(c),p6(c,D)})()})],QG=[...lk,Oo("dragger",{handlers:nM(y6)})],eq=t=>zo([We(Vu(),t.forceDrop),We(Vf(),t.drop),We(z2(),t.drop),We(Xg(),(s,a)=>{t.move(a.event)})]),tq=t=>{const s=t[0];return R.some(co(s.clientX,s.clientY))};var w6=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?tq(a):R.none()},getDelta:(t,s)=>co(s.left-t.left,s.top-t.top)});const C6=(t,s,a)=>{const c=Rn(),d=h=>{tM(h,c.get(),t,s),c.clear()};return[We(Vu(),(h,v)=>{v.stop();const E=()=>d(h),T={drop:E,delayDrop:Q,forceDrop:E,move:L=>{f2(h,t,s,w6,L)}},D=b6(h,t.blockerClass,eq(T));c.set(D),(()=>{a(h),p6(h,D)})()}),We(Xg(),(h,v)=>{v.stop(),f2(h,t,s,w6,v.event)}),We(Vf(),(h,v)=>{v.stop(),d(h)}),We(z2(),d)]},nq=[...lk,Oo("dragger",{handlers:nM(C6)})],oq=(t,s,a)=>[...y6(t,s,a),...C6(t,s,a)],sq=[...lk,Oo("dragger",{handlers:nM(oq)})];var aq=Object.freeze({__proto__:null,mouse:QG,touch:nq,mouseOrTouch:sq}),iq=Object.freeze({__proto__:null,init:()=>{let t=R.none(),s=R.none();const a=()=>{t=R.none(),s=R.none()},c=(T,D)=>{const B=t.map(L=>T.getDelta(L,D));return t=R.some(D),B},d=(T,D)=>T.getData(D).bind(B=>c(T,B)),h=T=>{s=R.some(T)},v=()=>s,E=ae({});return Yi({readState:E,reset:a,update:d,getStartData:v,setStartData:h})}});const Lb=Yv({branchKey:"mode",branches:aq,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:R.from(t.extra)})},state:iq,apis:VG}),oM=40,uk=oM/2,S6=(t,s,a,c,d,h)=>t.fold(()=>Lb.snap({sensor:_p(a-uk,c-uk),range:co(d,h),output:_p(R.some(a),R.some(c)),extra:{td:s}}),v=>{const E=a-uk,T=c-uk,D=oM,B=oM,L=v.element.dom.getBoundingClientRect();return Lb.snap({sensor:_p(E,T),range:co(D,B),output:_p(R.some(a-L.width/2),R.some(c-L.height/2)),extra:{td:s}})}),sM=(t,s,a)=>{const c=(d,h)=>d.exists(v=>So(v,h));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,h)=>{const v=h.td;c(s.get(),v)||(s.set(v),a(v))},mustSnap:!0}},rM=t=>wo(Xr.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:lt([Lb.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),AS.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),Hb=(t,s)=>{const a=en([]),c=en([]),d=en(!1),h=Rn(),v=Rn(),E=ct=>{const gt=hi(ct);return S6(j.getOpt(s),ct,gt.x,gt.y,gt.width,gt.height)},T=()=>Xe(a.get(),ct=>E(ct)),D=ct=>{const gt=hi(ct);return S6(X.getOpt(s),ct,gt.right,gt.bottom,gt.width,gt.height)},B=()=>Xe(c.get(),ct=>D(ct)),L=sM(T,h,ct=>{v.get().each(gt=>{t.dispatch("TableSelectorChange",{start:ct,finish:gt})})}),U=sM(B,v,ct=>{h.get().each(gt=>{t.dispatch("TableSelectorChange",{start:gt,finish:ct})})}),j=rM(L),X=rM(U),ce=Ea(j.asSpec()),ke=Ea(X.asSpec()),pe=(ct,gt,Tn,$t)=>{const tn=gt.dom.getBoundingClientRect();to(ct.element,"display");const un=Bc(Ce.fromDom(t.getBody())).dom.innerHeight,bo=Tn(tn),Xt=$t(tn,un);(bo||Xt)&&vn(ct.element,"display","none")},ge=(ct,gt,Tn,$t)=>{const tn=Tn(gt);Lb.snapTo(ct,tn),pe(ct,gt,Xt=>Xt[$t]<0,(Xt,Kn)=>Xt[$t]>Kn)},Oe=ct=>ge(ce,ct,E,"top"),Je=()=>h.get().each(Oe),Ve=ct=>ge(ke,ct,D,"bottom"),Ie=()=>v.get().each(Ve);ml().deviceType.isTouch()&&(t.on("TableSelectionChange",ct=>{d.get()||(Jm(s,ce),Jm(s,ke),d.set(!0)),h.set(ct.start),v.set(ct.finish),ct.otherCells.each(gt=>{a.set(gt.upOrLeftCells),c.set(gt.downOrRightCells),Oe(ct.start),Ve(ct.finish)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{Je(),Ie()}),t.on("TableSelectionClear",()=>{d.get()&&(td(ce),td(ke),d.set(!1)),h.clear(),v.clear()}))};var cq=`<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>
</svg>
`;const aM=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",dk=(t,s,a)=>{var c;const d=(c=s.delimiter)!==null&&c!==void 0?c:"›",h=(D,B,L)=>Xr.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":L,"aria-level":L+1}},components:[Fs(D)],action:U=>{t.focus(),t.selection.select(B),t.nodeChanged()},buttonBehaviours:lt([Ol.button(a.isDisabled),Br()])}),v=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Fs(` ${d} `)]}),E=D=>To(D,(B,L,U)=>{const j=h(L.name,L.element,U);return U===0?B.concat([j]):B.concat([v(),j])},[]),T=D=>{const B=[];let L=D.length;for(;L-- >0;){const U=D[L];if(U.nodeType===1&&!aM(U)){const j=jB(t,U);if(j.isDefaultPrevented()||B.push({name:j.name,element:U}),j.isPropagationStopped())break}}return B};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:lt([Kt.config({mode:"flow",selector:"div[role=button]"}),sn.config({disabled:a.isDisabled}),Br(),cs.config({}),yn.config({}),En("elementPathEvents",[Bo((D,B)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>Kt.focusIn(D)),t.on("NodeChange",L=>{const U=T(L.parents),j=U.length>0?E(U):[];yn.set(D,j)})})])]),components:[]}};var kp;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(kp||(kp={}));const lq=(t,s,a,c,d)=>{const h={height:i2(c+s.top,b4(t),v4(t))};return a===kp.Both&&(h.width=i2(d+s.left,p4(t),zE(t))),h},x6=(t,s,a)=>{const c=Ce.fromDom(t.getContainer()),d=lq(t,s,a,fs(c),lr(c));Jo(d,(h,v)=>{Zt(h)&&vn(c,v,FR(h))}),WB(t)},uq=t=>{const s=jE(t);return s===!1?kp.None:s==="both"?kp.Both:kp.Vertical},mk=(t,s,a,c)=>{const h=co(a*20,c*20);return x6(t,h,s),R.some(!0)},zb=(t,s)=>{const a=uq(t);if(a===kp.None)return R.none();const c=a===kp.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return R.some(ad("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:s.translate("Resize"),"aria-label":s.translate(c)},behaviours:[Lb.config({mode:"mouse",repositionTarget:!1,onDrag:(d,h,v)=>x6(t,v,a),blockerClass:"tox-blocker"}),Kt.config({mode:"special",onLeft:()=>mk(t,a,-1,0),onRight:()=>mk(t,a,1,0),onUp:()=>mk(t,a,0,-1),onDown:()=>mk(t,a,0,1)}),cs.config({}),ln.config({})]},s.icons))},E6=(t,s)=>{const a=(c,d,h)=>yn.set(c,[Fs(s.translate(["{0} "+h,d[h]]))]);return Xr.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:lt([Ol.button(s.isDisabled),Br(),cs.config({}),yn.config({}),St.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),En("wordcount-events",[vl(c=>{const d=St.getValue(c),h=d.mode==="words"?"characters":"words";St.setValue(c,{mode:h,count:d.count}),a(c,d.count,h)}),Bo(c=>{t.on("wordCountUpdate",d=>{const{mode:h}=St.getValue(c);St.setValue(c,{mode:h,count:d.wordCount}),a(c,d.wordCount,h)})})])]),eventOrder:{[Ki()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},dq=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v6",rel:"noopener",target:"_blank","aria-label":Cc.translate(["Powered by {0}","Tiny"])},innerHtml:cq.trim()},behaviours:lt([ln.config({})])}]}),c=()=>{const E=OB("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Fs(Cc.translate(["Press {0} for help",E]))]}},d=()=>{const E=[];return t.hasPlugin("wordcount")&&E.push(E6(t,s)),x4(t)&&E.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:E}},h=()=>{const E=[],T=PN(t),D=ZE(t),B=x4(t)||t.hasPlugin("wordcount"),L=()=>{const U="tox-statusbar__text-container--flex-start",j="tox-statusbar__text-container--flex-end",X="tox-statusbar__text-container--space-around";if(T){const ce="tox-statusbar__text-container-3-cols";return!B&&!D?[ce,X]:B&&!D?[ce,j]:[ce,U]}return[B&&!D?j:U]};return D&&E.push(dk(t,{},s)),T&&E.push(c()),B&&E.push(d()),E.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...L()]},components:E}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const E=h(),T=zb(t,s);return E.concat(T.toArray())})()}},T6=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),mq=(t,s)=>{const a=t.inline,c=a?O5:E5,d=cS(t)?iL:xW,h=zj(),v=Rn(),E=Rn(),T=Rn(),U=ml().deviceType.isTouch()?["tox-platform-touch"]:[],j=_4(t),X=H0(t),ce=wo({dom:{tag:"div",classes:["tox-anchorbar"]}}),ke=wo({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),pe=()=>h.mainUi.get().map(nn=>nn.outerContainer).bind(Go.getHeader),ge=()=>xn.fromOption(h.dialogUi.get().map(nn=>nn.sink),"UI has not been rendered"),Oe=()=>xn.fromOption(h.popupUi.get().map(nn=>nn.sink),"(popup) UI has not been rendered"),Je=h.lazyGetInOuterOrDie("anchor bar",ce.getOpt),Ve=h.lazyGetInOuterOrDie("bottom anchor bar",ke.getOpt),Ie=h.lazyGetInOuterOrDie("toolbar",Go.getToolbar),ct=h.lazyGetInOuterOrDie("throbber",Go.getThrobber),gt=hW({popup:Oe,dialog:ge},t,Je,Ve),Tn=()=>{const nn={attributes:{[Oh]:j?jc.BottomToTop:jc.TopToBottom}},Cn=Go.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:gt.popup,onEscape:()=>{t.focus()}}),Fo=Go.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:gt.popup.shared.getSink,providers:gt.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:Bp=>{JH(t,Bp)},type:X,lazyToolbar:Ie,lazyHeader:()=>pe().getOrDie("Could not find header element"),...nn}),io=Go.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:gt.popup.shared.providers,onEscape:()=>{t.focus()},type:X}),ui=iS(t),ls=XE(t),Ac=qE(t),bd=GE(t),Pp=$t(),Np=ui||ls||Ac,Zb=()=>ui?[io]:ls?[Fo]:[],Sk=bd?[Pp,Cn]:[Cn];return Go.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Np?[]:["tox-editor-header--empty"]),...nn},components:zt([Ac?Sk:[],Zb(),sp(t)?[]:[ce.asSpec()]]),sticky:cS(t),editor:t,sharedBackstage:gt.popup.shared})},$t=()=>Go.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),tn=()=>{const nn=Go.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Cn=Go.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[nn,Cn]}},un=()=>{const nn=k4(t),Cn=So(Rs(),nn)&&Ps(nn,"display")==="grid",Fo={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(U),attributes:{...Cc.isRtl()?{dir:"rtl"}:{}}},behaviours:lt([_a.config({useFixed:()=>d.isDocked(pe)})])},io={dom:{styles:{width:document.body.clientWidth+"px"}},events:zo([We(tu(),Ac=>{vn(Ac.element,"width",document.body.clientWidth+"px")})])},ui=Ea(ko(Fo,Cn?io:{})),ls=PT(ui);return E.set(ls),{sink:ui,mothership:ls}},bo=()=>{const nn={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(U),attributes:{...Cc.isRtl()?{dir:"rtl"}:{}}},behaviours:lt([_a.config({useFixed:()=>d.isDocked(pe),getBounds:()=>s.getPopupSinkBounds()})])},Cn=Ea(nn),Fo=PT(Cn);return T.set(Fo),{sink:Cn,mothership:Fo}},Xt=()=>{const nn=Tn(),Cn=tn(),Fo=Go.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:gt.popup}),io=Go.parts.viewWrapper({backstage:gt.popup}),ui=WE(t)&&!a?R.some(dq(t,gt.popup.shared.providers)):R.none(),ls=zt([j?[]:[nn],a?[]:[Cn],j?[nn]:[]]),Ac=Go.parts.editorContainer({components:zt([ls,a?[]:[ke.asSpec(),...ui.toArray()]])}),bd=O4(t),Pp={role:"application",...Cc.isRtl()?{dir:"rtl"}:{},...bd?{"aria-hidden":"true"}:{}},Np=Ea(Go.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(j?["tox-tinymce--toolbar-bottom"]:[]).concat(U),styles:{visibility:"hidden",...bd?{opacity:"0",border:"0"}:{}},attributes:Pp},components:[Ac,...a?[]:[io],Fo],behaviours:lt([Br(),sn.config({disableClass:"tox-tinymce--disabled"}),Kt.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Zb=PT(Np);return v.set(Zb),{mothership:Zb,outerContainer:Np}},Kn=nn=>{const Cn=FR(Ij(t)),Fo=FR(Fj(t));return t.inline||(Wl("div","width",Fo)&&vn(nn.element,"width",Fo),Wl("div","height",Cn)?vn(nn.element,"height",Cn):vn(nn.element,"height","400px")),Cn},ht=nn=>{t.addShortcut("alt+F9","focus menubar",()=>{Go.focusMenubar(nn)}),t.addShortcut("alt+F10","focus toolbar",()=>{Go.focusToolbar(nn)}),t.addCommand("ToggleToolbarDrawer",(Cn,Fo)=>{Fo!=null&&Fo.skipFocus?Go.toggleToolbarDrawerWithoutFocusing(nn):Go.toggleToolbarDrawer(nn)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>Go.isToolbarDrawerToggled(nn))},Bt=nn=>{const{mainUi:Cn,popupUi:Fo,uiMotherships:io}=nn;Qo(xN(t),(jb,bM)=>{t.ui.registry.addGroupToolbarButton(bM,jb)});const{buttons:ui,menuItems:ls,contextToolbars:Ac,sidebars:bd,views:Pp}=t.ui.registry.getAll(),Np=T4(t),Zb={menuItems:ls,menus:IN(t),menubar:_N(t),toolbar:Np.getOrThunk(()=>aS(t)),allowToolbarGroups:X===fu.floating,buttons:ui,sidebar:bd,views:Pp};ht(Cn.outerContainer),uy(t,Cn.mothership,io),d.setup(t,gt.popup.shared,pe),fG(t,gt.popup),RG(t,gt.popup.shared.getSink,gt.popup),eZ(t),O_(t,ct,gt.popup.shared),Z5(t,Ac,Fo.sink,{backstage:gt.popup}),Hb(t,Fo.sink);const Sk=t.getElement(),Bp=Kn(Cn.outerContainer),pM={targetNode:Sk,height:Bp};return c.render(t,nn,Zb,gt.popup,pM)},fn=nn=>(T.set(nn.mothership),nn),$n=()=>{const nn=Xt(),Cn=un(),Fo=vg(t)?bo():fn(Cn);h.dialogUi.set(Cn),h.popupUi.set(Fo),h.mainUi.set(nn);const io={popupUi:Fo,dialogUi:Cn,mainUi:nn,uiMotherships:h.getUiMotherships()};return Bt(io)};return{popups:{backstage:gt.popup,getMothership:()=>T6("popups",T)},dialogs:{backstage:gt.dialog,getMothership:()=>T6("dialogs",E)},renderUI:$n}},fq=(t,s)=>{const a=zr(t,"id").fold(()=>{const c=Rt("dialog-label");return Et(s,"id",c),c},ut);Et(t,"aria-labelledby",a)},gq=ae([Ke("lazySink"),po("dragBlockClass"),Nr("getBounds",Wr),_e("useTabstopAt",Dt),_e("firstTabstop",0),_e("eventOrder",{}),hr("modalBehaviours",[Kt]),tc("onExecute"),Aw("onEscape")]),iM={sketch:ut},hq=ae([Ti({name:"draghandle",overrides:(t,s)=>({behaviours:lt([Lb.config({mode:"mouse",getTarget:a=>Qi(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),ka({schema:[Ke("dom")],name:"title"}),ka({factory:iM,schema:[Ke("dom")],name:"close"}),ka({factory:iM,schema:[Ke("dom")],name:"body"}),Ti({factory:iM,schema:[Ke("dom")],name:"footer"}),El({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[_e("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),_e("components",[])],name:"blocker"})]),pq=(t,s,a,c)=>{const d=Rn(),h=j=>{d.set(j);const X=t.lazySink(j).getOrDie(),ce=c.blocker(),ke=X.getSystem().build({...ce,components:ce.components.concat([fc(j)]),behaviours:lt([ln.config({}),En("dialog-blocker-events",[Wu(qi(),()=>{fm.isBlocked(j)?Q():Kt.focusIn(j)})])])});Jm(X,ke),Kt.focusIn(j)},v=j=>{d.clear(),ra(j.element).each(X=>{j.getSystem().getByDom(X).each(ce=>{td(ce)})})},E=j=>Qd(j,t,"body"),T=j=>$o(j,t,"footer"),D=(j,X)=>{fm.block(j,X)},B=j=>{fm.unblock(j)},L=Rt("modal-events"),U={...t.eventOrder,[dc()]:[L].concat(t.eventOrder["alloy.system.attached"]||[])};return{uid:t.uid,dom:t.dom,components:s,apis:{show:h,hide:v,getBody:E,getFooter:T,setIdle:B,setBusy:D},eventOrder:U,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Qs(t.modalBehaviours,[yn.config({}),Kt.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),fm.config({getRoot:d.get}),En(L,[Bo(j=>{fq(j.element,Qd(j,t,"title").element)})])])}},pr=Oa({name:"ModalDialog",configFields:gq(),partFields:hq(),factory:pq,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),g2=Ut([rr,rT].concat(Cb)),cM=Kl,Sy=[fT("button"),Yc,ji("align","end",["start","end"]),uT,Xc,ow("buttonType",["primary","secondary"])],Op=[...Sy,cf],xy=[Yl("type",["submit","cancel","custom"]),...Op],bq=[Yl("type",["menu"]),cp,iT,Yc,lc("items",g2),...Sy],_6=[...Sy,Yl("type",["togglebutton"]),ro("tooltip"),Yc,cp,Cr("active",!1)],k6=Un("type",{submit:xy,cancel:xy,custom:xy,menu:bq,togglebutton:_6}),O6=[rr,cf,Yl("level",["info","warn","error","success"]),sB,_e("url","")],vq=Ut(O6),yq=t=>[rr,t],wq=[rr,cf,Xc,fT("button"),Yc,U4,ow("buttonType",["primary","secondary","toolbar"]),uT],A6=Ut(wq),Vb=[rr,rT],wu=Vb.concat([cT]),Cq=Vb.concat([aT,Xc]),Sq=Ut(Cq),xq=Kl,D6=wu.concat([W4("auto")]),Eq=Ut(D6),Tq=Md([mS,cf,sB]),_q=wu.concat([Lu("storageKey","default")]),lM=Ut(_q),uM=jr,R6=Ut(wu),kq=jr,Oq=Vb.concat([Lu("tag","textarea"),ro("scriptId"),ro("scriptUrl"),qM("settings",void 0)]),M6=Vb.concat([Lu("tag","textarea"),Xl("init")]),Aq=Dm(t=>Es("customeditor.old",Zo(M6),t).orThunk(()=>Es("customeditor.new",Zo(Oq),t))),Dq=jr,P6=Ut(wu),Rq=$2(),fk=t=>[rr,u1("columns"),t],Ty=[rr,ro("html"),ji("presets","presentation",["presentation","document"])],gk=Ut(Ty),N6=wu.concat([Cr("border",!1),Cr("sandboxed",!0),Cr("streamContent",!1),Cr("transparent",!0)]),hk=Ut(N6),Oc=jr,pk=Ut(Vb.concat([ca("height")])),B6=Ut([ro("url"),Ff("zoom"),Ff("cachedWidth"),Ff("cachedHeight")]),$6=wu.concat([ca("inputMode"),ca("placeholder"),Cr("maximized",!1),Xc]),Mq=Ut($6),Pq=jr,Ap=t=>[rr,aT,t,ji("align","start",["start","center","end"])],WY=[cf,mS],Nq=[cf,lc("items",l1("items",()=>dM))],dM=Mt([Ut(WY),Ut(Nq)]),_y=wu.concat([lc("items",dM),Xc]),bk=Ut(_y),I6=jr,Bq=wu.concat([nw("items",[cf,mS]),Fu("size",1),Xc]),$q=Ut(Bq),Iq=jr,Fq=wu.concat([Cr("constrain",!0),Xc]),ky=Ut(Fq),Lq=Ut([ro("width"),ro("height")]),Hq=Vb.concat([aT,Fu("min",0),Fu("max",0)]),zq=Ut(Hq),ZY=i1,Vq=[rr,lc("header",jr),lc("cells",ql(jr))],Uq=Ut(Vq),h2=wu.concat([ca("placeholder"),Cr("maximized",!1),Xc]),Wq=Ut(h2),Zq=jr,mM=[Yl("type",["directory","leaf"]),z4,ro("id"),Iu("menu",t2)],jq=Ut(mM),e=mM.concat([lc("children",l1("children",()=>nt("type",{directory:n,leaf:jq})))]),n=Ut(e),o=nt("type",{directory:n,leaf:jq}),r=[rr,lc("items",o),Lf("onLeafAction"),Lf("onToggleExpand"),yi("defaultExpandedIds",[],jr),ca("defaultSelectedId")],i=Ut(r),u=wu.concat([ji("filetype","file",["image","media","file"]),Xc,ca("picker_text")]),g=Ut(u),y=Ut([mS,dT]),x=t=>ia("items","items",ho(),ql(Dm(s=>Es(`Checking item of ${t}`,A,s).fold(a=>xn.error(Fa(a)),a=>xn.value(a))))),A=Zr(()=>nt("type",{alertbanner:vq,bar:Ut(yq(x("bar"))),button:A6,checkbox:Sq,colorinput:lM,colorpicker:R6,dropzone:P6,grid:Ut(fk(x("grid"))),iframe:hk,input:Mq,listbox:bk,selectbox:$q,sizeinput:ky,slider:zq,textarea:Wq,urlinput:g,customeditor:Aq,htmlpanel:gk,imagepreview:pk,collection:Eq,label:Ut(Ap(x("label"))),table:Uq,tree:i,panel:F})),I=[rr,_e("classes",[]),lc("items",A)],F=Ut(I),V=[fT("tab"),z4,lc("items",A)],J=[rr,nw("tabs",V)],ne=Ut(J),Y=Op,oe=k6,he=Ut([ro("title"),Wi("body",nt("type",{panel:F,tabpanel:ne})),Lu("size","normal"),yi("buttons",[],oe),_e("initialData",{}),Nr("onAction",Q),Nr("onChange",Q),Nr("onSubmit",Q),Nr("onClose",Q),Nr("onCancel",Q),Nr("onTabChange",Q)]),be=t=>Es("dialog",he,t),ye=Ut([Yl("type",["cancel","custom"]),...Y]),Ee=Ut([ro("title"),ro("url"),Ff("height"),Ff("width"),Hf("buttons",ye),Nr("onAction",Q),Nr("onCancel",Q),Nr("onClose",Q),Nr("onMessage",Q)]),Ye=t=>Es("dialog",Ee,t),st=t=>G(t)?[t].concat($e(vm(t),st)):ie(t)?$e(t,st):[],xt=t=>z(t.type)&&z(t.name),Le={checkbox:xq,colorinput:uM,colorpicker:kq,dropzone:Rq,input:Pq,iframe:Oc,imagepreview:B6,selectbox:Iq,sizeinput:Lq,slider:ZY,listbox:I6,size:Lq,textarea:Zq,urlinput:y,customeditor:Dq,collection:Tq,togglemenuitem:cM},Me=t=>R.from(Le[t.type]),Qe=t=>vo(st(t),xt),Tt=t=>{const s=Qe(t),a=$e(s,c=>Me(c).fold(()=>[],d=>[Wi(c.name,d)]));return Ut(a)},Wt=t=>{var s;const a=No(be(t)),c=Tt(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:c,initialData:d}},Sn={open:(t,s)=>{const a=Wt(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=No(Ye(s));return t(a)},redial:t=>Wt(t)};var Ao=Object.freeze({__proto__:null,events:(t,s)=>{const a=(c,d)=>{t.updateState.each(h=>{const v=h(c,d);s.set(v)}),t.renderComponents.each(h=>{const v=h(d,s.get());(t.reuseDom?OP:ki)(c,v)})};return zo([We(jf(),(c,d)=>{const h=d;if(!h.universal){const v=t.channel;go(h.channels,v)&&a(c,h.data)}}),Bo((c,d)=>{t.initialData.each(h=>{a(c,h)})})])}}),Gs=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),Ra=[Ke("channel"),po("renderComponents"),po("updateState"),po("initialData"),Cr("reuseDom",!0)],mt=Object.freeze({__proto__:null,init:()=>{const t=en(R.none()),s=()=>t.set(R.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const kt=Tr({fields:Ra,name:"reflecting",active:Ao,apis:Gs,state:mt}),no=t=>{const s=[],a={};return Jo(t,(c,d)=>{c.fold(()=>{s.push(d)},h=>{a[d]=h})}),s.length>0?xn.error(s):xn.value(a)},qn=(t,s,a)=>{const c=wo(ey.sketch(d=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:Xe(t.items,h=>md(d,h,s,a))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[c.asSpec()]}],behaviours:lt([Kt.config({mode:"acyclic",useTabstopAt:Te(ny)}),_c.memento(c),vI(c,{postprocess:d=>no(d).fold(h=>(console.error(h),{}),ut)}),En("dialog-body-panel",[We(qi(),(d,h)=>{d.getSystem().broadcastOn([sy],{newFocus:R.some(h.event.target)})})])])}},Lt=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:sm(t.action),behaviours:Qs(t.tabButtonBehaviours,[ln.config({}),Kt.config({mode:"execution",useSpace:!0,useEnter:!0}),St.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),Ht=nc({name:"TabButton",configFields:[_e("uid",void 0),Ke("value"),ia("dom","dom",Nn(()=>({attributes:{role:"tab",id:Rt("aria"),"aria-selected":"false"}})),mr()),po("action"),_e("domModification",{}),hr("tabButtonBehaviours",[ln,Kt,St]),Ke("view")],factory:Lt}),it=ae([Ke("tabs"),Ke("dom"),_e("clickToDismiss",!1),hr("tabbarBehaviours",[ao,Kt]),Vm(["tabClass","selectedClass"])]),hn=ob({factory:Ht,name:"tabs",unit:"tab",overrides:t=>{const s=(c,d)=>{ao.dehighlight(c,d),qt(c,xv(),{tabbar:c,button:d})},a=(c,d)=>{ao.highlight(c,d),qt(c,W2(),{tabbar:c,button:d})};return{action:c=>{const d=c.getSystem().getByUid(t.uid).getOrDie(),h=ao.isHighlighted(d,c);(h&&t.clickToDismiss?s:h?Q:a)(d,c)},domModification:{classes:[t.markers.tabClass]}}}}),Zn=ae([hn]),Mo=(t,s,a,c)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Qs(t.tabbarBehaviours,[ao.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,h)=>{Et(h.element,"aria-selected","true")},onDehighlight:(d,h)=>{Et(h.element,"aria-selected","false")}}),Kt.config({mode:"flow",getInitial:d=>ao.getHighlighted(d).map(h=>h.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),Ko=Oa({name:"Tabbar",configFields:it(),partFields:Zn(),factory:Mo}),Ri=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:Qs(t.tabviewBehaviours,[yn.config({})]),domModification:{attributes:{role:"tabpanel"}}}),Qc=nc({name:"Tabview",configFields:[hr("tabviewBehaviours",[yn])],factory:Ri}),pf=ae([_e("selectFirst",!0),Wn("onChangeTab"),Wn("onDismissTab"),_e("tabs",[]),hr("tabSectionBehaviours",[])]),Mi=ka({factory:Ko,schema:[Ke("dom"),Jl("markers",[Ke("tabClass"),Ke("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),gd=ka({factory:Qc,name:"tabview"}),wn=ae([Mi,gd]),jn=(t,s,a,c)=>{const d=v=>{const E=St.getValue(v);$o(v,t,"tabview").each(T=>{on(t.tabs,B=>B.value===E).each(B=>{const L=B.view();zr(v.element,"id").each(U=>{Et(T.element,"aria-labelledby",U)}),yn.set(T,L),t.onChangeTab(T,v,L)})})},h=(v,E)=>{$o(v,t,"tabbar").each(T=>{E(T).each(Id)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:Xd(t.tabSectionBehaviours),events:zo(zt([t.selectFirst?[Bo((v,E)=>{h(v,ao.getFirst)})]:[],[We(W2(),(v,E)=>{const T=E.event.button;d(T)}),We(xv(),(v,E)=>{const T=E.event.button;t.onDismissTab(v,T)})]])),apis:{getViewItems:v=>$o(v,t,"tabview").map(E=>yn.contents(E)).getOr([]),showTab:(v,E)=>{h(v,D=>{const B=ao.getCandidates(D);return on(B,U=>St.getValue(U)===E).filter(U=>!ao.isHighlighted(D,U))})}}}},mo=Oa({name:"TabSection",configFields:pf(),partFields:wn(),factory:jn,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),ks=(t,s,a)=>Xe(t,(c,d)=>{yn.set(a,t[d].view());const h=s.dom.getBoundingClientRect();return yn.set(a,[]),h.height}),Bs=t=>ea(Tu(t,(s,a)=>s>a?-1:s<a?1:0)),Cu=(t,s,a)=>{const c=Nc(t).dom,d=Qi(t,".tox-dialog-wrap").getOr(t),h=Ps(d,"position")==="fixed";let v;h?v=Math.max(c.clientHeight,window.innerHeight):v=Math.max(c.offsetHeight,c.scrollHeight);const E=fs(s),D=s.dom.offsetLeft>=a.dom.offsetLeft+lr(a)?Math.max(fs(a),E):E,B=parseInt(Ps(t,"margin-top"),10)||0,L=parseInt(Ps(t,"margin-bottom"),10)||0,j=fs(t)+B+L-D;return v-j},Oy=(t,s)=>{ea(t).each(a=>mo.showTab(s,a.value))},Ay=(t,s)=>{vn(t,"height",s+"px"),vn(t,"flex-basis",s+"px")},bf=(t,s,a)=>{Qi(t,'[role="dialog"]').each(c=>{Ws(c,'[role="tablist"]').each(d=>{a.get().map(h=>(vn(s,"height","0"),vn(s,"flex-basis","0"),Math.min(h,Cu(c,s,d)))).each(h=>{Ay(s,h)})})})},vf=t=>Ws(t,'[role="tabpanel"]'),Dp=t=>{const s=Rn();return{extraEvents:[Bo(d=>{const h=d.element;vf(h).each(v=>{vn(v,"visibility","hidden"),d.getSystem().getByDom(v).toOptional().each(E=>{const T=ks(t,v,E);Bs(T).fold(s.clear,s.set)}),bf(h,v,s),to(v,"visibility"),Oy(t,d),requestAnimationFrame(()=>{bf(h,v,s)})})}),We(tu(),d=>{const h=d.element;vf(h).each(v=>{bf(h,v,s)})}),We(P$,(d,h)=>{const v=d.element;vf(v).each(E=>{const T=Ju(Be(E));vn(E,"visibility","hidden");const D=Xs(E,"height").map(U=>parseInt(U,10));to(E,"height"),to(E,"flex-basis");const B=E.dom.getBoundingClientRect().height;D.forall(U=>B>U)?(s.set(B),bf(v,E,s)):D.each(U=>{Ay(E,U)}),to(E,"visibility"),T.each(xi)})})],selectFirst:!1}},Dy="send-data-to-section",p2="send-data-to-view",vk=(t,s,a)=>{const c=en({}),d=D=>{const B=St.getValue(D),L=no(B).getOr({}),U=c.get(),j=ko(U,L);c.set(j)},h=D=>{const B=c.get();St.setValue(D,B)},v=en(null),E=Xe(t.tabs,D=>({value:D.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Fs(a.shared.providers.translate(D.title))],view:()=>[ey.sketch(B=>({dom:{tag:"div",classes:["tox-form"]},components:Xe(D.items,L=>md(B,L,s,a)),formBehaviours:lt([Kt.config({mode:"acyclic",useTabstopAt:Te(ny)}),En("TabView.form.events",[Bo(h),Zu(d)]),Si.config({channels:la([{key:Dy,value:{onReceive:d}},{key:p2,value:{onReceive:h}}])})])}))]})),T=Dp(E);return mo.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(D,B,L)=>{const U=St.getValue(B);qt(D,M$,{name:U,oldName:v.get()}),v.set(U)},tabs:E,components:[mo.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[Ko.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:lt([cs.config({})])}),mo.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:T.selectFirst,tabSectionBehaviours:lt([En("tabpanel",T.extraEvents),Kt.config({mode:"acyclic"}),Bn.config({find:D=>ea(mo.getViewItems(D))}),pp(R.none(),D=>(D.getSystem().broadcastOn([Dy],{}),c.get()),(D,B)=>{c.set(B),D.getSystem().broadcastOn([p2],{})})])})},Ub=(t,s,a,c,d)=>{const h=T=>{const D=T.body;switch(D.type){case"tabpanel":return[vk(D,T.initialData,c)];default:return[qn(D,T.initialData,c)]}},v=(T,D)=>R.some({isTabPanel:()=>D.body.type==="tabpanel"}),E={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(T=>({id:T})).getOr({}),...d?E:{}}},components:[],behaviours:lt([_c.childAt(0),kt.config({channel:`${e_}-${s}`,updateState:v,renderComponents:h,initialData:t})])}},yk=(t,s,a,c,d)=>Ub(t,s,R.some(a),c,d),Rp=(t,s,a)=>{const c=Ub(t,s,R.none(),a,!1);return pr.parts.body(c)},Ry=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[TI(R.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:lt([cs.config({}),ln.config({})])})]}],behaviours:lt([Kt.config({mode:"acyclic",useTabstopAt:Te(ny)})])};return pr.parts.body(s)},hd=L0.deviceType.isTouch(),yf=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),My=(t,s)=>pr.parts.close(Xr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:lt([cs.config({})])})),Py=()=>pr.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),b2=(t,s)=>pr.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:pg(`<p>${hN(s.translate(t))}</p>`)}]}]}),Wb=t=>pr.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),fM=(t,s)=>[cm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),cm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],wk=t=>{const s="tox-dialog",a=s+"-wrap",c=a+"__backdrop",d=s+"__disable-scroll";return pr.sketch({lazySink:t.lazySink,onEscape:h=>(t.onEscape(h),R.some(!0)),useTabstopAt:h=>!ny(h),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:pg(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:hd?[c,c+"--opaque"]:[c]}}]}},dragBlockClass:a,modalBehaviours:lt([ln.config({}),En("dialog-events",t.dialogEvents.concat([Wu(qi(),(h,v)=>{fm.isBlocked(h)?Q():Kt.focusIn(h)}),We(Cv(),(h,v)=>{h.getSystem().broadcastOn([sy],{newFocus:v.event.newFocus})})])),En("scroll-lock",[Bo(()=>{Us(Rs(),d)}),Zu(()=>{bs(Rs(),d)})]),...t.extraBehaviours]),eventOrder:{[Ki()]:["dialog-events"],[dc()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Bm()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},Ga=t=>Xr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},buttonBehaviours:lt([cs.config({})]),components:[ad("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{Ln(s,fp)}}),Mp=(t,s,a,c)=>{const d=h=>[Fs(c.translate(h.title))];return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:{...a.map(h=>({id:h})).getOr({})}},components:[],behaviours:lt([kt.config({channel:`${gf}-${s}`,initialData:t,renderComponents:d})])}},Ag=()=>({dom:pg('<div class="tox-dialog__draghandle"></div>')}),v2=(t,s,a,c)=>cm.sketch({dom:pg('<div class="tox-dialog__header"></div>'),components:[Mp(t,s,R.some(a),c),Ag(),Ga(c)],containerBehaviours:lt([Lb.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>ou(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),Ae=(t,s,a)=>{const c=pr.parts.title(Mp(t,s,R.none(),a)),d=pr.parts.draghandle(Ag()),h=pr.parts.close(Ga(a)),v=[c].concat(t.draggable?[d]:[]).concat([h]);return cm.sketch({dom:pg('<div class="tox-dialog__header"></div>'),components:v})},Re=(t,s,a)=>Ae({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),dt=(t,s,a,c)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${c.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:pg('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),rt=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:c=>{const d=Ws(t().element,".tox-dialog__header").map(h=>fs(h));pr.setBusy(t(),(h,v)=>dt(c.message,v,s,d))},onUnblock:()=>{pr.setIdle(t())}}),Yt="tox-dialog--fullscreen",Vn="tox-dialog--width-lg",Os="tox-dialog--width-md",br=t=>{switch(t){case"large":return R.some(Vn);case"medium":return R.some(Os);default:return R.none()}},Or=(t,s)=>{const a=Ce.fromDom(s.element.dom);gr(a,Yt)||(mc(a,[Vn,Os]),br(t).each(c=>Us(a,c)))},Ny=(t,s)=>{const a=Ce.fromDom(t.element.dom),c=fh(a),d=on(c,h=>h===Vn||h===Os).or(br(s));Tw(a,[Yt,...d.toArray()])},By=(t,s,a)=>Ea(wk({...t,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[JT({}),...t.extraBehaviours],onEscape:c=>{Ln(c,fp)},dialogEvents:s,eventOrder:{[jf()]:[kt.name(),Si.name()],[dc()]:["scroll-lock",kt.name(),"messages","dialog-events","alloy.base.behaviour"],[Bm()]:["alloy.base.behaviour","dialog-events","messages",kt.name(),"scroll-lock"]}})),Ck=(t,s={})=>{const a=c=>{const d=Xe(c.items,h=>{const v=Ct(s,h.name).getOr(en(!1));return{...h,storage:v}});return{...c,items:d}};return Xe(t,c=>c.type==="menu"?a(c):c)},gM=t=>To(t,(s,a)=>a.type==="menu"?To(a.items,(d,h)=>(d[h.name]=h.storage,d),s):s,{}),wf=(t,s)=>[gw(qi(),M9),t(K0,(a,c,d,h)=>{Ju(Be(h.element)).fold(Q,Eh),s.onClose(),c.onClose()}),t(fp,(a,c,d,h)=>{c.onCancel(a),Ln(h,K0)}),We(ID,(a,c)=>s.onUnblock()),We($D,(a,c)=>s.onBlock(c.event))],F6=(t,s)=>{const a=(d,h)=>We(d,(v,E)=>{c(v,(T,D)=>{h(t(),T,E.event,v)})}),c=(d,h)=>{kt.getState(d).get().each(v=>{h(v,d)})};return[...wf(a,s),a(df,(d,h,v)=>{h.onAction(d,{name:v.name})})]},hM=(t,s,a)=>{const c=(h,v)=>We(h,(E,T)=>{d(E,(D,B)=>{v(t(),D,T.event,E)})}),d=(h,v)=>{kt.getState(h).get().each(E=>{v(E.internalDialog,h)})};return[...wf(c,s),c(OS,(h,v)=>v.onSubmit(h)),c(Ec,(h,v,E)=>{v.onChange(h,{name:E.name})}),c(df,(h,v,E,T)=>{const D=()=>T.getSystem().isConnected()?Kt.focusIn(T):void 0,B=j=>Gp(j,"disabled")||zr(j,"aria-disabled").exists(X=>X==="true"),L=Be(T.element),U=Ju(L);v.onAction(h,{name:E.name,value:E.value}),Ju(L).fold(D,j=>{B(j)||U.exists(X=>Hr(j,X)&&B(X))?D():a().toOptional().filter(X=>!Hr(X.element,j)).each(D)})}),c(M$,(h,v,E)=>{v.onTabChange(h,{newTabName:E.name,oldTabName:E.oldName})}),Zu(h=>{const v=t();St.setValue(h,v.getData())})]},L6=(t,s)=>m_(t,t.type,s),H6=(t,s,a)=>on(s,c=>c.name===a).bind(c=>c.memento.getOpt(t)),Gq=(t,s)=>{const a=s.map(E=>E.footerButtons).getOr([]),c=di(a,E=>E.align==="start"),d=(E,T)=>cm.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${E}`]},components:Xe(T,D=>D.memento.asSpec())}),h=d("start",c.pass),v=d("end",c.fail);return[h,v]},Pn=(t,s,a)=>{const c=(d,h)=>{const v=Xe(h.buttons,T=>{const D=wo(L6(T,a));return{name:T.name,align:T.align,memento:D}}),E=T=>H6(d,v,T);return R.some({lookupByName:E,footerButtons:v})};return{dom:pg('<div class="tox-dialog__footer"></div>'),components:[],behaviours:lt([kt.config({channel:`${f3}-${s}`,initialData:t,updateState:c,renderComponents:Gq})])}},Pe=(t,s,a)=>Pn(t,s,a),Vt=(t,s,a)=>pr.parts.footer(Pn(t,s,a)),On=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const c=Bn.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return ey.getField(c,s).orThunk(()=>t.getFooter().bind(v=>kt.getState(v).get()).bind(v=>v.lookupByName(s)))}else return R.none()},vr=(t,s)=>{const a=t.getRoot();return kt.getState(a).get().map(c=>No(Es("data",c.dataValidator,s))).getOr(s)},rc=(t,s,a)=>{const c=X=>{const ce=t.getRoot();ce.getSystem().isConnected()&&X(ce)},j={getData:()=>{const X=t.getRoot(),ce=X.getSystem().isConnected()?t.getFormWrapper():X,ke=St.getValue(ce),pe=Qo(a,ge=>ge.get());return{...ke,...pe}},setData:X=>{c(ce=>{const ke=j.getData(),pe=ko(ke,X),ge=vr(t,pe),Oe=t.getFormWrapper();St.setValue(Oe,ge),Jo(a,(Je,Ve)=>{oo(pe,Ve)&&Je.set(pe[Ve])})})},setEnabled:(X,ce)=>{On(t,X).each(ce?sn.enable:sn.disable)},focus:X=>{On(t,X).each(ln.focus)},block:X=>{if(!z(X))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");c(ce=>{qt(ce,$D,{message:X})})},unblock:()=>{c(X=>{Ln(X,ID)})},showTab:X=>{c(ce=>{const ke=t.getBody();kt.getState(ke).get().exists(ge=>ge.isTabPanel())&&Bn.getCurrent(ke).each(ge=>{mo.showTab(ge,X)})})},redial:X=>{c(ce=>{const ke=t.getId(),pe=s(X),ge=Ck(pe.internalDialog.buttons,a);ce.getSystem().broadcastOn([`${oy}-${ke}`],pe),ce.getSystem().broadcastOn([`${gf}-${ke}`],pe.internalDialog),ce.getSystem().broadcastOn([`${e_}-${ke}`],pe.internalDialog),ce.getSystem().broadcastOn([`${f3}-${ke}`],{...pe.internalDialog,buttons:ge}),j.setData(pe.initialData)})},close:()=>{c(X=>{Ln(X,K0)})},toggleFullscreen:t.toggleFullscreen};return j},Pi=(t,s,a)=>{const c=Rt("dialog"),d=t.internalDialog,h=Re(d.title,c,a),v=en(d.size),E=br(v.get()).toArray(),T=(ge,Oe)=>(v.set(Oe.internalDialog.size),Or(Oe.internalDialog.size,ge),R.some(Oe)),D=Rp({body:d.body,initialData:d.initialData},c,a),B=Ck(d.buttons),L=gM(B),U=cn(B.length!==0,Vt({buttons:B},c,a)),j=hM(()=>pe,rt(()=>ce,a.shared.providers,s),a.shared.getSink),X={id:c,header:h,body:D,footer:U,extraClasses:E,extraBehaviours:[kt.config({channel:`${oy}-${c}`,updateState:T,initialData:t})],extraStyles:{}},ce=By(X,j,a),ke=(()=>{const ge=()=>{const Je=pr.getBody(ce);return Bn.getCurrent(Je).getOr(Je)},Oe=()=>{Ny(ce,v.get())};return{getId:ae(c),getRoot:ae(ce),getBody:()=>pr.getBody(ce),getFooter:()=>pr.getFooter(ce),getFormWrapper:ge,toggleFullscreen:Oe}})(),pe=rc(ke,s.redial,L);return{dialog:ce,instanceApi:pe}},el=(t,s,a,c=!1,d)=>{const h=Rt("dialog"),v=Rt("dialog-label"),E=Rt("dialog-content"),T=t.internalDialog,D=en(T.size),B=br(D.get()).toArray(),L=(Ie,ct)=>(D.set(ct.internalDialog.size),Or(ct.internalDialog.size,Ie),d(),R.some(ct)),U=wo(v2({title:T.title,draggable:!0},h,v,a.shared.providers)),j=wo(yk({body:T.body,initialData:T.initialData},h,E,a,c)),X=Ck(T.buttons),ce=gM(X),ke=cn(X.length!==0,wo(Pe({buttons:X},h,a))),pe=hM(()=>Ve,{onBlock:Ie=>{fm.block(Oe,(ct,gt)=>{const Tn=U.getOpt(Oe).map($t=>fs($t.element));return dt(Ie.message,gt,a.shared.providers,Tn)})},onUnblock:()=>{fm.unblock(Oe)},onClose:()=>s.closeWindow()},a.shared.getSink),Oe=Ea({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline",...B],attributes:{role:"dialog","aria-labelledby":v}},eventOrder:{[jf()]:[kt.name(),Si.name()],[Ki()]:["execute-on-form"],[dc()]:["reflecting","execute-on-form"]},behaviours:lt([Kt.config({mode:"cyclic",onEscape:Ie=>(Ln(Ie,K0),R.some(!0)),useTabstopAt:Ie=>!ny(Ie)&&(Qa(Ie)!=="button"||Ms(Ie,"disabled")!=="disabled"),firstTabstop:1}),kt.config({channel:`${oy}-${h}`,updateState:L,initialData:t}),ln.config({}),En("execute-on-form",pe.concat([Wu(qi(),(Ie,ct)=>{Kt.focusIn(Ie)}),We(Cv(),(Ie,ct)=>{Ie.getSystem().broadcastOn([sy],{newFocus:ct.event.newFocus})})])),fm.config({getRoot:()=>R.some(Oe)}),yn.config({}),JT({})]),components:[U.asSpec(),j.asSpec(),...ke.map(Ie=>Ie.asSpec()).toArray()]}),Je=()=>{Ny(Oe,D.get())},Ve=rc({getId:ae(h),getRoot:ae(Oe),getFooter:()=>ke.map(Ie=>Ie.get(Oe)),getBody:()=>j.get(Oe),getFormWrapper:()=>{const Ie=j.get(Oe);return Bn.getCurrent(Ie).getOr(Ie)},toggleFullscreen:Je},s.redial,ce);return{dialog:Oe,instanceApi:Ve}};var pd=tinymce.util.Tools.resolve("tinymce.util.URI");const y2=t=>{const s=v=>{t.getSystem().isConnected()&&v(t)};return{block:v=>{if(!z(v))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(E=>{qt(E,$D,{message:v})})},unblock:()=>{s(v=>{Ln(v,ID)})},close:()=>{s(v=>{Ln(v,K0)})},sendMessage:v=>{s(E=>{E.getSystem().broadcastOn([g3],v)})}}},ac=["insertContent","setContent","execCommand","close","block","unblock"],z6=t=>G(t)&&ac.indexOf(t.mceAction)!==-1,V6=t=>!z6(t)&&G(t)&&oo(t,"mceAction"),U6=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const c=xe(a.ui)?a.ui:!1;t.execCommand(a.cmd,c,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},iQ=(t,s,a,c)=>{const d=Rt("dialog"),h=Re(t.title,d,c),v=Ry(t),E=t.buttons.bind(Oe=>Oe.length===0?R.none():R.some(Vt({buttons:Oe},d,c))),T=F6(()=>ge,rt(()=>pe,c.shared.providers,s)),D={...t.height.fold(()=>({}),Oe=>({height:Oe+"px","max-height":Oe+"px"})),...t.width.fold(()=>({}),Oe=>({width:Oe+"px","max-width":Oe+"px"}))},B=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],L=new pd(t.url,{base_uri:new pd(window.location.href)}),U=`${L.protocol}://${L.host}${L.port?":"+L.port:""}`,j=jd(),X=(Oe,Je)=>R.some(Je),ce=[kt.config({channel:`${oy}-${d}`,updateState:X,initialData:t}),En("messages",[Bo(()=>{const Oe=Va(Ce.fromDom(window),"message",Je=>{if(L.isSameOrigin(new pd(Je.raw.origin))){const Ve=Je.raw.data;z6(Ve)?U6(a,ge,Ve):V6(Ve)&&t.onMessage(ge,Ve)}});j.set(Oe)}),Zu(j.clear)]),Si.config({channels:{[g3]:{onReceive:(Oe,Je)=>{Ws(Oe.element,"iframe").each(Ve=>{const Ie=Ve.dom.contentWindow;je(Ie)&&Ie.postMessage(Je,U)})}}}})],pe=By({id:d,header:h,body:v,footer:E,extraClasses:B,extraBehaviours:ce,extraStyles:D},T,c),ge=y2(pe);return{dialog:pe,instanceApi:ge}},cQ=t=>{const s=t.shared;return{open:(c,d)=>{const h=()=>{pr.hide(D),d()},v=wo(m_({name:"close-alert",text:"OK",primary:!0,buttonType:R.some("primary"),align:"end",enabled:!0,icon:R.none()},"cancel",t)),E=Py(),T=My(h,s.providers),D=Ea(wk({lazySink:()=>s.getSink(),header:yf(E,T),body:b2(c,s.providers),footer:R.some(Wb(fM([],[v.asSpec()]))),onEscape:h,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[We(fp,h)],eventOrder:{}}));pr.show(D);const B=v.get(D);ln.focus(B)}}},lQ=t=>{const s=t.shared;return{open:(c,d)=>{const h=U=>{pr.hide(B),d(U)},v=wo(m_({name:"yes",text:"Yes",primary:!0,buttonType:R.some("primary"),align:"end",enabled:!0,icon:R.none()},"submit",t)),E=m_({name:"no",text:"No",primary:!1,buttonType:R.some("secondary"),align:"end",enabled:!0,icon:R.none()},"cancel",t),T=Py(),D=My(()=>h(!1),s.providers),B=Ea(wk({lazySink:()=>s.getSink(),header:yf(T,D),body:b2(c,s.providers),footer:R.some(Wb(fM([],[E,v.asSpec()]))),onEscape:()=>h(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[We(fp,()=>h(!1)),We(OS,()=>h(!0))],eventOrder:{}}));pr.show(B);const L=v.get(B);ln.focus(L)}}},GY=(t,s)=>No(Es("data",s,t)),qY=t=>ES(t,".tox-alert-dialog")||ES(t,".tox-confirm-dialog"),uQ=(t,s,a)=>s&&a?[]:[er.config({contextual:{lazyContext:()=>R.some(xs(Ce.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:c=>mp(t,c.element).map(h=>({bounds:q0(h),optScrollEnv:R.some({currentScrollTop:h.element.dom.scrollTop,scrollElmTop:cc(h.element).top})})).getOrThunk(()=>({bounds:Wr(),optScrollEnv:R.none()}))})],dQ=t=>{const s=t.editor,a=cS(s),c=cQ(t.backstages.dialog),d=lQ(t.backstages.dialog),h=(X,ce,ke)=>{if(!Fe(ce)){if(ce.inline==="toolbar")return D(X,t.backstages.popup.shared.anchors.inlineDialog(),ke,ce);if(ce.inline==="bottom")return B(X,t.backstages.popup.shared.anchors.inlineBottomDialog(),ke,ce);if(ce.inline==="cursor")return D(X,t.backstages.popup.shared.anchors.cursor(),ke,ce)}return T(X,ke)},v=(X,ce)=>E(X,ce),E=(X,ce)=>{const ke=pe=>{const ge=iQ(pe,{closeWindow:()=>{pr.hide(ge.dialog),ce(ge.instanceApi)}},s,t.backstages.dialog);return pr.show(ge.dialog),ge.instanceApi};return Sn.openUrl(ke,X)},T=(X,ce)=>{const ke=(pe,ge,Oe)=>{const Je=ge,Ie=Pi({dataValidator:Oe,initialData:Je,internalDialog:pe},{redial:Sn.redial,closeWindow:()=>{pr.hide(Ie.dialog),ce(Ie.instanceApi)}},t.backstages.dialog);return pr.show(Ie.dialog),Ie.instanceApi.setData(Je),Ie.instanceApi};return Sn.open(ke,X)},D=(X,ce,ke,pe)=>{const ge=(Oe,Je,Ve)=>{const Ie=GY(Je,Ve),ct=Rn(),gt=t.backstages.popup.shared.header.isPositionedAtTop(),Tn={dataValidator:Ve,initialData:Ie,internalDialog:Oe},$t=()=>ct.on(Xt=>{_s.reposition(Xt),(!a||!gt)&&er.refresh(Xt)}),tn=el(Tn,{redial:Sn.redial,closeWindow:()=>{ct.on(_s.hide),s.off("ResizeEditor",$t),ct.clear(),ke(tn.instanceApi)}},t.backstages.popup,pe.ariaAttrs,$t),un=Ea(_s.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:pe.persistent?{event:"doNotDismissYet"}:{},...gt?{}:{fireRepositionEventInstead:{}},inlineBehaviours:lt([En("window-manager-inline-events",[We($m(),(Xt,Kn)=>{Ln(tn.dialog,fp)})]),...uQ(s,a,gt)]),isExtraPart:(Xt,Kn)=>qY(Kn)}));ct.set(un);const bo=()=>{const Xt=s.inline?Rs():Ce.fromDom(s.getContainer()),Kn=xs(Xt);return R.some(Kn)};return _s.showWithinBounds(un,fc(tn.dialog),{anchor:ce},bo),(!a||!gt)&&(er.refresh(un),s.on("ResizeEditor",$t)),tn.instanceApi.setData(Ie),Kt.focusIn(tn.dialog),tn.instanceApi};return Sn.open(ge,X)},B=(X,ce,ke,pe)=>{const ge=(Oe,Je,Ve)=>{const Ie=GY(Je,Ve),ct=Rn(),gt=t.backstages.popup.shared.header.isPositionedAtTop(),Tn={dataValidator:Ve,initialData:Ie,internalDialog:Oe},$t=()=>ct.on(Xt=>{_s.reposition(Xt),er.refresh(Xt)}),tn=el(Tn,{redial:Sn.redial,closeWindow:()=>{ct.on(_s.hide),s.off("ResizeEditor ScrollWindow ElementScroll",$t),ct.clear(),ke(tn.instanceApi)}},t.backstages.popup,pe.ariaAttrs,$t),un=Ea(_s.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:pe.persistent?{event:"doNotDismissYet"}:{},...gt?{}:{fireRepositionEventInstead:{}},inlineBehaviours:lt([En("window-manager-inline-events",[We($m(),(Xt,Kn)=>{Ln(tn.dialog,fp)})]),er.config({contextual:{lazyContext:()=>R.some(xs(Ce.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:Xt=>mp(s,Xt.element).map(ht=>({bounds:q0(ht),optScrollEnv:R.some({currentScrollTop:ht.element.dom.scrollTop,scrollElmTop:cc(ht.element).top})})).getOrThunk(()=>({bounds:Wr(),optScrollEnv:R.none()}))})]),isExtraPart:(Xt,Kn)=>qY(Kn)}));ct.set(un);const bo=()=>t.backstages.popup.shared.getSink().toOptional().bind(Xt=>{const Kn=mp(s,Xt.element),ht=15,Bt=Kn.map(nn=>q0(nn)).getOr(Wr()),fn=xs(Ce.fromDom(s.getContentAreaContainer())),$n=n1(fn,Bt);return R.some(hs($n.x,$n.y,$n.width,$n.height-ht))});return _s.showWithinBounds(un,fc(tn.dialog),{anchor:ce},bo),er.refresh(un),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",$t),tn.instanceApi.setData(Ie),Kt.focusIn(tn.dialog),tn.instanceApi};return Sn.open(ge,X)};return{open:h,openUrl:v,alert:(X,ce)=>{c.open(X,ce)},close:X=>{X.close()},confirm:(X,ce)=>{d.open(X,ce)}}},mQ=t=>{wN(t),iz(t),gG(t)};var fQ=()=>{Nu.add("silver",t=>{mQ(t);let s=()=>Wr();const{dialogs:a,popups:c,renderUI:d}=mq(t,{getPopupSinkBounds:()=>s()}),h=()=>{const T=d();return mp(t,c.getMothership().element).each(B=>{s=()=>q0(B)}),T};Xz.register(t,c.backstage.shared);const v=dQ({editor:t,backstages:{popup:c.backstage,dialog:a.backstage}}),E=()=>f4(t,{backstage:c.backstage},c.getMothership());return{renderUI:h,getWindowManagerImpl:ae(v),getNotificationManagerImpl:E}})};fQ()})();(function(){var w=tinymce.util.Tools.resolve("tinymce.PluginManager");const f=(K,de,we)=>{var Be;return we(K,de.prototype)?!0:((Be=K.constructor)===null||Be===void 0?void 0:Be.name)===de.name},p=K=>{const de=typeof K;return K===null?"null":de==="object"&&Array.isArray(K)?"array":de==="object"&&f(K,String,(we,Be)=>Be.isPrototypeOf(we))?"string":de},C=K=>de=>p(de)===K,_=K=>de=>typeof de===K,P=K=>de=>K===de,N=C("string"),z=C("object"),G=C("array"),te=P(null),ie=_("boolean"),me=K=>K==null,xe=K=>!me(K),Fe=_("function"),ve=(K,de)=>{if(G(K)){for(let we=0,Be=K.length;we<Be;++we)if(!de(K[we]))return!1;return!0}return!1},je=()=>{},He=K=>()=>K,Zt=(K,de)=>K===de;class ze{constructor(de,we){this.tag=de,this.value=we}static some(de){return new ze(!0,de)}static none(){return ze.singletonNone}fold(de,we){return this.tag?we(this.value):de()}isSome(){return this.tag}isNone(){return!this.tag}map(de){return this.tag?ze.some(de(this.value)):ze.none()}bind(de){return this.tag?de(this.value):ze.none()}exists(de){return this.tag&&de(this.value)}forall(de){return!this.tag||de(this.value)}filter(de){return!this.tag||de(this.value)?this:ze.none()}getOr(de){return this.tag?this.value:de}or(de){return this.tag?this:de}getOrThunk(de){return this.tag?this.value:de()}orThunk(de){return this.tag?this:de()}getOrDie(de){if(this.tag)return this.value;throw new Error(de??"Called getOrDie on None")}static from(de){return xe(de)?ze.some(de):ze.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(de){this.tag&&de(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ze.singletonNone=new ze(!1);const Q=Array.prototype.indexOf,Ge=Array.prototype.push,gn=(K,de)=>Q.call(K,de),_t=(K,de)=>gn(K,de)>-1,ae=(K,de)=>{const we=K.length,Be=new Array(we);for(let ot=0;ot<we;ot++){const an=K[ot];Be[ot]=de(an,ot)}return Be},ut=(K,de)=>{for(let we=0,Be=K.length;we<Be;we++){const ot=K[we];de(ot,we)}},bt=(K,de,we)=>(ut(K,(Be,ot)=>{we=de(we,Be,ot)}),we),It=K=>{const de=[];for(let we=0,Be=K.length;we<Be;++we){if(!G(K[we]))throw new Error("Arr.flatten item "+we+" was not an array, input: "+K);Ge.apply(de,K[we])}return de},Te=(K,de)=>It(ae(K,de)),ue=(K,de)=>{for(let we=0;we<K.length;we++){const Be=de(K[we],we);if(Be.isSome())return Be}return ze.none()},Fn=(K,de,we=Zt)=>K.exists(Be=>we(Be,de)),An=K=>{const de=[],we=Be=>{de.push(Be)};for(let Be=0;Be<K.length;Be++)K[Be].each(we);return de},Dt=(K,de)=>K?ze.some(de):ze.none(),R=K=>de=>de.options.get(K),fo=K=>{const de=K.options.register;de("link_assume_external_targets",{processor:we=>{const Be=N(we)||ie(we);return Be?we===!0?{value:1,valid:Be}:we==="http"||we==="https"?{value:we,valid:Be}:{value:0,valid:Be}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),de("link_context_toolbar",{processor:"boolean",default:!1}),de("link_list",{processor:we=>N(we)||Fe(we)||ve(we,z)}),de("link_default_target",{processor:"string"}),de("link_default_protocol",{processor:"string",default:"https"}),de("link_target_list",{processor:we=>ie(we)||ve(we,z),default:!0}),de("link_rel_list",{processor:"object[]",default:[]}),de("link_class_list",{processor:"object[]",default:[]}),de("link_title",{processor:"boolean",default:!0}),de("allow_unsafe_link_target",{processor:"boolean",default:!1}),de("link_quicklink",{processor:"boolean",default:!1})},ft=R("link_assume_external_targets"),Eo=R("link_context_toolbar"),Jt=R("link_list"),qe=R("link_default_target"),go=R("link_default_protocol"),qs=R("link_target_list"),Xo=R("link_rel_list"),ar=R("link_class_list"),Xe=R("link_title"),yt=R("allow_unsafe_link_target"),Z=R("link_quicklink");var di=tinymce.util.Tools.resolve("tinymce.util.Tools");const vo=K=>N(K.value)?K.value:"",ds=K=>N(K.text)?K.text:N(K.title)?K.title:"",To=(K,de)=>{const we=[];return di.each(K,Be=>{const ot=ds(Be);if(Be.menu!==void 0){const an=To(Be.menu,de);we.push({text:ot,items:an})}else{const an=de(Be);we.push({text:ot,value:an})}}),we},Sf=(K=vo)=>de=>ze.from(de).map(we=>To(we,K)),zt={sanitize:K=>Sf(vo)(K),sanitizeWith:Sf,createUi:(K,de)=>we=>({name:K,type:"listbox",label:de,items:we}),getValue:vo},$e=Object.keys,eo=Object.hasOwnProperty,ws=(K,de)=>{const we=$e(K);for(let Be=0,ot=we.length;Be<ot;Be++){const an=we[Be],Do=K[an];de(Do,an)}},jt=K=>(de,we)=>{K[we]=de},Il=(K,de,we,Be)=>{ws(K,(ot,an)=>{(de(ot,an)?we:Be)(ot,an)})},as=(K,de)=>{const we={};return Il(K,de,jt(we),je),we},Tu=(K,de)=>eo.call(K,de),As=(K,de)=>Tu(K,de)&&K[de]!==void 0&&K[de]!==null;var ea=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),bm=tinymce.util.Tools.resolve("tinymce.util.URI");const Ya=K=>xe(K)&&K.nodeName.toLowerCase()==="a",tr=K=>Ya(K)&&!!Jo(K),os=(K,de)=>{if(K.collapsed)return[];{const we=K.cloneContents(),Be=we.firstChild,ot=new ea(Be,we),an=[];let Do=Be;do de(Do)&&an.push(Do);while(Do=ot.next());return an}},Cd=K=>/^\w+:/i.test(K),Jo=K=>{var de,we;return(we=(de=K.getAttribute("data-mce-href"))!==null&&de!==void 0?de:K.getAttribute("href"))!==null&&we!==void 0?we:""},Qo=(K,de)=>{const we=["noopener"],Be=K?K.split(/\s+/):[],ot=_o=>di.trim(_o.sort().join(" ")),an=_o=>(_o=Do(_o),_o.length>0?_o.concat(we):we),Do=_o=>_o.filter(ms=>di.inArray(we,ms)===-1),ts=de?an(Be):Do(Be);return ts.length>0?ot(ts):""},sl=K=>K.replace(/\uFEFF/g,""),Ks=(K,de)=>(de=de||Mc(K.selection.getRng())[0]||K.selection.getNode(),oo(de)?ze.from(K.dom.select("a[href]",de)[0]):ze.from(K.dom.getParent(de,"a[href]"))),$i=(K,de)=>Ks(K,de).isSome(),Dr=(K,de)=>{const we=de.fold(()=>K.getContent({format:"text"}),Be=>Be.innerText||Be.textContent||"");return sl(we)},Mc=K=>os(K,tr),Sd=K=>di.grep(K,tr),Rr=K=>Sd(K).length>0,vm=K=>Mc(K).length>0,Ct=K=>{const de=K.schema.getTextInlineElements(),we=an=>an.nodeType===1&&!Ya(an)&&!Tu(de,an.nodeName.toLowerCase());if(Ks(K).exists(an=>an.hasAttribute("data-mce-block")))return!1;const ot=K.selection.getRng();return ot.collapsed?!0:os(ot,we).length===0},oo=K=>xe(K)&&K.nodeName==="FIGURE"&&/\bimage\b/i.test(K.className),ta=K=>bt(["title","rel","class","target"],(we,Be)=>(K[Be].each(ot=>{we[Be]=ot.length>0?ot:null}),we),{href:K.href}),Pa=(K,de)=>(de==="http"||de==="https")&&!Cd(K)?de+"://"+K:K,ym=(K,de)=>{const we={...de};if(Xo(K).length===0&&!yt(K)){const Be=Qo(we.rel,we.target==="_blank");we.rel=Be||null}return ze.from(we.target).isNone()&&qs(K)===!1&&(we.target=qe(K)),we.href=Pa(we.href,ft(K)),we},Ii=(K,de,we,Be)=>{we.each(ot=>{Tu(de,"innerText")?de.innerText=ot:de.textContent=ot}),K.dom.setAttribs(de,Be),K.selection.select(de)},Wo=(K,de,we,Be)=>{const ot=K.dom;oo(de)?na(ot,de,Be):we.fold(()=>{K.execCommand("mceInsertLink",!1,Be)},an=>{K.insertContent(ot.createHTML("a",Be,ot.encode(an)))})},Fi=(K,de,we)=>{const Be=K.selection.getNode(),ot=Ks(K,Be),an=ym(K,ta(we));K.undoManager.transact(()=>{we.href===de.href&&de.attach(),ot.fold(()=>{Wo(K,Be,we.text,an)},Do=>{K.focus(),Ii(K,Do,we.text,an)})})},rl=K=>{const de=K.dom,we=K.selection,Be=we.getBookmark(),ot=we.getRng().cloneRange(),an=de.getParent(ot.startContainer,"a[href]",K.getBody()),Do=de.getParent(ot.endContainer,"a[href]",K.getBody());an&&ot.setStartBefore(an),Do&&ot.setEndAfter(Do),we.setRng(ot),K.execCommand("unlink"),we.moveToBookmark(Be)},Lo=K=>{K.undoManager.transact(()=>{const de=K.selection.getNode();oo(de)?wm(K,de):rl(K),K.focus()})},cn=K=>{const{class:de,href:we,rel:Be,target:ot,text:an,title:Do}=K;return as({class:de.getOrNull(),href:we,rel:Be.getOrNull(),target:ot.getOrNull(),text:an.getOrNull(),title:Do.getOrNull()},(ts,_o)=>te(ts)===!1)},va=(K,de)=>{const we=K.options.get,Be={allow_html_data_urls:we("allow_html_data_urls"),allow_script_urls:we("allow_script_urls"),allow_svg_data_urls:we("allow_svg_data_urls")},ot=de.href;return{...de,href:bm.isDomSafe(ot,"a",Be)?ot:""}},al=(K,de,we)=>{const Be=va(K,we);K.hasPlugin("rtc",!0)?K.execCommand("createlink",!1,cn(Be)):Fi(K,de,Be)},Fl=K=>{K.hasPlugin("rtc",!0)?K.execCommand("unlink"):Lo(K)},wm=(K,de)=>{var we;const Be=K.dom.select("img",de)[0];if(Be){const ot=K.dom.getParents(Be,"a[href]",de)[0];ot&&((we=ot.parentNode)===null||we===void 0||we.insertBefore(Be,ot),K.dom.remove(ot))}},na=(K,de,we)=>{var Be;const ot=K.select("img",de)[0];if(ot){const an=K.create("a",we);(Be=ot.parentNode)===null||Be===void 0||Be.insertBefore(an,ot),an.appendChild(ot)}},ir=K=>As(K,"items"),Ds=(K,de)=>ue(de,we=>ir(we)?Ds(K,we.items):Dt(we.value===K,we)),Li=(K,de,we,Be)=>{const ot=Be[de],an=K.length>0;return ot!==void 0?Ds(ot,we).map(Do=>({url:{value:Do.value,meta:{text:an?K:Do.text,attach:je}},text:an?K:Do.text})):ze.none()},Cm=(K,de)=>de==="link"?K.link:de==="anchor"?K.anchor:ze.none(),Na={init:(K,de)=>{const we={text:K.text,title:K.title},Be=_o=>{var ms;return Dt(we.title.length<=0,ze.from((ms=_o.meta)===null||ms===void 0?void 0:ms.title).getOr(""))},ot=_o=>{var ms;return Dt(we.text.length<=0,ze.from((ms=_o.meta)===null||ms===void 0?void 0:ms.text).getOr(_o.value))},an=_o=>{const ms=ot(_o.url),Xn=Be(_o.url);return ms.isSome()||Xn.isSome()?ze.some({...ms.map(Rs=>({text:Rs})).getOr({}),...Xn.map(Rs=>({title:Rs})).getOr({})}):ze.none()},Do=(_o,ms)=>{const Xn=Cm(de,ms).getOr([]);return Li(we.text,ms,Xn,_o)};return{onChange:(_o,ms)=>{const Xn=ms.name;return Xn==="url"?an(_o()):_t(["anchor","link"],Xn)?Do(_o(),Xn):((Xn==="text"||Xn==="title")&&(we[Xn]=_o()[Xn]),ze.none())}}},getDelta:Li};var Cs=tinymce.util.Tools.resolve("tinymce.util.Delay");const Xa=(K,de,we)=>{const Be=K.selection.getRng();Cs.setEditorTimeout(K,()=>{K.windowManager.confirm(de,ot=>{K.selection.setRng(Be),we(ot)})})},Ll=K=>{const de=K.href;return de.indexOf("@")>0&&de.indexOf("/")===-1&&de.indexOf("mailto:")===-1?ze.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Be=>({...Be,href:"mailto:"+de})}):ze.none()},Zp=(K,de)=>we=>{const Be=we.href;return K===1&&!Cd(Be)||K===0&&/^\s*www(\.|\d\.)/i.test(Be)?ze.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${de}:// prefix?`,preprocess:an=>({...an,href:de+"://"+Be})}):ze.none()},Pc={preprocess:(K,de)=>ue([Ll,Zp(ft(K),go(K))],we=>we(de)).fold(()=>Promise.resolve(de),we=>new Promise(Be=>{Xa(K,we.message,ot=>{Be(ot?we.preprocess(de):de)})}))},Ce={getAnchors:K=>{const de=K.dom.select("a:not([href])"),we=Te(de,Be=>{const ot=Be.name||Be.id;return ot?[{text:ot,value:"#"+ot}]:[]});return we.length>0?ze.some([{text:"None",value:""}].concat(we)):ze.none()}},Hl={getClasses:K=>{const de=ar(K);return de.length>0?zt.sanitize(de):ze.none()}},xf=K=>{try{return ze.some(JSON.parse(K))}catch{return ze.none()}},Ho={getLinks:K=>{const de=Be=>K.convertURL(Be.value||Be.url||"","href"),we=Jt(K);return new Promise(Be=>{N(we)?fetch(we).then(ot=>ot.ok?ot.text().then(xf):Promise.reject()).then(Be,()=>Be(ze.none())):Fe(we)?we(ot=>Be(ze.some(ot))):Be(ze.from(we))}).then(Be=>Be.bind(zt.sanitizeWith(de)).map(ot=>ot.length>0?[{text:"None",value:""}].concat(ot):ot))}},Ef={getRels:(K,de)=>{const we=Xo(K);if(we.length>0){const Be=Fn(de,"_blank"),ot=yt(K)===!1,an=ts=>Qo(zt.getValue(ts),Be);return(ot?zt.sanitizeWith(an):zt.sanitize)(we)}return ze.none()}},ku=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],yr={getTargets:K=>{const de=qs(K);return G(de)?zt.sanitize(de).orThunk(()=>ze.some(ku)):de===!1?ze.none():ze.some(ku)}},$s=(K,de,we)=>{const Be=K.getAttrib(de,we);return Be!==null&&Be.length>0?ze.some(Be):ze.none()},Ja=(K,de)=>{const we=K.dom,ot=Ct(K)?ze.some(Dr(K.selection,de)):ze.none(),an=de.bind(Xn=>ze.from(we.getAttrib(Xn,"href"))),Do=de.bind(Xn=>ze.from(we.getAttrib(Xn,"target"))),ts=de.bind(Xn=>$s(we,Xn,"rel")),_o=de.bind(Xn=>$s(we,Xn,"class")),ms=de.bind(Xn=>$s(we,Xn,"title"));return{url:an,text:ot,title:ms,target:Do,rel:ts,linkClass:_o}},zl={collect:(K,de)=>Ho.getLinks(K).then(we=>{const Be=Ja(K,de);return{anchor:Be,catalogs:{targets:yr.getTargets(K),rels:Ef.getRels(K,Be.target),classes:Hl.getClasses(K),anchor:Ce.getAnchors(K),link:we},optNode:de,flags:{titleEnabled:Xe(K)}}})},Td=(K,de)=>we=>{const Be=we.getData();if(!Be.url.value){Fl(K),we.close();return}const ot=ts=>ze.from(Be[ts]).filter(_o=>!Fn(de.anchor[ts],_o)),an={href:Be.url.value,text:ot("text"),target:ot("target"),rel:ot("rel"),class:ot("linkClass"),title:ot("title")},Do={href:Be.url.value,attach:Be.url.meta!==void 0&&Be.url.meta.attach?Be.url.meta.attach:je};Pc.preprocess(K,an).then(ts=>{al(K,Do,ts)}),we.close()},Ou=K=>{const de=Ks(K);return zl.collect(K,de)},yo=(K,de)=>{const we=K.anchor,Be=we.url.getOr("");return{url:{value:Be,meta:{original:{value:Be}}},text:we.text.getOr(""),title:we.title.getOr(""),anchor:Be,link:Be,rel:we.rel.getOr(""),target:we.target.or(de).getOr(""),linkClass:we.linkClass.getOr("")}},sa=(K,de,we)=>{const Be=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],ot=K.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),an=K.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],Do=ze.from(qe(we)),ts=yo(K,Do),_o=K.catalogs,ms=Na.init(ts,_o);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:It([Be,ot,an,An([_o.anchor.map(zt.createUi("anchor","Anchors")),_o.rels.map(zt.createUi("rel","Rel")),_o.targets.map(zt.createUi("target","Open link in...")),_o.link.map(zt.createUi("link","Link list")),_o.classes.map(zt.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ts,onChange:(Rs,{name:ei})=>{ms.onChange(Rs.getData,{name:ei}).each(Hg=>{Rs.setData(Hg)})},onSubmit:de}},ic=K=>{Ou(K).then(we=>{const Be=Td(K,we);return sa(we,Be,K)}).then(we=>{K.windowManager.open(we)})},cl=K=>{K.addCommand("mceLink",(de,we)=>{(we==null?void 0:we.dialog)===!0||!Z(K)?ic(K):K.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})};var mi=tinymce.util.Tools.resolve("tinymce.util.VK");const Ys=(K,de)=>{document.body.appendChild(K),K.dispatchEvent(de),document.body.removeChild(K)},es=K=>{const de=document.createElement("a");de.target="_blank",de.href=K,de.rel="noreferrer noopener";const we=document.createEvent("MouseEvents");we.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),Ys(de,we)},ya=(K,de)=>K.dom.getParent(de,"a[href]"),Tf=K=>ya(K,K.selection.getStart()),So=K=>K.altKey===!0&&K.shiftKey===!1&&K.ctrlKey===!1&&K.metaKey===!1,Hr=(K,de)=>{if(de){const we=Jo(de);if(/^#/.test(we)){const Be=K.dom.select(we);Be.length&&K.selection.scrollIntoView(Be[0],!0)}else es(de.href)}},Ba=K=>()=>{K.execCommand("mceLink",!1,{dialog:!0})},cr=K=>()=>{Hr(K,Tf(K))},Nc=K=>{K.on("click",de=>{const we=ya(K,de.target);we&&mi.metaKeyPressed(de)&&(de.preventDefault(),Hr(K,we))}),K.on("keydown",de=>{if(!de.isDefaultPrevented()&&de.keyCode===13&&So(de)){const we=Tf(K);we&&(de.preventDefault(),Hr(K,we))}})},Bc=(K,de)=>(K.on("NodeChange",de),()=>K.off("NodeChange",de)),ra=K=>de=>{const we=()=>{de.setActive(!K.mode.isReadOnly()&&$i(K,K.selection.getNode())),de.setEnabled(K.selection.isEditable())};return we(),Bc(K,we)},$c=K=>de=>{const we=()=>{de.setEnabled(K.selection.isEditable())};return we(),Bc(K,we)},Hi=K=>(K.selection.isCollapsed()?Sd(K.dom.getParents(K.selection.getStart())):Mc(K.selection.getRng())).length===1,Ig=K=>de=>{const we=()=>de.setEnabled(Hi(K));return we(),Bc(K,we)},Ic=K=>de=>{const we=an=>Rr(an)||vm(K.selection.getRng()),Be=K.dom.getParents(K.selection.getStart()),ot=an=>{de.setEnabled(we(an)&&K.selection.isEditable())};return ot(Be),Bc(K,an=>ot(an.parents))},Fg=K=>{K.addShortcut("Meta+K","",()=>{K.execCommand("mceLink")})},fi=K=>{K.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Ba(K),onSetup:ra(K)}),K.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:cr(K),onSetup:Ig(K)}),K.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Fl(K),onSetup:Ic(K)})},Vl=K=>{K.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:cr(K),onSetup:Ig(K)}),K.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onSetup:$c(K),onAction:Ba(K)}),K.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Fl(K),onSetup:Ic(K)})},_f=K=>{const de="link unlink openlink",we="link";K.ui.registry.addContextMenu("link",{update:Be=>K.dom.isEditable(Be)?Rr(K.dom.getParents(Be,"a"))?de:we:""})},kf=K=>{const de=ot=>{ot.selection.collapse(!1)},we=ot=>{const an=K.selection.getNode();return ot.setEnabled($i(K,an)),je},Be=ot=>{const an=Ks(K),Do=Ct(K);if(an.isNone()&&Do){const ts=Dr(K.selection,an);return Dt(ts.length===0,ot)}else return ze.none()};K.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:ra(K)},label:"Link",predicate:ot=>Eo(K)&&$i(K,ot),initValue:()=>Ks(K).fold(He(""),Jo),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:ot=>{const an=K.selection.getNode();return ot.setActive($i(K,an)),ra(K)(ot)},onAction:ot=>{const an=ot.getValue(),Do=Be(an);al(K,{href:an,attach:je},{href:an,text:Do,title:ze.none(),rel:ze.none(),target:ze.none(),class:ze.none()}),de(K),ot.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:we,onAction:ot=>{Fl(K),ot.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:we,onAction:ot=>{cr(K)(),ot.hide()}}]})};var Lg=()=>{w.add("link",K=>{fo(K),fi(K),Vl(K),_f(K),kf(K),Nc(K),cl(K),Fg(K)})};Lg()})();(function(){var w=tinymce.util.Tools.resolve("tinymce.PluginManager");const f=(k,$,W)=>{var se;return W(k,$.prototype)?!0:((se=k.constructor)===null||se===void 0?void 0:se.name)===$.name},p=k=>{const $=typeof k;return k===null?"null":$==="object"&&Array.isArray(k)?"array":$==="object"&&f(k,String,(W,se)=>se.isPrototypeOf(W))?"string":$},C=k=>$=>p($)===k,_=k=>$=>typeof $===k,P=C("string"),N=C("object"),z=C("array"),G=_("boolean"),te=k=>k==null,ie=k=>!te(k),me=_("function"),xe=_("number"),Fe=()=>{},ve=(k,$)=>W=>k($(W)),je=k=>()=>k,He=(k,$)=>k===$;function Zt(k,...$){return(...W)=>{const se=$.concat(W);return k.apply(null,se)}}const ze=k=>$=>!k($),Q=je(!1);class Ge{constructor($,W){this.tag=$,this.value=W}static some($){return new Ge(!0,$)}static none(){return Ge.singletonNone}fold($,W){return this.tag?W(this.value):$()}isSome(){return this.tag}isNone(){return!this.tag}map($){return this.tag?Ge.some($(this.value)):Ge.none()}bind($){return this.tag?$(this.value):Ge.none()}exists($){return this.tag&&$(this.value)}forall($){return!this.tag||$(this.value)}filter($){return!this.tag||$(this.value)?this:Ge.none()}getOr($){return this.tag?this.value:$}or($){return this.tag?this:$}getOrThunk($){return this.tag?this.value:$()}orThunk($){return this.tag?this:$()}getOrDie($){if(this.tag)return this.value;throw new Error($??"Called getOrDie on None")}static from($){return ie($)?Ge.some($):Ge.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each($){this.tag&&$(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ge.singletonNone=new Ge(!1);const gn=Array.prototype.slice,_t=Array.prototype.indexOf,ae=Array.prototype.push,ut=(k,$)=>_t.call(k,$),bt=(k,$)=>ut(k,$)>-1,It=(k,$)=>{for(let W=0,se=k.length;W<se;W++){const fe=k[W];if($(fe,W))return!0}return!1},Te=(k,$)=>{const W=k.length,se=new Array(W);for(let fe=0;fe<W;fe++){const tt=k[fe];se[fe]=$(tt,fe)}return se},ue=(k,$)=>{for(let W=0,se=k.length;W<se;W++){const fe=k[W];$(fe,W)}},Fn=(k,$)=>{const W=[];for(let se=0,fe=k.length;se<fe;se++){const tt=k[se];$(tt,se)&&W.push(tt)}return W},An=(k,$)=>{if(k.length===0)return[];{let W=$(k[0]);const se=[];let fe=[];for(let tt=0,Ft=k.length;tt<Ft;tt++){const bn=k[tt],pn=$(bn);pn!==W&&(se.push(fe),fe=[]),W=pn,fe.push(bn)}return fe.length!==0&&se.push(fe),se}},Dt=(k,$,W)=>(ue(k,(se,fe)=>{W=$(W,se,fe)}),W),R=(k,$,W)=>{for(let se=0,fe=k.length;se<fe;se++){const tt=k[se];if($(tt,se))return Ge.some(tt);if(W(tt,se))break}return Ge.none()},fo=(k,$)=>R(k,$,Q),ft=k=>{const $=[];for(let W=0,se=k.length;W<se;++W){if(!z(k[W]))throw new Error("Arr.flatten item "+W+" was not an array, input: "+k);ae.apply($,k[W])}return $},Eo=(k,$)=>ft(Te(k,$)),Jt=k=>{const $=gn.call(k,0);return $.reverse(),$},qe=(k,$)=>$>=0&&$<k.length?Ge.some(k[$]):Ge.none(),go=k=>qe(k,0),qs=k=>qe(k,k.length-1),Xo=(k,$)=>{const W=[],se=me($)?fe=>It(W,tt=>$(tt,fe)):fe=>bt(W,fe);for(let fe=0,tt=k.length;fe<tt;fe++){const Ft=k[fe];se(Ft)||W.push(Ft)}return W},ar=(k,$,W=He)=>k.exists(se=>W(se,$)),Xe=(k,$,W=He)=>yt(k,$,W).getOr(k.isNone()&&$.isNone()),yt=(k,$,W)=>k.isSome()&&$.isSome()?Ge.some(W(k.getOrDie(),$.getOrDie())):Ge.none(),Z=8,di=9,vo=11,ds=1,To=3,Sf=(k,$)=>{const se=($||document).createElement("div");if(se.innerHTML=k,!se.hasChildNodes()||se.childNodes.length>1){const fe="HTML does not have a single root node";throw console.error(fe,k),new Error(fe)}return zt(se.childNodes[0])},on=(k,$)=>{const se=($||document).createElement(k);return zt(se)},Po=(k,$)=>{const se=($||document).createTextNode(k);return zt(se)},zt=k=>{if(k==null)throw new Error("Node cannot be null or undefined");return{dom:k}},eo={fromHtml:Sf,fromTag:on,fromText:Po,fromDom:zt,fromPoint:(k,$,W)=>Ge.from(k.dom.elementFromPoint($,W)).map(zt)},ws=(k,$)=>{const W=k.dom;if(W.nodeType!==ds)return!1;{const se=W;if(se.matches!==void 0)return se.matches($);if(se.msMatchesSelector!==void 0)return se.msMatchesSelector($);if(se.webkitMatchesSelector!==void 0)return se.webkitMatchesSelector($);if(se.mozMatchesSelector!==void 0)return se.mozMatchesSelector($);throw new Error("Browser lacks native selectors")}},jt=(k,$)=>k.dom===$.dom,Il=(k,$)=>{const W=k.dom,se=$.dom;return W===se?!1:W.contains(se)},as=ws,Tu=typeof window<"u"?window:Function("return this;")(),As=(k,$)=>{let W=$??Tu;for(let se=0;se<k.length&&W!==void 0&&W!==null;++se)W=W[k[se]];return W},ea=(k,$)=>{const W=k.split(".");return As(W,$)},bm=(k,$)=>ea(k,$),Ya=(k,$)=>{const W=bm(k,$);if(W==null)throw new Error(k+" not available on this browser");return W},tr=Object.getPrototypeOf,os=k=>Ya("HTMLElement",k),Cd=k=>{const $=ea("ownerDocument.defaultView",k);return N(k)&&(os($).prototype.isPrototypeOf(k)||/^HTML\w*Element$/.test(tr(k).constructor.name))},Jo=k=>k.dom.nodeName.toLowerCase(),Qo=k=>k.dom.nodeType,sl=k=>$=>Qo($)===k,Ks=k=>Qo(k)===Z||Jo(k)==="#comment",$i=k=>Dr(k)&&Cd(k.dom),Dr=sl(ds),Mc=sl(To),Sd=sl(di),Rr=sl(vo),vm=k=>$=>Dr($)&&Jo($)===k,Ct=k=>eo.fromDom(k.dom.ownerDocument),oo=k=>Sd(k)?k:Ct(k),ta=k=>Ge.from(k.dom.parentNode).map(eo.fromDom),Pa=k=>Ge.from(k.dom.parentElement).map(eo.fromDom),ym=k=>Ge.from(k.dom.nextSibling).map(eo.fromDom),Ii=k=>Te(k.dom.childNodes,eo.fromDom),Wo=(k,$)=>{const W=k.dom.childNodes;return Ge.from(W[$]).map(eo.fromDom)},Fi=k=>Wo(k,0),rl=k=>Wo(k,k.dom.childNodes.length-1),Lo=k=>Rr(k)&&ie(k.dom.host),va=me(Element.prototype.attachShadow)&&me(Node.prototype.getRootNode)?k=>eo.fromDom(k.dom.getRootNode()):oo,al=k=>{const $=va(k);return Lo($)?Ge.some($):Ge.none()},Fl=k=>eo.fromDom(k.dom.host),wm=k=>{const $=Mc(k)?k.dom.parentNode:k.dom;if($==null||$.ownerDocument===null)return!1;const W=$.ownerDocument;return al(eo.fromDom($)).fold(()=>W.body.contains($),ve(wm,Fl))};var na=(k,$,W,se,fe)=>k(W,se)?Ge.some(W):me(fe)&&fe(W)?Ge.none():$(W,se,fe);const ir=(k,$,W)=>{let se=k.dom;const fe=me(W)?W:Q;for(;se.parentNode;){se=se.parentNode;const tt=eo.fromDom(se);if($(tt))return Ge.some(tt);if(fe(tt))break}return Ge.none()},Ds=(k,$,W)=>na((fe,tt)=>tt(fe),ir,k,$,W),Li=(k,$,W)=>ir(k,se=>ws(se,$),W),Cm=(k,$,W)=>na((fe,tt)=>ws(fe,tt),Li,k,$,W),il=k=>Cm(k,"[contenteditable]"),Na=(k,$=!1)=>wm(k)?k.dom.isContentEditable:il(k).fold(je($),W=>Cs(W)==="true"),Cs=k=>k.dom.contentEditable,Xa=(k,$)=>{ta(k).each(se=>{se.dom.insertBefore($.dom,k.dom)})},Ll=(k,$)=>{ym(k).fold(()=>{ta(k).each(fe=>{_u(fe,$)})},se=>{Xa(se,$)})},Zp=(k,$)=>{Fi(k).fold(()=>{_u(k,$)},se=>{k.dom.insertBefore($.dom,se.dom)})},_u=(k,$)=>{k.dom.appendChild($.dom)},Pc=(k,$)=>{ue($,W=>{Xa(k,W)})},jp=(k,$)=>{ue($,W=>{_u(k,W)})},Ce=k=>{k.dom.textContent="",ue(Ii(k),$=>{oa($)})},oa=k=>{const $=k.dom;$.parentNode!==null&&$.parentNode.removeChild($)};var Hl=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),xf=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),xd=tinymce.util.Tools.resolve("tinymce.util.VK");const Ho=k=>Te(k,eo.fromDom),$g=Object.keys,Ef=(k,$)=>{const W=$g(k);for(let se=0,fe=W.length;se<fe;se++){const tt=W[se],Ft=k[tt];$(Ft,tt)}},ku=k=>($,W)=>{k[W]=$},Ed=(k,$,W,se)=>{Ef(k,(fe,tt)=>{($(fe,tt)?W:se)(fe,tt)})},yr=(k,$)=>{const W={};return Ed(k,$,ku(W),Fe),W},$s=(k,$,W)=>{if(P(W)||G(W)||xe(W))k.setAttribute($,W+"");else throw console.error("Invalid call to Attribute.set. Key ",$,":: Value ",W,":: Element ",k),new Error("Attribute value was not simple")},Ja=(k,$)=>{const W=k.dom;Ef($,(se,fe)=>{$s(W,fe,se)})},Qa=k=>Dt(k.dom.attributes,($,W)=>($[W.name]=W.value,$),{}),zl=(k,$)=>eo.fromDom(k.dom.cloneNode($)),Td=k=>zl(k,!0),Ou=(k,$)=>{const W=eo.fromTag($),se=Qa(k);return Ja(W,se),W},yo=(k,$)=>{const W=Ou(k,$);Ll(k,W);const se=Ii(k);return jp(W,se),oa(k),W};var sa=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ic=tinymce.util.Tools.resolve("tinymce.util.Tools");const cl=k=>$=>ie($)&&$.nodeName.toLowerCase()===k,mi=k=>$=>ie($)&&k.test($.nodeName),Ys=k=>ie(k)&&k.nodeType===3,es=k=>ie(k)&&k.nodeType===1,ya=mi(/^(OL|UL|DL)$/),Tf=mi(/^(OL|UL)$/),So=cl("ol"),Hr=mi(/^(LI|DT|DD)$/),Ba=mi(/^(DT|DD)$/),cr=mi(/^(TH|TD)$/),Nc=cl("br"),Bc=k=>{var $;return(($=k.parentNode)===null||$===void 0?void 0:$.firstChild)===k},ra=(k,$)=>ie($)&&$.nodeName in k.schema.getTextBlockElements(),$c=(k,$)=>ie(k)&&k.nodeName in $,Hi=(k,$)=>ie($)&&$.nodeName in k.schema.getVoidElements(),Ig=(k,$)=>Nc($)?k.isBlock($.nextSibling)&&!Nc($.previousSibling):!1,Ic=(k,$,W)=>{const se=k.isEmpty($);return W&&k.select("span[data-mce-type=bookmark]",$).length>0?!1:se},Fg=(k,$)=>k.isChildOf($,k.getRoot()),fi=k=>$=>$.options.get(k),Vl=k=>{const $=k.options.register;$("lists_indent_on_tab",{processor:"boolean",default:!0})},_f=fi("lists_indent_on_tab"),kf=fi("forced_root_block"),Lg=fi("forced_root_block_attrs"),K=(k,$)=>{const W=k.dom,se=k.schema.getBlockElements(),fe=W.createFragment(),tt=kf(k),Ft=Lg(k);let bn,pn,rn=!1;for(pn=W.create(tt,Ft),$c($.firstChild,se)||fe.appendChild(pn);bn=$.firstChild;){const ps=bn.nodeName;!rn&&(ps!=="SPAN"||bn.getAttribute("data-mce-type")!=="bookmark")&&(rn=!0),$c(bn,se)?(fe.appendChild(bn),pn=null):(pn||(pn=W.create(tt,Ft),fe.appendChild(pn)),pn.appendChild(bn))}return!rn&&pn&&pn.appendChild(W.create("br",{"data-mce-bogus":"1"})),fe},de=sa.DOM,we=(k,$,W)=>{const se=rn=>{const ps=rn.parentNode;ps&&ic.each(fe,Pr=>{ps.insertBefore(Pr,W.parentNode)}),de.remove(rn)},fe=de.select('span[data-mce-type="bookmark"]',$),tt=K(k,W),Ft=de.createRng();Ft.setStartAfter(W),Ft.setEndAfter($);const bn=Ft.extractContents();for(let rn=bn.firstChild;rn;rn=rn.firstChild)if(rn.nodeName==="LI"&&k.dom.isEmpty(rn)){de.remove(rn);break}k.dom.isEmpty(bn)||de.insertAfter(bn,$),de.insertAfter(tt,$);const pn=W.parentElement;pn&&Ic(k.dom,pn)&&se(pn),de.remove(W),Ic(k.dom,$)&&de.remove($)},Be=vm("dd"),ot=vm("dt"),an=(k,$)=>{Be($)?yo($,"dt"):ot($)&&Pa($).each(W=>we(k,W.dom,$.dom))},Do=k=>{ot(k)&&yo(k,"dd")},ts=(k,$,W)=>{$==="Indent"?ue(W,Do):ue(W,se=>an(k,se))},_o=(k,$)=>{if(Ys(k))return{container:k,offset:$};const W=Hl.getNode(k,$);return Ys(W)?{container:W,offset:$>=k.childNodes.length?W.data.length:0}:W.previousSibling&&Ys(W.previousSibling)?{container:W.previousSibling,offset:W.previousSibling.data.length}:W.nextSibling&&Ys(W.nextSibling)?{container:W.nextSibling,offset:0}:{container:k,offset:$}},ms=k=>{const $=k.cloneRange(),W=_o(k.startContainer,k.startOffset);$.setStart(W.container,W.offset);const se=_o(k.endContainer,k.endOffset);return $.setEnd(se.container,se.offset),$},Xn=["OL","UL","DL"],Rs=Xn.join(","),ei=(k,$)=>{const W=$||k.selection.getStart(!0);return k.dom.getParent(W,Rs,Ul(k,W))},Hg=(k,$)=>ie(k)&&$.length===1&&$[0]===k,Et=k=>Fn(k.querySelectorAll(Rs),ya),Of=k=>{const $=ei(k),W=k.selection.getSelectedBlocks();return Hg($,W)?Et($):Fn(W,se=>ya(se)&&$!==se)},Ms=(k,$)=>{const W=ic.map($,se=>{const fe=k.dom.getParent(se,"li,dd,dt",Ul(k,se));return fe||se});return Xo(W)},zr=k=>{const $=k.selection.getSelectedBlocks();return Fn(Ms(k,$),Hr)},Gp=k=>Fn(zr(k),Ba),Ss=(k,$)=>{const W=k.dom.getParents($,"TD,TH");return W.length>0?W[0]:k.getBody()},Vy=(k,$)=>!ya($)&&!Hr($)&&It(Xn,W=>k.isValidChild($.nodeName,W)),Ul=(k,$)=>{const W=k.dom.getParents($,k.dom.isBlock);return fo(W,fe=>Vy(k.schema,fe)).getOr(k.getBody())},Af=k=>ta(k).exists($=>Hr($.dom)&&Fi($).exists(W=>!ya(W.dom))&&rl($).exists(W=>!ya(W.dom))),vn=(k,$)=>{const W=k.dom.getParents($,"ol,ul",Ul(k,$));return qs(W)},ti=k=>{const $=vn(k,k.selection.getStart()),W=Fn(k.selection.getSelectedBlocks(),Tf);return $.toArray().concat(W)},at=k=>{const $=k.selection.getStart();return k.dom.getParents($,"ol,ul",Ul(k,$))},Ps=k=>{const $=ti(k),W=at(k);return fo(W,se=>Af(eo.fromDom(se))).fold(()=>Df(k,$),se=>[se])},Df=(k,$)=>{const W=Te($,se=>vn(k,se).getOr(se));return Xo(W)},Xs=k=>/\btox\-/.test(k.className),Mr=(k,$)=>R(k,ya,cr).exists(W=>W.nodeName===$&&!Xs(W)),Wl=(k,$)=>$!==null&&!k.dom.isEditable($),to=k=>{const $=ei(k);return Wl(k,$)},gi=(k,$)=>{const W=k.dom.getParent($,"ol,ul,dl");return Wl(k,W)},wr=(k,$)=>{const W=k.selection.getNode();return $({parents:k.dom.getParents(W),element:W}),k.on("NodeChange",$),()=>k.off("NodeChange",$)},_d=(k,$)=>{const se=document.createDocumentFragment();return ue(k,fe=>{se.appendChild(fe.dom)}),eo.fromDom(se)},fs=(k,$,W)=>k.dispatch("ListMutation",{action:$,element:W}),qp=(k=>$=>$.replace(k,""))(/^\s+|\s+$/g),Kp=k=>k.length>0,co=k=>!Kp(k),Yp=k=>k.style!==void 0&&me(k.style.getPropertyValue),Au=(k,$,W)=>{if(!P(W))throw console.error("Invalid call to CSS.set. Property ",$,":: Value ",W,":: Element ",k),new Error("CSS value must be a string: "+W);Yp(k)&&k.style.setProperty($,W)},cc=(k,$,W)=>{const se=k.dom;Au(se,$,W)},Fc=k=>as(k,"OL,UL"),Rf=k=>as(k,"LI"),Jn=k=>Fi(k).exists(Fc),lr=k=>rl(k).exists(Fc),$a=k=>"listAttributes"in k,ev=k=>"isComment"in k,gs=k=>"isFragment"in k,Vr=k=>k.depth>0,Ur=k=>k.isSelected,tv=k=>{const $=Ii(k),W=lr(k)?$.slice(0,-1):$;return Te(W,Td)},Xp=(k,$,W)=>ta(k).filter(Dr).map(se=>({depth:$,dirty:!1,isSelected:W,content:tv(k),itemAttributes:Qa(k),listAttributes:Qa(se),listType:Jo(se),isInPreviousLi:!1})),zi=(k,$)=>{_u(k.item,$.list)},zg=k=>{for(let $=1;$<k.length;$++)zi(k[$-1],k[$])},ns=(k,$)=>{yt(qs(k),go($),zi)},Lc=(k,$)=>{const W={list:eo.fromTag($,k),item:eo.fromTag("li",k)};return _u(W.list,W.item),W},wa=(k,$,W)=>{const se=[];for(let fe=0;fe<W;fe++)se.push(Lc(k,$a($)?$.listType:$.parentListType));return se},ll=(k,$)=>{for(let W=0;W<k.length-1;W++)cc(k[W].item,"list-style-type","none");qs(k).each(W=>{$a($)&&(Ja(W.list,$.listAttributes),Ja(W.item,$.itemAttributes)),jp(W.item,$.content)})},Du=(k,$)=>{Jo(k.list)!==$.listType&&(k.list=yo(k.list,$.listType)),Ja(k.list,$.listAttributes)},Is=(k,$,W)=>{const se=eo.fromTag("li",k);return Ja(se,$),jp(se,W),se},Hc=(k,$)=>{_u(k.list,$),k.item=$},Sm=(k,$,W)=>{const se=$.slice(0,W.depth);return qs(se).each(fe=>{if($a(W)){const tt=Is(k,W.itemAttributes,W.content);Hc(fe,tt),Du(fe,W)}else if(gs(W))jp(fe.item,W.content);else{const tt=eo.fromHtml(`<!--${W.content}-->`);_u(fe.list,tt)}}),se},Mf=(k,$,W)=>{const se=wa(k,W,W.depth-$.length);return zg(se),ll(se,W),ns($,se),$.concat(se)},nv=(k,$)=>{let W=Ge.none();const se=Dt($,(fe,tt,Ft)=>ev(tt)?Ft===0?(W=Ge.some(tt),fe):Sm(k,fe,tt):tt.depth>fe.length?Mf(k,fe,tt):Sm(k,fe,tt),[]);return W.each(fe=>{const tt=eo.fromHtml(`<!--${fe.content}-->`);go(se).each(Ft=>{Zp(Ft.list,tt)})}),go(se).map(fe=>fe.list)},ov=(k,$)=>{switch(k){case"Indent":$.depth++;break;case"Outdent":$.depth--;break;case"Flatten":$.depth=0}$.dirty=!0},ul=(k,$)=>{$a(k)&&$a($)&&(k.listType=$.listType,k.listAttributes={...$.listAttributes})},Vg=k=>{k.listAttributes=yr(k.listAttributes,($,W)=>W!=="start")},ni=(k,$)=>{const W=k[$].depth,se=tt=>tt.depth===W&&!tt.dirty,fe=tt=>tt.depth<W;return R(Jt(k.slice(0,$)),se,fe).orThunk(()=>R(k.slice($+1),se,fe))},Ug=k=>(ue(k,($,W)=>{ni(k,W).fold(()=>{$.dirty&&$a($)&&Vg($)},se=>ul($,se))}),k),sv=k=>{let $=k;return{get:()=>$,set:fe=>{$=fe}}},Ru=(k,$,W,se)=>{var fe;if(Ks(se))return[{depth:k+1,content:(fe=se.dom.nodeValue)!==null&&fe!==void 0?fe:"",dirty:!1,isSelected:!1,isComment:!0}];$.each(bn=>{jt(bn.start,se)&&W.set(!0)});const tt=Xp(se,k,W.get());$.each(bn=>{jt(bn.end,se)&&W.set(!1)});const Ft=rl(se).filter(Fc).map(bn=>dl(k,$,W,bn)).getOr([]);return tt.toArray().concat(Ft)},Jp=(k,$,W,se)=>Fi(se).filter(Fc).fold(()=>Ru(k,$,W,se),fe=>{const tt=Dt(Ii(se),(Ft,bn,pn)=>{if(pn===0)return Ft;if(Rf(bn))return Ft.concat(Ru(k,$,W,bn));{const rn={isFragment:!0,depth:k,content:[bn],isSelected:!1,dirty:!1,parentListType:Jo(fe)};return Ft.concat(rn)}},[]);return dl(k,$,W,fe).concat(tt)}),dl=(k,$,W,se)=>Eo(Ii(se),fe=>{const tt=Fc(fe)?dl:Jp,Ft=k+1;return tt(Ft,$,W,fe)}),Uy=(k,$)=>{const W=sv(!1),se=0;return Te(k,fe=>({sourceList:fe,entries:dl(se,$,W,fe)}))},Od=(k,$)=>{const W=Ug($);return Te(W,se=>{const fe=ev(se)?_d([eo.fromHtml(`<!--${se.content}-->`)]):_d(se.content);return eo.fromDom(K(k,fe.dom))})},Wy=(k,$)=>{const W=Ug($);return nv(k.contentDocument,W).toArray()},Zy=(k,$)=>Eo(An($,Vr),W=>go(W).exists(Vr)?Wy(k,W):Od(k,W)),jy=(k,$)=>{ue(Fn(k,Ur),W=>ov($,W))},Pf=k=>{const $=Te(zr(k),eo.fromDom);return yt(fo($,ze(Jn)),fo(Jt($),ze(Jn)),(W,se)=>({start:W,end:se}))},Gy=(k,$,W)=>{const se=Uy($,Pf(k));ue(se,fe=>{jy(fe.entries,W);const tt=Zy(k,fe.entries);ue(tt,Ft=>{fs(k,W==="Indent"?"IndentList":"OutdentList",Ft.dom)}),Pc(fe.sourceList,tt),oa(fe.sourceList)})},re=(k,$)=>{const W=Ho(Ps(k)),se=Ho(Gp(k));let fe=!1;if(W.length||se.length){const tt=k.selection.getBookmark();Gy(k,W,$),ts(k,$,se),k.selection.moveToBookmark(tt),k.selection.setRng(ms(k.selection.getRng())),k.nodeChanged(),fe=!0}return fe},Mu=(k,$)=>!to(k)&&re(k,$),Vi=k=>Mu(k,"Indent"),xm=k=>Mu(k,"Outdent"),Qp=k=>Mu(k,"Flatten"),qy="\uFEFF",so=k=>k===qy,Ca=(k,$,W)=>ir(k,$,W).isSome(),ml=(k,$)=>Ca(k,Zt(jt,$));var Zl=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const Pu=sa.DOM,fl=k=>{const $={},W=se=>{let fe=k[se?"startContainer":"endContainer"],tt=k[se?"startOffset":"endOffset"];if(es(fe)){const Ft=Pu.create("span",{"data-mce-type":"bookmark"});fe.hasChildNodes()?(tt=Math.min(tt,fe.childNodes.length-1),se?fe.insertBefore(Ft,fe.childNodes[tt]):Pu.insertAfter(Ft,fe.childNodes[tt])):fe.appendChild(Ft),fe=Ft,tt=0}$[se?"startContainer":"endContainer"]=fe,$[se?"startOffset":"endOffset"]=tt};return W(!0),k.collapsed||W(),$},aa=k=>{const $=se=>{const fe=bn=>{var pn;let rn=(pn=bn.parentNode)===null||pn===void 0?void 0:pn.firstChild,ps=0;for(;rn;){if(rn===bn)return ps;(!es(rn)||rn.getAttribute("data-mce-type")!=="bookmark")&&ps++,rn=rn.nextSibling}return-1};let tt=k[se?"startContainer":"endContainer"],Ft=k[se?"startOffset":"endOffset"];if(tt){if(es(tt)&&tt.parentNode){const bn=tt;Ft=fe(tt),tt=tt.parentNode,Pu.remove(bn),!tt.hasChildNodes()&&Pu.isBlock(tt)&&tt.appendChild(Pu.create("br"))}k[se?"startContainer":"endContainer"]=tt,k[se?"startOffset":"endOffset"]=Ft}};$(!0),$();const W=Pu.createRng();return W.setStart(k.startContainer,k.startOffset),k.endContainer&&W.setEnd(k.endContainer,k.endOffset),ms(W)},jl=k=>{switch(k){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},rv=(k,$,W)=>{const se=W["list-style-type"]?W["list-style-type"]:null;k.setStyle($,"list-style-type",se)},av=(k,$)=>{ic.each($,(W,se)=>{k.setAttribute(se,W)})},zc=(k,$,W)=>{av($,W["list-attributes"]),ic.each(k.select("li",$),se=>{av(se,W["list-item-attributes"])})},gl=(k,$,W)=>{rv(k,$,W),zc(k,$,W)},e1=(k,$,W)=>{ic.each(W,se=>k.setStyle($,se,""))},Sa=(k,$)=>ie($)&&!$c($,k.schema.getBlockElements()),ur=(k,$,W,se)=>{let fe=$[W?"startContainer":"endContainer"];const tt=$[W?"startOffset":"endOffset"];es(fe)&&(fe=fe.childNodes[Math.min(tt,fe.childNodes.length-1)]||fe),!W&&Nc(fe.nextSibling)&&(fe=fe.nextSibling);const Ft=pn=>{for(;!k.dom.isBlock(pn)&&pn.parentNode&&se!==pn;)pn=pn.parentNode;return pn},bn=(pn,rn)=>{var ps;const Pr=new xf(pn,Ft(pn)),Ui=rn?"next":"prev";let Gl;for(;Gl=Pr[Ui]();)if(!(Hi(k,Gl)||so(Gl.textContent)||((ps=Gl.textContent)===null||ps===void 0?void 0:ps.length)===0))return Ge.some(Gl);return Ge.none()};if(W&&Ys(fe))if(so(fe.textContent))fe=bn(fe,!1).getOr(fe);else for(fe.parentNode!==null&&Sa(k,fe.parentNode)&&(fe=fe.parentNode);fe.previousSibling!==null&&(Sa(k,fe.previousSibling)||Ys(fe.previousSibling));)fe=fe.previousSibling;if(!W&&Ys(fe))if(so(fe.textContent))fe=bn(fe,!0).getOr(fe);else for(fe.parentNode!==null&&Sa(k,fe.parentNode)&&(fe=fe.parentNode);fe.nextSibling!==null&&(Sa(k,fe.nextSibling)||Ys(fe.nextSibling));)fe=fe.nextSibling;for(;fe.parentNode!==se;){const pn=fe.parentNode;if(ra(k,fe)||/^(TD|TH)$/.test(pn.nodeName))return fe;fe=pn}return fe},Ad=(k,$,W)=>{const se=[],fe=k.dom,tt=ur(k,$,!0,W),Ft=ur(k,$,!1,W);let bn;const pn=[];for(let rn=tt;rn&&(pn.push(rn),rn!==Ft);rn=rn.nextSibling);return ic.each(pn,rn=>{var ps;if(ra(k,rn)){se.push(rn),bn=null;return}if(fe.isBlock(rn)||Nc(rn)){Nc(rn)&&fe.remove(rn),bn=null;return}const Pr=rn.nextSibling;if(Zl.isBookmarkNode(rn)&&(ya(Pr)||ra(k,Pr)||!Pr&&rn.parentNode===W)){bn=null;return}bn||(bn=fe.create("p"),(ps=rn.parentNode)===null||ps===void 0||ps.insertBefore(bn,rn),se.push(bn)),bn.appendChild(rn)}),se},Nf=(k,$,W)=>{const se=k.getStyle($,"list-style-type");let fe=W?W["list-style-type"]:"";return fe=fe===null?"":fe,se===fe},Vc=(k,$)=>{const W=k.selection.getStart(!0),se=ur(k,$,!0,k.getBody());return ml(eo.fromDom(se),eo.fromDom($.commonAncestorContainer))?$.commonAncestorContainer:W},Ia=(k,$,W)=>{const se=k.selection.getRng();let fe="LI";const tt=Ul(k,Vc(k,se)),Ft=k.dom;if(Ft.getContentEditable(k.selection.getNode())==="false")return;$=$.toUpperCase(),$==="DL"&&(fe="DT");const bn=fl(se),pn=Fn(Ad(k,se,tt),k.dom.isEditable);ic.each(pn,rn=>{let ps;const Pr=rn.previousSibling,Ui=rn.parentNode;Hr(Ui)||(Pr&&ya(Pr)&&Pr.nodeName===$&&Nf(Ft,Pr,W)?(ps=Pr,rn=Ft.rename(rn,fe),Pr.appendChild(rn)):(ps=Ft.create($),Ui.insertBefore(ps,rn),ps.appendChild(rn),rn=Ft.rename(rn,fe)),e1(Ft,rn,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),gl(Ft,ps,W),Em(k.dom,ps))}),k.selection.setRng(aa(bn))},iv=(k,$)=>ya(k)&&k.nodeName===($==null?void 0:$.nodeName),Ky=(k,$,W)=>{const se=k.getStyle($,"list-style-type",!0),fe=k.getStyle(W,"list-style-type",!0);return se===fe},Wg=(k,$)=>k.className===$.className,Zg=(k,$,W)=>iv($,W)&&Ky(k,$,W)&&Wg($,W),Em=(k,$)=>{let W,se=$.nextSibling;if(Zg(k,$,se)){const fe=se;for(;W=fe.firstChild;)$.appendChild(W);k.remove(fe)}if(se=$.previousSibling,Zg(k,$,se)){const fe=se;for(;W=fe.lastChild;)$.insertBefore(W,$.firstChild);k.remove(fe)}},hl=(k,$,W,se)=>{if($.nodeName!==W){const fe=k.dom.rename($,W);gl(k.dom,fe,se),fs(k,jl(W),fe)}else gl(k.dom,$,se),fs(k,jl(W),$)},cv=(k,$,W,se)=>{if($.classList.forEach((fe,tt,Ft)=>{fe.startsWith("tox-")&&(Ft.remove(fe),Ft.length===0&&$.removeAttribute("class"))}),$.nodeName!==W){const fe=k.dom.rename($,W);gl(k.dom,fe,se),fs(k,jl(W),fe)}else gl(k.dom,$,se),fs(k,jl(W),$)},P2=(k,$,W,se,fe)=>{const tt=ya($);if(tt&&$.nodeName===se&&!Yy(fe)&&!Xs($))Qp(k);else{Ia(k,se,fe);const Ft=fl(k.selection.getRng()),bn=tt?[$,...W]:W,pn=tt&&Xs($)?cv:hl;ic.each(bn,rn=>{pn(k,rn,se,fe)}),k.selection.setRng(aa(Ft))}},Yy=k=>"list-style-type"in k,Xy=(k,$,W,se)=>{if($!==k.getBody())if($)if($.nodeName===W&&!Yy(se)&&!Xs($))Qp(k);else{const fe=fl(k.selection.getRng());Xs($)&&$.classList.forEach((Ft,bn,pn)=>{Ft.startsWith("tox-")&&(pn.remove(Ft),pn.length===0&&$.removeAttribute("class"))}),gl(k.dom,$,se);const tt=k.dom.rename($,W);Em(k.dom,tt),k.selection.setRng(aa(fe)),Ia(k,W,se),fs(k,jl(W),tt)}else Ia(k,W,se),fs(k,jl(W),$)},Dd=(k,$,W)=>{const se=ei(k);if(gi(k,se))return;const fe=Of(k),tt=N(W)?W:{};fe.length>0?P2(k,se,fe,$,tt):Xy(k,se,$,tt)},t1=sa.DOM,Tm=(k,$)=>{const W=$.parentElement;if(W&&W.nodeName==="LI"&&W.firstChild===$){const se=W.previousSibling;se&&se.nodeName==="LI"?(se.appendChild($),Ic(k,W)&&t1.remove(W)):t1.setStyle(W,"listStyleType","none")}if(ya(W)){const se=W.previousSibling;se&&se.nodeName==="LI"&&se.appendChild($)}},hs=(k,$)=>{const W=ic.grep(k.select("ol,ul",$));ic.each(W,se=>{Tm(k,se)})},xs=(k,$,W,se)=>{let fe=$.startContainer;const tt=$.startOffset;if(Ys(fe)&&(W?tt<fe.data.length:tt>0))return fe;const Ft=k.schema.getNonEmptyElements();es(fe)&&(fe=Hl.getNode(fe,tt));const bn=new xf(fe,se);W&&Ig(k.dom,fe)&&bn.next();const pn=W?bn.next.bind(bn):bn.prev2.bind(bn);for(;fe=pn();)if(fe.nodeName==="LI"&&!fe.hasChildNodes()||Ft[fe.nodeName]||Ys(fe)&&fe.data.length>0)return fe;return null},hi=(k,$)=>{const W=$.childNodes;return W.length===1&&!ya(W[0])&&k.isBlock(W[0])},n1=k=>Ge.from(k).map(eo.fromDom).filter($i).exists($=>Na($)&&!bt(["details"],Jo($))),Jy=(k,$)=>{hi(k,$)&&n1($.firstChild)&&k.remove($.firstChild,!0)},Wr=(k,$,W)=>{let se;const fe=hi(k,W)?W.firstChild:W;if(Jy(k,$),!Ic(k,$,!0))for(;se=$.firstChild;)fe.appendChild(se)},Nu=(k,$,W)=>{let se;const fe=$.parentNode;if(!Fg(k,$)||!Fg(k,W))return;ya(W.lastChild)&&(se=W.lastChild),fe===W.lastChild&&Nc(fe.previousSibling)&&k.remove(fe.previousSibling);const tt=W.lastChild;tt&&Nc(tt)&&$.hasChildNodes()&&k.remove(tt),Ic(k,W,!0)&&Ce(eo.fromDom(W)),Wr(k,$,W),se&&W.appendChild(se);const bn=Il(eo.fromDom(W),eo.fromDom($))?k.getParents($,ya,W):[];k.remove($),ue(bn,pn=>{Ic(k,pn)&&pn!==k.getRoot()&&k.remove(pn)})},pi=(k,$,W)=>{Ce(eo.fromDom(W)),Nu(k.dom,$,W),k.selection.setCursorLocation(W,0)},pl=(k,$,W,se)=>{const fe=k.dom;if(fe.isEmpty(se))pi(k,W,se);else{const tt=fl($);Nu(fe,W,se),k.selection.setRng(aa(tt))}},lv=(k,$,W,se)=>{const fe=fl($);Nu(k.dom,W,se);const tt=aa(fe);k.selection.setRng(tt)},xn=(k,$)=>{const W=k.dom,se=k.selection,fe=se.getStart(),tt=Ss(k,fe),Ft=W.getParent(se.getStart(),"LI",tt);if(Ft){const bn=Ft.parentElement;if(bn===k.getBody()&&Ic(W,bn))return!0;const pn=ms(se.getRng()),rn=W.getParent(xs(k,pn,$,tt),"LI",tt),ps=rn&&($?W.isChildOf(Ft,rn):W.isChildOf(rn,Ft));if(rn&&rn!==Ft&&!ps)return k.undoManager.transact(()=>{$?pl(k,pn,rn,Ft):Bc(Ft)?xm(k):lv(k,pn,Ft,rn)}),!0;if(ps&&!$&&rn!==Ft)return k.undoManager.transact(()=>{if(pn.commonAncestorContainer.parentElement){const Pr=fl(pn),Ui=pn.commonAncestorContainer.parentElement;Wr(W,pn.commonAncestorContainer.parentElement,rn),Ui.remove();const Gl=aa(Pr);k.selection.setRng(Gl)}}),!0;if(!rn&&!$&&pn.startOffset===0&&pn.endOffset===0)return k.undoManager.transact(()=>{Qp(k)}),!0}return!1},oi=(k,$,W)=>{const se=k.getParent($.parentNode,k.isBlock,W);k.remove($),se&&k.isEmpty(se)&&k.remove(se)},Bu=(k,$)=>{const W=k.dom,se=k.selection.getStart(),fe=Ss(k,se),tt=W.getParent(se,W.isBlock,fe);if(tt&&W.isEmpty(tt)){const Ft=ms(k.selection.getRng()),bn=W.getParent(xs(k,Ft,$,fe),"LI",fe);if(bn){const pn=Ui=>bt(["td","th","caption"],Jo(Ui)),rn=Ui=>Ui.dom===fe,ps=Ds(eo.fromDom(bn),pn,rn),Pr=Ds(eo.fromDom(Ft.startContainer),pn,rn);return Xe(ps,Pr,jt)?(k.undoManager.transact(()=>{const Ui=bn.parentNode;oi(W,tt,fe),Em(W,Ui),k.selection.select(bn,!0),k.selection.collapse($)}),!0):!1}}return!1},_m=(k,$)=>xn(k,$)||Bu(k,$),o1=k=>{const $=k.selection.getStart(),W=Ss(k,$);return k.dom.getParent($,"LI,DT,DD",W)||zr(k).length>0},uv=k=>o1(k)?(k.undoManager.transact(()=>{k.execCommand("Delete"),hs(k.dom,k.getBody())}),!0):!1,xa=(k,$)=>{const W=k.selection;return!gi(k,W.getNode())&&(W.isCollapsed()?_m(k,$):uv(k))},nr=k=>{k.on("ExecCommand",$=>{const W=$.command.toLowerCase();(W==="delete"||W==="forwarddelete")&&o1(k)&&hs(k.dom,k.getBody())}),k.on("keydown",$=>{$.keyCode===xd.BACKSPACE?xa(k,!1)&&$.preventDefault():$.keyCode===xd.DELETE&&xa(k,!0)&&$.preventDefault()})},bi=k=>({backspaceDelete:$=>{xa(k,$)}}),or=(k,$)=>{const W=ei(k);W===null||gi(k,W)||k.undoManager.transact(()=>{N($.styles)&&k.dom.setStyles(W,$.styles),N($.attrs)&&Ef($.attrs,(se,fe)=>k.dom.setAttrib(W,fe,se))})},jg=k=>{const $=Jt(qp(k).split("")),W=Te($,(se,fe)=>{const tt=se.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,fe)*tt});return Dt(W,(se,fe)=>se+fe,0)},km=k=>{if(k--,k<0)return"";{const $=k%26,W=Math.floor(k/26),se=km(W),fe=String.fromCharCode(65+$);return se+fe}},Hs=k=>/^[A-Z]+$/.test(k),dr=k=>/^[a-z]+$/.test(k),Uc=k=>/^[0-9]+$/.test(k),Bf=k=>Uc(k)?2:Hs(k)?0:dr(k)?1:co(k)?3:4,Js=k=>{switch(Bf(k)){case 2:return Ge.some({listStyleType:Ge.none(),start:k});case 0:return Ge.some({listStyleType:Ge.some("upper-alpha"),start:jg(k).toString()});case 1:return Ge.some({listStyleType:Ge.some("lower-alpha"),start:jg(k).toString()});case 3:return Ge.some({listStyleType:Ge.none(),start:""});case 4:return Ge.none()}},s1=k=>{const $=parseInt(k.start,10);return ar(k.listStyleType,"upper-alpha")?km($):ar(k.listStyleType,"lower-alpha")?km($).toLowerCase():k.start},dv=k=>{const $=ei(k);!So($)||gi(k,$)||k.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:s1({start:k.dom.getAttrib($,"start","1"),listStyleType:Ge.from(k.dom.getStyle($,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:W=>{const se=W.getData();Js(se.start).each(fe=>{k.execCommand("mceListUpdate",!1,{attrs:{start:fe.start==="1"?"":fe.start},styles:{"list-style-type":fe.listStyleType.getOr("")}})}),W.close()}})},ko=(k,$)=>()=>{const W=ei(k);return ie(W)&&W.nodeName===$},Rd=k=>{k.addCommand("mceListProps",()=>{dv(k)})},ho=k=>{k.on("BeforeExecCommand",$=>{const W=$.command.toLowerCase();W==="indent"?Vi(k):W==="outdent"&&xm(k)}),k.addCommand("InsertUnorderedList",($,W)=>{Dd(k,"UL",W)}),k.addCommand("InsertOrderedList",($,W)=>{Dd(k,"OL",W)}),k.addCommand("InsertDefinitionList",($,W)=>{Dd(k,"DL",W)}),k.addCommand("RemoveList",()=>{Qp(k)}),Rd(k),k.addCommand("mceListUpdate",($,W)=>{N(W)&&or(k,W)}),k.addQueryStateHandler("InsertUnorderedList",ko(k,"UL")),k.addQueryStateHandler("InsertOrderedList",ko(k,"OL")),k.addQueryStateHandler("InsertDefinitionList",ko(k,"DL"))};var Wc=tinymce.util.Tools.resolve("tinymce.html.Node");const Gg=k=>k.type===3,$f=k=>k.length===0,Nn=k=>{const $=(fe,tt)=>{const Ft=Wc.create("li");ue(fe,bn=>Ft.append(bn)),tt?k.insert(Ft,tt,!0):k.append(Ft)},W=(fe,tt)=>Gg(tt)?[...fe,tt]:!$f(fe)&&!Gg(tt)?($(fe,tt),[]):fe,se=Dt(k.children(),W,[]);$f(se)||$(se)},Om=k=>{k.on("PreInit",()=>{const{parser:$}=k;$.addNodeFilter("ul,ol",W=>ue(W,Nn))})},mv=k=>{k.on("keydown",$=>{$.keyCode!==xd.TAB||xd.metaKeyPressed($)||k.undoManager.transact(()=>{($.shiftKey?xm(k):Vi(k))&&$.preventDefault()})})},r1=k=>{_f(k)&&mv(k),nr(k)},Qy=(k,$)=>W=>{const se=fe=>{W.setActive(Mr(fe.parents,$)),W.setEnabled(!gi(k,fe.element)&&k.selection.isEditable())};return W.setEnabled(k.selection.isEditable()),wr(k,se)},ew=k=>{const $=W=>()=>k.execCommand(W);k.hasPlugin("advlist")||(k.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:$("InsertOrderedList"),onSetup:Qy(k,"OL")}),k.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:$("InsertUnorderedList"),onSetup:Qy(k,"UL")}))},fv=(k,$)=>W=>wr(k,fe=>W.setEnabled(Mr(fe.parents,$)&&!gi(k,fe.element))),qg=k=>{const $={text:"List properties...",icon:"ordered-list",onAction:()=>k.execCommand("mceListProps"),onSetup:fv(k,"OL")};k.ui.registry.addMenuItem("listprops",$),k.ui.registry.addContextMenu("lists",{update:W=>{const se=ei(k,W);return So(se)?["listprops"]:[]}})};var a1=()=>{w.add("lists",k=>(Vl(k),Om(k),k.hasPlugin("rtc",!0)?Rd(k):(r1(k),ho(k)),ew(k),qg(k),bi(k)))};a1()})();(function(){const w=Q=>{let Ge=Q;return{get:()=>Ge,set:ae=>{Ge=ae}}};var f=tinymce.util.Tools.resolve("tinymce.PluginManager");const p=Q=>()=>Q;var C=tinymce.util.Tools.resolve("tinymce.Env");const _=Q=>Q.dispatch("ResizeEditor"),P=Q=>Ge=>Ge.options.get(Q),N=Q=>{const Ge=Q.options.register;Ge("autoresize_overflow_padding",{processor:"number",default:1}),Ge("autoresize_bottom_margin",{processor:"number",default:50})},z=P("min_height"),G=P("max_height"),te=P("autoresize_overflow_padding"),ie=P("autoresize_bottom_margin"),me=Q=>Q.plugins.fullscreen&&Q.plugins.fullscreen.isFullscreen(),xe=(Q,Ge)=>{const gn=Q.getBody();gn&&(gn.style.overflowY=Ge?"":"hidden",Ge||(gn.scrollTop=0))},Fe=(Q,Ge,gn,_t)=>{var ae;const ut=parseInt((ae=Q.getStyle(Ge,gn,_t))!==null&&ae!==void 0?ae:"",10);return isNaN(ut)?0:ut},ve=Q=>{if((Q==null?void 0:Q.type.toLowerCase())==="setcontent"){const Ge=Q;return Ge.selection===!0||Ge.paste===!0}else return!1},je=(Q,Ge,gn,_t)=>{var ae;const ut=Q.dom,bt=Q.getDoc();if(!bt)return;if(me(Q)){xe(Q,!0);return}const It=bt.documentElement,Te=_t?_t():te(Q),ue=(ae=z(Q))!==null&&ae!==void 0?ae:Q.getElement().offsetHeight;let Fn=ue;const An=Fe(ut,It,"margin-top",!0),Dt=Fe(ut,It,"margin-bottom",!0);let R=It.offsetHeight+An+Dt+Te;R<0&&(R=0);const fo=Q.getContainer().offsetHeight,ft=Q.getContentAreaContainer().offsetHeight,Eo=fo-ft;R+Eo>ue&&(Fn=R+Eo);const Jt=G(Q);if(Jt&&Fn>Jt?(Fn=Jt,xe(Q,!0)):xe(Q,!1),Fn!==Ge.get()){const qe=Fn-Ge.get();if(ut.setStyle(Q.getContainer(),"height",Fn+"px"),Ge.set(Fn),_(Q),C.browser.isSafari()&&(C.os.isMacOS()||C.os.isiOS())){const go=Q.getWin();go.scrollTo(go.pageXOffset,go.pageYOffset)}Q.hasFocus()&&ve(gn)&&Q.selection.scrollIntoView(),(C.browser.isSafari()||C.browser.isChromium())&&qe<0&&je(Q,Ge,gn,_t)}},He=(Q,Ge)=>{let gn=()=>ie(Q),_t,ae;Q.on("init",ut=>{_t=0;const bt=te(Q),It=Q.dom;It.setStyles(Q.getDoc().documentElement,{height:"auto"}),C.browser.isEdge()||C.browser.isIE()?It.setStyles(Q.getBody(),{paddingLeft:bt,paddingRight:bt,"min-height":0}):It.setStyles(Q.getBody(),{paddingLeft:bt,paddingRight:bt}),je(Q,Ge,ut,gn),_t+=1}),Q.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",ut=>{if(_t===1)ae=Q.getContainer().offsetHeight,je(Q,Ge,ut,gn),_t+=1;else if(_t===2){const bt=ae<Q.getContainer().offsetHeight;if(bt){const It=Q.dom,Te=Q.getDoc();It.setStyles(Te.documentElement,{"min-height":0}),It.setStyles(Q.getBody(),{"min-height":"inherit"})}gn=bt?p(0):gn,_t+=1}else je(Q,Ge,ut,gn)})},Zt=(Q,Ge)=>{Q.addCommand("mceAutoResize",()=>{je(Q,Ge)})};var ze=()=>{f.add("autoresize",Q=>{if(N(Q),Q.options.isSet("resize")||Q.options.set("resize",!1),!Q.inline){const Ge=w(0);Zt(Q,Ge),He(Q,Ge)}})};ze()})();(function(){var w=tinymce.util.Tools.resolve("tinymce.ModelManager");const f=(l,m,b)=>{var S;return b(l,m.prototype)?!0:((S=l.constructor)===null||S===void 0?void 0:S.name)===m.name},p=l=>{const m=typeof l;return l===null?"null":m==="object"&&Array.isArray(l)?"array":m==="object"&&f(l,String,(b,S)=>S.isPrototypeOf(b))?"string":m},C=l=>m=>p(m)===l,_=l=>m=>typeof m===l,P=l=>m=>l===m,N=C("string"),z=C("object"),G=C("array"),te=P(null),ie=_("boolean"),me=P(void 0),xe=l=>l==null,Fe=l=>!xe(l),ve=_("function"),je=_("number"),He=()=>{},Zt=(l,m)=>(...b)=>l(m.apply(null,b)),ze=(l,m)=>b=>l(m(b)),Q=l=>()=>l,Ge=l=>l,gn=(l,m)=>l===m;function _t(l,...m){return(...b)=>{const S=m.concat(b);return l.apply(null,S)}}const ae=l=>m=>!l(m),ut=l=>()=>{throw new Error(l)},bt=l=>l(),It=Q(!1),Te=Q(!0);class ue{constructor(m,b){this.tag=m,this.value=b}static some(m){return new ue(!0,m)}static none(){return ue.singletonNone}fold(m,b){return this.tag?b(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?ue.some(m(this.value)):ue.none()}bind(m){return this.tag?m(this.value):ue.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:ue.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return Fe(m)?ue.some(m):ue.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ue.singletonNone=new ue(!1);const Fn=Array.prototype.slice,An=Array.prototype.indexOf,Dt=Array.prototype.push,R=(l,m)=>An.call(l,m),fo=(l,m)=>R(l,m)>-1,ft=(l,m)=>{for(let b=0,S=l.length;b<S;b++){const O=l[b];if(m(O,b))return!0}return!1},Eo=(l,m)=>{const b=[];for(let S=0;S<l;S++)b.push(m(S));return b},Jt=(l,m)=>{const b=l.length,S=new Array(b);for(let O=0;O<b;O++){const M=l[O];S[O]=m(M,O)}return S},qe=(l,m)=>{for(let b=0,S=l.length;b<S;b++){const O=l[b];m(O,b)}},go=(l,m)=>{for(let b=l.length-1;b>=0;b--){const S=l[b];m(S,b)}},qs=(l,m)=>{const b=[],S=[];for(let O=0,M=l.length;O<M;O++){const H=l[O];(m(H,O)?b:S).push(H)}return{pass:b,fail:S}},Xo=(l,m)=>{const b=[];for(let S=0,O=l.length;S<O;S++){const M=l[S];m(M,S)&&b.push(M)}return b},ar=(l,m,b)=>(go(l,(S,O)=>{b=m(b,S,O)}),b),Xe=(l,m,b)=>(qe(l,(S,O)=>{b=m(b,S,O)}),b),yt=(l,m,b)=>{for(let S=0,O=l.length;S<O;S++){const M=l[S];if(m(M,S))return ue.some(M);if(b(M,S))break}return ue.none()},Z=(l,m)=>yt(l,m,It),di=(l,m)=>{for(let b=0,S=l.length;b<S;b++){const O=l[b];if(m(O,b))return ue.some(b)}return ue.none()},vo=l=>{const m=[];for(let b=0,S=l.length;b<S;++b){if(!G(l[b]))throw new Error("Arr.flatten item "+b+" was not an array, input: "+l);Dt.apply(m,l[b])}return m},ds=(l,m)=>vo(Jt(l,m)),To=(l,m)=>{for(let b=0,S=l.length;b<S;++b){const O=l[b];if(m(O,b)!==!0)return!1}return!0},Sf=l=>{const m=Fn.call(l,0);return m.reverse(),m},on=(l,m)=>{const b={};for(let S=0,O=l.length;S<O;S++){const M=l[S];b[String(M)]=m(M,S)}return b},Po=(l,m)=>{const b=Fn.call(l,0);return b.sort(m),b},zt=(l,m)=>m>=0&&m<l.length?ue.some(l[m]):ue.none(),$e=l=>zt(l,0),eo=l=>zt(l,l.length-1),ws=(l,m)=>{for(let b=0;b<l.length;b++){const S=m(l[b],b);if(S.isSome())return S}return ue.none()},jt=Object.keys,Il=Object.hasOwnProperty,as=(l,m)=>{const b=jt(l);for(let S=0,O=b.length;S<O;S++){const M=b[S],H=l[M];m(H,M)}},Tu=(l,m)=>As(l,(b,S)=>({k:S,v:m(b,S)})),As=(l,m)=>{const b={};return as(l,(S,O)=>{const M=m(S,O);b[M.k]=M.v}),b},ea=l=>(m,b)=>{l[b]=m},bm=(l,m,b,S)=>{as(l,(O,M)=>{(m(O,M)?b:S)(O,M)})},Ya=(l,m)=>{const b={};return bm(l,m,ea(b),He),b},tr=(l,m)=>{const b=[];return as(l,(S,O)=>{b.push(m(S,O))}),b},os=l=>tr(l,Ge),Cd=(l,m)=>Jo(l,m)?ue.from(l[m]):ue.none(),Jo=(l,m)=>Il.call(l,m),Qo=(l,m)=>Jo(l,m)&&l[m]!==void 0&&l[m]!==null,sl=l=>{for(const m in l)if(Il.call(l,m))return!1;return!0},Ks=typeof window<"u"?window:Function("return this;")(),$i=(l,m)=>{let b=m??Ks;for(let S=0;S<l.length&&b!==void 0&&b!==null;++S)b=b[l[S]];return b},Dr=(l,m)=>{const b=l.split(".");return $i(b,m)},Mc=(l,m)=>Dr(l,m),Sd=(l,m)=>{const b=Mc(l,m);if(b==null)throw new Error(l+" not available on this browser");return b},Rr=Object.getPrototypeOf,vm=l=>Sd("HTMLElement",l),Ct=l=>{const m=Dr("ownerDocument.defaultView",l);return z(l)&&(vm(m).prototype.isPrototypeOf(l)||/^HTML\w*Element$/.test(Rr(l).constructor.name))},oo=8,ta=9,Pa=11,ym=1,Ii=3,Wo=l=>l.dom.nodeName.toLowerCase(),Fi=l=>l.dom.nodeType,rl=l=>m=>Fi(m)===l,Lo=l=>Fi(l)===oo||Wo(l)==="#comment",cn=l=>va(l)&&Ct(l.dom),va=rl(ym),al=rl(Ii),Fl=rl(ta),wm=rl(Pa),na=l=>m=>va(m)&&Wo(m)===l,ir=(l,m,b)=>{if(N(b)||ie(b)||je(b))l.setAttribute(m,b+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",b,":: Element ",l),new Error("Attribute value was not simple")},Ds=(l,m,b)=>{ir(l.dom,m,b)},Li=(l,m)=>{const b=l.dom;as(m,(S,O)=>{ir(b,O,S)})},Cm=(l,m)=>{as(m,(b,S)=>{b.fold(()=>{Cs(l,S)},O=>{ir(l.dom,S,O)})})},il=(l,m)=>{const b=l.dom.getAttribute(m);return b===null?void 0:b},Na=(l,m)=>ue.from(il(l,m)),Cs=(l,m)=>{l.dom.removeAttribute(m)},Xa=l=>Xe(l.dom.attributes,(m,b)=>(m[b.name]=b.value,m),{}),Ll=(l,m)=>{const S=(m||document).createElement("div");if(S.innerHTML=l,!S.hasChildNodes()||S.childNodes.length>1){const O="HTML does not have a single root node";throw console.error(O,l),new Error(O)}return Pc(S.childNodes[0])},Zp=(l,m)=>{const S=(m||document).createElement(l);return Pc(S)},_u=(l,m)=>{const S=(m||document).createTextNode(l);return Pc(S)},Pc=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},Ce={fromHtml:Ll,fromTag:Zp,fromText:_u,fromDom:Pc,fromPoint:(l,m,b)=>ue.from(l.dom.elementFromPoint(m,b)).map(Pc)},oa=(l,m)=>{const b=l.dom;if(b.nodeType!==ym)return!1;{const S=b;if(S.matches!==void 0)return S.matches(m);if(S.msMatchesSelector!==void 0)return S.msMatchesSelector(m);if(S.webkitMatchesSelector!==void 0)return S.webkitMatchesSelector(m);if(S.mozMatchesSelector!==void 0)return S.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},Hl=l=>l.nodeType!==ym&&l.nodeType!==ta&&l.nodeType!==Pa||l.childElementCount===0,xf=(l,m)=>{const b=m===void 0?document:m.dom;return Hl(b)?[]:Jt(b.querySelectorAll(l),Ce.fromDom)},xd=(l,m)=>{const b=m===void 0?document:m.dom;return Hl(b)?ue.none():ue.from(b.querySelector(l)).map(Ce.fromDom)},Ho=(l,m)=>l.dom===m.dom,$g=(l,m)=>{const b=l.dom,S=m.dom;return b===S?!1:b.contains(S)},Ef=oa,ku=l=>Ce.fromDom(l.dom.ownerDocument),Ed=l=>Fl(l)?l:ku(l),yr=l=>Ce.fromDom(Ed(l).dom.documentElement),$s=l=>Ce.fromDom(Ed(l).dom.defaultView),Ja=l=>ue.from(l.dom.parentNode).map(Ce.fromDom),Qa=l=>ue.from(l.dom.parentElement).map(Ce.fromDom),zl=(l,m)=>{const b=ve(m)?m:It;let S=l.dom;const O=[];for(;S.parentNode!==null&&S.parentNode!==void 0;){const M=S.parentNode,H=Ce.fromDom(M);if(O.push(H),b(H)===!0)break;S=M}return O},Td=l=>ue.from(l.dom.previousSibling).map(Ce.fromDom),Ou=l=>ue.from(l.dom.nextSibling).map(Ce.fromDom),yo=l=>Jt(l.dom.childNodes,Ce.fromDom),sa=(l,m)=>{const b=l.dom.childNodes;return ue.from(b[m]).map(Ce.fromDom)},ic=l=>sa(l,0),cl=(l,m)=>{Ja(l).each(S=>{S.dom.insertBefore(m.dom,l.dom)})},mi=(l,m)=>{Ou(l).fold(()=>{Ja(l).each(O=>{es(O,m)})},S=>{cl(S,m)})},Ys=(l,m)=>{ic(l).fold(()=>{es(l,m)},S=>{l.dom.insertBefore(m.dom,S.dom)})},es=(l,m)=>{l.dom.appendChild(m.dom)},ya=(l,m,b)=>{sa(l,b).fold(()=>{es(l,m)},S=>{cl(S,m)})},Tf=(l,m)=>{cl(l,m),es(m,l)},So=(l,m)=>{qe(m,(b,S)=>{const O=S===0?l:m[S-1];mi(O,b)})},Hr=(l,m)=>{qe(m,b=>{es(l,b)})},Ba=l=>{l.dom.textContent="",qe(yo(l),m=>{cr(m)})},cr=l=>{const m=l.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},Nc=l=>{const m=yo(l);m.length>0&&So(l,m),cr(l)},Bc=(l,m)=>Ce.fromDom(l.dom.cloneNode(m)),ra=l=>Bc(l,!1),$c=l=>Bc(l,!0),Hi=(l,m)=>{const b=Ce.fromTag(m),S=Xa(l);return Li(b,S),b},Ig=(l,m)=>{const b=Hi(l,m),S=yo($c(l));return Hr(b,S),b},Ic=(l,m)=>{const b=Hi(l,m);mi(l,b);const S=yo(l);return Hr(b,S),cr(l),b},Fg=["tfoot","thead","tbody","colgroup"],fi=l=>fo(Fg,l),Vl=(l,m)=>({rows:l,columns:m}),_f=(l,m)=>({row:l,column:m}),kf=(l,m,b)=>({element:l,rowspan:m,colspan:b}),Lg=(l,m,b,S)=>({element:l,rowspan:m,colspan:b,isNew:S}),K=(l,m,b,S,O,M)=>({element:l,rowspan:m,colspan:b,row:S,column:O,isLocked:M}),de=(l,m,b)=>({element:l,cells:m,section:b}),we=(l,m,b,S)=>({element:l,cells:m,section:b,isNew:S}),Be=(l,m,b)=>({element:l,isNew:m,isLocked:b}),ot=(l,m,b,S)=>({element:l,cells:m,section:b,isNew:S}),an=(l,m,b,S)=>({startRow:l,startCol:m,finishRow:b,finishCol:S}),Do=(l,m,b)=>({element:l,colspan:m,column:b}),ts=(l,m)=>({element:l,columns:m}),_o=l=>wm(l)&&Fe(l.dom.host),ms=ve(Element.prototype.attachShadow)&&ve(Node.prototype.getRootNode),Xn=Q(ms),Rs=ms?l=>Ce.fromDom(l.dom.getRootNode()):Ed,ei=l=>{const m=Rs(l);return _o(m)?ue.some(m):ue.none()},Hg=l=>Ce.fromDom(l.dom.host),Et=l=>{if(Xn()&&Fe(l.target)){const m=Ce.fromDom(l.target);if(va(m)&&Of(m)&&l.composed&&l.composedPath){const b=l.composedPath();if(b)return $e(b)}}return ue.from(l.target)},Of=l=>Fe(l.dom.shadowRoot),Ms=l=>{const m=al(l)?l.dom.parentNode:l.dom;if(m==null||m.ownerDocument===null)return!1;const b=m.ownerDocument;return ei(Ce.fromDom(m)).fold(()=>b.body.contains(m),ze(Ms,Hg))},zr=()=>Gp(Ce.fromDom(document)),Gp=l=>{const m=l.dom.body;if(m==null)throw new Error("Body is not available yet");return Ce.fromDom(m)},Ss=(l,m,b)=>Xo(zl(l,b),m),Vy=(l,m)=>Xo(yo(l),m),Ul=(l,m)=>{let b=[];return qe(yo(l),S=>{m(S)&&(b=b.concat([S])),b=b.concat(Ul(S,m))}),b},Af=(l,m,b)=>Ss(l,S=>oa(S,m),b),vn=(l,m)=>Vy(l,b=>oa(b,m)),ti=(l,m)=>xf(m,l);var at=(l,m,b,S,O)=>l(b,S)?ue.some(b):ve(O)&&O(b)?ue.none():m(b,S,O);const Ps=(l,m,b)=>{let S=l.dom;const O=ve(b)?b:It;for(;S.parentNode;){S=S.parentNode;const M=Ce.fromDom(S);if(m(M))return ue.some(M);if(O(M))break}return ue.none()},Df=(l,m,b)=>at((O,M)=>M(O),Ps,l,m,b),Xs=(l,m)=>{const b=O=>m(Ce.fromDom(O));return Z(l.dom.childNodes,b).map(Ce.fromDom)},Mr=(l,m)=>{const b=S=>{for(let O=0;O<S.childNodes.length;O++){const M=Ce.fromDom(S.childNodes[O]);if(m(M))return ue.some(M);const H=b(S.childNodes[O]);if(H.isSome())return H}return ue.none()};return b(l.dom)},Wl=(l,m,b)=>Ps(l,S=>oa(S,m),b),to=(l,m)=>Xs(l,b=>oa(b,m)),gi=(l,m)=>xd(m,l),wr=(l,m,b)=>at((O,M)=>oa(O,M),Wl,l,m,b),_d=(l,m,b=gn)=>l.exists(S=>b(S,m)),fs=l=>{const m=[],b=S=>{m.push(S)};for(let S=0;S<l.length;S++)l[S].each(b);return m},kd=(l,m)=>l!=null?m(l):ue.none(),qp=(l,m)=>l?ue.some(m):ue.none(),Kp=(l,m,b)=>m===""||l.length>=m.length&&l.substr(b,b+m.length)===m,co=(l,m,b=0,S)=>{const O=l.indexOf(m,b);return O!==-1?me(S)?!0:O+m.length<=S:!1},Yp=(l,m)=>Kp(l,m,0),Au=(l,m)=>Kp(l,m,l.length-m.length),Fc=(l=>m=>m.replace(l,""))(/^\s+|\s+$/g),Rf=l=>l.length>0,Jn=l=>{const m=parseFloat(l);return isNaN(m)?ue.none():ue.some(m)},lr=l=>l.style!==void 0&&ve(l.style.getPropertyValue),$a=(l,m,b)=>{if(!N(b))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",b,":: Element ",l),new Error("CSS value must be a string: "+b);lr(l)&&l.style.setProperty(m,b)},ev=(l,m)=>{lr(l)&&l.style.removeProperty(m)},gs=(l,m,b)=>{const S=l.dom;$a(S,m,b)},Vr=(l,m)=>{const b=l.dom;as(m,(S,O)=>{$a(b,O,S)})},Ur=(l,m)=>{const b=l.dom,O=window.getComputedStyle(b).getPropertyValue(m);return O===""&&!Ms(l)?tv(b,m):O},tv=(l,m)=>lr(l)?l.style.getPropertyValue(m):"",Xp=(l,m)=>{const b=l.dom,S=tv(b,m);return ue.from(S).filter(O=>O.length>0)},zi=(l,m)=>{const b=l.dom;ev(b,m),_d(Na(l,"style").map(Fc),"")&&Cs(l,"style")},zg=(l,m)=>{const b=l.dom,S=m.dom;lr(b)&&lr(S)&&(S.style.cssText=b.style.cssText)},ns=(l,m,b=0)=>Na(l,m).map(S=>parseInt(S,10)).getOr(b),Lc=(l,m)=>ns(l,m,1),wa=l=>na("col")(l)?ns(l,"span",1)>1:Lc(l,"colspan")>1,ll=l=>Lc(l,"rowspan")>1,Du=(l,m)=>parseInt(Ur(l,m),10),Is=Q(10),Hc=Q(10),Sm=(l,m)=>Mf(l,m,Te),Mf=(l,m,b)=>ds(yo(l),S=>oa(S,m)?b(S)?[S]:[]:Mf(S,m,b)),nv=(l,m,b=It)=>{if(b(m))return ue.none();if(fo(l,Wo(m)))return ue.some(m);const S=O=>oa(O,"table")||b(O);return Wl(m,l.join(","),S)},ov=(l,m)=>nv(["td","th"],l,m),ul=l=>Sm(l,"th,td"),Vg=l=>oa(l,"colgroup")?vn(l,"col"):ds(sv(l),m=>vn(m,"col")),ni=(l,m)=>wr(l,"table",m),Ug=l=>Sm(l,"tr"),sv=l=>ni(l).fold(Q([]),m=>vn(m,"colgroup")),Ru=(l,m)=>Jt(l,b=>{if(Wo(b)==="colgroup"){const S=Jt(Vg(b),O=>{const M=ns(O,"span",1);return kf(O,1,M)});return de(b,S,"colgroup")}else{const S=Jt(ul(b),O=>{const M=ns(O,"rowspan",1),H=ns(O,"colspan",1);return kf(O,M,H)});return de(b,S,m(b))}}),Jp=l=>Ja(l).map(m=>{const b=Wo(m);return fi(b)?b:"tbody"}).getOr("tbody"),dl=l=>{const m=Ug(l),S=[...sv(l),...m];return Ru(S,Jp)},Uy=(l,m)=>Ru(l,()=>m),Od=l=>{let m=!1,b;return(...S)=>(m||(m=!0,b=l.apply(null,S)),b)},Wy=(l,m,b,S)=>{const O=l.isiOS()&&/ipad/i.test(b)===!0,M=l.isiOS()&&!O,H=l.isiOS()||l.isAndroid(),q=H||S("(pointer:coarse)"),ee=O||!M&&H&&S("(min-device-width:768px)"),le=M||H&&!ee,Se=m.isSafari()&&l.isiOS()&&/safari/i.test(b)===!1,et=!le&&!ee&&!Se;return{isiPad:Q(O),isiPhone:Q(M),isTablet:Q(ee),isPhone:Q(le),isTouch:Q(q),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:Q(Se),isDesktop:Q(et)}},Zy=(l,m)=>{for(let b=0;b<l.length;b++){const S=l[b];if(S.test(m))return S}},jy=(l,m)=>{const b=Zy(l,m);if(!b)return{major:0,minor:0};const S=O=>Number(m.replace(b,"$"+O));return re(S(1),S(2))},Pf=(l,m)=>{const b=String(m).toLowerCase();return l.length===0?Gy():jy(l,b)},Gy=()=>re(0,0),re=(l,m)=>({major:l,minor:m}),Mu={nu:re,detect:Pf,unknown:Gy},Vi=(l,m)=>ws(m.brands,b=>{const S=b.brand.toLowerCase();return Z(l,O=>{var M;return S===((M=O.brand)===null||M===void 0?void 0:M.toLowerCase())}).map(O=>({current:O.name,version:Mu.nu(parseInt(b.version,10),0)}))}),xm=(l,m)=>{const b=String(m).toLowerCase();return Z(l,S=>S.search(b))},Qp=(l,m)=>xm(l,m).map(b=>{const S=Mu.detect(b.versionRegexes,m);return{current:b.name,version:S}}),qy=(l,m)=>xm(l,m).map(b=>{const S=Mu.detect(b.versionRegexes,m);return{current:b.name,version:S}}),so=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ca=l=>m=>co(m,l),ml=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>co(l,"edge/")&&co(l,"chrome")&&co(l,"safari")&&co(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,so],search:l=>co(l,"chrome")&&!co(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>co(l,"msie")||co(l,"trident")},{name:"Opera",versionRegexes:[so,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ca("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ca("firefox")},{name:"Safari",versionRegexes:[so,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(co(l,"safari")||co(l,"mobile/"))&&co(l,"applewebkit")}],Zl=[{name:"Windows",search:Ca("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>co(l,"iphone")||co(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ca("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ca("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ca("linux"),versionRegexes:[]},{name:"Solaris",search:Ca("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ca("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ca("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Pu={browsers:Q(ml),oses:Q(Zl)},fl="Edge",aa="Chromium",jl="IE",rv="Opera",av="Firefox",zc="Safari",gl=()=>e1({current:void 0,version:Mu.unknown()}),e1=l=>{const m=l.current,b=l.version,S=O=>()=>m===O;return{current:m,version:b,isEdge:S(fl),isChromium:S(aa),isIE:S(jl),isOpera:S(rv),isFirefox:S(av),isSafari:S(zc)}},Sa={unknown:gl,nu:e1},ur="Windows",Ad="iOS",Nf="Android",Vc="Linux",Ia="macOS",iv="Solaris",Ky="FreeBSD",Wg="ChromeOS",Zg=()=>Em({current:void 0,version:Mu.unknown()}),Em=l=>{const m=l.current,b=l.version,S=O=>()=>m===O;return{current:m,version:b,isWindows:S(ur),isiOS:S(Ad),isAndroid:S(Nf),isMacOS:S(Ia),isLinux:S(Vc),isSolaris:S(iv),isFreeBSD:S(Ky),isChromeOS:S(Wg)}},hl={unknown:Zg,nu:Em},P2={detect:(l,m,b)=>{const S=Pu.browsers(),O=Pu.oses(),M=m.bind(ee=>Vi(S,ee)).orThunk(()=>Qp(S,l)).fold(Sa.unknown,Sa.nu),H=qy(O,l).fold(hl.unknown,hl.nu),q=Wy(H,M,l,b);return{browser:M,os:H,deviceType:q}}},Yy=l=>window.matchMedia(l).matches;let Xy=Od(()=>P2.detect(navigator.userAgent,ue.from(navigator.userAgentData),Yy));const Dd=()=>Xy(),t1=(l,m)=>{const b=(q,ee)=>{if(!je(ee)&&!ee.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+ee);const le=q.dom;lr(le)&&(le.style[l]=ee+"px")},S=q=>{const ee=m(q);if(ee<=0||ee===null){const le=Ur(q,l);return parseFloat(le)||0}return ee},O=S,M=(q,ee)=>Xe(ee,(le,Se)=>{const et=Ur(q,Se),vt=et===void 0?0:parseInt(et,10);return isNaN(vt)?le:le+vt},0);return{set:b,get:S,getOuter:O,aggregate:M,max:(q,ee,le)=>{const Se=M(q,le);return ee>Se?ee-Se:0}}},Tm=(l,m)=>Jn(l).getOr(m),hs=(l,m,b)=>Tm(Ur(l,m),b),xs=(l,m,b,S)=>{const O=hs(l,`padding-${b}`,0),M=hs(l,`padding-${S}`,0),H=hs(l,`border-${b}-width`,0),q=hs(l,`border-${S}-width`,0);return m-O-M-H-q},hi=(l,m)=>{const b=l.dom,S=b.getBoundingClientRect().width||b.offsetWidth;return xs(l,S,"left","right")},n1=l=>hs(l,"height",l.dom.offsetHeight),Jy=l=>hs(l,"width",l.dom.offsetWidth),Wr=l=>hi(l),Nu=t1("width",l=>l.dom.offsetWidth),pi=l=>Nu.get(l),pl=l=>Nu.getOuter(l),lv=Wr,xn=Jy,oi=(l,m,b)=>{const S=l.cells,O=S.slice(0,m),M=S.slice(m),H=O.concat(b).concat(M);return o1(l,H)},Bu=(l,m,b)=>oi(l,m,[b]),_m=(l,m,b)=>{const S=l.cells;S[m]=b},o1=(l,m)=>ot(l.element,m,l.section,l.isNew),uv=(l,m)=>{const b=l.cells,S=Jt(b,m);return ot(l.element,S,l.section,l.isNew)},xa=(l,m)=>l.cells[m],nr=(l,m)=>xa(l,m).element,bi=l=>l.cells.length,or=l=>{const m=qs(l,b=>b.section==="colgroup");return{rows:m.fail,cols:m.pass}},jg=(l,m,b)=>{const S=Jt(l.cells,b);return ot(m(l.element),S,l.section,!0)},km="data-snooker-locked-cols",Hs=l=>Na(l,km).bind(m=>ue.from(m.match(/\d+/g))).map(m=>on(m,Te)),dr=l=>{const m=Xe(or(l).rows,(S,O)=>(qe(O.cells,(M,H)=>{M.isLocked&&(S[H]=!0)}),S),{}),b=tr(m,(S,O)=>parseInt(O,10));return Po(b)},Uc=(l,m)=>l+","+m,Bf=(l,m,b)=>ue.from(l.access[Uc(m,b)]),Js=(l,m,b)=>{const S=s1(l,O=>b(m,O.element));return S.length>0?ue.some(S[0]):ue.none()},s1=(l,m)=>{const b=ds(l.all,S=>S.cells);return Xo(b,m)},dv=l=>{const m={};let b=0;return qe(l.cells,S=>{const O=S.colspan;Eo(O,M=>{const H=b+M;m[H]=Do(S.element,O,H)}),b+=O}),m},ko=l=>{const m={},b=[],O=$e(l).map(pt=>pt.element).bind(ni).bind(Hs).getOr({});let M=0,H=0,q=0;const{pass:ee,fail:le}=qs(l,pt=>pt.section==="colgroup");qe(le,pt=>{const Ze=[];qe(pt.cells,wt=>{let Ue=0;for(;m[Uc(q,Ue)]!==void 0;)Ue++;const Nt=Qo(O,Ue.toString()),mn=K(wt.element,wt.rowspan,wt.colspan,q,Ue,Nt);for(let _n=0;_n<wt.colspan;_n++)for(let ss=0;ss<wt.rowspan;ss++){const kr=q+ss,Ls=Ue+_n,_i=Uc(kr,Ls);m[_i]=mn,H=Math.max(H,Ls+1)}Ze.push(mn)}),M++,b.push(de(pt.element,Ze,pt.section)),q++});const{columns:Se,colgroups:et}=eo(ee).map(pt=>{const Ze=dv(pt);return{colgroups:[ts(pt.element,os(Ze))],columns:Ze}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Vl(M,H),access:m,all:b,columns:Se,colgroups:et}},Nn={fromTable:l=>{const m=dl(l);return ko(m)},generate:ko,getAt:Bf,findItem:Js,filterItems:s1,justCells:l=>ds(l.all,m=>m.cells),justColumns:l=>os(l.columns),hasColumns:l=>jt(l.columns).length>0,getColumnAt:(l,m)=>ue.from(l.columns[m])},Om=(l,m=Te)=>{const b=l.grid,S=Eo(b.columns,Ge),O=Eo(b.rows,Ge);return Jt(S,M=>mv(()=>ds(O,le=>Nn.getAt(l,le,M).filter(Se=>Se.column===M).toArray()),le=>le.colspan===1&&m(le.element),()=>Nn.getAt(l,0,M)))},mv=(l,m,b)=>{const S=l();return Z(S,m).orThunk(()=>ue.from(S[0]).orThunk(b)).map(H=>H.element)},r1=l=>{const m=l.grid,b=Eo(m.rows,Ge),S=Eo(m.columns,Ge);return Jt(b,O=>mv(()=>ds(S,ee=>Nn.getAt(l,O,ee).filter(le=>le.row===O).fold(Q([]),le=>[le])),ee=>ee.rowspan===1,()=>Nn.getAt(l,O,0)))},Qy=(l,m)=>{if(m<0||m>=l.length-1)return ue.none();const b=l[m].fold(()=>{const O=Sf(l.slice(0,m));return ws(O,(M,H)=>M.map(q=>({value:q,delta:H+1})))},O=>ue.some({value:O,delta:0})),S=l[m+1].fold(()=>{const O=l.slice(m+1);return ws(O,(M,H)=>M.map(q=>({value:q,delta:H+1})))},O=>ue.some({value:O,delta:1}));return b.bind(O=>S.map(M=>{const H=M.delta+O.delta;return Math.abs(M.value-O.value)/H}))},ew=(l,m)=>b=>fv(b)==="rtl"?m:l,fv=l=>Ur(l,"direction")==="rtl"?"rtl":"ltr",qg=t1("height",l=>{const m=l.dom;return Ms(l)?m.getBoundingClientRect().height:m.offsetHeight}),a1=l=>qg.get(l),k=l=>qg.getOuter(l),$=n1,W=(l,m)=>({left:l,top:m,translate:(S,O)=>W(l+S,m+O)}),se=W,fe=l=>{const m=l.getBoundingClientRect();return se(m.left,m.top)},tt=(l,m)=>l!==void 0?l:m!==void 0?m:0,Ft=l=>{const m=l.dom.ownerDocument,b=m.body,S=m.defaultView,O=m.documentElement;if(b===l.dom)return se(b.offsetLeft,b.offsetTop);const M=tt(S==null?void 0:S.pageYOffset,O.scrollTop),H=tt(S==null?void 0:S.pageXOffset,O.scrollLeft),q=tt(O.clientTop,b.clientTop),ee=tt(O.clientLeft,b.clientLeft);return bn(l).translate(H-ee,M-q)},bn=l=>{const m=l.dom,S=m.ownerDocument.body;return S===m?se(S.offsetLeft,S.offsetTop):Ms(l)?fe(m):se(0,0)},pn=(l,m)=>({row:l,y:m}),rn=(l,m)=>({col:l,x:m}),ps=l=>Ft(l).left+pl(l),Pr=l=>Ft(l).left,Ui=(l,m)=>rn(l,Pr(m)),Gl=(l,m)=>rn(l,ps(m)),Zr=l=>Ft(l).top,N2=(l,m)=>pn(l,Zr(m)),Zo=(l,m)=>pn(l,Zr(m)+k(m)),Ut=(l,m,b)=>{if(b.length===0)return[];const S=Jt(b.slice(1),(M,H)=>M.map(q=>l(H,q))),O=b[b.length-1].map(M=>m(b.length-1,M));return S.concat([O])},ql=l=>-l,Mt={delta:Ge,positions:l=>Ut(N2,Zo,l),edge:Zr},Md=ew({delta:Ge,edge:Pr,positions:l=>Ut(Ui,Gl,l)},{delta:ql,edge:ps,positions:l=>Ut(Gl,Ui,l)}),mr={delta:(l,m)=>Md(m).delta(l,m),positions:(l,m)=>Md(m).positions(l,m),edge:l=>Md(l).edge(l)},If={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},i1=(()=>{const l="[0-9]+",b="[eE]"+("[+-]?"+l),S="\\.",O=q=>`(?:${q})?`,H=`[+-]?(?:${["Infinity",l+S+O(l)+O(b),S+l+O(b),l+O(b)].join("|")})`;return new RegExp(`^(${H})(.*)$`)})(),jr=(l,m)=>ft(m,b=>ft(If[b],S=>l===S)),Kl=(l,m)=>ue.from(i1.exec(l)).bind(S=>{const O=Number(S[1]),M=S[2];return jr(M,m)?ue.some({value:O,unit:M}):ue.none()}),gv=/(\d+(\.\d+)?)%/,$u=/(\d+(\.\d+)?)px|em/,B2=na("col"),hv=(l,m,b)=>{const S=Qa(l).getOrThunk(()=>Gp(ku(l)));return m(l)/b(S)*100},nt=(l,m)=>{gs(l,"width",m+"px")},$2=(l,m)=>{gs(l,"width",m+"%")},Dm=(l,m)=>{gs(l,"height",m+"px")},Pd=l=>$(l)+"px",c1=(l,m,b,S)=>{const O=ni(l).map(M=>{const H=b(M);return Math.floor(m/100*H)}).getOr(m);return S(l,O),O},Es=(l,m,b,S)=>{const O=parseFloat(l);return Au(l,"%")&&Wo(m)!=="table"?c1(m,O,b,S):O},No=l=>{const m=Pd(l);return m?Es(m,l,a1,Dm):a1(l)},si=(l,m,b)=>{const S=b(l),O=Lc(l,m);return S/O},Fa=(l,m)=>Xp(l,m).orThunk(()=>Na(l,m).map(b=>b+"px")),Un=l=>Fa(l,"width"),l1=l=>Fa(l,"height"),ia=l=>hv(l,pi,lv),zs=l=>B2(l)?pi(l):xn(l),pv=l=>si(l,"rowspan",No),Ke=l=>Un(l).bind(b=>Kl(b,["fixed","relative","empty"])),Wi=(l,m,b)=>{gs(l,"width",m+b)},u1=l=>pi(l)+"px",ro=l=>hv(l,pi,lv)+"%",Yl=l=>Un(l).exists(m=>gv.test(m)),Zk=l=>Un(l).exists(m=>$u.test(m)),Xl=l=>Un(l).isNone(),tw=Q(gv),Jl=na("col"),nw=l=>Un(l).getOrThunk(()=>zs(l)+"px"),lc=l=>l1(l).getOrThunk(()=>pv(l)+"px"),po=l=>Jt(Nn.justColumns(l),m=>ue.from(m.element)),Iu=l=>{const m=Dd().browser,b=m.isChromium()||m.isFirefox();return Jl(l)?b:!0},Ff=(l,m,b,S,O,M)=>l.filter(S).fold(()=>M(Qy(b,m)),H=>O(H)),ca=(l,m,b,S)=>{const O=Om(l),M=Nn.hasColumns(l)?po(l):O,H=[ue.some(mr.edge(m))].concat(Jt(mr.positions(O,m),ee=>ee.map(le=>le.x))),q=ae(wa);return Jt(M,(ee,le)=>Ff(ee,le,H,q,Se=>{if(Iu(Se))return b(Se);{const et=kd(O[le],Ge);return Ff(et,le,H,q,vt=>S(ue.some(pi(vt))),S)}},S))},ow=l=>l.map(m=>m+"px").getOr(""),Lf=(l,m)=>ca(l,m,nw,ow),Hf=(l,m,b)=>ca(l,m,ia,S=>S.fold(()=>b.minCellWidth(),O=>O/b.pixelWidth()*100)),vi=(l,m,b)=>ca(l,m,zs,S=>S.getOrThunk(b.minCellWidth)),Rm=(l,m,b,S,O)=>{const M=r1(l),H=[ue.some(b.edge(m))].concat(Jt(b.positions(M,m),q=>q.map(ee=>ee.y)));return Jt(M,(q,ee)=>Ff(q,ee,H,ae(ll),S,O))},_e=(l,m,b)=>Rm(l,m,b,pv,S=>S.getOrThunk(Hc)),Zi=(l,m,b)=>Rm(l,m,b,lc,ow),Fu=(l,m)=>()=>Ms(l)?m(l):parseFloat(Xp(l,"width").getOr("0")),Lu=l=>{const m=Fu(l,pi),b=Q(0);return{width:m,pixelWidth:m,getWidths:(O,M)=>vi(O,l,M),getCellDelta:b,singleColumnWidth:Q([0]),minCellWidth:b,setElementWidth:He,adjustTableWidth:He,isRelative:!0,label:"none"}},ji=l=>{const m=Fu(l,ee=>parseFloat(ro(ee))),b=Fu(l,pi);return{width:m,pixelWidth:b,getWidths:(ee,le)=>Hf(ee,l,le),getCellDelta:ee=>ee/b()*100,singleColumnWidth:(ee,le)=>[100-ee],minCellWidth:()=>Is()/b()*100,setElementWidth:$2,adjustTableWidth:ee=>{const le=m(),Se=ee/100*le,et=le+Se;$2(l,et)},isRelative:!0,label:"percent"}},Cr=l=>{const m=Fu(l,pi);return{width:m,pixelWidth:m,getWidths:(H,q)=>vi(H,l,q),getCellDelta:Ge,singleColumnWidth:(H,q)=>[Math.max(Is(),H+q)-H],minCellWidth:Is,setElementWidth:nt,adjustTableWidth:H=>{const q=m()+H;nt(l,q)},isRelative:!1,label:"pixel"}},Nr=(l,m)=>tw().exec(m)!==null?ji(l):Cr(l),yi={getTableSize:l=>Un(l).fold(()=>Lu(l),b=>Nr(l,b)),pixelSize:Cr,percentageSize:ji,noneSize:Lu},Hu=(l,m,b,S,O,M)=>({minRow:l,minCol:m,maxRow:b,maxCol:S,allCells:O,selectedCells:M}),en=(l,m)=>{const b=l.grid.columns;let O=l.grid.rows,M=b,H=0,q=0;const ee=[],le=[];return as(l.access,Se=>{if(ee.push(Se),m(Se)){le.push(Se);const et=Se.row,vt=et+Se.rowspan-1,pt=Se.column,Ze=pt+Se.colspan-1;et<O?O=et:vt>H&&(H=vt),pt<M?M=pt:Ze>q&&(q=Ze)}}),Hu(O,M,H,q,ee,le)},Gr=(l,m,b)=>{const S=l[b].element,O=Ce.fromTag("td");es(O,Ce.fromTag("br")),(m?es:Ys)(S,O)},Gi=(l,m,b,S)=>{const O=Xo(l,q=>q.section!=="colgroup"),M=m.grid.columns,H=m.grid.rows;for(let q=0;q<H;q++){let ee=!1;for(let le=0;le<M;le++)q<b.minRow||q>b.maxRow||le<b.minCol||le>b.maxCol||(Nn.getAt(m,q,le).filter(S).isNone()?Gr(O,ee,q):ee=!0)}},uc=(l,m,b,S)=>{as(b.columns,H=>{(H.column<m.minCol||H.column>m.maxCol)&&cr(H.element)});const O=Xo(Sm(l,"tr"),H=>H.dom.childElementCount===0);qe(O,cr),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&qe(Sm(l,"th,td"),H=>{Cs(H,"rowspan"),Cs(H,"colspan")}),Cs(l,km),Cs(l,"data-snooker-col-series"),yi.getTableSize(l).adjustTableWidth(S)},jk=(l,m,b,S)=>{if(S.minCol===0&&m.grid.columns===S.maxCol+1)return 0;const O=vi(m,l,b),M=Xe(O,(le,Se)=>le+Se,0),ee=Xe(O.slice(S.minCol,S.maxCol+1),(le,Se)=>le+Se,0)/M*b.pixelWidth()-b.pixelWidth();return b.getCellDelta(ee)},Gk=(l,m)=>{const b=vt=>oa(vt.element,m),S=$c(l),O=dl(S),M=yi.getTableSize(l),H=Nn.generate(O),q=en(H,b),ee="th:not("+m+"),td:not("+m+")",le=Mf(S,"th,td",vt=>oa(vt,ee));qe(le,cr),Gi(O,H,q,b);const Se=Nn.fromTable(l),et=jk(l,Se,M,q);return uc(S,q,H,et),S},Kg=" ",wi=((l,m)=>{const b=M=>{if(!l(M))throw new Error("Can only get "+m+" value of a "+m+" node");return S(M).getOr("")},S=M=>l(M)?ue.from(M.dom.nodeValue):ue.none();return{get:b,getOption:S,set:(M,H)=>{if(!l(M))throw new Error("Can only set raw "+m+" value of a "+m+" node");M.dom.nodeValue=H}}})(al,"text"),la=l=>wi.get(l),sw=l=>wi.getOption(l),qk=(l,m)=>wi.set(l,m),zu=l=>Wo(l)==="img"?1:sw(l).fold(()=>yo(l).length,m=>m.length),bv=l=>sw(l).filter(m=>m.trim().length!==0||m.indexOf(Kg)>-1).isSome(),I2=l=>cn(l)&&il(l,"contenteditable")==="false",zf=["img","br"],Yg=l=>bv(l)||fo(zf,Wo(l))||I2(l),F2=l=>Mr(l,Yg),Nd=l=>L2(l,Yg),L2=(l,m)=>{const b=S=>{const O=yo(S);for(let M=O.length-1;M>=0;M--){const H=O[M];if(m(H))return ue.some(H);const q=b(H);if(q.isSome())return q}return ue.none()};return b(l)},H2={scope:["row","col"]},rw=l=>()=>{const m=Ce.fromTag("td",l.dom);return es(m,Ce.fromTag("br",l.dom)),m},aw=l=>()=>Ce.fromTag("col",l.dom),qr=l=>()=>Ce.fromTag("colgroup",l.dom),Vu=l=>()=>Ce.fromTag("tr",l.dom),Xg=(l,m,b)=>{const S=Ig(l,m);return as(b,(O,M)=>{O===null?Cs(S,M):Ds(S,M,O)}),S},Vf=l=>l,z2=(l,m,b)=>F2(l).map(O=>{const M=b.join(","),H=Af(O,M,q=>Ho(q,l));return ar(H,(q,ee)=>{const le=ra(ee);return es(q,le),le},m)}).getOr(m),fr=(l,m)=>{as(H2,(b,S)=>Na(l,S).filter(O=>fo(b,O)).each(O=>Ds(m,S,O)))},Jg=(l,m,b)=>{const S=(H,q)=>{zg(H.element,q),zi(q,"height"),H.colspan!==1&&zi(q,"width")},O=H=>{const q=Ce.fromTag(Wo(H.element),m.dom),ee=b.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),le=ee.length>0?z2(H.element,q,ee):q;return es(le,Ce.fromTag("br")),S(H,q),fr(H.element,q),l(H.element,q),q};return{col:H=>{const q=Ce.fromTag(Wo(H.element),m.dom);return S(H,q),l(H.element,q),q},colgroup:qr(m),row:Vu(m),cell:O,replace:Xg,colGap:aw(m),gap:rw(m)}},Qg=l=>({col:aw(l),colgroup:qr(l),row:Vu(l),cell:rw(l),replace:Vf,colGap:aw(l),gap:rw(l)}),iw=(l,m)=>{const S=document.createElement("div");return S.innerHTML=l,yo(Ce.fromDom(S))},Bd=l=>Jt(l,Ce.fromDom),qi=l=>m=>m.options.get(l),vv="100%",bl=l=>{var m;const b=l.dom,S=(m=b.getParent(l.selection.getStart(),b.isBlock))!==null&&m!==void 0?m:l.getBody();return lv(Ce.fromDom(S))+"px"},Mm=(l,m)=>Zf(l)||!Ki(l)?m:Pm(l)?{...m,width:bl(l)}:{...m,width:vv},Uf=(l,m)=>Zf(l)||Ki(l)?m:Pm(l)?{...m,width:bl(l)}:{...m,width:vv},eh=l=>{const m=l.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:b=>{const S=fo(["section","cells","sectionCells","auto"],b);return S?{value:b,valid:S}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:b=>{const S=fo(["preservetable","resizetable"],b);return S?{value:b,valid:S}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},$d=l=>ue.from(l.options.get("table_clone_elements")),Kk=l=>{const m=l.options.get("object_resizing");return fo(m.split(","),"table")},Wf=qi("table_header_type"),cw=qi("table_column_resizing"),V2=l=>cw(l)==="preservetable",Vs=l=>cw(l)==="resizetable",th=qi("table_sizing_mode"),Ql=l=>th(l)==="relative",Pm=l=>th(l)==="fixed",Zf=l=>th(l)==="responsive",jf=qi("table_resize_bars"),Ki=qi("table_style_by_css"),Ns=qi("table_merge_content_on_paste"),eu=l=>{const m=l.options,b=m.get("table_default_attributes");return m.isSet("table_default_attributes")?b:Uf(l,b)},lw=l=>{const m=l.options,b=m.get("table_default_styles");return m.isSet("table_default_styles")?b:Mm(l,b)},m1=qi("table_use_colgroups"),yv=l=>wr(l,"[contenteditable]"),Nm=(l,m=!1)=>Ms(l)?l.dom.isContentEditable:yv(l).fold(Q(m),b=>f1(b)==="true"),f1=l=>l.dom.contentEditable,wv=l=>Ce.fromDom(l.getBody()),Uu=l=>m=>Ho(m,wv(l)),tu=l=>{Cs(l,"data-mce-style");const m=b=>Cs(b,"data-mce-style");qe(ul(l),m),qe(Vg(l),m),qe(Ug(l),m)},dc=l=>Ce.fromDom(l.selection.getStart()),Bm=l=>l.getBoundingClientRect().width,$m=l=>l.getBoundingClientRect().height,U2=(l,m)=>{const b=l.dom.getStyle(m,"width")||l.dom.getAttrib(m,"width");return ue.from(b).filter(Rf)},Cv=l=>/^(\d+(\.\d+)?)%$/.test(l),g1=l=>/^(\d+(\.\d+)?)px$/.test(l),Sv=l=>Df(l,na("table")).exists(Nm),W2=(l,m)=>{const b=m.column,S=m.column+m.colspan-1,O=m.row,M=m.row+m.rowspan-1;return b<=l.finishCol&&S>=l.startCol&&O<=l.finishRow&&M>=l.startRow},xv=(l,m)=>m.column>=l.startCol&&m.column+m.colspan-1<=l.finishCol&&m.row>=l.startRow&&m.row+m.rowspan-1<=l.finishRow,h1=(l,m)=>{let b=!0;const S=_t(xv,m);for(let O=m.startRow;O<=m.finishRow;O++)for(let M=m.startCol;M<=m.finishCol;M++)b=b&&Nn.getAt(l,O,M).exists(S);return b?ue.some(m):ue.none()},p1=(l,m)=>an(Math.min(l.row,m.row),Math.min(l.column,m.column),Math.max(l.row+l.rowspan-1,m.row+m.rowspan-1),Math.max(l.column+l.colspan-1,m.column+m.colspan-1)),Ln=(l,m,b)=>{const S=Nn.findItem(l,m,Ho),O=Nn.findItem(l,b,Ho);return S.bind(M=>O.map(H=>p1(M,H)))},qt=(l,m,b)=>Ln(l,m,b).bind(S=>h1(l,S)),Id=(l,m,b,S)=>Nn.findItem(l,m,Ho).bind(O=>{const M=b>0?O.row+O.rowspan-1:O.row,H=S>0?O.column+O.colspan-1:O.column;return Nn.getAt(l,M+b,H+S).map(ee=>ee.element)}),Ev=(l,m,b)=>Ln(l,m,b).map(S=>{const O=Nn.filterItems(l,_t(W2,S));return Jt(O,M=>M.element)}),b1=(l,m)=>{const b=(S,O)=>$g(O,S);return Nn.findItem(l,m,b).map(S=>S.element)},Yk=(l,m,b)=>ni(l).bind(S=>{const O=mw(S);return Id(O,l,m,b)}),uw=(l,m,b)=>{const S=mw(l);return Ev(S,m,b)},zo=(l,m,b,S,O)=>{const M=mw(l),H=Ho(l,b)?ue.some(m):b1(M,m),q=Ho(l,O)?ue.some(S):b1(M,S);return H.bind(ee=>q.bind(le=>Ev(M,ee,le)))},dw=(l,m,b)=>{const S=mw(l);return qt(S,m,b)},mw=Nn.fromTable;var fw=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],We=()=>{const l=le=>Ce.fromDom(le.dom.cloneNode(!1)),m=le=>Ed(le).dom,b=le=>va(le)?Wo(le)==="body"?!0:fo(fw,Wo(le)):!1,S=le=>va(le)?fo(["br","img","hr","input"],Wo(le)):!1,O=le=>va(le)&&il(le,"contenteditable")==="false",M=(le,Se)=>le.dom.compareDocumentPosition(Se.dom),H=(le,Se)=>{const et=Xa(le);Li(Se,et)},q=le=>{const Se=Wo(le);return fo(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Se)},ee=le=>va(le)?Na(le,"lang"):ue.none();return{up:Q({selector:Wl,closest:wr,predicate:Ps,all:zl}),down:Q({selector:ti,predicate:Ul}),styles:Q({get:Ur,getRaw:Xp,set:gs,remove:zi}),attrs:Q({get:il,set:Ds,remove:Cs,copyTo:H}),insert:Q({before:cl,after:mi,afterAll:So,append:es,appendAll:Hr,prepend:Ys,wrap:Tf}),remove:Q({unwrap:Nc,remove:cr}),create:Q({nu:Ce.fromTag,clone:l,text:Ce.fromText}),query:Q({comparePosition:M,prevSibling:Td,nextSibling:Ou}),property:Q({children:yo,name:Wo,parent:Ja,document:m,isText:al,isComment:Lo,isElement:va,isSpecial:q,getLanguage:ee,getText:la,setText:qk,isBoundary:b,isEmptyTag:S,isNonEditable:O}),eq:Ho,is:Ef}};const Tv=(l,m,b,S)=>{const O=b[0],M=b.slice(1);return S(l,m,O,M)},Xk=(l,m,b)=>b.length>0?Tv(l,m,b,v1):ue.none(),v1=(l,m,b,S)=>{const O=m(l,b);return ar(S,(M,H)=>{const q=m(l,H);return Jk(l,M,q)},O)},Jk=(l,m,b)=>m.bind(S=>b.filter(_t(l.eq,S))),nh=(l,m)=>_t(l.eq,m),gw=(l,m,b,S=It)=>{const O=[m].concat(l.up().all(m)),M=[b].concat(l.up().all(b)),H=Se=>di(Se,S).fold(()=>Se,vt=>Se.slice(0,vt+1)),q=H(O),ee=H(M),le=Z(q,Se=>ft(ee,nh(l,Se)));return{firstpath:q,secondpath:ee,shared:le}},Fd=Xk,Qk=gw,Wu=We(),Bo=(l,m)=>Fd(Wu,(b,S)=>l(S),m),Zu=(l,m,b)=>Qk(Wu,l,m,b),hw=l=>Wl(l,"table"),vl=(l,m,b)=>{const S=O=>M=>b!==void 0&&b(M)||Ho(M,O);return Ho(l,m)?ue.some({boxes:ue.some([l]),start:l,finish:m}):hw(l).bind(O=>hw(m).bind(M=>{if(Ho(O,M))return ue.some({boxes:uw(O,l,m),start:l,finish:m});if($g(O,M)){const H=Af(m,"td,th",S(O)),q=H.length>0?H[H.length-1]:m;return ue.some({boxes:zo(O,l,O,m,M),start:l,finish:q})}else if($g(M,O)){const H=Af(l,"td,th",S(M)),q=H.length>0?H[H.length-1]:l;return ue.some({boxes:zo(M,l,O,m,M),start:l,finish:q})}else return Zu(l,m).shared.bind(H=>wr(H,"table",b).bind(q=>{const ee=Af(m,"td,th",S(q)),le=ee.length>0?ee[ee.length-1]:m,Se=Af(l,"td,th",S(q)),et=Se.length>0?Se[Se.length-1]:l;return ue.some({boxes:zo(q,l,O,m,M),start:et,finish:le})}))}))},Ld=(l,m)=>{const b=ti(l,m);return b.length>0?ue.some(b):ue.none()},pw=(l,m)=>Z(l,b=>oa(b,m)),Gf=(l,m,b)=>gi(l,m).bind(S=>gi(l,b).bind(O=>Bo(hw,[S,O]).map(M=>({first:S,last:O,table:M})))),Z2=(l,m)=>Wl(l,"table").bind(b=>gi(b,m).bind(S=>vl(S,l).bind(O=>O.boxes.map(M=>({boxes:M,start:O.start,finish:O.finish}))))),_v=(l,m,b,S,O)=>pw(l,O).bind(M=>Yk(M,m,b).bind(H=>Z2(H,S))),bw=(l,m)=>Ld(l,m),eO=(l,m,b)=>Gf(l,m,b).bind(S=>{const O=ee=>Ho(l,ee),M="thead,tfoot,tbody,table",H=Wl(S.first,M,O),q=Wl(S.last,M,O);return H.bind(ee=>q.bind(le=>Ho(ee,le)?dw(S.table,S.first,S.last):ue.none()))}),vw=Ge,ju=l=>{const m=(S,O)=>Na(S,O).exists(M=>parseInt(M,10)>1),b=S=>m(S,"rowspan")||m(S,"colspan");return l.length>0&&To(l,b)?ue.some(l):ue.none()},KM=(l,m,b)=>m.length<=1?ue.none():eO(l,b.firstSelectedSelector,b.lastSelectedSelector).map(S=>({bounds:S,cells:m})),yw="data-mce-selected",qf="td["+yw+"],th["+yw+"]",ua="["+yw+"]",Rt="data-mce-first-selected",tO="td["+Rt+"],th["+Rt+"]",ww="data-mce-last-selected",nO="td["+ww+"],th["+ww+"]",j2=ua,Kf={selected:yw,selectedSelector:qf,firstSelected:Rt,firstSelectedSelector:tO,lastSelected:ww,lastSelectedSelector:nO},oh=(l,m,b)=>({element:b,mergable:KM(m,l,Kf),unmergable:ju(l),selection:vw(l)}),y1=(l,m,b)=>({element:l,clipboard:m,generators:b}),sh=(l,m,b,S)=>({selection:vw(l),clipboard:b,generators:S}),kv=l=>ni(l).bind(m=>bw(m,Kf.firstSelectedSelector)).fold(Q(l),m=>m[0]),Hd=l=>(m,b)=>{const S=Wo(m),O=S==="col"||S==="colgroup"?kv(m):m;return wr(O,l,b)},nu=Hd("th,td,caption"),w1=Hd("th,td"),Zc=l=>Bd(l.model.table.getSelectedCells()),Ov=l=>Xo(Zc(l),m=>oa(m,Kf.selectedSelector)),G2=l=>ni(l[0]).map(m=>{const b=Gk(m,j2);return tu(b),[b]}),rh=(l,m)=>Jt(m,b=>l.selection.serializer.serialize(b.dom,{})).join(""),zd=l=>Jt(l,m=>m.dom.innerText).join(""),oO=(l,m)=>{l.on("BeforeGetContent",b=>{const S=O=>{b.preventDefault(),G2(O).each(M=>{b.content=b.format==="text"?zd(M):rh(l,M)})};if(b.selection===!0){const O=Ov(l);O.length>=1&&S(O)}}),l.on("BeforeSetContent",b=>{if(b.selection===!0&&b.paste===!0){const S=Zc(l);$e(S).each(O=>{ni(O).each(M=>{const H=Xo(iw(b.content),ee=>Wo(ee)!=="meta"),q=na("table");if(Ns(l)&&H.length===1&&q(H[0])){b.preventDefault();const ee=Ce.fromDom(l.getDoc()),le=Qg(ee),Se=y1(O,H[0],le);m.pasteCells(M,Se).each(()=>{l.focus()})}})})}})},ah=(l,m)=>({element:l,offset:m}),Yf=(l,m,b)=>l.property().isText(m)&&l.property().getText(m).trim().length===0||l.property().isComment(m)?b(m).bind(S=>Yf(l,S,b).orThunk(()=>ue.some(S))):ue.none(),yl=(l,m)=>l.property().isText(m)?l.property().getText(m).length:l.property().children(m).length,Yi=(l,m)=>{const b=Yf(l,m,l.query().prevSibling).getOr(m);if(l.property().isText(b))return ah(b,yl(l,b));const S=l.property().children(b);return S.length>0?Yi(l,S[S.length-1]):ah(b,yl(l,b))},sO=Yi,q2=We(),K2=l=>sO(q2,l),Cw=(l,m)=>{wa(l)||Ke(l).each(S=>{const O=S.value/2;Wi(l,O,S.unit),Wi(m,O,S.unit)})},Xi=l=>Jt(l,Q(0)),ih=(l,m,b,S,O)=>O(l.slice(0,m)).concat(S).concat(O(l.slice(b))),Av=l=>(m,b,S,O)=>{if(l(S)){const M=Math.max(O,m[b]-Math.abs(S)),H=Math.abs(M-m[b]);return S>=0?H:-H}else return S},Dv=Av(l=>l<0),rO=Av(Te),Y2=()=>{const l=(q,ee,le,Se,et)=>{const vt=Dv(q,ee,Se,et);return ih(q,ee,le+1,[vt,0],Xi)},m=(q,ee,le,Se)=>{const et=(100+le)/100,vt=Math.max(Se,(q[ee]+le)/et);return Jt(q,(pt,Ze)=>(Ze===ee?vt:pt/et)-pt)},b=(q,ee,le,Se,et,vt)=>vt?m(q,ee,Se,et):l(q,ee,le,Se,et);return{resizeTable:(q,ee)=>q(ee),clampTableDelta:Dv,calcLeftEdgeDeltas:b,calcMiddleDeltas:(q,ee,le,Se,et,vt,pt)=>b(q,le,Se,et,vt,pt),calcRightEdgeDeltas:(q,ee,le,Se,et,vt)=>{if(vt)return m(q,le,Se,et);{const pt=Dv(q,le,Se,et);return Xi(q.slice(0,le)).concat([pt])}},calcRedestributedWidths:(q,ee,le,Se)=>{if(Se){const vt=(ee+le)/ee,pt=Jt(q,Ze=>Ze/vt);return{delta:vt*100-100,newSizes:pt}}else return{delta:le,newSizes:q}}}},Sw=()=>{const l=(H,q,ee,le,Se)=>{const et=le>=0?ee:q,vt=rO(H,et,le,Se);return ih(H,q,ee+1,[vt,-vt],Xi)};return{resizeTable:(H,q,ee)=>{ee&&H(q)},clampTableDelta:(H,q,ee,le,Se)=>{if(Se){if(ee>=0)return ee;{const et=Xe(H,(vt,pt)=>vt+pt-le,0);return Math.max(-et,ee)}}else return Dv(H,q,ee,le)},calcLeftEdgeDeltas:l,calcMiddleDeltas:(H,q,ee,le,Se,et)=>l(H,ee,le,Se,et),calcRightEdgeDeltas:(H,q,ee,le,Se,et)=>{if(et)return Xi(H);{const vt=le/H.length;return Jt(H,Q(vt))}},calcRedestributedWidths:(H,q,ee,le)=>({delta:0,newSizes:H})}},ch=l=>Nn.fromTable(l).grid,lh=na("th"),Rv=l=>To(l,m=>lh(m.element)),aO=(l,m)=>l&&m?"sectionCells":l?"section":"cells",Mv=l=>{const m=l.section==="thead",b=_d(uh(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:m||b?{type:"header",subType:aO(m,b)}:{type:"body"}},uh=l=>{const m=Xo(l,b=>lh(b.element));return m.length===0?ue.some("td"):m.length===l.length?ue.some("th"):ue.none()},iO=l=>{const m=Jt(l,O=>Mv(O).type),b=fo(m,"header"),S=fo(m,"footer");if(!b&&!S)return ue.some("body");{const O=fo(m,"body");return b&&!O&&!S?ue.some("header"):!b&&!O&&S?ue.some("footer"):ue.none()}},C1=l=>ws(l.all,m=>{const b=Mv(m);return b.type==="header"?ue.from(b.subType):ue.none()}),xw=(l,m,b)=>Be(b(l.element,m),!0,l.isLocked),Ji=(l,m)=>l.section!==m?ot(l.element,l.cells,m,l.isNew):l,Pv=()=>({transformRow:Ji,transformCell:(l,m,b)=>{const S=b(l.element,m),O=Wo(S)!=="td"?Ic(S,"td"):S;return Be(O,l.isNew,l.isLocked)}}),X2=()=>({transformRow:Ji,transformCell:xw}),Nv=()=>({transformRow:(l,m)=>Ji(l,m==="thead"?"tbody":m),transformCell:xw}),Im={getTableSectionType:(l,m)=>{const b=Nn.fromTable(l);switch(C1(b).getOr(m)){case"section":return Pv();case"sectionCells":return X2();case"cells":return Nv()}},section:Pv,sectionCells:X2,cells:Nv,fallback:()=>({transformRow:Ge,transformCell:xw})},Gu=(l,m,b,S)=>{b===S?Cs(l,m):Ds(l,m,b)},Ew=(l,m,b)=>{eo(vn(l,m)).fold(()=>Ys(l,b),S=>mi(S,b))},dh=(l,m)=>{const b=to(l,m).getOrThunk(()=>{const S=Ce.fromTag(m,ku(l).dom);return m==="thead"?Ew(l,"caption,colgroup",S):m==="colgroup"?Ew(l,"caption",S):es(l,S),S});return Ba(b),b},$v=(l,m)=>{const b=[],S=[],O=pt=>Jt(pt,Ze=>{Ze.isNew&&b.push(Ze.element);const wt=Ze.element;return Ba(wt),qe(Ze.cells,Ue=>{Ue.isNew&&S.push(Ue.element),Gu(Ue.element,"colspan",Ue.colspan,1),Gu(Ue.element,"rowspan",Ue.rowspan,1),es(wt,Ue.element)}),wt}),M=pt=>ds(pt,Ze=>Jt(Ze.cells,wt=>(Gu(wt.element,"span",wt.colspan,1),wt.element))),H=(pt,Ze)=>{const wt=dh(l,Ze),Nt=(Ze==="colgroup"?M:O)(pt);Hr(wt,Nt)},q=pt=>{to(l,pt).each(cr)},ee=(pt,Ze)=>{pt.length>0?H(pt,Ze):q(Ze)},le=[],Se=[],et=[],vt=[];return qe(m,pt=>{switch(pt.section){case"thead":le.push(pt);break;case"tbody":Se.push(pt);break;case"tfoot":et.push(pt);break;case"colgroup":vt.push(pt);break}}),ee(vt,"colgroup"),ee(le,"thead"),ee(Se,"tbody"),ee(et,"tfoot"),{newRows:b,newCells:S}},J2=l=>Jt(l,m=>{const b=ra(m.element);return qe(m.cells,S=>{const O=$c(S.element);Gu(O,"colspan",S.colspan,1),Gu(O,"rowspan",S.rowspan,1),es(b,O)}),b}),jo=(l,m)=>Jt(l,b=>xa(b,m)),cO=(l,m)=>l[m],Us=(l,m)=>{if(l.length===0)return 0;const b=l[0];return di(l,O=>!m(b.element,O.element)).getOr(l.length)},Q2=(l,m,b,S)=>{const O=cO(l,m),M=O.section==="colgroup",H=Us(O.cells.slice(b),S),q=M?1:Us(jo(l.slice(m),b),S);return{colspan:H,rowspan:q}},bs=(l,m)=>{const b=Jt(l,O=>Jt(O.cells,It)),S=(O,M,H,q)=>{for(let ee=O;ee<O+H;ee++)for(let le=M;le<M+q;le++)b[ee][le]=!0};return Jt(l,(O,M)=>{const H=ds(O.cells,(q,ee)=>{if(b[M][ee]===!1){const le=Q2(l,M,ee,m);return S(M,ee,le.rowspan,le.colspan),[Lg(q.element,le.rowspan,le.colspan,q.isNew)]}else return[]});return we(O.element,H,O.section,O.isNew)})},mh=(l,m,b)=>{const S=[];qe(l.colgroups,O=>{const M=[];for(let H=0;H<l.grid.columns;H++){const q=Nn.getColumnAt(l,H).map(ee=>Be(ee.element,b,!1)).getOrThunk(()=>Be(m.colGap(),!0,!1));M.push(q)}S.push(ot(O.element,M,"colgroup",b))});for(let O=0;O<l.grid.rows;O++){const M=[];for(let ee=0;ee<l.grid.columns;ee++){const le=Nn.getAt(l,O,ee).map(Se=>Be(Se.element,b,Se.isLocked)).getOrThunk(()=>Be(m.gap(),!0,!1));M.push(le)}const H=l.all[O],q=ot(H.element,M,H.section,b);S.push(q)}return S},gr=(l,m)=>mh(l,m,!1),Ts=l=>bs(l,Ho),mc=(l,m)=>ws(l.all,b=>Z(b.cells,S=>Ho(m,S.element))),Tw=(l,m,b)=>{const S=Jt(m.selection,M=>ov(M).bind(H=>mc(l,H)).filter(b)),O=fs(S);return qp(O.length>0,O)},da=(l,m,b,S,O)=>(M,H,q,ee)=>{const le=Nn.fromTable(M),Se=ue.from(ee==null?void 0:ee.section).getOrThunk(Im.fallback);return m(le,H).map(vt=>{const pt=gr(le,q),Ze=l(pt,vt,Ho,O(q),Se),wt=dr(Ze.grid),Ue=Ts(Ze.grid);return{info:vt,grid:Ue,cursor:Ze.cursor,lockedColumns:wt}}).bind(vt=>{const pt=$v(M,vt.grid),Ze=ue.from(ee==null?void 0:ee.sizing).getOrThunk(()=>yi.getTableSize(M)),wt=ue.from(ee==null?void 0:ee.resize).getOrThunk(Sw);return b(M,vt.grid,vt.info,{sizing:Ze,resize:wt,section:Se}),S(M),Cs(M,km),vt.lockedColumns.length>0&&Ds(M,km,vt.lockedColumns.join(",")),ue.some({cursor:vt.cursor,newRows:pt.newRows,newCells:pt.newCells})})},S1=(l,m)=>ov(m.element).bind(b=>mc(l,b).map(S=>({...S,generators:m.generators,clipboard:m.clipboard}))),fh=(l,m)=>Tw(l,m,Te).map(b=>({cells:b,generators:m.generators,clipboard:m.clipboard})),qu=(l,m)=>m.mergable,gh=(l,m)=>m.unmergable,Fm=(l,m)=>Tw(l,m,Te),Vd=(l,m)=>Tw(l,m,b=>!b.isLocked),lO=(l,m)=>mc(l,m).exists(b=>!b.isLocked),ex=(l,m)=>To(m,b=>lO(l,b)),XM=(l,m)=>qu(l,m).filter(b=>ex(l,b.cells)),JM=(l,m)=>gh(l,m).filter(b=>ex(l,b)),wl=(l,m,b,S)=>{const O=or(l).rows;if(O.length===0)return l;for(let M=m.startRow;M<=m.finishRow;M++)for(let H=m.startCol;H<=m.finishCol;H++){const q=O[M],ee=xa(q,H).isLocked;_m(q,H,Be(S(),!1,ee))}return l},La=(l,m,b,S)=>{const O=or(l).rows;let M=!0;for(let H=0;H<O.length;H++)for(let q=0;q<bi(O[0]);q++){const ee=O[H],le=xa(ee,q),Se=le.element,et=b(Se,m);et&&!M?_m(ee,q,Be(S(),!0,le.isLocked)):et&&(M=!1)}return l},uO=(l,m)=>Xe(l,(b,S)=>ft(b,O=>m(O.element,S.element))?b:b.concat([S]),[]),dO=(l,m,b,S)=>(m>0&&m<l[0].cells.length&&qe(l,O=>{const M=O.cells[m-1];let H=0;const q=S();for(;O.cells.length>m+H&&b(M.element,O.cells[m+H].element);)_m(O,m+H,Be(q,!0,O.cells[m+H].isLocked)),H++}),l),Lm=(l,m,b,S)=>{const O=or(l).rows;if(m>0&&m<O.length){const M=O[m-1].cells,H=uO(M,b);qe(H,q=>{let ee=ue.none();for(let le=m;le<O.length;le++)for(let Se=0;Se<bi(O[0]);Se++){const et=O[le],vt=xa(et,Se);b(vt.element,q.element)&&(ee.isNone()&&(ee=ue.some(S())),ee.each(Ze=>{_m(et,Se,Be(Ze,!0,vt.isLocked))}))}})}return l},x1=l=>{const m=M=>M(l),b=Q(l),S=()=>O,O={tag:!0,inner:l,fold:(M,H)=>H(l),isValue:Te,isError:It,map:M=>Ku.value(M(l)),mapError:S,bind:m,exists:m,forall:m,getOr:b,or:S,getOrThunk:b,orThunk:S,getOrDie:b,each:M=>{M(l)},toOptional:()=>ue.some(l)};return O},Iv=l=>{const m=()=>b,b={tag:!1,inner:l,fold:(S,O)=>S(l),isValue:It,isError:Te,map:m,mapError:S=>Ku.error(S(l)),bind:m,exists:It,forall:Te,getOr:Ge,or:Ge,getOrThunk:bt,orThunk:bt,getOrDie:ut(String(l)),each:He,toOptional:ue.none};return b},Ku={value:x1,error:Iv,fromOption:(l,m)=>l.fold(()=>Iv(m),x1)},hh=(l,m,b)=>{if(l.row>=m.length||l.column>bi(m[0]))return Ku.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const S=m.slice(l.row),O=S[0].cells.slice(l.column),M=bi(b[0]),H=b.length;return Ku.value({rowDelta:S.length-H,colDelta:O.length-M})},ph=(l,m)=>{const b=bi(l[0]),S=bi(m[0]);return{rowDelta:0,colDelta:b-S}},bh=(l,m)=>{const b=l.length,S=m.length;return{rowDelta:b-S,colDelta:0}},Xf=(l,m,b,S)=>{const O=m.section==="colgroup"?b.col:b.cell;return Eo(l,M=>Be(O(),!0,S(M)))},tx=(l,m,b,S)=>{const O=l[l.length-1];return l.concat(Eo(m,()=>{const M=O.section==="colgroup"?b.colgroup:b.row,H=jg(O,M,Ge),q=Xf(H.cells.length,H,b,ee=>Jo(S,ee.toString()));return o1(H,q)}))},Fs=(l,m,b,S)=>Jt(l,O=>{const M=Xf(m,O,b,It);return oi(O,S,M)}),nx=(l,m,b)=>Jt(l,S=>Xe(b,(O,M)=>{const H=Xf(1,S,m,Te)[0];return Bu(O,M,H)},S)),vh=(l,m,b)=>{const S=m.colDelta<0?Fs:Ge,O=m.rowDelta<0?tx:Ge,M=dr(l),H=bi(l[0]),q=ft(M,Se=>Se===H-1),ee=S(l,Math.abs(m.colDelta),b,q?H-1:H),le=dr(ee);return O(ee,Math.abs(m.rowDelta),b,on(le,Te))},ox=(l,m,b,S)=>{const O=xa(l[m],b),M=_t(S,O.element),H=l[m];return l.length>1&&bi(H)>1&&(b>0&&M(nr(H,b-1))||b<H.cells.length-1&&M(nr(H,b+1))||m>0&&M(nr(l[m-1],b))||m<l.length-1&&M(nr(l[m+1],b)))},Lv=(l,m,b,S,O,M)=>{const H=l.row,q=l.column,ee=b.length,le=bi(b[0]),Se=H+ee,et=q+le+M.length,vt=on(M,Te);for(let pt=H;pt<Se;pt++){let Ze=0;for(let wt=q;wt<et;wt++){if(vt[wt]){Ze++;continue}ox(m,pt,wt,O)&&La(m,nr(m[pt],wt),O,S.cell);const Ue=wt-q-Ze,Nt=xa(b[pt-H],Ue),mn=Nt.element,_n=S.replace(mn);_m(m[pt],wt,Be(_n,!0,Nt.isLocked))}}return m},Ea=(l,m,b)=>{const S=bi(m[0]),O=or(m).cols.length+l.row,M=Eo(S-l.column,q=>q+l.column),H=Z(M,q=>To(b,ee=>ee!==q)).getOr(S-1);return{row:O,column:H}},fc=(l,m,b)=>Xo(b,S=>S>=l.column&&S<=bi(m[0])+l.column),sx=(l,m,b,S,O)=>{const M=dr(m),H=Ea(l,m,M),q=or(b).rows,ee=fc(H,q,M);return hh(H,m,q).map(Se=>{const et={...Se,colDelta:Se.colDelta-ee.length},vt=vh(m,et,S),pt=dr(vt),Ze=fc(H,q,pt);return Lv(H,vt,q,S,O,Ze)})},Hv=(l,m,b,S,O)=>{dO(m,l,O,S.cell);const M=bh(b,m),H=vh(b,M,S),q=bh(m,H),ee=vh(m,q,S);return Jt(ee,(le,Se)=>oi(le,l,H[Se].cells))},Jf=(l,m,b,S,O)=>{Lm(m,l,O,S.cell);const M=dr(m),H=ph(m,b),q={...H,colDelta:H.colDelta-M.length},ee=vh(m,q,S),{cols:le,rows:Se}=or(ee),et=dr(ee),vt=ph(b,m),pt={...vt,colDelta:vt.colDelta+et.length},Ze=nx(b,S,et),wt=vh(Ze,pt,S);return[...le,...Se.slice(0,l),...wt,...Se.slice(l,Se.length)]},mO=(l,m,b,S)=>jg(l,O=>S(O,b),m),rx=(l,m,b,S,O)=>{const{rows:M,cols:H}=or(l),q=M.slice(0,m),ee=M.slice(m),le=mO(M[b],(Se,et)=>m>0&&m<M.length&&S(nr(M[m-1],et),nr(M[m],et))?xa(M[m],et):Be(O(Se.element,S),!0,Se.isLocked),S,O);return[...H,...q,le,...ee]},_w=(l,m,b,S,O,M,H)=>{if(b==="colgroup"||!S){const q=xa(l,O);return Be(H(q.element,M),!0,!1)}else return xa(l,m)},Qi=(l,m,b,S,O)=>Jt(l,M=>{const H=m>0&&m<bi(M)&&S(nr(M,m-1),nr(M,m)),q=_w(M,m,M.section,H,b,S,O);return Bu(M,m,q)}),zv=(l,m)=>ds(l,b=>{const S=b.cells,O=ar(m,(M,H)=>H>=0&&H<M.length?M.slice(0,H).concat(M.slice(H+1)):M,S);return O.length>0?[ot(b.element,O,b.section,b.isNew)]:[]}),Ws=(l,m,b)=>{const{rows:S,cols:O}=or(l);return[...O,...S.slice(0,m),...S.slice(b+1)]},ou=(l,m,b,S)=>nr(l[m],b)!==void 0&&m>0&&S(nr(l[m-1],b),nr(l[m],b)),yh=(l,m,b)=>m>0&&b(nr(l,m-1),nr(l,m)),Hm=(l,m,b,S)=>ou(l,m,b,S)||yh(l[m],b,S),Qf=(l,m)=>To(m,Ge)&&Rv(l.cells)?Te:(S,O,M)=>!(Wo(S.element)==="th"&&m[M]),eg=(l,m)=>To(m,Ge)&&Rv(l)?Te:(S,O,M)=>!(Wo(S.element)==="th"&&m[O]),Ud=(l,m,b,S)=>{const O=H=>H==="row"?ll(m):wa(m),M=H=>O(H)?`${H}group`:H;return l?lh(m)?M(b):null:S&&lh(m)?M(b==="row"?"col":"row"):null},ax=(l,m)=>(b,S,O)=>ue.some(Ud(l,b.element,"col",m[O])),tg=(l,m)=>(b,S)=>ue.some(Ud(l,b.element,"row",m[S])),zm=(l,m,b)=>Be(b(l.element,m),!0,l.isLocked),ng=(l,m,b,S,O,M,H)=>{const q=ee=>ft(m,le=>b(ee.element,le.element));return Jt(l,(ee,le)=>uv(ee,(Se,et)=>{if(q(Se)){const vt=H(Se,le,et)?O(Se,b,S):Se;return M(vt,le,et).each(pt=>{Cm(vt.element,{scope:ue.from(pt)})}),vt}else return Se}))},ix=(l,m,b)=>ds(l,(S,O)=>Hm(l,O,m,b)?[]:[xa(S,m)]),fO=(l,m,b)=>{const S=l[m];return ds(S.cells,(O,M)=>Hm(l,m,M,b)?[]:[O])},kw=(l,m,b,S,O)=>{const M=or(l).rows,H=ds(m,Se=>ix(M,Se,S)),q=Jt(M,Se=>Rv(Se.cells)),ee=eg(H,q),le=tg(b,q);return ng(l,H,S,O,zm,le,ee)},gO=(l,m,b,S,O,M,H)=>{const{cols:q,rows:ee}=or(l),le=ee[m[0]],Se=ds(m,Ue=>fO(ee,Ue,O)),et=Jt(le.cells,(Ue,Nt)=>Rv(ix(ee,Nt,O))),vt=[...ee];qe(m,Ue=>{vt[Ue]=H.transformRow(ee[Ue],b)});const pt=[...q,...vt],Ze=Qf(le,et),wt=ax(S,et);return ng(pt,Se,O,M,H.transformCell,wt,Ze)},Vv=(l,m,b,S)=>{const O=or(l).rows,M=Jt(m,H=>xa(O[H.row],H.column));return ng(l,M,b,S,zm,ue.none,Te)},ec={generate:l=>{if(!G(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const m=[],b={};return qe(l,(S,O)=>{const M=jt(S);if(M.length!==1)throw new Error("one and only one name per case");const H=M[0],q=S[H];if(b[H]!==void 0)throw new Error("duplicate key detected:"+H);if(H==="cata")throw new Error("cannot have a case named cata (sorry)");if(!G(q))throw new Error("case arguments must be an array");m.push(H),b[H]=(...ee)=>{const le=ee.length;if(le!==q.length)throw new Error("Wrong number of arguments to case "+H+". Expected "+q.length+" ("+q+"), got "+le);return{fold:(...et)=>{if(et.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+et.length);return et[O].apply(null,ee)},match:et=>{const vt=jt(et);if(m.length!==vt.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+vt.join(","));if(!To(m,Ze=>fo(vt,Ze)))throw new Error("Not all branches were specified when using match. Specified: "+vt.join(", ")+`
Required: `+m.join(", "));return et[H].apply(null,ee)},log:et=>{console.log(et,{constructors:m,constructor:H,params:ee})}}}}),b}},wh={...ec.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},lx=(l,m)=>l.length===0?wh.none():l.length===1?wh.only(0):m===0?wh.left(0,1):m===l.length-1?wh.right(m-1,m):m>0&&m<l.length-1?wh.middle(m-1,m,m+1):wh.none(),hO=(l,m,b,S,O)=>{const M=l.slice(0),H=lx(l,m),q=Q(Jt(M,Q(0))),ee=vt=>S.singleColumnWidth(M[vt],b),le=(vt,pt)=>O.calcLeftEdgeDeltas(M,vt,pt,b,S.minCellWidth(),S.isRelative),Se=(vt,pt,Ze)=>O.calcMiddleDeltas(M,vt,pt,Ze,b,S.minCellWidth(),S.isRelative),et=(vt,pt)=>O.calcRightEdgeDeltas(M,vt,pt,b,S.minCellWidth(),S.isRelative);return H.fold(q,ee,le,Se,et)},E1=(l,m,b)=>{let S=0;for(let O=l;O<m;O++)S+=b[O]!==void 0?b[O]:0;return S},Vm=(l,m)=>{const b=Nn.justCells(l);return Jt(b,S=>{const O=E1(S.column,S.column+S.colspan,m);return{element:S.element,width:O,colspan:S.colspan}})},Uv=(l,m)=>{const b=Nn.justColumns(l);return Jt(b,(S,O)=>({element:S.element,width:m[O],colspan:S.colspan}))},Wn=(l,m)=>{const b=Nn.justCells(l);return Jt(b,S=>{const O=E1(S.row,S.row+S.rowspan,m);return{element:S.element,height:O,rowspan:S.rowspan}})},tc=(l,m)=>Jt(l.all,(b,S)=>({element:b.element,height:m[S]})),su=l=>ar(l,(m,b)=>m+b,0),Aw=(l,m)=>Nn.hasColumns(l)?Uv(l,m):Vm(l,m),Oo=(l,m,b)=>{const S=Aw(l,m);qe(S,O=>{b.setElementWidth(O.element,O.width)})},T1=(l,m,b,S,O)=>{const M=Nn.fromTable(l),H=O.getCellDelta(m),q=O.getWidths(M,O),ee=b===M.grid.columns-1,le=S.clampTableDelta(q,b,H,O.minCellWidth(),ee),Se=hO(q,b,le,O,S),et=Jt(Se,(vt,pt)=>vt+q[pt]);Oo(M,et,O),S.resizeTable(O.adjustTableWidth,le,ee)},Dw=(l,m,b,S)=>{const O=Nn.fromTable(l),M=_e(O,l,S),H=Jt(M,(Se,et)=>b===et?Math.max(m+Se,Hc()):Se),q=Wn(O,H),ee=tc(O,H);qe(ee,Se=>{Dm(Se.element,Se.height)}),qe(q,Se=>{Dm(Se.element,Se.height)});const le=su(H);Dm(l,le)},Sr=(l,m,b,S,O)=>{const M=Nn.generate(m),H=S.getWidths(M,S),q=S.pixelWidth(),{newSizes:ee,delta:le}=O.calcRedestributedWidths(H,q,b.pixelDelta,S.isRelative);Oo(M,ee,S),S.adjustTableWidth(le)},Yu=(l,m,b,S)=>{const O=Nn.generate(m),M=S.getWidths(O,S);Oo(O,M,S)},Um=l=>Xe(l,(b,S)=>ft(b,M=>M.column===S.column)?b:b.concat([S]),[]).sort((b,S)=>b.column-S.column),Rw=na("col"),Wv=na("colgroup"),_1=l=>Wo(l)==="tr"||Wv(l),Mw=l=>{const m=ns(l,"colspan",1),b=ns(l,"rowspan",1);return{element:l,colspan:m,rowspan:b}},Zv=(l,m=Mw)=>{const b=q=>Rw(q.element)?l.col(q):l.cell(q),S=q=>Wv(q.element)?l.colgroup(q):l.row(q),O=q=>{if(_1(q))return S({element:q});{const ee=q,le=b(m(ee));return M=ue.some({item:ee,replacement:le}),le}};let M=ue.none();return{getOrInit:(q,ee)=>M.fold(()=>O(q),le=>ee(q,le.item)?le.replacement:O(q))}},Xu=l=>m=>{const b=[],S=(H,q)=>Z(b,ee=>q(ee.item,H)),O=H=>{const q=l==="td"?{scope:null}:{},ee=m.replace(H,l,q);return b.push({item:H,sub:ee}),ee};return{replaceOrInit:(H,q)=>{if(_1(H)||Rw(H))return H;{const ee=H;return S(ee,q).fold(()=>O(ee),le=>q(H,le.item)?le.sub:O(ee))}}}},Wd=l=>Na(l,"scope").map(m=>m.substr(0,3)),De={modification:Zv,transform:Xu,merging:l=>({unmerge:S=>{const O=Wd(S);return O.each(M=>Ds(S,"scope",M)),()=>{const M=l.cell({element:S,colspan:1,rowspan:1});return zi(M,"width"),zi(S,"width"),O.each(H=>Ds(M,"scope",H)),M}},merge:S=>{const O=()=>{const M=fs(Jt(S,Wd));if(M.length===0)return ue.none();{const H=M[0],q=["row","col"];return ft(M,le=>le!==H&&fo(q,le))?ue.none():ue.from(H)}};return zi(S[0],"width"),O().fold(()=>Cs(S[0],"scope"),M=>Ds(S[0],"scope",M+"group")),Q(S[0])}})},k1=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Ch=(l,m)=>{const b=l.property().name(m);return fo(["ol","ul"],b)},gc=(l,m)=>{const b=l.property().name(m);return fo(k1,b)},Pw=(l,m)=>fo(["br","img","hr","input"],l.property().name(m)),is=We(),jv=l=>gc(is,l),Zd=l=>Ch(is,l),Nw=l=>Pw(is,l),Gv=l=>{const m=na("br"),b=ee=>To(ee,le=>m(le)||al(le)&&la(le).trim().length===0),S=ee=>Wo(ee)==="li"||Ps(ee,Zd).isSome(),O=ee=>Ou(ee).map(le=>jv(le)?!0:Nw(le)?Wo(le)!=="img":!1).getOr(!1),M=ee=>Nd(ee).bind(le=>{const Se=O(le);return Ja(le).map(et=>Se===!0||S(et)||m(le)||jv(et)&&!Ho(ee,et)?[]:[Ce.fromTag("br")])}).getOr([]),q=(()=>{const ee=ds(l,le=>{const Se=yo(le);return b(Se)?[]:Se.concat(M(le))});return ee.length===0?[Ce.fromTag("br")]:ee})();Ba(l[0]),Hr(l[0],q)},Bw=l=>Nm(l,!0),O1=l=>{ul(l).length===0&&cr(l)},Sh=(l,m)=>({grid:l,cursor:m}),$w=l=>ws(l,m=>ws(m.cells,b=>{const S=b.element;return qp(Bw(S),S)})),bO=(l,m,b)=>{var S,O;const M=or(l).rows;return ue.from((O=(S=M[m])===null||S===void 0?void 0:S.cells[b])===null||O===void 0?void 0:O.element).filter(Bw).orThunk(()=>$w(M))},ri=(l,m,b)=>{const S=bO(l,m,b);return Sh(l,S)},xr=l=>Xe(l,(b,S)=>ft(b,M=>M.row===S.row)?b:b.concat([S]),[]).sort((b,S)=>b.row-S.row),ma=(l,m,b,S)=>{const O=m[0].row,M=xr(m),H=ar(M,(q,ee)=>({grid:rx(q.grid,O,ee.row+q.delta,b,S.getOrInit),delta:q.delta+1}),{grid:l,delta:0}).grid;return ri(H,O,m[0].column)},ai=(l,m,b,S)=>{const O=xr(m),M=O[O.length-1],H=M.row+M.rowspan,q=ar(O,(ee,le)=>rx(ee,H,le.row,b,S.getOrInit),l);return ri(q,H,m[0].column)},Ta=(l,m,b,S)=>{const O=m.details,M=Um(O),H=M[0].column,q=ar(M,(ee,le)=>({grid:Qi(ee.grid,H,le.column+ee.delta,b,S.getOrInit),delta:ee.delta+1}),{grid:l,delta:0}).grid;return ri(q,O[0].row,H)},Ha=(l,m,b,S)=>{const O=m.details,M=O[O.length-1],H=M.column+M.colspan,q=Um(O),ee=ar(q,(le,Se)=>Qi(le,H,Se.column,b,S.getOrInit),l);return ri(ee,O[0].row,H)},Er=(l,m,b,S)=>{const O=Um(m),M=Jt(O,q=>q.column),H=kw(l,M,!0,b,S.replaceOrInit);return ri(H,m[0].row,m[0].column)},Iw=(l,m,b,S)=>{const O=Vv(l,m,b,S.replaceOrInit);return ri(O,m[0].row,m[0].column)},A1=(l,m,b,S)=>{const O=Um(m),M=Jt(O,q=>q.column),H=kw(l,M,!1,b,S.replaceOrInit);return ri(H,m[0].row,m[0].column)},Fw=(l,m,b,S)=>{const O=Vv(l,m,b,S.replaceOrInit);return ri(O,m[0].row,m[0].column)},D1=(l,m)=>(b,S,O,M,H)=>{const q=xr(S),ee=Jt(q,Se=>Se.row),le=gO(b,ee,l,m,O,M.replaceOrInit,H);return ri(le,S[0].row,S[0].column)},Lw=D1("thead",!0),ux=D1("tbody",!1),qv=D1("tfoot",!1),Hw=(l,m,b,S)=>{const O=Um(m.details),M=zv(l,Jt(O,q=>q.column)),H=M.length>0?M[0].cells.length-1:0;return ri(M,O[0].row,Math.min(O[0].column,H))},vO=(l,m,b,S)=>{const O=xr(m),M=Ws(l,O[0].row,O[O.length-1].row),H=M.length>0?M.length-1:0;return ri(M,Math.min(m[0].row,H),m[0].column)},yO=(l,m,b,S)=>{const O=m.cells;Gv(O);const M=wl(l,m.bounds,b,S.merge(O));return Sh(M,ue.from(O[0]))},dx=(l,m,b,S)=>{const M=ar(m,(H,q)=>La(H,q,b,S.unmerge(q)),l);return Sh(M,ue.from(m[0]))},wO=(l,m,b,S)=>{const M=((ee,le)=>{const Se=Nn.fromTable(ee);return mh(Se,le,!0)})(m.clipboard,m.generators),H=_f(m.row,m.column);return sx(H,l,M,m.generators,b).fold(()=>Sh(l,ue.some(m.element)),ee=>ri(ee,m.row,m.column))},xh=(l,m,b)=>{const S=Uy(l,b.section),O=Nn.generate(S);return mh(O,m,!0)},Kv=(l,m,b,S)=>{const O=or(l).rows,M=m.cells[0].column,H=O[m.cells[0].row],q=xh(m.clipboard,m.generators,H),ee=Hv(M,l,q,m.generators,b);return ri(ee,m.cells[0].row,m.cells[0].column)},mx=(l,m,b,S)=>{const O=or(l).rows,M=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,H=O[m.cells[0].row],q=xh(m.clipboard,m.generators,H),ee=Hv(M,l,q,m.generators,b);return ri(ee,m.cells[0].row,m.cells[0].column)},QM=(l,m,b,S)=>{const O=or(l).rows,M=m.cells[0].row,H=O[M],q=xh(m.clipboard,m.generators,H),ee=Jf(M,l,q,m.generators,b);return ri(ee,m.cells[0].row,m.cells[0].column)},Ci=(l,m,b,S)=>{const O=or(l).rows,M=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,H=O[m.cells[0].row],q=xh(m.clipboard,m.generators,H),ee=Jf(M,l,q,m.generators,b);return ri(ee,m.cells[0].row,m.cells[0].column)},eP=(l,m)=>{const b=Nn.fromTable(l);return Fm(b,m).bind(O=>{const M=O[O.length-1],H=O[0].column,q=M.column+M.colspan,ee=vo(Jt(b.all,le=>Xo(le.cells,Se=>Se.column>=H&&Se.column<q)));return uh(ee)}).getOr("")},ru=(l,m)=>{const b=Nn.fromTable(l);return Fm(b,m).bind(uh).getOr("")},lt=(l,m)=>{const b=Nn.fromTable(l);return Fm(b,m).bind(O=>{const M=O[O.length-1],H=O[0].row,q=M.row+M.rowspan,ee=b.all.slice(H,q);return iO(ee)}).getOr("")},zw=(l,m,b,S)=>Yu(l,m,b,S.sizing),Tr=(l,m,b,S)=>Sr(l,m,b,S.sizing,S.resize),fx=(l,m)=>ft(m,b=>b.column===0&&b.isLocked),Yv=(l,m)=>ft(m,b=>b.column+b.colspan>=l.grid.columns&&b.isLocked),Vw=(l,m)=>{const b=Om(l),S=Um(m);return Xe(S,(O,M)=>{const q=b[M.column].map(pl).getOr(0);return O+q},0)},Si=l=>(m,b)=>Fm(m,b).filter(S=>!(l?fx:Yv)(m,S)).map(S=>({details:S,pixelDelta:Vw(m,S)})),CO=(l,m)=>Vd(l,m).map(b=>({details:b,pixelDelta:-Vw(l,b)})),gx=l=>(m,b)=>fh(m,b).filter(S=>!(l?fx:Yv)(m,S.cells)),xi=De.transform("th"),Eh=De.transform("td"),R1=da(ma,Fm,He,He,De.modification),Ju=da(ai,Fm,He,He,De.modification),Cl=da(Ta,Si(!0),Tr,He,De.modification),Ot=da(Ha,Si(!1),Tr,He,De.modification),hc=da(Hw,CO,Tr,O1,De.modification),hx=da(vO,Fm,He,O1,De.modification),px=da(Er,Vd,He,He,xi),Uw=da(A1,Vd,He,He,Eh),bx=da(Lw,Vd,He,He,xi),Ww=da(ux,Vd,He,He,Eh),Zw=da(qv,Vd,He,He,Eh),SO=da(Iw,Vd,He,He,xi),jw=da(Fw,Vd,He,He,Eh),xO=da(yO,XM,zw,He,De.merging),za=da(dx,JM,zw,He,De.merging),M1=da(wO,S1,zw,He,De.modification),EO=da(Kv,gx(!0),He,He,De.modification),TO=da(mx,gx(!1),He,He,De.modification),Gw=da(QM,fh,He,He,De.modification),_O=da(Ci,fh,He,He,De.modification),vx=eP,yx=ru,P1=lt,wx=(l,m)=>l.dispatch("NewRow",{node:m}),qw=(l,m)=>l.dispatch("NewCell",{node:m}),og=(l,m,b)=>{l.dispatch("TableModified",{...b,table:m})},kO=(l,m,b,S,O)=>{l.dispatch("TableSelectionChange",{cells:m,start:b,finish:S,otherCells:O})},OO=l=>{l.dispatch("TableSelectionClear")},Kw=(l,m,b,S,O)=>{l.dispatch("ObjectResizeStart",{target:m,width:b,height:S,origin:O})},AO=(l,m,b,S,O)=>{l.dispatch("ObjectResized",{target:m,width:b,height:S,origin:O})},jd={structure:!1,style:!0},Rn={structure:!0,style:!1},Yw={structure:!0,style:!0},Va=(l,m)=>Ql(l)?yi.percentageSize(m):Pm(l)?yi.pixelSize(m):yi.getTableSize(m),Xv=(l,m,b)=>{const S=ci=>Wo(wv(ci))==="table",O=ci=>!S(l)||ch(ci).rows>1,M=ci=>!S(l)||ch(ci).columns>1,H=$d(l),q=Vs(l)?He:Cw,ee=ci=>{switch(Wf(l)){case"section":return Im.section();case"sectionCells":return Im.sectionCells();case"cells":return Im.cells();default:return Im.getTableSectionType(ci,"section")}},le=(ci,ZC)=>ZC.cursor.fold(()=>{const db=ul(ci);return $e(db).filter(Ms).map(sd=>{b.clearSelectedCells(ci.dom);const Aa=l.dom.createRng();return Aa.selectNode(sd.dom),l.selection.setRng(Aa),Ds(sd,"data-mce-selected","1"),Aa})},db=>{const sd=K2(db),Aa=l.dom.createRng();return Aa.setStart(sd.element.dom,sd.offset),Aa.setEnd(sd.element.dom,sd.offset),l.selection.setRng(Aa),b.clearSelectedCells(ci.dom),ue.some(Aa)}),Se=(ci,ZC,db,sd)=>(Aa,mb,vE=!1)=>{tu(Aa);const yE=Ce.fromDom(l.getDoc()),Jh=Jg(db,yE,H),wE={sizing:Va(l,Aa),resize:Vs(l)?Y2():Sw(),section:ee(Aa)};return ZC(Aa)?ci(Aa,mb,Jh,wE).bind(R0=>{m.refresh(Aa.dom),qe(R0.newRows,gg=>{wx(l,gg.dom)}),qe(R0.newCells,gg=>{qw(l,gg.dom)});const CE=le(Aa,R0);return Ms(Aa)&&(tu(Aa),vE||og(l,Aa.dom,sd)),CE.map(gg=>({rng:gg,effect:sd}))}):ue.none()},et=Se(hx,O,He,Rn),vt=Se(hc,M,He,Rn),pt=Se(R1,Te,He,Rn),Ze=Se(Ju,Te,He,Rn),wt=Se(Cl,Te,q,Rn),Ue=Se(Ot,Te,q,Rn),Nt=Se(xO,Te,He,Rn),mn=Se(za,Te,He,Rn),_n=Se(EO,Te,He,Rn),ss=Se(TO,Te,He,Rn),kr=Se(Gw,Te,He,Rn),Ls=Se(_O,Te,He,Rn),_i=Se(M1,Te,He,Yw),mg=Se(SO,Te,He,Rn),fg=Se(jw,Te,He,Rn),WC=Se(px,Te,He,Rn),D0=Se(Uw,Te,He,Rn),Ro=Se(bx,Te,He,Rn),Wa=Se(Ww,Te,He,Rn),ga=Se(Zw,Te,He,Rn);return{deleteRow:et,deleteColumn:vt,insertRowsBefore:pt,insertRowsAfter:Ze,insertColumnsBefore:wt,insertColumnsAfter:Ue,mergeCells:Nt,unmergeCells:mn,pasteColsBefore:_n,pasteColsAfter:ss,pasteRowsBefore:kr,pasteRowsAfter:Ls,pasteCells:_i,makeCellsHeader:mg,unmakeCellsHeader:fg,makeColumnsHeader:WC,unmakeColumnsHeader:D0,makeRowsHeader:Ro,makeRowsBody:Wa,makeRowsFooter:ga,getTableRowType:P1,getTableCellType:yx,getTableColType:vx}},Xw=(l,m,b)=>{const S=ns(l,m,1);b===1||S<=1?Cs(l,m):Ds(l,m,Math.min(b,S))},Jw=(l,m)=>b=>{const S=b.column+b.colspan-1,O=b.column;return S>=l&&O<m},Jv=(l,m,b)=>{if(Nn.hasColumns(l)){const S=Xo(Nn.justColumns(l),Jw(m,b)),O=Jt(S,H=>{const q=$c(H.element);return Xw(q,"span",b-m),q}),M=Ce.fromTag("colgroup");return Hr(M,O),[M]}else return[]},Cx=(l,m,b)=>Jt(l.all,S=>{const O=Xo(S.cells,Jw(m,b)),M=Jt(O,q=>{const ee=$c(q.element);return Xw(ee,"colspan",b-m),ee}),H=Ce.fromTag("tr");return Hr(H,M),H}),DO=(l,m)=>{const b=Nn.fromTable(l);return Vd(b,m).map(O=>{const M=O[O.length-1],H=O[0].column,q=M.column+M.colspan,ee=Jv(b,H,q),le=Cx(b,H,q);return[...ee,...le]})},RO=(l,m,b)=>{const S=Nn.fromTable(l);return Fm(S,m).bind(M=>{const H=mh(S,b,!1),ee=or(H).rows.slice(M[0].row,M[M.length-1].row+M[M.length-1].rowspan),le=ds(ee,et=>{const vt=Xo(et.cells,pt=>!pt.isLocked);return vt.length>0?[{...et,cells:vt}]:[]}),Se=Ts(le);return qp(Se.length>0,Se)}).map(M=>J2(M))},Th=ec.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Sx=(l,m,b)=>{const S=b.substring(0,b.length-l.length),O=parseFloat(S);return S===O.toString()?m(O):Th.invalid(b)},Wm={...Th,from:l=>Au(l,"%")?Sx("%",Th.percent,l):Au(l,"px")?Sx("px",Th.pixels,l):Th.invalid(l)},MO=(l,m)=>Jt(l,b=>Wm.from(b).fold(()=>b,O=>O/m*100+"%",O=>O+"%")),_h=(l,m,b)=>{const S=b/m;return Jt(l,O=>Wm.from(O).fold(()=>O,H=>H*S+"px",H=>H/100*b+"px"))},PO=(l,m)=>{const b=l.fold(()=>Q(""),S=>{const O=S/m;return Q(O+"px")},()=>{const S=100/m;return Q(S+"%")});return Eo(m,b)},Qw=(l,m,b)=>l.fold(()=>m,S=>_h(m,b,S),S=>MO(m,b)),xx=(l,m,b)=>{const S=Wm.from(b),O=To(l,M=>M==="0px")?PO(S,l.length):Qw(S,l,m);return Tx(O)},sg=(l,m)=>l.length===0?m:ar(l,(b,S)=>Wm.from(S).fold(Q(0),Ge,Ge)+b,0),NO=(l,m)=>{const b=Math.floor(l);return{value:b+m,remainder:l-b}},Ex=(l,m)=>Wm.from(l).fold(Q(l),b=>b+m+"px",b=>b+m+"%"),Tx=l=>{if(l.length===0)return l;const m=ar(l,(S,O)=>{const M=Wm.from(O).fold(()=>({value:O,remainder:0}),H=>NO(H,"px"),H=>({value:H+"%",remainder:0}));return{output:[M.value].concat(S.output),remainder:S.remainder+M.remainder}},{output:[],remainder:0}),b=m.output;return b.slice(0,b.length-1).concat([Ex(b[b.length-1],Math.round(m.remainder))])},kh=Wm.from,_x=(l,m,b)=>{qe(m,S=>{const O=l.slice(S.column,S.colspan+S.column),M=sg(O,Is());gs(S.element,"width",M+b)})},eC=(l,m,b)=>{qe(m,(S,O)=>{const M=sg([l[O]],Is());gs(S.element,"width",M+b)})},BO=(l,m,b,S)=>{qe(b,O=>{const M=l.slice(O.row,O.rowspan+O.row),H=sg(M,Hc());gs(O.element,"height",H+S)}),qe(m,(O,M)=>{gs(O.element,"height",l[M])})},kx=l=>kh(l).fold(Q("px"),Q("px"),Q("%")),Qu=(l,m,b)=>{const S=Nn.fromTable(l),O=S.all,M=Nn.justCells(S),H=Nn.justColumns(S);m.each(q=>{const ee=kx(q),le=pi(l),Se=Lf(S,l),et=xx(Se,le,q);Nn.hasColumns(S)?eC(et,H,ee):_x(et,M,ee),gs(l,"width",q)}),b.each(q=>{const ee=kx(q),le=a1(l),Se=Zi(S,l,Mt),et=xx(Se,le,q);BO(et,O,M,ee),gs(l,"height",q)})},N1=Yl,B1=Zk,Qv=Xl,$1=l=>{Cs(l,"width")},jc=l=>{const m=ro(l);Qu(l,ue.some(m),ue.none()),$1(l)},Oh=l=>{const m=u1(l);Qu(l,ue.some(m),ue.none()),$1(l)},I1=l=>{zi(l,"width");const m=Vg(l),b=m.length>0?m:ul(l);qe(b,S=>{zi(S,"width"),$1(S)}),$1(l)},Zm={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},e0=()=>Ce.fromTag("th"),$O=()=>Ce.fromTag("td"),IO=()=>Ce.fromTag("col"),Ox=(l,m,b,S)=>{const O=Ce.fromTag("tr");for(let M=0;M<l;M++){const H=S<m||M<b?e0():$O();M<b&&Ds(H,"scope","row"),S<m&&Ds(H,"scope","col"),es(H,Ce.fromTag("br")),es(O,H)}return O},FO=l=>{const m=Ce.fromTag("colgroup");return Eo(l,()=>es(m,IO())),m},tC=(l,m,b,S)=>Eo(l,O=>Ox(m,b,S,O)),LO=(l,m,b,S,O,M=Zm)=>{const H=Ce.fromTag("table"),q=O!=="cells";Vr(H,M.styles),Li(H,M.attributes),M.colGroups&&es(H,FO(m));const ee=Math.min(l,b);if(q&&b>0){const pt=Ce.fromTag("thead");es(H,pt);const wt=tC(b,m,O==="sectionCells"?ee:0,S);Hr(pt,wt)}const le=Ce.fromTag("tbody");es(H,le);const Se=q?l-ee:l,vt=tC(Se,m,q?0:b,S);return Hr(le,vt),H},HO=l=>l.dom.innerHTML,Ax=l=>{const m=Ce.fromTag("div"),b=Ce.fromDom(l.dom.cloneNode(!0));return es(m,b),HO(m)},zO=(l,m)=>{l.selection.select(m.dom,!0),l.selection.collapse(!0)},Dx=(l,m)=>{gi(m,"td,th").each(_t(zO,l))},VO=(l,m)=>{qe(ti(m,"tr"),b=>{wx(l,b.dom),qe(ti(b,"th,td"),S=>{qw(l,S.dom)})})},t0=l=>N(l)&&l.indexOf("%")!==-1,UO=(l,m,b,S,O)=>{const M=lw(l),H={styles:M,attributes:eu(l),colGroups:m1(l)};return l.undoManager.ignore(()=>{const q=LO(b,m,O,S,Wf(l),H);Ds(q,"data-mce-id","__mce");const ee=Ax(q);l.insertContent(ee),l.addVisual()}),gi(wv(l),'table[data-mce-id="__mce"]').map(q=>(Pm(l)?Oh(q):Zf(l)?I1(q):(Ql(l)||t0(M.width))&&jc(q),tu(q),Cs(q,"data-mce-id"),VO(l,q),Dx(l,q),q.dom)).getOrNull()},Rx=(l,m,b,S={})=>{const O=M=>je(M)&&M>0;if(O(m)&&O(b)){const M=S.headerRows||0,H=S.headerColumns||0;return UO(l,b,m,H,M)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var Ah=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const nC="x-tinymce/dom-table-",oC=nC+"rows",sC=nC+"columns",Mx=l=>{const m=Ah.FakeClipboardItem(l);Ah.write([m])},rC=l=>{var m;const b=(m=Ah.read())!==null&&m!==void 0?m:[];return ws(b,S=>ue.from(S.getType(l)))},WO=l=>{rC(l).isSome()&&Ah.clear()},n0=l=>{l.fold(ZO,m=>Mx({[oC]:m}))},o0=()=>rC(oC),ZO=()=>WO(oC),aC=l=>{l.fold(jO,m=>Mx({[sC]:m}))},Px=()=>rC(sC),jO=()=>WO(sC),iC=l=>nu(dc(l),Uu(l)).filter(Sv),GO=l=>w1(dc(l),Uu(l)).filter(Sv),Dh=(l,m)=>{const b=Uu(l),S=()=>iC(l).each(Ue=>{ni(Ue,b).filter(ae(b)).each(Nt=>{const mn=Ce.fromText("");if(mi(Nt,mn),cr(Nt),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const _n=l.dom.createRng();_n.setStart(mn.dom,0),_n.setEnd(mn.dom,0),l.selection.setRng(_n),l.nodeChanged()}})}),O=Ue=>iC(l).each(Nt=>{Zf(l)||Pm(l)||Ql(l)||ni(Nt,b).each(_n=>{Ue==="relative"&&!N1(_n)?jc(_n):Ue==="fixed"&&!B1(_n)?Oh(_n):Ue==="responsive"&&!Qv(_n)&&I1(_n),tu(_n),og(l,_n.dom,Rn)})}),M=Ue=>ni(Ue,b),H=Ue=>GO(l).bind(Nt=>M(Nt).map(mn=>Ue(mn,Nt))),q=(Ue,Nt)=>{H(mn=>{l.formatter.toggle("tableclass",{value:Nt},mn.dom),og(l,mn.dom,jd)})},ee=(Ue,Nt)=>{H(mn=>{const _n=Zc(l),kr=To(_n,Ls=>l.formatter.match("tablecellclass",{value:Nt},Ls.dom))?l.formatter.remove:l.formatter.apply;qe(_n,Ls=>kr("tablecellclass",{value:Nt},Ls.dom)),og(l,mn.dom,jd)})},le=()=>{iC(l).each(Ue=>{ni(Ue,b).each(Nt=>{to(Nt,"caption").fold(()=>{const mn=Ce.fromTag("caption");es(mn,Ce.fromText("Caption")),ya(Nt,mn,0),l.selection.setCursorLocation(mn.dom,0)},mn=>{na("caption")(Ue)&&xd("td",Nt).each(_n=>l.selection.setCursorLocation(_n.dom,0)),cr(mn)}),og(l,Nt.dom,Rn)})})},Se=Ue=>{l.focus()},et=(Ue,Nt=!1)=>H((mn,_n)=>{const ss=oh(Zc(l),mn,_n);Ue(mn,ss,Nt).each(Se)}),vt=()=>H((Ue,Nt)=>{const mn=oh(Zc(l),Ue,Nt),_n=Jg(He,Ce.fromDom(l.getDoc()),ue.none());return RO(Ue,mn,_n)}),pt=()=>H((Ue,Nt)=>{const mn=oh(Zc(l),Ue,Nt);return DO(Ue,mn)}),Ze=(Ue,Nt)=>Nt().each(mn=>{const _n=Jt(mn,ss=>$c(ss));H((ss,kr)=>{const Ls=Qg(Ce.fromDom(l.getDoc())),_i=sh(Zc(l),kr,_n,Ls);Ue(ss,_i).each(Se)})}),wt=Ue=>(Nt,mn)=>Cd(mn,"type").each(_n=>{et(Ue(_n),mn.no_events)});as({mceTableSplitCells:()=>et(m.unmergeCells),mceTableMergeCells:()=>et(m.mergeCells),mceTableInsertRowBefore:()=>et(m.insertRowsBefore),mceTableInsertRowAfter:()=>et(m.insertRowsAfter),mceTableInsertColBefore:()=>et(m.insertColumnsBefore),mceTableInsertColAfter:()=>et(m.insertColumnsAfter),mceTableDeleteCol:()=>et(m.deleteColumn),mceTableDeleteRow:()=>et(m.deleteRow),mceTableCutCol:()=>pt().each(Ue=>{aC(Ue),et(m.deleteColumn)}),mceTableCutRow:()=>vt().each(Ue=>{n0(Ue),et(m.deleteRow)}),mceTableCopyCol:()=>pt().each(Ue=>aC(Ue)),mceTableCopyRow:()=>vt().each(Ue=>n0(Ue)),mceTablePasteColBefore:()=>Ze(m.pasteColsBefore,Px),mceTablePasteColAfter:()=>Ze(m.pasteColsAfter,Px),mceTablePasteRowBefore:()=>Ze(m.pasteRowsBefore,o0),mceTablePasteRowAfter:()=>Ze(m.pasteRowsAfter,o0),mceTableDelete:S,mceTableCellToggleClass:ee,mceTableToggleClass:q,mceTableToggleCaption:le,mceTableSizingMode:(Ue,Nt)=>O(Nt),mceTableCellType:wt(Ue=>Ue==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:wt(Ue=>Ue==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:wt(Ue=>{switch(Ue){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(Ue,Nt)=>l.addCommand(Nt,Ue)),l.addCommand("mceInsertTable",(Ue,Nt)=>{Rx(l,Nt.rows,Nt.columns,Nt.options)}),l.addCommand("mceTableApplyCellStyle",(Ue,Nt)=>{const mn=kr=>"tablecell"+kr.toLowerCase().replace("-","");if(!z(Nt))return;const _n=Xo(Zc(l),Sv);if(_n.length===0)return;const ss=Ya(Nt,(kr,Ls)=>l.formatter.has(mn(Ls))&&N(kr));sl(ss)||(as(ss,(kr,Ls)=>{const _i=mn(Ls);qe(_n,mg=>{kr===""?l.formatter.remove(_i,{value:null},mg.dom,!0):l.formatter.apply(_i,{value:kr},mg.dom)})}),M(_n[0]).each(kr=>og(l,kr.dom,jd)))})},qO=(l,m)=>{const b=Uu(l),S=O=>w1(dc(l)).bind(M=>ni(M,b).map(H=>{const q=oh(Zc(l),H,M);return O(H,q)})).getOr("");as({mceTableRowType:()=>S(m.getTableRowType),mceTableCellType:()=>S(m.getTableCellType),mceTableColType:()=>S(m.getTableColType)},(O,M)=>l.addQueryValueHandler(M,O))},cC=ec.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),KO=(l,m,b,S)=>l.fold(m,b,S),YO=l=>l.fold(Ge,Ge,Ge),XO=cC.before,Nx=cC.on,JO=cC.after,Kr={before:XO,on:Nx,after:JO,cata:KO,getStart:YO},Rh={create:(l,m)=>({selection:l,kill:m})},s0=(l,m)=>{const b=l.document.createRange();return b.selectNode(m.dom),b},Bx=(l,m)=>{const b=l.document.createRange();return lC(b,m),b},lC=(l,m)=>l.selectNodeContents(m.dom),$x=(l,m)=>{m.fold(b=>{l.setStartBefore(b.dom)},(b,S)=>{l.setStart(b.dom,S)},b=>{l.setStartAfter(b.dom)})},Ix=(l,m)=>{m.fold(b=>{l.setEndBefore(b.dom)},(b,S)=>{l.setEnd(b.dom,S)},b=>{l.setEndAfter(b.dom)})},rg=(l,m,b)=>{const S=l.document.createRange();return $x(S,m),Ix(S,b),S},F1=(l,m,b,S,O)=>{const M=l.document.createRange();return M.setStart(m.dom,b),M.setEnd(S.dom,O),M},QO=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),eA=l=>{const m=l.getClientRects(),b=m.length>0?m[0]:l.getBoundingClientRect();return b.width>0||b.height>0?ue.some(b).map(QO):ue.none()},L1=ec.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),uC=(l,m,b)=>m(Ce.fromDom(b.startContainer),b.startOffset,Ce.fromDom(b.endContainer),b.endOffset),Fx=(l,m)=>m.match({domRange:b=>({ltr:Q(b),rtl:ue.none}),relative:(b,S)=>({ltr:Od(()=>rg(l,b,S)),rtl:Od(()=>ue.some(rg(l,S,b)))}),exact:(b,S,O,M)=>({ltr:Od(()=>F1(l,b,S,O,M)),rtl:Od(()=>ue.some(F1(l,O,M,b,S)))})}),_r=(l,m)=>{const b=m.ltr();return b.collapsed?m.rtl().filter(O=>O.collapsed===!1).map(O=>L1.rtl(Ce.fromDom(O.endContainer),O.endOffset,Ce.fromDom(O.startContainer),O.startOffset)).getOrThunk(()=>uC(l,L1.ltr,b)):uC(l,L1.ltr,b)},Lx=(l,m)=>{const b=Fx(l,m);return _r(l,b)},dC=(l,m)=>Lx(l,m).match({ltr:(S,O,M,H)=>{const q=l.document.createRange();return q.setStart(S.dom,O),q.setEnd(M.dom,H),q},rtl:(S,O,M,H)=>{const q=l.document.createRange();return q.setStart(M.dom,H),q.setEnd(S.dom,O),q}});L1.ltr,L1.rtl;const Mh={create:(l,m,b,S)=>({start:l,soffset:m,finish:b,foffset:S})},Hx={create:(l,m,b,S)=>({start:Kr.on(l,m),finish:Kr.on(b,S)})},mC=(l,m)=>{const b=dC(l,m);return Mh.create(Ce.fromDom(b.startContainer),b.startOffset,Ce.fromDom(b.endContainer),b.endOffset)},H1=Hx.create,r0=(l,m,b,S,O,M,H)=>Ho(b,O)&&S===M?ue.none():wr(b,"td,th",m).bind(q=>wr(O,"td,th",m).bind(ee=>Ph(l,m,q,ee,H))),Ph=(l,m,b,S,O)=>Ho(b,S)?ue.none():vl(b,S,m).bind(M=>{const H=M.boxes.getOr([]);return H.length>1?(O(l,H,M.start,M.finish),ue.some(Rh.create(ue.some(H1(b,0,b,zu(b))),!0))):ue.none()}),nA=(l,m,b,S,O)=>{const M=H=>(O.clearBeforeUpdate(b),O.selectRange(b,H.boxes,H.start,H.finish),H.boxes);return _v(S,l,m,O.firstSelectedSelector,O.lastSelectedSelector).map(M)},jm=(l,m)=>({item:l,mode:m}),zx=(l,m,b,S=Gm)=>l.property().parent(m).map(O=>jm(O,S)),Gm=(l,m,b,S=qm)=>b.sibling(l,m).map(O=>jm(O,S)),qm=(l,m,b,S=qm)=>{const O=l.property().children(m);return b.first(O).map(H=>jm(H,S))},fC=[{current:zx,next:Gm,fallback:ue.none()},{current:Gm,next:qm,fallback:ue.some(zx)},{current:qm,next:qm,fallback:ue.some(Gm)}],Vx=(l,m,b,S,O=fC)=>Z(O,H=>H.current===b).bind(H=>H.current(l,m,S,H.next).orThunk(()=>H.fallback.bind(q=>Vx(l,m,q,S)))),Km={left:()=>({sibling:(b,S)=>b.query().prevSibling(S),first:b=>b.length>0?ue.some(b[b.length-1]):ue.none()}),right:()=>({sibling:(b,S)=>b.query().nextSibling(S),first:b=>b.length>0?ue.some(b[0]):ue.none()})},ed=(l,m,b,S,O,M)=>Vx(l,m,S,O).bind(q=>M(q.item)?ue.none():b(q.item)?ue.some(q.item):ed(l,q.item,b,q.mode,O,M)),z1=(l,m,b,S)=>ed(l,m,b,Gm,Km.left(),S),Nh=(l,m,b,S)=>ed(l,m,b,Gm,Km.right(),S),hC=l=>m=>l.property().children(m).length===0,Gd=(l,m,b)=>V1(l,m,hC(l),b),au=(l,m,b)=>a0(l,m,hC(l),b),V1=z1,a0=Nh,U1=We(),pC=(l,m)=>Gd(U1,l,m),Bh=(l,m)=>au(U1,l,m),W1=(l,m,b)=>V1(U1,l,m,b),bC=(l,m,b)=>a0(U1,l,m,b),Ux=(l,m,b)=>Ps(l,m,b).isSome(),Ym=ec.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),i0=(l,m,b)=>{const S=l.getRect(m),O=l.getRect(b);return O.right>S.left&&O.left<S.right},oA=l=>wr(l,"tr"),Zs={...Ym,verify:(l,m,b,S,O,M,H)=>wr(S,"td,th",H).bind(q=>wr(m,"td,th",H).map(ee=>Ho(q,ee)?Ho(S,q)&&zu(q)===O?M(ee):Ym.none("in same cell"):Bo(oA,[q,ee]).fold(()=>i0(l,ee,q)?Ym.success():M(ee),le=>M(ee)))).getOr(Ym.none("default")),cata:(l,m,b,S,O)=>l.fold(m,b,S,O)},rP=(l,m,b,S)=>({parent:l,children:m,element:b,index:S}),qd=l=>Ja(l).bind(m=>{const b=yo(m);return Zx(b,l).map(S=>rP(m,b,l,S))}),Zx=(l,m)=>di(l,_t(Ho,m)),c0=na("br"),Xm=(l,m,b)=>m(l,b).bind(S=>al(S)&&la(S).trim().length===0?Xm(S,m,b):ue.some(S)),_a=(l,m,b)=>b.traverse(m).orThunk(()=>Xm(m,b.gather,l)).map(b.relative),$h=(l,m)=>sa(l,m).filter(c0).orThunk(()=>sa(l,m-1).filter(c0)),Z1=(l,m,b,S)=>$h(m,b).bind(O=>S.traverse(O).fold(()=>Xm(O,S.gather,l).map(S.relative),M=>qd(M).map(H=>Kr.on(H.parent,H.index)))),Ih=(l,m,b,S)=>(c0(m)?_a(l,m,S):Z1(l,m,b,S)).map(M=>({start:M,finish:M})),yC=l=>Zs.cata(l,m=>ue.none(),()=>ue.none(),m=>ue.some(ah(m,0)),m=>ue.some(ah(m,zu(m)))),Fh=(l,m)=>({left:l.left,top:l.top+m,right:l.right,bottom:l.bottom+m}),ag=(l,m)=>({left:l.left,top:l.top-m,right:l.right,bottom:l.bottom-m}),iu=(l,m,b)=>({left:l.left+m,top:l.top+b,right:l.right+m,bottom:l.bottom+b}),sA=l=>l.top,rA=l=>l.bottom,Jm=(l,m,b)=>b>=0&&b<zu(m)?l.getRangedRect(m,b,m,b+1):b>0?l.getRangedRect(m,b-1,m,b):ue.none(),Lh=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),l0=(l,m)=>ue.some(l.getRect(m)),td=(l,m,b)=>va(m)?l0(l,m).map(Lh):al(m)?Jm(l,m,b).map(Lh):ue.none(),wC=(l,m)=>va(m)?l0(l,m).map(Lh):al(m)?l.getRangedRect(m,0,m,zu(m)).map(Lh):ue.none(),Yr=5,Kd=100,Sl=ec.generate([{none:[]},{retry:["caret"]}]),Hh=(l,m)=>l.left<m.left||Math.abs(m.right-l.left)<1||l.left>m.right,Ua=(l,m,b)=>Df(m,jv).fold(It,S=>wC(l,S).exists(O=>Hh(b,O))),Ei=(l,m,b,S,O)=>{const M=Fh(O,Yr);return Math.abs(b.bottom-S.bottom)<1||b.top>O.bottom?Sl.retry(M):b.top===O.bottom?Sl.retry(Fh(O,1)):Ua(l,m,O)?Sl.retry(iu(M,Yr,0)):Sl.none()},xl={point:sA,adjuster:(l,m,b,S,O)=>{const M=ag(O,Yr);return Math.abs(b.top-S.top)<1||b.bottom<O.top?Sl.retry(M):b.bottom===O.top?Sl.retry(ag(O,1)):Ua(l,m,O)?Sl.retry(iu(M,Yr,0)):Sl.none()},move:ag,gather:pC},u0={point:rA,adjuster:Ei,move:Fh,gather:Bh},pc=(l,m,b)=>l.elementFromPoint(m,b).filter(S=>Wo(S)==="table").isSome(),ig=(l,m,b,S,O)=>CC(l,m,b,m.move(S,Yr),O),CC=(l,m,b,S,O)=>O===0?ue.some(S):pc(l,S.left,m.point(S))?ig(l,m,b,S,O-1):l.situsFromPoint(S.left,m.point(S)).bind(M=>M.start.fold(ue.none,H=>wC(l,H).bind(q=>m.adjuster(l,H,q,b,S).fold(ue.none,ee=>CC(l,m,b,ee,O-1))).orThunk(()=>ue.some(S)),ue.none)),aA=(l,m,b)=>l.point(m)>b.getInnerHeight()?ue.some(l.point(m)-b.getInnerHeight()):l.point(m)<0?ue.some(-l.point(m)):ue.none(),jx=(l,m,b)=>{const S=l.move(b,Yr),O=CC(m,l,b,S,Kd).getOr(S);return aA(l,O,m).fold(()=>m.situsFromPoint(O.left,l.point(O)),M=>(m.scrollBy(0,M),m.situsFromPoint(O.left,l.point(O)-M)))},j1={tryUp:_t(jx,xl),tryDown:_t(jx,u0),getJumpSize:Q(Yr)},Gx=20,G1=(l,m,b)=>l.getSelection().bind(S=>Ih(m,S.finish,S.foffset,b).fold(()=>ue.some(ah(S.finish,S.foffset)),O=>{const M=l.fromSitus(O),H=Zs.verify(l,S.finish,S.foffset,M.finish,M.foffset,b.failure,m);return yC(H)})),d0=(l,m,b,S,O,M)=>M===0?ue.none():cA(l,m,b,S,O).bind(H=>{const q=l.fromSitus(H),ee=Zs.verify(l,b,S,q.finish,q.foffset,O.failure,m);return Zs.cata(ee,()=>ue.none(),()=>ue.some(H),le=>Ho(b,le)&&S===0?iA(l,b,S,ag,O):d0(l,m,le,0,O,M-1),le=>Ho(b,le)&&S===zu(le)?iA(l,b,S,Fh,O):d0(l,m,le,zu(le),O,M-1))}),iA=(l,m,b,S,O)=>td(l,m,b).bind(M=>qx(l,O,S(M,j1.getJumpSize()))),qx=(l,m,b)=>{const S=Dd().browser;return S.isChromium()||S.isSafari()||S.isFirefox()?m.retry(l,b):ue.none()},cA=(l,m,b,S,O)=>td(l,b,S).bind(M=>qx(l,O,M)),aP=(l,m,b)=>G1(l,m,b).bind(S=>d0(l,m,S.element,S.offset,b,Gx).map(l.fromSitus)),Kx=(l,m)=>Ux(l,b=>Ja(b).exists(S=>Ho(S,m))),Hn=(l,m,b,S,O)=>wr(S,"td,th",m).bind(M=>wr(M,"table",m).bind(H=>Kx(O,H)?aP(l,m,b).bind(q=>wr(q.finish,"td,th",m).map(ee=>({start:M,finish:ee,range:q}))):ue.none())),cu=(l,m,b,S,O,M)=>M(S,m).orThunk(()=>Hn(l,m,b,S,O).map(H=>{const q=H.range;return Rh.create(ue.some(H1(q.start,q.soffset,q.finish,q.foffset)),!0)})),cg=(l,m)=>wr(l,"tr",m).bind(b=>wr(b,"table",m).bind(S=>{const O=ti(S,"tr");return Ho(b,O[0])?W1(S,M=>Nd(M).isSome(),m).map(M=>{const H=zu(M);return Rh.create(ue.some(H1(M,H,M,H)),!0)}):ue.none()})),SC=(l,m)=>wr(l,"tr",m).bind(b=>wr(b,"table",m).bind(S=>{const O=ti(S,"tr");return Ho(b,O[O.length-1])?bC(S,M=>F2(M).isSome(),m).map(M=>Rh.create(ue.some(H1(M,0,M,0)),!0)):ue.none()})),Yx=(l,m,b,S,O,M,H)=>Hn(l,b,S,O,M).bind(q=>Ph(m,b,q.start,q.finish,H)),q1=l=>{let m=l;return{get:()=>m,set:O=>{m=O}}},lA=l=>{const m=q1(ue.none()),b=()=>m.get().each(l);return{clear:()=>{b(),m.set(ue.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:q=>{b(),m.set(ue.some(q))}}},zh=()=>{const l=lA(He);return{...l,on:b=>l.get().each(b)}},m0=(l,m)=>wr(l,"td,th",m),bc=l=>Qa(l).exists(Nm),M8=(l,m,b,S)=>{const O=zh(),M=O.clear,H=Se=>{O.on(et=>{S.clearBeforeUpdate(m),m0(Se.target,b).each(vt=>{vl(et,vt,b).each(pt=>{const Ze=pt.boxes.getOr([]);if(Ze.length===1){const wt=Ze[0],Ue=f1(wt)==="false",Nt=_d(yv(Se.target),wt,Ho);Ue&&Nt&&(S.selectRange(m,Ze,wt,wt),l.selectContents(wt))}else Ze.length>1&&(S.selectRange(m,Ze,pt.start,pt.finish),l.selectContents(vt))})})})};return{clearstate:M,mousedown:Se=>{S.clear(m),m0(Se.target,b).filter(bc).each(O.set)},mouseover:Se=>{H(Se)},mouseup:Se=>{H(Se),M()}}},f0={traverse:Ou,gather:Bh,relative:Kr.before,retry:j1.tryDown,failure:Zs.failedDown},Vh={traverse:Td,gather:pC,relative:Kr.before,retry:j1.tryUp,failure:Zs.failedUp},Qm=l=>m=>m===l,g0=Qm(38),h0=Qm(40),lg=l=>l>=37&&l<=40,uA={isBackward:Qm(37),isForward:Qm(39)},Xx={isBackward:Qm(39),isForward:Qm(37)},dA=l=>{const m=l!==void 0?l.dom:document,b=m.body.scrollLeft||m.documentElement.scrollLeft,S=m.body.scrollTop||m.documentElement.scrollTop;return se(b,S)},Uh=(l,m,b)=>{const O=(b!==void 0?b.dom:document).defaultView;O&&O.scrollBy(l,m)},Yd=ec.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),mA=l=>Yd.exact(l.start,l.soffset,l.finish,l.foffset),fA=l=>l.match({domRange:m=>Ce.fromDom(m.startContainer),relative:(m,b)=>Kr.getStart(m),exact:(m,b,S,O)=>m}),Jx=Yd.domRange,xC=Yd.relative,EC=Yd.exact,TC=l=>{const m=fA(l);return $s(m)},p0=Mh.create,ef={domRange:Jx,relative:xC,exact:EC,exactFromRange:mA,getWin:TC,range:p0},Qx=(l,m,b)=>{var S,O;return ue.from((O=(S=l.dom).caretPositionFromPoint)===null||O===void 0?void 0:O.call(S,m,b)).bind(M=>{if(M.offsetNode===null)return ue.none();const H=l.dom.createRange();return H.setStart(M.offsetNode,M.offset),H.collapse(),ue.some(H)})},K1=(l,m,b)=>{var S,O;return ue.from((O=(S=l.dom).caretRangeFromPoint)===null||O===void 0?void 0:O.call(S,m,b))},_C=document.caretPositionFromPoint?Qx:document.caretRangeFromPoint?K1:ue.none,gA=(l,m,b)=>{const S=Ce.fromDom(l.document);return _C(S,m,b).map(O=>Mh.create(Ce.fromDom(O.startContainer),O.startOffset,Ce.fromDom(O.endContainer),O.endOffset))},Y1=(l,m)=>{const b=Wo(l);return b==="input"?Kr.after(l):fo(["br","img"],b)?m===0?Kr.before(l):Kr.after(l):Kr.on(l,m)},hA=(l,m)=>{const b=l.fold(Kr.before,Y1,Kr.after),S=m.fold(Kr.before,Y1,Kr.after);return ef.relative(b,S)},St=(l,m,b,S)=>{const O=Y1(l,m),M=Y1(b,S);return ef.relative(O,M)},hr=(l,m,b,S)=>{const M=ku(l).dom.createRange();return M.setStart(l.dom,m),M.setEnd(b.dom,S),M},Xd=(l,m,b,S)=>{const O=hr(l,m,b,S),M=Ho(l,b)&&m===S;return O.collapsed&&!M},Qs=l=>ue.from(l.getSelection()),Gc=(l,m)=>{Qs(l).each(b=>{b.removeAllRanges(),b.addRange(m)})},b0=(l,m,b,S,O)=>{const M=F1(l,m,b,S,O);Gc(l,M)},X1=(l,m,b,S,O,M)=>{m.collapse(b.dom,S),m.extend(O.dom,M)},lu=(l,m)=>Lx(l,m).match({ltr:(b,S,O,M)=>{b0(l,b,S,O,M)},rtl:(b,S,O,M)=>{Qs(l).each(H=>{if(H.setBaseAndExtent)H.setBaseAndExtent(b.dom,S,O.dom,M);else if(H.extend)try{X1(l,H,b,S,O,M)}catch{b0(l,O,M,b,S)}else b0(l,O,M,b,S)})}}),v0=(l,m,b,S,O)=>{const M=St(m,b,S,O);lu(l,M)},y0=(l,m,b)=>{const S=hA(m,b);lu(l,S)},Wh=l=>{if(l.rangeCount>0){const m=l.getRangeAt(0),b=l.getRangeAt(l.rangeCount-1);return ue.some(Mh.create(Ce.fromDom(m.startContainer),m.startOffset,Ce.fromDom(b.endContainer),b.endOffset))}else return ue.none()},eE=l=>{if(l.anchorNode===null||l.focusNode===null)return Wh(l);{const m=Ce.fromDom(l.anchorNode),b=Ce.fromDom(l.focusNode);return Xd(m,l.anchorOffset,b,l.focusOffset)?ue.some(Mh.create(m,l.anchorOffset,b,l.focusOffset)):Wh(l)}},J1=(l,m,b=!0)=>{const O=(b?Bx:s0)(l,m);Gc(l,O)},kC=l=>Qs(l).filter(m=>m.rangeCount>0).bind(eE),OC=l=>kC(l).map(m=>ef.exact(m.start,m.soffset,m.finish,m.foffset)),pA=(l,m)=>{const b=dC(l,m);return eA(b)},uu=(l,m,b)=>gA(l,m,b),w0=l=>{Qs(l).each(m=>m.removeAllRanges())},Zh=l=>({elementFromPoint:(Ue,Nt)=>Ce.fromPoint(Ce.fromDom(l.document),Ue,Nt),getRect:Ue=>Ue.dom.getBoundingClientRect(),getRangedRect:(Ue,Nt,mn,_n)=>{const ss=ef.exact(Ue,Nt,mn,_n);return pA(l,ss)},getSelection:()=>OC(l).map(Ue=>mC(l,Ue)),fromSitus:Ue=>{const Nt=ef.relative(Ue.start,Ue.finish);return mC(l,Nt)},situsFromPoint:(Ue,Nt)=>uu(l,Ue,Nt).map(mn=>Hx.create(mn.start,mn.soffset,mn.finish,mn.foffset)),clearSelection:()=>{w0(l)},collapseSelection:(Ue=!1)=>{OC(l).each(Nt=>Nt.fold(mn=>mn.collapse(Ue),(mn,_n)=>{const ss=Ue?mn:_n;y0(l,ss,ss)},(mn,_n,ss,kr)=>{const Ls=Ue?mn:ss,_i=Ue?_n:kr;v0(l,Ls,_i,Ls,_i)}))},setSelection:Ue=>{v0(l,Ue.start,Ue.soffset,Ue.finish,Ue.foffset)},setRelativeSelection:(Ue,Nt)=>{y0(l,Ue,Nt)},selectNode:Ue=>{J1(l,Ue,!1)},selectContents:Ue=>{J1(l,Ue)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>dA(Ce.fromDom(l.document)).top,scrollBy:(Ue,Nt)=>{Uh(Ue,Nt,Ce.fromDom(l.document))}}),fa=(l,m)=>({rows:l,cols:m}),sr=(l,m,b,S)=>{const O=Zh(l),M=M8(O,m,b,S);return{clearstate:M.clearstate,mousedown:M.mousedown,mouseover:M.mouseover,mouseup:M.mouseup}},C0=l=>Df(l,cn).exists(Nm),Q1=(l,m)=>C0(l)||C0(m),S0=(l,m,b,S)=>{const O=Zh(l),M=()=>(S.clear(m),ue.none());return{keydown:(ee,le,Se,et,vt,pt)=>{const Ze=ee.raw,wt=Ze.which,Ue=Ze.shiftKey===!0;return Ld(m,S.selectedSelector).fold(()=>(lg(wt)&&!Ue&&S.clearBeforeUpdate(m),lg(wt)&&Ue&&!Q1(le,et)?ue.none:h0(wt)&&Ue?_t(Yx,O,m,b,f0,et,le,S.selectRange):g0(wt)&&Ue?_t(Yx,O,m,b,Vh,et,le,S.selectRange):h0(wt)?_t(cu,O,b,f0,et,le,SC):g0(wt)?_t(cu,O,b,Vh,et,le,cg):ue.none),mn=>{const _n=ss=>()=>ws(ss,Ls=>nA(Ls.rows,Ls.cols,m,mn,S)).fold(()=>Gf(m,S.firstSelectedSelector,S.lastSelectedSelector).map(Ls=>{const _i=h0(wt)||pt.isForward(wt)?Kr.after:Kr.before;return O.setRelativeSelection(Kr.on(Ls.first,0),_i(Ls.table)),S.clear(m),Rh.create(ue.none(),!0)}),Ls=>ue.some(Rh.create(ue.none(),!0)));return lg(wt)&&Ue&&!Q1(le,et)?ue.none:h0(wt)&&Ue?_n([fa(1,0)]):g0(wt)&&Ue?_n([fa(-1,0)]):pt.isBackward(wt)&&Ue?_n([fa(0,-1),fa(-1,0)]):pt.isForward(wt)&&Ue?_n([fa(0,1),fa(1,0)]):lg(wt)&&!Ue?M:ue.none})()},keyup:(ee,le,Se,et,vt)=>Ld(m,S.selectedSelector).fold(()=>{const pt=ee.raw,Ze=pt.which;return pt.shiftKey===!0&&lg(Ze)&&Q1(le,et)?r0(m,b,le,Se,et,vt,S.selectRange):ue.none()},ue.none)}},eb=(l,m,b,S)=>{const O=Zh(l);return(M,H)=>{S.clearBeforeUpdate(m),vl(M,H,b).each(q=>{const ee=q.boxes.getOr([]);S.selectRange(m,ee,q.start,q.finish),O.selectContents(H),O.collapseSelection()})}},tb=(l,m)=>{const b=il(l,m);return b===void 0||b===""?[]:b.split(" ")},jh=(l,m,b)=>{const O=tb(l,m).concat([b]);return Ds(l,m,O.join(" ")),!0},tE=(l,m,b)=>{const S=Xo(tb(l,m),O=>O!==b);return S.length>0?Ds(l,m,S.join(" ")):Cs(l,m),!1},nb=l=>l.dom.classList!==void 0,nE=l=>tb(l,"class"),oE=(l,m)=>jh(l,"class",m),sE=(l,m)=>tE(l,"class",m),qc=(l,m)=>{nb(l)?l.dom.classList.add(m):oE(l,m)},ka=l=>{(nb(l)?l.dom.classList:nE(l)).length===0&&Cs(l,"class")},El=(l,m)=>{nb(l)?l.dom.classList.remove(m):sE(l,m),ka(l)},Ti=(l,m)=>nb(l)&&l.dom.classList.contains(m),ob=(l,m)=>{qe(m,b=>{El(l,b)})},x0=l=>m=>{qc(m,l)},rE=l=>m=>{ob(m,l)},Jd={byClass:l=>{const m=x0(l.selected),b=rE([l.selected,l.lastSelected,l.firstSelected]),S=M=>{const H=ti(M,l.selectedSelector);qe(H,b)};return{clearBeforeUpdate:S,clear:S,selectRange:(M,H,q,ee)=>{S(M),qe(H,m),qc(q,l.firstSelected),qc(ee,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,m,b)=>{const S=ee=>{Cs(ee,l.selected),Cs(ee,l.firstSelected),Cs(ee,l.lastSelected)},O=ee=>{Ds(ee,l.selected,"1")},M=ee=>{H(ee),b()},H=ee=>{const le=ti(ee,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);qe(le,S)};return{clearBeforeUpdate:H,clear:M,selectRange:(ee,le,Se,et)=>{M(ee),qe(le,O),Ds(Se,l.firstSelected,"1"),Ds(et,l.lastSelected,"1"),m(le,Se,et)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},rb=(l,m,b,S)=>{switch(l.tag){case"none":return m();case"single":return S(l.element);case"multiple":return b(l.elements)}},AC=()=>({tag:"none"}),aE=l=>({tag:"multiple",elements:l}),iE=l=>({tag:"single",element:l}),DC=(l,m,b)=>({get:()=>bw(l(),b).fold(()=>m().fold(AC,iE),aE)}),E0=(l,m)=>{const b=l.slice(0,m[m.length-1].row+1),S=Ts(b);return ds(S,O=>{const M=O.cells.slice(0,m[m.length-1].column+1);return Jt(M,H=>H.element)})},$o=(l,m)=>{const b=l.slice(m[0].row+m[0].rowspan-1,l.length),S=Ts(b);return ds(S,O=>{const M=O.cells.slice(m[0].column+m[0].colspan-1,O.cells.length);return Jt(M,H=>H.element)})},Qd=(l,m,b)=>{const S=Nn.fromTable(l);return Fm(S,m).map(M=>{const H=mh(S,b,!1),{rows:q}=or(H),ee=E0(q,M),le=$o(q,M);return{upOrLeftCells:ee,downOrRightCells:le}})},cE=(l,m,b,S,O,M,H)=>({target:l,x:m,y:b,stop:S,prevent:O,kill:M,raw:H}),RC=l=>{const m=Ce.fromDom(Et(l).getOr(l.target)),b=()=>l.stopPropagation(),S=()=>l.preventDefault(),O=Zt(S,b);return cE(m,l.clientX,l.clientY,b,S,O,l)},MC=(l,m)=>b=>{l(b)&&m(RC(b))},ug=(l,m,b,S,O)=>{const M=MC(b,S);return l.dom.addEventListener(m,M,O),{unbind:_t(NC,l,m,M,O)}},PC=(l,m,b,S)=>ug(l,m,b,S,!1),NC=(l,m,b,S)=>{l.dom.removeEventListener(m,b,S)},vA=Te,Gh=(l,m,b)=>PC(l,m,vA,b),qh=RC,BC=l=>!Ti(Ce.fromDom(l.target),"ephox-snooker-resizer-bar"),$C=(l,m)=>{const b=DC(()=>Ce.fromDom(l.getBody()),()=>w1(dc(l),Uu(l)),Kf.selectedSelector),S=(ee,le,Se)=>{ni(le).each(vt=>{const pt=$d(l),Ze=Jg(He,Ce.fromDom(l.getDoc()),pt),wt=Zc(l),Ue=Qd(vt,{selection:wt},Ze);kO(l,ee,le,Se,Ue)})},O=()=>OO(l),M=Jd.byAttr(Kf,S,O);return l.on("init",ee=>{const le=l.getWin(),Se=wv(l),et=Uu(l),vt=()=>{const Ro=l.selection,Wa=Ce.fromDom(Ro.getStart()),ga=Ce.fromDom(Ro.getEnd());Bo(ni,[Wa,ga]).fold(()=>M.clear(Se),He)},pt=sr(le,Se,et,M),Ze=S0(le,Se,et,M),wt=eb(le,Se,et,M),Ue=Ro=>Ro.raw.shiftKey===!0;l.on("TableSelectorChange",Ro=>wt(Ro.start,Ro.finish));const Nt=(Ro,Wa)=>{Ue(Ro)&&(Wa.kill&&Ro.kill(),Wa.selection.each(ga=>{const wc=ef.relative(ga.start,ga.finish),oc=dC(le,wc);l.selection.setRng(oc)}))},mn=Ro=>{const Wa=qh(Ro);if(Wa.raw.shiftKey&&lg(Wa.raw.which)){const ga=l.selection.getRng(),wc=Ce.fromDom(ga.startContainer),oc=Ce.fromDom(ga.endContainer);Ze.keyup(Wa,wc,ga.startOffset,oc,ga.endOffset).each(of=>{Nt(Wa,of)})}},_n=Ro=>{const Wa=qh(Ro);m.hide();const ga=l.selection.getRng(),wc=Ce.fromDom(ga.startContainer),oc=Ce.fromDom(ga.endContainer),of=ew(uA,Xx)(Ce.fromDom(l.selection.getStart()));Ze.keydown(Wa,wc,ga.startOffset,oc,ga.endOffset,of).each(ci=>{Nt(Wa,ci)}),m.show()},ss=Ro=>Ro.button===0,kr=Ro=>Ro.buttons===void 0?!0:(Ro.buttons&1)!==0,Ls=Ro=>{pt.clearstate()},_i=Ro=>{ss(Ro)&&BC(Ro)&&pt.mousedown(qh(Ro))},mg=Ro=>{kr(Ro)&&BC(Ro)&&pt.mouseover(qh(Ro))},fg=Ro=>{ss(Ro)&&BC(Ro)&&pt.mouseup(qh(Ro))},D0=(()=>{const Ro=q1(Ce.fromDom(Se)),Wa=q1(0);return{touchEnd:wc=>{const oc=Ce.fromDom(wc.target);if(na("td")(oc)||na("th")(oc)){const of=Ro.get(),ci=Wa.get();Ho(of,oc)&&wc.timeStamp-ci<300&&(wc.preventDefault(),wt(oc,oc))}Ro.set(oc),Wa.set(wc.timeStamp)}}})();l.on("dragstart",Ls),l.on("mousedown",_i),l.on("mouseover",mg),l.on("mouseup",fg),l.on("touchend",D0.touchEnd),l.on("keyup",mn),l.on("keydown",_n),l.on("NodeChange",vt)}),l.on("PreInit",()=>{l.serializer.addTempAttr(Kf.firstSelected),l.serializer.addTempAttr(Kf.lastSelected)}),{getSelectedCells:()=>rb(b.get(),Q([]),ee=>Jt(ee,le=>le.dom),ee=>[ee.dom]),clearSelectedCells:ee=>M.clear(Ce.fromDom(ee))}},Tl=l=>{let m=[];return{bind:M=>{if(M===void 0)throw new Error("Event bind error: undefined handler");m.push(M)},unbind:M=>{m=Xo(m,H=>H!==M)},trigger:(...M)=>{const H={};qe(l,(q,ee)=>{H[q]=M[ee]}),qe(m,q=>{q(H)})}}},tf=l=>{const m=Tu(l,S=>({bind:S.bind,unbind:S.unbind})),b=Tu(l,S=>S.trigger);return{registry:m,trigger:b}},yA=(l,m)=>{let b=null;const S=()=>{te(b)||(clearTimeout(b),b=null)};return{cancel:S,throttle:(...M)=>{S(),b=setTimeout(()=>{b=null,l.apply(null,M)},m)}}},ab=l=>l.slice(0).sort(),wA=(l,m)=>{throw new Error("All required keys ("+ab(l).join(", ")+") were not specified. Specified keys were: "+ab(m).join(", ")+".")},nc=l=>{throw new Error("Unsupported keys for object: "+ab(l).join(", "))},Oa=(l,m)=>{if(!G(m))throw new Error("The "+l+" fields must be an array. Was: "+m+".");qe(m,b=>{if(!N(b))throw new Error("The value "+b+" in the "+l+" fields was not a string.")})},dg=(l,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+ab(l).join(", ")+") were not.")},iP=l=>{const m=ab(l);Z(m,(S,O)=>O<m.length-1&&S===m[O+1]).each(S=>{throw new Error("The field: "+S+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},lE=(l,m)=>CA(l,m,{validate:ve,label:"function"}),CA=(l,m,b)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return Oa("required",m),iP(m),S=>{const O=jt(S);To(m,q=>fo(O,q))||wA(m,O),l(m,O);const H=Xo(m,q=>!b.validate(S[q],q));return H.length>0&&dg(H,b.label),S}},Bn=(l,m)=>{const b=Xo(m,S=>!fo(l,S));b.length>0&&nc(b)},IC=l=>lE(Bn,l),uE=IC(["compare","extract","mutate","sink"]),FC=IC(["element","start","stop","destroy"]),SA=IC(["forceDrop","drop","move","delayDrop"]),xA=()=>{let l=ue.none();const m=()=>{l=ue.none()},b=(M,H)=>{const q=l.map(ee=>M.compare(ee,H));return l=ue.some(H),q},S=(M,H)=>{H.extract(M).each(ee=>{b(H,ee).each(Se=>{O.trigger.move(Se)})})},O=tf({move:Tl(["info"])});return{onEvent:S,reset:m,events:O.registry}},dE=()=>{const l=tf({move:Tl(["info"])});return{onEvent:He,reset:He,events:l.registry}},EA=()=>{const l=dE(),m=xA();let b=l;return{on:()=>{b.reset(),b=m},off:()=>{b.reset(),b=l},isOn:()=>b===m,onEvent:(q,ee)=>{b.onEvent(q,ee)},events:m.events}},At=(l,m,b)=>{let S=!1;const O=tf({start:Tl([]),stop:Tl([])}),M=EA(),H=()=>{Ze.stop(),M.isOn()&&(M.off(),O.trigger.stop())},q=yA(H,200),ee=Ue=>{Ze.start(Ue),M.on(),O.trigger.start()},le=Ue=>{q.cancel(),M.onEvent(Ue,m)};M.events.move.bind(Ue=>{m.mutate(l,Ue.info)});const Se=()=>{S=!0},et=()=>{S=!1},vt=()=>S,pt=Ue=>(...Nt)=>{S&&Ue.apply(null,Nt)},Ze=m.sink(SA({forceDrop:H,drop:pt(H),move:pt(le),delayDrop:pt(q.throttle)}),b),wt=()=>{Ze.destroy()};return{element:Ze.element,go:ee,on:Se,off:et,isActive:vt,destroy:wt,events:O.registry}},nf=l=>{const m=l.replace(/\./g,"-");return{resolve:S=>m+"-"+S}},ib=nf("ephox-dragster").resolve,cb=l=>{const m={layerClass:ib("blocker"),...l},b=Ce.fromTag("div");return Ds(b,"role","presentation"),Vr(b,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),qc(b,ib("blocker")),qc(b,m.layerClass),{element:Q(b),destroy:()=>{cr(b)}}};var _A=uE({compare:(l,m)=>se(m.left-l.left,m.top-l.top),extract:l=>ue.some(se(l.x,l.y)),sink:(l,m)=>{const b=cb(m),S=Gh(b.element(),"mousedown",l.forceDrop),O=Gh(b.element(),"mouseup",l.drop),M=Gh(b.element(),"mousemove",l.move),H=Gh(b.element(),"mouseout",l.delayDrop),q=()=>{b.destroy(),O.unbind(),M.unbind(),H.unbind(),S.unbind()},ee=Se=>{es(Se,b.element())},le=()=>{cr(b.element())};return FC({element:b.element,start:ee,stop:le,destroy:q})},mutate:(l,m)=>{l.mutate(m.left,m.top)}});const fE=(l,m={})=>{var b;const S=(b=m.mode)!==null&&b!==void 0?b:_A;return At(l,S,m)},em=nf("ephox-snooker").resolve,gE=()=>{const l=tf({drag:Tl(["xDelta","yDelta"])});return{mutate:(b,S)=>{l.trigger.drag(b,S)},events:l.registry}},kA=()=>{const l=tf({drag:Tl(["xDelta","yDelta","target"])});let m=ue.none();const b=gE();return b.events.drag.bind(M=>{m.each(H=>{l.trigger.drag(M.xDelta,M.yDelta,H)})}),{assign:M=>{m=ue.some(M)},get:()=>m,mutate:b.mutate,events:l.registry}},lb=(l,m,b,S,O)=>{const M=Ce.fromTag("div");return Vr(M,{position:"absolute",left:m-S/2+"px",top:b+"px",height:O+"px",width:S+"px"}),Li(M,{"data-column":l,role:"presentation"}),M},OA=(l,m,b,S,O)=>{const M=Ce.fromTag("div");return Vr(M,{position:"absolute",left:m+"px",top:b-O/2+"px",height:O+"px",width:S+"px"}),Li(M,{"data-row":l,role:"presentation"}),M},hE=em("resizer-bar"),LC=em("resizer-rows"),pE=em("resizer-cols"),T0=7,AA=(l,m)=>ds(l.all,(b,S)=>m(b.element)?[S]:[]),DA=(l,m)=>{const b=[];return Eo(l.grid.columns,S=>{Nn.getColumnAt(l,S).map(M=>M.element).forall(m)&&b.push(S)}),Xo(b,S=>{const O=Nn.filterItems(l,M=>M.column===S);return To(O,M=>m(M.element))})},Kh=l=>{const m=ti(l.parent(),"."+hE);qe(m,cr)},HC=(l,m,b)=>{const S=l.origin();qe(m,O=>{O.each(M=>{const H=b(S,M);qc(H,hE),es(l.parent(),H)})})},bE=(l,m,b,S)=>{HC(l,m,(O,M)=>{const H=lb(M.col,M.x-O.left,b.top-O.top,T0,S);return qc(H,pE),H})},RA=(l,m,b,S)=>{HC(l,m,(O,M)=>{const H=OA(M.row,b.left-O.left,M.y-O.top,S,T0);return qc(H,LC),H})},MA=(l,m,b,S,O)=>{const M=Ft(b),H=m.isResizable,q=S.length>0?Mt.positions(S,b):[],ee=q.length>0?AA(l,H):[],le=Xo(q,(pt,Ze)=>ft(ee,wt=>Ze===wt));RA(m,le,M,pl(b));const Se=O.length>0?mr.positions(O,b):[],et=Se.length>0?DA(l,H):[],vt=Xo(Se,(pt,Ze)=>ft(et,wt=>Ze===wt));bE(m,vt,M,k(b))},_0=(l,m)=>{if(Kh(l),l.isResizable(m)){const b=Nn.fromTable(m),S=r1(b),O=Om(b);MA(b,l,m,S,O)}},nd=(l,m)=>{const b=ti(l.parent(),"."+hE);qe(b,m)},k0=l=>{nd(l,m=>{gs(m,"display","none")})},ao=l=>{nd(l,m=>{gs(m,"display","block")})},PA=l=>Ti(l,LC),tm=l=>Ti(l,pE),od=em("resizer-bar-dragging"),O0=l=>{const m=kA(),b=fE(m,{});let S=ue.none();const O=(Ze,wt)=>ue.from(il(Ze,wt));m.events.drag.bind(Ze=>{O(Ze.target,"data-row").each(wt=>{const Ue=Du(Ze.target,"top");gs(Ze.target,"top",Ue+Ze.yDelta+"px")}),O(Ze.target,"data-column").each(wt=>{const Ue=Du(Ze.target,"left");gs(Ze.target,"left",Ue+Ze.xDelta+"px")})});const M=(Ze,wt)=>{const Ue=Du(Ze,wt),Nt=ns(Ze,"data-initial-"+wt,0);return Ue-Nt};b.events.stop.bind(()=>{m.get().each(Ze=>{S.each(wt=>{O(Ze,"data-row").each(Ue=>{const Nt=M(Ze,"top");Cs(Ze,"data-initial-top"),pt.trigger.adjustHeight(wt,Nt,parseInt(Ue,10))}),O(Ze,"data-column").each(Ue=>{const Nt=M(Ze,"left");Cs(Ze,"data-initial-left"),pt.trigger.adjustWidth(wt,Nt,parseInt(Ue,10))}),_0(l,wt)})})});const H=(Ze,wt)=>{pt.trigger.startAdjust(),m.assign(Ze),Ds(Ze,"data-initial-"+wt,Du(Ze,wt)),qc(Ze,od),gs(Ze,"opacity","0.2"),b.go(l.parent())},q=Gh(l.parent(),"mousedown",Ze=>{PA(Ze.target)&&H(Ze.target,"top"),tm(Ze.target)&&H(Ze.target,"left")}),ee=Ze=>Ho(Ze,l.view()),le=Ze=>wr(Ze,"table",ee).filter(Nm),Se=Gh(l.view(),"mouseover",Ze=>{le(Ze.target).fold(()=>{Ms(Ze.target)&&Kh(l)},wt=>{b.isActive()&&(S=ue.some(wt),_0(l,wt))})}),et=()=>{q.unbind(),Se.unbind(),b.destroy(),Kh(l)},vt=Ze=>{_0(l,Ze)},pt=tf({adjustHeight:Tl(["table","delta","row"]),adjustWidth:Tl(["table","delta","column"]),startAdjust:Tl([])});return{destroy:et,refresh:vt,on:b.on,off:b.off,hideBars:_t(k0,l),showBars:_t(ao,l),events:pt.registry}},A0={create:(l,m,b)=>{const S=Mt,O=mr,M=O0(l),H=tf({beforeResize:Tl(["table","type"]),afterResize:Tl(["table","type"]),startDrag:Tl([])});return M.events.adjustHeight.bind(q=>{const ee=q.table;H.trigger.beforeResize(ee,"row");const le=S.delta(q.delta,ee);Dw(ee,le,q.row,S),H.trigger.afterResize(ee,"row")}),M.events.startAdjust.bind(q=>{H.trigger.startDrag()}),M.events.adjustWidth.bind(q=>{const ee=q.table;H.trigger.beforeResize(ee,"col");const le=O.delta(q.delta,ee),Se=b(ee);T1(ee,le,q.column,m,Se),H.trigger.afterResize(ee,"col")}),{on:M.on,off:M.off,refreshBars:M.refresh,hideBars:M.hideBars,showBars:M.showBars,destroy:M.destroy,events:H.registry}}},zC={only:(l,m)=>{const b=Fl(l)?yr(l):l;return{parent:Q(b),view:Q(l),origin:Q(se(0,0)),isResizable:m}},detached:(l,m,b)=>{const S=()=>Ft(m);return{parent:Q(m),view:Q(l),origin:S,isResizable:b}},body:(l,m,b)=>({parent:Q(m),view:Q(l),origin:Q(se(0,0)),isResizable:b})},NA=()=>{const l=Ce.fromTag("div");return Vr(l,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),es(zr(),l),l},VC=(l,m)=>l.inline?zC.body(Ce.fromDom(l.getBody()),NA(),m):zC.only(Ce.fromDom(l.getDoc()),m),BA=(l,m)=>{l.inline&&cr(m.parent())},zn=l=>Fe(l)&&l.nodeName==="TABLE",yc="bar-",om=l=>il(l,"data-mce-resize")!=="false",$A=l=>{const m=Nn.fromTable(l);Nn.hasColumns(m)||qe(ul(l),b=>{const S=Ur(b,"width");gs(b,"width",S),Cs(b,"width")})},Xh=l=>{const m=zh(),b=zh(),S=zh();let O,M;const H=Ze=>Va(l,Ze),q=()=>V2(l)?Sw():Y2(),ee=Ze=>ch(Ze).columns,le=(Ze,wt,Ue)=>{const Nt=Au(wt,"e");if(M===""&&jc(Ze),Ue!==O&&M!==""){gs(Ze,"width",M);const mn=q(),_n=H(Ze),ss=V2(l)||Nt?ee(Ze)-1:0;T1(Ze,Ue-O,ss,mn,_n)}else if(Cv(M)){const mn=parseFloat(M.replace("%","")),_n=Ue*mn/O;gs(Ze,"width",_n+"%")}g1(M)&&$A(Ze)},Se=()=>{b.on(Ze=>{Ze.destroy()}),S.on(Ze=>{BA(l,Ze)})};return l.on("init",()=>{const Ze=VC(l,om);if(S.set(Ze),Kk(l)&&jf(l)){const wt=q(),Ue=A0.create(Ze,wt,H);Ue.on(),Ue.events.startDrag.bind(Nt=>{m.set(l.selection.getRng())}),Ue.events.beforeResize.bind(Nt=>{const mn=Nt.table.dom;Kw(l,mn,Bm(mn),$m(mn),yc+Nt.type)}),Ue.events.afterResize.bind(Nt=>{const mn=Nt.table,_n=mn.dom;tu(mn),m.on(ss=>{l.selection.setRng(ss),l.focus()}),AO(l,_n,Bm(_n),$m(_n),yc+Nt.type),l.undoManager.add()}),b.set(Ue)}}),l.on("ObjectResizeStart",Ze=>{const wt=Ze.target;if(zn(wt)){const Ue=Ce.fromDom(wt);qe(l.dom.select(".mce-clonedresizable"),Nt=>{l.dom.addClass(Nt,"mce-"+cw(l)+"-columns")}),!B1(Ue)&&Pm(l)?Oh(Ue):!N1(Ue)&&Ql(l)&&jc(Ue),Qv(Ue)&&Yp(Ze.origin,yc)&&jc(Ue),O=Ze.width,M=Zf(l)?"":U2(l,wt).getOr("")}}),l.on("ObjectResized",Ze=>{const wt=Ze.target;if(zn(wt)){const Ue=Ce.fromDom(wt),Nt=Ze.origin;Yp(Nt,"corner-")&&le(Ue,Nt,Ze.width),tu(Ue),og(l,Ue.dom,jd)}}),l.on("SwitchMode",()=>{b.on(Ze=>{l.mode.isReadOnly()?Ze.hideBars():Ze.showBars()})}),l.on("dragstart dragend",Ze=>{b.on(wt=>{Ze.type==="dragstart"?(wt.hideBars(),wt.off()):(wt.on(),wt.showBars())})}),l.on("remove",()=>{Se()}),{refresh:Ze=>{b.on(wt=>wt.refreshBars(Ce.fromDom(Ze)))},hide:()=>{b.on(Ze=>Ze.hideBars())},show:()=>{b.on(Ze=>Ze.showBars())}}},Qn=l=>{eh(l);const m=Xh(l),b=$C(l,m),S=Xv(l,m,b);return Dh(l,S),qO(l,S),oO(l,S),{getSelectedCells:b.getSelectedCells,clearSelectedCells:b.clearSelectedCells}},IA=l=>({table:Qn(l)});var UC=()=>{w.add("dom",IA)};UC()})();const ys=w=>{try{if(typeof window<"u"&&typeof window.adminT=="function")return window.adminT(w)}catch{}return w},k2=(w,f={})=>{try{if(typeof window<"u"&&typeof window.adminTf=="function")return window.adminTf(w,f)}catch{}let p=ys(w);try{Object.keys(f||{}).forEach(C=>{p=String(p).replaceAll(`{${C}}`,String(f[C]))})}catch{}return p},Ar=(...w)=>{try{typeof window<"u"&&window.__ADMIN_DEBUG&&console.log(...w)}catch{}};function Koe(){const w=document.getElementById("uppy");if(!w||w._uppyInitialized)return;w._uppyInitialized=!0;const f=w.dataset.endpoint,p=w.dataset.csrf,C=new h8({autoProceed:!0,restrictions:{allowedFileTypes:["image/jpeg","image/png","image/webp"]}}).use(Ite,{quality:.85,maxWidth:4e3,maxHeight:4e3,convertTypes:["image/png"],convertSize:2e6}).use(LK,{endpoint:f,fieldName:"file",limit:3,timeout:12e4,headers:{"X-CSRF-Token":p,"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});window.uppyInstances||(window.uppyInstances=[]),window.uppyInstances.push(C);let _=document.getElementById("upload-progress");if(!_){_=document.createElement("div"),_.id="upload-progress",_.className="hidden fixed top-4 right-4 bg-white border border-gray-200 rounded-lg shadow-xl p-4 z-50 min-w-[350px] max-w-[400px]",_.innerHTML=`
      <div class="space-y-3">
        <!-- Header with overall progress -->
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-3">
            <div class="animate-spin rounded-full h-5 w-5 border-b-2 border-black" id="upload-spinner"></div>
            <span class="text-sm font-medium text-gray-900" id="upload-title"></span>
          </div>
          <span class="text-sm text-gray-600" id="upload-counter">0 / 0</span>
        </div>
        <!-- Total progress bar -->
        <div class="w-full bg-gray-200 rounded-full h-2">
          <div id="upload-bar-total" class="bg-black h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
        </div>
        <div class="text-xs text-gray-500" id="upload-status"></div>
        <!-- Individual file progress list -->
        <div id="upload-file-list" class="space-y-2 max-h-48 overflow-y-auto"></div>
      </div>
    `,document.body.appendChild(_);const me=document.getElementById("upload-title");me&&(me.textContent=ys("admin.upload.in_progress_title"));const xe=document.getElementById("upload-status");xe&&(xe.textContent=ys("admin.upload.preparing"))}let P=new Map,N=w.querySelector('input[type="file"].uppy-input');N||(N=document.createElement("input"),N.type="file",N.multiple=!0,N.accept="image/*",N.style.display="none",N.classList.add("uppy-input"),w.appendChild(N));const z=()=>N.click();w._uppyClickHandler=z,w.addEventListener("click",z),N.addEventListener("change",()=>{if(!N.files)return;const me=new Set(C.getFiles().map(xe=>`${xe.name}|${xe.size}`));Array.from(N.files).forEach(xe=>{const Fe=`${xe.name}|${xe.size}`;if(me.has(Fe)){window.showToast&&window.showToast(k2("admin.upload.file_already_added",{name:xe.name}),"error");return}try{C.addFile({source:"file-input",name:xe.name,type:xe.type,data:xe})}catch{}}),N.value=""}),w.addEventListener("dragover",me=>{me.preventDefault(),w.classList.add("bg-gray-100")}),w.addEventListener("dragleave",()=>{w.classList.remove("bg-gray-100")}),w.addEventListener("drop",me=>{var ve;me.preventDefault(),w.classList.remove("bg-gray-100");const xe=Array.from(((ve=me.dataTransfer)==null?void 0:ve.files)||[]),Fe=new Set(C.getFiles().map(je=>`${je.name}|${je.size}`));xe.forEach(je=>{const He=`${je.name}|${je.size}`;if(Fe.has(He)){window.showToast&&window.showToast(k2("admin.upload.file_already_added",{name:je.name}),"error");return}try{C.addFile({source:"drag-drop",name:je.name,type:je.type,data:je})}catch{}})});function G(me){const xe=me.name.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),Fe=document.createElement("div");Fe.id=`file-prog-${me.id}`,Fe.className="bg-gray-50 border border-gray-200 rounded p-2",Fe.innerHTML=`
      <div class="flex items-center justify-between mb-1">
        <span class="text-xs text-gray-700 truncate flex-1 mr-2" title="${xe}">
          <i class="fas fa-image text-gray-400 mr-1"></i>${xe}
        </span>
        <span class="text-xs text-gray-500 file-status"></span>
      </div>
      <div class="w-full bg-gray-100 rounded-full h-1">
        <div class="file-bar bg-gray-400 h-1 rounded-full transition-all duration-150" style="width: 0%"></div>
      </div>
    `;const ve=Fe.querySelector(".file-status");return ve&&(ve.textContent=ys("admin.upload.queued")),Fe}function te(me,xe,Fe,ve=!1,je=!1){const He=document.getElementById(`file-prog-${me}`);if(!He)return;const Zt=He.querySelector(".file-bar"),ze=He.querySelector(".file-status");Zt&&(Zt.style.width=`${xe}%`,je?Zt.className="file-bar bg-green-500 h-1 rounded-full transition-all duration-150":ve?Zt.className="file-bar bg-red-500 h-1 rounded-full transition-all duration-150":xe>0&&(Zt.className="file-bar bg-black h-1 rounded-full transition-all duration-150")),ze&&Fe&&(ze.textContent=Fe,je?ze.className="text-xs text-green-600 file-status":ve?ze.className="text-xs text-red-600 file-status":ze.className="text-xs text-gray-500 file-status")}function ie(){const me=C.getFiles(),xe=me.length,Fe=me.filter(He=>{var Zt;return(Zt=He.progress)==null?void 0:Zt.uploadComplete}).length,ve=document.getElementById("upload-counter"),je=document.getElementById("upload-bar-total");ve&&(ve.textContent=`${Fe} / ${xe}`),je&&(je.style.width=`${xe>0?Fe/xe*100:0}%`)}C.on("file-added",me=>{const xe=document.getElementById("upload-file-list");xe&&xe.appendChild(G(me)),P.set(me.id,0),ie()}),C.on("preprocess-progress",(me,xe)=>{if(xe.mode==="indeterminate"){const Fe=document.getElementById("upload-status");Fe&&(Fe.textContent=k2("admin.upload.compressing",{name:me.name}))}}),C.on("upload-start",()=>{_.classList.remove("hidden");const me=document.getElementById("upload-status");me&&(me.textContent=ys("admin.upload.starting_upload")),ie()}),C.on("upload-progress",(me,xe)=>{const Fe=Math.round(xe.bytesUploaded/xe.bytesTotal*100);te(me.id,Fe,`${Fe}%`),P.set(me.id,Fe);const ve=document.getElementById("upload-status");ve&&(ve.textContent=k2("admin.upload.uploading_file",{name:me.name}))}),C.on("upload-success",me=>{te(me.id,100,ys("admin.upload.completed")+" ✓",!1,!0),P.set(me.id,100),ie()}),C.on("complete",me=>{var je;const xe=document.getElementById("upload-status"),Fe=document.getElementById("upload-spinner"),ve=((je=me.successful)==null?void 0:je.length)||0;xe&&(xe.textContent=k2("admin.upload.completed_summary",{count:ve})),Fe&&(Fe.className="rounded-full h-5 w-5 bg-green-500 flex items-center justify-center text-white text-xs"),Fe&&(Fe.innerHTML='<i class="fas fa-check"></i>'),setTimeout(()=>{_.classList.add("hidden");const He=document.getElementById("upload-file-list");He&&(He.innerHTML=""),P.clear(),Fe&&(Fe.className="animate-spin rounded-full h-5 w-5 border-b-2 border-black",Fe.innerHTML="")},2500),jK()}),C.on("upload-error",(me,xe,Fe)=>{let ve=ys("admin.upload.upload_error");try{if(Fe&&Fe.body)ve=Fe.body.error||Fe.body.message||ve;else if(Fe&&Fe.response){const je=Fe.responseText||Fe.response||"";try{const He=JSON.parse(je);ve=He.error||He.message||ve}catch{}}xe&&xe.message&&(!ve||ve==="Upload error")&&(ve=xe.message)}catch{}te(me.id,100,ys("admin.common.error")+" ✗",!0,!1),ie(),window.showToast&&window.showToast(ve,"error"),console.error("Upload error:",ve,{file:me,error:xe,response:Fe})}),C.on("error",me=>{const xe=document.getElementById("upload-status");xe&&(xe.textContent=ys("admin.common.error"));try{console.error("[Upload error]",me)}catch{}setTimeout(()=>{_.classList.add("hidden");const Fe=document.getElementById("upload-file-list");Fe&&(Fe.innerHTML=""),P.clear()},3e3)})}function Yoe(){Ar("Initializing TomSelects...");const w=(p,C={})=>{document.querySelectorAll(p).forEach(P=>{if(P.tomselect){Ar(`TomSelect already initialized for ${p}`);return}try{P.tomselect=new Eu(P,C),Ar(`TomSelect initialized for ${p}`)}catch(N){console.error(`Failed to initialize TomSelect for ${p}:`,N)}})},f={plugins:["remove_button"],persist:!1,create:!1,maxItems:null,render:{option:(p,C)=>`<div>${C(p.text??p.name??p.value)}</div>`,item:(p,C)=>`<div>${C(p.text??p.name??p.value)}</div>`}};w("#album-tags",{...f,valueField:"id",labelField:"name",searchField:"name",load:(p,C)=>{fetch(`${window.basePath||""}/admin/api/tags?q=${encodeURIComponent(p||"")}`,{headers:{Accept:"application/json"}}).then(_=>_.ok?_.json():[]).then(C).catch(()=>C())}}),w("#album-categories",f),w("#album-cameras",f),w("#album-lenses",f),w("#album-films",f),w("#album-developers",f),w("#album-labs",f),w("#album-locations",f),w("select.tom-select",f),w("select[multiple]:not(.ts-hidden-accessible)",f)}function tQ(){Ar("Initializing Sortable grid...");const w=document.getElementById("images-grid");if(!w){Ar("No images-grid found, skipping Sortable initialization");return}if(w._sortableInstance){try{w._sortableInstance.destroy(),Ar("Destroyed existing Sortable instance")}catch(C){console.warn("Failed to destroy existing Sortable instance:",C)}delete w._sortableInstance}try{const C=new uo(w,{animation:150,draggable:"[data-id]",onEnd:async()=>{const _=Array.from(w.querySelectorAll("[data-id]")).map(z=>z.getAttribute("data-id")),P=w.dataset.reorderEndpoint||"",N=P.startsWith("/")?`${window.basePath}${P}`:`${window.basePath}/${P}`;try{await fetch(N,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":w.dataset.csrf,Accept:"application/json"},body:JSON.stringify({order:_})}),window.showToast&&window.showToast(ys("admin.common.order_saved"),"success")}catch(z){console.error("Failed to save order:",z),window.showToast&&window.showToast(ys("admin.common.order_save_error"),"error")}}});w._sortableInstance=C,window.sortableInstances||(window.sortableInstances=[]),window.sortableInstances.push(C),Ar("Sortable initialized successfully")}catch(C){console.error("Failed to initialize Sortable:",C)}const f=document.getElementById("sort-images");if(f&&!f._sortInitialized){let _=function(P){const N=Array.from(w.children);N.sort((z,G)=>{switch(P){case"created_newest":return C(G.dataset.created)-C(z.dataset.created);case"created_oldest":return C(z.dataset.created)-C(G.dataset.created);case"id_asc":return(parseInt(z.dataset.id,10)||0)-(parseInt(G.dataset.id,10)||0);case"id_desc":return(parseInt(G.dataset.id,10)||0)-(parseInt(z.dataset.id,10)||0);default:return 0}}),N.forEach(z=>w.appendChild(z))};f._sortInitialized=!0;const C=P=>new Date(P||"1970-01-01T00:00:00Z").getTime();f.addEventListener("change",P=>_(P.target.value))}const p=document.getElementById("save-order");p&&!p._saveInitialized&&(p._saveInitialized=!0,p.addEventListener("click",async C=>{C.preventDefault();const _=Array.from(w.querySelectorAll("[data-id]")).map(z=>z.getAttribute("data-id")),P=w.dataset.reorderEndpoint||"",N=P.startsWith("/")?`${window.basePath}${P}`:`${window.basePath}/${P}`;try{await fetch(N,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":w.dataset.csrf,Accept:"application/json"},body:JSON.stringify({order:_})}),window.showToast&&window.showToast(ys("admin.common.order_saved_manual"),"success")}catch(z){console.error("Failed to save order manually:",z),window.showToast&&window.showToast(ys("admin.common.order_save_error"),"error")}}))}function Xoe(){if(Ar("Initializing TinyMCE..."),!document.querySelectorAll("textarea.richtext").length){Ar("No richtext areas found, skipping TinyMCE initialization");return}try{window.tinymce&&(IK.remove(),Ar("Removed existing TinyMCE instances"))}catch(f){console.warn("Failed to remove TinyMCE instances:",f)}IK.init({selector:"textarea.richtext",menubar:!1,statusbar:!0,branding:!1,plugins:"link lists autoresize",toolbar:"undo redo | blocks | bold italic underline strikethrough | alignleft aligncenter alignright | bullist numlist | blockquote | link | removeformat",block_formats:`${ys("admin.tinymce.paragraph")}=p; ${ys("admin.tinymce.subtitle")}=h3; ${ys("admin.tinymce.section_title")}=h2; ${ys("admin.tinymce.note")}=h4`,default_link_target:"_blank",link_default_protocol:"https",rel_list:[{title:"noopener",value:"noopener"},{title:"noreferrer",value:"noreferrer"}],skin:!1,content_css:!1,content_style:`
      body{
        font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif; 
        color:#111; 
        line-height:1.7; 
        margin: 8px;
        background: white;
      } 
      a{color:#000; text-decoration:underline} 
      blockquote{border-left:3px solid #e5e7eb; margin:1rem 0; padding-left:.75rem; color:#444}
      
      /* TinyMCE UI Styles */
      .tox .tox-toolbar__group { display: flex !important; }
      .tox .tox-toolbar { display: flex !important; flex-wrap: wrap; }
      .tox .tox-editor-header { display: block !important; }
    `,valid_elements:"p,br,strong/b,em/i,u,s,ul,ol,li,blockquote,a[href|target|rel],h2,h3,h4,hr",height:700,min_height:500,max_height:1e3,resize:!0,toolbar_mode:"wrap",promotion:!1,setup:function(f){f.on("init",function(){Ar("TinyMCE editor initialized:",f.id);const p=f.getContainer(),C=p.querySelector(".tox-toolbar"),_=p.querySelector(".tox-editor-header");_&&(_.style.display="block"),C&&(C.style.display="flex")}),f.on("remove",function(){Ar("TinyMCE editor removed:",f.id)})}}).then(function(f){Ar("TinyMCE initialized successfully for",f.length,"editors")}).catch(function(f){console.error("TinyMCE initialization failed:",f)})}window.AdminInit=function(){Ar("AdminInit: Initializing admin components..."),Joe(),Yoe(),Koe(),Qoe(),tQ(),GK(),Xoe(),ise(),ese(),tse(),nse(),Ar("AdminInit: All components initialized")};function Joe(){try{if(document.querySelectorAll(".ts-control").forEach(w=>{const f=w.previousElementSibling;if(f&&f.tomselect)try{f.tomselect.destroy()}catch(p){console.warn("Failed to destroy TomSelect:",p)}}),window.tinymce)try{IK.remove()}catch(w){console.warn("Failed to remove TinyMCE:",w)}window.uppyInstances&&(window.uppyInstances.forEach(w=>{try{w&&typeof w.close=="function"&&w.close()}catch{}}),window.uppyInstances=[]),window.sortableInstances&&(window.sortableInstances.forEach(w=>{try{w.destroy()}catch(f){console.warn("Failed to destroy Sortable:",f)}}),window.sortableInstances=[]),document.querySelectorAll("#sort-images").forEach(w=>{delete w._sortInitialized}),document.querySelectorAll("#save-order").forEach(w=>{delete w._saveInitialized}),document.querySelectorAll("#images-grid").forEach(w=>{delete w._sortableInstance,delete w._gridButtonsBound}),document.querySelectorAll("#uppy").forEach(w=>{try{w._uppyClickHandler&&(w.removeEventListener("click",w._uppyClickHandler),delete w._uppyClickHandler),w.querySelectorAll('input[type="file"].uppy-input').forEach(f=>f.remove()),delete w._uppyInitialized}catch(f){console.warn("Cleanup Uppy click/input failed:",f)}}),document.querySelectorAll("[data-tooltip]").forEach(w=>{delete w._tooltipInitialized}),document.querySelectorAll(".dropdown").forEach(w=>{delete w._dropdownInitialized}),document.querySelectorAll("form[data-validate]").forEach(w=>{delete w._validationInitialized}),Ar("Cleanup completed successfully")}catch(w){console.warn("Cleanup warning:",w)}}function Qoe(){const w=document.getElementById("logo-uppy"),f=document.getElementById("site_logo"),p=document.getElementById("site-logo-preview"),C=document.getElementById("site-logo-clear");if(!w||!f||w._uppyInitialized)return;w._uppyInitialized=!0;const _=w.dataset.endpoint,P=w.dataset.csrf,N=new h8({autoProceed:!0,restrictions:{allowedFileTypes:["image/png","image/jpeg","image/webp"]}}).use(LK,{endpoint:_,fieldName:"file",headers:{"X-CSRF-Token":P,"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});window.uppyInstances||(window.uppyInstances=[]),window.uppyInstances.push(N);let z=w.querySelector('input[type="file"].uppy-input');z||(z=document.createElement("input"),z.type="file",z.accept="image/png,image/jpeg,image/webp",z.style.display="none",z.classList.add("uppy-input"),w.appendChild(z)),w.addEventListener("click",()=>z.click()),z.addEventListener("change",()=>{if(z.files&&z.files[0]){try{N.addFile({name:z.files[0].name,type:z.files[0].type,data:z.files[0]})}catch{}z.value=""}}),w.addEventListener("dragover",G=>{G.preventDefault(),w.classList.add("bg-gray-100")}),w.addEventListener("dragleave",()=>w.classList.remove("bg-gray-100")),w.addEventListener("drop",G=>{var ie,me;G.preventDefault(),w.classList.remove("bg-gray-100");const te=(me=(ie=G.dataTransfer)==null?void 0:ie.files)==null?void 0:me[0];if(te)try{N.addFile({name:te.name,type:te.type,data:te})}catch{}}),N.on("complete",G=>{const te=G.successful&&G.successful[0],ie=te&&te.response&&(te.response.body||{});if(ie&&ie.ok&&ie.path)if(f.value=ie.path,p&&(p.src=(window.basePath||"")+ie.path,p.classList.remove("hidden")),C&&C.classList.remove("hidden"),ie.favicons&&ie.favicons.success){const me=ie.favicons.generated?ie.favicons.generated.length:0;window.showToast&&window.showToast(k2("admin.settings.favicons_generated",{count:me}),"success")}else ie.favicons&&ie.favicons.error?window.showToast&&(window.showToast(ys("admin.settings.logo_updated"),"success"),window.showToast(k2("admin.settings.favicon_generation_failed",{error:ie.favicons.error}),"warning")):window.showToast&&window.showToast(ys("admin.settings.logo_updated"),"success");else window.showToast&&window.showToast(ys("admin.settings.logo_upload_failed"),"error")}),N.on("upload-error",(G,te,ie)=>{const me=ie&&ie.body&&(ie.body.error||ie.body.message)||te&&te.message||"";try{me&&console.warn("[Logo upload error]",me)}catch{}window.showToast&&window.showToast(ys("admin.settings.logo_upload_error"),"error")}),C&&C.addEventListener("click",G=>{G.preventDefault(),f.value="",p&&p.classList.add("hidden"),window.showToast&&window.showToast(ys("admin.settings.logo_removed_info"),"info")})}function ese(){document.querySelectorAll("[data-tooltip]").forEach(f=>{f._tooltipInitialized||(f._tooltipInitialized=!0,f.addEventListener("mouseenter",ose),f.addEventListener("mouseleave",sse))})}function tse(){document.querySelectorAll(".dropdown").forEach(f=>{if(!f._dropdownInitialized){f._dropdownInitialized=!0;const p=f.querySelector(".dropdown-trigger"),C=f.querySelector(".dropdown-content");p&&C&&p.addEventListener("click",_=>{_.stopPropagation(),rse(f)})}})}function nse(){document.querySelectorAll("form[data-validate]").forEach(f=>{f._validationInitialized||(f._validationInitialized=!0,f.addEventListener("submit",ase))})}function ose(w){const f=w.target.getAttribute("data-tooltip");if(!f)return;const p=document.createElement("div");p.className="tooltip-popup",p.textContent=f,p.style.cssText=`
    position: absolute;
    background: rgba(0,0,0,0.9);
    color: white;
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 14px;
    pointer-events: none;
    z-index: 1000;
    white-space: nowrap;
  `,document.body.appendChild(p);const C=w.target.getBoundingClientRect();p.style.left=C.left+C.width/2-p.offsetWidth/2+"px",p.style.top=C.top-p.offsetHeight-8+"px",w.target._tooltip=p}function sse(w){w.target._tooltip&&(w.target._tooltip.remove(),delete w.target._tooltip)}function rse(w){const f=w.querySelector(".dropdown-content"),p=f.classList.contains("show");document.querySelectorAll(".dropdown-content.show").forEach(C=>{C.classList.remove("show")}),p||f.classList.add("show")}function ase(w){const p=w.target.querySelectorAll("[required]");let C=!0;p.forEach(_=>{_.value.trim()?_.classList.remove("error"):(_.classList.add("error"),C=!1)}),C||(w.preventDefault(),window.showToast&&window.showToast(ys("admin.common.required_fields"),"error"))}window.refreshGalleryArea=jK;window.rebindImageModalHandlers=oQ;function ise(){const w=document.getElementById("open-media-library"),f=document.getElementById("media-modal"),p=document.getElementById("media-body"),C=document.getElementById("media-close"),_=document.getElementById("images-grid");if(!w||!f||!p)return;const P=document.getElementById("uppy"),N=(P==null?void 0:P.dataset.albumId)||(_==null?void 0:_.dataset.albumId);if(!N){console.error("No albumId found for media modal");return}function z(){f.classList.remove("hidden"),f.classList.add("flex"),te()}function G(){f.classList.add("hidden"),f.classList.remove("flex")}async function te(){try{p.innerHTML=`<div class="p-8 text-center"><i class="fas fa-spinner fa-spin"></i> ${ys("admin.common.loading")}</div>`;const ie=await fetch(`${window.basePath||""}/admin/media?partial=1`,{headers:{Accept:"text/html"}});if(!ie.ok)throw new Error(`HTTP ${ie.status}`);const me=await ie.text();p.innerHTML=me}catch(ie){console.error("Failed to load media:",ie),p.innerHTML=`<div class="text-center text-red-600 p-8">
        <p>${ys("admin.media.error_loading_gallery")}</p>
        <p class="text-sm mt-2">${ie.message}</p>
      </div>`}}w.addEventListener("click",z),C==null||C.addEventListener("click",G),p.addEventListener("click",async ie=>{if(ie.target.closest("input,button,select,label"))return;const me=ie.target.closest("[data-media-id]");if(!me)return;const xe=me.getAttribute("data-media-id"),Fe=new URLSearchParams;Fe.append("csrf",cse()),Fe.append("image_id",xe);try{const ve=await fetch(`${window.basePath||""}/admin/albums/${N}/images/attach`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:Fe.toString()});if(ve.ok)G(),window.showToast&&window.showToast(ys("admin.albums.image_added"),"success"),jK();else if(ve.status===409){const je=await ve.json().catch(()=>({}));try{je&&je.error&&console.warn("[Attach image 409]",je.error)}catch{}window.showToast&&window.showToast(ys("admin.albums.image_already_in_album"),"error")}else console.error("Failed to attach image:",ve.status,ve.statusText),window.showToast&&window.showToast(ys("admin.albums.error_add_image"),"error")}catch(ve){console.error("Error attaching image:",ve),window.showToast&&window.showToast(ys("admin.albums.error_add_image"),"error")}})}function cse(){const w=document.querySelector('input[name="csrf"]');return w?w.value:""}async function jK(){try{Ar("🔄 refreshGalleryArea called");const w=document.getElementById("images-grid");if(Ar("📋 Existing grid found:",!!w),!w){console.error("❌ images-grid element not found! The template should always include it now.");return}w.style.transition="opacity 0.15s ease",w.style.opacity="0.6",Ar("🌐 Fetching updated page content...");const f=await fetch(window.location.href,{headers:{Accept:"text/html"}});if(!f.ok)throw new Error("Failed to fetch page");const p=await f.text(),C=new DOMParser().parseFromString(p,"text/html"),_=C.querySelector("#images-grid"),P=C.querySelector(".flex.items-center.justify-between.mt-6.mb-4");if(Ar("📋 New grid found:",!!_),Ar("🔘 New bulk actions found:",!!P),_){if(Ar("✅ Updating grid content..."),w.innerHTML=_.innerHTML,Object.assign(w.dataset,_.dataset),P){const N=document.querySelector(".flex.items-center.justify-between.mt-6.mb-4");if(N){const z=N.querySelector("label"),G=P.querySelector("label");z&&G&&(z.innerHTML=G.innerHTML,Ar("🔘 Updated bulk actions label"))}}Ar("🔧 Re-initializing components..."),tQ(),GK(),nQ(),oQ(),w.style.opacity="1",Ar("✅ Gallery refresh completed successfully")}else Ar("⚠️ No grid found in new content"),w.style.opacity="1"}catch(w){console.error("❌ Error refreshing gallery:",w);const f=document.getElementById("images-grid");f&&(f.style.opacity="1"),Ar("🔄 Falling back to full page reload"),window.location.reload()}}function GK(){var C;const w=document.getElementById("images-grid");if(!w)return;const f=((C=document.querySelector('input[name="csrf"]'))==null?void 0:C.value)||"",p=w.dataset.albumId;w.querySelectorAll("[data-cover-id]").forEach(_=>{_._boundCover||(_._boundCover=!0,_.addEventListener("click",async P=>{P.preventDefault(),P.stopPropagation();const N=_.getAttribute("data-cover-id");try{const z=await fetch(`${window.basePath||""}/admin/albums/${p}/cover/${N}`,{method:"POST",headers:{"X-CSRF-Token":f,Accept:"application/json"}});if(!z.ok)throw new Error(`HTTP ${z.status}`);window.refreshGalleryArea&&await window.refreshGalleryArea(),window.showToast&&window.showToast(ys("admin.albums.cover_set"),"success")}catch(z){console.error("Cover set failed:",z),window.showToast&&window.showToast(ys("admin.albums.error_cover"),"error");try{window.location.reload()}catch{}}}))}),w.querySelectorAll("[data-delete-id]").forEach(_=>{_._boundDelete||(_._boundDelete=!0,_.addEventListener("click",async P=>{var z;if(P.preventDefault(),P.stopPropagation(),!confirm(ys("admin.albums.delete_image_confirm")))return;const N=_.getAttribute("data-delete-id");try{const G=await fetch(`${window.basePath||""}/admin/albums/${p}/images/${N}/delete`,{method:"POST",headers:{"X-CSRF-Token":f,Accept:"application/json"}});if(G.ok)(z=_.closest("[data-id]"))==null||z.remove(),window.refreshGalleryArea&&await window.refreshGalleryArea(),window.showToast&&window.showToast(ys("admin.albums.image_deleted"),"success");else{const te=await G.text().catch(()=>"");console.error("Delete failed:",G.status,te),window.showToast&&window.showToast(ys("admin.albums.error_delete"),"error");try{window.location.reload()}catch{}}}catch(G){console.error("Delete request error:",G),window.showToast&&window.showToast(ys("admin.albums.error_delete"),"error");try{window.location.reload()}catch{}}}))})}function nQ(){function w(){const f=document.getElementById("bulk-delete"),C=Array.from(document.querySelectorAll("[data-select-id]:checked")).map(_=>_.getAttribute("data-select-id")).length>0;f&&(f.disabled=!C)}document.querySelectorAll("[data-select-id]").forEach(f=>{f.removeEventListener("change",w),f.addEventListener("change",w)}),w()}function oQ(){const w=document.getElementById("images-grid");if(!w)return;const f=w._modalClickHandler;f&&w.removeEventListener("click",f);const p=C=>{if(C.target.closest("[data-select-id]")||C.target.closest("[data-delete-id]")||C.target.closest("[data-cover-id]"))return;const _=C.target.closest("[data-id]");if(!_||!C.target.closest(".aspect-square"))return;const N=_.getAttribute("data-id"),z={alt_text:_.getAttribute("data-alt_text"),caption:_.getAttribute("data-caption"),camera_id:_.getAttribute("data-camera_id"),lens_id:_.getAttribute("data-lens_id"),film_id:_.getAttribute("data-film_id"),developer_id:_.getAttribute("data-developer_id"),lab_id:_.getAttribute("data-lab_id"),location_id:_.getAttribute("data-location_id"),custom_camera:_.getAttribute("data-custom_camera"),custom_lens:_.getAttribute("data-custom_lens"),custom_film:_.getAttribute("data-custom_film"),iso:_.getAttribute("data-iso"),shutter_speed:_.getAttribute("data-shutter_speed"),aperture:_.getAttribute("data-aperture")};window.openImageModal&&window.openImageModal(N,z,_)};w._modalClickHandler=p,w.addEventListener("click",p)}window.bindGridButtons=GK;window.rebindBulkSelection=nQ;
