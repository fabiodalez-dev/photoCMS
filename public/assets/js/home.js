import"./home-gallery.js";import"../assets/lenis-BjYqGEZM.js";function P(t){document.readyState!=="loading"?t():document.addEventListener("DOMContentLoaded",t)}P(()=>{const t=document.getElementById("albums-carousel");if(!t)return;const a=t.parentElement,d=t.querySelectorAll(".album-carousel-item");if(!d.length)return;let n=0,m=0,i=!1,r=0,s=null;const u=()=>{const e=d[0],g=getComputedStyle(e);return e.offsetWidth+parseFloat(g.marginLeft)+parseFloat(g.marginRight)},h=u()*d.length,c=()=>{t.style.transform=`translate3d(${n}px, 0, 0)`},o=e=>e.type.includes("mouse")?e.clientX:e.touches[0].clientX,l=window.matchMedia&&window.matchMedia("(max-width: 767px)").matches,f=()=>{n-=.6,Math.abs(n)>=h&&(n=0),c(),s=requestAnimationFrame(f)};l||(s=requestAnimationFrame(f));const v=e=>{e.preventDefault(),e.stopPropagation(),i=!0,r=o(e),m=n,s&&(cancelAnimationFrame(s),s=null),t.classList.add("dragging"),document.body.style.userSelect="none"},E=e=>{if(!i)return;e.preventDefault(),e.stopPropagation();const A=o(e)-r;n=m+A,c()},p=()=>{const e=u()*d.length;Math.abs(n)>=e&&(n=n%e),n>0&&(n=-e+n%e)},y=()=>{i&&(i=!1,t.classList.remove("dragging"),document.body.style.userSelect="",p(),c(),l||setTimeout(()=>{s||(s=requestAnimationFrame(f))},1200))};t.addEventListener("mousedown",v),t.addEventListener("mousemove",E),t.addEventListener("mouseup",y),t.addEventListener("mouseleave",y),t.addEventListener("touchstart",v,{passive:!1}),t.addEventListener("touchmove",E,{passive:!1}),t.addEventListener("touchend",y),t.addEventListener("dragstart",e=>e.preventDefault()),t.addEventListener("selectstart",e=>e.preventDefault()),l||(a.addEventListener("mouseenter",()=>{s&&(cancelAnimationFrame(s),s=null)}),a.addEventListener("mouseleave",()=>{!s&&!i&&(s=requestAnimationFrame(f))}));const L=a.parentElement.querySelector(".albums-arrow-left"),w=a.parentElement.querySelector(".albums-arrow-right"),M=()=>u()*1,b=()=>{n+=M(),p(),c()},q=()=>{n-=M(),p(),c()};L&&L.addEventListener("click",b),w&&w.addEventListener("click",q)});(function(){function t(r){document.readyState!=="loading"?r():document.addEventListener("DOMContentLoaded",r)}t(()=>{const r=document.getElementById("home-infinite-gallery");if(!r)return;const s=window.matchMedia("(prefers-reduced-motion: reduce)").matches,a=document.querySelector(".home-mobile-wrap"),d=document.querySelector(".home-desktop-wrap"),n=()=>{!a||!d||(window.innerWidth>=768?(a.style.display="none",d.style.display="flex"):(a.style.display="block",d.style.display="none"))};n();const m=e=>{const g=String(e||"").trim().match(/^([0-9.]+)\\s*(ms|s)?$/);if(!g)return 6e4;const v=parseFloat(g[1]);return g[2]==="ms"?v:v*1e3},i=(e,g)=>{const v=e.getBoundingClientRect(),E=getComputedStyle(e);if(g==="x"){const p=parseFloat(E.marginLeft)+parseFloat(E.marginRight);return v.width+p}const p=parseFloat(E.marginTop)+parseFloat(E.marginBottom);return v.height+p},o=[],l={};let f=null;const u=(e,g,v,E,p)=>{const y=e.closest(".home-col, .home-row");if(!y)return;e.querySelectorAll('[data-virtual-clone="1"]').forEach(h=>h.remove());const L=Array.from(e.children).filter(h=>h.getAttribute("data-virtual-clone")!=="1");if(!L.length)return;let w=0;L.forEach(h=>{w+=i(h,g)});if(!w)return;const M=g==="x"?y.getBoundingClientRect().width:y.getBoundingClientRect().height;let b=w,q=0;for(;b<w+M&&q<4;)L.forEach(h=>{const A=h.cloneNode(!0);A.setAttribute("data-virtual-clone","1"),A.querySelectorAll(".home-item").forEach(T=>{T.classList.remove("home-item--hidden"),T.classList.add("home-item--revealed")}),e.appendChild(A)}),b+=w,q+=1;const C={el:e,axis:g,direction:v,durationMs:Math.max(1e3,E),loopLength:w,offset:0,paused:!1,lastTime:performance.now()};e.classList.add(g==="x"?"home-track-h--virtual":"home-track--virtual"),e.style.transform="translate3d(0, 0, 0)",p&&y&&(y.addEventListener("mouseenter",()=>{C.paused=!0},{passive:!0}),y.addEventListener("mouseleave",()=>{C.paused=!1,C.lastTime=performance.now()},{passive:!0})),o.push(C)};const h=()=>{if(s)return;o.length=0,document.querySelectorAll(".home-track").forEach(e=>{const g=e.closest(".home-col"),v=(g==null?void 0:g.getAttribute("data-direction"))||"down",E=m(getComputedStyle(g).getPropertyValue("--home-duration"));u(e,"y",v,E,!0)}),document.querySelectorAll(".home-track-h").forEach(e=>{const g=e.closest(".home-row"),v=(g==null?void 0:g.getAttribute("data-direction"))||"right",E=m(getComputedStyle(g).getPropertyValue("--home-duration"));u(e,"x",v,E,!1)})};const c=e=>{o.forEach(g=>{if(g.paused||!g.loopLength)return;const v=e-g.lastTime;g.lastTime=e;const E=g.loopLength/g.durationMs;g.offset=(g.offset+E*v)%g.loopLength;let p=-g.offset;(g.direction==="up"||g.direction==="left")&&(p=-g.loopLength+g.offset),g.axis==="x"?g.el.style.transform=`translate3d(${p}px, 0, 0)`:g.el.style.transform=`translate3d(0, ${p}px, 0)`}),f=requestAnimationFrame(c)};let v=null;window.addEventListener("resize",()=>{v||(v=requestAnimationFrame(()=>{n(),h(),v=null}))}),h(),!f&&o.length&&(f=requestAnimationFrame(c)),r.style.opacity="1";const E=Array.from(r.querySelectorAll(".home-item")).filter(e=>!e.closest('[data-virtual-clone="1"]'));if(!E.length)return;if(E.length>600){E.forEach(e=>e.classList.add("home-item--revealed"));return}E.forEach(e=>e.classList.add("home-item--hidden"));const p=e=>{e.classList.remove("home-item--hidden"),e.classList.add("home-item--revealed")};if(s){E.forEach(p);return}const y=Math.max(8,Math.floor(6e3/E.length));E.map(e=>({item:e,key:Math.random()})).sort((e,g)=>e.key-g.key).map(({item:e})=>e).forEach((e,g)=>{setTimeout(()=>p(e),y*g)})})})();
