function B(a){document.readyState!=="loading"?a():document.addEventListener("DOMContentLoaded",a)}B(()=>{const a=document.getElementById("home-infinite-gallery"),E=document.querySelectorAll(".home-col");if(function(){window.matchMedia("(min-width: 768px)").matches&&E.forEach(d=>{const c=d.querySelector(".home-track");if(!c)return;const p=Array.from(c.children);if(p.length<2)return;const l=Math.floor(p.length/2),m=p.slice(0,l);for(let u=m.length-1;u>0;u--){const w=Math.floor(Math.random()*(u+1));[m[u],m[w]]=[m[w],m[u]]}c.innerHTML="",m.forEach(u=>c.appendChild(u)),m.forEach(u=>c.appendChild(u.cloneNode(!0)))})}(),a){a.classList.add("entry-init");const r=window.matchMedia("(min-width: 768px)").matches,t=a.closest(".home-horizontal")!==null,d=r?document.querySelector(".home-desktop-wrap"):document.querySelector(".home-mobile-wrap");let c=d?Array.from(d.querySelectorAll(".home-item")):[];const p=window.innerHeight||document.documentElement.clientHeight,l=window.innerWidth||document.documentElement.clientWidth,m=c.map(e=>{const s=e.getBoundingClientRect(),n=s.left<l&&s.right>0&&s.top<p&&s.bottom>0,M=s.top<p&&s.bottom>0,S=s.left<l*2,P=s.top<p*2;return{el:e,top:s.top,left:s.left,vis:t?n:M,near:t?S:P}}),u=50,w=m.filter(e=>e.vis).sort((e,s)=>{if(t){const n=Math.floor(e.top/u),M=Math.floor(s.top/u);return n!==M?n-M:e.left-s.left}return e.top-s.top||e.left-s.left}),h=m.filter(e=>!e.vis&&e.near);for(let e=h.length-1;e>0;e--){const s=Math.floor(Math.random()*(e+1));[h[e],h[s]]=[h[s],h[e]]}const v=m.filter(e=>!e.vis&&!e.near);for(let e=v.length-1;e>0;e--){const s=Math.floor(Math.random()*(e+1));[v[e],v[s]]=[v[s],v[e]]}const L=[...w,...h,...v].map(e=>e.el),o=t?1500:6e3,i=t?Math.min(600,Math.max(150,Math.floor(o*.4))):Math.min(1200,Math.max(400,Math.floor(o*.2))),g=0,f=Math.max(1,w.length),y=Math.max(t?20:6,Math.floor(i/f)),q=Math.max(0,o-f*y),A=L.length>f?Math.max(6,Math.floor(q/(L.length-f))):0;let x=g;L.forEach((e,s)=>{const n=s<f?y:A;setTimeout(()=>e.classList.add("home-item--revealed"),x),x+=n}),requestAnimationFrame(()=>{a.style.opacity="1"}),setTimeout(()=>a.classList.remove("entry-init"),x+200)}if(E.length){if("IntersectionObserver"in window){const r=new IntersectionObserver(t=>{t.forEach(d=>{const c=d.target.querySelector(".home-track");c&&(c.style.animationPlayState=d.isIntersecting?"running":"paused")})},{threshold:.05});E.forEach(t=>r.observe(t))}window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches&&document.querySelectorAll(".home-col .home-track").forEach(r=>{r.style.animationDuration="200s"}),E.forEach(r=>{const t=r.querySelector(".home-track");if(!t)return;let d=!1,c=0,p=0;const l=o=>{const i=getComputedStyle(o).transform;if(!i||i==="none")return 0;const g=i.match(/matrix\(([^)]+)\)/);if(g)return g[1].split(",").map(parseFloat)[5]||0;const f=i.match(/matrix3d\(([^)]+)\)/);return f&&f[1].split(",").map(parseFloat)[13]||0},m=o=>{const i=t.scrollHeight/2;if(i<=0)return o;for(;o<=-i;)o+=i;for(;o>0;)o-=i;return o},u=o=>{d=!0,c=o.touches?o.touches[0].clientY:o.clientY,p=l(t),t.style.animationPlayState="paused",r.classList.add("dragging"),o.preventDefault()},w=o=>{if(!d)return;const i=o.touches?o.touches[0].clientY:o.clientY;let g=p+(i-c);g=m(g),t.style.transform=`translate3d(0, ${g}px, 0)`,o.preventDefault()},h=()=>{d&&(d=!1,r.classList.remove("dragging"))};r.addEventListener("mousedown",u),r.addEventListener("mousemove",w),window.addEventListener("mouseup",h),r.addEventListener("touchstart",u,{passive:!1}),r.addEventListener("touchmove",w,{passive:!1}),r.addEventListener("touchend",h);let v=null,L=null;r.addEventListener("mouseenter",()=>{clearTimeout(L),v=setTimeout(()=>{t.style.animationPlayState="paused"},100)}),r.addEventListener("mouseleave",()=>{if(d)return;clearTimeout(v);const o=(r.getAttribute("data-direction")||"down").toLowerCase(),i=t.scrollHeight/2,g=l(t),f=getComputedStyle(r).getPropertyValue("--home-duration").trim()||"420s",y=parseFloat(f),q=i/y,A=o==="up"?-1:1,x=2500;let e=performance.now();const s=e,n=S=>1-Math.cos(S*Math.PI/2);t.style.animation="none",t.style.animationPlayState="",t.style.transform=`translate3d(0, ${g}px, 0)`;const M=S=>{const P=Math.max(0,S-e)/1e3,F=Math.min(1,(S-s)/x),k=n(F),T=A*q*k*P*-1,C=l(t);let b=m(C+T);if(t.style.transform=`translate3d(0, ${b}px, 0)`,e=S,F<1)requestAnimationFrame(M);else{let D=0;o==="down"?D=Math.max(0,Math.min(1,-b/i)):D=Math.max(0,Math.min(1,(b+i)/i));const I=o==="up"?"homeScrollUp":"homeScrollDown";t.style.animation=`${I} ${y}s linear infinite`,t.style.animationDelay=`-${(D*y).toFixed(3)}s`,t.style.animationPlayState="running",requestAnimationFrame(()=>{t.style.transform=""})}};requestAnimationFrame(M)})})}});function H(a){document.readyState!=="loading"?a():document.addEventListener("DOMContentLoaded",a)}H(()=>{const a=document.getElementById("albums-carousel");if(!a)return;const E=a.parentElement,r=a.querySelectorAll(".album-carousel-item");if(!r.length)return;let t=0,d=0,c=!1,p=0,l=null;const m=()=>{const n=r[0],M=getComputedStyle(n);return n.offsetWidth+parseFloat(M.marginLeft)+parseFloat(M.marginRight)},w=m()*r.length,h=()=>{a.style.transform=`translate3d(${t}px, 0, 0)`},v=n=>n.type.includes("mouse")?n.clientX:n.touches[0].clientX,L=window.matchMedia&&window.matchMedia("(max-width: 767px)").matches,o=()=>{t-=.6,Math.abs(t)>=w&&(t=0),h(),l=requestAnimationFrame(o)};L||(l=requestAnimationFrame(o));const i=n=>{n.preventDefault(),n.stopPropagation(),c=!0,p=v(n),d=t,l&&(cancelAnimationFrame(l),l=null),a.classList.add("dragging"),document.body.style.userSelect="none"},g=n=>{if(!c)return;n.preventDefault(),n.stopPropagation();const S=v(n)-p;t=d+S,h()},f=()=>{const n=m()*r.length;Math.abs(t)>=n&&(t=t%n),t>0&&(t=-n+t%n)},y=()=>{c&&(c=!1,a.classList.remove("dragging"),document.body.style.userSelect="",f(),h(),L||setTimeout(()=>{l||(l=requestAnimationFrame(o))},1200))};a.addEventListener("mousedown",i),a.addEventListener("mousemove",g),a.addEventListener("mouseup",y),a.addEventListener("mouseleave",y),a.addEventListener("touchstart",i,{passive:!1}),a.addEventListener("touchmove",g,{passive:!1}),a.addEventListener("touchend",y),a.addEventListener("dragstart",n=>n.preventDefault()),a.addEventListener("selectstart",n=>n.preventDefault()),L||(E.addEventListener("mouseenter",()=>{l&&(cancelAnimationFrame(l),l=null)}),E.addEventListener("mouseleave",()=>{!l&&!c&&(l=requestAnimationFrame(o))}));const q=E.parentElement.querySelector(".albums-arrow-left"),A=E.parentElement.querySelector(".albums-arrow-right"),x=()=>m()*1,e=()=>{t+=x(),f(),h()},s=()=>{t-=x(),f(),h()};q&&q.addEventListener("click",e),A&&A.addEventListener("click",s)});
