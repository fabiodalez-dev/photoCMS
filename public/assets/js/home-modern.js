import{L as W}from"../assets/lenis-BjYqGEZM.js";document.addEventListener("DOMContentLoaded",function(){const l=()=>window.innerWidth<768,S=new W({duration:2,easing:e=>1-Math.pow(1-e,4),direction:"vertical",gestureDirection:"vertical",smooth:!0,smoothTouch:!1,touchMultiplier:1.5,wheelMultiplier:.8});function _(e){S.raf(e),requestAnimationFrame(_)}requestAnimationFrame(_);const n=document.querySelector(".inf-work_list"),A=document.querySelector(".work-layout");let d=Array.from(document.querySelectorAll(".inf-work_item")),c=[],w=[],E=[],u=!1,h=!1,k=0,p=0,y=0,a=0,f=0;const M=8,g=()=>{c=Array.from(document.querySelectorAll(".inf-work_item")),d=c,w=c.filter((e,t)=>t%2===0),E=c.filter((e,t)=>t%2===1)};g();const q=e=>{e.forEach(t=>{t.style.transform=""})},x=()=>{if(!n||d.length===0)return;const e=Array.from(document.querySelectorAll(".inf-work_item:not(.is-clone)")),t=e.length;if(t>=M||t===0)return;const o=Math.ceil(M/t)*t-t;for(let s=0;s<o;s++){const i=e[s%t].cloneNode(!0);i.classList.add("is-clone"),i.removeAttribute("id"),n.appendChild(i)}g()},m=(e,t)=>{l()||!h||u||t.forEach((o,s)=>{const v=((s*a+e)%f+f)%f-a;o.style.transform=`translate(0px, ${v}px)`})},D=()=>{if(g(),!n||d.length===0||l()){n&&(n.classList.add("simple-layout"),q(d));return}x();const e=c,t=w,o=E;if(e.length<4){n.classList.add("simple-layout"),e.forEach(i=>i.classList.add("is-visible"));return}h=!0,n.classList.remove("simple-layout"),n.classList.remove("filtered-layout"),a=e[0].clientHeight||400,f=e.length/2*a,m(0,t),m(0,o),e.forEach(i=>i.classList.add("is-visible"));const s=i=>{l()||!h||u||(k-=i.deltaY)};A&&(A.removeEventListener("wheel",s),A.addEventListener("wheel",s,{passive:!0}));const r=()=>{if(l()||!h||u){setTimeout(()=>requestAnimationFrame(r),500);return}requestAnimationFrame(r);const i=w,v=E;if(c[0]){const L=c[0].clientHeight;L!==a&&L>0&&(a=L,f=c.length/2*a)}p=p+(k-p)*.09,y=y+(k-y)*.08,m(p,i),m(y,v)};r()},T=document.querySelectorAll(".grid-toggle_item[data-filter]"),N=()=>{n&&(u=!0,q(d),n.classList.add("filtered-layout"),n.classList.remove("simple-layout"))},$=()=>{if(n&&(u=!1,n.classList.remove("filtered-layout"),!l())){g();const e=w,t=E;h&&(m(p,e),m(y,t))}};T.forEach(e=>{e.addEventListener("click",function(t){const o=this.getAttribute("data-filter");if(o!=="all"&&this.tagName.toLowerCase()==="a")return;t.preventDefault(),T.forEach(i=>i.classList.remove("is-active")),this.classList.add("is-active");const s=Array.from(document.querySelectorAll(".inf-work_item"));o==="all"?(s.forEach(i=>{i.style.display=""}),$()):(N(),s.forEach(i=>{i.classList.contains("category-"+o)?i.style.display="":i.style.display="none"}));const r=document.querySelector(".photos_total");if(r){const i=document.querySelectorAll('.inf-work_item:not([style*="display: none"])');r.textContent=i.length}})});const B=()=>{const e=document.querySelectorAll("[data-inf-item]"),t=document.querySelector(".image-grid-info_holder"),o=document.querySelector("[data-image-grid-title]"),s=document.querySelector("[data-image-grid-copy]");e.forEach(r=>{if(r.dataset.hoverSetup)return;r.dataset.hoverSetup="true";const i=r.getAttribute("data-work-title")||"",v=r.getAttribute("data-work-copy")||"";r.addEventListener("mouseenter",function(){l()||(this.classList.add("highlight"),n&&n.classList.add("has-hover"),t&&t.classList.add("show"),o&&(o.textContent=i),s&&(s.textContent=v))}),r.addEventListener("mouseleave",function(){l()||(this.classList.remove("highlight"),n&&n.classList.remove("has-hover"),t&&t.classList.remove("show"))}),r.addEventListener("click",function(L){if(!l())return;this.classList.contains("show-description")||(L.preventDefault(),e.forEach(z=>{z.classList.remove("show-description")}),this.classList.add("show-description"))})})},C=document.querySelector(".menu-btn"),F=document.querySelector(".menu-close"),I=document.querySelector(".menu-component");function P(){I&&(I.classList.add("is-open"),document.body.style.overflow="hidden",S.stop())}function b(){I&&(I.classList.remove("is-open"),document.body.style.overflow="",S.start())}C&&C.addEventListener("click",P),F&&F.addEventListener("click",b),document.addEventListener("keydown",function(e){e.key==="Escape"&&b()}),document.querySelectorAll(".mega-menu_link.is-current").forEach(e=>{e.addEventListener("click",function(t){t.preventDefault(),b()})});const H=document.querySelector(".page-transition"),Y=()=>{document.querySelectorAll(".inf-work_link").forEach(t=>{t.dataset.transitionSetup||(t.dataset.transitionSetup="true",t.addEventListener("click",function(o){if(l()){const r=this.closest(".inf-work_item");if(!r||!r.classList.contains("show-description"))return}o.preventDefault();const s=this.getAttribute("href");H?(H.classList.add("is-active"),setTimeout(()=>{window.location.href=s},600)):window.location.href=s}))})},j=()=>{const e=document.querySelectorAll(".inf-work_item img"),t=window.innerHeight;e.forEach(o=>{const s=o.getBoundingClientRect();s.top<t&&s.bottom>0&&(o.setAttribute("fetchpriority","high"),o.removeAttribute("loading"))})},R=()=>{const e=new IntersectionObserver(o=>{o.forEach(s=>{s.isIntersecting&&(s.target.classList.add("is-visible"),e.unobserve(s.target))})},{threshold:.15,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".inf-work_item").forEach(o=>{o.classList.contains("is-visible")||e.observe(o)})};j(),D(),B(),Y(),R();let O;window.addEventListener("resize",()=>{clearTimeout(O),O=setTimeout(()=>{l()?(q(d),n==null||n.classList.add("simple-layout")):u||(g(),c[0]&&(a=c[0].clientHeight,f=c.length/2*a))},100)})});
