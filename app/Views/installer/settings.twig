{% extends 'installer/_layout.twig' %}
{% block title %}{{ trans('installer.site_settings_title') }}{% endblock %}
{% block steps %}
<div class="step-indicator">
    <div class="step completed">
        <div class="step-number">1</div>
        <div class="step-label">{{ trans('installer.step_welcome') }}</div>
    </div>
    <div class="step completed">
        <div class="step-number">2</div>
        <div class="step-label">{{ trans('installer.step_database') }}</div>
    </div>
    <div class="step completed">
        <div class="step-number">3</div>
        <div class="step-label">{{ trans('installer.step_admin') }}</div>
    </div>
    <div class="step active">
        <div class="step-number">4</div>
        <div class="step-label">{{ trans('installer.step_settings') }}</div>
    </div>
    <div class="step">
        <div class="step-number">5</div>
        <div class="step-label">{{ trans('installer.step_install') }}</div>
    </div>
</div>
{% endblock %}
{% block content %}
<h3 class="mb-4"><i class="fas fa-cog me-2"></i>{{ trans('installer.site_settings_heading') }}</h3>

<p class="text-muted">{{ trans('installer.configure_site_info') }} <span class="text-danger" aria-hidden="true">*</span> <span class="visually-hidden">{{ trans('installer.required') }}</span> {{ trans('installer.indicates_required') }}</p>

<form method="post" action="{{ base_path }}/install/settings" enctype="multipart/form-data">
    <input type="hidden" name="csrf" value="{{ csrf }}">
    
    <div class="mb-3">
        <label for="site-title" class="form-label">{{ trans('installer.site_title') }} <span class="text-danger" aria-hidden="true">*</span><span class="visually-hidden">{{ trans('installer.required') }}</span></label>
        <input type="text" id="site-title" class="form-control" name="site_title" autocomplete="organization" value="{{ site_title }}" required>
        <div class="form-text">{{ trans('installer.site_title_help') }}</div>
    </div>
    
    <div class="mb-3">
        <label class="form-label">{{ trans('installer.site_description') }}</label>
        <textarea class="form-control" name="site_description" rows="3">{{ site_description }}</textarea>
        <div class="form-text">{{ trans('installer.site_description_help') }}</div>
    </div>

    <div class="mb-3">
        <label for="site-logo" class="form-label">{{ trans('installer.site_logo') }} <span class="text-muted">{{ trans('installer.optional') }}</span></label>
        <input type="file" id="site-logo" class="form-control" name="site_logo" accept="image/png,image/jpeg,image/webp">
        <div class="form-text">{{ trans('installer.site_logo_help') }}</div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="mb-3">
                <label for="site-copyright" class="form-label">{{ trans('installer.site_copyright') }}</label>
                <input type="text" id="site-copyright" class="form-control" name="site_copyright" value="{{ site_copyright }}">
                <div class="form-text">{{ trans('installer.site_copyright_help')|raw }}</div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="mb-3">
                <label for="site-email" class="form-label">{{ trans('installer.contact_email') }} <span class="text-danger" aria-hidden="true">*</span><span class="visually-hidden">{{ trans('installer.required') }}</span></label>
                <input type="email" id="site-email" class="form-control" name="site_email" autocomplete="email" value="{{ site_email }}" required>
                <div class="form-text">{{ trans('installer.contact_email_help') }}</div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="mb-3">
                <label for="site-language" class="form-label">{{ trans('installer.site_language') }}</label>
                <select id="site-language" class="form-control" name="site_language">
                    <option value="en" {{ site_language|default('en') == 'en' ? 'selected' }}>{{ trans('installer.english') }}</option>
                    <option value="it" {{ site_language == 'it' ? 'selected' }}>{{ trans('installer.italian') }}</option>
                </select>
                <div class="form-text">{{ trans('installer.site_language_help') }}</div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="mb-3">
                <label for="admin-language" class="form-label">{{ trans('installer.admin_language') }}</label>
                <select id="admin-language" class="form-control" name="admin_language">
                    <option value="en" {{ admin_language|default('en') == 'en' ? 'selected' }}>{{ trans('installer.english') }}</option>
                    <option value="it" {{ admin_language == 'it' ? 'selected' }}>{{ trans('installer.italian') }}</option>
                </select>
                <div class="form-text">{{ trans('installer.admin_language_help') }}</div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="mb-3">
                <label for="date-format" class="form-label">{{ trans('installer.date_format') }}</label>
                <select id="date-format" class="form-control" name="date_format">
                    <option value="Y-m-d" {{ date_format|default('Y-m-d') == 'Y-m-d' ? 'selected' }}>2025-01-15 ({{ trans('installer.date_format_iso') }})</option>
                    <option value="d-m-Y" {{ date_format == 'd-m-Y' ? 'selected' }}>15-01-2025 ({{ trans('installer.date_format_eu') }})</option>
                </select>
                <div class="form-text">{{ trans('installer.date_format_help') }}</div>
            </div>
        </div>
    </div>

    <div class="alert alert-info">
        <h5><i class="fas fa-lightbulb me-2"></i>{{ trans('installer.default_content_title') }}</h5>
        <p>{{ trans('installer.default_content_desc') }}</p>
        <ul class="mb-0">
            <li>{{ trans('installer.default_content_categories') }}</li>
            <li>{{ trans('installer.default_content_templates') }}</li>
            <li>{{ trans('installer.default_content_image_settings') }}</li>
        </ul>
    </div>
    
    <div class="d-grid gap-2 d-md-flex justify-content-md-between">
        <a href="{{ base_path }}/install/admin" class="btn btn-outline-secondary">
            <i class="fas fa-arrow-left me-2"></i>{{ trans('installer.back') }}
        </a>
        <button type="submit" class="btn btn-primary">
            <i class="fas fa-check me-2"></i>{{ trans('installer.continue') }}
        </button>
    </div>
</form>
{% endblock %}
