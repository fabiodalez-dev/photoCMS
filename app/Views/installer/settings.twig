{% extends 'installer/_layout.twig' %}
{% block title %}Site Settings - photoCMS Installer{% endblock %}
{% block steps %}
<div class="step-indicator">
    <div class="step completed">
        <div class="step-number">1</div>
        <div class="step-label">Welcome</div>
    </div>
    <div class="step completed">
        <div class="step-number">2</div>
        <div class="step-label">Database</div>
    </div>
    <div class="step completed">
        <div class="step-number">3</div>
        <div class="step-label">Admin User</div>
    </div>
    <div class="step active">
        <div class="step-number">4</div>
        <div class="step-label">Settings</div>
    </div>
    <div class="step">
        <div class="step-number">5</div>
        <div class="step-label">Install</div>
    </div>
</div>
{% endblock %}
{% block content %}
<h3 class="mb-4"><i class="fas fa-cog me-2"></i>Site Settings</h3>

<p class="text-muted">Configure your site's basic information</p>

<form method="post" action="{{ base_path }}/install/settings" enctype="multipart/form-data">
    <input type="hidden" name="csrf" value="{{ csrf }}">
    
    <div class="mb-3">
        <label for="site-title" class="form-label">Site Title</label>
        <input type="text" id="site-title" class="form-control" name="site_title" autocomplete="organization" value="{{ site_title }}" required>
        <div class="form-text">The name of your photography website</div>
    </div>
    
    <div class="mb-3">
        <label class="form-label">Site Description</label>
        <textarea class="form-control" name="site_description" rows="3">{{ site_description }}</textarea>
        <div class="form-text">A short description of your photography portfolio</div>
    </div>
    
    <div class="row">
        <div class="col-md-6">
            <div class="mb-3">
                <label for="site-copyright" class="form-label">Copyright Notice</label>
                <input type="text" id="site-copyright" class="form-control" name="site_copyright" value="{{ site_copyright }}">
            </div>
        </div>
        <div class="col-md-6">
            <div class="mb-3">
                <label for="site-email" class="form-label">Contact Email</label>
                <input type="email" id="site-email" class="form-control" name="site_email" autocomplete="email" value="{{ site_email }}">
                <div class="form-text">For contact form submissions</div>
            </div>
        </div>
    </div>

    <div class="mb-3">
        <label for="site-logo" class="form-label">Site Logo (optional)</label>
        <input type="file" id="site-logo" class="form-control" name="site_logo" accept="image/png,image/jpeg,image/webp">
        <div class="form-text">PNG/JPG/WebP. If omitted, the site title will be used.</div>
    </div>

    <div class="mb-3">
        <label for="default-template" class="form-label">Default Gallery Template</label>
        <select id="default-template" class="form-control" name="default_template_slug">
            <option value="">No default template (choose manually for each album)</option>
            <option value="grid-classica" {{ default_template_slug == 'grid-classica' ? 'selected' : '' }}>Grid Classica — Clean responsive grid (3/2/1 cols)</option>
            <option value="masonry-portfolio" {{ default_template_slug == 'masonry-portfolio' ? 'selected' : '' }}>Masonry Portfolio — Pinterest-style dynamic layout</option>
            <option value="slideshow-minimal" {{ default_template_slug == 'slideshow-minimal' ? 'selected' : '' }}>Slideshow Minimal — Minimal slideshow with basic controls</option>
            <option value="gallery-fullscreen" {{ default_template_slug == 'gallery-fullscreen' ? 'selected' : '' }}>Gallery Fullscreen — Immersive fullscreen gallery</option>
            <option value="grid-compatta" {{ default_template_slug == 'grid-compatta' ? 'selected' : '' }}>Grid Compatta — Compact grid (5/3/2 cols)</option>
            <option value="grid-ampia" {{ default_template_slug == 'grid-ampia' ? 'selected' : '' }}>Grid Ampia — Large images (2/1/1 cols)</option>
        </select>
        <div class="form-text">
            This template will be used when creating new albums that don't have a specific template assigned.
            You can change this later and assign different templates to individual albums.
        </div>
    </div>
    
    <div class="alert alert-info">
        <h5><i class="fas fa-lightbulb me-2"></i>Default Content</h5>
        <p>The installer will automatically create:</p>
        <ul class="mb-0">
            <li>A default "Foto" category</li>
            <li>Six professional gallery templates (listed above)</li>
            <li>Basic image format settings optimized for photography</li>
        </ul>
    </div>
    
    <div class="d-grid gap-2 d-md-flex justify-content-md-between">
        <a href="{{ base_path }}/install/admin" class="btn btn-outline-secondary">
            <i class="fas fa-arrow-left me-2"></i>Back
        </a>
        <button type="submit" class="btn btn-primary">
            <i class="fas fa-check me-2"></i>Continue
        </button>
    </div>
</form>
{% endblock %}
