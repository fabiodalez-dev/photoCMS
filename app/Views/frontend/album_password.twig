{% extends "frontend/_layout.twig" %}

{% block content %}
<div class="max-w-lg mx-auto px-4 sm:px-6 lg:px-8 py-16 text-center">
  {# NSFW + Password Protected combined warning #}
  {% if album.is_nsfw and not is_admin %}
  <div class="mb-8 p-6 bg-amber-50 border border-amber-200 rounded-xl">
    <div class="w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4">
      <i class="fas fa-exclamation-triangle text-amber-600 text-2xl"></i>
    </div>
    <h2 class="text-lg font-semibold text-amber-800 mb-2">{{ trans('album.nsfw_title') }}</h2>
    <p class="text-sm text-amber-700">
      {{ trans('album.nsfw_password_notice') }}
    </p>
  </div>
  {% endif %}

  <div class="{% if album.is_nsfw and not is_admin %}pt-0{% else %}pt-8{% endif %}">
    <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6">
      <i class="fas fa-lock text-gray-600 text-2xl"></i>
    </div>
    <h1 class="text-2xl md:text-3xl font-semibold">{{ album.title|e }}</h1>
    <p class="mt-2 text-neutral-600">{{ trans('album.password_protected') }}</p>
    {% if error == 'nsfw' %}
    <div id="nsfw-error" role="alert" class="mt-4 bg-amber-50 border border-amber-200 text-amber-800 px-4 py-2 rounded">{{ trans('album.nsfw_checkbox') }}</div>
    {% elseif error %}
    <div role="alert" class="mt-4 bg-red-50 border border-red-200 text-red-800 px-4 py-2 rounded">{{ trans('album.wrong_password') }}</div>
    {% endif %}
    <form id="album-password-form" method="post" action="{{ base_path }}/album/{{ album.slug }}/unlock" class="mt-6 max-w-sm mx-auto text-left">
      <input type="hidden" name="csrf" value="{{ csrf }}">
      <label for="album-password" class="block text-sm mb-1">{{ trans('album.enter_password') }}</label>
      <input type="password" id="album-password" name="password" autocomplete="current-password" class="w-full border border-neutral-300 rounded px-3 py-2" required>

      {# NSFW age confirmation checkbox for NSFW albums #}
      {% if album.is_nsfw and not is_admin %}
      <div class="mt-4">
        <label class="flex items-start gap-3 cursor-pointer">
          <input type="checkbox" name="nsfw_confirmed" id="nsfw_confirmed" required
                 class="mt-1 h-4 w-4 text-amber-600 border-gray-300 rounded focus:ring-amber-500"
                 {% if error == 'nsfw' %}aria-describedby="nsfw-error" aria-invalid="true"{% endif %}>
          <span class="text-sm text-gray-700">{{ trans('album.nsfw_checkbox') }}</span>
        </label>
      </div>
      {% endif %}

      <button type="submit" class="mt-4 w-full bg-black text-white px-4 py-2 rounded hover:bg-neutral-800">{{ trans('general.submit') }}</button>
    </form>
  </div>
</div>

{% endblock %}

