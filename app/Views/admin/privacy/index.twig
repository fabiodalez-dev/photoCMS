{% extends "admin/_layout.twig" %}

{% block title %}{{ trans('admin.privacy.title') }} â€” Cimaise{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50">
  <!-- Header -->
  <div class="bg-white shadow-sm border-b border-gray-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
      <div class="flex items-center justify-between">
        <div>
          <h1 class="text-2xl font-bold text-gray-900">{{ trans('admin.privacy.title') }}</h1>
          <p class="mt-2 text-gray-600">{{ trans('admin.privacy.description') }}</p>
        </div>
        <div class="flex items-center gap-3">
          <button type="submit" form="privacy-form" class="btn-primary">
            <i class="fas fa-save mr-2"></i>
            {{ trans('admin.privacy.save_settings') }}
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Sticky Footer with Action Buttons -->
  <div class="fixed bottom-0 left-0 lg:left-64 right-0 bg-white border-t border-gray-200 shadow-lg z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-3">
          <button type="submit" form="privacy-form" class="btn-primary">
            <i class="fas fa-save mr-2"></i>
            {{ trans('admin.privacy.save_settings') }}
          </button>
          <a href="{{ base_path }}/admin" class="btn-secondary">
            <i class="fas fa-arrow-left mr-2"></i>
            {{ trans('admin.common.dashboard') }}
          </a>
        </div>

        <div class="text-sm text-gray-500">
          <i class="fas fa-info-circle mr-1"></i>
          {{ trans('admin.privacy.configure_hint') }}
        </div>
      </div>
    </div>
  </div>

  <!-- Content -->
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-48">
    <form id="privacy-form" method="post" action="{{ base_path }}/admin/privacy" class="space-y-8">
      <input type="hidden" name="csrf" value="{{ csrf }}">

      <!-- Cookie Banner Settings -->
      <div class="card">
        <div class="bg-gray-50 px-6 py-4 border-b border-gray-200">
          <h2 class="text-lg font-medium text-gray-900 flex items-center">
            <i class="fas fa-cookie-bite mr-3 text-amber-600"></i>
            {{ trans('admin.privacy.cookie_banner') }}
          </h2>
          <p class="text-sm text-gray-600 mt-1">{{ trans('admin.privacy.cookie_banner_hint') }}</p>
        </div>
        <div class="p-6 space-y-6">
          <div class="flex items-center justify-between">
            <div>
              <label class="block text-sm font-medium text-gray-700">{{ trans('admin.privacy.enable_banner') }}</label>
              <p class="text-xs text-gray-500 mt-1">{{ trans('admin.privacy.enable_banner_hint') }}</p>
            </div>
            <label class="relative inline-flex items-center cursor-pointer">
              <input type="checkbox" name="cookie_banner_enabled" class="sr-only peer" {{ settings.cookie_banner_enabled ? 'checked' : '' }}>
              <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
            </label>
          </div>

          <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
            <div class="flex items-start">
              <i class="fas fa-info-circle text-blue-600 mt-0.5 mr-3"></i>
              <div class="text-sm text-blue-800">
                <strong>{{ trans('admin.privacy.how_it_works') }}</strong> {{ trans('admin.privacy.how_it_works_desc') }}
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Essential JavaScript -->
      <div class="card">
        <div class="bg-gray-50 px-6 py-4 border-b border-gray-200">
          <h2 class="text-lg font-medium text-gray-900 flex items-center">
            <i class="fas fa-shield-alt mr-3 text-green-600"></i>
            {{ trans('admin.privacy.essential_js') }}
          </h2>
          <p class="text-sm text-gray-600 mt-1">{{ trans('admin.privacy.essential_js_hint') }}</p>
        </div>
        <div class="p-6">
          <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-4">
            <div class="flex items-start">
              <i class="fas fa-info-circle text-green-600 mt-0.5 mr-3"></i>
              <div class="text-sm text-green-800">
                <strong>{{ trans('admin.privacy.always_loaded') }}</strong> {{ trans('admin.privacy.always_loaded_desc') }}
              </div>
            </div>
          </div>
          <textarea name="custom_js_essential" rows="8" class="form-input font-mono text-sm" placeholder="{{ trans('admin.privacy.essential_placeholder') }}">{{ settings.custom_js_essential }}</textarea>
          <p class="text-xs text-gray-500 mt-2">{{ trans('admin.privacy.js_hint') }}</p>
        </div>
      </div>

      <!-- Analytics JavaScript -->
      <div class="card">
        <div class="bg-gray-50 px-6 py-4 border-b border-gray-200">
          <h2 class="text-lg font-medium text-gray-900 flex items-center">
            <i class="fas fa-chart-line mr-3 text-blue-600"></i>
            {{ trans('admin.privacy.analytics_js') }}
          </h2>
          <p class="text-sm text-gray-600 mt-1">{{ trans('admin.privacy.analytics_js_hint') }}</p>
        </div>
        <div class="p-6">
          <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
            <div class="flex items-start">
              <i class="fas fa-info-circle text-blue-600 mt-0.5 mr-3"></i>
              <div class="text-sm text-blue-800">
                <strong>{{ trans('admin.privacy.consent_required') }}</strong> {{ trans('admin.privacy.consent_analytics_desc') }}
              </div>
            </div>
          </div>
          <textarea name="custom_js_analytics" rows="8" class="form-input font-mono text-sm" placeholder="{{ trans('admin.privacy.analytics_placeholder') }}">{{ settings.custom_js_analytics }}</textarea>
          <p class="text-xs text-gray-500 mt-2">{{ trans('admin.privacy.js_hint') }}</p>
        </div>
      </div>

      <!-- Marketing JavaScript -->
      <div class="card">
        <div class="bg-gray-50 px-6 py-4 border-b border-gray-200">
          <h2 class="text-lg font-medium text-gray-900 flex items-center">
            <i class="fas fa-bullhorn mr-3 text-purple-600"></i>
            {{ trans('admin.privacy.marketing_js') }}
          </h2>
          <p class="text-sm text-gray-600 mt-1">{{ trans('admin.privacy.marketing_js_hint') }}</p>
        </div>
        <div class="p-6">
          <div class="bg-purple-50 border border-purple-200 rounded-lg p-4 mb-4">
            <div class="flex items-start">
              <i class="fas fa-info-circle text-purple-600 mt-0.5 mr-3"></i>
              <div class="text-sm text-purple-800">
                <strong>{{ trans('admin.privacy.consent_required') }}</strong> {{ trans('admin.privacy.consent_marketing_desc') }}
              </div>
            </div>
          </div>
          <textarea name="custom_js_marketing" rows="8" class="form-input font-mono text-sm" placeholder="{{ trans('admin.privacy.marketing_placeholder') }}">{{ settings.custom_js_marketing }}</textarea>
          <p class="text-xs text-gray-500 mt-2">{{ trans('admin.privacy.js_hint') }}</p>
        </div>
      </div>

    </form>
  </div>
</div>
{% endblock %}
