{% extends 'admin/_layout.twig' %}
{% block title %}Nuovo album — photoCMS{% endblock %}
{% block content %}
<div class="min-h-screen bg-gray-50 pb-24">
  <!-- Header -->
  <div class="bg-white border-b border-gray-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
      <div class="flex items-center justify-between">
        <div>
          <h1 class="text-3xl font-bold text-black">Nuovo Album</h1>
          <p class="text-gray-600 mt-1">Crea un nuovo album fotografico</p>
        </div>
        <div class="flex items-center gap-3">
          <a href="{{ base_path }}/admin/albums" class="btn-secondary">
            <i class="fas fa-arrow-left mr-2"></i>
            Torna agli album
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <form id="album-form" method="post" action="{{ base_path }}/admin/albums">
      <input type="hidden" name="csrf" value="{{ csrf }}">
      
      <div class="grid grid-cols-1 xl:grid-cols-12 gap-8">
        <!-- Main Content Column -->
        <div class="xl:col-span-9 space-y-6">
          <!-- Basic Information Card -->
          <div class="card">
            <div class="p-6 border-b border-gray-200">
              <h2 class="text-lg font-semibold text-black flex items-center">
                <i class="fas fa-info-circle mr-3 text-gray-600"></i>
                Informazioni Base
              </h2>
              <p class="text-gray-600 text-sm mt-1">Titolo, descrizione e contenuto dell'album</p>
            </div>
            <div class="p-6 space-y-6">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <label class="block text-sm font-medium text-black mb-2">Titolo *</label>
                  <input class="form-input border-gray-300 focus:border-black focus:ring-black" 
                         type="text" name="title" required 
                         placeholder="Inserisci il titolo dell'album">
                </div>
                <div>
                  <label class="block text-sm font-medium text-black mb-2">Slug URL</label>
                  <input class="form-input border-gray-300 focus:border-black focus:ring-black font-mono text-sm" 
                         type="text" name="slug" 
                         placeholder="url-friendly-slug (auto se vuoto)">
                  <p class="text-xs text-gray-500 mt-1">Lascia vuoto per generazione automatica</p>
                </div>
              </div>
              
              <div>
                <label class="block text-sm font-medium text-black mb-2">Descrizione Breve</label>
                <textarea class="form-input border-gray-300 focus:border-black focus:ring-black" 
                          name="excerpt" rows="4" 
                          placeholder="Breve descrizione che appare nelle anteprime..."
                          maxlength="150"></textarea>
                <p class="text-xs text-gray-500 mt-1">Massimo 150 caratteri per una visualizzazione ottimale. Solo testo semplice.</p>
              </div>
              
              <div>
                <label class="block text-sm font-medium text-black mb-2">Contenuto Completo</label>
                <textarea class="form-input richtext border-gray-300 focus:border-black focus:ring-black" 
                          name="body" rows="32" 
                          placeholder="Descrizione completa con formattazione..."></textarea>
                <p class="text-xs text-gray-500 mt-1">Supporta formattazione ricca: grassetto, corsivo, elenchi, link</p>
              </div>
            </div>
          </div>

          <!-- Upload Card (disabled until saved) -->
          <div class="card">
            <div class="p-6 border-b border-gray-200">
              <h2 class="text-lg font-semibold text-black flex items-center">
                <i class="fas fa-cloud-upload-alt mr-3 text-gray-600"></i>
                Caricamento Immagini
              </h2>
              <p class="text-gray-600 text-sm mt-1">Salva l'album, poi carica le foto nella pagina di modifica</p>
            </div>
            <div class="p-6">
              <div class="w-full border-2 border-dashed border-gray-200 rounded-xl bg-gray-50 text-gray-500 flex items-center justify-center min-h-[180px]">
                <div class="text-center py-6">
                  <i class="fas fa-lock text-3xl mb-3 text-gray-300"></i>
                  <div class="text-sm">Il caricamento è disponibile dopo il salvataggio</div>
                  <div class="text-xs text-gray-400 mt-1">Dopo il salvataggio verrai reindirizzato alla pagina di modifica</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Sidebar -->
        <div class="xl:col-span-3 space-y-6">
          <!-- Categories and Tags Card -->
          <div class="card">
            <div class="p-6 border-b border-gray-200">
              <h2 class="text-lg font-semibold text-black flex items-center">
                <i class="fas fa-tags mr-3 text-gray-600"></i>
                Categorie e Tag
              </h2>
              <p class="text-gray-600 text-sm mt-1">Organizza l'album con categorie e tag</p>
            </div>
            <div class="p-6 space-y-4">
              <div>
                <label class="block text-sm font-medium text-black mb-2">Categorie *</label>
                <select name="categories[]" id="album-categories" class="form-input" multiple required>
                  {% for c in categories %}
                    <option value="{{ c.id }}">{{ c.name }}</option>
                  {% endfor %}
                </select>
                <p class="text-xs text-gray-500 mt-1">Seleziona una o più categorie</p>
              </div>
              
              <div>
                <label class="block text-sm font-medium text-black mb-2">Tag</label>
                <select class="form-input" name="tags[]" id="album-tags" multiple>
                  {% for t in tags %}
                    <option value="{{ t.id }}">{{ t.name }}</option>
                  {% endfor %}
                </select>
                <p class="text-xs text-gray-500 mt-1">Tag opzionali per categorizzazione avanzata</p>
              </div>
            </div>
          </div>

          <!-- Publishing Settings Card -->
          <div class="card">
            <div class="p-6 border-b border-gray-200">
              <h2 class="text-lg font-semibold text-black flex items-center">
                <i class="fas fa-globe mr-3 text-gray-600"></i>
                Impostazioni Pubblicazione
              </h2>
              <p class="text-gray-600 text-sm mt-1">Data, template e visibilità</p>
            </div>
            <div class="p-6 space-y-4">
              <div class="grid grid-cols-2 gap-4">
                <div>
                  <label class="block text-sm font-medium text-black mb-2">Data scatto</label>
                  <input class="form-input border-gray-300 focus:border-black focus:ring-black" 
                         type="date" name="shoot_date">
                </div>
                <div>
                  <label class="block text-sm font-medium text-black mb-2">Ordine</label>
                  <input class="form-input border-gray-300 focus:border-black focus:ring-black" 
                         type="number" name="sort_order" value="0" 
                         placeholder="0">
                </div>
              </div>
              
              <div>
                <label class="block text-sm font-medium text-black mb-2">Template</label>
                <select class="form-input border-gray-300 focus:border-black focus:ring-black" name="template_id">
                  <option value="">Template predefinito</option>
                  {% for template in templates %}
                    <option value="{{ template.id }}">{{ template.name }}</option>
                  {% endfor %}
                </select>
              </div>
              
              <div class="space-y-3">
                <label class="flex items-center gap-3">
                  <input class="h-4 w-4 text-black border-gray-300 rounded focus:ring-black" 
                         type="checkbox" name="show_date" id="show_date" checked>
                  <span class="text-sm font-medium text-gray-700">Mostra data di scatto</span>
                </label>
                
                <label class="flex items-center gap-3">
                  <input class="h-4 w-4 text-black border-gray-300 rounded focus:ring-black" 
                         type="checkbox" name="is_published" id="pub">
                  <span class="text-sm font-medium text-gray-700">Pubblica subito</span>
                </label>
                
                <label class="flex items-center gap-3">
                  <input class="h-4 w-4 text-black border-gray-300 rounded focus:ring-black" 
                         type="checkbox" name="allow_downloads" id="allow_downloads">
                  <span class="text-sm font-medium text-gray-700">Consenti download immagini</span>
                </label>
              </div>
            </div>
          </div>

          <!-- Equipment Card -->
          <div class="card">
            <div class="p-6 border-b border-gray-200">
              <h2 class="text-lg font-semibold text-black flex items-center">
                <i class="fas fa-camera mr-3 text-gray-600"></i>
                Equipment Fotografico
              </h2>
              <p class="text-gray-600 text-sm mt-1">Attrezzatura utilizzata per l'album</p>
            </div>
            <div class="p-6 space-y-4">
              <div>
                <label class="block text-sm font-medium text-black mb-2">Fotocamere</label>
                <select class="form-input border-gray-300 focus:border-black focus:ring-black" name="cameras[]" id="album-cameras" multiple>
                  {% for camera in cameras %}
                    <option value="{{ camera.id }}">{{ camera.make }} {{ camera.model }}</option>
                  {% endfor %}
                </select>
              </div>
              
              <div>
                <label class="block text-sm font-medium text-black mb-2">Obiettivi</label>
                <select class="form-input border-gray-300 focus:border-black focus:ring-black" name="lenses[]" id="album-lenses" multiple>
                  {% for lens in lenses %}
                    <option value="{{ lens.id }}">{{ lens.brand }} {{ lens.model }}</option>
                  {% endfor %}
                </select>
              </div>
              
              <div>
                <label class="block text-sm font-medium text-black mb-2">Pellicole</label>
                <select class="form-input border-gray-300 focus:border-black focus:ring-black" name="films[]" id="album-films" multiple>
                  {% for film in films %}
                    <option value="{{ film.id }}">{{ film.brand }} {{ film.name }}</option>
                  {% endfor %}
                </select>
              </div>
              
              <div>
                <label class="block text-sm font-medium text-black mb-2">Sviluppatori</label>
                <select class="form-input border-gray-300 focus:border-black focus:ring-black" name="developers[]" id="album-developers" multiple>
                  {% for developer in developers %}
                    <option value="{{ developer.id }}">{{ developer.name }}</option>
                  {% endfor %}
                </select>
              </div>
              
              <div>
                <label class="block text-sm font-medium text-black mb-2">Laboratori</label>
                <select class="form-input border-gray-300 focus:border-black focus:ring-black" name="labs[]" id="album-labs" multiple>
                  {% for lab in labs %}
                    <option value="{{ lab.id }}">{{ lab.name }}</option>
                  {% endfor %}
                </select>
              </div>
            </div>
          </div>

          <!-- Locations and Security Card -->
          <div class="card">
            <div class="p-6 border-b border-gray-200">
              <h2 class="text-lg font-semibold text-black flex items-center">
                <i class="fas fa-map-marker-alt mr-3 text-gray-600"></i>
                Luoghi e Sicurezza
              </h2>
              <p class="text-gray-600 text-sm mt-1">Posizioni e protezione dell'album</p>
            </div>
            <div class="p-6 space-y-4">
              <div>
                <label class="block text-sm font-medium text-black mb-2">Luoghi di scatto</label>
                <select class="form-input border-gray-300 focus:border-black focus:ring-black" name="locations[]" id="album-locations" multiple>
                  {% for loc in locations %}
                    <option value="{{ loc.id }}">{{ loc.name }}</option>
                  {% endfor %}
                </select>
                <p class="text-xs text-gray-500 mt-1">Seleziona uno o più luoghi dove è stato girato l'album</p>
              </div>
              
              <div>
                <label class="block text-sm font-medium text-black mb-2">Password Album (opzionale)</label>
                <input class="form-input border-gray-300 focus:border-black focus:ring-black" 
                       type="password" name="password" 
                       placeholder="Imposta password per proteggere l'album">
                <p class="text-xs text-gray-500 mt-1">Se impostata, l'album richiederà password per l'accesso pubblico</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>

<!-- Sticky Footer with Action Buttons -->
<div class="fixed bottom-0 left-64 right-0 bg-white border-t border-gray-200 shadow-lg z-50">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
    <div class="flex items-center justify-between">
      <div class="flex items-center gap-3">
        <button type="submit" form="album-form" class="btn-primary">
          <i class="fas fa-save mr-2"></i>
          Crea Album
        </button>
        <a href="{{ base_path }}/admin/albums" class="btn-secondary">
          <i class="fas fa-times mr-2"></i>
          Annulla
        </a>
      </div>
      
      <div class="text-sm text-gray-500">
        <i class="fas fa-info-circle mr-1"></i>
        Completa i campi obbligatori per salvare
      </div>
    </div>
  </div>
</div>

  <!-- Modal edit image (for when images are present after upload) -->
  <div id="image-modal" class="fixed inset-0 bg-black/40 hidden items-center justify-center z-50">
    <div class="bg-white w-full max-w-2xl rounded shadow-lg overflow-hidden">
      <div class="px-5 py-3 border-b flex items-center justify-between">
        <h3 class="text-lg font-medium">Modifica immagine</h3>
        <button type="button" id="image-modal-close" class="text-gray-500 hover:text-black">✕</button>
      </div>
      <form id="image-form" method="post">
        <input type="hidden" name="csrf" value="{{ csrf }}">
        <div class="p-5 grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Alt text</label>
            <input type="text" name="alt_text" id="f-alt" class="form-input">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Titolo/Caption</label>
            <input type="text" name="caption" id="f-caption" class="form-input">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Camera</label>
            <select name="camera_id" id="f-camera" class="form-input">
              <option value="">—</option>
              {% for camera in cameras %}
                <option value="{{ camera.id }}">{{ camera.make }} {{ camera.model }}</option>
              {% endfor %}
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Lens</label>
            <select name="lens_id" id="f-lens" class="form-input">
              <option value="">—</option>
              {% for lens in lenses %}
                <option value="{{ lens.id }}">{{ lens.brand }} {{ lens.model }}</option>
              {% endfor %}
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Film</label>
            <select name="film_id" id="f-film" class="form-input">
              <option value="">—</option>
              {% for film in films %}
                <option value="{{ film.id }}">{{ film.brand }} {{ film.name }}</option>
              {% endfor %}
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Developer</label>
            <select name="developer_id" id="f-developer" class="form-input">
              <option value="">—</option>
              {% for dev in developers %}
                <option value="{{ dev.id }}">{{ dev.name }}</option>
              {% endfor %}
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Lab</label>
            <select name="lab_id" id="f-lab" class="form-input">
              <option value="">—</option>
              {% for lab in labs %}
                <option value="{{ lab.id }}">{{ lab.name }}</option>
              {% endfor %}
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Location</label>
            <select name="location_id" id="f-location" class="form-input">
              <option value="">—</option>
              {% for loc in locations %}
                <option value="{{ loc.id }}">{{ loc.name }}</option>
              {% endfor %}
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Custom camera</label>
            <input type="text" name="custom_camera" id="f-custom-camera" class="form-input">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Custom lens</label>
            <input type="text" name="custom_lens" id="f-custom-lens" class="form-input">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Custom film</label>
            <input type="text" name="custom_film" id="f-custom-film" class="form-input">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">ISO</label>
            <input type="number" name="iso" id="f-iso" class="form-input">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Shutter</label>
            <input type="text" name="shutter_speed" id="f-shutter" class="form-input" placeholder="1/125">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Aperture</label>
            <input type="number" step="0.1" name="aperture" id="f-aperture" class="form-input" placeholder="2.8">
          </div>
        </div>
        <div class="px-5 py-3 border-t flex items-center justify-end gap-2">
          <button type="button" id="image-cancel" class="btn-secondary">Annulla</button>
          <button type="submit" class="btn-primary">Salva</button>
        </div>
      </form>
    </div>
  </div>
  <script>
    // TomSelect + TinyMCE are initialized by the Vite bundle (resources/admin.js)
  </script>
  
  <script>
    // Album create page initialization - Compatible with SPA
    function initializeAlbumCreatePage() {
      console.log('Initializing Album create page...');
      
      // Initialize upload functionality
      initUploadFunctionality();
      
      console.log('Album create page initialization completed');
    }
    
    function initUploadFunctionality() {
      // Get elements
      const form = document.getElementById('album-form');
      const uploader = document.getElementById('uploader');
      const input = document.getElementById('file-input');
      
      if (!form || !uploader || !input) {
        console.warn('Upload elements not found');
        return;
      }
      
      const csrf = form.querySelector('input[name="csrf"]')?.value;
      let createdAlbumId = null;
      
      function gatherFormData(){
        const fd = new URLSearchParams();
        new FormData(form).forEach((v,k)=>{ if(k!=='csrf') fd.append(k, typeof v === 'string' ? v : String(v)); });
        return fd.toString();
      }
      
      async function ensureAlbumId(){
        if (createdAlbumId) return createdAlbumId;
        const body = gatherFormData();
        const res = await fetch(form.action, { 
          method:'POST', 
          headers:{ 
            'Content-Type':'application/x-www-form-urlencoded', 
            'X-CSRF-Token': csrf, 
            'Accept':'application/json' 
          }, 
          body 
        });
        const data = await res.json();
        if (!data || !data.id) throw new Error('Creazione album fallita');
        createdAlbumId = data.id;
        return createdAlbumId;
      }
      
      // Remove existing listeners to prevent duplicates
      uploader.removeEventListener('click', handleUploaderClick);
      uploader.removeEventListener('dragover', handleDragOver);
      uploader.removeEventListener('dragleave', handleDragLeave);
      uploader.removeEventListener('drop', handleDrop);
      input.removeEventListener('change', handleInputChange);
      
      // Add event listeners
      uploader.addEventListener('click', handleUploaderClick);
      uploader.addEventListener('dragover', handleDragOver);
      uploader.addEventListener('dragleave', handleDragLeave);
      uploader.addEventListener('drop', handleDrop);
      input.addEventListener('change', handleInputChange);
      
      function handleUploaderClick() {
        input.click();
      }
      
      function handleDragOver(e) {
        e.preventDefault();
        uploader.classList.add('bg-gray-100');
      }
      
      function handleDragLeave(e) {
        e.preventDefault();
        uploader.classList.remove('bg-gray-100');
      }
      
      async function handleDrop(e) {
        e.preventDefault();
        uploader.classList.remove('bg-gray-100');
        if (!e.dataTransfer) return;
        const files = Array.from(e.dataTransfer.files);
        await uploadFiles(files);
      }
      
      async function handleInputChange() {
        await uploadFiles(Array.from(input.files||[]));
        input.value='';
      }
      
      async function uploadFiles(files){
        if (!files.length) return;
        
        // Basic validation: require title and at least one category before auto-create
        const titleEl = form.querySelector('input[name="title"]');
        const catsEl = document.getElementById('album-categories');
        const hasTitle = titleEl && titleEl.value.trim().length > 0;
        const hasCat = catsEl && Array.from(catsEl.selectedOptions).length > 0;
        
        if (!hasTitle || !hasCat) {
          alert('Inserisci almeno Titolo e una Categoria prima di caricare immagini.');
          return;
        }
        
        const id = await ensureAlbumId();
        
        // Upload files and set first one as cover
        for (let i = 0; i < files.length; i++) {
          const f = files[i];
          const fd = new FormData(); 
          fd.append('file', f);
          
          const response = await fetch(`{{ base_path }}/admin/albums/${id}/upload`, { 
            method:'POST', 
            headers:{ 'X-CSRF-Token': csrf, 'Accept':'application/json' }, 
            body: fd 
          });
          
          // Set the first uploaded image as cover (new album has no cover by default)
          if (i === 0 && response.ok) {
            const result = await response.json();
            if (result && result.id) {
              // Set the first uploaded image as cover
              await fetch(`{{ base_path }}/admin/albums/${id}/cover/${result.id}`, { 
                method:'POST', 
                headers: { 'X-CSRF-Token': csrf, 'Accept':'application/json' }
              });
            }
          }
        }
        
        // Redirect to edit to manage ordering and details
        window.location.href = `{{ base_path }}/admin/albums/${id}/edit`;
      }
    }
    
    // Initialize on DOM ready
    document.addEventListener('DOMContentLoaded', initializeAlbumCreatePage);
    
    // Make initialization function globally available for SPA re-initialization
    if (!window.pageInitializers) {
      window.pageInitializers = {};
    }
    window.pageInitializers.albumsCreate = initializeAlbumCreatePage;
    
    // Auto-initialize if this is loaded in SPA context
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initializeAlbumCreatePage);
    } else {
      initializeAlbumCreatePage();
    }
  </script>
  <style>
    /* TomSelect wrapper - no z-index, natural stacking */
    .ts-wrapper {
      position: relative !important;
      background-color: #ffffff !important;
      border-radius: 0.375rem !important;
      width: 100% !important;
      display: block !important;
    }
    
    .ts-wrapper .ts-control {
      background-color: #ffffff !important;
      border: 1px solid #d1d5db !important;
      position: relative !important;
      width: 100% !important;
      min-height: 38px !important;
    }
    
    /* Only the dropdown should have high z-index */
    .ts-dropdown { 
      z-index: 99999 !important; 
      background-color: #ffffff !important; 
      border: 1px solid #d1d5db !important;
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05) !important;
      position: absolute !important;
      top: 100% !important;
      left: 0 !important;
      right: 0 !important;
      width: 100% !important;
      border-radius: 0.375rem !important;
      margin-top: 1px !important;
    }
    
    .ts-dropdown-content {
      z-index: 99999 !important;
      background-color: #ffffff !important;
      max-height: 200px !important;
      overflow-y: auto !important;
      width: 100% !important;
    }
    
    .ts-dropdown .option {
      background-color: #ffffff !important;
      color: #374151 !important;
      padding: 8px 12px !important;
      cursor: pointer !important;
      border: none !important;
      width: 100% !important;
      display: block !important;
      box-sizing: border-box !important;
      white-space: nowrap !important;
      overflow: hidden !important;
      text-overflow: ellipsis !important;
    }
    
    .ts-dropdown .option:hover,
    .ts-dropdown .option.active {
      background-color: #f3f4f6 !important;
      color: #111827 !important;
    }
    
    .ts-dropdown .option.selected {
      background-color: #3b82f6 !important;
      color: #ffffff !important;
    }
    
    /* Equipment section specific - no z-index for wrappers */
    #album-cameras + .ts-wrapper,
    #album-lenses + .ts-wrapper,
    #album-films + .ts-wrapper, 
    #album-developers + .ts-wrapper,
    #album-labs + .ts-wrapper {
      background-color: #ffffff !important;
      width: 100% !important;
    }
    
    /* Only dropdowns get high z-index */
    #album-cameras + .ts-wrapper .ts-dropdown,
    #album-lenses + .ts-wrapper .ts-dropdown,
    #album-films + .ts-wrapper .ts-dropdown,
    #album-developers + .ts-wrapper .ts-dropdown,
    #album-labs + .ts-wrapper .ts-dropdown {
      z-index: 99999 !important;
      position: absolute !important;
      width: 100% !important;
    }
    
    /* Equipment section normal stacking */
    .border-t.pt-4.mt-4 {
      position: relative !important;
      background-color: #ffffff !important;
    }
    
    /* Full width for all TomSelect elements */
    .ts-wrapper,
    .ts-wrapper .ts-control,
    .ts-wrapper input {
      width: 100% !important;
      box-sizing: border-box !important;
    }
    
    /* Additional ID-based targeting for full width */
    #album-cameras-ts-dropdown,
    #album-lenses-ts-dropdown,
    #album-films-ts-dropdown,
    #album-developers-ts-dropdown,
    #album-labs-ts-dropdown {
      z-index: 99999 !important;
      background-color: #ffffff !important;
      border: 1px solid #d1d5db !important;
      border-radius: 0.375rem !important;
      position: absolute !important;
      width: 100% !important;
      left: 0 !important;
      right: 0 !important;
    }
  </style>
{% endblock %}
