# PHP Upload Limits Override (per Apache)
<IfModule mod_php.c>
    php_value upload_max_filesize 32M
    php_value post_max_size 32M
    php_value max_file_uploads 20
    php_value max_execution_time 300
    php_value max_input_time 300
    php_value memory_limit 256M
</IfModule>

<IfModule mod_rewrite.c>
  RewriteEngine On
  
  # Skip if already in public directory
  RewriteRule ^public/ - [L]
  
  # If the request is not for an existing file or directory, route into /public
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ public/$1 [L]
</IfModule>



# Protect sensitive files
<Files ".env">
    Order Allow,Deny
    Deny from all
</Files>

<Files ".env.*">
    Order Allow,Deny
    Deny from all
</Files>

<Files "composer.json">
    Order Allow,Deny
    Deny from all
</Files>

<Files "composer.lock">
    Order Allow,Deny
    Deny from all
</Files>

<Files "package.json">
    Order Allow,Deny
    Deny from all
</Files>

<Files "package-lock.json">
    Order Allow,Deny
    Deny from all
</Files>